// name:     Ticket14485.mos
// keywords: record constant binding function
// status:   correct
// teardown_command: rm -rf bugFuncRecordParam* output.log


loadString("
    model bugFuncRecordParam

  record Geom
    Real D;
    Real b;
    Real De;
  end Geom;

  record Style
    constant String name;
    constant Real Ratios[3];
  end Style;

  function mSize
    input Real D;
    input Style machineStyle;
    output Geom geo;
  algorithm
    geo.D  := machineStyle.Ratios[1] * D;
    geo.b  := machineStyle.Ratios[2] * D;
    geo.De := machineStyle.Ratios[3] * D;
  end mSize;

  parameter Real D = 1.23;

  parameter Style short = Style(name=\"Clive\", Ratios={1.0,0.24,0.43});
  parameter Geom geo = mSize(D, short);
equation
end bugFuncRecordParam;
"); getErrorString();

simulate(bugFuncRecordParam); getErrorString();

// Result:
// true
// ""
// record SimulationResult
//     resultFile = "bugFuncRecordParam_res.mat",
//     simulationOptions = "startTime = 0.0, stopTime = 1.0, numberOfIntervals = 500, tolerance = 1e-6, method = 'dassl', fileNamePrefix = 'bugFuncRecordParam', options = '', outputFormat = 'mat', variableFilter = '.*', cflags = '', simflags = ''",
//     messages = "LOG_SUCCESS       | info    | The initialization finished successfully without homotopy method.
// LOG_SUCCESS       | info    | The simulation finished successfully.
// "
// end SimulationResult;
// ""
// endResult
