// name:     GenerateMSLIcons
// keywords: generate MSL icons
// status: correct
// teardown_command: rm -rf ModelicaIcons *.log
//

loadModel(Modelica);
getErrorString();
echo(false);
py:=getInstallationDirectoryPath() + "/share/doc/omc/testmodels/generate_icons.py";
getErrorString();
classes:={"Complex",
          "Modelica.Blocks.Continuous.CriticalDamping",
          "Modelica.Electrical.Analog.Basic.EMF",
          "Modelica.Mechanics.Rotational.Examples.Utilities.Spring",
          "Modelica.Fluid.Sensors.BaseClasses.PartialRelativeSensor",
          "Modelica.Fluid.Sensors.Pressure"};

commands:={"python3 "+py+" --quiet "+cl+" > "+cl+".log 2>&1" for cl in classes};
echo(true);
res:=system_parallel(commands);
getErrorString();
for cl in classes loop
  f := "ModelicaIcons/"+cl+".svg";
  if regularFileExists(f) then
    print(readFile(f) + "\n");
    print(getErrorString() + "\n");
  else
    print(readFile(cl+".log") + "\n");
    print(getErrorString() + "\n");
  end if;
end for;

// Result:
// true
// ""
// true
// {0,0,0,0,0,0}
// ""
// <?xml version="1.0" encoding="utf-8" ?>
// <svg baseProfile="full" height="210.0" version="1.1" viewBox="0 0 210.0 210.0" width="210.0" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs /><rect fill="rgb(160,160,164)" fill-opacity="1" height="200.0" rx="25.0" ry="25.0" stroke="rgb(160,160,164)" stroke-width="0.25mm" width="200.0" x="5.0" y="5.0" /><defs /><text dominant-baseline="middle" fill="rgb(255,255,255)" fill-opacity="1" font-family="Verdana" font-size="100.0" text-anchor="middle" x="105.0" y="105.0">C</text><defs /></svg>
//
// <?xml version="1.0" encoding="utf-8" ?>
// <svg baseProfile="full" height="306.0" version="1.1" viewBox="0 0 310.0 306.0" width="310.0" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs /><rect fill="rgb(255,255,255)" fill-opacity="1" height="200.0" rx="0.0" ry="0.0" stroke="rgb(0,0,127)" stroke-width="0.25mm" width="200.0" x="55.0" y="55.0" /><defs /><text dominant-baseline="middle" fill="rgb(0,0,255)" fill-opacity="1" font-family="Verdana" font-size="40.0" text-anchor="middle" x="155.0" y="25.0">name</text><defs /><polyline fill="none" fill-opacity="0" points="74.3103,77.3744 74.3103,245.37439999999998" stroke="rgb(192,192,192)" stroke-width="0.25mm" /><defs /><polygon fill="rgb(192,192,192)" fill-opacity="1" points="75.2956,64.3695 67.2956,86.3695 83.2956,86.3695 75.2956,64.3695" stroke="rgb(192,192,192)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="65.0,235.0 237.0,235.0" stroke="rgb(192,192,192)" stroke-width="0.25mm" /><defs /><polygon fill="rgb(192,192,192)" fill-opacity="1" points="245.0,235.0 223.0,227.0 223.0,243.0 245.0,235.0" stroke="rgb(192,192,192)" stroke-width="0.25mm" /><defs /><text dominant-baseline="middle" fill="rgb(192,192,192)" fill-opacity="1" font-family="Verdana" font-size="60.0" text-anchor="middle" x="185.0" y="185.0">PTn</text><defs /><path d="M 233.986 106.363 C 193.715 108.6975 153.44400000000002 111.03200000000001 135.74 126.985 135.74 126.985 118.036 142.938 111.518 178.969 111.518 178.969 105.0 215.0 90.0 225.0 90.0 225.0 75.0 235.0 75.0 235.0" fill="none" fill-opacity="0" stroke="rgb(0,0,127)" stroke-width="0.25mm" /><defs /><text dominant-baseline="middle" fill="rgb(192,192,192)" fill-opacity="1" font-family="Verdana" font-size="46.0" text-anchor="middle" x="133.0" y="84.0">n</text><defs /><text dominant-baseline="middle" fill="rgb(0,0,0)" fill-opacity="1" font-family="Verdana" font-size="40.0" text-anchor="middle" x="163.0" y="281.0">f=f</text><defs /><g id="u"><polygon fill="rgb(0,0,127)" fill-opacity="1" points="15.0,135.0 55.0,155.0 15.0,175.0" stroke="rgb(0,0,127)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">u</text><text id="type">Modelica.Blocks.Interfaces.RealInput</text><text id="classDesc">'input Real' as connector</text><text id="desc">Connector of Real input signal</text></g></g><g id="y"><polygon fill="rgb(255,255,255)" fill-opacity="1" points="255.0,145.0 275.0,155.0 255.0,165.0" stroke="rgb(0,0,127)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">y</text><text id="type">Modelica.Blocks.Interfaces.RealOutput</text><text id="classDesc">'output Real' as connector</text><text id="desc">Connector of Real output signal</text></g></g></svg>
//
// <?xml version="1.0" encoding="utf-8" ?>
// <svg baseProfile="full" height="230.0" version="1.1" viewBox="0 0 310.0 230.0" width="310.0" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs /><rect fill="url(#0)" height="20.0" rx="0.0" ry="0.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" width="49.0" x="70.0" y="105.0" /><defs><linearGradient id="0" x1="0%" x2="0%" y1="0%" y2="100%"><stop offset="0" stop-color="rgb(0, 0, 0)" stop-opacity="1" /><stop offset="0.3" stop-color="rgb(192, 192, 192)" stop-opacity="1" /><stop offset="0.7" stop-color="rgb(192, 192, 192)" stop-opacity="1" /><stop offset="1" stop-color="rgb(0, 0, 0)" stop-opacity="1" /></linearGradient></defs><rect fill="url(#1)" height="20.0" rx="0.0" ry="0.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" width="65.0" x="190.0" y="105.0" /><defs><linearGradient id="1" x1="0%" x2="0%" y1="0%" y2="100%"><stop offset="0" stop-color="rgb(0, 0, 0)" stop-opacity="1" /><stop offset="0.3" stop-color="rgb(192, 192, 192)" stop-opacity="1" /><stop offset="0.7" stop-color="rgb(192, 192, 192)" stop-opacity="1" /><stop offset="1" stop-color="rgb(0, 0, 0)" stop-opacity="1" /></linearGradient></defs><ellipse cx="155.0" cy="115.0" fill="rgb(255,255,255)" fill-opacity="1" rx="40.0" ry="40.0" stroke="rgb(0,0,255)" stroke-width="0.25mm" /><defs /><text dominant-baseline="middle" fill="rgb(0,0,255)" fill-opacity="1" font-family="Verdana" font-size="40.0" text-anchor="middle" x="155.0" y="45.0">name</text><defs /><text dominant-baseline="middle" fill="rgb(0,0,0)" fill-opacity="1" font-family="Verdana" font-size="40.0" text-anchor="middle" x="155.0" y="185.0">k=k</text><defs /><polyline fill="none" fill-opacity="0" points="55.0,145.0 115.0,145.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="55.0,165.0 75.0,145.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="75.0,165.0 95.0,145.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="95.0,165.0 115.0,145.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="85.0,145.0 85.0,125.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="155.0,75.0 155.0,65.0" stroke="rgb(0,0,255)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="155.0,165.0 155.0,155.0" stroke="rgb(0,0,255)" stroke-width="0.25mm" /><defs /><g id="p"><rect fill="rgb(0,0,255)" fill-opacity="1" height="19.99907344264068" rx="0.0" ry="0.0" stroke="rgb(0,0,255)" stroke-width="0.25mm" width="20.00092651443589" x="144.99953674278206" y="5.000463278679661" /><defs /><g display="none" id="info"><text id="name">p</text><text id="type">Modelica.Electrical.Analog.Interfaces.PositivePin</text><text id="classDesc">Positive pin of an electrical component</text><text id="desc">Positive electrical pin</text></g></g><g id="n"><rect fill="rgb(255,255,255)" fill-opacity="1" height="19.99907344264068" rx="0.0" ry="0.0" stroke="rgb(0,0,255)" stroke-width="0.25mm" width="20.00092651443589" x="144.99953674278206" y="205.00046327867966" /><defs /><g display="none" id="info"><text id="name">n</text><text id="type">Modelica.Electrical.Analog.Interfaces.NegativePin</text><text id="classDesc">Negative pin of an electrical component</text><text id="desc">Negative electrical pin</text></g></g><g id="flange"><ellipse cx="255.0" cy="115.0" fill="rgb(255,255,255)" fill-opacity="1" rx="10.0" ry="10.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">flange</text><text id="type">Modelica.Mechanics.Rotational.Interfaces.Flange_b</text><text id="classDesc">One-dimensional rotational flange of a shaft (non-filled circle icon)</text><text id="desc">Flange</text></g></g><g id="support"><ellipse cx="55.0" cy="115.0" fill="rgb(95,95,95)" fill-opacity="1" rx="6.666666666666671" ry="6.666666666666664" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><rect fill="rgb(192,192,192)" fill-opacity="1" height="20.0" rx="0.0" ry="0.0" stroke="rgb(192,192,192)" stroke-width="0.25mm" width="20.0" x="45.0" y="105.0" /><defs /><ellipse cx="55.0" cy="115.0" fill="rgb(95,95,95)" fill-opacity="1" rx="6.666666666666671" ry="6.666666666666664" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">support</text><text id="type">Modelica.Mechanics.Rotational.Interfaces.Support</text><text id="classDesc">Support/housing flange of a one-dimensional rotational shaft</text><text id="desc">Support/housing of emf shaft</text></g></g></svg>
//
// <?xml version="1.0" encoding="utf-8" ?>
// <svg baseProfile="full" height="304.0" version="1.1" viewBox="0 0 310.0 304.0" width="310.0" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs /><rect fill="rgb(255,255,255)" fill-opacity="1" height="200.0" rx="0.0" ry="0.0" stroke="rgb(0,0,127)" stroke-width="0.25mm" width="200.0" x="55.0" y="55.0" /><defs /><text dominant-baseline="middle" fill="rgb(0,0,255)" fill-opacity="1" font-family="Verdana" font-size="40.0" text-anchor="middle" x="155.0" y="25.0">name</text><defs /><text dominant-baseline="middle" fill="rgb(128,128,128)" fill-opacity="1" font-family="Verdana" font-size="32.0" text-anchor="middle" x="155.0" y="207.0">to FMU</text><defs /><text dominant-baseline="middle" fill="rgb(0,0,0)" fill-opacity="1" font-family="Verdana" font-size="30.0" text-anchor="start" x="61.0" y="59.0">phi1</text><defs /><text dominant-baseline="middle" fill="rgb(0,0,0)" fill-opacity="1" font-family="Verdana" font-size="30.0" text-anchor="middle" x="155.0" y="284.0">c=c</text><defs /><image height="92.0" width="180.0" x="67.0" xlink:href="data:image;base64," y="99.0" /><defs /><text dominant-baseline="middle" fill="rgb(0,0,0)" fill-opacity="1" font-family="Verdana" font-size="30.0" text-anchor="end" x="251.0" y="89.0">phi2</text><defs /><text dominant-baseline="middle" fill="rgb(0,0,0)" fill-opacity="1" font-family="Verdana" font-size="30.0" text-anchor="end" x="249.0" y="245.0">tau2</text><defs /><text dominant-baseline="middle" fill="rgb(0,0,0)" fill-opacity="1" font-family="Verdana" font-size="30.0" text-anchor="start" x="65.0" y="219.0">tau1</text><defs /><g id="phi1"><polygon fill="rgb(0,0,127)" fill-opacity="1" points="15.0,55.0 55.0,75.0 15.0,95.0" stroke="rgb(0,0,127)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">phi1</text><text id="type">Modelica.Blocks.Interfaces.RealInput</text><text id="classDesc">'input Real' as connector</text><text id="desc">Angle of left flange of force element</text></g></g><g id="tau1"><polygon fill="rgb(255,255,255)" fill-opacity="1" points="55.0,225.0 35.0,235.0 55.0,245.0" stroke="rgb(0,0,127)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">tau1</text><text id="type">Modelica.Blocks.Interfaces.RealOutput</text><text id="classDesc">'output Real' as connector</text><text id="desc">Torque generated by the force element</text></g></g><g id="phi2"><polygon fill="rgb(0,0,127)" fill-opacity="1" points="295.0,55.0 255.0,75.0 295.0,95.0" stroke="rgb(0,0,127)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">phi2</text><text id="type">Modelica.Blocks.Interfaces.RealInput</text><text id="classDesc">'input Real' as connector</text><text id="desc">Angle of right flange of force element</text></g></g><g id="tau2"><polygon fill="rgb(255,255,255)" fill-opacity="1" points="255.0,225.0 275.0,235.0 255.0,245.0" stroke="rgb(0,0,127)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">tau2</text><text id="type">Modelica.Blocks.Interfaces.RealOutput</text><text id="classDesc">'output Real' as connector</text><text id="desc">Torque generated by the force element</text></g></g></svg>
//
// <?xml version="1.0" encoding="utf-8" ?>
// <svg baseProfile="full" height="210.0" version="1.1" viewBox="0 0 310.0 210.0" width="310.0" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs /><rect fill="rgb(245,245,245)" fill-opacity="1" height="80.0" rx="0.0" ry="0.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" width="140.0" x="85.0" y="85.0" /><defs /><polygon fill="rgb(0,0,0)" fill-opacity="1" points="155.0,145.0 145.0,121.0 165.0,121.0 155.0,145.0" /><defs /><polyline fill="none" fill-opacity="0" points="155.0,105.0 155.0,121.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="85.0,105.0 155.0,105.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="105.0,145.0 105.0,165.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="125.0,145.0 125.0,165.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="145.0,145.0 145.0,165.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="165.0,145.0 165.0,165.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="185.0,145.0 185.0,165.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="205.0,145.0 205.0,165.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="55.0,105.0 85.0,105.0" stroke="rgb(0,127,255)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="225.0,105.0 255.0,105.0" stroke="rgb(0,127,255)" stroke-width="0.25mm" /><defs /><text dominant-baseline="middle" fill="rgb(0,0,255)" fill-opacity="1" font-family="Verdana" font-size="40.0" text-anchor="middle" x="155.0" y="45.0">name</text><defs /><polyline fill="none" fill-opacity="0" points="187.0,102.0 97.0,102.0" stroke="rgb(0,128,255)" stroke-width="0.25mm" /><defs /><polygon fill="rgb(0,128,255)" fill-opacity="1" points="177.0,87.0 217.0,102.0 177.0,117.0 177.0,87.0" stroke="rgb(0,128,255)" stroke-width="0.25mm" /><defs /><g id="port_a"><ellipse cx="55.0" cy="105.0" fill="rgb(0,127,255)" fill-opacity="1" rx="10.0" ry="10.0" stroke="rgb(0,127,255)" stroke-width="0.25mm" /><defs /><ellipse cx="55.0" cy="105.0" fill="rgb(0,127,255)" fill-opacity="1" rx="10.0" ry="10.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">port_a</text><text id="type">Modelica.Fluid.Interfaces.FluidPort_a</text><text id="classDesc">Generic fluid connector at design inlet</text><text id="desc" /></g></g><g id="port_b"><ellipse cx="255.0" cy="105.0" fill="rgb(0,127,255)" fill-opacity="1" rx="10.0" ry="10.0" stroke="rgb(0,127,255)" stroke-width="0.25mm" /><defs /><ellipse cx="255.0" cy="105.0" fill="rgb(0,127,255)" fill-opacity="1" rx="10.0" ry="10.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><ellipse cx="255.0" cy="105.0" fill="rgb(255,255,255)" fill-opacity="1" rx="8.0" ry="8.0" stroke="rgb(0,127,255)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">port_b</text><text id="type">Modelica.Fluid.Interfaces.FluidPort_b</text><text id="classDesc">Generic fluid connector at design outlet</text><text id="desc" /></g></g></svg>
//
// <?xml version="1.0" encoding="utf-8" ?>
// <svg baseProfile="full" height="240.0" version="1.1" viewBox="0 0 311.0 240.0" width="311.0" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs /><ellipse cx="155.0" cy="125.0" fill="rgb(245,245,245)" fill-opacity="1" rx="70.0" ry="70.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="155.0,55.0 155.0,85.0" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="177.9,92.2 195.2,67.7" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="132.1,92.2 114.8,67.7" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="192.6,111.3 220.8,101.1" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="117.4,111.3 89.2,101.1" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><ellipse cx="155.0" cy="125.0" fill="none" fill-opacity="0" rx="12.0" ry="12.0" stroke="rgb(64,64,64)" stroke-width="0.25mm" /><defs /><polygon fill="rgb(64,64,64)" fill-opacity="1" points="150.23140170268132,123.49651395789338 171.13439318635196,67.17542601533324 174.54531854738605,63.00822213485722 174.9492718242069,68.37821484901855 159.76859829731868,126.50348604210662" /><defs /><ellipse cx="155.0" cy="125.0" fill="rgb(64,64,64)" fill-opacity="1" rx="7.0" ry="7.0" /><defs /><polyline fill="none" fill-opacity="0" points="225.0,125.0 255.0,125.0" stroke="rgb(0,0,127)" stroke-width="0.25mm" /><defs /><polyline fill="none" fill-opacity="0" points="155.0,195.0 155.0,225.0" stroke="rgb(0,127,255)" stroke-width="0.25mm" /><defs /><text dominant-baseline="middle" fill="rgb(0,0,255)" fill-opacity="1" font-family="Verdana" font-size="40.0" text-anchor="middle" x="155.0" y="25.0">name</text><defs /><text dominant-baseline="middle" fill="rgb(0,0,0)" fill-opacity="1" font-family="Verdana" font-size="30.0" text-anchor="middle" x="259.0" y="160.0">p</text><defs /><g id="port"><ellipse cx="155.0" cy="225.0" fill="rgb(0,127,255)" fill-opacity="1" rx="10.000463257217945" ry="9.99953672132034" stroke="rgb(0,127,255)" stroke-width="0.25mm" /><defs /><ellipse cx="155.0" cy="225.0" fill="rgb(0,127,255)" fill-opacity="1" rx="10.000463257217945" ry="9.99953672132034" stroke="rgb(0,0,0)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">port</text><text id="type">Modelica.Fluid.Interfaces.FluidPort_a</text><text id="classDesc">Generic fluid connector at design inlet</text><text id="desc" /></g></g><g id="p"><polygon fill="rgb(255,255,255)" fill-opacity="1" points="255.0,115.0 275.0,125.0 255.0,135.0" stroke="rgb(0,0,127)" stroke-width="0.25mm" /><defs /><g display="none" id="info"><text id="name">p</text><text id="type">Modelica.Blocks.Interfaces.RealOutput</text><text id="classDesc">'output Real' as connector</text><text id="desc">Pressure at port</text></g></g></svg>
//
//
// endResult
