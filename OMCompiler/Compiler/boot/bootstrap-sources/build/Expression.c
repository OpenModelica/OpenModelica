#ifdef OMC_BASE_FILE
#define OMC_FILE OMC_BASE_FILE
#else
#define OMC_FILE "/home/mahge/dev/OpenModelica/OMCompiler/Compiler/boot/build/tmp/Expression.c"
#endif
#include "omc_simulation_settings.h"
#include "Expression.h"
#define _OMC_LIT0_data "Expression.compare failed: ctor:"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,32,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
#define _OMC_LIT1_data " "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT1,1,_OMC_LIT1_data);
#define _OMC_LIT1 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT1)
#define _OMC_LIT2_data "/home/mahge/dev/OpenModelica/OMCompiler/Compiler/FrontEnd/Expression.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT2,71,_OMC_LIT2_data);
#define _OMC_LIT2 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT2)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT3_6,1605721860.0);
#define _OMC_LIT3_6 MMC_REFREALLIT(_OMC_LIT_STRUCT3_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT3,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13286)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(13286)),MMC_IMMEDIATE(MMC_TAGFIXNUM(172)),_OMC_LIT3_6}};
#define _OMC_LIT3 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT3)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT4,2,3) {&DAE_Exp_ICONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT4 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT4)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT5,1.0);
#define _OMC_LIT5 MMC_REFREALLIT(_OMC_LIT_STRUCT5)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT6,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT5}};
#define _OMC_LIT6 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT6)
#define _OMC_LIT7_data "sqrt"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT7,4,_OMC_LIT7_data);
#define _OMC_LIT7 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data "exp"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,3,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "log"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,3,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
#define _OMC_LIT10_data "log10"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT10,5,_OMC_LIT10_data);
#define _OMC_LIT10 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT10)
#define _OMC_LIT11_data "tanh"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT11,4,_OMC_LIT11_data);
#define _OMC_LIT11 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data "sinh"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,4,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT13,2.0);
#define _OMC_LIT13 MMC_REFREALLIT(_OMC_LIT_STRUCT13)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT14,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT13}};
#define _OMC_LIT14 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT14)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT15,10.0);
#define _OMC_LIT15 MMC_REFREALLIT(_OMC_LIT_STRUCT15)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT16,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT15}};
#define _OMC_LIT16 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT16)
#define _OMC_LIT17_data "semiLinear"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT17,10,_OMC_LIT17_data);
#define _OMC_LIT17 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT17)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT18,2,6) {&DAE_Exp_BCONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT18 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT18)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT19,2,5) {&DAE_Subscript_INDEX__desc,_OMC_LIT18}};
#define _OMC_LIT19 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT19)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT20,2,6) {&DAE_Exp_BCONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT20 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT20)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT21,2,5) {&DAE_Subscript_INDEX__desc,_OMC_LIT20}};
#define _OMC_LIT21 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT21)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT22,2,1) {_OMC_LIT21,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT22 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT22)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT23,2,1) {_OMC_LIT19,_OMC_LIT22}};
#define _OMC_LIT23 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT23)
#define _OMC_LIT24_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT24,0,_OMC_LIT24_data);
#define _OMC_LIT24 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT24)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT25,0.0);
#define _OMC_LIT25 MMC_REFREALLIT(_OMC_LIT_STRUCT25)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT26,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT24,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT25}};
#define _OMC_LIT26 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT26)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT27,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT27 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT27)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT28,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT28 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT28)
#define _OMC_LIT29_data "Internal error %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT29,17,_OMC_LIT29_data);
#define _OMC_LIT29 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT29)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT30,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT29}};
#define _OMC_LIT30 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT30)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT31,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(63)),_OMC_LIT27,_OMC_LIT28,_OMC_LIT30}};
#define _OMC_LIT31 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT31)
#define _OMC_LIT32_data "Expression.makeMatrix failed"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT32,28,_OMC_LIT32_data);
#define _OMC_LIT32 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT32)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT33,2,1) {_OMC_LIT32,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT33 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT33)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT34_6,1605721860.0);
#define _OMC_LIT34_6 MMC_REFREALLIT(_OMC_LIT_STRUCT34_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT34,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(12377)),MMC_IMMEDIATE(MMC_TAGFIXNUM(3)),MMC_IMMEDIATE(MMC_TAGFIXNUM(12377)),MMC_IMMEDIATE(MMC_TAGFIXNUM(122)),_OMC_LIT34_6}};
#define _OMC_LIT34 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT34)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT35,1,7) {&DAE_InlineType_NO__INLINE__desc,}};
#define _OMC_LIT35 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT35)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT36,1,3) {&DAE_TailCall_NO__TAIL__desc,}};
#define _OMC_LIT36 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT36)
#define _OMC_LIT37_data "- Expression.expandExpression failed for "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT37,41,_OMC_LIT37_data);
#define _OMC_LIT37 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT37)
#define _OMC_LIT38_data "vector"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT38,6,_OMC_LIT38_data);
#define _OMC_LIT38 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT38)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT39,1,7) {&DAE_ComponentRef_WILD__desc,}};
#define _OMC_LIT39 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT39)
#define _OMC_LIT40_data "der"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT40,3,_OMC_LIT40_data);
#define _OMC_LIT40 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT40)
#define _OMC_LIT41_data "Expression.fromAbsynOperator: Unhandled operator: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT41,50,_OMC_LIT41_data);
#define _OMC_LIT41 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT41)
#define _OMC_LIT42_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT42,1,_OMC_LIT42_data);
#define _OMC_LIT42 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT42)
#define _OMC_LIT43_data "Expression.fargsToExps: Named arguments are not handled!\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT43,57,_OMC_LIT43_data);
#define _OMC_LIT43 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT43)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT44,1,11) {&DAE_Type_T__UNKNOWN__desc,}};
#define _OMC_LIT44 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT44)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT45,8,3) {&DAE_CallAttributes_CALL__ATTR__desc,_OMC_LIT44,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT35,_OMC_LIT36}};
#define _OMC_LIT45 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT45)
#define _OMC_LIT46_data "Expression.fromAbsynExp: Unhandled expression: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT46,47,_OMC_LIT46_data);
#define _OMC_LIT46 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,1,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
#define _OMC_LIT48_data "true"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT48,4,_OMC_LIT48_data);
#define _OMC_LIT48 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT48)
#define _OMC_LIT49_data "false"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT49,5,_OMC_LIT49_data);
#define _OMC_LIT49 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "promote"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,7,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT51,2,3) {&DAE_Dimension_DIM__INTEGER__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT51 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data "Expression.opWCET failed"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,24,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT53,2,1) {_OMC_LIT52,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT53 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT53)
#define _OMC_LIT54_data "identity"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT54,8,_OMC_LIT54_data);
#define _OMC_LIT54 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT54)
#define _OMC_LIT55_data "cross"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT55,5,_OMC_LIT55_data);
#define _OMC_LIT55 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT55)
#define _OMC_LIT56_data "Expression.complexityWork failed: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT56,34,_OMC_LIT56_data);
#define _OMC_LIT56 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT56)
#define _OMC_LIT57_data "failtrace"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT57,9,_OMC_LIT57_data);
#define _OMC_LIT57 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT57)
#define _OMC_LIT58_data "Sets whether to print a failtrace or not."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT58,41,_OMC_LIT58_data);
#define _OMC_LIT58 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT58)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT59,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT58}};
#define _OMC_LIT59 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT59)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT60,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT57,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT59}};
#define _OMC_LIT60 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT60)
#define _OMC_LIT61_data "- Expression.expContains failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT61,32,_OMC_LIT61_data);
#define _OMC_LIT61 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT61)
#define _OMC_LIT62_data "exp = "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT62,6,_OMC_LIT62_data);
#define _OMC_LIT62 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data " subexp = "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,10,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
#define _OMC_LIT64_data "pre"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT64,3,_OMC_LIT64_data);
#define _OMC_LIT64 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT64)
#define _OMC_LIT65_data "previous"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT65,8,_OMC_LIT65_data);
#define _OMC_LIT65 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT65)
#define _OMC_LIT66_data "exp_equal on CODE not impl.\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT66,28,_OMC_LIT66_data);
#define _OMC_LIT66 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT66)
#define _OMC_LIT67_data "inStream"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT67,8,_OMC_LIT67_data);
#define _OMC_LIT67 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT67)
#define _OMC_LIT68_data "actualStream"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT68,12,_OMC_LIT68_data);
#define _OMC_LIT68 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT68)
#define _OMC_LIT69_data "div"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT69,3,_OMC_LIT69_data);
#define _OMC_LIT69 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT69)
#define _OMC_LIT70_data "mod"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT70,3,_OMC_LIT70_data);
#define _OMC_LIT70 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT70)
#define _OMC_LIT71_data "rem"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT71,3,_OMC_LIT71_data);
#define _OMC_LIT71 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "ceil"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,4,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
#define _OMC_LIT73_data "floor"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT73,5,_OMC_LIT73_data);
#define _OMC_LIT73 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT73)
#define _OMC_LIT74_data "integer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT74,7,_OMC_LIT74_data);
#define _OMC_LIT74 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT74)
#define _OMC_LIT75_data "initial"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT75,7,_OMC_LIT75_data);
#define _OMC_LIT75 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT75)
#define _OMC_LIT76_data "terminal"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT76,8,_OMC_LIT76_data);
#define _OMC_LIT76 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT76)
#define _OMC_LIT77_data "sample"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT77,6,_OMC_LIT77_data);
#define _OMC_LIT77 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT77)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT78,2,1) {_OMC_LIT77,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT78 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT78)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT79,2,1) {_OMC_LIT76,_OMC_LIT78}};
#define _OMC_LIT79 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT79)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT80,2,1) {_OMC_LIT75,_OMC_LIT79}};
#define _OMC_LIT80 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT80)
#define _OMC_LIT81_data "alarm"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT81,5,_OMC_LIT81_data);
#define _OMC_LIT81 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT81)
#define _OMC_LIT82_data "compareFilesAndMove"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT82,19,_OMC_LIT82_data);
#define _OMC_LIT82 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT82)
#define _OMC_LIT83_data "delay"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT83,5,_OMC_LIT83_data);
#define _OMC_LIT83 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT83)
#define _OMC_LIT84_data "print"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT84,5,_OMC_LIT84_data);
#define _OMC_LIT84 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT84)
#define _OMC_LIT85_data "readFile"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT85,8,_OMC_LIT85_data);
#define _OMC_LIT85 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT85)
#define _OMC_LIT86_data "system"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT86,6,_OMC_LIT86_data);
#define _OMC_LIT86 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT86)
#define _OMC_LIT87_data "system_parallel"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT87,15,_OMC_LIT87_data);
#define _OMC_LIT87 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT87)
#define _OMC_LIT88_data "writeFile"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT88,9,_OMC_LIT88_data);
#define _OMC_LIT88 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT88)
#define _OMC_LIT89_data "abs"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT89,3,_OMC_LIT89_data);
#define _OMC_LIT89 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT89)
#define _OMC_LIT90_data "cosh"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT90,4,_OMC_LIT90_data);
#define _OMC_LIT90 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT90)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT91,1,3) {&DAE_Subscript_WHOLEDIM__desc,}};
#define _OMC_LIT91 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT91)
#define _OMC_LIT92_data "Expression.traverseExpCref: Unknown cref"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT92,40,_OMC_LIT92_data);
#define _OMC_LIT92 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT92)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT93,2,1) {_OMC_LIT92,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT93 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT93)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT94,1,6) {&ErrorTypes_Severity_NOTIFICATION__desc,}};
#define _OMC_LIT94 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT94)
#define _OMC_LIT95_data "%s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT95,2,_OMC_LIT95_data);
#define _OMC_LIT95 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT95)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT96,2,4) {&Gettext_TranslatableContent_notrans__desc,_OMC_LIT95}};
#define _OMC_LIT96 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT96)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT97,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(6001)),_OMC_LIT27,_OMC_LIT94,_OMC_LIT96}};
#define _OMC_LIT97 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT97)
#define _OMC_LIT98_data "Expression.traverseExpBidirSubExps not yet implemented for match expressions. Called using: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT98,92,_OMC_LIT98_data);
#define _OMC_LIT98 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT98)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT99_6,1605721860.0);
#define _OMC_LIT99_6 MMC_REFREALLIT(_OMC_LIT_STRUCT99_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT99,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7244)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7244)),MMC_IMMEDIATE(MMC_TAGFIXNUM(221)),_OMC_LIT99_6}};
#define _OMC_LIT99 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT99)
#define _OMC_LIT100_data "Expression.traverseExpBidirSubExps - Unknown expression "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT100,56,_OMC_LIT100_data);
#define _OMC_LIT100 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT100)
#define _OMC_LIT101_data ". Called using: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT101,16,_OMC_LIT101_data);
#define _OMC_LIT101 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT101)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT102_6,1605721860.0);
#define _OMC_LIT102_6 MMC_REFREALLIT(_OMC_LIT_STRUCT102_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT102,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7266)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7266)),MMC_IMMEDIATE(MMC_TAGFIXNUM(211)),_OMC_LIT102_6}};
#define _OMC_LIT102 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT102)
#define _OMC_LIT103_data "smooth"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT103,6,_OMC_LIT103_data);
#define _OMC_LIT103 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT103)
#define _OMC_LIT104_data "noEvent"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT104,7,_OMC_LIT104_data);
#define _OMC_LIT104 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT104)
#define _OMC_LIT105_data "sign"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT105,4,_OMC_LIT105_data);
#define _OMC_LIT105 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT105)
#define _OMC_LIT106_data "change"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT106,6,_OMC_LIT106_data);
#define _OMC_LIT106 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT106)
#define _OMC_LIT107_data "edge"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT107,4,_OMC_LIT107_data);
#define _OMC_LIT107 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT107)
#define _OMC_LIT108_data "$_round"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT108,7,_OMC_LIT108_data);
#define _OMC_LIT108 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT108)
#define _OMC_LIT109_data "$DERAlias"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT109,9,_OMC_LIT109_data);
#define _OMC_LIT109 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT109)
#define _OMC_LIT110_data "Expression.traversingComponentRefFinderDerPreStart - Found a start call expression "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT110,83,_OMC_LIT110_data);
#define _OMC_LIT110 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT110)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT111_6,1605721860.0);
#define _OMC_LIT111_6 MMC_REFREALLIT(_OMC_LIT_STRUCT111_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT111,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(6224)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(6224)),MMC_IMMEDIATE(MMC_TAGFIXNUM(136)),_OMC_LIT111_6}};
#define _OMC_LIT111 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT111)
#define _OMC_LIT112_data "start"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT112,5,_OMC_LIT112_data);
#define _OMC_LIT112 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT112)
#define _OMC_LIT113_data "Expression.traverseExpTopDown1 or "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT113,34,_OMC_LIT113_data);
#define _OMC_LIT113 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT113)
#define _OMC_LIT114_data "not implemented correctly: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT114,27,_OMC_LIT114_data);
#define _OMC_LIT114 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT114)
#define _OMC_LIT115_data "Expression.traverseExpBottomUp or one of the user-defined functions using it is not implemented correctly: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT115,107,_OMC_LIT115_data);
#define _OMC_LIT115 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT115)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT116_6,1605721860.0);
#define _OMC_LIT116_6 MMC_REFREALLIT(_OMC_LIT_STRUCT116_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT116,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT2,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5316)),MMC_IMMEDIATE(MMC_TAGFIXNUM(7)),MMC_IMMEDIATE(MMC_TAGFIXNUM(5316)),MMC_IMMEDIATE(MMC_TAGFIXNUM(48)),_OMC_LIT116_6}};
#define _OMC_LIT116 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT116)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT117,1,7) {&DAE_Dimension_DIM__UNKNOWN__desc,}};
#define _OMC_LIT117 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT117)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT118,1,6) {&DAE_ConnectorType_NON__CONNECTOR__desc,}};
#define _OMC_LIT118 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT118)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT119,1,5) {&SCode_Parallelism_NON__PARALLEL__desc,}};
#define _OMC_LIT119 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT119)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT120,1,3) {&SCode_Variability_VAR__desc,}};
#define _OMC_LIT120 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT120)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT121,1,5) {&Absyn_Direction_BIDIR__desc,}};
#define _OMC_LIT121 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT121)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT122,1,6) {&Absyn_InnerOuter_NOT__INNER__OUTER__desc,}};
#define _OMC_LIT122 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT122)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT123,1,3) {&SCode_Visibility_PUBLIC__desc,}};
#define _OMC_LIT123 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT123)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT124,7,3) {&DAE_Attributes_ATTR__desc,_OMC_LIT118,_OMC_LIT119,_OMC_LIT120,_OMC_LIT121,_OMC_LIT122,_OMC_LIT123}};
#define _OMC_LIT124 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT124)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT125,1,3) {&DAE_Binding_UNBOUND__desc,}};
#define _OMC_LIT125 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT125)
#define _OMC_LIT126_data "Expression.listToArray3: Not enough elements left in list to fit dimension."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT126,75,_OMC_LIT126_data);
#define _OMC_LIT126 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT126)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT127,2,1) {_OMC_LIT126,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT127 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT127)
#define _OMC_LIT128_data "Expression.listToArray2: Number of elements in the list does not match the dimension size."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT128,90,_OMC_LIT128_data);
#define _OMC_LIT128 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT128)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT129,2,1) {_OMC_LIT128,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT129 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT129)
#define _OMC_LIT130_data "Expression.listToArray called with empty dimension list."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT130,56,_OMC_LIT130_data);
#define _OMC_LIT130 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT130)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT131,2,1) {_OMC_LIT130,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT131 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT131)
#define _OMC_LIT132_data "Expression.listToArray called with empty list."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT132,46,_OMC_LIT132_data);
#define _OMC_LIT132 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT132)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT133,2,1) {_OMC_LIT132,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT133 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT133)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT134,2,4) {&DAE_Type_T__REAL__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT134 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT134)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT135,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT25}};
#define _OMC_LIT135 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT135)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT136,2,3) {&DAE_Exp_ICONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT136 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT136)
#define _OMC_LIT137_data "-Expression.makeProductLst failed, DAE.Exp lst:"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT137,47,_OMC_LIT137_data);
#define _OMC_LIT137 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT137)
#define _OMC_LIT138_data ", "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT138,2,_OMC_LIT138_data);
#define _OMC_LIT138 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT138)
#define _OMC_LIT139_data "addVec fail.\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT139,13,_OMC_LIT139_data);
#define _OMC_LIT139 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT139)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT140,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT7}};
#define _OMC_LIT140 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT140)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT141,8,3) {&DAE_CallAttributes_CALL__ATTR__desc,_OMC_LIT134,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT35,_OMC_LIT36}};
#define _OMC_LIT141 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT141)
#define _OMC_LIT142_data "makeScalarProduct faili.\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT142,25,_OMC_LIT142_data);
#define _OMC_LIT142 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT142)
#define _OMC_LIT143_data "min"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT143,3,_OMC_LIT143_data);
#define _OMC_LIT143 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT143)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT144,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT143}};
#define _OMC_LIT144 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT144)
#define _OMC_LIT145_data "max"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT145,3,_OMC_LIT145_data);
#define _OMC_LIT145 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT145)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT146,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT145}};
#define _OMC_LIT146 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT146)
#define _OMC_LIT147_data "-Expression.makeSum failed, DAE.Exp lst:"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT147,40,_OMC_LIT147_data);
#define _OMC_LIT147 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT147)
#define _OMC_LIT148_data "-Expression.makeSum1 failed, DAE.Exp lst:"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT148,41,_OMC_LIT148_data);
#define _OMC_LIT148 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT148)
#define _OMC_LIT149_data "Expression.makeLBinary failed for operator "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT149,43,_OMC_LIT149_data);
#define _OMC_LIT149 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT149)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT150,2,3) {&DAE_Operator_ADD__desc,_OMC_LIT134}};
#define _OMC_LIT150 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT150)
#define _OMC_LIT151_data "Expression.generateCrefsExpLstFromExp: fail for "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT151,48,_OMC_LIT151_data);
#define _OMC_LIT151 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT151)
#define _OMC_LIT152_data "Expression.generateCrefsExpFromExp: fail for"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT152,44,_OMC_LIT152_data);
#define _OMC_LIT152 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT152)
#define _OMC_LIT153_data "Warning: makeASUB: given expression: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT153,37,_OMC_LIT153_data);
#define _OMC_LIT153 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT153)
#define _OMC_LIT154_data " contains a component reference!\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT154,33,_OMC_LIT154_data);
#define _OMC_LIT154 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT154)
#define _OMC_LIT155_data " Subscripts exps: ["
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT155,19,_OMC_LIT155_data);
#define _OMC_LIT155 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT155)
#define _OMC_LIT156_data ","
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT156,1,_OMC_LIT156_data);
#define _OMC_LIT156 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT156)
#define _OMC_LIT157_data "]\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT157,2,_OMC_LIT157_data);
#define _OMC_LIT157 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT157)
#define _OMC_LIT158_data "DAE.ASUB should not be used for component references, instead the subscripts should be added directly to the component reference!"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT158,129,_OMC_LIT158_data);
#define _OMC_LIT158 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT158)
#define _OMC_LIT159_data "checkASUB"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT159,9,_OMC_LIT159_data);
#define _OMC_LIT159 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT159)
#define _OMC_LIT160_data "Prints out a warning if an ASUB is created from a CREF expression."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT160,66,_OMC_LIT160_data);
#define _OMC_LIT160 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT160)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT161,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT160}};
#define _OMC_LIT161 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT161)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT162,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(15)),_OMC_LIT159,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT161}};
#define _OMC_LIT162 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT162)
#define _OMC_LIT163_data "Warning: Expression.makeCrefExp: cref "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT163,38,_OMC_LIT163_data);
#define _OMC_LIT163 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT163)
#define _OMC_LIT164_data " was given type DAE.CREF.ty: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT164,29,_OMC_LIT164_data);
#define _OMC_LIT164 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT164)
#define _OMC_LIT165_data " is different from existing DAE.CREF.componentRef.ty: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT165,54,_OMC_LIT165_data);
#define _OMC_LIT165 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT165)
#define _OMC_LIT166_data "checkDAECrefType"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT166,16,_OMC_LIT166_data);
#define _OMC_LIT166 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT166)
#define _OMC_LIT167_data "Enables extra type checking for cref expressions."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT167,49,_OMC_LIT167_data);
#define _OMC_LIT167 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT167)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT168,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT167}};
#define _OMC_LIT168 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT168)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT169,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(14)),_OMC_LIT166,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT168}};
#define _OMC_LIT169 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT169)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT170,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT105}};
#define _OMC_LIT170 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT170)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT171,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT89}};
#define _OMC_LIT171 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT171)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT172,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT104}};
#define _OMC_LIT172 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT172)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT173,2,6) {&DAE_Type_T__BOOL__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT173 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT173)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT174,8,3) {&DAE_CallAttributes_CALL__ATTR__desc,_OMC_LIT173,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT35,_OMC_LIT36}};
#define _OMC_LIT174 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT174)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT175,2,6) {&DAE_Operator_DIV__desc,_OMC_LIT134}};
#define _OMC_LIT175 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT175)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT176,2,3) {&DAE_Type_T__INTEGER__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT176 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT176)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT177,2,6) {&DAE_Operator_DIV__desc,_OMC_LIT176}};
#define _OMC_LIT177 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT177)
#define _OMC_LIT178_data "time"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT178,4,_OMC_LIT178_data);
#define _OMC_LIT178 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT178)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT179,4,4) {&DAE_ComponentRef_CREF__IDENT__desc,_OMC_LIT178,_OMC_LIT134,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT179 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT179)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT180,2,5) {&DAE_Type_T__STRING__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT180 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT180)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT181,2,7) {&DAE_Type_T__CLOCK__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT181 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT181)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT182,2,1) {_OMC_LIT117,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT182 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT182)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT183,3,9) {&DAE_Type_T__ARRAY__desc,_OMC_LIT176,_OMC_LIT182}};
#define _OMC_LIT183 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT183)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT184,2,20) {&DAE_Type_T__METALIST__desc,_OMC_LIT44}};
#define _OMC_LIT184 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT184)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT185,2,28) {&DAE_Type_T__METATYPE__desc,_OMC_LIT184}};
#define _OMC_LIT185 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT185)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT186,2,22) {&DAE_Type_T__METAOPTION__desc,_OMC_LIT44}};
#define _OMC_LIT186 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT186)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT187,2,28) {&DAE_Type_T__METATYPE__desc,_OMC_LIT186}};
#define _OMC_LIT187 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT187)
#define _OMC_LIT188_data "- Expression.typeof failed for "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT188,31,_OMC_LIT188_data);
#define _OMC_LIT188 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT188)
#define _OMC_LIT189_data "array"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT189,5,_OMC_LIT189_data);
#define _OMC_LIT189 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT189)
#define _OMC_LIT190_data "checkModel"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT190,10,_OMC_LIT190_data);
#define _OMC_LIT190 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT190)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT191,1,3) {&Flags_FlagVisibility_INTERNAL__desc,}};
#define _OMC_LIT191 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT191)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT192,2,4) {&Flags_FlagData_BOOL__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT192 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT192)
#define _OMC_LIT193_data "Set when checkModel is used to turn on specific features for checking."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT193,70,_OMC_LIT193_data);
#define _OMC_LIT193 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT193)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT194,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT193}};
#define _OMC_LIT194 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT194)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT195,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(31)),_OMC_LIT190,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT191,_OMC_LIT192,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT194}};
#define _OMC_LIT195 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT195)
#define _OMC_LIT196_data "- Expression.subscriptDimension failed on "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT196,42,_OMC_LIT196_data);
#define _OMC_LIT196 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT196)
#define _OMC_LIT197_data "- Expression.arrayAppend failed."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT197,32,_OMC_LIT197_data);
#define _OMC_LIT197 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT197)
#define _OMC_LIT198_data "- Expression.setOpType failed on unknown operator"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT198,49,_OMC_LIT198_data);
#define _OMC_LIT198 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT198)
#define _OMC_LIT199_data "Expression.subscriptExp failed on "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT199,34,_OMC_LIT199_data);
#define _OMC_LIT199 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT199)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT200,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT40}};
#define _OMC_LIT200 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT200)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT201,2,8) {&DAE_Operator_UMINUS__desc,_OMC_LIT134}};
#define _OMC_LIT201 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT201)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT202,2,3) {&DAE_Exp_ICONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(2))}};
#define _OMC_LIT202 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT202)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT203,2,5) {&DAE_Subscript_INDEX__desc,_OMC_LIT202}};
#define _OMC_LIT203 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT203)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT204,2,3) {&DAE_Exp_ICONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(-1))}};
#define _OMC_LIT204 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT204)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT205,1,3) {&DAE_Prefix_NOPRE__desc,}};
#define _OMC_LIT205 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT205)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT206,1,3) {&Absyn_Operator_ADD__desc,}};
#define _OMC_LIT206 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT206)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT207,1,4) {&Absyn_Operator_SUB__desc,}};
#define _OMC_LIT207 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT207)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT208,1,5) {&Absyn_Operator_MUL__desc,}};
#define _OMC_LIT208 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT208)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT209,1,6) {&Absyn_Operator_DIV__desc,}};
#define _OMC_LIT209 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT209)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT210,1,7) {&Absyn_Operator_POW__desc,}};
#define _OMC_LIT210 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT210)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT211,1,9) {&Absyn_Operator_UMINUS__desc,}};
#define _OMC_LIT211 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT211)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT212,1,17) {&Absyn_Operator_AND__desc,}};
#define _OMC_LIT212 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT212)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT213,1,18) {&Absyn_Operator_OR__desc,}};
#define _OMC_LIT213 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT213)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT214,1,19) {&Absyn_Operator_NOT__desc,}};
#define _OMC_LIT214 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT214)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT215,1,20) {&Absyn_Operator_LESS__desc,}};
#define _OMC_LIT215 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT215)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT216,1,21) {&Absyn_Operator_LESSEQ__desc,}};
#define _OMC_LIT216 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT216)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT217,1,22) {&Absyn_Operator_GREATER__desc,}};
#define _OMC_LIT217 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT217)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT218,1,23) {&Absyn_Operator_GREATEREQ__desc,}};
#define _OMC_LIT218 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT218)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT219,1,24) {&Absyn_Operator_EQUAL__desc,}};
#define _OMC_LIT219 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT219)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT220,1,25) {&Absyn_Operator_NEQUAL__desc,}};
#define _OMC_LIT220 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT220)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT221,2,3) {&Absyn_Exp_INTEGER__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT221 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT221)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT222,2,7) {&Absyn_Exp_BOOL__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT222 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT222)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT223,2,6) {&Absyn_Exp_STRING__desc,_OMC_LIT24}};
#define _OMC_LIT223 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT223)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT224,2,3) {&Absyn_Exp_INTEGER__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT224 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT224)
#define _OMC_LIT225_data "0.0"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT225,3,_OMC_LIT225_data);
#define _OMC_LIT225 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT225)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT226,2,4) {&Absyn_Exp_REAL__desc,_OMC_LIT225}};
#define _OMC_LIT226 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT226)
#define _OMC_LIT227_data "Boolean"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT227,7,_OMC_LIT227_data);
#define _OMC_LIT227 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT227)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT228,3,5) {&Absyn_ComponentRef_CREF__IDENT__desc,_OMC_LIT227,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT228 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT228)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT229,2,5) {&Absyn_Exp_CREF__desc,_OMC_LIT228}};
#define _OMC_LIT229 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT229)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT230,2,4) {&Absyn_Subscript_SUBSCRIPT__desc,_OMC_LIT229}};
#define _OMC_LIT230 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT230)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT231,1,3) {&Absyn_Subscript_NOSUB__desc,}};
#define _OMC_LIT231 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT231)
#define _OMC_LIT232_data "fill"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT232,4,_OMC_LIT232_data);
#define _OMC_LIT232 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT232)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT233,3,5) {&Absyn_ComponentRef_CREF__IDENT__desc,_OMC_LIT232,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT233 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT233)
#define _OMC_LIT234_data "Internal Error, can not unelab ASUB\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT234,36,_OMC_LIT234_data);
#define _OMC_LIT234 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT234)
#define _OMC_LIT235_data "size"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT235,4,_OMC_LIT235_data);
#define _OMC_LIT235 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT235)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT236,3,5) {&Absyn_ComponentRef_CREF__IDENT__desc,_OMC_LIT235,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT236 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT236)
#define _OMC_LIT237_data "Expression.unelabExp failed on: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT237,32,_OMC_LIT237_data);
#define _OMC_LIT237 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT237)
#include "util/modelica.h"
#include "Expression_includes.h"
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_consToListIgnoreSharedLiteralWork(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_metatype _acc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_consToListIgnoreSharedLiteralWork,2,0) {(void*) boxptr_Expression_consToListIgnoreSharedLiteralWork,0}};
#define boxvar_Expression_consToListIgnoreSharedLiteralWork MMC_REFSTRUCTLIT(boxvar_lit_Expression_consToListIgnoreSharedLiteralWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_containsCallTo__traverser(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_outContinue, modelica_metatype *out_outTpl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_containsCallTo__traverser(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outContinue, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_containsCallTo__traverser,2,0) {(void*) boxptr_Expression_containsCallTo__traverser,0}};
#define boxvar_Expression_containsCallTo__traverser MMC_REFSTRUCTLIT(boxvar_lit_Expression_containsCallTo__traverser)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_containsAnyCall__traverser(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inContainsCall, modelica_boolean *out_outContinue, modelica_boolean *out_outContainsCall);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_containsAnyCall__traverser(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inContainsCall, modelica_metatype *out_outContinue, modelica_metatype *out_outContainsCall);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_containsAnyCall__traverser,2,0) {(void*) boxptr_Expression_containsAnyCall__traverser,0}};
#define boxvar_Expression_containsAnyCall__traverser MMC_REFSTRUCTLIT(boxvar_lit_Expression_containsAnyCall__traverser)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_createResidualExp4(threadData_t *threadData, modelica_string _f);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_createResidualExp4(threadData_t *threadData, modelica_metatype _f);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_createResidualExp4,2,0) {(void*) boxptr_Expression_createResidualExp4,0}};
#define boxvar_Expression_createResidualExp4 MMC_REFSTRUCTLIT(boxvar_lit_Expression_createResidualExp4)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_createResidualExp2(threadData_t *threadData, modelica_metatype _iExp1, modelica_metatype _iExp2, modelica_metatype *out_oExp2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_createResidualExp2,2,0) {(void*) boxptr_Expression_createResidualExp2,0}};
#define boxvar_Expression_createResidualExp2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_createResidualExp2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_moveDivToMul(threadData_t *threadData, modelica_metatype _iExpLst, modelica_metatype _iExpLstAcc, modelica_metatype _iExpMuls, modelica_metatype *out_oExpMuls);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_moveDivToMul,2,0) {(void*) boxptr_Expression_moveDivToMul,0}};
#define boxvar_Expression_moveDivToMul MMC_REFSTRUCTLIT(boxvar_lit_Expression_moveDivToMul)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makeMatrix(threadData_t *threadData, modelica_metatype _expl, modelica_integer _n);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_makeMatrix(threadData_t *threadData, modelica_metatype _expl, modelica_metatype _n);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_makeMatrix,2,0) {(void*) boxptr_Expression_makeMatrix,0}};
#define boxvar_Expression_makeMatrix MMC_REFSTRUCTLIT(boxvar_lit_Expression_makeMatrix)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_insertSubScripts(threadData_t *threadData, modelica_metatype _templSubScript, modelica_metatype _value, modelica_metatype _lstIn);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_insertSubScripts,2,0) {(void*) boxptr_Expression_insertSubScripts,0}};
#define boxvar_Expression_insertSubScripts MMC_REFSTRUCTLIT(boxvar_lit_Expression_insertSubScripts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingextendArrExp(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inExpanded, modelica_boolean *out_outExpanded);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traversingextendArrExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inExpanded, modelica_metatype *out_outExpanded);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traversingextendArrExp,2,0) {(void*) boxptr_Expression_traversingextendArrExp,0}};
#define boxvar_Expression_traversingextendArrExp MMC_REFSTRUCTLIT(boxvar_lit_Expression_traversingextendArrExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_fromAbsynOperator(threadData_t *threadData, modelica_metatype _aop, modelica_metatype _ty);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_fromAbsynOperator,2,0) {(void*) boxptr_Expression_fromAbsynOperator,0}};
#define boxvar_Expression_fromAbsynOperator MMC_REFSTRUCTLIT(boxvar_lit_Expression_fromAbsynOperator)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_fromAbsynExpOpt(threadData_t *threadData, modelica_metatype _aoe);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_fromAbsynExpOpt,2,0) {(void*) boxptr_Expression_fromAbsynExpOpt,0}};
#define boxvar_Expression_fromAbsynExpOpt MMC_REFSTRUCTLIT(boxvar_lit_Expression_fromAbsynExpOpt)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_hashOp(threadData_t *threadData, modelica_metatype _op);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_hashOp(threadData_t *threadData, modelica_metatype _op);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_hashOp,2,0) {(void*) boxptr_Expression_hashOp,0}};
#define boxvar_Expression_hashOp MMC_REFSTRUCTLIT(boxvar_lit_Expression_hashOp)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_hashReductionIter(threadData_t *threadData, modelica_metatype _iter);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_hashReductionIter(threadData_t *threadData, modelica_metatype _iter);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_hashReductionIter,2,0) {(void*) boxptr_Expression_hashReductionIter,0}};
#define boxvar_Expression_hashReductionIter MMC_REFSTRUCTLIT(boxvar_lit_Expression_hashReductionIter)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_hashReductionInfo(threadData_t *threadData, modelica_metatype _info);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_hashReductionInfo(threadData_t *threadData, modelica_metatype _info);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_hashReductionInfo,2,0) {(void*) boxptr_Expression_hashReductionInfo,0}};
#define boxvar_Expression_hashReductionInfo MMC_REFSTRUCTLIT(boxvar_lit_Expression_hashReductionInfo)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_promoteExp3(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_promoteExp3,2,0) {(void*) boxptr_Expression_promoteExp3,0}};
#define boxvar_Expression_promoteExp3 MMC_REFSTRUCTLIT(boxvar_lit_Expression_promoteExp3)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_promoteExp2(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inIsArray, modelica_integer _inDims, modelica_metatype _inTypes);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_promoteExp2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inIsArray, modelica_metatype _inDims, modelica_metatype _inTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_promoteExp2,2,0) {(void*) boxptr_Expression_promoteExp2,0}};
#define boxvar_Expression_promoteExp2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_promoteExp2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makePromotedTypes(threadData_t *threadData, modelica_metatype _inDimensions, modelica_metatype _inElementType, modelica_metatype _inAccumTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_makePromotedTypes,2,0) {(void*) boxptr_Expression_makePromotedTypes,0}};
#define boxvar_Expression_makePromotedTypes MMC_REFSTRUCTLIT(boxvar_lit_Expression_makePromotedTypes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_splitRecord2(threadData_t *threadData, modelica_metatype _var, modelica_metatype _cr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_splitRecord2,2,0) {(void*) boxptr_Expression_splitRecord2,0}};
#define boxvar_Expression_splitRecord2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_splitRecord2)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_priorityLBinop(threadData_t *threadData, modelica_metatype _inOp);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_priorityLBinop(threadData_t *threadData, modelica_metatype _inOp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_priorityLBinop,2,0) {(void*) boxptr_Expression_priorityLBinop,0}};
#define boxvar_Expression_priorityLBinop MMC_REFSTRUCTLIT(boxvar_lit_Expression_priorityLBinop)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_priorityBinopRhs(threadData_t *threadData, modelica_metatype _inOp);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_priorityBinopRhs(threadData_t *threadData, modelica_metatype _inOp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_priorityBinopRhs,2,0) {(void*) boxptr_Expression_priorityBinopRhs,0}};
#define boxvar_Expression_priorityBinopRhs MMC_REFSTRUCTLIT(boxvar_lit_Expression_priorityBinopRhs)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_priorityBinopLhs(threadData_t *threadData, modelica_metatype _inOp);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_priorityBinopLhs(threadData_t *threadData, modelica_metatype _inOp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_priorityBinopLhs,2,0) {(void*) boxptr_Expression_priorityBinopLhs,0}};
#define boxvar_Expression_priorityBinopLhs MMC_REFSTRUCTLIT(boxvar_lit_Expression_priorityBinopLhs)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isNonAssociativeOp(threadData_t *threadData, modelica_metatype _inOperator);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isNonAssociativeOp(threadData_t *threadData, modelica_metatype _inOperator);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_isNonAssociativeOp,2,0) {(void*) boxptr_Expression_isNonAssociativeOp,0}};
#define boxvar_Expression_isNonAssociativeOp MMC_REFSTRUCTLIT(boxvar_lit_Expression_isNonAssociativeOp)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isNonAssociativeExp(threadData_t *threadData, modelica_metatype _exp);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isNonAssociativeExp(threadData_t *threadData, modelica_metatype _exp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_isNonAssociativeExp,2,0) {(void*) boxptr_Expression_isNonAssociativeExp,0}};
#define boxvar_Expression_isNonAssociativeExp MMC_REFSTRUCTLIT(boxvar_lit_Expression_isNonAssociativeExp)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isAssociativeOp(threadData_t *threadData, modelica_metatype _inOperator);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isAssociativeOp(threadData_t *threadData, modelica_metatype _inOperator);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_isAssociativeOp,2,0) {(void*) boxptr_Expression_isAssociativeOp,0}};
#define boxvar_Expression_isAssociativeOp MMC_REFSTRUCTLIT(boxvar_lit_Expression_isAssociativeOp)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isAssociativeExp(threadData_t *threadData, modelica_metatype _inExp);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isAssociativeExp(threadData_t *threadData, modelica_metatype _inExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_isAssociativeExp,2,0) {(void*) boxptr_Expression_isAssociativeExp,0}};
#define boxvar_Expression_isAssociativeExp MMC_REFSTRUCTLIT(boxvar_lit_Expression_isAssociativeExp)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_shouldParenthesize2(threadData_t *threadData, modelica_integer _inPrioDiff, modelica_metatype _inOperand, modelica_boolean _inLhs);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_shouldParenthesize2(threadData_t *threadData, modelica_metatype _inPrioDiff, modelica_metatype _inOperand, modelica_metatype _inLhs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_shouldParenthesize2,2,0) {(void*) boxptr_Expression_shouldParenthesize2,0}};
#define boxvar_Expression_shouldParenthesize2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_shouldParenthesize2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makeEnumLiteral(threadData_t *threadData, modelica_metatype _name, modelica_integer _index, modelica_integer *out_newIndex);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_makeEnumLiteral(threadData_t *threadData, modelica_metatype _name, modelica_metatype _index, modelica_metatype *out_newIndex);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_makeEnumLiteral,2,0) {(void*) boxptr_Expression_makeEnumLiteral,0}};
#define boxvar_Expression_makeEnumLiteral MMC_REFSTRUCTLIT(boxvar_lit_Expression_makeEnumLiteral)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_opComplexity(threadData_t *threadData, modelica_metatype _op);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_opComplexity(threadData_t *threadData, modelica_metatype _op);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_opComplexity,2,0) {(void*) boxptr_Expression_opComplexity,0}};
#define boxvar_Expression_opComplexity MMC_REFSTRUCTLIT(boxvar_lit_Expression_opComplexity)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_tpComplexity(threadData_t *threadData, modelica_metatype _tp);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_tpComplexity(threadData_t *threadData, modelica_metatype _tp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_tpComplexity,2,0) {(void*) boxptr_Expression_tpComplexity,0}};
#define boxvar_Expression_tpComplexity MMC_REFSTRUCTLIT(boxvar_lit_Expression_tpComplexity)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_complexityBuiltin(threadData_t *threadData, modelica_string _name, modelica_metatype _tp);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_complexityBuiltin(threadData_t *threadData, modelica_metatype _name, modelica_metatype _tp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_complexityBuiltin,2,0) {(void*) boxptr_Expression_complexityBuiltin,0}};
#define boxvar_Expression_complexityBuiltin MMC_REFSTRUCTLIT(boxvar_lit_Expression_complexityBuiltin)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_complexityTraverse2(threadData_t *threadData, modelica_metatype _exp, modelica_integer _complexity_, modelica_integer *out_outComplexity);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_complexityTraverse2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _complexity_, modelica_metatype *out_outComplexity);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_complexityTraverse2,2,0) {(void*) boxptr_Expression_complexityTraverse2,0}};
#define boxvar_Expression_complexityTraverse2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_complexityTraverse2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseReductionIterators(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fiters, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg, modelica_metatype *out_arg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseReductionIterators,2,0) {(void*) boxptr_Expression_traverseReductionIterators,0}};
#define boxvar_Expression_traverseReductionIterators MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseReductionIterators)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseReductionIterator(threadData_t *threadData, modelica_metatype _iter, modelica_fnptr _func, modelica_metatype _iarg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseReductionIterator,2,0) {(void*) boxptr_Expression_traverseReductionIterator,0}};
#define boxvar_Expression_traverseReductionIterator MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseReductionIterator)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseReductionIteratorsTopDown(threadData_t *threadData, modelica_metatype _inIters, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseReductionIteratorsTopDown,2,0) {(void*) boxptr_Expression_traverseReductionIteratorsTopDown,0}};
#define boxvar_Expression_traverseReductionIteratorsTopDown MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseReductionIteratorsTopDown)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseReductionIteratorTopDown(threadData_t *threadData, modelica_metatype _iter, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseReductionIteratorTopDown,2,0) {(void*) boxptr_Expression_traverseReductionIteratorTopDown,0}};
#define boxvar_Expression_traverseReductionIteratorTopDown MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseReductionIteratorTopDown)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseReductionIteratorBidir(threadData_t *threadData, modelica_metatype _inIter, modelica_fnptr _inEnterFunc, modelica_fnptr _inExitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseReductionIteratorBidir,2,0) {(void*) boxptr_Expression_traverseReductionIteratorBidir,0}};
#define boxvar_Expression_traverseReductionIteratorBidir MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseReductionIteratorBidir)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_subscriptContain2(threadData_t *threadData, modelica_integer _inInt, modelica_metatype _inExp2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_subscriptContain2(threadData_t *threadData, modelica_metatype _inInt, modelica_metatype _inExp2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_subscriptContain2,2,0) {(void*) boxptr_Expression_subscriptContain2,0}};
#define boxvar_Expression_subscriptContain2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_subscriptContain2)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_expStructuralEqualListLst(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_expStructuralEqualListLst(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_expStructuralEqualListLst,2,0) {(void*) boxptr_Expression_expStructuralEqualListLst,0}};
#define boxvar_Expression_expStructuralEqualListLst MMC_REFSTRUCTLIT(boxvar_lit_Expression_expStructuralEqualListLst)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_compareListList(threadData_t *threadData, modelica_metatype _inExpl1, modelica_metatype _inExpl2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_compareListList(threadData_t *threadData, modelica_metatype _inExpl1, modelica_metatype _inExpl2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_compareListList,2,0) {(void*) boxptr_Expression_compareListList,0}};
#define boxvar_Expression_compareListList MMC_REFSTRUCTLIT(boxvar_lit_Expression_compareListList)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_compareList(threadData_t *threadData, modelica_metatype _inExpl1, modelica_metatype _inExpl2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_compareList(threadData_t *threadData, modelica_metatype _inExpl1, modelica_metatype _inExpl2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_compareList,2,0) {(void*) boxptr_Expression_compareList,0}};
#define boxvar_Expression_compareList MMC_REFSTRUCTLIT(boxvar_lit_Expression_compareList)
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_compareOpt(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_compareOpt(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_compareOpt,2,0) {(void*) boxptr_Expression_compareOpt,0}};
#define boxvar_Expression_compareOpt MMC_REFSTRUCTLIT(boxvar_lit_Expression_compareOpt)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_equalTypesComplexVars(threadData_t *threadData, modelica_metatype _inVars1, modelica_metatype _inVars2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_equalTypesComplexVars(threadData_t *threadData, modelica_metatype _inVars1, modelica_metatype _inVars2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_equalTypesComplexVars,2,0) {(void*) boxptr_Expression_equalTypesComplexVars,0}};
#define boxvar_Expression_equalTypesComplexVars MMC_REFSTRUCTLIT(boxvar_lit_Expression_equalTypesComplexVars)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isConstValueWorkListList(threadData_t *threadData, modelica_metatype _inExps);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isConstValueWorkListList(threadData_t *threadData, modelica_metatype _inExps);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_isConstValueWorkListList,2,0) {(void*) boxptr_Expression_isConstValueWorkListList,0}};
#define boxvar_Expression_isConstValueWorkListList MMC_REFSTRUCTLIT(boxvar_lit_Expression_isConstValueWorkListList)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isConstValueWorkList(threadData_t *threadData, modelica_metatype _inExps);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isConstValueWorkList(threadData_t *threadData, modelica_metatype _inExps);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_isConstValueWorkList,2,0) {(void*) boxptr_Expression_isConstValueWorkList,0}};
#define boxvar_Expression_isConstValueWorkList MMC_REFSTRUCTLIT(boxvar_lit_Expression_isConstValueWorkList)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isConstWorkListList(threadData_t *threadData, modelica_metatype _inExps);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isConstWorkListList(threadData_t *threadData, modelica_metatype _inExps);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_isConstWorkListList,2,0) {(void*) boxptr_Expression_isConstWorkListList,0}};
#define boxvar_Expression_isConstWorkListList MMC_REFSTRUCTLIT(boxvar_lit_Expression_isConstWorkListList)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isConstValueWork(threadData_t *threadData, modelica_metatype _inExp);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isConstValueWork(threadData_t *threadData, modelica_metatype _inExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_isConstValueWork,2,0) {(void*) boxptr_Expression_isConstValueWork,0}};
#define boxvar_Expression_isConstValueWork MMC_REFSTRUCTLIT(boxvar_lit_Expression_isConstValueWork)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isConstWork(threadData_t *threadData, modelica_metatype _inExp);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isConstWork(threadData_t *threadData, modelica_metatype _inExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_isConstWork,2,0) {(void*) boxptr_Expression_isConstWork,0}};
#define boxvar_Expression_isConstWork MMC_REFSTRUCTLIT(boxvar_lit_Expression_isConstWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_containsRecordTypeWork(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inRec, modelica_boolean *out_cont, modelica_boolean *out_outRec);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_containsRecordTypeWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inRec, modelica_metatype *out_cont, modelica_metatype *out_outRec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_containsRecordTypeWork,2,0) {(void*) boxptr_Expression_containsRecordTypeWork,0}};
#define boxvar_Expression_containsRecordTypeWork MMC_REFSTRUCTLIT(boxvar_lit_Expression_containsRecordTypeWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_isImpureWork(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _isImpure, modelica_boolean *out_cont, modelica_boolean *out_outImpure);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isImpureWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _isImpure, modelica_metatype *out_cont, modelica_metatype *out_outImpure);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_isImpureWork,2,0) {(void*) boxptr_Expression_isImpureWork,0}};
#define boxvar_Expression_isImpureWork MMC_REFSTRUCTLIT(boxvar_lit_Expression_isImpureWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpTopDownSubs(threadData_t *threadData, modelica_metatype _inSubscript, modelica_fnptr _rel, modelica_metatype _iarg, modelica_metatype *out_arg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseExpTopDownSubs,2,0) {(void*) boxptr_Expression_traverseExpTopDownSubs,0}};
#define boxvar_Expression_traverseExpTopDownSubs MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseExpTopDownSubs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpBidirSubs(threadData_t *threadData, modelica_metatype _inSubscript, modelica_fnptr _inEnterFunc, modelica_fnptr _inExitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseExpBidirSubs,2,0) {(void*) boxptr_Expression_traverseExpBidirSubs,0}};
#define boxvar_Expression_traverseExpBidirSubs MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseExpBidirSubs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpSubs(threadData_t *threadData, modelica_metatype _inSubscript, modelica_fnptr _rel, modelica_metatype _iarg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseExpSubs,2,0) {(void*) boxptr_Expression_traverseExpSubs,0}};
#define boxvar_Expression_traverseExpSubs MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseExpSubs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpBidirSubExps(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _inEnterFunc, modelica_fnptr _inExitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseExpBidirSubExps,2,0) {(void*) boxptr_Expression_traverseExpBidirSubExps,0}};
#define boxvar_Expression_traverseExpBidirSubExps MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseExpBidirSubExps)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingDivExpFinder(threadData_t *threadData, modelica_metatype _e, modelica_metatype _exps, modelica_metatype *out_acc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traversingDivExpFinder,2,0) {(void*) boxptr_Expression_traversingDivExpFinder,0}};
#define boxvar_Expression_traversingDivExpFinder MMC_REFSTRUCTLIT(boxvar_lit_Expression_traversingDivExpFinder)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingCrefFinder(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traversingCrefFinder,2,0) {(void*) boxptr_Expression_traversingCrefFinder,0}};
#define boxvar_Expression_traversingCrefFinder MMC_REFSTRUCTLIT(boxvar_lit_Expression_traversingCrefFinder)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_expHasCrefInSmoothZeroWork(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Ftpl, modelica_metatype *out_tpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_expHasCrefInSmoothZeroWork,2,0) {(void*) boxptr_Expression_expHasCrefInSmoothZeroWork,0}};
#define boxvar_Expression_expHasCrefInSmoothZeroWork MMC_REFSTRUCTLIT(boxvar_lit_Expression_expHasCrefInSmoothZeroWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingexpHasCrefNoPreOrStart(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traversingexpHasCrefNoPreOrStart(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traversingexpHasCrefNoPreOrStart,2,0) {(void*) boxptr_Expression_traversingexpHasCrefNoPreOrStart,0}};
#define boxvar_Expression_traversingexpHasCrefNoPreOrStart MMC_REFSTRUCTLIT(boxvar_lit_Expression_traversingexpHasCrefNoPreOrStart)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingexpHasPrevious(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inHasIt, modelica_boolean *out_cont, modelica_boolean *out_outHasIt);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traversingexpHasPrevious(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inHasIt, modelica_metatype *out_cont, modelica_metatype *out_outHasIt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traversingexpHasPrevious,2,0) {(void*) boxptr_Expression_traversingexpHasPrevious,0}};
#define boxvar_Expression_traversingexpHasPrevious MMC_REFSTRUCTLIT(boxvar_lit_Expression_traversingexpHasPrevious)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingexpHasPre(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inHasIt, modelica_boolean *out_cont, modelica_boolean *out_outHasIt);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traversingexpHasPre(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inHasIt, modelica_metatype *out_cont, modelica_metatype *out_outHasIt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traversingexpHasPre,2,0) {(void*) boxptr_Expression_traversingexpHasPre,0}};
#define boxvar_Expression_traversingexpHasPre MMC_REFSTRUCTLIT(boxvar_lit_Expression_traversingexpHasPre)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_getLhsCrefsFromStatement(threadData_t *threadData, modelica_metatype _inStmt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_getLhsCrefsFromStatement,2,0) {(void*) boxptr_Expression_getLhsCrefsFromStatement,0}};
#define boxvar_Expression_getLhsCrefsFromStatement MMC_REFSTRUCTLIT(boxvar_lit_Expression_getLhsCrefsFromStatement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpTypeDims2(threadData_t *threadData, modelica_metatype _inDims, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outChanged);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traverseExpTypeDims2(threadData_t *threadData, modelica_metatype _inDims, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outChanged);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseExpTypeDims2,2,0) {(void*) boxptr_Expression_traverseExpTypeDims2,0}};
#define boxvar_Expression_traverseExpTypeDims2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseExpTypeDims2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpMatrixTopDown(threadData_t *threadData, modelica_metatype _inMatrix, modelica_fnptr _func, modelica_metatype _inTypeA, modelica_metatype *out_outTypeA);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseExpMatrixTopDown,2,0) {(void*) boxptr_Expression_traverseExpMatrixTopDown,0}};
#define boxvar_Expression_traverseExpMatrixTopDown MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseExpMatrixTopDown)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpTopDown1(threadData_t *threadData, modelica_boolean _cont, modelica_metatype _inExp, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traverseExpTopDown1(threadData_t *threadData, modelica_metatype _cont, modelica_metatype _inExp, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseExpTopDown1,2,0) {(void*) boxptr_Expression_traverseExpTopDown1,0}};
#define boxvar_Expression_traverseExpTopDown1 MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseExpTopDown1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpTopDownClockHelper(threadData_t *threadData, modelica_metatype _inClk, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseExpTopDownClockHelper,2,0) {(void*) boxptr_Expression_traverseExpTopDownClockHelper,0}};
#define boxvar_Expression_traverseExpTopDownClockHelper MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseExpTopDownClockHelper)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpClk(threadData_t *threadData, modelica_metatype _inClk, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseExpClk,2,0) {(void*) boxptr_Expression_traverseExpClk,0}};
#define boxvar_Expression_traverseExpClk MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseExpClk)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpMatrix(threadData_t *threadData, modelica_metatype _inMatrix, modelica_fnptr _func, modelica_metatype _inTypeA, modelica_metatype *out_outTypeA);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_traverseExpMatrix,2,0) {(void*) boxptr_Expression_traverseExpMatrix,0}};
#define boxvar_Expression_traverseExpMatrix MMC_REFSTRUCTLIT(boxvar_lit_Expression_traverseExpMatrix)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_replaceExpWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_otpl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_replaceExpWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_otpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_replaceExpWork,2,0) {(void*) boxptr_Expression_replaceExpWork,0}};
#define boxvar_Expression_replaceExpWork MMC_REFSTRUCTLIT(boxvar_lit_Expression_replaceExpWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_arrayFill2(threadData_t *threadData, modelica_metatype _iDims, modelica_metatype _inExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_arrayFill2,2,0) {(void*) boxptr_Expression_arrayFill2,0}};
#define boxvar_Expression_arrayFill2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_arrayFill2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_listToArray3(threadData_t *threadData, modelica_metatype _inList, modelica_metatype _iDim);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_listToArray3,2,0) {(void*) boxptr_Expression_listToArray3,0}};
#define boxvar_Expression_listToArray3 MMC_REFSTRUCTLIT(boxvar_lit_Expression_listToArray3)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_listToArray2(threadData_t *threadData, modelica_metatype _inList, modelica_metatype _iDims, modelica_metatype _inType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_listToArray2,2,0) {(void*) boxptr_Expression_listToArray2,0}};
#define boxvar_Expression_listToArray2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_listToArray2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_checkIfOther(threadData_t *threadData, modelica_metatype _inTp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_checkIfOther,2,0) {(void*) boxptr_Expression_checkIfOther,0}};
#define boxvar_Expression_checkIfOther MMC_REFSTRUCTLIT(boxvar_lit_Expression_checkIfOther)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makeSumWork(threadData_t *threadData, modelica_metatype _inExpLst, modelica_boolean _simplify);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_makeSumWork(threadData_t *threadData, modelica_metatype _inExpLst, modelica_metatype _simplify);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_makeSumWork,2,0) {(void*) boxptr_Expression_makeSumWork,0}};
#define boxvar_Expression_makeSumWork MMC_REFSTRUCTLIT(boxvar_lit_Expression_makeSumWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_expandFactorsWork2(threadData_t *threadData, modelica_metatype _inAcc, modelica_boolean _doInverseFactors);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_expandFactorsWork2(threadData_t *threadData, modelica_metatype _inAcc, modelica_metatype _doInverseFactors);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_expandFactorsWork2,2,0) {(void*) boxptr_Expression_expandFactorsWork2,0}};
#define boxvar_Expression_expandFactorsWork2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_expandFactorsWork2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_expandFactorsWork3(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_boolean _doInverseFactors);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_expandFactorsWork3(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_metatype _doInverseFactors);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_expandFactorsWork3,2,0) {(void*) boxptr_Expression_expandFactorsWork3,0}};
#define boxvar_Expression_expandFactorsWork3 MMC_REFSTRUCTLIT(boxvar_lit_Expression_expandFactorsWork3)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_expandFactorsWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_boolean _doInverseFactors);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_expandFactorsWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_metatype _doInverseFactors);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_expandFactorsWork,2,0) {(void*) boxptr_Expression_expandFactorsWork,0}};
#define boxvar_Expression_expandFactorsWork MMC_REFSTRUCTLIT(boxvar_lit_Expression_expandFactorsWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_factorsWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_boolean _doInverseFactors);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_factorsWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_metatype _doInverseFactors);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_factorsWork,2,0) {(void*) boxptr_Expression_factorsWork,0}};
#define boxvar_Expression_factorsWork MMC_REFSTRUCTLIT(boxvar_lit_Expression_factorsWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_terms2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inAcc, modelica_boolean _neg);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_terms2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inAcc, modelica_metatype _neg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_terms2,2,0) {(void*) boxptr_Expression_terms2,0}};
#define boxvar_Expression_terms2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_terms2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_getAllCrefsExpanded2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefList, modelica_metatype *out_outCrefList);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_getAllCrefsExpanded2,2,0) {(void*) boxptr_Expression_getAllCrefsExpanded2,0}};
#define boxvar_Expression_getAllCrefsExpanded2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_getAllCrefsExpanded2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_getAllCrefs2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefList, modelica_metatype *out_outCrefList);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_getAllCrefs2,2,0) {(void*) boxptr_Expression_getAllCrefs2,0}};
#define boxvar_Expression_getAllCrefs2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_getAllCrefs2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_typeofRelation(threadData_t *threadData, modelica_metatype _inType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_typeofRelation,2,0) {(void*) boxptr_Expression_typeofRelation,0}};
#define boxvar_Expression_typeofRelation MMC_REFSTRUCTLIT(boxvar_lit_Expression_typeofRelation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_getComplexContentsInCall(threadData_t *threadData, modelica_metatype _expIn);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_getComplexContentsInCall,2,0) {(void*) boxptr_Expression_getComplexContentsInCall,0}};
#define boxvar_Expression_getComplexContentsInCall MMC_REFSTRUCTLIT(boxvar_lit_Expression_getComplexContentsInCall)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makeASUBsForDimension(threadData_t *threadData, modelica_metatype _eIn);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_makeASUBsForDimension,2,0) {(void*) boxptr_Expression_makeASUBsForDimension,0}};
#define boxvar_Expression_makeASUBsForDimension MMC_REFSTRUCTLIT(boxvar_lit_Expression_makeASUBsForDimension)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makeScalarOpFromArrayOp(threadData_t *threadData, modelica_metatype _inOperator, modelica_metatype _inType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_makeScalarOpFromArrayOp,2,0) {(void*) boxptr_Expression_makeScalarOpFromArrayOp,0}};
#define boxvar_Expression_makeScalarOpFromArrayOp MMC_REFSTRUCTLIT(boxvar_lit_Expression_makeScalarOpFromArrayOp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_unliftOperator2(threadData_t *threadData, modelica_metatype _inOperator, modelica_metatype _inType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_unliftOperator2,2,0) {(void*) boxptr_Expression_unliftOperator2,0}};
#define boxvar_Expression_unliftOperator2 MMC_REFSTRUCTLIT(boxvar_lit_Expression_unliftOperator2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_addNoEventToEventTriggeringFunctionsExp(threadData_t *threadData, modelica_metatype _e);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_addNoEventToEventTriggeringFunctionsExp,2,0) {(void*) boxptr_Expression_addNoEventToEventTriggeringFunctionsExp,0}};
#define boxvar_Expression_addNoEventToEventTriggeringFunctionsExp MMC_REFSTRUCTLIT(boxvar_lit_Expression_addNoEventToEventTriggeringFunctionsExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_addNoEventToRelationandCondExp(threadData_t *threadData, modelica_metatype _e);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_addNoEventToRelationandCondExp,2,0) {(void*) boxptr_Expression_addNoEventToRelationandCondExp,0}};
#define boxvar_Expression_addNoEventToRelationandCondExp MMC_REFSTRUCTLIT(boxvar_lit_Expression_addNoEventToRelationandCondExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_addNoEventToRelationExp(threadData_t *threadData, modelica_metatype _e);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_addNoEventToRelationExp,2,0) {(void*) boxptr_Expression_addNoEventToRelationExp,0}};
#define boxvar_Expression_addNoEventToRelationExp MMC_REFSTRUCTLIT(boxvar_lit_Expression_addNoEventToRelationExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_stripNoEventExp(threadData_t *threadData, modelica_metatype _e);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_stripNoEventExp,2,0) {(void*) boxptr_Expression_stripNoEventExp,0}};
#define boxvar_Expression_stripNoEventExp MMC_REFSTRUCTLIT(boxvar_lit_Expression_stripNoEventExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_unelabOperator(threadData_t *threadData, modelica_metatype _op);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_unelabOperator,2,0) {(void*) boxptr_Expression_unelabOperator,0}};
#define boxvar_Expression_unelabOperator MMC_REFSTRUCTLIT(boxvar_lit_Expression_unelabOperator)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_unelabReductionIterator(threadData_t *threadData, modelica_metatype _riter);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_unelabReductionIterator,2,0) {(void*) boxptr_Expression_unelabReductionIterator,0}};
#define boxvar_Expression_unelabReductionIterator MMC_REFSTRUCTLIT(boxvar_lit_Expression_unelabReductionIterator)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_unelabDimensionToFillExp(threadData_t *threadData, modelica_metatype _inDim);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_unelabDimensionToFillExp,2,0) {(void*) boxptr_Expression_unelabDimensionToFillExp,0}};
#define boxvar_Expression_unelabDimensionToFillExp MMC_REFSTRUCTLIT(boxvar_lit_Expression_unelabDimensionToFillExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_unleabZeroExpFromType(threadData_t *threadData, modelica_metatype _ty);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Expression_unleabZeroExpFromType,2,0) {(void*) boxptr_Expression_unleabZeroExpFromType,0}};
#define boxvar_Expression_unleabZeroExpFromType MMC_REFSTRUCTLIT(boxvar_lit_Expression_unleabZeroExpFromType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_consToListIgnoreSharedLiteralWork(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_metatype _acc)
{
modelica_metatype _e = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_e = __omcQ_24in_5Fe;
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _e;
tmp3_2 = _acc;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,36,2) == 0) goto tmp2_end;
__omcQ_24in_5Fe = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 3)));
goto _tailrecursive;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,28,1) == 0) goto tmp2_end;
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[0] = _e;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,28,1) == 0) goto tmp2_end;
tmpMeta[1] = mmc_mk_box2(31, &DAE_Exp_LIST__desc, omc_List_append__reverse(threadData, _acc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 2)))));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,29,2) == 0) goto tmp2_end;
tmpMeta[1] = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 2))), _acc);
__omcQ_24in_5Fe = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 3)));
_acc = tmpMeta[1];
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_e = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _e;
}
DLLExport
modelica_metatype omc_Expression_consToListIgnoreSharedLiteral(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe)
{
modelica_metatype _e = NULL;
modelica_metatype _exp = NULL;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_e = __omcQ_24in_5Fe;
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 39: {
tmp1 = 1;
goto tmp3_done;
}
case 31: {
tmp1 = 1;
goto tmp3_done;
}
case 32: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
if(tmp1)
{
{
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp6_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_e = omc_Expression_consToListIgnoreSharedLiteralWork(threadData, _e, tmpMeta[0]);
goto tmp6_done;
}
case 1: {
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
tmp6_done:
(void)tmp7;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp6_done2;
goto_5:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp7 < 2) {
goto tmp6_top;
}
MMC_THROW_INTERNAL();
tmp6_done2:;
}
}
;
}
_return: OMC_LABEL_UNUSED
return _e;
}
DLLExport
modelica_boolean omc_Expression_isSimpleLiteralValue(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
case 8: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isSimpleLiteralValue(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isSimpleLiteralValue(threadData, _exp);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_metatype omc_Expression_tupleHead(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _prop, modelica_metatype *out_outProp)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outProp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _exp;
tmp4_2 = _prop;
{
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
tmpMeta[0+0] = listHead((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
tmpMeta[0+1] = omc_Types_propTupleFirstProp(threadData, _prop);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],14,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_ty = tmpMeta[4];
tmpMeta[2] = mmc_mk_box4(25, &DAE_Exp_TSUB__desc, _exp, mmc_mk_integer(((modelica_integer) 1)), _ty);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = omc_Types_propTupleFirstProp(threadData, _prop);
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _exp;
tmpMeta[0+1] = _prop;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outProp = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProp) { *out_outProp = _outProp; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_findCallIsInlineAfterIndexReduction(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_boolean __omcQ_24in_5Fres, modelica_boolean *out_cont, modelica_boolean *out_res)
{
modelica_metatype _e = NULL;
modelica_boolean _cont;
modelica_boolean _res;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_e = __omcQ_24in_5Fe;
_res = __omcQ_24in_5Fres;
if((!_res))
{
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
}
_cont = (!_res);
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_res) { *out_res = _res; }
return _e;
}
modelica_metatype boxptr_Expression_findCallIsInlineAfterIndexReduction(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_metatype __omcQ_24in_5Fres, modelica_metatype *out_cont, modelica_metatype *out_res)
{
modelica_integer tmp1;
modelica_boolean _cont;
modelica_boolean _res;
modelica_metatype _e = NULL;
tmp1 = mmc_unbox_integer(__omcQ_24in_5Fres);
_e = omc_Expression_findCallIsInlineAfterIndexReduction(threadData, __omcQ_24in_5Fe, tmp1, &_cont, &_res);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
if (out_res) { *out_res = mmc_mk_icon(_res); }
return _e;
}
DLLExport
modelica_metatype omc_Expression_isInvariantExpNoTraverse(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_boolean __omcQ_24in_5Fb, modelica_boolean *out_b)
{
modelica_metatype _e = NULL;
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_e = __omcQ_24in_5Fe;
_b = __omcQ_24in_5Fb;
if((!_b))
{
goto _return;
}
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 18; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 17: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
if (out_b) { *out_b = _b; }
return _e;
}
modelica_metatype boxptr_Expression_isInvariantExpNoTraverse(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_metatype __omcQ_24in_5Fb, modelica_metatype *out_b)
{
modelica_integer tmp1;
modelica_boolean _b;
modelica_metatype _e = NULL;
tmp1 = mmc_unbox_integer(__omcQ_24in_5Fb);
_e = omc_Expression_isInvariantExpNoTraverse(threadData, __omcQ_24in_5Fe, tmp1, &_b);
if (out_b) { *out_b = mmc_mk_icon(_b); }
return _e;
}
DLLExport
modelica_integer omc_Expression_compareSubscripts(threadData_t *threadData, modelica_metatype _sub1, modelica_metatype _sub2)
{
modelica_integer _res;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(referenceEq(_sub1, _sub2))
{
_res = ((modelica_integer) 0);
}
else
{
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _sub1;
tmp4_2 = _sub2;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,0) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmp1 = omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub1), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub2), 2))));
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmp1 = omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub1), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub2), 2))));
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,1) == 0) goto tmp3_end;
tmp1 = omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub1), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub2), 2))));
goto tmp3_done;
}
case 4: {
tmp1 = omc_Util_intCompare(threadData, valueConstructor(_sub1), valueConstructor(_sub2));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
}
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_compareSubscripts(threadData_t *threadData, modelica_metatype _sub1, modelica_metatype _sub2)
{
modelica_integer _res;
modelica_metatype out_res;
_res = omc_Expression_compareSubscripts(threadData, _sub1, _sub2);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_integer omc_Expression_compare(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_integer _comp;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(referenceEq(_inExp1, _inExp2))
{
_comp = ((modelica_integer) 0);
goto _return;
}
_comp = omc_Util_intCompare(threadData, valueConstructor(_inExp1), valueConstructor(_inExp2));
if((_comp != ((modelica_integer) 0)))
{
goto _return;
}
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp1;
{
modelica_integer _i;
modelica_real _r;
modelica_string _s = NULL;
modelica_boolean _b;
modelica_metatype _p = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _oe = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _mexpl = NULL;
modelica_metatype _op = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _ty = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_integer tmp5;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp5;
tmp1 = omc_Util_intCompare(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2)))), _i);
goto tmp3_done;
}
case 4: {
modelica_real tmp6;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp6 = mmc_unbox_real(tmpMeta[1]);
_r = tmp6;
tmp1 = omc_Util_realCompare(threadData, mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2)))), _r);
goto tmp3_done;
}
case 5: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_s = tmpMeta[1];
tmp1 = stringCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _s);
goto tmp3_done;
}
case 6: {
modelica_integer tmp7;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
_b = tmp7;
tmp1 = omc_Util_boolCompare(threadData, mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2)))), _b);
goto tmp3_done;
}
case 8: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_p = tmpMeta[1];
tmp1 = omc_AbsynUtil_pathCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _p);
goto tmp3_done;
}
case 9: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_cr = tmpMeta[1];
tmp1 = omc_ComponentReference_crefCompareGeneric(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _cr);
goto tmp3_done;
}
case 19: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],16,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_ty = tmpMeta[1];
_expl = tmpMeta[2];
_comp = valueCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _ty);
tmp1 = ((((modelica_integer) 0) == _comp)?omc_Expression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4))), _expl):_comp);
goto tmp3_done;
}
case 20: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],17,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_ty = tmpMeta[1];
_mexpl = tmpMeta[2];
_comp = valueCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _ty);
tmp1 = ((((modelica_integer) 0) == _comp)?omc_Expression_compareListList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4))), _mexpl):_comp);
goto tmp3_done;
}
case 10: {
modelica_boolean tmp8;
modelica_integer tmp9;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],7,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
_comp = omc_Expression_operatorCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _op);
_comp = ((((modelica_integer) 0) == _comp)?omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _e1):_comp);
tmp8 = (modelica_boolean)(((modelica_integer) 0) == _comp);
if(tmp8)
{
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4)));
_inExp2 = _e2;
goto _tailrecursive;
}
else
{
tmp9 = _comp;
}
tmp1 = tmp9;
goto tmp3_done;
}
case 12: {
modelica_boolean tmp10;
modelica_integer tmp11;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],9,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
_comp = omc_Expression_operatorCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _op);
_comp = ((((modelica_integer) 0) == _comp)?omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _e1):_comp);
tmp10 = (modelica_boolean)(((modelica_integer) 0) == _comp);
if(tmp10)
{
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4)));
_inExp2 = _e2;
goto _tailrecursive;
}
else
{
tmp11 = _comp;
}
tmp1 = tmp11;
goto tmp3_done;
}
case 11: {
modelica_boolean tmp12;
modelica_integer tmp13;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],8,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_op = tmpMeta[1];
_e = tmpMeta[2];
_comp = omc_Expression_operatorCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _op);
tmp12 = (modelica_boolean)(((modelica_integer) 0) == _comp);
if(tmp12)
{
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3)));
_inExp2 = _e;
goto _tailrecursive;
}
else
{
tmp13 = _comp;
}
tmp1 = tmp13;
goto tmp3_done;
}
case 13: {
modelica_boolean tmp14;
modelica_integer tmp15;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],10,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_op = tmpMeta[1];
_e = tmpMeta[2];
_comp = omc_Expression_operatorCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _op);
tmp14 = (modelica_boolean)(((modelica_integer) 0) == _comp);
if(tmp14)
{
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3)));
_inExp2 = _e;
goto _tailrecursive;
}
else
{
tmp15 = _comp;
}
tmp1 = tmp15;
goto tmp3_done;
}
case 14: {
modelica_boolean tmp16;
modelica_integer tmp17;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],11,5) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
_comp = omc_Expression_operatorCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _op);
_comp = ((((modelica_integer) 0) == _comp)?omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _e1):_comp);
tmp16 = (modelica_boolean)(((modelica_integer) 0) == _comp);
if(tmp16)
{
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4)));
_inExp2 = _e2;
goto _tailrecursive;
}
else
{
tmp17 = _comp;
}
tmp1 = tmp17;
goto tmp3_done;
}
case 15: {
modelica_boolean tmp18;
modelica_integer tmp19;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],12,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_e = tmpMeta[1];
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_comp = omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _e);
_comp = ((((modelica_integer) 0) == _comp)?omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _e1):_comp);
tmp18 = (modelica_boolean)(((modelica_integer) 0) == _comp);
if(tmp18)
{
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4)));
_inExp2 = _e2;
goto _tailrecursive;
}
else
{
tmp19 = _comp;
}
tmp1 = tmp19;
goto tmp3_done;
}
case 16: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],13,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_p = tmpMeta[1];
_expl = tmpMeta[2];
_comp = omc_AbsynUtil_pathCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _p);
tmp1 = ((((modelica_integer) 0) == _comp)?omc_Expression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _expl):_comp);
goto tmp3_done;
}
case 17: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],14,4) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_p = tmpMeta[1];
_expl = tmpMeta[2];
_comp = omc_AbsynUtil_pathCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _p);
tmp1 = ((((modelica_integer) 0) == _comp)?omc_Expression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _expl):_comp);
goto tmp3_done;
}
case 18: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],15,4) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_p = tmpMeta[1];
_expl = tmpMeta[2];
_comp = omc_AbsynUtil_pathCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _p);
tmp1 = ((((modelica_integer) 0) == _comp)?omc_Expression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _expl):_comp);
goto tmp3_done;
}
case 21: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],18,4) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_e1 = tmpMeta[1];
_oe = tmpMeta[2];
_e2 = tmpMeta[3];
_comp = omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _e1);
_comp = ((((modelica_integer) 0) == _comp)?omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 5))), _e2):_comp);
tmp1 = ((((modelica_integer) 0) == _comp)?omc_Expression_compareOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4))), _oe):_comp);
goto tmp3_done;
}
case 22: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],19,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_expl = tmpMeta[1];
tmp1 = omc_Expression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _expl);
goto tmp3_done;
}
case 23: {
modelica_boolean tmp20;
modelica_integer tmp21;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],20,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_ty = tmpMeta[1];
_e = tmpMeta[2];
_comp = valueCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _ty);
tmp20 = (modelica_boolean)(((modelica_integer) 0) == _comp);
if(tmp20)
{
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3)));
_inExp2 = _e;
goto _tailrecursive;
}
else
{
tmp21 = _comp;
}
tmp1 = tmp21;
goto tmp3_done;
}
case 24: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],21,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_e = tmpMeta[1];
_expl = tmpMeta[2];
_comp = omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _e);
tmp1 = ((_comp == ((modelica_integer) 0))?omc_Expression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _expl):_comp);
goto tmp3_done;
}
case 26: {
modelica_integer tmp22;
modelica_boolean tmp23;
modelica_integer tmp24;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],23,4) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmp22 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_e = tmpMeta[1];
_i = tmp22;
_s = tmpMeta[3];
_ty = tmpMeta[4];
_comp = omc_Util_intCompare(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3)))), _i);
_comp = ((_comp == ((modelica_integer) 0))?valueCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 5))), _ty):_comp);
_comp = ((_comp == ((modelica_integer) 0))?stringCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4))), _s):_comp);
tmp23 = (modelica_boolean)(_comp == ((modelica_integer) 0));
if(tmp23)
{
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2)));
_inExp2 = _e;
goto _tailrecursive;
}
else
{
tmp24 = _comp;
}
tmp1 = tmp24;
goto tmp3_done;
}
case 25: {
modelica_integer tmp25;
modelica_boolean tmp26;
modelica_integer tmp27;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],22,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmp25 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_e = tmpMeta[1];
_i = tmp25;
_ty = tmpMeta[3];
_comp = omc_Util_intCompare(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3)))), _i);
_comp = ((((modelica_integer) 0) == _comp)?valueCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4))), _ty):_comp);
tmp26 = (modelica_boolean)(((modelica_integer) 0) == _comp);
if(tmp26)
{
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2)));
_inExp2 = _e;
goto _tailrecursive;
}
else
{
tmp27 = _comp;
}
tmp1 = tmp27;
goto tmp3_done;
}
case 27: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],24,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_e = tmpMeta[1];
_oe = tmpMeta[2];
_comp = omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _e);
tmp1 = ((_comp == ((modelica_integer) 0))?omc_Expression_compareOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _oe):_comp);
goto tmp3_done;
}
case 30: {
tmp1 = valueCompare(_inExp1, _inExp2);
goto tmp3_done;
}
case 31: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],28,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_expl = tmpMeta[1];
tmp1 = omc_Expression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _expl);
goto tmp3_done;
}
case 32: {
modelica_boolean tmp28;
modelica_integer tmp29;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],29,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_comp = omc_Expression_compare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _e1);
tmp28 = (modelica_boolean)(((modelica_integer) 0) == _comp);
if(tmp28)
{
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3)));
_inExp2 = _e2;
goto _tailrecursive;
}
else
{
tmp29 = _comp;
}
tmp1 = tmp29;
goto tmp3_done;
}
case 33: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],30,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_expl = tmpMeta[1];
tmp1 = omc_Expression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _expl);
goto tmp3_done;
}
case 34: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],31,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_oe = tmpMeta[1];
tmp1 = omc_Expression_compareOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _oe);
goto tmp3_done;
}
case 35: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],32,5) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_p = tmpMeta[1];
_expl = tmpMeta[2];
_comp = omc_AbsynUtil_pathCompare(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2))), _p);
tmp1 = ((_comp == ((modelica_integer) 0))?omc_Expression_compareList(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _expl):_comp);
goto tmp3_done;
}
case 36: {
tmp1 = valueCompare(_inExp1, _inExp2);
goto tmp3_done;
}
case 37: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],34,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_e = tmpMeta[1];
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2)));
_inExp2 = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 38: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],35,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_e = tmpMeta[1];
_inExp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2)));
_inExp2 = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 39: {
modelica_integer tmp30;
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],36,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp30 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp30;
tmp1 = omc_Util_intCompare(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 2)))), _i);
goto tmp3_done;
}
case 29: {
tmpMeta[0] = _inExp2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],26,4) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_cr = tmpMeta[1];
tmp1 = omc_ComponentReference_crefCompareGeneric(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 3))), _cr);
goto tmp3_done;
}
case 28: {
tmp1 = valueCompare(_inExp1, _inExp2);
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
modelica_string tmp31;
tmp31 = modelica_integer_to_modelica_string(valueConstructor(_inExp1), ((modelica_integer) 0), 1);
tmpMeta[0] = stringAppend(_OMC_LIT0,tmp31);
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT1);
tmpMeta[2] = stringAppend(tmpMeta[1],omc_ExpressionDump_printExpStr(threadData, _inExp1));
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT1);
tmpMeta[4] = stringAppend(tmpMeta[3],omc_ExpressionDump_printExpStr(threadData, _inExp2));
omc_Error_addInternalError(threadData, tmpMeta[4], _OMC_LIT3);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_comp = tmp1;
_return: OMC_LABEL_UNUSED
return _comp;
}
modelica_metatype boxptr_Expression_compare(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_integer _comp;
modelica_metatype out_comp;
_comp = omc_Expression_compare(threadData, _inExp1, _inExp2);
out_comp = mmc_mk_icon(_comp);
return out_comp;
}
DLLExport
modelica_integer omc_Expression_rangeSize(threadData_t *threadData, modelica_metatype _inRange)
{
modelica_integer _outSize;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inRange;
{
modelica_integer _start;
modelica_integer _step;
modelica_integer _stop;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (!listEmpty(tmpMeta[3])) goto tmp3_end;
_outSize = tmp6;
tmp1 = _outSize;
goto tmp3_done;
}
case 1: {
modelica_integer tmp7;
modelica_integer tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp8 = mmc_unbox_integer(tmpMeta[4]);
_start = tmp7;
_stop = tmp8;
tmp1 = modelica_integer_max((modelica_integer)(_stop - _start),(modelica_integer)(((modelica_integer) 0)));
goto tmp3_done;
}
case 2: {
modelica_integer tmp9;
modelica_integer tmp10;
modelica_integer tmp11;
modelica_real tmp12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp9 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmp11 = mmc_unbox_integer(tmpMeta[6]);
_start = tmp9;
_step = tmp10;
_stop = tmp11;
if((_step != ((modelica_integer) 0)))
{
tmp12 = ((modelica_real)_step);
if (tmp12 == 0) {goto goto_2;}
_outSize = modelica_integer_max((modelica_integer)(((modelica_integer) 1) + ((modelica_integer)floor(floor((((modelica_real)_stop - _start)) / tmp12)))),(modelica_integer)(((modelica_integer) 0)));
}
else
{
goto goto_2;
}
tmp1 = _outSize;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outSize = tmp1;
_return: OMC_LABEL_UNUSED
return _outSize;
}
modelica_metatype boxptr_Expression_rangeSize(threadData_t *threadData, modelica_metatype _inRange)
{
modelica_integer _outSize;
modelica_metatype out_outSize;
_outSize = omc_Expression_rangeSize(threadData, _inRange);
out_outSize = mmc_mk_icon(_outSize);
return out_outSize;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_containsCallTo__traverser(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_outContinue, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_boolean _outContinue;
modelica_metatype _outTpl = NULL;
modelica_boolean _containsCall;
modelica_metatype _path = NULL;
modelica_integer tmp1;
modelica_boolean tmp2 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _inExp;
_outContinue = 0;
_outTpl = _inTpl;
tmpMeta[0] = _outTpl;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[2]);
_path = tmpMeta[1];
_containsCall = tmp1;
if(_containsCall)
{
goto _return;
}
{
modelica_metatype tmp5_1;
tmp5_1 = _inExp;
{
volatile mmc_switch_type tmp5;
int tmp6;
tmp5 = 0;
for (; tmp5 < 2; tmp5++) {
switch (MMC_SWITCH_CAST(tmp5)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,13,3) == 0) goto tmp4_end;
tmp2 = omc_AbsynUtil_pathEqual(threadData, _path, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))));
goto tmp4_done;
}
case 1: {
tmp2 = 1;
goto tmp4_done;
}
}
goto tmp4_end;
tmp4_end: ;
}
goto goto_3;
goto_3:;
MMC_THROW_INTERNAL();
goto tmp4_done;
tmp4_done:;
}
}
_outContinue = tmp2;
if((!_outContinue))
{
tmpMeta[0] = mmc_mk_box2(0, _path, mmc_mk_boolean(0));
_outTpl = tmpMeta[0];
}
_return: OMC_LABEL_UNUSED
if (out_outContinue) { *out_outContinue = _outContinue; }
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_containsCallTo__traverser(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outContinue, modelica_metatype *out_outTpl)
{
modelica_boolean _outContinue;
modelica_metatype _outExp = NULL;
_outExp = omc_Expression_containsCallTo__traverser(threadData, _inExp, _inTpl, &_outContinue, out_outTpl);
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_containsCallTo(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _path)
{
modelica_boolean _outContainsCall;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = mmc_mk_box2(0, _path, mmc_mk_boolean(0));
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_containsCallTo__traverser, tmpMeta[2], &tmpMeta[0]);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_outContainsCall = tmp1;
_return: OMC_LABEL_UNUSED
return _outContainsCall;
}
modelica_metatype boxptr_Expression_containsCallTo(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _path)
{
modelica_boolean _outContainsCall;
modelica_metatype out_outContainsCall;
_outContainsCall = omc_Expression_containsCallTo(threadData, _inExp, _path);
out_outContainsCall = mmc_mk_icon(_outContainsCall);
return out_outContainsCall;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_containsAnyCall__traverser(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inContainsCall, modelica_boolean *out_outContinue, modelica_boolean *out_outContainsCall)
{
modelica_metatype _outExp = NULL;
modelica_boolean _outContinue;
modelica_boolean _outContainsCall;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _inExp;
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = _inContainsCall;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outContainsCall = tmp1;
_outContinue = (!_outContainsCall);
_return: OMC_LABEL_UNUSED
if (out_outContinue) { *out_outContinue = _outContinue; }
if (out_outContainsCall) { *out_outContainsCall = _outContainsCall; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_containsAnyCall__traverser(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inContainsCall, modelica_metatype *out_outContinue, modelica_metatype *out_outContainsCall)
{
modelica_integer tmp1;
modelica_boolean _outContinue;
modelica_boolean _outContainsCall;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inContainsCall);
_outExp = omc_Expression_containsAnyCall__traverser(threadData, _inExp, tmp1, &_outContinue, &_outContainsCall);
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
if (out_outContainsCall) { *out_outContainsCall = mmc_mk_icon(_outContainsCall); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_containsAnyCall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outContainsCall;
modelica_integer tmp1;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_containsAnyCall__traverser, mmc_mk_boolean(0), &tmpMeta[0]);
tmp1 = mmc_unbox_integer(tmpMeta[0]);
_outContainsCall = tmp1;
_return: OMC_LABEL_UNUSED
return _outContainsCall;
}
modelica_metatype boxptr_Expression_containsAnyCall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outContainsCall;
modelica_metatype out_outContainsCall;
_outContainsCall = omc_Expression_containsAnyCall(threadData, _inExp);
out_outContainsCall = mmc_mk_icon(_outContainsCall);
return out_outContainsCall;
}
DLLExport
modelica_boolean omc_Expression_isScalar(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsScalar;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
case 7: {
tmp1 = 1;
goto tmp3_done;
}
case 8: {
tmp1 = 1;
goto tmp3_done;
}
case 11: {
_inExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3)));
goto _tailrecursive;
goto tmp3_done;
}
case 13: {
_inExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3)));
goto _tailrecursive;
goto tmp3_done;
}
case 14: {
tmp1 = 1;
goto tmp3_done;
}
case 19: {
tmp1 = 0;
goto tmp3_done;
}
case 20: {
tmp1 = 0;
goto tmp3_done;
}
case 21: {
tmp1 = 0;
goto tmp3_done;
}
case 23: {
_inExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3)));
goto _tailrecursive;
goto tmp3_done;
}
case 27: {
tmp1 = isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3))));
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = omc_Types_isSimpleType(threadData, omc_Expression_typeof(threadData, _inExp));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsScalar = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsScalar;
}
modelica_metatype boxptr_Expression_isScalar(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsScalar;
modelica_metatype out_outIsScalar;
_outIsScalar = omc_Expression_isScalar(threadData, _inExp);
out_outIsScalar = mmc_mk_icon(_outIsScalar);
return out_outIsScalar;
}
DLLExport
modelica_metatype omc_Expression_expandRange(threadData_t *threadData, modelica_metatype _inRange)
{
modelica_metatype _outValues = NULL;
modelica_metatype _start_exp = NULL;
modelica_metatype _stop_exp = NULL;
modelica_metatype _ostep_exp = NULL;
modelica_integer _istep;
modelica_real _rstep;
modelica_metatype _vals = NULL;
modelica_metatype _enum_names = NULL;
modelica_metatype _enum_type = NULL;
modelica_metatype _range_ty = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inRange;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],18,4) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_start_exp = tmpMeta[1];
_ostep_exp = tmpMeta[2];
_stop_exp = tmpMeta[3];
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _start_exp;
tmp3_2 = _stop_exp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[1] = omc_Util_getOptionOrDefault(threadData, _ostep_exp, _OMC_LIT4);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
_istep = tmp5;
{
modelica_metatype __omcQ_24tmpVar1;
modelica_metatype* tmp6;
modelica_metatype __omcQ_24tmpVar0;
int tmp7;
modelica_metatype _i_loopVar = 0;
modelica_metatype _i;
_i_loopVar = omc_List_intRange3(threadData, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_start_exp), 2)))), _istep, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_stop_exp), 2)))));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar1 = tmpMeta[2];
tmp6 = &__omcQ_24tmpVar1;
while(1) {
tmp7 = 1;
if (!listEmpty(_i_loopVar)) {
_i = MMC_CAR(_i_loopVar);
_i_loopVar = MMC_CDR(_i_loopVar);
tmp7--;
}
if (tmp7 == 0) {
tmpMeta[3] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, _i);
__omcQ_24tmpVar0 = tmpMeta[3];
*tmp6 = mmc_mk_cons(__omcQ_24tmpVar0,0);
tmp6 = &MMC_CDR(*tmp6);
} else if (tmp7 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp6 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar1;
}
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_real tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[1] = omc_Util_getOptionOrDefault(threadData, _ostep_exp, _OMC_LIT6);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp8 = mmc_unbox_real(tmpMeta[2]);
_rstep = tmp8;
{
modelica_metatype __omcQ_24tmpVar3;
modelica_metatype* tmp9;
modelica_metatype __omcQ_24tmpVar2;
int tmp10;
modelica_metatype _r_loopVar = 0;
modelica_metatype _r;
_r_loopVar = omc_ExpressionSimplify_simplifyRangeReal(threadData, mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_start_exp), 2)))), _rstep, mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_stop_exp), 2)))));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar3 = tmpMeta[2];
tmp9 = &__omcQ_24tmpVar3;
while(1) {
tmp10 = 1;
if (!listEmpty(_r_loopVar)) {
_r = MMC_CAR(_r_loopVar);
_r_loopVar = MMC_CDR(_r_loopVar);
tmp10--;
}
if (tmp10 == 0) {
tmpMeta[3] = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, _r);
__omcQ_24tmpVar2 = tmpMeta[3];
*tmp9 = mmc_mk_cons(__omcQ_24tmpVar2,0);
tmp9 = &MMC_CDR(*tmp9);
} else if (tmp10 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp9 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar3;
}
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
modelica_integer tmp11;
modelica_integer tmp12;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp11 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp11) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,3,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp12 = mmc_unbox_integer(tmpMeta[2]);
if (1 != tmp12) goto tmp2_end;
tmpMeta[1] = mmc_mk_cons(_start_exp, mmc_mk_cons(_stop_exp, MMC_REFSTRUCTLIT(mmc_nil)));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
modelica_integer tmp13;
modelica_integer tmp14;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp13 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp13) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,3,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp14 = mmc_unbox_integer(tmpMeta[2]);
if (0 != tmp14) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,3,1) == 0) goto tmp2_end;
tmpMeta[1] = mmc_mk_cons(_start_exp, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,2) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,5,2) == 0) goto tmp2_end;
if((mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_start_exp), 3)))) > mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_stop_exp), 3))))))
{
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_vals = tmpMeta[1];
}
else
{
if((mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_start_exp), 3)))) == mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_stop_exp), 3))))))
{
tmpMeta[1] = mmc_mk_cons(_start_exp, MMC_REFSTRUCTLIT(mmc_nil));
_vals = tmpMeta[1];
}
else
{
tmpMeta[1] = _inRange;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],18,4) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_range_ty = tmpMeta[2];
tmpMeta[1] = omc_Types_arrayElementType(threadData, _range_ty);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,5) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_enum_type = tmpMeta[2];
_enum_names = tmpMeta[3];
_enum_names = omc_List_sublist(threadData, _enum_names, mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_start_exp), 3)))), ((modelica_integer) 1) + mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_stop_exp), 3)))) - (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_start_exp), 3))))));
_vals = omc_Expression_makeEnumLiterals(threadData, _enum_type, _enum_names);
}
}
tmpMeta[0] = _vals;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outValues = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outValues;
}
DLLExport
modelica_metatype omc_Expression_typeCastElements(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inType)
{
modelica_metatype _outExp = NULL;
modelica_metatype _ty = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ty = omc_Expression_typeof(threadData, _inExp);
_ty = omc_Types_setArrayElementType(threadData, _ty, _inType);
_outExp = omc_Expression_typeCast(threadData, _inExp, _ty);
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_typeCast(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inType)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box3(23, &DAE_Exp_CAST__desc, _inType, _inExp);
_outExp = tmpMeta[0];
_outExp = omc_ExpressionSimplify_simplify1(threadData, _outExp, NULL);
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_isAsubExp(threadData_t *threadData, modelica_metatype _expIn)
{
modelica_boolean _isAsub;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _expIn;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isAsub = tmp1;
_return: OMC_LABEL_UNUSED
return _isAsub;
}
modelica_metatype boxptr_Expression_isAsubExp(threadData_t *threadData, modelica_metatype _expIn)
{
modelica_boolean _isAsub;
modelica_metatype out_isAsub;
_isAsub = omc_Expression_isAsubExp(threadData, _expIn);
out_isAsub = mmc_mk_icon(_isAsub);
return out_isAsub;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_createResidualExp4(threadData_t *threadData, modelica_string _f)
{
modelica_boolean _resB;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;
tmp4_1 = _f;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT7), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT8), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (5 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT10), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT11), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT12), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_resB = tmp1;
_return: OMC_LABEL_UNUSED
return _resB;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_createResidualExp4(threadData_t *threadData, modelica_metatype _f)
{
modelica_boolean _resB;
modelica_metatype out_resB;
_resB = omc_Expression_createResidualExp4(threadData, _f);
out_resB = mmc_mk_icon(_resB);
return out_resB;
}
DLLExport
modelica_metatype omc_Expression_createResidualExp3(threadData_t *threadData, modelica_metatype _iExp1, modelica_metatype _iExp2, modelica_metatype *out_oExp2, modelica_boolean *out_con)
{
modelica_metatype _oExp1 = NULL;
modelica_metatype _oExp2 = NULL;
modelica_boolean _con;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[17] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _iExp1;
tmp4_2 = _iExp2;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_metatype _tp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 9; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,13,3) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],1,1) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[10])) goto tmp3_end;
tmpMeta[11] = MMC_CAR(tmpMeta[10]);
tmpMeta[12] = MMC_CDR(tmpMeta[10]);
if (!listEmpty(tmpMeta[12])) goto tmp3_end;
_s1 = tmpMeta[4];
_e1 = tmpMeta[6];
_s2 = tmpMeta[9];
_e2 = tmpMeta[11];
tmp4 += 1;
if (!((stringEqual(_s1, _s2)) && omc_Expression_createResidualExp4(threadData, _s1))) goto tmp3_end;
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e2;
tmp1_c2 = 1;
goto tmp3_done;
}
case 1: {
modelica_real tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp6 = mmc_unbox_real(tmpMeta[3]);
if (0.0 != tmp6) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (4 != MMC_STRLEN(tmpMeta[5]) || strcmp(MMC_STRINGDATA(_OMC_LIT7), MMC_STRINGDATA(tmpMeta[5])) != 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
if (!listEmpty(tmpMeta[8])) goto tmp3_end;
_e1 = tmpMeta[7];
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _iExp2;
tmp1_c2 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (4 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT7), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
_e1 = tmpMeta[6];
_e2 = tmp4_2;
tmp4 += 5;
if (!omc_Expression_isConst(threadData, _e2)) goto tmp3_end;
_e = omc_Expression_expPow(threadData, _iExp2, _OMC_LIT14);
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e;
tmp1_c2 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
_e1 = tmpMeta[6];
_e2 = tmp4_2;
tmp4 += 4;
if (!omc_Expression_isConst(threadData, _e2)) goto tmp3_end;
_tp = omc_Expression_typeof(threadData, _iExp2);
tmpMeta[3] = mmc_mk_cons(_iExp2, MMC_REFSTRUCTLIT(mmc_nil));
_e = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT8, tmpMeta[3], _tp);
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e;
tmp1_c2 = 1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (5 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT10), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
_e1 = tmpMeta[6];
_e2 = tmp4_2;
tmp4 += 3;
if (!omc_Expression_isConst(threadData, _e2)) goto tmp3_end;
_e = omc_Expression_expPow(threadData, _OMC_LIT16, _iExp2);
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e;
tmp1_c2 = 1;
goto tmp3_done;
}
case 5: {
modelica_real tmp7;
modelica_real tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp7 = mmc_unbox_real(tmpMeta[3]);
if (0.0 != tmp7) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (10 != MMC_STRLEN(tmpMeta[5]) || strcmp(MMC_STRINGDATA(_OMC_LIT17), MMC_STRINGDATA(tmpMeta[5])) != 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,1) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmp8 = mmc_unbox_real(tmpMeta[9]);
if (0.0 != tmp8) goto tmp3_end;
if (listEmpty(tmpMeta[8])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[8]);
tmpMeta[11] = MMC_CDR(tmpMeta[8]);
if (listEmpty(tmpMeta[11])) goto tmp3_end;
tmpMeta[12] = MMC_CAR(tmpMeta[11]);
tmpMeta[13] = MMC_CDR(tmpMeta[11]);
if (!listEmpty(tmpMeta[13])) goto tmp3_end;
_e1 = tmpMeta[10];
_e2 = tmpMeta[12];
tmp4 += 2;
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e2;
tmp1_c2 = 1;
goto tmp3_done;
}
case 6: {
modelica_real tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp9 = mmc_unbox_real(tmpMeta[3]);
if (0.0 != tmp9) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],5,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e2 = tmp4_2;
_e1 = tmpMeta[5];
tmp4 += 1;
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e2;
tmp1_c2 = 1;
goto tmp3_done;
}
case 7: {
modelica_real tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp10 = mmc_unbox_real(tmpMeta[3]);
if (0.0 != tmp10) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],13,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (!listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[10],1,1) == 0) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[11],13,3) == 0) goto tmp3_end;
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[12],1,1) == 0) goto tmp3_end;
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 3));
if (listEmpty(tmpMeta[14])) goto tmp3_end;
tmpMeta[15] = MMC_CAR(tmpMeta[14]);
tmpMeta[16] = MMC_CDR(tmpMeta[14]);
if (!listEmpty(tmpMeta[16])) goto tmp3_end;
_s1 = tmpMeta[6];
_e1 = tmpMeta[8];
_s2 = tmpMeta[13];
_e2 = tmpMeta[15];
if (!((stringEqual(_s1, _s2)) && omc_Expression_createResidualExp4(threadData, _s1))) goto tmp3_end;
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e2;
tmp1_c2 = 1;
goto tmp3_done;
}
case 8: {
tmpMeta[0+0] = _iExp1;
tmpMeta[0+1] = _iExp2;
tmp1_c2 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 9) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_oExp1 = tmpMeta[0+0];
_oExp2 = tmpMeta[0+1];
_con = tmp1_c2;
_return: OMC_LABEL_UNUSED
if (out_oExp2) { *out_oExp2 = _oExp2; }
if (out_con) { *out_con = _con; }
return _oExp1;
}
modelica_metatype boxptr_Expression_createResidualExp3(threadData_t *threadData, modelica_metatype _iExp1, modelica_metatype _iExp2, modelica_metatype *out_oExp2, modelica_metatype *out_con)
{
modelica_boolean _con;
modelica_metatype _oExp1 = NULL;
_oExp1 = omc_Expression_createResidualExp3(threadData, _iExp1, _iExp2, out_oExp2, &_con);
if (out_con) { *out_con = mmc_mk_icon(_con); }
return _oExp1;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_createResidualExp2(threadData_t *threadData, modelica_metatype _iExp1, modelica_metatype _iExp2, modelica_metatype *out_oExp2)
{
modelica_metatype _oExp1 = NULL;
modelica_metatype _oExp2 = NULL;
modelica_boolean _con;
modelica_boolean _con1;
modelica_integer _ii;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_boolean tmp8_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_oExp1 = _iExp1;
_oExp2 = _iExp2;
_con = 1;
_ii = ((modelica_integer) 1);
while(1)
{
if(!(_con && (_ii < ((modelica_integer) 15)))) break;
{
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
tmpMeta[4] = omc_Expression_createResidualExp3(threadData, _oExp1, _oExp2, &tmpMeta[3], &tmp6);
_e1 = tmpMeta[4];
if (1 != tmp6) goto goto_2;
_e2 = tmpMeta[3];
_e1 = omc_ExpressionSimplify_simplify1(threadData, _e1, NULL);
_e2 = omc_ExpressionSimplify_simplify1(threadData, _e2, NULL);
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e2;
tmp1_c2 = 1;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp7;
tmpMeta[4] = omc_Expression_createResidualExp3(threadData, _oExp2, _oExp1, &tmpMeta[3], &tmp7);
_e2 = tmpMeta[4];
if (1 != tmp7) goto goto_2;
_e1 = tmpMeta[3];
_e1 = omc_ExpressionSimplify_simplify1(threadData, _e1, NULL);
_e2 = omc_ExpressionSimplify_simplify1(threadData, _e2, NULL);
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e2;
tmp1_c2 = 1;
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _oExp1;
tmpMeta[0+1] = _oExp2;
tmp1_c2 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_oExp1 = tmpMeta[0+0];
_oExp2 = tmpMeta[0+1];
_con = tmp1_c2;
{
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp11;
int tmp12;
tmp11 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp10_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp11 < 5; tmp11++) {
switch (MMC_SWITCH_CAST(tmp11)) {
case 0: {
modelica_boolean tmp13;
tmp13 = omc_Expression_isZero(threadData, _oExp1);
if (1 != tmp13) goto goto_9;
_e1 = omc_Expression_makeFraction(threadData, _oExp2 ,&_e2);
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _oExp1;
tmp8_c2 = (!omc_Expression_isOne(threadData, _e2));
goto tmp10_done;
}
case 1: {
modelica_boolean tmp14;
tmp14 = omc_Expression_isZero(threadData, _oExp2);
if (1 != tmp14) goto goto_9;
_e1 = omc_Expression_makeFraction(threadData, _oExp1 ,&_e2);
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _oExp2;
tmp8_c2 = (!omc_Expression_isOne(threadData, _e2));
goto tmp10_done;
}
case 2: {
modelica_boolean tmp15;
tmp15 = omc_Expression_isOne(threadData, _oExp1);
if (1 != tmp15) goto goto_9;
_e1 = omc_Expression_makeFraction(threadData, _oExp2 ,&_e2);
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e2;
tmp8_c2 = (!omc_Expression_isOne(threadData, _e2));
goto tmp10_done;
}
case 3: {
modelica_boolean tmp16;
tmp16 = omc_Expression_isOne(threadData, _oExp2);
if (1 != tmp16) goto goto_9;
_e1 = omc_Expression_makeFraction(threadData, _oExp1 ,&_e2);
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e2;
tmp8_c2 = (!omc_Expression_isOne(threadData, _e2));
goto tmp10_done;
}
case 4: {
tmpMeta[0+0] = _oExp1;
tmpMeta[0+1] = _oExp2;
tmp8_c2 = 0;
goto tmp10_done;
}
}
goto tmp10_end;
tmp10_end: ;
}
goto goto_9;
tmp10_done:
(void)tmp11;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp10_done2;
goto_9:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp11 < 5) {
goto tmp10_top;
}
MMC_THROW_INTERNAL();
tmp10_done2:;
}
}
_oExp1 = tmpMeta[0+0];
_oExp2 = tmpMeta[0+1];
_con1 = tmp8_c2;
_con = (_con || _con1);
_ii = ((modelica_integer) 1) + _ii;
if((!_con))
{
_oExp1 = omc_ExpressionSimplify_simplify1(threadData, _oExp1 ,&_con);
_oExp2 = omc_ExpressionSimplify_simplify1(threadData, _oExp2 ,&_con1);
_con = (_con || _con1);
_ii = ((modelica_integer) 3) + _ii;
}
}
_oExp1 = omc_ExpressionSimplify_simplify1(threadData, _oExp1, NULL);
_oExp2 = omc_ExpressionSimplify_simplify1(threadData, _oExp2, NULL);
_return: OMC_LABEL_UNUSED
if (out_oExp2) { *out_oExp2 = _oExp2; }
return _oExp1;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_moveDivToMul(threadData_t *threadData, modelica_metatype _iExpLst, modelica_metatype _iExpLstAcc, modelica_metatype _iExpMuls, modelica_metatype *out_oExpMuls)
{
modelica_metatype _oExpLst = NULL;
modelica_metatype _oExpMuls = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _iExpLst;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _acc = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0+0] = _iExpLstAcc;
tmpMeta[0+1] = _iExpMuls;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],8,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],7,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],3,1) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_e1 = tmpMeta[5];
_e2 = tmpMeta[7];
_rest = tmpMeta[3];
_acc = omc_List_map1(threadData, _iExpLstAcc, boxvar_Expression_expMul, _e2);
_rest = omc_List_map1(threadData, _rest, boxvar_Expression_expMul, _e2);
_rest = omc_ExpressionSimplify_simplifyList(threadData, _rest);
tmpMeta[2] = mmc_mk_cons(omc_Expression_negate(threadData, _e1), _acc);
tmpMeta[3] = mmc_mk_cons(_e2, _iExpMuls);
_iExpLst = _rest;
_iExpLstAcc = tmpMeta[2];
_iExpMuls = tmpMeta[3];
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],8,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],7,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],16,1) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_e1 = tmpMeta[5];
_e2 = tmpMeta[7];
_rest = tmpMeta[3];
_acc = omc_List_map1(threadData, _iExpLstAcc, boxvar_Expression_expMul, _e2);
_rest = omc_List_map1(threadData, _rest, boxvar_Expression_expMul, _e2);
_rest = omc_ExpressionSimplify_simplifyList(threadData, _rest);
tmpMeta[2] = mmc_mk_cons(omc_Expression_negate(threadData, _e1), _acc);
tmpMeta[3] = mmc_mk_cons(_e2, _iExpMuls);
_iExpLst = _rest;
_iExpLstAcc = tmpMeta[2];
_iExpMuls = tmpMeta[3];
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],7,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_e1 = tmpMeta[4];
_e2 = tmpMeta[6];
_rest = tmpMeta[3];
_acc = omc_List_map1(threadData, _iExpLstAcc, boxvar_Expression_expMul, _e2);
_rest = omc_List_map1(threadData, _rest, boxvar_Expression_expMul, _e2);
_rest = omc_ExpressionSimplify_simplifyList(threadData, _rest);
tmpMeta[2] = mmc_mk_cons(_e1, _acc);
tmpMeta[3] = mmc_mk_cons(_e2, _iExpMuls);
_iExpLst = _rest;
_iExpLstAcc = tmpMeta[2];
_iExpMuls = tmpMeta[3];
goto _tailrecursive;
goto tmp3_done;
}
case 4: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],7,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],16,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_e1 = tmpMeta[4];
_e2 = tmpMeta[6];
_rest = tmpMeta[3];
_acc = omc_List_map1(threadData, _iExpLstAcc, boxvar_Expression_expMul, _e2);
_rest = omc_List_map1(threadData, _rest, boxvar_Expression_expMul, _e2);
_rest = omc_ExpressionSimplify_simplifyList(threadData, _rest);
tmpMeta[2] = mmc_mk_cons(_e1, _acc);
tmpMeta[3] = mmc_mk_cons(_e2, _iExpMuls);
_iExpLst = _rest;
_iExpLstAcc = tmpMeta[2];
_iExpMuls = tmpMeta[3];
goto _tailrecursive;
goto tmp3_done;
}
case 5: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_e = tmpMeta[2];
_rest = tmpMeta[3];
tmpMeta[2] = mmc_mk_cons(_e, _iExpLstAcc);
_iExpLst = _rest;
_iExpLstAcc = tmpMeta[2];
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_oExpLst = tmpMeta[0+0];
_oExpMuls = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_oExpMuls) { *out_oExpMuls = _oExpMuls; }
return _oExpLst;
}
DLLExport
modelica_metatype omc_Expression_makeFraction(threadData_t *threadData, modelica_metatype _iExp, modelica_metatype *out_d)
{
modelica_metatype _n = NULL;
modelica_metatype _d = NULL;
modelica_metatype _N = NULL;
modelica_metatype _D = NULL;
modelica_metatype _T = NULL;
modelica_metatype _tp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_tp = omc_Expression_typeof(threadData, _iExp);
_T = omc_Expression_terms(threadData, _iExp);
_T = omc_ExpressionSimplify_simplifyList(threadData, _T);
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_N = omc_Expression_moveDivToMul(threadData, _T, tmpMeta[0], tmpMeta[1] ,&_D);
_N = omc_ExpressionSimplify_simplifyList(threadData, _N);
_D = omc_ExpressionSimplify_simplifyList(threadData, _D);
_n = omc_Expression_makeSum1(threadData, _N, 0);
_d = omc_Expression_makeProductLst(threadData, _D);
_n = omc_ExpressionSimplify_simplify1(threadData, _n, NULL);
_d = omc_ExpressionSimplify_simplify1(threadData, _d, NULL);
_return: OMC_LABEL_UNUSED
if (out_d) { *out_d = _d; }
return _n;
}
DLLExport
modelica_metatype omc_Expression_createResidualExp(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_metatype _resExp = NULL;
modelica_metatype _iExp1 = NULL;
modelica_metatype _iExp2 = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_iExp1 = omc_Expression_createResidualExp2(threadData, _inExp1, _inExp2 ,&_iExp2);
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _iExp1;
tmp3_2 = _iExp2;
{
modelica_metatype _res = NULL;
modelica_metatype _res1 = NULL;
modelica_metatype _res2 = NULL;
modelica_metatype _N1 = NULL;
modelica_metatype _D1 = NULL;
modelica_metatype _N2 = NULL;
modelica_metatype _D2 = NULL;
modelica_metatype _explst = NULL;
modelica_metatype _explst1 = NULL;
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 9; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_real tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp5 = mmc_unbox_real(tmpMeta[1]);
if (0.0 != tmp5) goto tmp2_end;
tmp3 += 1;
tmpMeta[0] = _iExp1;
goto tmp2_done;
}
case 1: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp6) goto tmp2_end;
tmpMeta[0] = _iExp1;
goto tmp2_done;
}
case 2: {
modelica_real tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp7 = mmc_unbox_real(tmpMeta[1]);
if (0.0 != tmp7) goto tmp2_end;
tmp3 += 1;
tmpMeta[0] = _iExp2;
goto tmp2_done;
}
case 3: {
modelica_integer tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp8 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp8) goto tmp2_end;
tmpMeta[0] = _iExp2;
goto tmp2_done;
}
case 4: {
modelica_boolean tmp9;
_ty = omc_Expression_typeof(threadData, _iExp1);
tmp9 = omc_Types_isIntegerOrRealOrSubTypeOfEither(threadData, _ty);
if (1 != tmp9) goto goto_1;
_N1 = omc_Expression_makeFraction(threadData, _iExp1 ,&_D1);
_N2 = omc_Expression_makeFraction(threadData, _iExp2 ,&_D2);
tmpMeta[1] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _ty);
_res1 = omc_ExpressionSimplify_simplifySumOperatorExpression(threadData, _N1, tmpMeta[1], _D2);
tmpMeta[1] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _ty);
_res2 = omc_ExpressionSimplify_simplifySumOperatorExpression(threadData, _N2, tmpMeta[1], _D1);
_explst = omc_Expression_terms(threadData, _iExp1);
_explst1 = omc_Expression_terms(threadData, _iExp2);
if((omc_Expression_isConst(threadData, _res1) || (((modelica_integer) 1) + listLength(_explst1) > listLength(_explst))))
{
_res = omc_Expression_expSub(threadData, _res2, _res1);
}
else
{
_res = omc_Expression_expSub(threadData, _res1, _res2);
}
tmpMeta[0] = omc_ExpressionSimplify_simplify(threadData, _res, NULL);
goto tmp2_done;
}
case 5: {
modelica_boolean tmp10;
_ty = omc_Expression_typeof(threadData, _iExp1);
tmp10 = omc_Types_isEnumeration(threadData, _ty);
if (1 != tmp10) goto goto_1;
tmpMeta[0] = omc_Expression_expSub(threadData, _iExp1, _iExp2);
goto tmp2_done;
}
case 6: {
modelica_boolean tmp11;
_ty = omc_Expression_typeof(threadData, _iExp1);
tmp11 = omc_Types_isBooleanOrSubTypeBoolean(threadData, _ty);
if (1 != tmp11) goto goto_1;
tmpMeta[1] = mmc_mk_box2(27, &DAE_Operator_NOT__desc, _ty);
tmpMeta[2] = mmc_mk_box2(32, &DAE_Operator_EQUAL__desc, _ty);
tmpMeta[3] = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _iExp1, tmpMeta[2], _iExp2, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
tmpMeta[4] = mmc_mk_box3(13, &DAE_Exp_LUNARY__desc, tmpMeta[1], tmpMeta[3]);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 7: {
modelica_boolean tmp12;
_ty = omc_Expression_typeof(threadData, _iExp1);
tmp12 = omc_Types_isStringOrSubTypeString(threadData, _ty);
if (1 != tmp12) goto goto_1;
tmpMeta[1] = mmc_mk_box2(27, &DAE_Operator_NOT__desc, _ty);
tmpMeta[2] = mmc_mk_box2(32, &DAE_Operator_EQUAL__desc, _ty);
tmpMeta[3] = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _iExp1, tmpMeta[2], _iExp2, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
tmpMeta[4] = mmc_mk_box3(13, &DAE_Exp_LUNARY__desc, tmpMeta[1], tmpMeta[3]);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 8: {
_res = omc_Expression_expSub(threadData, _iExp1, _iExp2);
tmpMeta[0] = omc_ExpressionSimplify_simplify(threadData, _res, NULL);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 9) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_resExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _resExp;
}
DLLExport
modelica_metatype omc_Expression_dimensionSizeSubscripts(threadData_t *threadData, modelica_integer _inDimSize)
{
modelica_metatype _outSubscripts = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype __omcQ_24tmpVar5;
modelica_metatype* tmp1;
modelica_metatype __omcQ_24tmpVar4;
int tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_integer _i;
tmp3 = 1;
tmp4 = _inDimSize;
_i = ((modelica_integer) 1);
_i = (((modelica_integer) 1) /* Range start-value */)-tmp3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar5 = tmpMeta[1];
tmp1 = &__omcQ_24tmpVar5;
while(1) {
tmp2 = 1;
if (tmp3 > 0 ? _i+tmp3 <= tmp4 : _i+tmp3 >= tmp4) {
_i += tmp3;
tmp2--;
}
if (tmp2 == 0) {
tmpMeta[2] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
tmpMeta[3] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, tmpMeta[2]);
__omcQ_24tmpVar4 = tmpMeta[3];
*tmp1 = mmc_mk_cons(__omcQ_24tmpVar4,0);
tmp1 = &MMC_CDR(*tmp1);
} else if (tmp2 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp1 = mmc_mk_nil();
tmpMeta[0] = __omcQ_24tmpVar5;
}
_outSubscripts = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubscripts;
}
modelica_metatype boxptr_Expression_dimensionSizeSubscripts(threadData_t *threadData, modelica_metatype _inDimSize)
{
modelica_integer tmp1;
modelica_metatype _outSubscripts = NULL;
tmp1 = mmc_unbox_integer(_inDimSize);
_outSubscripts = omc_Expression_dimensionSizeSubscripts(threadData, tmp1);
return _outSubscripts;
}
DLLExport
modelica_metatype omc_Expression_dimensionSizesSubcriptsOpt(threadData_t *threadData, modelica_metatype _inDimSizes)
{
modelica_metatype _outSubscripts = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outSubscripts = omc_List_mapOption(threadData, _inDimSizes, boxvar_Expression_dimensionSizeSubscripts);
_return: OMC_LABEL_UNUSED
return _outSubscripts;
}
DLLExport
modelica_metatype omc_Expression_dimensionSizesSubscripts(threadData_t *threadData, modelica_metatype _inDimSizes)
{
modelica_metatype _outSubscripts = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outSubscripts = omc_List_map(threadData, _inDimSizes, boxvar_Expression_dimensionSizeSubscripts);
_return: OMC_LABEL_UNUSED
return _outSubscripts;
}
DLLExport
modelica_metatype omc_Expression_expandSliceExp(threadData_t *threadData, modelica_metatype _inSliceExp)
{
modelica_metatype _outSubscripts = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inSliceExp;
{
modelica_metatype _expl = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expl = tmpMeta[1];
tmpMeta[0] = omc_List_map(threadData, _expl, boxvar_Expression_makeIndexSubscript);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,4) == 0) goto tmp2_end;
tmpMeta[0] = omc_List_map(threadData, omc_Expression_expandRange(threadData, _inSliceExp), boxvar_Expression_makeIndexSubscript);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSubscripts = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubscripts;
}
DLLExport
modelica_metatype omc_Expression_expandDimension(threadData_t *threadData, modelica_metatype _inDimension)
{
modelica_metatype _outSubscript = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inDimension;
{
modelica_integer _dim_int;
modelica_metatype _enum_ty = NULL;
modelica_metatype _enum_lits = NULL;
modelica_metatype _enum_expl = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
modelica_integer tmp4;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp4 = mmc_unbox_integer(tmpMeta[1]);
_dim_int = tmp4;
tmpMeta[0] = omc_Expression_dimensionSizeSubscripts(threadData, _dim_int);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_enum_ty = tmpMeta[1];
_enum_lits = tmpMeta[2];
_enum_expl = omc_Expression_makeEnumLiterals(threadData, _enum_ty, _enum_lits);
tmpMeta[0] = omc_List_map(threadData, _enum_expl, boxvar_Expression_makeIndexSubscript);
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _OMC_LIT23;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSubscript = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubscript;
}
DLLExport
modelica_metatype omc_Expression_expandSubscript(threadData_t *threadData, modelica_metatype _inSubscript, modelica_metatype _inDimension)
{
modelica_metatype _outSubscripts = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inSubscript;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],18,4) == 0) goto tmp2_end;
{
modelica_metatype __omcQ_24tmpVar7;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar6;
int tmp6;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = omc_Expression_expandRange(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inSubscript), 2))));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar7 = tmpMeta[2];
tmp5 = &__omcQ_24tmpVar7;
while(1) {
tmp6 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp6--;
}
if (tmp6 == 0) {
tmpMeta[3] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, _e);
__omcQ_24tmpVar6 = tmpMeta[3];
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar6,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar7;
}
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],16,3) == 0) goto tmp2_end;
tmpMeta[0] = omc_Expression_expandSliceExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inSubscript), 2))));
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = mmc_mk_cons(_inSubscript, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,0) == 0) goto tmp2_end;
tmpMeta[0] = omc_Expression_expandDimension(threadData, _inDimension);
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[0] = omc_Expression_expandSliceExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inSubscript), 2))));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSubscripts = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubscripts;
}
DLLExport
modelica_metatype omc_Expression_rangesToSubscripts(threadData_t *threadData, modelica_metatype _inRangelist)
{
modelica_metatype _outSubslst = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outSubslst = omc_List_allCombinations(threadData, _inRangelist, mmc_mk_none(), _OMC_LIT26);
_return: OMC_LABEL_UNUSED
return _outSubslst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makeMatrix(threadData_t *threadData, modelica_metatype _expl, modelica_integer _n)
{
modelica_metatype _res = NULL;
modelica_metatype _col = NULL;
modelica_integer _r;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[0];
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_col = tmpMeta[0];
_r = _n;
{
modelica_metatype _e;
for (tmpMeta[0] = _expl; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_e = MMC_CAR(tmpMeta[0]);
_r = ((modelica_integer) -1) + _r;
tmpMeta[1] = mmc_mk_cons(_e, _col);
_col = tmpMeta[1];
if((_r == ((modelica_integer) 0)))
{
tmpMeta[1] = mmc_mk_cons(listReverseInPlace(_col), _res);
_res = tmpMeta[1];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_col = tmpMeta[1];
_r = _n;
}
}
}
omc_Error_assertionOrAddSourceMessage(threadData, listEmpty(_col), _OMC_LIT31, _OMC_LIT33, _OMC_LIT34);
_res = listReverseInPlace(_res);
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_makeMatrix(threadData_t *threadData, modelica_metatype _expl, modelica_metatype _n)
{
modelica_integer tmp1;
modelica_metatype _res = NULL;
tmp1 = mmc_unbox_integer(_n);
_res = omc_Expression_makeMatrix(threadData, _expl, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_insertSubScripts(threadData_t *threadData, modelica_metatype _templSubScript, modelica_metatype _value, modelica_metatype _lstIn)
{
modelica_metatype _outSubScript = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _templSubScript;
{
modelica_metatype _sub = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _lsts = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp2_end;
_rest = tmpMeta[2];
tmp3 += 1;
_lsts = omc_List_map1(threadData, _value, boxvar_listAppend, _lstIn);
tmpMeta[0] = omc_List_map1(threadData, _lsts, boxvar_List_append__reverser, _rest);
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto tmp2_end;
_rest = tmpMeta[2];
_sub = listHead(_templSubScript);
tmpMeta[1] = mmc_mk_cons(_sub, _lstIn);
tmpMeta[0] = omc_Expression_insertSubScripts(threadData, _rest, _value, tmpMeta[1]);
goto tmp2_done;
}
case 2: {
tmpMeta[0] = _value;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outSubScript = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubScript;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingextendArrExp(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inExpanded, modelica_boolean *out_outExpanded)
{
modelica_metatype _outExp = NULL;
modelica_boolean _outExpanded;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _cr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _id = NULL;
modelica_metatype _jd = NULL;
modelica_integer _i;
modelica_integer _j;
modelica_metatype _expl = NULL;
modelica_metatype _e = NULL;
modelica_metatype _varLst = NULL;
modelica_metatype _name = NULL;
modelica_metatype _mat = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
_ty = tmpMeta[2];
_id = tmpMeta[4];
_jd = tmpMeta[6];
_i = omc_Expression_dimensionSize(threadData, _id);
_j = omc_Expression_dimensionSize(threadData, _jd);
_expl = omc_Expression_expandExpression(threadData, _inExp, 0);
_mat = omc_Expression_makeMatrix(threadData, _expl, _j);
tmpMeta[2] = mmc_mk_box4(20, &DAE_Exp_MATRIX__desc, _ty, mmc_mk_integer(_i), _mat);
_e = tmpMeta[2];
tmpMeta[0+0] = _e;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,2) == 0) goto tmp3_end;
_ty = tmpMeta[2];
_expl = omc_Expression_expandExpression(threadData, _inExp, 0);
tmpMeta[2] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _ty, mmc_mk_boolean(1), _expl);
_e = tmpMeta[2];
tmpMeta[0+0] = _e;
tmp1_c1 = 1;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],9,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_cr = tmpMeta[2];
_ty = tmpMeta[3];
_name = tmpMeta[5];
_varLst = tmpMeta[6];
_expl = omc_List_map1(threadData, _varLst, boxvar_Expression_generateCrefsExpFromExpVar, _cr);
_i = listLength(_expl);
tmp6 = (_i > ((modelica_integer) 0));
if (1 != tmp6) goto goto_2;
tmpMeta[2] = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _ty, mmc_mk_boolean(0), mmc_mk_boolean(0), mmc_mk_boolean(0), mmc_mk_boolean(0), _OMC_LIT35, _OMC_LIT36);
tmpMeta[3] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _name, _expl, tmpMeta[2]);
_e = tmpMeta[3];
_e = omc_Expression_traverseExpBottomUp(threadData, _e, boxvar_Expression_traversingextendArrExp, mmc_mk_boolean(1), NULL);
tmpMeta[0+0] = _e;
tmp1_c1 = 1;
goto tmp3_done;
}
case 3: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = _inExpanded;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outExpanded = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outExpanded) { *out_outExpanded = _outExpanded; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traversingextendArrExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inExpanded, modelica_metatype *out_outExpanded)
{
modelica_integer tmp1;
modelica_boolean _outExpanded;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inExpanded);
_outExp = omc_Expression_traversingextendArrExp(threadData, _inExp, tmp1, &_outExpanded);
if (out_outExpanded) { *out_outExpanded = mmc_mk_icon(_outExpanded); }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_extendArrExp(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inExpanded, modelica_boolean *out_outExpanded)
{
modelica_metatype _outExp = NULL;
modelica_boolean _outExpanded;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _exp = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
_outExp = tmp4_1;
tmpMeta[3] = omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_Expression_traversingextendArrExp, mmc_mk_boolean(0), &tmpMeta[2]);
_exp = tmpMeta[3];
tmp6 = mmc_unbox_integer(tmpMeta[2]);
_b = tmp6;
tmpMeta[0+0] = _exp;
tmp1_c1 = _b;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = _inExpanded;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_outExpanded = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outExpanded) { *out_outExpanded = _outExpanded; }
return _outExp;
}
modelica_metatype boxptr_Expression_extendArrExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inExpanded, modelica_metatype *out_outExpanded)
{
modelica_integer tmp1;
modelica_boolean _outExpanded;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inExpanded);
_outExp = omc_Expression_extendArrExp(threadData, _inExp, tmp1, &_outExpanded);
if (out_outExpanded) { *out_outExpanded = mmc_mk_icon(_outExpanded); }
return _outExp;
}
static modelica_metatype closure0_Expression_expandExpression(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp)
{
modelica_metatype expandRecord = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_Expression_expandExpression(thData, inExp, expandRecord);
}
DLLExport
modelica_metatype omc_Expression_expandExpression(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _expandRecord)
{
modelica_metatype _outExps = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cr = NULL;
modelica_metatype _crlst = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _expl1 = NULL;
modelica_metatype _expl2 = NULL;
modelica_string _msg = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _op = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_expl = tmpMeta[1];
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[2];
_crlst = omc_ComponentReference_expandCref(threadData, _cr, _expandRecord);
tmpMeta[0] = omc_List_map(threadData, _crlst, boxvar_Expression_crefToExp);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],5,1) == 0) goto tmp2_end;
{
modelica_metatype __omcQ_24tmpVar9;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar8;
int tmp6;
modelica_metatype _exp_loopVar = 0;
modelica_metatype _exp;
_exp_loopVar = omc_Expression_expandExpression(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3))), _expandRecord);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar9 = tmpMeta[3];
tmp5 = &__omcQ_24tmpVar9;
while(1) {
tmp6 = 1;
if (!listEmpty(_exp_loopVar)) {
_exp = MMC_CAR(_exp_loopVar);
_exp_loopVar = MMC_CDR(_exp_loopVar);
tmp6--;
}
if (tmp6 == 0) {
tmpMeta[4] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))), _exp);
__omcQ_24tmpVar8 = tmpMeta[4];
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar8,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[2] = __omcQ_24tmpVar9;
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
modelica_integer tmp7;
modelica_integer tmp8;
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
_op = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3)));
_expl1 = omc_Expression_expandExpression(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))), _expandRecord);
_expl2 = omc_Expression_expandExpression(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 4))), _expandRecord);
if((listLength(_expl1) != listLength(_expl2)))
{
goto goto_1;
}
_e1 = listGet(_expl1, ((modelica_integer) 1));
_e2 = listGet(_expl1, ((modelica_integer) 2));
tmp7 = ((modelica_integer) 1); tmp8 = 1; tmp9 = listLength(_expl1);
if(!(((tmp8 > 0) && (tmp7 > tmp9)) || ((tmp8 < 0) && (tmp7 < tmp9))))
{
modelica_integer _i;
for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp7, tmp9); _i += tmp8)
{
_e1 = listGet(_expl1, _i);
_e2 = listGet(_expl2, _i);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _expl);
_expl = tmpMeta[2];
}
}
tmpMeta[0] = listReverse(_expl);
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expl = tmpMeta[2];
tmpMeta[2] = mmc_mk_box1(0, mmc_mk_boolean(_expandRecord));
tmpMeta[0] = omc_List_mapFlat(threadData, _expl, (modelica_fnptr) mmc_mk_box2(0,closure0_Expression_expandExpression,tmpMeta[2]));
goto tmp2_done;
}
case 4: {
tmpMeta[2] = stringAppend(_OMC_LIT37,omc_ExpressionDump_printExpStr(threadData, _inExp));
_msg = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_msg, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addMessage(threadData, _OMC_LIT31, tmpMeta[2]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExps = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExps;
}
modelica_metatype boxptr_Expression_expandExpression(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _expandRecord)
{
modelica_integer tmp1;
modelica_metatype _outExps = NULL;
tmp1 = mmc_unbox_integer(_expandRecord);
_outExps = omc_Expression_expandExpression(threadData, _inExp, tmp1);
return _outExps;
}
DLLExport
modelica_metatype omc_Expression_expandCrefs(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _expandRecord, modelica_integer __omcQ_24in_5Fdummy, modelica_integer *out_dummy)
{
modelica_metatype _outExp = NULL;
modelica_integer _dummy;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_dummy = __omcQ_24in_5Fdummy;
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _arr_ty = NULL;
modelica_metatype _exp_lst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp2_end;
_arr_ty = tmpMeta[1];
{
modelica_metatype __omcQ_24tmpVar11;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar10;
int tmp6;
modelica_metatype _cr_loopVar = 0;
modelica_metatype _cr;
_cr_loopVar = omc_ComponentReference_expandCref(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))), _expandRecord);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar11 = tmpMeta[2];
tmp5 = &__omcQ_24tmpVar11;
while(1) {
tmp6 = 1;
if (!listEmpty(_cr_loopVar)) {
_cr = MMC_CAR(_cr_loopVar);
_cr_loopVar = MMC_CDR(_cr_loopVar);
tmp6--;
}
if (tmp6 == 0) {
__omcQ_24tmpVar10 = omc_Expression_makeCrefExp(threadData, _cr, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arr_ty), 2))));
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar10,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar11;
}
_exp_lst = tmpMeta[1];
tmpMeta[0] = omc_Expression_listToArray(threadData, _exp_lst, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arr_ty), 3))));
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inExp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_dummy) { *out_dummy = _dummy; }
return _outExp;
}
modelica_metatype boxptr_Expression_expandCrefs(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _expandRecord, modelica_metatype __omcQ_24in_5Fdummy, modelica_metatype *out_dummy)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer _dummy;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_expandRecord);
tmp2 = mmc_unbox_integer(__omcQ_24in_5Fdummy);
_outExp = omc_Expression_expandCrefs(threadData, _inExp, tmp1, tmp2, &_dummy);
if (out_dummy) { *out_dummy = mmc_mk_icon(_dummy); }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeVectorCall(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _tp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
_outExp = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT38, tmpMeta[0], _tp);
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_emptyToWild(threadData_t *threadData, modelica_metatype _exp)
{
modelica_metatype _outExp = NULL;
modelica_metatype _ty = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ty = omc_Expression_typeof(threadData, _exp);
tmp1 = (modelica_boolean)omc_Types_isZeroLengthArray(threadData, _ty);
if(tmp1)
{
tmpMeta[0] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _OMC_LIT39, _ty);
tmpMeta[1] = tmpMeta[0];
}
else
{
tmpMeta[1] = _exp;
}
_outExp = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_renameExpCrefIdent(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_metatype _ty1 = NULL;
modelica_metatype _ty2 = NULL;
modelica_string _name = NULL;
modelica_string _from = NULL;
modelica_string _to = NULL;
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (!listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_name = tmpMeta[3];
_ty1 = tmpMeta[4];
_ty2 = tmpMeta[6];
_from = tmpMeta[7];
_to = tmpMeta[8];
tmp6 = (modelica_boolean)(stringEqual(_name, _from));
if(tmp6)
{
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box4(4, &DAE_ComponentRef_CREF__IDENT__desc, _to, _ty1, tmpMeta[2]);
tmpMeta[4] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, tmpMeta[3], _ty2);
tmpMeta[5] = tmpMeta[4];
}
else
{
tmpMeta[5] = _inExp;
}
_exp = tmpMeta[5];
tmpMeta[0+0] = _exp;
tmpMeta[0+1] = _inTpl;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outTpl = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_isCrefListWithEqualIdents(threadData_t *threadData, modelica_metatype _iExpressions)
{
modelica_boolean _oCrefWithEqualIdents;
modelica_boolean _tmpCrefWithEqualIdents;
modelica_metatype _boolHelperList = NULL;
modelica_metatype _crefs = NULL;
modelica_metatype _head = NULL;
modelica_metatype _headCref = NULL;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _iExpressions;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_head = tmpMeta[0];
tmp4 += 1;
tmp6 = omc_List_mapBoolAnd(threadData, _iExpressions, boxvar_Expression_isCref);
if (1 != tmp6) goto goto_2;
_crefs = omc_List_map(threadData, _iExpressions, boxvar_Expression_expCref);
_headCref = omc_Expression_expCref(threadData, _head);
tmp1 = omc_List_map1BoolAnd(threadData, _crefs, boxvar_ComponentReference_crefEqualWithoutLastSubs, _headCref);
goto tmp3_done;
}
case 1: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_oCrefWithEqualIdents = tmp1;
_return: OMC_LABEL_UNUSED
return _oCrefWithEqualIdents;
}
modelica_metatype boxptr_Expression_isCrefListWithEqualIdents(threadData_t *threadData, modelica_metatype _iExpressions)
{
modelica_boolean _oCrefWithEqualIdents;
modelica_metatype out_oCrefWithEqualIdents;
_oCrefWithEqualIdents = omc_Expression_isCrefListWithEqualIdents(threadData, _iExpressions);
out_oCrefWithEqualIdents = mmc_mk_icon(_oCrefWithEqualIdents);
return out_oCrefWithEqualIdents;
}
DLLExport
modelica_metatype omc_Expression_expDimensionsList(threadData_t *threadData, modelica_metatype _inDims)
{
modelica_metatype _outValues = NULL;
modelica_metatype _dims = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmp5 = omc_List_mapBoolAnd(threadData, _inDims, boxvar_Expression_checkExpDimensionSizes);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = omc_List_map(threadData, _inDims, boxvar_Expression_expInt);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outValues = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outValues;
}
DLLExport
modelica_metatype omc_Expression_dimensionsList(threadData_t *threadData, modelica_metatype _inDims)
{
modelica_metatype _outValues = NULL;
modelica_metatype _dims = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmp5 = omc_List_mapBoolAnd(threadData, _inDims, boxvar_Expression_checkDimensionSizes);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = omc_List_map(threadData, _inDims, boxvar_Expression_dimensionSizeAll);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outValues = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outValues;
}
DLLExport
modelica_boolean omc_Expression_checkDimensionSizes(threadData_t *threadData, modelica_metatype _dim)
{
modelica_boolean _value;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _dim;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
case 7: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_value = tmp1;
_return: OMC_LABEL_UNUSED
return _value;
}
modelica_metatype boxptr_Expression_checkDimensionSizes(threadData_t *threadData, modelica_metatype _dim)
{
modelica_boolean _value;
modelica_metatype out_value;
_value = omc_Expression_checkDimensionSizes(threadData, _dim);
out_value = mmc_mk_icon(_value);
return out_value;
}
DLLExport
modelica_boolean omc_Expression_checkExpDimensionSizes(threadData_t *threadData, modelica_metatype _dim)
{
modelica_boolean _value;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _dim;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_dim), 2)))) > ((modelica_integer) 0));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_value = tmp1;
_return: OMC_LABEL_UNUSED
return _value;
}
modelica_metatype boxptr_Expression_checkExpDimensionSizes(threadData_t *threadData, modelica_metatype _dim)
{
modelica_boolean _value;
modelica_metatype out_value;
_value = omc_Expression_checkExpDimensionSizes(threadData, _dim);
out_value = mmc_mk_icon(_value);
return out_value;
}
DLLExport
modelica_metatype omc_Expression_makeBinaryExp(threadData_t *threadData, modelica_metatype _inLhs, modelica_metatype _inOp, modelica_metatype _inRhs)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _inLhs, _inOp, _inRhs);
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_replaceDerOpInExpTraverser(threadData_t *threadData, modelica_metatype _e, modelica_metatype _optCr, modelica_metatype *out_outCr)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outCr = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _e;
tmp4_2 = _optCr;
{
modelica_metatype _cr = NULL;
modelica_metatype _derCr = NULL;
modelica_metatype _cref_exp = NULL;
modelica_metatype _cref = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (optionNone(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],6,2) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
_cref = tmpMeta[2];
_cr = tmpMeta[8];
tmp4 += 1;
_derCr = omc_ComponentReference_crefPrefixDer(threadData, _cr);
tmp6 = omc_ComponentReference_crefEqualNoStringCompare(threadData, _derCr, _cref);
if (1 != tmp6) goto goto_2;
_cref_exp = omc_Expression_crefExp(threadData, _derCr);
tmpMeta[0+0] = _cref_exp;
tmpMeta[0+1] = _optCr;
goto tmp3_done;
}
case 1: {
if (!optionNone(tmp4_2)) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (3 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],6,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (!listEmpty(tmpMeta[6])) goto tmp3_end;
_cr = tmpMeta[7];
_cr = omc_ComponentReference_crefPrefixDer(threadData, _cr);
_cref_exp = omc_Expression_crefExp(threadData, _cr);
tmpMeta[0+0] = _cref_exp;
tmpMeta[0+1] = mmc_mk_none();
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _e;
tmpMeta[0+1] = _optCr;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_outCr = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outCr) { *out_outCr = _outCr; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_replaceDerOpInExpCond(threadData_t *threadData, modelica_metatype _e, modelica_metatype _cr, modelica_metatype *out_outCr)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outCr = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = omc_Expression_traverseExpBottomUp(threadData, _e, boxvar_Expression_replaceDerOpInExpTraverser, _cr ,&_outCr);
_return: OMC_LABEL_UNUSED
if (out_outCr) { *out_outCr = _outCr; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_replaceDerOpInExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_Expression_replaceDerOpInExpTraverser, mmc_mk_none(), NULL);
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_fromAbsynOperator(threadData_t *threadData, modelica_metatype _aop, modelica_metatype _ty)
{
modelica_metatype _op = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _aop;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
tmpMeta[1] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
tmpMeta[1] = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
tmpMeta[1] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
tmpMeta[1] = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
tmpMeta[1] = mmc_mk_box2(7, &DAE_Operator_POW__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 9: {
tmpMeta[1] = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 17: {
tmpMeta[1] = mmc_mk_box2(25, &DAE_Operator_AND__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 18: {
tmpMeta[1] = mmc_mk_box2(26, &DAE_Operator_OR__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 19: {
tmpMeta[1] = mmc_mk_box2(27, &DAE_Operator_NOT__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 20: {
tmpMeta[1] = mmc_mk_box2(28, &DAE_Operator_LESS__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 21: {
tmpMeta[1] = mmc_mk_box2(29, &DAE_Operator_LESSEQ__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 22: {
tmpMeta[1] = mmc_mk_box2(30, &DAE_Operator_GREATER__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 23: {
tmpMeta[1] = mmc_mk_box2(31, &DAE_Operator_GREATEREQ__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 24: {
tmpMeta[1] = mmc_mk_box2(32, &DAE_Operator_EQUAL__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 25: {
tmpMeta[1] = mmc_mk_box2(33, &DAE_Operator_NEQUAL__desc, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[1] = stringAppend(_OMC_LIT41,omc_Dump_opSymbol(threadData, _aop));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT42);
fputs(MMC_STRINGDATA(tmpMeta[2]),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_op = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _op;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_fromAbsynExpOpt(threadData_t *threadData, modelica_metatype _aoe)
{
modelica_metatype _oe = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _aoe;
{
modelica_metatype _ae = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
_ae = tmpMeta[1];
_e = omc_Expression_fromAbsynExp(threadData, _ae);
tmpMeta[0] = mmc_mk_some(_e);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_oe = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _oe;
}
DLLExport
modelica_metatype omc_Expression_fargsToExps(threadData_t *threadData, modelica_metatype _inFargs)
{
modelica_metatype _outExps = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inFargs;
{
modelica_metatype _aexps = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_aexps = tmpMeta[1];
tmpMeta[0] = omc_List_map(threadData, _aexps, boxvar_Expression_fromAbsynExp);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
fputs(MMC_STRINGDATA(_OMC_LIT43),stdout);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExps = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExps;
}
DLLExport
modelica_metatype omc_Expression_fromAbsynExp(threadData_t *threadData, modelica_metatype _inAExp)
{
modelica_metatype _outDExp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAExp;
{
modelica_integer _i;
modelica_real _r;
modelica_boolean _b;
modelica_string _s = NULL;
modelica_metatype _ae = NULL;
modelica_metatype _ae1 = NULL;
modelica_metatype _ae2 = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _aop = NULL;
modelica_metatype _acr = NULL;
modelica_metatype _aexps = NULL;
modelica_metatype _aexpslst = NULL;
modelica_metatype _fargs = NULL;
modelica_metatype _p = NULL;
modelica_metatype _aoe = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _op = NULL;
modelica_metatype _exps = NULL;
modelica_metatype _expslst = NULL;
modelica_metatype _oe = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 18; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp5;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_s = tmpMeta[1];
_r = stringReal(_s);
tmpMeta[1] = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(_r));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
_b = tmp6;
tmpMeta[1] = mmc_mk_box2(6, &DAE_Exp_BCONST__desc, mmc_mk_boolean(_b));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_s = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(5, &DAE_Exp_SCONST__desc, _s);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_acr = tmpMeta[1];
_cr = omc_ComponentReference_toExpCref(threadData, _acr);
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _cr, _OMC_LIT44);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ae1 = tmpMeta[1];
_aop = tmpMeta[2];
_ae2 = tmpMeta[3];
_op = omc_Expression_fromAbsynOperator(threadData, _aop, _OMC_LIT44);
_e1 = omc_Expression_fromAbsynExp(threadData, _ae1);
_e2 = omc_Expression_fromAbsynExp(threadData, _ae2);
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_aop = tmpMeta[1];
_ae = tmpMeta[2];
_op = omc_Expression_fromAbsynOperator(threadData, _aop, _OMC_LIT44);
_e = omc_Expression_fromAbsynExp(threadData, _ae);
tmpMeta[1] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _op, _e);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ae1 = tmpMeta[1];
_aop = tmpMeta[2];
_ae2 = tmpMeta[3];
_op = omc_Expression_fromAbsynOperator(threadData, _aop, _OMC_LIT44);
_e1 = omc_Expression_fromAbsynExp(threadData, _ae1);
_e2 = omc_Expression_fromAbsynExp(threadData, _ae2);
tmpMeta[1] = mmc_mk_box4(12, &DAE_Exp_LBINARY__desc, _e1, _op, _e2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_aop = tmpMeta[1];
_ae = tmpMeta[2];
_op = omc_Expression_fromAbsynOperator(threadData, _aop, _OMC_LIT44);
_e = omc_Expression_fromAbsynExp(threadData, _ae);
tmpMeta[1] = mmc_mk_box3(13, &DAE_Exp_LUNARY__desc, _op, _e);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ae1 = tmpMeta[1];
_aop = tmpMeta[2];
_ae2 = tmpMeta[3];
_op = omc_Expression_fromAbsynOperator(threadData, _aop, _OMC_LIT44);
_e1 = omc_Expression_fromAbsynExp(threadData, _ae1);
_e2 = omc_Expression_fromAbsynExp(threadData, _ae2);
tmpMeta[1] = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e1, _op, _e2, mmc_mk_integer(((modelica_integer) 0)), mmc_mk_none());
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,4) == 0) goto tmp2_end;
_ae = tmp3_1;
tmpMeta[1] = omc_AbsynUtil_canonIfExp(threadData, _ae);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],10,4) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_cond = tmpMeta[2];
_ae1 = tmpMeta[3];
_ae2 = tmpMeta[4];
_e = omc_Expression_fromAbsynExp(threadData, _cond);
_e1 = omc_Expression_fromAbsynExp(threadData, _ae1);
_e2 = omc_Expression_fromAbsynExp(threadData, _ae2);
tmpMeta[1] = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _e, _e1, _e2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_acr = tmpMeta[1];
_fargs = tmpMeta[2];
_exps = omc_Expression_fargsToExps(threadData, _fargs);
_p = omc_AbsynUtil_crefToPath(threadData, _acr);
tmpMeta[1] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _p, _exps, _OMC_LIT45);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,12,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_acr = tmpMeta[1];
_fargs = tmpMeta[2];
_exps = omc_Expression_fargsToExps(threadData, _fargs);
_p = omc_AbsynUtil_crefToPath(threadData, _acr);
tmpMeta[1] = mmc_mk_box5(18, &DAE_Exp_PARTEVALFUNCTION__desc, _p, _exps, _OMC_LIT44, _OMC_LIT44);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_aexps = tmpMeta[1];
_exps = omc_List_map(threadData, _aexps, boxvar_Expression_fromAbsynExp);
tmpMeta[1] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _OMC_LIT44, mmc_mk_boolean(0), _exps);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,14,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_aexpslst = tmpMeta[1];
_expslst = omc_List_mapList(threadData, _aexpslst, boxvar_Expression_fromAbsynExp);
_i = listLength(listHead(_expslst));
tmpMeta[1] = mmc_mk_box4(20, &DAE_Exp_MATRIX__desc, _OMC_LIT44, mmc_mk_integer(_i), _expslst);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,15,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ae1 = tmpMeta[1];
_aoe = tmpMeta[2];
_ae2 = tmpMeta[3];
_e1 = omc_Expression_fromAbsynExp(threadData, _ae1);
_e2 = omc_Expression_fromAbsynExp(threadData, _ae2);
_oe = omc_Expression_fromAbsynExpOpt(threadData, _aoe);
tmpMeta[1] = mmc_mk_box5(21, &DAE_Exp_RANGE__desc, _OMC_LIT44, _e1, _oe, _e2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_aexps = tmpMeta[1];
_exps = omc_List_map(threadData, _aexps, boxvar_Expression_fromAbsynExp);
tmpMeta[1] = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, _exps);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 17: {
tmpMeta[1] = stringAppend(_OMC_LIT46,omc_Dump_printExpStr(threadData, _inAExp));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT42);
fputs(MMC_STRINGDATA(tmpMeta[2]),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outDExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outDExp;
}
DLLExport
modelica_metatype omc_Expression_arrayContent(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outContent = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inExp;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],16,3) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_outContent = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _outContent;
}
DLLExport
modelica_metatype omc_Expression_arrayElements(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _expl = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _crl = NULL;
modelica_metatype _mat = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_crl = omc_ComponentReference_expandCref(threadData, _cr, 0);
tmpMeta[0] = omc_List_map(threadData, _crl, boxvar_Expression_crefExp);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expl = tmpMeta[2];
tmpMeta[0] = omc_List_mapFlat(threadData, _expl, boxvar_Expression_arrayElements);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expl = tmpMeta[1];
tmpMeta[0] = _expl;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_mat = tmpMeta[1];
tmpMeta[0] = omc_List_flatten(threadData, _mat);
goto tmp2_done;
}
case 4: {
tmpMeta[1] = mmc_mk_cons(_inExp, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_getCrefFromCrefOrAsub(threadData_t *threadData, modelica_metatype _exp)
{
modelica_metatype _cr = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _exp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
tmpMeta[0] = _cr;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,21,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_cr = tmpMeta[2];
tmpMeta[0] = _cr;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_cr = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _cr;
}
DLLExport
modelica_metatype omc_Expression_transposeArray(threadData_t *threadData, modelica_metatype _inArray, modelica_boolean *out_outWasTransposed)
{
modelica_metatype _outArray = NULL;
modelica_boolean _outWasTransposed;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inArray;
{
modelica_metatype _ty = NULL;
modelica_metatype _row_ty = NULL;
modelica_metatype _dim1 = NULL;
modelica_metatype _dim2 = NULL;
modelica_metatype _rest_dims = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _matrix = NULL;
modelica_integer _i;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!listEmpty(tmpMeta[9])) goto tmp3_end;
_ty = tmpMeta[3];
_dim1 = tmpMeta[5];
_dim2 = tmpMeta[7];
_rest_dims = tmpMeta[8];
tmpMeta[3] = mmc_mk_cons(_dim1, _rest_dims);
tmpMeta[2] = mmc_mk_cons(_dim2, tmpMeta[3]);
tmpMeta[4] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, tmpMeta[2]);
tmpMeta[5] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[6] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, tmpMeta[4], mmc_mk_boolean(0), tmpMeta[5]);
tmpMeta[0+0] = tmpMeta[6];
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_ty = tmpMeta[3];
_dim1 = tmpMeta[5];
_dim2 = tmpMeta[7];
_rest_dims = tmpMeta[8];
_expl = tmpMeta[9];
tmpMeta[2] = mmc_mk_cons(_dim1, _rest_dims);
tmpMeta[3] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, tmpMeta[2]);
_row_ty = tmpMeta[3];
_matrix = omc_List_map(threadData, _expl, boxvar_Expression_getArrayOrMatrixContents);
_matrix = omc_List_transposeList(threadData, _matrix);
_expl = omc_List_map2(threadData, _matrix, boxvar_Expression_makeArray, _row_ty, mmc_mk_boolean(1));
tmpMeta[3] = mmc_mk_cons(_dim1, _rest_dims);
tmpMeta[2] = mmc_mk_cons(_dim2, tmpMeta[3]);
tmpMeta[4] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, tmpMeta[2]);
tmpMeta[5] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, tmpMeta[4], mmc_mk_boolean(0), _expl);
tmpMeta[0+0] = tmpMeta[5];
tmp1_c1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
if (!listEmpty(tmpMeta[8])) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_ty = tmpMeta[3];
_dim1 = tmpMeta[5];
_dim2 = tmpMeta[7];
_matrix = tmpMeta[9];
_matrix = omc_List_transposeList(threadData, _matrix);
tmpMeta[2] = mmc_mk_cons(_dim2, mmc_mk_cons(_dim1, MMC_REFSTRUCTLIT(mmc_nil)));
tmpMeta[3] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, tmpMeta[2]);
_ty = tmpMeta[3];
_i = listLength(_matrix);
tmpMeta[2] = mmc_mk_box4(20, &DAE_Exp_MATRIX__desc, _ty, mmc_mk_integer(_i), _matrix);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 1;
goto tmp3_done;
}
case 3: {
tmpMeta[0+0] = _inArray;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outArray = tmpMeta[0+0];
_outWasTransposed = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outWasTransposed) { *out_outWasTransposed = _outWasTransposed; }
return _outArray;
}
modelica_metatype boxptr_Expression_transposeArray(threadData_t *threadData, modelica_metatype _inArray, modelica_metatype *out_outWasTransposed)
{
modelica_boolean _outWasTransposed;
modelica_metatype _outArray = NULL;
_outArray = omc_Expression_transposeArray(threadData, _inArray, &_outWasTransposed);
if (out_outWasTransposed) { *out_outWasTransposed = mmc_mk_icon(_outWasTransposed); }
return _outArray;
}
DLLExport
modelica_metatype omc_Expression_matrixToArray(threadData_t *threadData, modelica_metatype _inMatrix)
{
modelica_metatype _outArray = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inMatrix;
{
modelica_metatype _ty = NULL;
modelica_metatype _row_ty = NULL;
modelica_metatype _matrix = NULL;
modelica_metatype _rows = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ty = tmpMeta[1];
_matrix = tmpMeta[2];
_row_ty = omc_Expression_unliftArray(threadData, _ty);
_rows = omc_List_map2(threadData, _matrix, boxvar_Expression_makeArray, _row_ty, mmc_mk_boolean(1));
tmpMeta[1] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _ty, mmc_mk_boolean(0), _rows);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inMatrix;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outArray = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outArray;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_hashOp(threadData_t *threadData, modelica_metatype _op)
{
modelica_integer _hash;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
modelica_metatype _path = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = ((modelica_integer) 25);
goto tmp3_done;
}
case 4: {
tmp1 = ((modelica_integer) 26);
goto tmp3_done;
}
case 5: {
tmp1 = ((modelica_integer) 27);
goto tmp3_done;
}
case 6: {
tmp1 = ((modelica_integer) 28);
goto tmp3_done;
}
case 7: {
tmp1 = ((modelica_integer) 29);
goto tmp3_done;
}
case 8: {
tmp1 = ((modelica_integer) 30);
goto tmp3_done;
}
case 9: {
tmp1 = ((modelica_integer) 31);
goto tmp3_done;
}
case 10: {
tmp1 = ((modelica_integer) 32);
goto tmp3_done;
}
case 11: {
tmp1 = ((modelica_integer) 33);
goto tmp3_done;
}
case 12: {
tmp1 = ((modelica_integer) 34);
goto tmp3_done;
}
case 13: {
tmp1 = ((modelica_integer) 35);
goto tmp3_done;
}
case 14: {
tmp1 = ((modelica_integer) 36);
goto tmp3_done;
}
case 15: {
tmp1 = ((modelica_integer) 37);
goto tmp3_done;
}
case 16: {
tmp1 = ((modelica_integer) 38);
goto tmp3_done;
}
case 17: {
tmp1 = ((modelica_integer) 39);
goto tmp3_done;
}
case 18: {
tmp1 = ((modelica_integer) 40);
goto tmp3_done;
}
case 19: {
tmp1 = ((modelica_integer) 41);
goto tmp3_done;
}
case 20: {
tmp1 = ((modelica_integer) 42);
goto tmp3_done;
}
case 21: {
tmp1 = ((modelica_integer) 43);
goto tmp3_done;
}
case 22: {
tmp1 = ((modelica_integer) 44);
goto tmp3_done;
}
case 23: {
tmp1 = ((modelica_integer) 45);
goto tmp3_done;
}
case 24: {
tmp1 = ((modelica_integer) 46);
goto tmp3_done;
}
case 25: {
tmp1 = ((modelica_integer) 47);
goto tmp3_done;
}
case 26: {
tmp1 = ((modelica_integer) 48);
goto tmp3_done;
}
case 27: {
tmp1 = ((modelica_integer) 49);
goto tmp3_done;
}
case 28: {
tmp1 = ((modelica_integer) 50);
goto tmp3_done;
}
case 29: {
tmp1 = ((modelica_integer) 51);
goto tmp3_done;
}
case 30: {
tmp1 = ((modelica_integer) 52);
goto tmp3_done;
}
case 31: {
tmp1 = ((modelica_integer) 53);
goto tmp3_done;
}
case 32: {
tmp1 = ((modelica_integer) 54);
goto tmp3_done;
}
case 33: {
tmp1 = ((modelica_integer) 55);
goto tmp3_done;
}
case 34: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
tmp1 = ((modelica_integer) 56) + stringHashDjb2(omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT47, 1, 0));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_hash = tmp1;
_return: OMC_LABEL_UNUSED
return _hash;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_hashOp(threadData_t *threadData, modelica_metatype _op)
{
modelica_integer _hash;
modelica_metatype out_hash;
_hash = omc_Expression_hashOp(threadData, _op);
out_hash = mmc_mk_icon(_hash);
return out_hash;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_hashReductionIter(threadData_t *threadData, modelica_metatype _iter)
{
modelica_integer _hash;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _iter;
{
modelica_string _id = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
_id = tmpMeta[0];
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp1 = ((modelica_integer) 23) + stringHashDjb2(_id) + omc_Expression_hashExp(threadData, _e1) + omc_Expression_hashExp(threadData, _e2);
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!optionNone(tmpMeta[2])) goto tmp3_end;
_id = tmpMeta[0];
_e1 = tmpMeta[1];
tmp1 = ((modelica_integer) 24) + stringHashDjb2(_id) + omc_Expression_hashExp(threadData, _e1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_hash = tmp1;
_return: OMC_LABEL_UNUSED
return _hash;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_hashReductionIter(threadData_t *threadData, modelica_metatype _iter)
{
modelica_integer _hash;
modelica_metatype out_hash;
_hash = omc_Expression_hashReductionIter(threadData, _iter);
out_hash = mmc_mk_icon(_hash);
return out_hash;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_hashReductionInfo(threadData_t *threadData, modelica_metatype _info)
{
modelica_integer _hash;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _info;
{
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
tmp1 = ((modelica_integer) 22) + stringHashDjb2(omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT47, 1, 0));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_hash = tmp1;
_return: OMC_LABEL_UNUSED
return _hash;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_hashReductionInfo(threadData_t *threadData, modelica_metatype _info)
{
modelica_integer _hash;
modelica_metatype out_hash;
_hash = omc_Expression_hashReductionInfo(threadData, _info);
out_hash = mmc_mk_icon(_hash);
return out_hash;
}
DLLExport
modelica_integer omc_Expression_hashExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_integer _hash;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _e;
{
modelica_real _r;
modelica_integer _i;
modelica_boolean _b;
modelica_string _s = NULL;
modelica_metatype _path = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _op = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _mexpl = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _iters = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 27; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp6;
tmp4 += 25;
tmp1 = stringHashDjb2(intString(_i));
goto tmp3_done;
}
case 1: {
modelica_real tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_real(tmpMeta[0]);
_r = tmp7;
tmp4 += 24;
tmp1 = stringHashDjb2(realString(_r));
goto tmp3_done;
}
case 2: {
modelica_integer tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp8 = mmc_unbox_integer(tmpMeta[0]);
_b = tmp8;
tmp4 += 23;
tmp1 = stringHashDjb2((_b?_OMC_LIT48:_OMC_LIT49));
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_s = tmpMeta[0];
tmp4 += 22;
tmp1 = stringHashDjb2(_s);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
tmp4 += 21;
tmp1 = stringHashDjb2(omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT47, 1, 0));
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[0];
tmp4 += 20;
tmp1 = omc_ComponentReference_hashComponentRef(threadData, _cr);
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_op = tmpMeta[1];
_e2 = tmpMeta[2];
tmp4 += 19;
tmp1 = ((modelica_integer) 1) + omc_Expression_hashExp(threadData, _e1) + omc_Expression_hashOp(threadData, _op) + omc_Expression_hashExp(threadData, _e2);
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
_e1 = tmpMeta[1];
tmp4 += 18;
tmp1 = ((modelica_integer) 2) + omc_Expression_hashOp(threadData, _op) + omc_Expression_hashExp(threadData, _e1);
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_op = tmpMeta[1];
_e2 = tmpMeta[2];
tmp4 += 17;
tmp1 = ((modelica_integer) 3) + omc_Expression_hashExp(threadData, _e1) + omc_Expression_hashOp(threadData, _op) + omc_Expression_hashExp(threadData, _e2);
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
_e1 = tmpMeta[1];
tmp4 += 16;
tmp1 = ((modelica_integer) 4) + omc_Expression_hashOp(threadData, _op) + omc_Expression_hashExp(threadData, _e1);
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_op = tmpMeta[1];
_e2 = tmpMeta[2];
tmp4 += 15;
tmp1 = ((modelica_integer) 5) + omc_Expression_hashExp(threadData, _e1) + omc_Expression_hashOp(threadData, _op) + omc_Expression_hashExp(threadData, _e2);
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
_e3 = tmpMeta[2];
tmp4 += 14;
tmp1 = ((modelica_integer) 6) + omc_Expression_hashExp(threadData, _e1) + omc_Expression_hashExp(threadData, _e2) + omc_Expression_hashExp(threadData, _e3);
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_path = tmpMeta[0];
_expl = tmpMeta[1];
tmp4 += 13;
tmp1 = ((modelica_integer) 7) + stringHashDjb2(omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT47, 1, 0)) + mmc_unbox_integer(omc_List_reduce(threadData, omc_List_map(threadData, _expl, boxvar_Expression_hashExp), boxvar_intAdd));
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_path = tmpMeta[0];
_expl = tmpMeta[1];
tmp4 += 12;
tmp1 = ((modelica_integer) 8) + stringHashDjb2(omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT47, 1, 0)) + mmc_unbox_integer(omc_List_reduce(threadData, omc_List_map(threadData, _expl, boxvar_Expression_hashExp), boxvar_intAdd));
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_path = tmpMeta[0];
_expl = tmpMeta[1];
tmp4 += 11;
tmp1 = ((modelica_integer) 9) + stringHashDjb2(omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT47, 1, 0)) + mmc_unbox_integer(omc_List_reduce(threadData, omc_List_map(threadData, _expl, boxvar_Expression_hashExp), boxvar_intAdd));
goto tmp3_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_expl = tmpMeta[0];
tmp4 += 10;
tmp1 = ((modelica_integer) 10) + mmc_unbox_integer(omc_List_reduce(threadData, omc_List_map(threadData, _expl, boxvar_Expression_hashExp), boxvar_intAdd));
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_mexpl = tmpMeta[0];
tmp4 += 9;
tmp1 = ((modelica_integer) 11) + mmc_unbox_integer(omc_List_reduce(threadData, omc_List_map(threadData, omc_List_flatten(threadData, _mexpl), boxvar_Expression_hashExp), boxvar_intAdd));
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
_e3 = tmpMeta[3];
tmp4 += 8;
tmp1 = ((modelica_integer) 12) + omc_Expression_hashExp(threadData, _e1) + omc_Expression_hashExp(threadData, _e2) + omc_Expression_hashExp(threadData, _e3);
goto tmp3_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e1 = tmpMeta[0];
_e3 = tmpMeta[2];
tmp4 += 7;
tmp1 = ((modelica_integer) 13) + omc_Expression_hashExp(threadData, _e1) + omc_Expression_hashExp(threadData, _e3);
goto tmp3_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_expl = tmpMeta[0];
tmp4 += 6;
tmp1 = ((modelica_integer) 14) + mmc_unbox_integer(omc_List_reduce(threadData, omc_List_map(threadData, _expl, boxvar_Expression_hashExp), boxvar_intAdd));
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[0];
tmp4 += 5;
tmp1 = ((modelica_integer) 15) + omc_Expression_hashExp(threadData, _e1);
goto tmp3_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[0];
_expl = tmpMeta[1];
tmp4 += 4;
tmp1 = ((modelica_integer) 16) + omc_Expression_hashExp(threadData, _e1) + mmc_unbox_integer(omc_List_reduce(threadData, omc_List_map(threadData, _expl, boxvar_Expression_hashExp), boxvar_intAdd));
goto tmp3_done;
}
case 22: {
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp9 = mmc_unbox_integer(tmpMeta[1]);
_e1 = tmpMeta[0];
_i = tmp9;
tmp4 += 3;
tmp1 = ((modelica_integer) 17) + omc_Expression_hashExp(threadData, _e1) + stringHashDjb2(intString(_i));
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
tmp4 += 2;
tmp1 = ((modelica_integer) 18) + omc_Expression_hashExp(threadData, _e1) + omc_Expression_hashExp(threadData, _e2);
goto tmp3_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!optionNone(tmpMeta[1])) goto tmp3_end;
_e1 = tmpMeta[0];
tmp4 += 1;
tmp1 = ((modelica_integer) 19) + omc_Expression_hashExp(threadData, _e1);
goto tmp3_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_info = tmpMeta[0];
_e1 = tmpMeta[1];
_iters = tmpMeta[2];
tmp1 = ((modelica_integer) 22) + omc_Expression_hashReductionInfo(threadData, _info) + omc_Expression_hashExp(threadData, _e1) + mmc_unbox_integer(omc_List_reduce(threadData, omc_List_map(threadData, _iters, boxvar_Expression_hashReductionIter), boxvar_intAdd));
goto tmp3_done;
}
case 26: {
tmp1 = stringHashDjb2(omc_ExpressionDump_printExpStr(threadData, _e));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 27) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_hash = tmp1;
_return: OMC_LABEL_UNUSED
return _hash;
}
modelica_metatype boxptr_Expression_hashExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_integer _hash;
modelica_metatype out_hash;
_hash = omc_Expression_hashExp(threadData, _e);
out_hash = mmc_mk_icon(_hash);
return out_hash;
}
DLLExport
modelica_integer omc_Expression_hashExpMod(threadData_t *threadData, modelica_metatype _e, modelica_integer _mod)
{
modelica_integer _hash;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_hash = modelica_integer_mod(labs(omc_Expression_hashExp(threadData, _e)), _mod);
_return: OMC_LABEL_UNUSED
return _hash;
}
modelica_metatype boxptr_Expression_hashExpMod(threadData_t *threadData, modelica_metatype _e, modelica_metatype _mod)
{
modelica_integer tmp1;
modelica_integer _hash;
modelica_metatype out_hash;
tmp1 = mmc_unbox_integer(_mod);
_hash = omc_Expression_hashExpMod(threadData, _e, tmp1);
out_hash = mmc_mk_icon(_hash);
return out_hash;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_promoteExp3(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTypes)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inTypes;
{
modelica_metatype _ty = NULL;
modelica_metatype _rest_ty = NULL;
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _inExp;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_ty = tmpMeta[1];
tmpMeta[1] = mmc_mk_cons(_inExp, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = omc_Expression_makeArray(threadData, tmpMeta[1], _ty, 1);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_ty = tmpMeta[1];
_rest_ty = tmpMeta[2];
_exp = omc_Expression_promoteExp3(threadData, _inExp, _rest_ty);
tmpMeta[1] = mmc_mk_cons(_exp, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = omc_Expression_makeArray(threadData, tmpMeta[1], _ty, 0);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_promoteExp2(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inIsArray, modelica_integer _inDims, modelica_metatype _inTypes)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_boolean tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inExp;
tmp3_2 = _inIsArray;
tmp3_3 = _inTypes;
{
modelica_metatype _ty = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _rest_ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_3)) goto tmp2_end;
tmpMeta[0] = _inExp;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (listEmpty(tmp3_3)) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmp3_3);
tmpMeta[3] = MMC_CDR(tmp3_3);
_expl = tmpMeta[1];
_ty = tmpMeta[2];
_rest_ty = tmpMeta[3];
_expl = omc_List_map3(threadData, _expl, boxvar_Expression_promoteExp2, mmc_mk_boolean(0), mmc_mk_integer(_inDims), _rest_ty);
tmpMeta[1] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _ty, mmc_mk_boolean(0), _expl);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (1 != tmp3_2) goto tmp2_end;
if (listEmpty(tmp3_3)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_3);
tmpMeta[2] = MMC_CDR(tmp3_3);
_ty = tmpMeta[1];
tmpMeta[2] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_inDims));
tmpMeta[1] = mmc_mk_cons(_inExp, mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil)));
tmpMeta[0] = omc_Expression_makePureBuiltinCall(threadData, _OMC_LIT50, tmpMeta[1], _ty);
goto tmp2_done;
}
case 3: {
tmpMeta[0] = omc_Expression_promoteExp3(threadData, _inExp, _inTypes);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_promoteExp2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inIsArray, modelica_metatype _inDims, modelica_metatype _inTypes)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inIsArray);
tmp2 = mmc_unbox_integer(_inDims);
_outExp = omc_Expression_promoteExp2(threadData, _inExp, tmp1, tmp2, _inTypes);
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makePromotedTypes(threadData_t *threadData, modelica_metatype _inDimensions, modelica_metatype _inElementType, modelica_metatype _inAccumTypes)
{
modelica_metatype _outAccumTypes = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inDimensions;
{
modelica_metatype _rest_dims = NULL;
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest_dims = tmpMeta[2];
tmpMeta[1] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _inElementType, _inDimensions);
_ty = tmpMeta[1];
tmpMeta[1] = mmc_mk_cons(_ty, _inAccumTypes);
_inDimensions = _rest_dims;
_inAccumTypes = tmpMeta[1];
goto _tailrecursive;
goto tmp2_done;
}
case 1: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = listReverse(_inAccumTypes);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAccumTypes = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAccumTypes;
}
DLLExport
modelica_metatype omc_Expression_promoteExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inType, modelica_integer _inDims, modelica_metatype *out_outType)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_integer _dims_to_add;
modelica_metatype _ty = NULL;
modelica_metatype _res_ty = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _tys = NULL;
modelica_metatype _dims = NULL;
modelica_metatype _added_dims = NULL;
modelica_boolean _is_array_ty;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_dims_to_add = _inDims - omc_Types_numberOfDimensions(threadData, _inType);
tmp6 = (_dims_to_add > ((modelica_integer) 0));
if (1 != tmp6) goto goto_2;
_added_dims = omc_List_fill(threadData, _OMC_LIT51, _dims_to_add);
_dims = listAppend(omc_Types_getDimensions(threadData, _inType), _added_dims);
_ty = omc_Types_arrayElementType(threadData, _inType);
_res_ty = omc_Types_liftArrayListDims(threadData, _ty, _dims);
_ty = omc_Types_simplifyType(threadData, _ty);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_tys = omc_Expression_makePromotedTypes(threadData, _dims, _ty, tmpMeta[2]);
_is_array_ty = omc_Types_isArray(threadData, _inType);
_exp = omc_Expression_promoteExp2(threadData, _inExp, _is_array_ty, _inDims, _tys);
tmpMeta[0+0] = _exp;
tmpMeta[0+1] = _res_ty;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inType;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_outType = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outType) { *out_outType = _outType; }
return _outExp;
}
modelica_metatype boxptr_Expression_promoteExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inType, modelica_metatype _inDims, modelica_metatype *out_outType)
{
modelica_integer tmp1;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inDims);
_outExp = omc_Expression_promoteExp(threadData, _inExp, _inType, tmp1, out_outType);
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_equationExpEqual(threadData_t *threadData, modelica_metatype _exp1, modelica_metatype _exp2)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _exp1;
tmp4_2 = _exp2;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _e4 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
tmp1 = omc_Expression_expEqual(threadData, _e1, _e2);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
tmp1 = omc_Expression_expEqual(threadData, _e1, _e2);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
_e3 = tmpMeta[2];
_e4 = tmpMeta[3];
tmp1 = (omc_Expression_expEqual(threadData, _e1, _e3) && omc_Expression_expEqual(threadData, _e2, _e4));
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_equationExpEqual(threadData_t *threadData, modelica_metatype _exp1, modelica_metatype _exp2)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_equationExpEqual(threadData, _exp1, _exp2);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_metatype omc_Expression_splitArray(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean *out_didSplit)
{
modelica_metatype _outExp = NULL;
modelica_boolean _didSplit;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _expl = NULL;
modelica_metatype _mat = NULL;
modelica_integer _istart;
modelica_integer _istop;
modelica_integer _istep;
modelica_metatype _step = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_expl = tmpMeta[2];
tmpMeta[0+0] = _expl;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_mat = tmpMeta[2];
tmpMeta[0+0] = omc_List_flatten(threadData, _mat);
tmp1_c1 = 1;
goto tmp3_done;
}
case 2: {
modelica_integer tmp6;
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmp7 = mmc_unbox_integer(tmpMeta[6]);
_istart = tmp6;
_step = tmpMeta[4];
_istop = tmp7;
{
modelica_metatype __omcQ_24tmpVar13;
modelica_metatype* tmp8;
modelica_metatype __omcQ_24tmpVar12;
int tmp9;
modelica_metatype _i_loopVar = 0;
modelica_integer tmp10 = 0;
modelica_metatype _i;
{
modelica_metatype tmp13_1;
tmp13_1 = _step;
{
volatile mmc_switch_type tmp13;
int tmp14;
tmp13 = 0;
for (; tmp13 < 2; tmp13++) {
switch (MMC_SWITCH_CAST(tmp13)) {
case 0: {
if (!optionNone(tmp13_1)) goto tmp12_end;
tmp10 = ((modelica_integer) 1);
goto tmp12_done;
}
case 1: {
modelica_integer tmp15;
if (optionNone(tmp13_1)) goto tmp12_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp13_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,1) == 0) goto tmp12_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmp15 = mmc_unbox_integer(tmpMeta[6]);
_istep = tmp15;
tmp10 = _istep;
goto tmp12_done;
}
}
goto tmp12_end;
tmp12_end: ;
}
goto goto_11;
goto_11:;
goto goto_2;
goto tmp12_done;
tmp12_done:;
}
}_i_loopVar = omc_ExpressionSimplify_simplifyRange(threadData, _istart, tmp10, _istop);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar13 = tmpMeta[3];
tmp8 = &__omcQ_24tmpVar13;
while(1) {
tmp9 = 1;
if (!listEmpty(_i_loopVar)) {
_i = MMC_CAR(_i_loopVar);
_i_loopVar = MMC_CDR(_i_loopVar);
tmp9--;
}
if (tmp9 == 0) {
tmpMeta[4] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, _i);
__omcQ_24tmpVar12 = tmpMeta[4];
*tmp8 = mmc_mk_cons(__omcQ_24tmpVar12,0);
tmp8 = &MMC_CDR(*tmp8);
} else if (tmp9 == 1) {
break;
} else {
goto goto_2;
}
}
*tmp8 = mmc_mk_nil();
tmpMeta[2] = __omcQ_24tmpVar13;
}
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 1;
goto tmp3_done;
}
case 3: {
tmpMeta[2] = mmc_mk_cons(_inExp, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_didSplit = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_didSplit) { *out_didSplit = _didSplit; }
return _outExp;
}
modelica_metatype boxptr_Expression_splitArray(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype *out_didSplit)
{
modelica_boolean _didSplit;
modelica_metatype _outExp = NULL;
_outExp = omc_Expression_splitArray(threadData, _inExp, &_didSplit);
if (out_didSplit) { *out_didSplit = mmc_mk_icon(_didSplit); }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_splitRecord2(threadData_t *threadData, modelica_metatype _var, modelica_metatype _cr)
{
modelica_metatype _exp = NULL;
modelica_string _n = NULL;
modelica_metatype _tt = NULL;
modelica_metatype _ty = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _var;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_n = tmpMeta[1];
_tt = tmpMeta[2];
_ty = omc_Types_simplifyType(threadData, _tt);
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_exp = omc_Expression_makeCrefExp(threadData, omc_ComponentReference_crefPrependIdent(threadData, _cr, _n, tmpMeta[0], _ty), _ty);
_return: OMC_LABEL_UNUSED
return _exp;
}
DLLExport
modelica_metatype omc_Expression_splitRecord(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _ty)
{
modelica_metatype _outExps = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inExp;
tmp3_2 = _ty;
{
modelica_metatype _exp = NULL;
modelica_metatype _vs = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _exps = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,20,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exp = tmpMeta[1];
_inExp = _exp;
goto _tailrecursive;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],17,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
goto goto_1;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,9,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_cr = tmpMeta[1];
_vs = tmpMeta[2];
tmpMeta[0] = omc_List_map1(threadData, _vs, boxvar_Expression_splitRecord2, _cr);
goto tmp2_done;
}
case 3: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],9,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_p1 = tmpMeta[1];
_exps = tmpMeta[2];
_p2 = tmpMeta[6];
tmp5 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _exps;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,14,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exps = tmpMeta[1];
tmpMeta[0] = _exps;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExps = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExps;
}
DLLExport
modelica_metatype omc_Expression_dimensionsToExps(threadData_t *threadData, modelica_metatype _dims)
{
modelica_metatype _exps = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_exps = tmpMeta[0];
{
modelica_metatype _d;
for (tmpMeta[1] = _dims; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_d = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _d;
{
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exp = tmpMeta[3];
tmpMeta[3] = mmc_mk_cons(_exp, _exps);
tmpMeta[2] = tmpMeta[3];
goto tmp2_done;
}
case 1: {
tmpMeta[2] = _exps;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_exps = tmpMeta[2];
}
}
_exps = listReverse(_exps);
_return: OMC_LABEL_UNUSED
return _exps;
}
DLLExport
modelica_boolean omc_Expression_isNotWild(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,0) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
tmp1 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isNotWild(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isNotWild(threadData, _exp);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_Expression_isWild(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isWild(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isWild(threadData, _exp);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_priorityLBinop(threadData_t *threadData, modelica_metatype _inOp)
{
modelica_integer _outPriority;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inOp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 8);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 9);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outPriority = tmp1;
_return: OMC_LABEL_UNUSED
return _outPriority;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_priorityLBinop(threadData_t *threadData, modelica_metatype _inOp)
{
modelica_integer _outPriority;
modelica_metatype out_outPriority;
_outPriority = omc_Expression_priorityLBinop(threadData, _inOp);
out_outPriority = mmc_mk_icon(_outPriority);
return out_outPriority;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_priorityBinopRhs(threadData_t *threadData, modelica_metatype _inOp)
{
modelica_integer _outPriority;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inOp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = ((modelica_integer) 6);
goto tmp3_done;
}
case 4: {
tmp1 = ((modelica_integer) 5);
goto tmp3_done;
}
case 5: {
tmp1 = ((modelica_integer) 3);
goto tmp3_done;
}
case 6: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 7: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 10: {
tmp1 = ((modelica_integer) 6);
goto tmp3_done;
}
case 11: {
tmp1 = ((modelica_integer) 5);
goto tmp3_done;
}
case 12: {
tmp1 = ((modelica_integer) 3);
goto tmp3_done;
}
case 13: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 14: {
tmp1 = ((modelica_integer) 3);
goto tmp3_done;
}
case 15: {
tmp1 = ((modelica_integer) 6);
goto tmp3_done;
}
case 16: {
tmp1 = ((modelica_integer) 5);
goto tmp3_done;
}
case 17: {
tmp1 = ((modelica_integer) 3);
goto tmp3_done;
}
case 18: {
tmp1 = ((modelica_integer) 3);
goto tmp3_done;
}
case 19: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 20: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 21: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 22: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 23: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 24: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outPriority = tmp1;
_return: OMC_LABEL_UNUSED
return _outPriority;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_priorityBinopRhs(threadData_t *threadData, modelica_metatype _inOp)
{
modelica_integer _outPriority;
modelica_metatype out_outPriority;
_outPriority = omc_Expression_priorityBinopRhs(threadData, _inOp);
out_outPriority = mmc_mk_icon(_outPriority);
return out_outPriority;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_priorityBinopLhs(threadData_t *threadData, modelica_metatype _inOp)
{
modelica_integer _outPriority;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inOp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = ((modelica_integer) 5);
goto tmp3_done;
}
case 4: {
tmp1 = ((modelica_integer) 5);
goto tmp3_done;
}
case 5: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 6: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 7: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 10: {
tmp1 = ((modelica_integer) 5);
goto tmp3_done;
}
case 11: {
tmp1 = ((modelica_integer) 5);
goto tmp3_done;
}
case 12: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 13: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 14: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 15: {
tmp1 = ((modelica_integer) 5);
goto tmp3_done;
}
case 16: {
tmp1 = ((modelica_integer) 5);
goto tmp3_done;
}
case 17: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 18: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 19: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 20: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 21: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 22: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 23: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 24: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outPriority = tmp1;
_return: OMC_LABEL_UNUSED
return _outPriority;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_priorityBinopLhs(threadData_t *threadData, modelica_metatype _inOp)
{
modelica_integer _outPriority;
modelica_metatype out_outPriority;
_outPriority = omc_Expression_priorityBinopLhs(threadData, _inOp);
out_outPriority = mmc_mk_icon(_outPriority);
return out_outPriority;
}
DLLExport
modelica_integer omc_Expression_priority(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inLhs)
{
modelica_integer _outPriority;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inLhs;
{
modelica_metatype _op = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 10; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
tmp1 = omc_Expression_priorityBinopRhs(threadData, _op);
goto tmp3_done;
}
case 1: {
if (1 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
tmp1 = omc_Expression_priorityBinopLhs(threadData, _op);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
if (!(mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2)))) < 0.0)) goto tmp3_end;
tmp1 = ((modelica_integer) 4);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 4);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
tmp1 = omc_Expression_priorityLBinop(threadData, _op);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 7);
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 6);
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 10);
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 11);
goto tmp3_done;
}
case 9: {
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outPriority = tmp1;
_return: OMC_LABEL_UNUSED
return _outPriority;
}
modelica_metatype boxptr_Expression_priority(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inLhs)
{
modelica_integer tmp1;
modelica_integer _outPriority;
modelica_metatype out_outPriority;
tmp1 = mmc_unbox_integer(_inLhs);
_outPriority = omc_Expression_priority(threadData, _inExp, tmp1);
out_outPriority = mmc_mk_icon(_outPriority);
return out_outPriority;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isNonAssociativeOp(threadData_t *threadData, modelica_metatype _inOperator)
{
modelica_boolean _isNonAssociative;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inOperator;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 7: {
tmp1 = 1;
goto tmp3_done;
}
case 21: {
tmp1 = 1;
goto tmp3_done;
}
case 22: {
tmp1 = 1;
goto tmp3_done;
}
case 23: {
tmp1 = 1;
goto tmp3_done;
}
case 24: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isNonAssociative = tmp1;
_return: OMC_LABEL_UNUSED
return _isNonAssociative;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isNonAssociativeOp(threadData_t *threadData, modelica_metatype _inOperator)
{
modelica_boolean _isNonAssociative;
modelica_metatype out_isNonAssociative;
_isNonAssociative = omc_Expression_isNonAssociativeOp(threadData, _inOperator);
out_isNonAssociative = mmc_mk_icon(_isNonAssociative);
return out_isNonAssociative;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isNonAssociativeExp(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _isNonAssociative;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmp1 = omc_Expression_isNonAssociativeOp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isNonAssociative = tmp1;
_return: OMC_LABEL_UNUSED
return _isNonAssociative;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isNonAssociativeExp(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _isNonAssociative;
modelica_metatype out_isNonAssociative;
_isNonAssociative = omc_Expression_isNonAssociativeExp(threadData, _exp);
out_isNonAssociative = mmc_mk_icon(_isNonAssociative);
return out_isNonAssociative;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isAssociativeOp(threadData_t *threadData, modelica_metatype _inOperator)
{
modelica_boolean _outIsAssociative;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inOperator;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 10: {
tmp1 = 1;
goto tmp3_done;
}
case 14: {
tmp1 = 1;
goto tmp3_done;
}
case 15: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsAssociative = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsAssociative;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isAssociativeOp(threadData_t *threadData, modelica_metatype _inOperator)
{
modelica_boolean _outIsAssociative;
modelica_metatype out_outIsAssociative;
_outIsAssociative = omc_Expression_isAssociativeOp(threadData, _inOperator);
out_outIsAssociative = mmc_mk_icon(_outIsAssociative);
return out_outIsAssociative;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isAssociativeExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsAssociative;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _op = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
tmp1 = omc_Expression_isAssociativeOp(threadData, _op);
goto tmp3_done;
}
case 12: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsAssociative = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsAssociative;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isAssociativeExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsAssociative;
modelica_metatype out_outIsAssociative;
_outIsAssociative = omc_Expression_isAssociativeExp(threadData, _inExp);
out_outIsAssociative = mmc_mk_icon(_outIsAssociative);
return out_outIsAssociative;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_shouldParenthesize2(threadData_t *threadData, modelica_integer _inPrioDiff, modelica_metatype _inOperand, modelica_boolean _inLhs)
{
modelica_boolean _outShouldParenthesize;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_integer tmp4_1;
tmp4_1 = _inPrioDiff;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(tmp4_1)) {
case 1: {
if (1 != tmp4_1) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 0: {
if (0 != tmp4_1) goto tmp3_end;
tmp1 = (_inLhs?omc_Expression_isNonAssociativeExp(threadData, _inOperand):(!omc_Expression_isAssociativeExp(threadData, _inOperand)));
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outShouldParenthesize = tmp1;
_return: OMC_LABEL_UNUSED
return _outShouldParenthesize;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_shouldParenthesize2(threadData_t *threadData, modelica_metatype _inPrioDiff, modelica_metatype _inOperand, modelica_metatype _inLhs)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_boolean _outShouldParenthesize;
modelica_metatype out_outShouldParenthesize;
tmp1 = mmc_unbox_integer(_inPrioDiff);
tmp2 = mmc_unbox_integer(_inLhs);
_outShouldParenthesize = omc_Expression_shouldParenthesize2(threadData, tmp1, _inOperand, tmp2);
out_outShouldParenthesize = mmc_mk_icon(_outShouldParenthesize);
return out_outShouldParenthesize;
}
DLLExport
modelica_boolean omc_Expression_shouldParenthesize(threadData_t *threadData, modelica_metatype _inOperand, modelica_metatype _inOperator, modelica_boolean _inLhs)
{
modelica_boolean _outShouldParenthesize;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inOperand;
{
modelica_integer _diff;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
_diff = omc_Util_intCompare(threadData, omc_Expression_priority(threadData, _inOperand, _inLhs), omc_Expression_priority(threadData, _inOperator, _inLhs));
tmp1 = omc_Expression_shouldParenthesize2(threadData, _diff, _inOperand, _inLhs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outShouldParenthesize = tmp1;
_return: OMC_LABEL_UNUSED
return _outShouldParenthesize;
}
modelica_metatype boxptr_Expression_shouldParenthesize(threadData_t *threadData, modelica_metatype _inOperand, modelica_metatype _inOperator, modelica_metatype _inLhs)
{
modelica_integer tmp1;
modelica_boolean _outShouldParenthesize;
modelica_metatype out_outShouldParenthesize;
tmp1 = mmc_unbox_integer(_inLhs);
_outShouldParenthesize = omc_Expression_shouldParenthesize(threadData, _inOperand, _inOperator, tmp1);
out_outShouldParenthesize = mmc_mk_icon(_outShouldParenthesize);
return out_outShouldParenthesize;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makeEnumLiteral(threadData_t *threadData, modelica_metatype _name, modelica_integer _index, modelica_integer *out_newIndex)
{
modelica_metatype _enumExp = NULL;
modelica_integer _newIndex;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box3(8, &DAE_Exp_ENUM__LITERAL__desc, _name, mmc_mk_integer(_index));
_enumExp = tmpMeta[0];
_newIndex = ((modelica_integer) 1) + _index;
_return: OMC_LABEL_UNUSED
if (out_newIndex) { *out_newIndex = _newIndex; }
return _enumExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_makeEnumLiteral(threadData_t *threadData, modelica_metatype _name, modelica_metatype _index, modelica_metatype *out_newIndex)
{
modelica_integer tmp1;
modelica_integer _newIndex;
modelica_metatype _enumExp = NULL;
tmp1 = mmc_unbox_integer(_index);
_enumExp = omc_Expression_makeEnumLiteral(threadData, _name, tmp1, &_newIndex);
if (out_newIndex) { *out_newIndex = mmc_mk_icon(_newIndex); }
return _enumExp;
}
DLLExport
modelica_metatype omc_Expression_makeEnumLiterals(threadData_t *threadData, modelica_metatype _inTypeName, modelica_metatype _inLiterals)
{
modelica_metatype _outLiterals = NULL;
modelica_metatype _enum_lit_names = NULL;
modelica_metatype _enum_lit_expl = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_enum_lit_names = omc_List_map1r(threadData, _inLiterals, boxvar_AbsynUtil_suffixPath, _inTypeName);
_outLiterals = omc_List_mapFold(threadData, _enum_lit_names, boxvar_Expression_makeEnumLiteral, mmc_mk_integer(((modelica_integer) 1)), NULL);
_return: OMC_LABEL_UNUSED
return _outLiterals;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_opComplexity(threadData_t *threadData, modelica_metatype _op)
{
modelica_integer _i;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
modelica_metatype _tp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 34; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 100);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 30);
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + (((modelica_integer) 3)) * (omc_Expression_tpComplexity(threadData, _tp));
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + (((modelica_integer) 3)) * (omc_Expression_tpComplexity(threadData, _tp));
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + (((modelica_integer) 30)) * (omc_Expression_tpComplexity(threadData, _tp));
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + (((modelica_integer) 30)) * (omc_Expression_tpComplexity(threadData, _tp));
goto tmp3_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + (((modelica_integer) 30)) * (omc_Expression_tpComplexity(threadData, _tp));
goto tmp3_done;
}
case 22: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_tp = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + (((modelica_integer) 30)) * (omc_Expression_tpComplexity(threadData, _tp));
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 27: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 28: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 29: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 30: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 31: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,30,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 32: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 100);
goto tmp3_done;
}
case 33: {
omc_Error_addMessage(threadData, _OMC_LIT31, _OMC_LIT53);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_i = tmp1;
_return: OMC_LABEL_UNUSED
return _i;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_opComplexity(threadData_t *threadData, modelica_metatype _op)
{
modelica_integer _i;
modelica_metatype out_i;
_i = omc_Expression_opComplexity(threadData, _op);
out_i = mmc_mk_icon(_i);
return out_i;
}
DLLExport
modelica_integer omc_Expression_dimComplexity(threadData_t *threadData, modelica_metatype _dim)
{
modelica_integer _i;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _dim;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp5;
tmp1 = _i;
goto tmp3_done;
}
case 5: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp6;
tmp1 = _i;
goto tmp3_done;
}
case 4: {
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = ((modelica_integer) 1000);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_i = tmp1;
_return: OMC_LABEL_UNUSED
return _i;
}
modelica_metatype boxptr_Expression_dimComplexity(threadData_t *threadData, modelica_metatype _dim)
{
modelica_integer _i;
modelica_metatype out_i;
_i = omc_Expression_dimComplexity(threadData, _dim);
out_i = mmc_mk_icon(_i);
return out_i;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_tpComplexity(threadData_t *threadData, modelica_metatype _tp)
{
modelica_integer _i;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _tp;
{
modelica_metatype _dims = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_dims = tmpMeta[0];
tmp1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _dims, boxvar_intMul, boxvar_Expression_dimComplexity, mmc_mk_integer(((modelica_integer) 1))));
goto tmp3_done;
}
case 1: {
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_i = tmp1;
_return: OMC_LABEL_UNUSED
return _i;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_tpComplexity(threadData_t *threadData, modelica_metatype _tp)
{
modelica_integer _i;
modelica_metatype out_i;
_i = omc_Expression_tpComplexity(threadData, _tp);
out_i = mmc_mk_icon(_i);
return out_i;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_complexityBuiltin(threadData_t *threadData, modelica_string _name, modelica_metatype _tp)
{
modelica_integer _complexity;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;
tmp4_1 = _name;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (8 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT54), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmp1 = ((modelica_integer) 5) + omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 1: {
if (5 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT55), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmp1 = ((modelica_integer) 9);
goto tmp3_done;
}
case 2: {
tmp1 = ((modelica_integer) 25);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_complexity = tmp1;
_return: OMC_LABEL_UNUSED
return _complexity;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_complexityBuiltin(threadData_t *threadData, modelica_metatype _name, modelica_metatype _tp)
{
modelica_integer _complexity;
modelica_metatype out_complexity;
_complexity = omc_Expression_complexityBuiltin(threadData, _name, _tp);
out_complexity = mmc_mk_icon(_complexity);
return out_complexity;
}
DLLExport
modelica_integer omc_Expression_complexity(threadData_t *threadData, modelica_metatype _exp)
{
modelica_integer _i;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
modelica_metatype _op = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e3 = NULL;
modelica_integer _c1;
modelica_integer _c2;
modelica_integer _c3;
modelica_metatype _exps = NULL;
modelica_metatype _matrix = NULL;
modelica_string _str = NULL;
modelica_string _name = NULL;
modelica_metatype _tp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 41; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,36,2) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_tp = tmpMeta[0];
tmp1 = omc_Expression_tpComplexity(threadData, _tp);
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_op = tmpMeta[1];
_e2 = tmpMeta[2];
_c1 = omc_Expression_complexity(threadData, _e1);
_c2 = omc_Expression_complexity(threadData, _e2);
_c3 = omc_Expression_opComplexity(threadData, _op);
tmp1 = _c1 + _c2 + _c3;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
_e = tmpMeta[1];
_c1 = omc_Expression_complexity(threadData, _e);
_c2 = omc_Expression_opComplexity(threadData, _op);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_op = tmpMeta[1];
_e2 = tmpMeta[2];
_c1 = omc_Expression_complexity(threadData, _e1);
_c2 = omc_Expression_complexity(threadData, _e2);
_c3 = omc_Expression_opComplexity(threadData, _op);
tmp1 = _c1 + _c2 + _c3;
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
_e = tmpMeta[1];
_c1 = omc_Expression_complexity(threadData, _e);
_c2 = omc_Expression_opComplexity(threadData, _op);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_op = tmpMeta[1];
_e2 = tmpMeta[2];
_c1 = omc_Expression_complexity(threadData, _e1);
_c2 = omc_Expression_complexity(threadData, _e2);
_c3 = omc_Expression_opComplexity(threadData, _op);
tmp1 = _c1 + _c2 + _c3;
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
_e3 = tmpMeta[2];
_c1 = omc_Expression_complexity(threadData, _e1);
_c2 = omc_Expression_complexity(threadData, _e2);
_c3 = omc_Expression_complexity(threadData, _e3);
tmp1 = _c1 + modelica_integer_max((modelica_integer)(_c2),(modelica_integer)(_c3));
goto tmp3_done;
}
case 13: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmp6 = mmc_unbox_integer(tmpMeta[5]);
if (1 != tmp6) goto tmp3_end;
_name = tmpMeta[1];
_exps = tmpMeta[2];
_tp = tmpMeta[4];
_c1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _exps, boxvar_intAdd, boxvar_Expression_complexity, mmc_mk_integer(((modelica_integer) 0))));
_c2 = omc_Expression_complexityBuiltin(threadData, _name, _tp);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_exps = tmpMeta[0];
_c1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _exps, boxvar_intAdd, boxvar_Expression_complexity, mmc_mk_integer(((modelica_integer) 0))));
_c2 = listLength(_exps);
tmp1 = ((modelica_integer) 25) + _c1 + _c2;
goto tmp3_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_exps = tmpMeta[0];
tmp1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _exps, boxvar_intAdd, boxvar_Expression_complexity, mmc_mk_integer(((modelica_integer) 1))));
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 500000);
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_tp = tmpMeta[0];
_exps = tmpMeta[1];
_c1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _exps, boxvar_intAdd, boxvar_Expression_complexity, mmc_mk_integer((omc_Expression_isArrayType(threadData, _tp)?((modelica_integer) 0):((modelica_integer) 5)))));
_c2 = listLength(_exps);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (listEmpty(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_matrix = tmpMeta[0];
_exps = tmpMeta[1];
_c1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, omc_List_flatten(threadData, _matrix), boxvar_intAdd, boxvar_Expression_complexity, mmc_mk_integer(((modelica_integer) 5))));
_c2 = (listLength(_exps)) * (listLength(_matrix));
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
tmp1 = ((modelica_integer) 1000) + omc_Expression_complexity(threadData, _e1) + omc_Expression_complexity(threadData, _e2);
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e1 = tmpMeta[0];
_e3 = tmpMeta[2];
_e2 = tmpMeta[3];
tmp1 = ((modelica_integer) 1000) + omc_Expression_complexity(threadData, _e1) + omc_Expression_complexity(threadData, _e2) + omc_Expression_complexity(threadData, _e3);
goto tmp3_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_exps = tmpMeta[0];
_c1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _exps, boxvar_intAdd, boxvar_Expression_complexity, mmc_mk_integer(((modelica_integer) 5))));
_c2 = listLength(_exps);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 22: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_tp = tmpMeta[0];
_e = tmpMeta[1];
tmp1 = omc_Expression_tpComplexity(threadData, _tp) + omc_Expression_complexity(threadData, _e);
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_exps = tmpMeta[1];
_c1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _exps, boxvar_intAdd, boxvar_Expression_complexity, mmc_mk_integer(((modelica_integer) 5))));
_c2 = listLength(_exps);
_c3 = omc_Expression_complexity(threadData, _e);
tmp1 = _c1 + _c2 + _c3;
goto tmp3_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta[0];
tmp1 = ((modelica_integer) 1) + omc_Expression_complexity(threadData, _e);
goto tmp3_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!optionNone(tmpMeta[1])) goto tmp3_end;
_e = tmpMeta[0];
tmp1 = ((modelica_integer) 15) + omc_Expression_complexity(threadData, _e);
goto tmp3_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
tmp1 = ((modelica_integer) 1) + omc_Expression_complexity(threadData, _e1) + omc_Expression_complexity(threadData, _e2);
goto tmp3_done;
}
case 27: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 500000);
goto tmp3_done;
}
case 28: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 500000);
goto tmp3_done;
}
case 29: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 500000);
goto tmp3_done;
}
case 30: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_exps = tmpMeta[0];
_c1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _exps, boxvar_intAdd, boxvar_Expression_complexity, mmc_mk_integer(((modelica_integer) 5))));
_c2 = listLength(_exps);
tmp1 = ((modelica_integer) 5) + _c1 + _c2;
goto tmp3_done;
}
case 31: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
tmp1 = ((modelica_integer) 5) + omc_Expression_complexity(threadData, _e1) + omc_Expression_complexity(threadData, _e2);
goto tmp3_done;
}
case 32: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,30,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_exps = tmpMeta[0];
_c1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _exps, boxvar_intAdd, boxvar_Expression_complexity, mmc_mk_integer(((modelica_integer) 5))));
_c2 = listLength(_exps);
tmp1 = ((modelica_integer) 5) + _c1 + _c2;
goto tmp3_done;
}
case 33: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!optionNone(tmpMeta[0])) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 34: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_e = tmpMeta[1];
tmp1 = ((modelica_integer) 5) + omc_Expression_complexity(threadData, _e);
goto tmp3_done;
}
case 35: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,32,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_exps = tmpMeta[0];
_c1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _exps, boxvar_intAdd, boxvar_Expression_complexity, mmc_mk_integer(((modelica_integer) 5))));
_c2 = listLength(_exps);
tmp1 = ((modelica_integer) 5) + _c1 + _c2;
goto tmp3_done;
}
case 36: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,6) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 500000);
goto tmp3_done;
}
case 37: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,34,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta[0];
tmp1 = ((modelica_integer) 5) + omc_Expression_complexity(threadData, _e);
goto tmp3_done;
}
case 38: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,35,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta[0];
tmp1 = ((modelica_integer) 1) + omc_Expression_complexity(threadData, _e);
goto tmp3_done;
}
case 39: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,37,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 40: {
tmpMeta[0] = stringAppend(_OMC_LIT56,omc_ExpressionDump_printExpStr(threadData, _exp));
_str = tmpMeta[0];
tmpMeta[0] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addMessage(threadData, _OMC_LIT31, tmpMeta[0]);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_i = tmp1;
_return: OMC_LABEL_UNUSED
return _i;
}
modelica_metatype boxptr_Expression_complexity(threadData_t *threadData, modelica_metatype _exp)
{
modelica_integer _i;
modelica_metatype out_i;
_i = omc_Expression_complexity(threadData, _exp);
out_i = mmc_mk_icon(_i);
return out_i;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_complexityTraverse2(threadData_t *threadData, modelica_metatype _exp, modelica_integer _complexity_, modelica_integer *out_outComplexity)
{
modelica_metatype _outExp = NULL;
modelica_integer _outComplexity;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outComplexity = _complexity_ + omc_Expression_complexity(threadData, _exp);
_outExp = _exp;
_return: OMC_LABEL_UNUSED
if (out_outComplexity) { *out_outComplexity = _outComplexity; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_complexityTraverse2(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _complexity_, modelica_metatype *out_outComplexity)
{
modelica_integer tmp1;
modelica_integer _outComplexity;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_complexity_);
_outExp = omc_Expression_complexityTraverse2(threadData, _exp, tmp1, &_outComplexity);
if (out_outComplexity) { *out_outComplexity = mmc_mk_icon(_outComplexity); }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_complexityTraverse(threadData_t *threadData, modelica_metatype _exp, modelica_integer _complexity, modelica_integer *out_outComplexity)
{
modelica_metatype _outExp = NULL;
modelica_integer _outComplexity;
modelica_integer tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[1] = omc_Expression_traverseExpBottomUp(threadData, _exp, boxvar_Expression_complexityTraverse2, mmc_mk_integer(_complexity), &tmpMeta[0]);
_outExp = tmpMeta[1];
tmp1 = mmc_unbox_integer(tmpMeta[0]);
_outComplexity = tmp1;
_return: OMC_LABEL_UNUSED
if (out_outComplexity) { *out_outComplexity = _outComplexity; }
return _outExp;
}
modelica_metatype boxptr_Expression_complexityTraverse(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _complexity, modelica_metatype *out_outComplexity)
{
modelica_integer tmp1;
modelica_integer _outComplexity;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_complexity);
_outExp = omc_Expression_complexityTraverse(threadData, _exp, tmp1, &_outComplexity);
if (out_outComplexity) { *out_outComplexity = mmc_mk_icon(_outComplexity); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_isTailCall(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _isTail;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 8));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isTail = tmp1;
_return: OMC_LABEL_UNUSED
return _isTail;
}
modelica_metatype boxptr_Expression_isTailCall(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _isTail;
modelica_metatype out_isTail;
_isTail = omc_Expression_isTailCall(threadData, _exp);
out_isTail = mmc_mk_icon(_isTail);
return out_isTail;
}
DLLExport
modelica_string omc_Expression_simpleCrefName(threadData_t *threadData, modelica_metatype _exp)
{
modelica_string _name = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _exp;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,3) == 0) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (!listEmpty(tmpMeta[3])) MMC_THROW_INTERNAL();
_name = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _name;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseReductionIterators(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fiters, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Farg, modelica_metatype *out_arg)
{
modelica_metatype _iters = NULL;
modelica_metatype _arg = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_iters = __omcQ_24in_5Fiters;
_arg = __omcQ_24in_5Farg;
{
modelica_metatype tmp4_1;
tmp4_1 = _iters;
{
modelica_metatype _iter = NULL;
modelica_metatype _iter1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _iters1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0+0] = _iters;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_iter = tmpMeta[2];
_rest = tmpMeta[3];
_iter1 = omc_Expression_traverseReductionIterator(threadData, _iter, ((modelica_fnptr) _func), _arg ,&_arg);
_iters1 = omc_Expression_traverseReductionIterators(threadData, _rest, ((modelica_fnptr) _func), _arg ,&_arg);
tmp6 = (modelica_boolean)(referenceEq(_iter, _iter1) && referenceEq(_rest, _iters1));
if(tmp6)
{
tmpMeta[3] = _iters;
}
else
{
tmpMeta[2] = mmc_mk_cons(_iter1, _iters1);
tmpMeta[3] = tmpMeta[2];
}
_iters = tmpMeta[3];
tmpMeta[0+0] = _iters;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_iters = tmpMeta[0+0];
_arg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _iters;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseReductionIterator(threadData_t *threadData, modelica_metatype _iter, modelica_fnptr _func, modelica_metatype _iarg, modelica_metatype *out_outArg)
{
modelica_metatype _outIter = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _iter;
tmp4_2 = _iarg;
{
modelica_string _id = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _gexp = NULL;
modelica_metatype _gexp1 = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _arg = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_id = tmpMeta[2];
_exp = tmpMeta[3];
_gexp = tmpMeta[4];
_ty = tmpMeta[5];
_arg = tmp4_2;
_exp1 = omc_Expression_traverseExpBottomUp(threadData, _exp, ((modelica_fnptr) _func), _arg ,&_arg);
_gexp1 = omc_Expression_traverseExpOpt(threadData, _gexp, ((modelica_fnptr) _func), _arg ,&_arg);
tmp6 = (modelica_boolean)(referenceEq(_exp, _exp1) && referenceEq(_gexp, _gexp1));
if(tmp6)
{
tmpMeta[3] = _iter;
}
else
{
tmpMeta[2] = mmc_mk_box5(3, &DAE_ReductionIterator_REDUCTIONITER__desc, _id, _exp1, _gexp1, _ty);
tmpMeta[3] = tmpMeta[2];
}
_outIter = tmpMeta[3];
tmpMeta[0+0] = _outIter;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIter = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outIter;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseReductionIteratorsTopDown(threadData_t *threadData, modelica_metatype _inIters, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outIters = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inIters;
tmp4_2 = _inArg;
{
modelica_metatype _arg = NULL;
modelica_metatype _iter = NULL;
modelica_metatype _iters = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
_arg = tmp4_2;
tmpMeta[0+0] = _inIters;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_iter = tmpMeta[2];
_iters = tmpMeta[3];
_arg = tmp4_2;
_iter = omc_Expression_traverseReductionIteratorTopDown(threadData, _iter, ((modelica_fnptr) _func), _arg ,&_arg);
_iters = omc_Expression_traverseReductionIteratorsTopDown(threadData, _iters, ((modelica_fnptr) _func), _arg ,&_arg);
tmpMeta[2] = mmc_mk_cons(_iter, _iters);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIters = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outIters;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseReductionIteratorTopDown(threadData_t *threadData, modelica_metatype _iter, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outIter = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _iter;
tmp4_2 = _inArg;
{
modelica_string _id = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _gexp = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _arg = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_id = tmpMeta[2];
_exp = tmpMeta[3];
_gexp = tmpMeta[4];
_ty = tmpMeta[5];
_arg = tmp4_2;
_exp = omc_Expression_traverseExpTopDown(threadData, _exp, ((modelica_fnptr) _func), _arg ,&_arg);
_gexp = omc_Expression_traverseExpOptTopDown(threadData, _gexp, ((modelica_fnptr) _func), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box5(3, &DAE_ReductionIterator_REDUCTIONITER__desc, _id, _exp, _gexp, _ty);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIter = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outIter;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseReductionIteratorBidir(threadData_t *threadData, modelica_metatype _inIter, modelica_fnptr _inEnterFunc, modelica_fnptr _inExitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outIter = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inIter;
{
modelica_string _id = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _gexp = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _arg = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_id = tmpMeta[2];
_exp = tmpMeta[3];
_gexp = tmpMeta[4];
_ty = tmpMeta[5];
_exp = omc_Expression_traverseExpBidir(threadData, _exp, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
_gexp = omc_Expression_traverseExpOptBidir(threadData, _gexp, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box5(3, &DAE_ReductionIterator_REDUCTIONITER__desc, _id, _exp, _gexp, _ty);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIter = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outIter;
}
DLLExport
modelica_string omc_Expression_reductionIterName(threadData_t *threadData, modelica_metatype _iter)
{
modelica_string _name = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _iter;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _name;
}
DLLExport
modelica_metatype omc_Expression_makeImpureBuiltinCall(threadData_t *threadData, modelica_string _name, modelica_metatype _args, modelica_metatype _result_type)
{
modelica_metatype _call = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_call = omc_Expression_makeBuiltinCall(threadData, _name, _args, _result_type, 1);
_return: OMC_LABEL_UNUSED
return _call;
}
DLLExport
modelica_metatype omc_Expression_makePureBuiltinCall(threadData_t *threadData, modelica_string _name, modelica_metatype _args, modelica_metatype _result_type)
{
modelica_metatype _call = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_call = omc_Expression_makeBuiltinCall(threadData, _name, _args, _result_type, 0);
_return: OMC_LABEL_UNUSED
return _call;
}
DLLExport
modelica_metatype omc_Expression_makeBuiltinCall(threadData_t *threadData, modelica_string _name, modelica_metatype _args, modelica_metatype _result_type, modelica_boolean _isImpure)
{
modelica_metatype _call = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta[1] = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _result_type, mmc_mk_boolean(0), mmc_mk_boolean(1), mmc_mk_boolean(_isImpure), mmc_mk_boolean(0), _OMC_LIT35, _OMC_LIT36);
tmpMeta[2] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, tmpMeta[0], _args, tmpMeta[1]);
_call = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _call;
}
modelica_metatype boxptr_Expression_makeBuiltinCall(threadData_t *threadData, modelica_metatype _name, modelica_metatype _args, modelica_metatype _result_type, modelica_metatype _isImpure)
{
modelica_integer tmp1;
modelica_metatype _call = NULL;
tmp1 = mmc_unbox_integer(_isImpure);
_call = omc_Expression_makeBuiltinCall(threadData, _name, _args, _result_type, tmp1);
return _call;
}
DLLExport
modelica_metatype omc_Expression_makeCons(threadData_t *threadData, modelica_metatype _car, modelica_metatype _cdr)
{
modelica_metatype _exp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box3(32, &DAE_Exp_CONS__desc, _car, _cdr);
_exp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _exp;
}
DLLExport
modelica_boolean omc_Expression_isBuiltinFunctionReference(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],13,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp6) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isBuiltinFunctionReference(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isBuiltinFunctionReference(threadData, _exp);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_metatype omc_Expression_hasNoSideEffects(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _ib, modelica_boolean *out_ob)
{
modelica_metatype _outExp = NULL;
modelica_boolean _ob;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 16: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
goto tmp3_done;
}
case 36: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmpMeta[0+0] = _inExp;
tmp1_c1 = _ib;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_ob = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_ob) { *out_ob = _ob; }
return _outExp;
}
modelica_metatype boxptr_Expression_hasNoSideEffects(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _ib, modelica_metatype *out_ob)
{
modelica_integer tmp1;
modelica_boolean _ob;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_ib);
_outExp = omc_Expression_hasNoSideEffects(threadData, _inExp, tmp1, &_ob);
if (out_ob) { *out_ob = mmc_mk_icon(_ob); }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_subscriptContain2(threadData_t *threadData, modelica_integer _inInt, modelica_metatype _inExp2)
{
modelica_boolean _contained;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_integer tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inInt;
tmp4_2 = _inExp2;
{
modelica_boolean _b;
modelica_metatype _expl = NULL;
modelica_metatype _expl2 = NULL;
modelica_integer _i;
modelica_integer _j;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_2);
tmpMeta[1] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[2]);
_j = tmp6;
_i = tmp4_1;
if (!(_i == _j)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_2);
tmpMeta[1] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
_expl = tmpMeta[1];
_i = tmp4_1;
if (!omc_Expression_subscriptContain2(threadData, _i, _expl)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp7;
modelica_boolean tmp8;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_2);
tmpMeta[1] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],16,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_expl2 = tmpMeta[2];
_expl = tmpMeta[1];
_i = tmp4_1;
_b = omc_Expression_subscriptContain2(threadData, _i, _expl2);
tmp7 = (modelica_boolean)_b;
if(tmp7)
{
tmp8 = 1;
}
else
{
_inInt = _i;
_inExp2 = _expl;
goto _tailrecursive;
}
tmp1 = tmp8;
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_contained = tmp1;
_return: OMC_LABEL_UNUSED
return _contained;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_subscriptContain2(threadData_t *threadData, modelica_metatype _inInt, modelica_metatype _inExp2)
{
modelica_integer tmp1;
modelica_boolean _contained;
modelica_metatype out_contained;
tmp1 = mmc_unbox_integer(_inInt);
_contained = omc_Expression_subscriptContain2(threadData, tmp1, _inExp2);
out_contained = mmc_mk_icon(_contained);
return out_contained;
}
DLLExport
modelica_boolean omc_Expression_subscriptContain(threadData_t *threadData, modelica_metatype _issl1, modelica_metatype _issl2)
{
modelica_boolean _contained;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _issl1;
tmp4_2 = _issl2;
{
modelica_metatype _ss1 = NULL;
modelica_metatype _ss2 = NULL;
modelica_metatype _ssl1 = NULL;
modelica_metatype _ssl2 = NULL;
modelica_integer _i;
modelica_metatype _expl = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,0) == 0) goto tmp3_end;
_ssl1 = tmpMeta[1];
_ssl2 = tmpMeta[3];
_issl1 = _ssl1;
_issl2 = _ssl2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp3_end;
_ssl1 = tmpMeta[1];
_ssl2 = tmpMeta[3];
_issl1 = _ssl1;
_issl2 = _ssl2;
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
modelica_integer tmp6;
modelica_boolean tmp7;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmp4_2);
tmpMeta[5] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],16,3) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
_i = tmp6;
_ssl1 = tmpMeta[1];
_expl = tmpMeta[7];
_ssl2 = tmpMeta[5];
tmp7 = omc_Expression_subscriptContain2(threadData, _i, _expl);
if (1 != tmp7) goto goto_2;
_issl1 = _ssl1;
_issl2 = _ssl2;
goto _tailrecursive;
goto tmp3_done;
}
case 4: {
modelica_boolean tmp8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
_ss1 = tmpMeta[0];
_ssl1 = tmpMeta[1];
_ss2 = tmpMeta[2];
_ssl2 = tmpMeta[3];
tmpMeta[0] = mmc_mk_cons(_ss1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_cons(_ss2, MMC_REFSTRUCTLIT(mmc_nil));
tmp8 = omc_Expression_subscriptEqual(threadData, tmpMeta[0], tmpMeta[1]);
if (1 != tmp8) goto goto_2;
_issl1 = _ssl1;
_issl2 = _ssl2;
goto _tailrecursive;
goto tmp3_done;
}
case 5: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_contained = tmp1;
_return: OMC_LABEL_UNUSED
return _contained;
}
modelica_metatype boxptr_Expression_subscriptContain(threadData_t *threadData, modelica_metatype _issl1, modelica_metatype _issl2)
{
modelica_boolean _contained;
modelica_metatype out_contained;
_contained = omc_Expression_subscriptContain(threadData, _issl1, _issl2);
out_contained = mmc_mk_icon(_contained);
return out_contained;
}
DLLExport
modelica_boolean omc_Expression_isValidSubscript(threadData_t *threadData, modelica_metatype _inSub)
{
modelica_boolean _isValid;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inSub;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 8: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isValid = tmp1;
_return: OMC_LABEL_UNUSED
return _isValid;
}
modelica_metatype boxptr_Expression_isValidSubscript(threadData_t *threadData, modelica_metatype _inSub)
{
modelica_boolean _isValid;
modelica_metatype out_isValid;
_isValid = omc_Expression_isValidSubscript(threadData, _inSub);
out_isValid = mmc_mk_icon(_isValid);
return out_isValid;
}
DLLExport
modelica_boolean omc_Expression_subscriptConstants(threadData_t *threadData, modelica_metatype _inSubs)
{
modelica_boolean _areConstant;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_areConstant = 1;
{
modelica_metatype _sub;
for (tmpMeta[0] = _inSubs; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_sub = MMC_CAR(tmpMeta[0]);
{
modelica_metatype tmp4_1;
tmp4_1 = _sub;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_areConstant = tmp1;
if((!_areConstant))
{
goto _return;
}
}
}
_return: OMC_LABEL_UNUSED
return _areConstant;
}
modelica_metatype boxptr_Expression_subscriptConstants(threadData_t *threadData, modelica_metatype _inSubs)
{
modelica_boolean _areConstant;
modelica_metatype out_areConstant;
_areConstant = omc_Expression_subscriptConstants(threadData, _inSubs);
out_areConstant = mmc_mk_icon(_areConstant);
return out_areConstant;
}
DLLExport
modelica_boolean omc_Expression_subscriptEqual(threadData_t *threadData, modelica_metatype _inSubscriptLst1, modelica_metatype _inSubscriptLst2)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inSubscriptLst1;
tmp4_2 = _inSubscriptLst2;
{
modelica_metatype _xs1 = NULL;
modelica_metatype _xs2 = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,0) == 0) goto tmp3_end;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,0) == 0) goto tmp3_end;
_xs1 = tmpMeta[1];
_xs2 = tmpMeta[3];
_inSubscriptLst1 = _xs1;
_inSubscriptLst2 = _xs2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmp4_2);
tmpMeta[4] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_e1 = tmpMeta[2];
_xs1 = tmpMeta[1];
_e2 = tmpMeta[5];
_xs2 = tmpMeta[4];
tmp6 = (modelica_boolean)omc_Expression_expEqual(threadData, _e1, _e2);
if(tmp6)
{
_inSubscriptLst1 = _xs1;
_inSubscriptLst2 = _xs2;
goto _tailrecursive;
}
else
{
tmp7 = 0;
}
tmp1 = tmp7;
goto tmp3_done;
}
case 3: {
modelica_boolean tmp8;
modelica_boolean tmp9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmp4_2);
tmpMeta[4] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_e1 = tmpMeta[2];
_xs1 = tmpMeta[1];
_e2 = tmpMeta[5];
_xs2 = tmpMeta[4];
tmp8 = (modelica_boolean)omc_Expression_expEqual(threadData, _e1, _e2);
if(tmp8)
{
_inSubscriptLst1 = _xs1;
_inSubscriptLst2 = _xs2;
goto _tailrecursive;
}
else
{
tmp9 = 0;
}
tmp1 = tmp9;
goto tmp3_done;
}
case 4: {
modelica_boolean tmp10;
modelica_boolean tmp11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmp4_2);
tmpMeta[4] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_e1 = tmpMeta[2];
_xs1 = tmpMeta[1];
_e2 = tmpMeta[5];
_xs2 = tmpMeta[4];
tmp10 = (modelica_boolean)omc_Expression_expEqual(threadData, _e1, _e2);
if(tmp10)
{
_inSubscriptLst1 = _xs1;
_inSubscriptLst2 = _xs2;
goto _tailrecursive;
}
else
{
tmp11 = 0;
}
tmp1 = tmp11;
goto tmp3_done;
}
case 5: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_subscriptEqual(threadData_t *threadData, modelica_metatype _inSubscriptLst1, modelica_metatype _inSubscriptLst2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_subscriptEqual(threadData, _inSubscriptLst1, _inSubscriptLst2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_hasUnknownDims(threadData_t *threadData, modelica_metatype _dims)
{
modelica_boolean _hasUnkown;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_hasUnkown = omc_List_mapBoolOr(threadData, _dims, boxvar_Expression_dimensionUnknown);
_return: OMC_LABEL_UNUSED
return _hasUnkown;
}
modelica_metatype boxptr_Expression_hasUnknownDims(threadData_t *threadData, modelica_metatype _dims)
{
modelica_boolean _hasUnkown;
modelica_metatype out_hasUnkown;
_hasUnkown = omc_Expression_hasUnknownDims(threadData, _dims);
out_hasUnkown = mmc_mk_icon(_hasUnkown);
return out_hasUnkown;
}
DLLExport
modelica_boolean omc_Expression_dimensionUnknown(threadData_t *threadData, modelica_metatype _inDimension)
{
modelica_boolean _outUnknown;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inDimension;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outUnknown = tmp1;
_return: OMC_LABEL_UNUSED
return _outUnknown;
}
modelica_metatype boxptr_Expression_dimensionUnknown(threadData_t *threadData, modelica_metatype _inDimension)
{
modelica_boolean _outUnknown;
modelica_metatype out_outUnknown;
_outUnknown = omc_Expression_dimensionUnknown(threadData, _inDimension);
out_outUnknown = mmc_mk_icon(_outUnknown);
return out_outUnknown;
}
DLLExport
modelica_boolean omc_Expression_dimensionUnknownOrExp(threadData_t *threadData, modelica_metatype _dim)
{
modelica_boolean _known;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _dim;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 7: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_known = tmp1;
_return: OMC_LABEL_UNUSED
return _known;
}
modelica_metatype boxptr_Expression_dimensionUnknownOrExp(threadData_t *threadData, modelica_metatype _dim)
{
modelica_boolean _known;
modelica_metatype out_known;
_known = omc_Expression_dimensionUnknownOrExp(threadData, _dim);
out_known = mmc_mk_icon(_known);
return out_known;
}
DLLExport
modelica_boolean omc_Expression_dimensionsKnownAndNonZero(threadData_t *threadData, modelica_metatype _dims)
{
modelica_boolean _allKnown;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_allKnown = omc_List_mapBoolAnd(threadData, _dims, boxvar_Expression_dimensionKnownAndNonZero);
_return: OMC_LABEL_UNUSED
return _allKnown;
}
modelica_metatype boxptr_Expression_dimensionsKnownAndNonZero(threadData_t *threadData, modelica_metatype _dims)
{
modelica_boolean _allKnown;
modelica_metatype out_allKnown;
_allKnown = omc_Expression_dimensionsKnownAndNonZero(threadData, _dims);
out_allKnown = mmc_mk_icon(_allKnown);
return out_allKnown;
}
DLLExport
modelica_boolean omc_Expression_dimensionKnownAndNonZero(threadData_t *threadData, modelica_metatype _dim)
{
modelica_boolean _known;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _dim;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp6) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta[0]);
if (0 != tmp7) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 2: {
tmp1 = omc_Expression_dimensionKnown(threadData, _dim);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_known = tmp1;
_return: OMC_LABEL_UNUSED
return _known;
}
modelica_metatype boxptr_Expression_dimensionKnownAndNonZero(threadData_t *threadData, modelica_metatype _dim)
{
modelica_boolean _known;
modelica_metatype out_known;
_known = omc_Expression_dimensionKnownAndNonZero(threadData, _dim);
out_known = mmc_mk_icon(_known);
return out_known;
}
DLLExport
modelica_boolean omc_Expression_dimensionKnown(threadData_t *threadData, modelica_metatype _dim)
{
modelica_boolean _known;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _dim;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_known = tmp1;
_return: OMC_LABEL_UNUSED
return _known;
}
modelica_metatype boxptr_Expression_dimensionKnown(threadData_t *threadData, modelica_metatype _dim)
{
modelica_boolean _known;
modelica_metatype out_known;
_known = omc_Expression_dimensionKnown(threadData, _dim);
out_known = mmc_mk_icon(_known);
return out_known;
}
DLLExport
modelica_boolean omc_Expression_dimensionsKnownAndEqual(threadData_t *threadData, modelica_metatype _dim1, modelica_metatype _dim2)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _dim1;
tmp4_2 = _dim2;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,4,0) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 2: {
tmp1 = omc_Expression_expEqual(threadData, omc_Expression_dimensionSizeExp(threadData, _dim1), omc_Expression_dimensionSizeExp(threadData, _dim2));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_dimensionsKnownAndEqual(threadData_t *threadData, modelica_metatype _dim1, modelica_metatype _dim2)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_dimensionsKnownAndEqual(threadData, _dim1, _dim2);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_dimensionsEqualAllowZero(threadData_t *threadData, modelica_metatype _dim1, modelica_metatype _dim2)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _dim1;
tmp4_2 = _dim2;
{
modelica_integer _d1;
modelica_integer _d2;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,4,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
_d1 = omc_Expression_dimensionSize(threadData, _dim1);
_d2 = omc_Expression_dimensionSize(threadData, _dim2);
tmp1 = ((_d1 == _d2) || (((_d1 == ((modelica_integer) 0)) && (_d2 != ((modelica_integer) 0))) || ((_d2 == ((modelica_integer) 0)) && (_d1 != ((modelica_integer) 0)))));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_dimensionsEqualAllowZero(threadData_t *threadData, modelica_metatype _dim1, modelica_metatype _dim2)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_dimensionsEqualAllowZero(threadData, _dim1, _dim2);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_dimsEqualAllowZero(threadData_t *threadData, modelica_metatype _dims1, modelica_metatype _dims2)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _dims1;
tmp4_2 = _dims2;
{
modelica_metatype _d1 = NULL;
modelica_metatype _d2 = NULL;
modelica_metatype _dl1 = NULL;
modelica_metatype _dl2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
_d1 = tmpMeta[0];
_dl1 = tmpMeta[1];
_d2 = tmpMeta[2];
_dl2 = tmpMeta[3];
if (!omc_Expression_dimensionsEqualAllowZero(threadData, _d1, _d2)) goto tmp3_end;
_dims1 = _dl1;
_dims2 = _dl2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_dimsEqualAllowZero(threadData_t *threadData, modelica_metatype _dims1, modelica_metatype _dims2)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_dimsEqualAllowZero(threadData, _dims1, _dims2);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_dimsEqual(threadData_t *threadData, modelica_metatype _dims1, modelica_metatype _dims2)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _dims1;
tmp4_2 = _dims2;
{
modelica_metatype _d1 = NULL;
modelica_metatype _d2 = NULL;
modelica_metatype _dl1 = NULL;
modelica_metatype _dl2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
_d1 = tmpMeta[0];
_dl1 = tmpMeta[1];
_d2 = tmpMeta[2];
_dl2 = tmpMeta[3];
if (!omc_Expression_dimensionsEqual(threadData, _d1, _d2)) goto tmp3_end;
_dims1 = _dl1;
_dims2 = _dl2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_dimsEqual(threadData_t *threadData, modelica_metatype _dims1, modelica_metatype _dims2)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_dimsEqual(threadData, _dims1, _dims2);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_dimensionsEqual(threadData_t *threadData, modelica_metatype _dim1, modelica_metatype _dim2)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _dim1;
tmp4_2 = _dim2;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,4,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = (omc_Expression_dimensionSize(threadData, _dim1) == omc_Expression_dimensionSize(threadData, _dim2));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_dimensionsEqual(threadData_t *threadData, modelica_metatype _dim1, modelica_metatype _dim2)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_dimensionsEqual(threadData, _dim1, _dim2);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isRealType(threadData_t *threadData, modelica_metatype _inType)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inType;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isRealType(threadData_t *threadData, modelica_metatype _inType)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isRealType(threadData, _inType);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_Expression_isNotComplex(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
modelica_metatype _e2 = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 16: {
tmp1 = 0;
goto tmp3_done;
}
case 17: {
tmp1 = 0;
goto tmp3_done;
}
case 19: {
tmp1 = 0;
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e2 = tmpMeta[0];
_e = _e2;
goto _tailrecursive;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isNotComplex(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isNotComplex(threadData, _e);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_Expression_isRecordType(threadData_t *threadData, modelica_metatype _inType)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inType;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isRecordType(threadData_t *threadData, modelica_metatype _inType)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isRecordType(threadData, _inType);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_Expression_isArrayType(threadData_t *threadData, modelica_metatype _inType)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inType;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isArrayType(threadData_t *threadData, modelica_metatype _inType)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isArrayType(threadData, _inType);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_Expression_arrayContainWholeDimension(threadData_t *threadData, modelica_metatype _inDim)
{
modelica_boolean _wholedim;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inDim;
{
modelica_metatype _rest_dims = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_rest_dims = tmpMeta[1];
_inDim = _rest_dims;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_wholedim = tmp1;
_return: OMC_LABEL_UNUSED
return _wholedim;
}
modelica_metatype boxptr_Expression_arrayContainWholeDimension(threadData_t *threadData, modelica_metatype _inDim)
{
modelica_boolean _wholedim;
modelica_metatype out_wholedim;
_wholedim = omc_Expression_arrayContainWholeDimension(threadData, _inDim);
out_wholedim = mmc_mk_icon(_wholedim);
return out_wholedim;
}
DLLExport
modelica_boolean omc_Expression_arrayContainZeroDimension(threadData_t *threadData, modelica_metatype _inDimensions)
{
modelica_boolean _outContainZeroDim;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inDimensions;
{
modelica_metatype _rest_dims = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[2]);
if (0 != tmp6) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_rest_dims = tmpMeta[1];
_inDimensions = _rest_dims;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outContainZeroDim = tmp1;
_return: OMC_LABEL_UNUSED
return _outContainZeroDim;
}
modelica_metatype boxptr_Expression_arrayContainZeroDimension(threadData_t *threadData, modelica_metatype _inDimensions)
{
modelica_boolean _outContainZeroDim;
modelica_metatype out_outContainZeroDim;
_outContainZeroDim = omc_Expression_arrayContainZeroDimension(threadData, _inDimensions);
out_outContainZeroDim = mmc_mk_icon(_outContainZeroDim);
return out_outContainZeroDim;
}
DLLExport
modelica_integer omc_Expression_operatorCompare(threadData_t *threadData, modelica_metatype _inOperator1, modelica_metatype _inOperator2)
{
modelica_integer _comp;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inOperator1;
tmp4_2 = _inOperator2;
{
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,31,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p1 = tmpMeta[0];
_p2 = tmpMeta[1];
tmp1 = omc_AbsynUtil_pathCompare(threadData, _p1, _p2);
goto tmp3_done;
}
case 1: {
tmp1 = omc_Util_intCompare(threadData, valueConstructor(_inOperator1), valueConstructor(_inOperator2));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_comp = tmp1;
_return: OMC_LABEL_UNUSED
return _comp;
}
modelica_metatype boxptr_Expression_operatorCompare(threadData_t *threadData, modelica_metatype _inOperator1, modelica_metatype _inOperator2)
{
modelica_integer _comp;
modelica_metatype out_comp;
_comp = omc_Expression_operatorCompare(threadData, _inOperator1, _inOperator2);
out_comp = mmc_mk_icon(_comp);
return out_comp;
}
DLLExport
modelica_boolean omc_Expression_operatorEqual(threadData_t *threadData, modelica_metatype _inOperator1, modelica_metatype _inOperator2)
{
modelica_boolean _outBoolean;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outBoolean = (((modelica_integer) 0) == omc_Expression_operatorCompare(threadData, _inOperator1, _inOperator2));
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_operatorEqual(threadData_t *threadData, modelica_metatype _inOperator1, modelica_metatype _inOperator2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_operatorEqual(threadData, _inOperator1, _inOperator2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isExpIfExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isExpIfExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isExpIfExp(threadData, _e);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isExpCrefOrIfExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 9: {
tmp1 = 1;
goto tmp3_done;
}
case 15: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isExpCrefOrIfExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isExpCrefOrIfExp(threadData, _e);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_containsExp(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outBoolean;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outBoolean = omc_Expression_expContains(threadData, _inExp2, _inExp1);
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_containsExp(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_containsExp(threadData, _inExp1, _inExp2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_expContains(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inExp1;
tmp4_2 = _inExp2;
{
modelica_boolean _b1;
modelica_boolean _b2;
modelica_boolean _res;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _c = NULL;
modelica_metatype _t = NULL;
modelica_metatype _f = NULL;
modelica_integer _i1;
modelica_integer _i2;
modelica_metatype _expLst = NULL;
modelica_metatype _expl = NULL;
modelica_real _r1;
modelica_real _r2;
modelica_string _str = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 30; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
_i1 = tmp6;
_i2 = tmp7;
tmp1 = (_i1 == _i2);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp4 += 27;
tmp1 = 0;
goto tmp3_done;
}
case 2: {
modelica_real tmp8;
modelica_real tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp8 = mmc_unbox_real(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp9 = mmc_unbox_real(tmpMeta[1]);
_r1 = tmp8;
_r2 = tmp9;
tmp1 = (_r1 == _r2);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp4 += 25;
tmp1 = 0;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_s1 = tmpMeta[0];
_s2 = tmpMeta[1];
tmp1 = (stringEqual(_s1, _s2));
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmp4 += 23;
tmp1 = 0;
goto tmp3_done;
}
case 6: {
modelica_integer tmp10;
modelica_integer tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp10 = mmc_unbox_integer(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp11 = mmc_unbox_integer(tmpMeta[1]);
_b1 = tmp10;
_b2 = tmp11;
tmp1 = ((!_b1 && !_b2) || (_b1 && _b2));
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp4 += 21;
tmp1 = 1;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
tmp4 += 20;
tmp1 = 0;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_expLst = tmpMeta[0];
tmp4 += 19;
tmp1 = omc_List_map1BoolOr(threadData, _expLst, boxvar_Expression_expContains, _inExp2);
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_expl = tmpMeta[0];
tmp4 += 18;
tmp1 = omc_List_map1ListBoolOr(threadData, _expl, boxvar_Expression_expContains, _inExp2);
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_cr1 = tmpMeta[0];
_cr2 = tmpMeta[1];
_res = omc_ComponentReference_crefEqual(threadData, _cr1, _cr2);
if((!_res))
{
_expLst = omc_List_map(threadData, omc_ComponentReference_crefSubs(threadData, _cr1), boxvar_Expression_getSubscriptExp);
_res = omc_List_map1BoolOr(threadData, _expLst, boxvar_Expression_expContains, _inExp2);
}
tmp1 = _res;
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmp4 += 16;
tmp1 = 0;
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
tmp4 += 15;
_res = omc_Expression_expContains(threadData, _e1, _inExp2);
tmp1 = (_res?1:omc_Expression_expContains(threadData, _e2, _inExp2));
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
tmp4 += 14;
tmp1 = omc_Expression_expContains(threadData, _e, _inExp2);
goto tmp3_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
tmp4 += 13;
_res = omc_Expression_expContains(threadData, _e1, _inExp2);
tmp1 = (_res?1:omc_Expression_expContains(threadData, _e2, _inExp2));
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
tmp4 += 12;
tmp1 = omc_Expression_expContains(threadData, _e, _inExp2);
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
tmp4 += 11;
_res = omc_Expression_expContains(threadData, _e1, _inExp2);
tmp1 = (_res?1:omc_Expression_expContains(threadData, _e2, _inExp2));
goto tmp3_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_c = tmpMeta[0];
_t = tmpMeta[1];
_f = tmpMeta[2];
tmp4 += 10;
_res = omc_Expression_expContains(threadData, _c, _inExp2);
_res = (_res?1:omc_Expression_expContains(threadData, _t, _inExp2));
tmp1 = (_res?1:omc_Expression_expContains(threadData, _f, _inExp2));
goto tmp3_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],6,2) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (!listEmpty(tmpMeta[4])) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,13,3) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,1) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (3 != MMC_STRLEN(tmpMeta[7]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[7])) != 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[8])) goto tmp3_end;
tmpMeta[9] = MMC_CAR(tmpMeta[8]);
tmpMeta[10] = MMC_CDR(tmpMeta[8]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],6,2) == 0) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
if (!listEmpty(tmpMeta[10])) goto tmp3_end;
_cr1 = tmpMeta[5];
_cr2 = tmpMeta[11];
tmp4 += 3;
tmp1 = omc_ComponentReference_crefEqual(threadData, _cr1, _cr2);
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT64), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp4 += 1;
tmp1 = 0;
goto tmp3_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (8 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT65), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 22: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_expLst = tmpMeta[0];
tmp4 += 5;
tmp1 = omc_List_map1BoolOr(threadData, _expLst, boxvar_Expression_expContains, _inExp2);
goto tmp3_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
_expLst = tmpMeta[0];
tmp4 += 4;
tmp1 = omc_List_map1BoolOr(threadData, _expLst, boxvar_Expression_expContains, _inExp2);
goto tmp3_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[1];
tmp4 += 2;
tmp1 = omc_Expression_expContains(threadData, _e, _inExp2);
goto tmp3_done;
}
case 27: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_expLst = tmpMeta[1];
tmp4 += 1;
_res = omc_List_map1BoolOr(threadData, _expLst, boxvar_Expression_expContains, _inExp2);
tmp1 = (_res?1:omc_Expression_expContains(threadData, _e, _inExp2));
goto tmp3_done;
}
case 28: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
tmp1 = omc_Expression_expContains(threadData, _e, _inExp2);
goto tmp3_done;
}
case 29: {
modelica_boolean tmp12;
tmp12 = omc_Flags_isSet(threadData, _OMC_LIT60);
if (1 != tmp12) goto goto_2;
omc_Debug_trace(threadData, _OMC_LIT61);
_s1 = omc_ExpressionDump_printExpStr(threadData, _inExp1);
_s2 = omc_ExpressionDump_printExpStr(threadData, _inExp2);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT62, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT63, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil)))));
_str = stringAppendList(tmpMeta[0]);
omc_Debug_traceln(threadData, _str);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 30) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_expContains(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_expContains(threadData, _inExp1, _inExp2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_expStructuralEqualListLst(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp1;
tmp4_2 = _inExp2;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _es1 = NULL;
modelica_metatype _es2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
_e1 = tmpMeta[0];
_es1 = tmpMeta[1];
_e2 = tmpMeta[2];
_es2 = tmpMeta[3];
if (!omc_Expression_expStructuralEqualList(threadData, _e1, _e2)) goto tmp3_end;
_inExp1 = _es1;
_inExp2 = _es2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_expStructuralEqualListLst(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_expStructuralEqualListLst(threadData, _inExp1, _inExp2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_expStructuralEqualList(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp1;
tmp4_2 = _inExp2;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _es1 = NULL;
modelica_metatype _es2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
_e1 = tmpMeta[0];
_es1 = tmpMeta[1];
_e2 = tmpMeta[2];
_es2 = tmpMeta[3];
if (!omc_Expression_expStructuralEqual(threadData, _e1, _e2)) goto tmp3_end;
_inExp1 = _es1;
_inExp2 = _es2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_expStructuralEqualList(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_expStructuralEqualList(threadData, _inExp1, _inExp2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_expStructuralEqual(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp1;
tmp4_2 = _inExp2;
{
modelica_integer _i1;
modelica_integer _i2;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_boolean _b;
modelica_boolean _b1;
modelica_boolean _b2;
modelica_metatype _e11 = NULL;
modelica_metatype _e12 = NULL;
modelica_metatype _e21 = NULL;
modelica_metatype _e22 = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e13 = NULL;
modelica_metatype _e23 = NULL;
modelica_metatype _op1 = NULL;
modelica_metatype _op2 = NULL;
modelica_metatype _path1 = NULL;
modelica_metatype _path2 = NULL;
modelica_metatype _expl1 = NULL;
modelica_metatype _expl2 = NULL;
modelica_metatype _explstlst1 = NULL;
modelica_metatype _explstlst2 = NULL;
modelica_metatype _tp1 = NULL;
modelica_metatype _tp2 = NULL;
modelica_real _r1;
modelica_real _r2;
modelica_metatype _enum1 = NULL;
modelica_metatype _enum2 = NULL;
modelica_metatype _ae1 = NULL;
modelica_metatype _ae2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 41; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
_i1 = tmp6;
_i2 = tmp7;
tmp1 = (_i1 == _i2);
goto tmp3_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp8 = mmc_unbox_integer(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
_i2 = tmp8;
_i1 = tmp9;
_i1 = (-_i1);
tmp1 = (_i1 == _i2);
goto tmp3_done;
}
case 2: {
modelica_integer tmp10;
modelica_integer tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp10 = mmc_unbox_integer(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,8,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp11 = mmc_unbox_integer(tmpMeta[3]);
_i1 = tmp10;
_i2 = tmp11;
_i2 = (-_i2);
tmp1 = (_i1 == _i2);
goto tmp3_done;
}
case 3: {
modelica_real tmp12;
modelica_real tmp13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp12 = mmc_unbox_real(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp13 = mmc_unbox_real(tmpMeta[1]);
_r1 = tmp12;
_r2 = tmp13;
tmp1 = (_r1 == _r2);
goto tmp3_done;
}
case 4: {
modelica_real tmp14;
modelica_real tmp15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp14 = mmc_unbox_real(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp15 = mmc_unbox_real(tmpMeta[3]);
_r2 = tmp14;
_r1 = tmp15;
_r1 = (-_r1);
tmp1 = (_r1 == _r2);
goto tmp3_done;
}
case 5: {
modelica_real tmp16;
modelica_real tmp17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp16 = mmc_unbox_real(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,8,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp17 = mmc_unbox_real(tmpMeta[3]);
_r1 = tmp16;
_r2 = tmp17;
_r2 = (-_r2);
tmp1 = (_r1 == _r2);
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_s1 = tmpMeta[0];
_s2 = tmpMeta[1];
tmp1 = (stringEqual(_s1, _s2));
goto tmp3_done;
}
case 7: {
modelica_integer tmp18;
modelica_integer tmp19;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp18 = mmc_unbox_integer(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp19 = mmc_unbox_integer(tmpMeta[1]);
_b1 = tmp18;
_b2 = tmp19;
tmp1 = ((!_b1 && !_b2) || (_b1 && _b2));
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,5,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_enum1 = tmpMeta[0];
_enum2 = tmpMeta[1];
tmp1 = omc_AbsynUtil_pathEqual(threadData, _enum1, _enum2);
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 10: {
modelica_boolean tmp20;
modelica_boolean tmp21;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,7,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_e11 = tmpMeta[0];
_op1 = tmpMeta[1];
_e12 = tmpMeta[2];
_e21 = tmpMeta[3];
_op2 = tmpMeta[4];
_e22 = tmpMeta[5];
_b = omc_Expression_operatorEqual(threadData, _op1, _op2);
_b = (_b?omc_Expression_expStructuralEqual(threadData, _e11, _e21):_b);
tmp20 = (modelica_boolean)_b;
if(tmp20)
{
_inExp1 = _e12;
_inExp2 = _e22;
goto _tailrecursive;
}
else
{
tmp21 = _b;
}
tmp1 = tmp21;
goto tmp3_done;
}
case 11: {
modelica_boolean tmp22;
modelica_boolean tmp23;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,9,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_e11 = tmpMeta[0];
_op1 = tmpMeta[1];
_e12 = tmpMeta[2];
_e21 = tmpMeta[3];
_op2 = tmpMeta[4];
_e22 = tmpMeta[5];
_b = omc_Expression_operatorEqual(threadData, _op1, _op2);
_b = (_b?omc_Expression_expStructuralEqual(threadData, _e11, _e21):_b);
tmp22 = (modelica_boolean)_b;
if(tmp22)
{
_inExp1 = _e12;
_inExp2 = _e22;
goto _tailrecursive;
}
else
{
tmp23 = _b;
}
tmp1 = tmp23;
goto tmp3_done;
}
case 12: {
modelica_boolean tmp24;
modelica_boolean tmp25;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,8,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_op1 = tmpMeta[0];
_e1 = tmpMeta[1];
_op2 = tmpMeta[2];
_e2 = tmpMeta[3];
_b = omc_Expression_operatorEqual(threadData, _op1, _op2);
tmp24 = (modelica_boolean)_b;
if(tmp24)
{
_inExp1 = _e1;
_inExp2 = _e2;
goto _tailrecursive;
}
else
{
tmp25 = _b;
}
tmp1 = tmp25;
goto tmp3_done;
}
case 13: {
modelica_boolean tmp26;
modelica_boolean tmp27;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,10,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_op1 = tmpMeta[0];
_e1 = tmpMeta[1];
_op2 = tmpMeta[2];
_e2 = tmpMeta[3];
_b = omc_Expression_operatorEqual(threadData, _op1, _op2);
tmp26 = (modelica_boolean)_b;
if(tmp26)
{
_inExp1 = _e1;
_inExp2 = _e2;
goto _tailrecursive;
}
else
{
tmp27 = _b;
}
tmp1 = tmp27;
goto tmp3_done;
}
case 14: {
modelica_boolean tmp28;
modelica_boolean tmp29;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,11,5) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_e11 = tmpMeta[0];
_op1 = tmpMeta[1];
_e12 = tmpMeta[2];
_e21 = tmpMeta[3];
_op2 = tmpMeta[4];
_e22 = tmpMeta[5];
_b = omc_Expression_operatorEqual(threadData, _op1, _op2);
_b = (_b?omc_Expression_expStructuralEqual(threadData, _e11, _e21):_b);
tmp28 = (modelica_boolean)_b;
if(tmp28)
{
_inExp1 = _e12;
_inExp2 = _e22;
goto _tailrecursive;
}
else
{
tmp29 = _b;
}
tmp1 = tmp29;
goto tmp3_done;
}
case 15: {
modelica_boolean tmp30;
modelica_boolean tmp31;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,12,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_e11 = tmpMeta[0];
_e12 = tmpMeta[1];
_e13 = tmpMeta[2];
_e21 = tmpMeta[3];
_e22 = tmpMeta[4];
_e23 = tmpMeta[5];
_b = omc_Expression_expStructuralEqual(threadData, _e11, _e21);
_b = (_b?omc_Expression_expStructuralEqual(threadData, _e12, _e22):_b);
tmp30 = (modelica_boolean)_b;
if(tmp30)
{
_inExp1 = _e13;
_inExp2 = _e23;
goto _tailrecursive;
}
else
{
tmp31 = _b;
}
tmp1 = tmp31;
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,13,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_path1 = tmpMeta[0];
_expl1 = tmpMeta[1];
_path2 = tmpMeta[2];
_expl2 = tmpMeta[3];
_b = omc_AbsynUtil_pathEqual(threadData, _path1, _path2);
tmp1 = (_b?omc_Expression_expStructuralEqualList(threadData, _expl1, _expl2):_b);
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,14,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_path1 = tmpMeta[0];
_expl1 = tmpMeta[1];
_path2 = tmpMeta[2];
_expl2 = tmpMeta[3];
_b = omc_AbsynUtil_pathEqual(threadData, _path1, _path2);
tmp1 = (_b?omc_Expression_expStructuralEqualList(threadData, _expl1, _expl2):_b);
goto tmp3_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,15,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_path1 = tmpMeta[0];
_expl1 = tmpMeta[1];
_path2 = tmpMeta[2];
_expl2 = tmpMeta[3];
_b = omc_AbsynUtil_pathEqual(threadData, _path1, _path2);
tmp1 = (_b?omc_Expression_expStructuralEqualList(threadData, _expl1, _expl2):_b);
goto tmp3_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,16,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_tp1 = tmpMeta[0];
_expl1 = tmpMeta[1];
_tp2 = tmpMeta[2];
_expl2 = tmpMeta[3];
_b = valueEq(_tp1, _tp2);
tmp1 = (_b?omc_Expression_expStructuralEqualList(threadData, _expl1, _expl2):_b);
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,17,3) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_explstlst1 = tmpMeta[0];
_explstlst2 = tmpMeta[1];
tmp1 = omc_Expression_expStructuralEqualListLst(threadData, _explstlst1, _explstlst2);
goto tmp3_done;
}
case 21: {
modelica_boolean tmp32;
modelica_boolean tmp33;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,18,4) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
if (!optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
_e11 = tmpMeta[0];
_e13 = tmpMeta[2];
_e21 = tmpMeta[3];
_e23 = tmpMeta[5];
_b = omc_Expression_expStructuralEqual(threadData, _e11, _e21);
tmp32 = (modelica_boolean)_b;
if(tmp32)
{
_inExp1 = _e13;
_inExp2 = _e23;
goto _tailrecursive;
}
else
{
tmp33 = _b;
}
tmp1 = tmp33;
goto tmp3_done;
}
case 22: {
modelica_boolean tmp34;
modelica_boolean tmp35;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,18,4) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
if (optionNone(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
_e11 = tmpMeta[0];
_e12 = tmpMeta[2];
_e13 = tmpMeta[3];
_e21 = tmpMeta[4];
_e22 = tmpMeta[6];
_e23 = tmpMeta[7];
_b = omc_Expression_expStructuralEqual(threadData, _e11, _e21);
_b = (_b?omc_Expression_expStructuralEqual(threadData, _e12, _e22):_b);
tmp34 = (modelica_boolean)_b;
if(tmp34)
{
_inExp1 = _e13;
_inExp2 = _e23;
goto _tailrecursive;
}
else
{
tmp35 = _b;
}
tmp1 = tmp35;
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,19,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_expl1 = tmpMeta[0];
_expl2 = tmpMeta[1];
tmp1 = omc_Expression_expStructuralEqualList(threadData, _expl1, _expl2);
goto tmp3_done;
}
case 24: {
modelica_boolean tmp36;
modelica_boolean tmp37;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,20,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_tp1 = tmpMeta[0];
_e1 = tmpMeta[1];
_tp2 = tmpMeta[2];
_e2 = tmpMeta[3];
_b = valueEq(_tp1, _tp2);
tmp36 = (modelica_boolean)_b;
if(tmp36)
{
_inExp1 = _e1;
_inExp2 = _e2;
goto _tailrecursive;
}
else
{
tmp37 = _b;
}
tmp1 = tmp37;
goto tmp3_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,21,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_e1 = tmpMeta[0];
_ae1 = tmpMeta[1];
_ae2 = tmpMeta[2];
_b = omc_Expression_expStructuralEqual(threadData, _e1, _e1);
tmp1 = (_b?omc_Expression_expStructuralEqualList(threadData, _ae1, _ae2):_b);
goto tmp3_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!optionNone(tmpMeta[1])) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,24,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (!optionNone(tmpMeta[3])) goto tmp3_end;
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
_inExp1 = _e1;
_inExp2 = _e2;
goto _tailrecursive;
goto tmp3_done;
}
case 27: {
modelica_boolean tmp38;
modelica_boolean tmp39;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,24,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
_e1 = tmpMeta[0];
_e11 = tmpMeta[2];
_e2 = tmpMeta[3];
_e22 = tmpMeta[5];
_b = omc_Expression_expStructuralEqual(threadData, _e1, _e2);
tmp38 = (modelica_boolean)_b;
if(tmp38)
{
_inExp1 = _e11;
_inExp2 = _e22;
goto _tailrecursive;
}
else
{
tmp39 = _b;
}
tmp1 = tmp39;
goto tmp3_done;
}
case 28: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,25,2) == 0) goto tmp3_end;
omc_Debug_trace(threadData, _OMC_LIT66);
tmp1 = 0;
goto tmp3_done;
}
case 29: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,27,3) == 0) goto tmp3_end;
tmp1 = valueEq(_inExp1, _inExp2);
goto tmp3_done;
}
case 30: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,28,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_expl1 = tmpMeta[0];
_expl2 = tmpMeta[1];
tmp1 = omc_Expression_expStructuralEqualList(threadData, _expl1, _expl2);
goto tmp3_done;
}
case 31: {
modelica_boolean tmp40;
modelica_boolean tmp41;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,29,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_e11 = tmpMeta[0];
_e12 = tmpMeta[1];
_e21 = tmpMeta[2];
_e22 = tmpMeta[3];
_b = omc_Expression_expStructuralEqual(threadData, _e11, _e21);
tmp40 = (modelica_boolean)_b;
if(tmp40)
{
_inExp1 = _e12;
_inExp2 = _e22;
goto _tailrecursive;
}
else
{
tmp41 = _b;
}
tmp1 = tmp41;
goto tmp3_done;
}
case 32: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,30,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,30,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_expl1 = tmpMeta[0];
_expl2 = tmpMeta[1];
tmp1 = omc_Expression_expStructuralEqualList(threadData, _expl1, _expl2);
goto tmp3_done;
}
case 33: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!optionNone(tmpMeta[0])) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,31,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (!optionNone(tmpMeta[1])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 34: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,31,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
_inExp1 = _e1;
_inExp2 = _e2;
goto _tailrecursive;
goto tmp3_done;
}
case 35: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,32,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,32,5) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_path1 = tmpMeta[0];
_expl1 = tmpMeta[1];
_path2 = tmpMeta[2];
_expl2 = tmpMeta[3];
_b = omc_AbsynUtil_pathEqual(threadData, _path1, _path2);
tmp1 = (_b?omc_Expression_expStructuralEqualList(threadData, _expl1, _expl2):_b);
goto tmp3_done;
}
case 36: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,6) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,33,6) == 0) goto tmp3_end;
_e1 = tmp4_1;
_e2 = tmp4_2;
tmp1 = valueEq(_e1, _e2);
goto tmp3_done;
}
case 37: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,34,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,34,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
_inExp1 = _e1;
_inExp2 = _e2;
goto _tailrecursive;
goto tmp3_done;
}
case 38: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,35,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,35,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
_inExp1 = _e1;
_inExp2 = _e2;
goto _tailrecursive;
goto tmp3_done;
}
case 39: {
modelica_integer tmp42;
modelica_integer tmp43;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,36,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp42 = mmc_unbox_integer(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,36,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp43 = mmc_unbox_integer(tmpMeta[1]);
_i1 = tmp42;
_i2 = tmp43;
tmp1 = (_i1 == _i2);
goto tmp3_done;
}
case 40: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_expStructuralEqual(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_expStructuralEqual(threadData, _inExp1, _inExp2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_compareListList(threadData_t *threadData, modelica_metatype _inExpl1, modelica_metatype _inExpl2)
{
modelica_integer _comp;
modelica_metatype _expl2 = NULL;
modelica_metatype _rest_expl2 = NULL;
modelica_integer _len1;
modelica_integer _len2;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_rest_expl2 = _inExpl2;
_len1 = listLength(_inExpl1);
_len2 = listLength(_inExpl2);
_comp = omc_Util_intCompare(threadData, _len1, _len2);
if((_comp != ((modelica_integer) 0)))
{
goto _return;
}
{
modelica_metatype _expl1;
for (tmpMeta[0] = _inExpl1; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_expl1 = MMC_CAR(tmpMeta[0]);
tmpMeta[1] = _rest_expl2;
if (listEmpty(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_expl2 = tmpMeta[2];
_rest_expl2 = tmpMeta[3];
_comp = omc_Expression_compareList(threadData, _expl1, _expl2);
if((((modelica_integer) 0) != _comp))
{
goto _return;
}
}
}
_comp = ((modelica_integer) 0);
_return: OMC_LABEL_UNUSED
return _comp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_compareListList(threadData_t *threadData, modelica_metatype _inExpl1, modelica_metatype _inExpl2)
{
modelica_integer _comp;
modelica_metatype out_comp;
_comp = omc_Expression_compareListList(threadData, _inExpl1, _inExpl2);
out_comp = mmc_mk_icon(_comp);
return out_comp;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_compareList(threadData_t *threadData, modelica_metatype _inExpl1, modelica_metatype _inExpl2)
{
modelica_integer _comp;
modelica_integer _len1;
modelica_integer _len2;
modelica_metatype _e2 = NULL;
modelica_metatype _rest_expl2 = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_rest_expl2 = _inExpl2;
_len1 = listLength(_inExpl1);
_len2 = listLength(_inExpl2);
_comp = omc_Util_intCompare(threadData, _len1, _len2);
if((_comp != ((modelica_integer) 0)))
{
goto _return;
}
{
modelica_metatype _e1;
for (tmpMeta[0] = _inExpl1; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_e1 = MMC_CAR(tmpMeta[0]);
tmpMeta[1] = _rest_expl2;
if (listEmpty(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_e2 = tmpMeta[2];
_rest_expl2 = tmpMeta[3];
_comp = omc_Expression_compare(threadData, _e1, _e2);
if((((modelica_integer) 0) != _comp))
{
goto _return;
}
}
}
_comp = ((modelica_integer) 0);
_return: OMC_LABEL_UNUSED
return _comp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_compareList(threadData_t *threadData, modelica_metatype _inExpl1, modelica_metatype _inExpl2)
{
modelica_integer _comp;
modelica_metatype out_comp;
_comp = omc_Expression_compareList(threadData, _inExpl1, _inExpl2);
out_comp = mmc_mk_icon(_comp);
return out_comp;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_Expression_compareOpt(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_integer _comp;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp1;
tmp4_2 = _inExp2;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!optionNone(tmp4_1)) goto tmp3_end;
if (!optionNone(tmp4_2)) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 1: {
if (!optionNone(tmp4_1)) goto tmp3_end;
tmp1 = ((modelica_integer) -1);
goto tmp3_done;
}
case 2: {
if (!optionNone(tmp4_2)) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 3: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (optionNone(tmp4_2)) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
tmp1 = omc_Expression_compare(threadData, _e1, _e2);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_comp = tmp1;
_return: OMC_LABEL_UNUSED
return _comp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_compareOpt(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_integer _comp;
modelica_metatype out_comp;
_comp = omc_Expression_compareOpt(threadData, _inExp1, _inExp2);
out_comp = mmc_mk_icon(_comp);
return out_comp;
}
DLLExport
modelica_boolean omc_Expression_expEqual(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outEqual;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outEqual = (((modelica_integer) 0) == omc_Expression_compare(threadData, _inExp1, _inExp2));
_return: OMC_LABEL_UNUSED
return _outEqual;
}
modelica_metatype boxptr_Expression_expEqual(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_boolean _outEqual;
modelica_metatype out_outEqual;
_outEqual = omc_Expression_expEqual(threadData, _inExp1, _inExp2);
out_outEqual = mmc_mk_icon(_outEqual);
return out_outEqual;
}
DLLExport
modelica_boolean omc_Expression_isIntegerOrReal(threadData_t *threadData, modelica_metatype _tp)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _tp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 3: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isIntegerOrReal(threadData_t *threadData, modelica_metatype _tp)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isIntegerOrReal(threadData, _tp);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isOdd(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _even;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
modelica_integer _i;
modelica_real _r;
modelica_metatype _exp = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp5;
tmp1 = (modelica_integer_mod(_i, ((modelica_integer) 2)) == ((modelica_integer) 1));
goto tmp3_done;
}
case 4: {
modelica_real tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_real(tmpMeta[0]);
_r = tmp6;
tmp1 = (modelica_real_mod(_r, 2.0) == 1.0);
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_exp = tmpMeta[0];
_e = _exp;
goto _tailrecursive;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_even = tmp1;
_return: OMC_LABEL_UNUSED
return _even;
}
modelica_metatype boxptr_Expression_isOdd(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _even;
modelica_metatype out_even;
_even = omc_Expression_isOdd(threadData, _e);
out_even = mmc_mk_icon(_even);
return out_even;
}
DLLExport
modelica_boolean omc_Expression_isEven(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _even;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
modelica_integer _i;
modelica_real _r;
modelica_metatype _exp = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp5;
tmp1 = (modelica_integer_mod(_i, ((modelica_integer) 2)) == ((modelica_integer) 0));
goto tmp3_done;
}
case 4: {
modelica_real tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_real(tmpMeta[0]);
_r = tmp6;
tmp1 = (modelica_real_mod(_r, 2.0) == 0.0);
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_exp = tmpMeta[0];
_e = _exp;
goto _tailrecursive;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_even = tmp1;
_return: OMC_LABEL_UNUSED
return _even;
}
modelica_metatype boxptr_Expression_isEven(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _even;
modelica_metatype out_even;
_even = omc_Expression_isEven(threadData, _e);
out_even = mmc_mk_icon(_even);
return out_even;
}
DLLExport
modelica_boolean omc_Expression_expIsPositive(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _res;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = (omc_Expression_isPositiveOrZero(threadData, _e) && (!omc_Expression_isZero(threadData, _e)));
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_expIsPositive(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_expIsPositive(threadData, _e);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isScalarConst(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsScalar;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
case 8: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsScalar = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsScalar;
}
modelica_metatype boxptr_Expression_isScalarConst(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsScalar;
modelica_metatype out_outIsScalar;
_outIsScalar = omc_Expression_isScalarConst(threadData, _inExp);
out_outIsScalar = mmc_mk_icon(_outIsScalar);
return out_outIsScalar;
}
DLLExport
modelica_boolean omc_Expression_isRecord(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsRecord;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,4) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsRecord = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsRecord;
}
modelica_metatype boxptr_Expression_isRecord(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsRecord;
modelica_metatype out_outIsRecord;
_outIsRecord = omc_Expression_isRecord(threadData, _inExp);
out_outIsRecord = mmc_mk_icon(_outIsRecord);
return out_outIsRecord;
}
DLLExport
modelica_boolean omc_Expression_isTuple(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsTuple;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsTuple = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsTuple;
}
modelica_metatype boxptr_Expression_isTuple(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsTuple;
modelica_metatype out_outIsTuple;
_outIsTuple = omc_Expression_isTuple(threadData, _inExp);
out_outIsTuple = mmc_mk_icon(_outIsTuple);
return out_outIsTuple;
}
DLLExport
modelica_boolean omc_Expression_isCrefScalar(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _isScalar;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) goto tmp3_end;
_cr = omc_Expression_expCref(threadData, _inExp);
tmp1 = omc_ComponentReference_crefHasScalarSubscripts(threadData, _cr);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_isScalar = tmp1;
_return: OMC_LABEL_UNUSED
return _isScalar;
}
modelica_metatype boxptr_Expression_isCrefScalar(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _isScalar;
modelica_metatype out_isScalar;
_isScalar = omc_Expression_isCrefScalar(threadData, _inExp);
out_isScalar = mmc_mk_icon(_isScalar);
return out_isScalar;
}
DLLExport
modelica_boolean omc_Expression_isCrefArray(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsArray;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsArray = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsArray;
}
modelica_metatype boxptr_Expression_isCrefArray(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsArray;
modelica_metatype out_outIsArray;
_outIsArray = omc_Expression_isCrefArray(threadData, _inExp);
out_outIsArray = mmc_mk_icon(_outIsArray);
return out_outIsArray;
}
DLLExport
modelica_boolean omc_Expression_isNotCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsCref;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
tmp1 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsCref = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsCref;
}
modelica_metatype boxptr_Expression_isNotCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsCref;
modelica_metatype out_outIsCref;
_outIsCref = omc_Expression_isNotCref(threadData, _inExp);
out_outIsCref = mmc_mk_icon(_outIsCref);
return out_outIsCref;
}
DLLExport
modelica_boolean omc_Expression_isRecordCall(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _funcsIn)
{
modelica_boolean _outIsCall;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _path = NULL;
modelica_metatype _func = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
tmpMeta[0] = omc_DAE_AvlTreePathFunction_get(threadData, _funcsIn, _path);
if (optionNone(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_func = tmpMeta[1];
tmp1 = listEmpty(omc_DAEUtil_getFunctionElements(threadData, _func));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsCall = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsCall;
}
modelica_metatype boxptr_Expression_isRecordCall(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _funcsIn)
{
modelica_boolean _outIsCall;
modelica_metatype out_outIsCall;
_outIsCall = omc_Expression_isRecordCall(threadData, _inExp, _funcsIn);
out_outIsCall = mmc_mk_icon(_outIsCall);
return out_outIsCall;
}
DLLExport
modelica_boolean omc_Expression_isImpureCall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsPureCall;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outIsPureCall = (omc_Expression_isCall(threadData, _inExp) && omc_Expression_isImpure(threadData, _inExp));
_return: OMC_LABEL_UNUSED
return _outIsPureCall;
}
modelica_metatype boxptr_Expression_isImpureCall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsPureCall;
modelica_metatype out_outIsPureCall;
_outIsPureCall = omc_Expression_isImpureCall(threadData, _inExp);
out_outIsPureCall = mmc_mk_icon(_outIsPureCall);
return out_outIsPureCall;
}
DLLExport
modelica_boolean omc_Expression_isPureCall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsPureCall;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outIsPureCall = (omc_Expression_isCall(threadData, _inExp) && (!omc_Expression_isImpure(threadData, _inExp)));
_return: OMC_LABEL_UNUSED
return _outIsPureCall;
}
modelica_metatype boxptr_Expression_isPureCall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsPureCall;
modelica_metatype out_outIsPureCall;
_outIsPureCall = omc_Expression_isPureCall(threadData, _inExp);
out_outIsPureCall = mmc_mk_icon(_outIsPureCall);
return out_outIsPureCall;
}
DLLExport
modelica_boolean omc_Expression_isTSUB(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsCall;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsCall = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsCall;
}
modelica_metatype boxptr_Expression_isTSUB(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsCall;
modelica_metatype out_outIsCall;
_outIsCall = omc_Expression_isTSUB(threadData, _inExp);
out_outIsCall = mmc_mk_icon(_outIsCall);
return out_outIsCall;
}
DLLExport
modelica_boolean omc_Expression_isCall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsCall;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsCall = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsCall;
}
modelica_metatype boxptr_Expression_isCall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsCall;
modelica_metatype out_outIsCall;
_outIsCall = omc_Expression_isCall(threadData, _inExp);
out_outIsCall = mmc_mk_icon(_outIsCall);
return out_outIsCall;
}
DLLExport
modelica_boolean omc_Expression_isUnaryCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsCref;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsCref = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsCref;
}
modelica_metatype boxptr_Expression_isUnaryCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsCref;
modelica_metatype out_outIsCref;
_outIsCref = omc_Expression_isUnaryCref(threadData, _inExp);
out_outIsCref = mmc_mk_icon(_outIsCref);
return out_outIsCref;
}
DLLExport
modelica_boolean omc_Expression_isCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsCref;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsCref = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsCref;
}
modelica_metatype boxptr_Expression_isCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsCref;
modelica_metatype out_outIsCref;
_outIsCref = omc_Expression_isCref(threadData, _inExp);
out_outIsCref = mmc_mk_icon(_outIsCref);
return out_outIsCref;
}
DLLExport
modelica_boolean omc_Expression_isNegativeUnary(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
modelica_metatype boxptr_Expression_isNegativeUnary(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_Expression_isNegativeUnary(threadData, _inExp);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
DLLExport
modelica_boolean omc_Expression_isBinary(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
modelica_metatype boxptr_Expression_isBinary(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_Expression_isBinary(threadData, _inExp);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
DLLExport
modelica_boolean omc_Expression_isUnary(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
modelica_metatype boxptr_Expression_isUnary(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_Expression_isUnary(threadData, _inExp);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
DLLExport
modelica_boolean omc_Expression_isVector(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsVector;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (!listEmpty(tmpMeta[3])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsVector = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsVector;
}
modelica_metatype boxptr_Expression_isVector(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outIsVector;
modelica_metatype out_outIsVector;
_outIsVector = omc_Expression_isVector(threadData, _inExp);
out_outIsVector = mmc_mk_icon(_outIsVector);
return out_outIsVector;
}
DLLExport
modelica_boolean omc_Expression_isMatrix(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],17,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
modelica_metatype boxptr_Expression_isMatrix(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_Expression_isMatrix(threadData, _inExp);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
DLLExport
modelica_boolean omc_Expression_isMetaArray(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outB = omc_Types_isMetaArray(threadData, omc_Expression_typeof(threadData, _inExp));
_return: OMC_LABEL_UNUSED
return _outB;
}
modelica_metatype boxptr_Expression_isMetaArray(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_Expression_isMetaArray(threadData, _inExp);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
DLLExport
modelica_boolean omc_Expression_isArray(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],16,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
modelica_metatype boxptr_Expression_isArray(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_Expression_isArray(threadData, _inExp);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
DLLExport
modelica_boolean omc_Expression_expIntOrder(threadData_t *threadData, modelica_integer _expectedValue, modelica_metatype _integers)
{
modelica_boolean _ob;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_integer tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _expectedValue;
tmp4_2 = _integers;
{
modelica_metatype _expl = NULL;
modelica_integer _x1;
modelica_integer _x2;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_integer tmp6;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_2);
tmpMeta[1] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[2]);
_x2 = tmp6;
_expl = tmpMeta[1];
_x1 = tmp4_1;
if (!(_x1 == _x2)) goto tmp3_end;
_expectedValue = ((modelica_integer) 1) + _x1;
_integers = _expl;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_ob = tmp1;
_return: OMC_LABEL_UNUSED
return _ob;
}
modelica_metatype boxptr_Expression_expIntOrder(threadData_t *threadData, modelica_metatype _expectedValue, modelica_metatype _integers)
{
modelica_integer tmp1;
modelica_boolean _ob;
modelica_metatype out_ob;
tmp1 = mmc_unbox_integer(_expectedValue);
_ob = omc_Expression_expIntOrder(threadData, tmp1, _integers);
out_ob = mmc_mk_icon(_ob);
return out_ob;
}
DLLExport
modelica_boolean omc_Expression_containFunctioncall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _elst = NULL;
modelica_metatype _flatexplst = NULL;
modelica_metatype _explst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 27; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT64), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (8 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT65), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_elst = tmpMeta[0];
tmp1 = omc_List_mapBoolOr(threadData, _elst, boxvar_Expression_containFunctioncall);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e2 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e3 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e3)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_elst = tmpMeta[0];
tmp1 = omc_List_mapBoolOr(threadData, _elst, boxvar_Expression_containFunctioncall);
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_explst = tmpMeta[0];
_flatexplst = omc_List_flatten(threadData, _explst);
tmp1 = omc_List_mapBoolOr(threadData, _flatexplst, boxvar_Expression_containFunctioncall);
goto tmp3_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e2 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_e = tmpMeta[1];
if (!omc_Expression_containFunctioncall(threadData, _e)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_elst = tmpMeta[0];
tmp1 = omc_List_mapBoolOr(threadData, _elst, boxvar_Expression_containVectorFunctioncall);
goto tmp3_done;
}
case 22: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[0];
if (!omc_Expression_containFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_e2 = tmpMeta[1];
if (!omc_Expression_containFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 26: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_containFunctioncall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_containFunctioncall(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_containVectorFunctioncall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _elst = NULL;
modelica_metatype _flatexplst = NULL;
modelica_metatype _explst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 29; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT64), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (8 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT65), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (8 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT67), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (12 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT68), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_elst = tmpMeta[0];
tmp1 = omc_List_mapBoolOr(threadData, _elst, boxvar_Expression_containVectorFunctioncall);
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e2 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e3 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e3)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_elst = tmpMeta[0];
tmp1 = omc_List_mapBoolOr(threadData, _elst, boxvar_Expression_containVectorFunctioncall);
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_explst = tmpMeta[0];
_flatexplst = omc_List_flatten(threadData, _explst);
tmp1 = omc_List_mapBoolOr(threadData, _flatexplst, boxvar_Expression_containVectorFunctioncall);
goto tmp3_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 22: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e2 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_e = tmpMeta[1];
if (!omc_Expression_containVectorFunctioncall(threadData, _e)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_elst = tmpMeta[0];
tmp1 = omc_List_mapBoolOr(threadData, _elst, boxvar_Expression_containVectorFunctioncall);
goto tmp3_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[0];
if (!omc_Expression_containVectorFunctioncall(threadData, _e1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 27: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_e2 = tmpMeta[1];
if (!omc_Expression_containVectorFunctioncall(threadData, _e2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 28: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_containVectorFunctioncall(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_containVectorFunctioncall(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isLesseqOrLess(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 28: {
tmp1 = 1;
goto tmp3_done;
}
case 29: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isLesseqOrLess(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isLesseqOrLess(threadData, _op);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_Expression_isGreatereqOrLesseq(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 31: {
tmp1 = 1;
goto tmp3_done;
}
case 29: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isGreatereqOrLesseq(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isGreatereqOrLesseq(threadData, _op);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_Expression_isConstMinusOne(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_real _rval;
modelica_integer _ival;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
modelica_real tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp5 = mmc_unbox_real(tmpMeta[0]);
_rval = tmp5;
tmp1 = (_rval == -1.0);
goto tmp3_done;
}
case 3: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_ival = tmp6;
tmp1 = (_ival == ((modelica_integer) -1));
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isConstMinusOne(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConstMinusOne(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isConstOne(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_real _rval;
modelica_integer _ival;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
modelica_real tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp5 = mmc_unbox_real(tmpMeta[0]);
_rval = tmp5;
tmp1 = (_rval == 1.0);
goto tmp3_done;
}
case 3: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_ival = tmp6;
tmp1 = (_ival == ((modelica_integer) 1));
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isConstOne(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConstOne(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isConstTrue(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
if (1 != tmp6) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isConstTrue(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConstTrue(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isConstFalse(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
if (0 != tmp6) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isConstFalse(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConstFalse(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isConstZeroLength(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isConstZeroLength(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConstZeroLength(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isExpReal(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _re;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_re = omc_Expression_isReal(threadData, omc_Expression_typeof(threadData, _e));
_return: OMC_LABEL_UNUSED
return _re;
}
modelica_metatype boxptr_Expression_isExpReal(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _re;
modelica_metatype out_re;
_re = omc_Expression_isExpReal(threadData, _e);
out_re = mmc_mk_icon(_re);
return out_re;
}
DLLExport
modelica_boolean omc_Expression_isReal(threadData_t *threadData, modelica_metatype _it)
{
modelica_boolean _re;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _it;
{
modelica_metatype _t1 = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_t1 = tmpMeta[0];
_it = _t1;
goto _tailrecursive;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_re = tmp1;
_return: OMC_LABEL_UNUSED
return _re;
}
modelica_metatype boxptr_Expression_isReal(threadData_t *threadData, modelica_metatype _it)
{
modelica_boolean _re;
modelica_metatype out_re;
_re = omc_Expression_isReal(threadData, _it);
out_re = mmc_mk_icon(_re);
return out_re;
}
DLLExport
modelica_boolean omc_Expression_isInt(threadData_t *threadData, modelica_metatype _it)
{
modelica_boolean _re;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _it;
{
modelica_metatype _t1 = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_t1 = tmpMeta[0];
_it = _t1;
goto _tailrecursive;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_re = tmp1;
_return: OMC_LABEL_UNUSED
return _re;
}
modelica_metatype boxptr_Expression_isInt(threadData_t *threadData, modelica_metatype _it)
{
modelica_boolean _re;
modelica_metatype out_re;
_re = omc_Expression_isInt(threadData, _it);
out_re = mmc_mk_icon(_re);
return out_re;
}
DLLExport
modelica_boolean omc_Expression_isWholeDim(threadData_t *threadData, modelica_metatype _s)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _s;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_isWholeDim(threadData_t *threadData, modelica_metatype _s)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_isWholeDim(threadData, _s);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_Expression_typeBuiltin(threadData_t *threadData, modelica_metatype _inType)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inType;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
case 7: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_typeBuiltin(threadData_t *threadData, modelica_metatype _inType)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_typeBuiltin(threadData, _inType);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_equalTypesComplexVars(threadData_t *threadData, modelica_metatype _inVars1, modelica_metatype _inVars2)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inVars1;
tmp4_2 = _inVars2;
{
modelica_metatype _t1 = NULL;
modelica_metatype _t2 = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_metatype _vars1 = NULL;
modelica_metatype _vars2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmp4 += 1;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmp4_2);
tmpMeta[5] = MMC_CDR(tmp4_2);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_s1 = tmpMeta[2];
_t1 = tmpMeta[3];
_vars1 = tmpMeta[1];
_s2 = tmpMeta[6];
_t2 = tmpMeta[7];
_vars2 = tmpMeta[5];
tmp6 = (stringEqual(_s1, _s2));
if (1 != tmp6) goto goto_2;
tmp7 = omc_Expression_equalTypes(threadData, _t1, _t2);
if (1 != tmp7) goto goto_2;
tmp1 = omc_Expression_equalTypesComplexVars(threadData, _vars1, _vars2);
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_equalTypesComplexVars(threadData_t *threadData, modelica_metatype _inVars1, modelica_metatype _inVars2)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_equalTypesComplexVars(threadData, _inVars1, _inVars2);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_Expression_equalTypes(threadData_t *threadData, modelica_metatype _t1, modelica_metatype _t2)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _t1;
tmp4_2 = _t2;
{
modelica_metatype _vars1 = NULL;
modelica_metatype _vars2 = NULL;
modelica_metatype _ty1 = NULL;
modelica_metatype _ty2 = NULL;
modelica_metatype _ad1 = NULL;
modelica_metatype _ad2 = NULL;
modelica_metatype _li1 = NULL;
modelica_metatype _li2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 8; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmp4 += 6;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmp4 += 5;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmp4 += 4;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,1) == 0) goto tmp3_end;
tmp4 += 3;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,4,1) == 0) goto tmp3_end;
tmp4 += 2;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,9,3) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_vars1 = tmpMeta[0];
_vars2 = tmpMeta[1];
tmp4 += 1;
tmp1 = omc_Expression_equalTypesComplexVars(threadData, _vars1, _vars2);
goto tmp3_done;
}
case 6: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_ty1 = tmpMeta[0];
_ad1 = tmpMeta[1];
_ty2 = tmpMeta[2];
_ad2 = tmpMeta[3];
_li1 = omc_List_map(threadData, _ad1, boxvar_Expression_dimensionSize);
_li2 = omc_List_map(threadData, _ad2, boxvar_Expression_dimensionSize);
tmp6 = omc_List_isEqualOnTrue(threadData, _li1, _li2, boxvar_intEq);
if (1 != tmp6) goto goto_2;
tmp7 = omc_Expression_equalTypes(threadData, _ty1, _ty2);
if (1 != tmp7) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 7: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 8) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_equalTypes(threadData_t *threadData, modelica_metatype _t1, modelica_metatype _t2)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_equalTypes(threadData, _t1, _t2);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_Expression_isFunCall(threadData_t *threadData, modelica_metatype _iExp, modelica_string _name)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _iExp;
{
modelica_string _name_ = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name_ = tmpMeta[1];
tmp1 = (stringEqual(_name_, _name));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isFunCall(threadData_t *threadData, modelica_metatype _iExp, modelica_metatype _name)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isFunCall(threadData, _iExp, _name);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isPow(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isPow(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isPow(threadData, _op);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isMulorDivBinary(threadData_t *threadData, modelica_metatype _iExp)
{
modelica_boolean _res;
modelica_metatype _op = NULL;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _iExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
tmp1 = omc_Expression_isMulOrDiv(threadData, _op);
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isMulorDivBinary(threadData_t *threadData, modelica_metatype _iExp)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isMulorDivBinary(threadData, _iExp);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isDivBinary(threadData_t *threadData, modelica_metatype _iExp)
{
modelica_boolean _res;
modelica_metatype _op = NULL;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _iExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
tmp1 = omc_Expression_isDiv(threadData, _op);
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isDivBinary(threadData_t *threadData, modelica_metatype _iExp)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isDivBinary(threadData, _iExp);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isDiv(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 6: {
tmp1 = 1;
goto tmp3_done;
}
case 13: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isDiv(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isDiv(threadData, _op);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isMul(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 12: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isMul(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isMul(threadData, _op);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isMulOrDiv(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = (omc_Expression_isMul(threadData, _op) || omc_Expression_isDiv(threadData, _op));
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isMulOrDiv(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isMulOrDiv(threadData, _op);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isAddOrSubBinary(threadData_t *threadData, modelica_metatype _iExp)
{
modelica_boolean _res;
modelica_metatype _op = NULL;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _iExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[0];
tmp1 = omc_Expression_isAddOrSub(threadData, _op);
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isAddOrSubBinary(threadData_t *threadData, modelica_metatype _iExp)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isAddOrSubBinary(threadData, _iExp);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isSub(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 11: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isSub(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isSub(threadData, _op);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isAdd(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 10: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isAdd(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isAdd(threadData, _op);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isAddOrSub(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = (omc_Expression_isAdd(threadData, _op) || omc_Expression_isSub(threadData, _op));
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_isAddOrSub(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_isAddOrSub(threadData, _op);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_Expression_isEventTriggeringFunctionExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT69), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT70), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT71), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (4 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT72), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (5 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT73), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (7 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT74), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
modelica_metatype boxptr_Expression_isEventTriggeringFunctionExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_Expression_isEventTriggeringFunctionExp(threadData, _inExp);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
DLLExport
modelica_boolean omc_Expression_isRelation(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isRelation(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isRelation(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isNotConst(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _nb;
modelica_boolean _b;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = omc_Expression_isConst(threadData, _e);
_nb = (!_b);
_return: OMC_LABEL_UNUSED
return _nb;
}
modelica_metatype boxptr_Expression_isNotConst(threadData_t *threadData, modelica_metatype _e)
{
modelica_boolean _nb;
modelica_metatype out_nb;
_nb = omc_Expression_isNotConst(threadData, _e);
out_nb = mmc_mk_icon(_nb);
return out_nb;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isConstValueWorkListList(threadData_t *threadData, modelica_metatype _inExps)
{
modelica_boolean _outIsConst;
modelica_metatype _e = NULL;
modelica_metatype _exps = NULL;
modelica_boolean _b;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = 1;
_exps = _inExps;
while(1)
{
if(!(_b && (!listEmpty(_exps)))) break;
tmpMeta[0] = _exps;
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_e = tmpMeta[1];
_exps = tmpMeta[2];
_b = omc_Expression_isConstValueWorkList(threadData, _e);
}
_outIsConst = _b;
_return: OMC_LABEL_UNUSED
return _outIsConst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isConstValueWorkListList(threadData_t *threadData, modelica_metatype _inExps)
{
modelica_boolean _outIsConst;
modelica_metatype out_outIsConst;
_outIsConst = omc_Expression_isConstValueWorkListList(threadData, _inExps);
out_outIsConst = mmc_mk_icon(_outIsConst);
return out_outIsConst;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isConstValueWorkList(threadData_t *threadData, modelica_metatype _inExps)
{
modelica_boolean _outBoolean;
modelica_metatype _e = NULL;
modelica_metatype _exps = NULL;
modelica_boolean _b;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = 1;
_exps = _inExps;
while(1)
{
if(!(_b && (!listEmpty(_exps)))) break;
tmpMeta[0] = _exps;
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_e = tmpMeta[1];
_exps = tmpMeta[2];
_b = omc_Expression_isConstValueWork(threadData, _e);
}
_outBoolean = _b;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isConstValueWorkList(threadData_t *threadData, modelica_metatype _inExps)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConstValueWorkList(threadData, _inExps);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isConstWorkListList(threadData_t *threadData, modelica_metatype _inExps)
{
modelica_boolean _outIsConst;
modelica_metatype _e = NULL;
modelica_metatype _exps = NULL;
modelica_boolean _b;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = 1;
_exps = _inExps;
while(1)
{
if(!(_b && (!listEmpty(_exps)))) break;
tmpMeta[0] = _exps;
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_e = tmpMeta[1];
_exps = tmpMeta[2];
_b = omc_Expression_isConstWorkList(threadData, _e);
}
_outIsConst = _b;
_return: OMC_LABEL_UNUSED
return _outIsConst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isConstWorkListList(threadData_t *threadData, modelica_metatype _inExps)
{
modelica_boolean _outIsConst;
modelica_metatype out_outIsConst;
_outIsConst = omc_Expression_isConstWorkListList(threadData, _inExps);
out_outIsConst = mmc_mk_icon(_outIsConst);
return out_outIsConst;
}
DLLExport
modelica_boolean omc_Expression_isConstWorkList(threadData_t *threadData, modelica_metatype _inExps)
{
modelica_boolean _outBoolean;
modelica_metatype _e = NULL;
modelica_metatype _exps = NULL;
modelica_boolean _b;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = 1;
_exps = _inExps;
while(1)
{
if(!(_b && (!listEmpty(_exps)))) break;
tmpMeta[0] = _exps;
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_e = tmpMeta[1];
_exps = tmpMeta[2];
_b = omc_Expression_isConstWork(threadData, _e);
}
_outBoolean = _b;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isConstWorkList(threadData_t *threadData, modelica_metatype _inExps)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConstWorkList(threadData, _inExps);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isConstValue(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outBoolean = omc_Expression_isConstValueWork(threadData, _inExp);
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isConstValue(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConstValue(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isConstValueWork(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _ae = NULL;
modelica_metatype _matrix = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 8: {
tmp1 = 1;
goto tmp3_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_ae = tmpMeta[0];
tmp1 = omc_Expression_isConstValueWorkList(threadData, _ae);
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_matrix = tmpMeta[0];
tmp1 = omc_Expression_isConstValueWorkListList(threadData, _matrix);
goto tmp3_done;
}
case 17: {
tmp1 = 1;
goto tmp3_done;
}
case 35: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isConstValueWork(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConstValueWork(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Expression_isConstWork(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_boolean _res;
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _ae = NULL;
modelica_metatype _matrix = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 28; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 7: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
_res = omc_Expression_isConstWork(threadData, _e2);
tmp6 = (modelica_boolean)_res;
if(tmp6)
{
_inExp = _e1;
goto _tailrecursive;
}
else
{
tmp7 = 0;
}
tmp1 = tmp7;
goto tmp3_done;
}
case 8: {
modelica_boolean tmp8;
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e = tmpMeta[0];
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_res = omc_Expression_isConstWork(threadData, _e2);
if(_res)
{
_res = omc_Expression_isConstWork(threadData, _e1);
}
tmp8 = (modelica_boolean)_res;
if(tmp8)
{
_inExp = _e;
goto _tailrecursive;
}
else
{
tmp9 = 0;
}
tmp1 = tmp9;
goto tmp3_done;
}
case 9: {
modelica_boolean tmp10;
modelica_boolean tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
_res = omc_Expression_isConstWork(threadData, _e2);
tmp10 = (modelica_boolean)_res;
if(tmp10)
{
_inExp = _e1;
goto _tailrecursive;
}
else
{
tmp11 = 0;
}
tmp1 = tmp11;
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 11: {
modelica_boolean tmp12;
modelica_boolean tmp13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
_res = omc_Expression_isConstWork(threadData, _e2);
tmp12 = (modelica_boolean)_res;
if(tmp12)
{
_inExp = _e1;
goto _tailrecursive;
}
else
{
tmp13 = 0;
}
tmp1 = tmp13;
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_ae = tmpMeta[0];
tmp1 = omc_Expression_isConstWorkList(threadData, _ae);
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_matrix = tmpMeta[0];
tmp1 = omc_Expression_isConstWorkListList(threadData, _matrix);
goto tmp3_done;
}
case 14: {
modelica_boolean tmp14;
modelica_boolean tmp15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
_res = omc_Expression_isConstWork(threadData, _e2);
tmp14 = (modelica_boolean)_res;
if(tmp14)
{
_inExp = _e1;
goto _tailrecursive;
}
else
{
tmp15 = 0;
}
tmp1 = tmp15;
goto tmp3_done;
}
case 15: {
modelica_boolean tmp16;
modelica_boolean tmp17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e = tmpMeta[0];
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_res = omc_Expression_isConstWork(threadData, _e2);
if(_res)
{
_res = omc_Expression_isConstWork(threadData, _e1);
}
tmp16 = (modelica_boolean)_res;
if(tmp16)
{
_inExp = _e;
goto _tailrecursive;
}
else
{
tmp17 = 0;
}
tmp1 = tmp17;
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_ae = tmpMeta[0];
tmp1 = omc_Expression_isConstWorkList(threadData, _ae);
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_ae = tmpMeta[0];
tmp1 = omc_Expression_isConstWorkList(threadData, _ae);
goto tmp3_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_ae = tmpMeta[1];
_res = omc_Expression_isConstWork(threadData, _e);
tmp1 = (_res?omc_Expression_isConstWorkList(threadData, _ae):0);
goto tmp3_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!optionNone(tmpMeta[1])) goto tmp3_end;
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 21: {
modelica_boolean tmp18;
modelica_boolean tmp19;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
_res = omc_Expression_isConstWork(threadData, _e2);
tmp18 = (modelica_boolean)_res;
if(tmp18)
{
_inExp = _e1;
goto _tailrecursive;
}
else
{
tmp19 = 0;
}
tmp1 = tmp19;
goto tmp3_done;
}
case 22: {
modelica_integer tmp20;
modelica_integer tmp21;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmp20 = mmc_unbox_integer(tmpMeta[2]);
if (0 != tmp20) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmp21 = mmc_unbox_integer(tmpMeta[3]);
if (0 != tmp21) goto tmp3_end;
_ae = tmpMeta[0];
tmp1 = omc_Expression_isConstWorkList(threadData, _ae);
goto tmp3_done;
}
case 23: {
modelica_integer tmp22;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmp22 = mmc_unbox_integer(tmpMeta[3]);
if (1 != tmp22) goto tmp3_end;
_path = tmpMeta[0];
_ae = tmpMeta[1];
tmp1 = (listMember(omc_AbsynUtil_pathFirstIdent(threadData, _path), _OMC_LIT80)?0:omc_Expression_isConstWorkList(threadData, _ae));
goto tmp3_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_ae = tmpMeta[0];
tmp1 = omc_Expression_isConstWorkList(threadData, _ae);
goto tmp3_done;
}
case 25: {
modelica_boolean tmp23;
modelica_boolean tmp24;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (!listEmpty(tmpMeta[3])) goto tmp3_end;
_e1 = tmpMeta[0];
_e2 = tmpMeta[4];
_res = omc_Expression_isConstWork(threadData, _e2);
tmp23 = (modelica_boolean)_res;
if(tmp23)
{
_inExp = _e1;
goto _tailrecursive;
}
else
{
tmp24 = 0;
}
tmp1 = tmp24;
goto tmp3_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,34,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 27: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isConstWork(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConstWork(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_integer omc_Expression_getEvaluatedConstInteger(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_integer _val;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_integer _integer;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_integer = tmp6;
tmp1 = _integer;
goto tmp3_done;
}
case 1: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = omc_Expression_realExpIntLit(threadData, _inExp);
if (optionNone(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
_integer = tmp7;
tmp1 = _integer;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_val = tmp1;
_return: OMC_LABEL_UNUSED
return _val;
}
modelica_metatype boxptr_Expression_getEvaluatedConstInteger(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_integer _val;
modelica_metatype out_val;
_val = omc_Expression_getEvaluatedConstInteger(threadData, _inExp);
out_val = mmc_mk_icon(_val);
return out_val;
}
DLLExport
modelica_boolean omc_Expression_isEvaluatedConst(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 8: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isEvaluatedConst(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isEvaluatedConst(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isConst(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outBoolean = omc_Expression_isConstWork(threadData, _inExp);
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isConst(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isConst(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_containsRecordTypeWork(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inRec, modelica_boolean *out_cont, modelica_boolean *out_outRec)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_boolean _outRec;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _inExp;
_cont = 0;
_outRec = _inRec;
if((!_inRec))
{
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _ty = NULL;
modelica_metatype _expLst = NULL;
modelica_boolean _subRec;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,4) == 0) goto tmp3_end;
tmp4 += 1;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_expLst = tmpMeta[3];
_ty = tmpMeta[5];
_subRec = omc_Expression_isRecordType(threadData, _ty);
if((!_subRec))
{
{
modelica_metatype _exp;
for (tmpMeta[3] = _expLst; !listEmpty(tmpMeta[3]); tmpMeta[3]=MMC_CDR(tmpMeta[3]))
{
_exp = MMC_CAR(tmpMeta[3]);
_subRec = omc_Expression_containsRecordType(threadData, _exp);
if(_subRec)
{
break;
}
}
}
}
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_subRec);
tmp1_c2 = _subRec;
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = 1;
tmp1_c2 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outRec = tmp1_c2;
}
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outRec) { *out_outRec = _outRec; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_containsRecordTypeWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inRec, modelica_metatype *out_cont, modelica_metatype *out_outRec)
{
modelica_integer tmp1;
modelica_boolean _cont;
modelica_boolean _outRec;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inRec);
_outExp = omc_Expression_containsRecordTypeWork(threadData, _inExp, tmp1, &_cont, &_outRec);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
if (out_outRec) { *out_outRec = mmc_mk_icon(_outRec); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_containsRecordType(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _isRec;
modelica_integer tmp1;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_containsRecordTypeWork, mmc_mk_boolean(0), &tmpMeta[0]);
tmp1 = mmc_unbox_integer(tmpMeta[0]);
_isRec = tmp1;
_return: OMC_LABEL_UNUSED
return _isRec;
}
modelica_metatype boxptr_Expression_containsRecordType(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _isRec;
modelica_metatype out_isRec;
_isRec = omc_Expression_containsRecordType(threadData, _inExp);
out_isRec = mmc_mk_icon(_isRec);
return out_isRec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_isImpureWork(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _isImpure, modelica_boolean *out_cont, modelica_boolean *out_outImpure)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_boolean _outImpure;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _isImpure;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 14; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (1 != tmp4_2) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 1;
tmp1_c2 = 1;
goto tmp3_done;
}
case 1: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (1 != tmp6) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 2: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (5 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT81), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp7 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp7) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 3: {
modelica_integer tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (19 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT82), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp8 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp8) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 4: {
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (5 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT83), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp9 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp9) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 5: {
modelica_integer tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (7 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT75), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp10 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp10) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 6: {
modelica_integer tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (5 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT84), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp11 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp11) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 7: {
modelica_integer tmp12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (8 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT85), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp12 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp12) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 8: {
modelica_integer tmp13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (6 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT77), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp13 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp13) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 9: {
modelica_integer tmp14;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (6 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT86), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp14 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp14) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 10: {
modelica_integer tmp15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (15 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT87), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp15 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp15) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 11: {
modelica_integer tmp16;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (8 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT76), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp16 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp16) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 12: {
modelica_integer tmp17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (9 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT88), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp17 = mmc_unbox_integer(tmpMeta[6]);
if (1 != tmp17) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 13: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = 1;
tmp1_c2 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outImpure = tmp1_c2;
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outImpure) { *out_outImpure = _outImpure; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_isImpureWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _isImpure, modelica_metatype *out_cont, modelica_metatype *out_outImpure)
{
modelica_integer tmp1;
modelica_boolean _cont;
modelica_boolean _outImpure;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_isImpure);
_outExp = omc_Expression_isImpureWork(threadData, _inExp, tmp1, &_cont, &_outImpure);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
if (out_outImpure) { *out_outImpure = mmc_mk_icon(_outImpure); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_isImpure(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_integer tmp1;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outBoolean = omc_Expression_isConstWork(threadData, _inExp);
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_isImpureWork, mmc_mk_boolean(0), &tmpMeta[0]);
tmp1 = mmc_unbox_integer(tmpMeta[0]);
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isImpure(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isImpure(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isAtomic(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 9: {
tmp1 = 1;
goto tmp3_done;
}
case 16: {
tmp1 = 1;
goto tmp3_done;
}
case 3: {
tmp1 = (mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2)))) >= ((modelica_integer) 0));
goto tmp3_done;
}
case 4: {
tmp1 = (mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2)))) > 0.0);
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isAtomic(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isAtomic(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isHalf(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_real _rval;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_real tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_real(tmpMeta[0]);
_rval = tmp6;
tmp1 = (_rval == 0.5);
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isHalf(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isHalf(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isNegativeOrZero(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_integer _i;
modelica_real _r;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp6;
tmp1 = (_i <= ((modelica_integer) 0));
goto tmp3_done;
}
case 1: {
modelica_real tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_real(tmpMeta[0]);
_r = tmp7;
tmp1 = (_r <= 0.0);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[1];
tmp1 = omc_Expression_isPositiveOrZero(threadData, _e1);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[1];
if (!omc_Expression_isOdd(threadData, _e2)) goto tmp3_end;
_inExp = _e2;
goto _tailrecursive;
goto tmp3_done;
}
case 4: {
tmp1 = omc_Expression_isZero(threadData, _inExp);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isNegativeOrZero(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isNegativeOrZero(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isPositiveOrZero(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_boolean _b;
modelica_boolean _b1;
modelica_boolean _b2;
modelica_boolean _b3;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_integer _i;
modelica_real _r;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 13; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT89), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT8), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (4 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT90), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp6;
tmp1 = (_i >= ((modelica_integer) 0));
goto tmp3_done;
}
case 4: {
modelica_real tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_real(tmpMeta[0]);
_r = tmp7;
tmp1 = (_r >= 0.0);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
tmp1 = (omc_Expression_isPositiveOrZero(threadData, _e1) && omc_Expression_isPositiveOrZero(threadData, _e2));
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
tmp1 = (omc_Expression_isPositiveOrZero(threadData, _e1) && omc_Expression_isNegativeOrZero(threadData, _e2));
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
_b1 = (omc_Expression_isPositiveOrZero(threadData, _e1) && omc_Expression_isPositiveOrZero(threadData, _e2));
_b2 = (omc_Expression_isNegativeOrZero(threadData, _e1) && omc_Expression_isNegativeOrZero(threadData, _e2));
_b3 = omc_Expression_expEqual(threadData, _e1, _e2);
tmp1 = ((_b1 || _b2) || _b3);
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[0];
_e2 = tmpMeta[2];
_b1 = (omc_Expression_isPositiveOrZero(threadData, _e1) && omc_Expression_isPositiveOrZero(threadData, _e2));
_b2 = (omc_Expression_isNegativeOrZero(threadData, _e1) && omc_Expression_isNegativeOrZero(threadData, _e2));
tmp1 = (_b1 || _b2);
goto tmp3_done;
}
case 9: {
modelica_real tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp8 = mmc_unbox_real(tmpMeta[3]);
_e1 = tmpMeta[0];
_r = tmp8;
_i = ((modelica_integer)floor(_r));
_b1 = (_r == ((modelica_real)_i));
_b2 = (((modelica_integer) 0) == modelica_integer_mod(_i, ((modelica_integer) 2)));
_b3 = omc_Expression_isPositiveOrZero(threadData, _e1);
_b = (_b2 || _b3);
tmp1 = (_b1 && _b);
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[1];
tmp1 = omc_Expression_isEven(threadData, _e2);
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[1];
tmp1 = omc_Expression_isNegativeOrZero(threadData, _e1);
goto tmp3_done;
}
case 12: {
tmp1 = omc_Expression_isZero(threadData, _inExp);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isPositiveOrZero(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isPositiveOrZero(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isZeroOrAlmostZero(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _nominal)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _nominal;
{
modelica_integer _ival;
modelica_real _rval;
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _ae = NULL;
modelica_metatype _matrix = NULL;
modelica_real _rNom;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 10; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_ival = tmp6;
tmp1 = (_ival == ((modelica_integer) 0));
goto tmp3_done;
}
case 1: {
modelica_real tmp7;
modelica_real tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_real(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp8 = mmc_unbox_real(tmpMeta[1]);
_rval = tmp7;
_rNom = tmp8;
tmp1 = (fabs(_rval) < (1e-06) * (fabs(_rNom)));
goto tmp3_done;
}
case 2: {
modelica_real tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp9 = mmc_unbox_real(tmpMeta[0]);
_rval = tmp9;
tmp1 = (fabs(_rval) < 1e-06);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[1];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_ae = tmpMeta[0];
tmp1 = omc_List_map1AllValueBool(threadData, _ae, boxvar_Expression_isZeroOrAlmostZero, mmc_mk_boolean(1), _nominal);
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_matrix = tmpMeta[0];
tmp1 = omc_List_map1ListAllValueBool(threadData, _matrix, boxvar_Expression_isZeroOrAlmostZero, mmc_mk_boolean(1), _nominal);
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[1];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e = tmpMeta[0];
_e1 = tmpMeta[1];
tmp1 = (omc_Expression_isZeroOrAlmostZero(threadData, _e, _nominal) || omc_Expression_isZeroOrAlmostZero(threadData, _e1, _nominal));
goto tmp3_done;
}
case 9: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isZeroOrAlmostZero(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _nominal)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isZeroOrAlmostZero(threadData, _inExp, _nominal);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isZero(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_integer _ival;
modelica_real _rval;
modelica_metatype _e = NULL;
modelica_metatype _ae = NULL;
modelica_metatype _matrix = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 8; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_ival = tmp6;
tmp1 = (_ival == ((modelica_integer) 0));
goto tmp3_done;
}
case 1: {
modelica_real tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_real(tmpMeta[0]);
_rval = tmp7;
tmp1 = (_rval == 0.0);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[1];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_ae = tmpMeta[0];
tmp1 = omc_List_mapAllValueBool(threadData, _ae, boxvar_Expression_isZero, mmc_mk_boolean(1));
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_matrix = tmpMeta[0];
tmp1 = omc_List_mapListAllValueBool(threadData, _matrix, boxvar_Expression_isZero, mmc_mk_boolean(1));
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[1];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
case 7: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isZero(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isZero(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isOne(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_integer _ival;
modelica_real _rval;
modelica_metatype _e = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[0]);
_ival = tmp5;
tmp1 = (_ival == ((modelica_integer) 1));
goto tmp3_done;
}
case 4: {
modelica_real tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_real(tmpMeta[0]);
_rval = tmp6;
tmp1 = (_rval == 1.0);
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e = tmpMeta[0];
_inExp = _e;
goto _tailrecursive;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isOne(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isOne(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isReduction(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isReduction(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isReduction(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_isRange(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_Expression_isRange(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_Expression_isRange(threadData, _inExp);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_Expression_operatorDivOrMul(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_operatorDivOrMul(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_operatorDivOrMul(threadData, _op);
out_res = mmc_mk_icon(_res);
return out_res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpTopDownSubs(threadData_t *threadData, modelica_metatype _inSubscript, modelica_fnptr _rel, modelica_metatype _iarg, modelica_metatype *out_arg)
{
modelica_metatype _outSubscript = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _nsub = NULL;
modelica_boolean _allEq;
modelica_metatype _delst = NULL;
modelica_integer _nEq;
modelica_boolean tmp7;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_arg = _iarg;
_allEq = 1;
_nEq = ((modelica_integer) 0);
{
modelica_metatype _sub;
for (tmpMeta[0] = _inSubscript; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_sub = MMC_CAR(tmpMeta[0]);
{
modelica_metatype tmp3_1;
tmp3_1 = _sub;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
tmpMeta[1] = _sub;
goto tmp2_done;
}
case 4: {
modelica_boolean tmp4;
_exp = omc_Expression_traverseExpTopDown(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 2))), ((modelica_fnptr) _rel), _arg ,&_arg);
tmp4 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 2))), _exp);
if(tmp4)
{
tmpMeta[3] = _sub;
}
else
{
tmpMeta[2] = mmc_mk_box2(4, &DAE_Subscript_SLICE__desc, _exp);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[1] = tmpMeta[3];
goto tmp2_done;
}
case 5: {
modelica_boolean tmp5;
_exp = omc_Expression_traverseExpTopDown(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 2))), ((modelica_fnptr) _rel), _arg ,&_arg);
tmp5 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 2))), _exp);
if(tmp5)
{
tmpMeta[3] = _sub;
}
else
{
tmpMeta[2] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, _exp);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[1] = tmpMeta[3];
goto tmp2_done;
}
case 6: {
modelica_boolean tmp6;
_exp = omc_Expression_traverseExpTopDown(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 2))), ((modelica_fnptr) _rel), _arg ,&_arg);
tmp6 = (modelica_boolean)referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_sub), 2))), _exp);
if(tmp6)
{
tmpMeta[3] = _sub;
}
else
{
tmpMeta[2] = mmc_mk_box2(6, &DAE_Subscript_WHOLE__NONEXP__desc, _exp);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[1] = tmpMeta[3];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_nsub = tmpMeta[1];
if((_allEq?(!referenceEq(_nsub, _sub)):0))
{
_allEq = 0;
_delst = omc_DoubleEnded_empty(threadData, _nsub);
{
modelica_metatype _elt;
for (tmpMeta[1] = _inSubscript; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
if((_nEq < ((modelica_integer) 1)))
{
break;
}
omc_DoubleEnded_push__back(threadData, _delst, _elt);
_nEq = ((modelica_integer) -1) + _nEq;
}
}
}
if(_allEq)
{
_nEq = ((modelica_integer) 1) + _nEq;
}
else
{
omc_DoubleEnded_push__back(threadData, _delst, _nsub);
}
}
}
tmp7 = (modelica_boolean)_allEq;
if(tmp7)
{
tmpMeta[1] = _inSubscript;
}
else
{
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = omc_DoubleEnded_toListAndClear(threadData, _delst, tmpMeta[0]);
}
_outSubscript = tmpMeta[1];
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _outSubscript;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpBidirSubs(threadData_t *threadData, modelica_metatype _inSubscript, modelica_fnptr _inEnterFunc, modelica_fnptr _inExitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outSubscript = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inSubscript;
{
modelica_metatype _sub_exp = NULL;
modelica_metatype _arg = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmpMeta[0+0] = _inSubscript;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_sub_exp = tmpMeta[2];
_sub_exp = omc_Expression_traverseExpBidir(threadData, _sub_exp, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box2(4, &DAE_Subscript_SLICE__desc, _sub_exp);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_sub_exp = tmpMeta[2];
_sub_exp = omc_Expression_traverseExpBidir(threadData, _sub_exp, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, _sub_exp);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_sub_exp = tmpMeta[2];
_sub_exp = omc_Expression_traverseExpBidir(threadData, _sub_exp, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box2(6, &DAE_Subscript_WHOLE__NONEXP__desc, _sub_exp);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outSubscript = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outSubscript;
}
DLLExport
modelica_metatype omc_Expression_traverseExpTopDownCrefHelper(threadData_t *threadData, modelica_metatype _inCref, modelica_fnptr _rel, modelica_metatype _iarg, modelica_metatype *out_outArg)
{
modelica_metatype _outCref = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inCref;
tmp4_2 = _iarg;
{
modelica_string _name = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _subs = NULL;
modelica_metatype _subs_1 = NULL;
modelica_metatype _arg = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_name = tmpMeta[2];
_ty = tmpMeta[3];
_subs = tmpMeta[4];
_cr = tmpMeta[5];
_arg = tmp4_2;
_subs_1 = omc_Expression_traverseExpTopDownSubs(threadData, _subs, ((modelica_fnptr) _rel), _arg ,&_arg);
_cr_1 = omc_Expression_traverseExpTopDownCrefHelper(threadData, _cr, ((modelica_fnptr) _rel), _arg ,&_arg);
tmp5 = (modelica_boolean)(referenceEq(_subs, _subs_1) && referenceEq(_cr, _cr_1));
if(tmp5)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box5(3, &DAE_ComponentRef_CREF__QUAL__desc, _name, _ty, _subs_1, _cr_1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 4: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_name = tmpMeta[2];
_ty = tmpMeta[3];
_subs = tmpMeta[4];
_arg = tmp4_2;
_subs_1 = omc_Expression_traverseExpTopDownSubs(threadData, _subs, ((modelica_fnptr) _rel), _arg ,&_arg);
tmp6 = (modelica_boolean)referenceEq(_subs, _subs_1);
if(tmp6)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box4(4, &DAE_ComponentRef_CREF__IDENT__desc, _name, _ty, _subs_1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
_arg = tmp4_2;
tmpMeta[0+0] = _inCref;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCref = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outCref;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpSubs(threadData_t *threadData, modelica_metatype _inSubscript, modelica_fnptr _rel, modelica_metatype _iarg, modelica_metatype *out_outArg)
{
modelica_metatype _outSubscript = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inSubscript;
tmp4_2 = _iarg;
{
modelica_metatype _sub_exp = NULL;
modelica_metatype _sub_exp_1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _res = NULL;
modelica_metatype _arg = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
_arg = tmp4_2;
tmpMeta[0+0] = _inSubscript;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,0) == 0) goto tmp3_end;
_rest = tmpMeta[3];
_arg = tmp4_2;
_res = omc_Expression_traverseExpSubs(threadData, _rest, ((modelica_fnptr) _rel), _arg ,&_arg);
tmp6 = (modelica_boolean)referenceEq(_rest, _res);
if(tmp6)
{
tmpMeta[3] = _inSubscript;
}
else
{
tmpMeta[2] = mmc_mk_cons(_OMC_LIT91, _res);
tmpMeta[3] = tmpMeta[2];
}
_res = tmpMeta[3];
tmpMeta[0+0] = _res;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp7;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_sub_exp = tmpMeta[4];
_rest = tmpMeta[3];
_arg = tmp4_2;
_sub_exp_1 = omc_Expression_traverseExpBottomUp(threadData, _sub_exp, ((modelica_fnptr) _rel), _arg ,&_arg);
_res = omc_Expression_traverseExpSubs(threadData, _rest, ((modelica_fnptr) _rel), _arg ,&_arg);
tmp7 = (modelica_boolean)(referenceEq(_sub_exp, _sub_exp_1) && referenceEq(_rest, _res));
if(tmp7)
{
tmpMeta[4] = _inSubscript;
}
else
{
tmpMeta[3] = mmc_mk_box2(4, &DAE_Subscript_SLICE__desc, _sub_exp_1);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _res);
tmpMeta[4] = tmpMeta[2];
}
_res = tmpMeta[4];
tmpMeta[0+0] = _res;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 3: {
modelica_boolean tmp8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_sub_exp = tmpMeta[4];
_rest = tmpMeta[3];
_arg = tmp4_2;
_sub_exp_1 = omc_Expression_traverseExpBottomUp(threadData, _sub_exp, ((modelica_fnptr) _rel), _arg ,&_arg);
_res = omc_Expression_traverseExpSubs(threadData, _rest, ((modelica_fnptr) _rel), _arg ,&_arg);
tmp8 = (modelica_boolean)(referenceEq(_sub_exp, _sub_exp_1) && referenceEq(_rest, _res));
if(tmp8)
{
tmpMeta[4] = _inSubscript;
}
else
{
tmpMeta[3] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, _sub_exp_1);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _res);
tmpMeta[4] = tmpMeta[2];
}
_res = tmpMeta[4];
tmpMeta[0+0] = _res;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 4: {
modelica_boolean tmp9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_sub_exp = tmpMeta[4];
_rest = tmpMeta[3];
_arg = tmp4_2;
_sub_exp_1 = omc_Expression_traverseExpBottomUp(threadData, _sub_exp, ((modelica_fnptr) _rel), _arg ,&_arg);
_res = omc_Expression_traverseExpSubs(threadData, _rest, ((modelica_fnptr) _rel), _arg ,&_arg);
tmp9 = (modelica_boolean)(referenceEq(_sub_exp, _sub_exp_1) && referenceEq(_rest, _res));
if(tmp9)
{
tmpMeta[4] = _inSubscript;
}
else
{
tmpMeta[3] = mmc_mk_box2(6, &DAE_Subscript_WHOLE__NONEXP__desc, _sub_exp_1);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _res);
tmpMeta[4] = tmpMeta[2];
}
_res = tmpMeta[4];
tmpMeta[0+0] = _res;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outSubscript = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outSubscript;
}
DLLExport
modelica_metatype omc_Expression_traverseExpCref(threadData_t *threadData, modelica_metatype _inCref, modelica_fnptr _rel, modelica_metatype _iarg, modelica_metatype *out_outArg)
{
modelica_metatype _outCref = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inCref;
tmp4_2 = _iarg;
{
modelica_string _name = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _subs = NULL;
modelica_metatype _subs_1 = NULL;
modelica_metatype _arg = NULL;
modelica_integer _ix;
modelica_string _instant = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_name = tmpMeta[2];
_ty = tmpMeta[3];
_subs = tmpMeta[4];
_cr = tmpMeta[5];
_arg = tmp4_2;
_subs_1 = omc_Expression_traverseExpSubs(threadData, _subs, ((modelica_fnptr) _rel), _arg ,&_arg);
_cr_1 = omc_Expression_traverseExpCref(threadData, _cr, ((modelica_fnptr) _rel), _arg ,&_arg);
tmp5 = (modelica_boolean)(referenceEq(_cr, _cr_1) && referenceEq(_subs, _subs_1));
if(tmp5)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box5(3, &DAE_ComponentRef_CREF__QUAL__desc, _name, _ty, _subs_1, _cr_1);
tmpMeta[3] = tmpMeta[2];
}
_cr = tmpMeta[3];
tmpMeta[0+0] = _cr;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 4: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_name = tmpMeta[2];
_ty = tmpMeta[3];
_subs = tmpMeta[4];
_arg = tmp4_2;
_subs_1 = omc_Expression_traverseExpSubs(threadData, _subs, ((modelica_fnptr) _rel), _arg ,&_arg);
tmp6 = (modelica_boolean)referenceEq(_subs, _subs_1);
if(tmp6)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box4(4, &DAE_ComponentRef_CREF__IDENT__desc, _name, _ty, _subs_1);
tmpMeta[3] = tmpMeta[2];
}
_cr = tmpMeta[3];
tmpMeta[0+0] = _cr;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 5: {
modelica_integer tmp7;
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp7 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_name = tmpMeta[2];
_ix = tmp7;
_ty = tmpMeta[4];
_subs = tmpMeta[5];
_arg = tmp4_2;
_subs_1 = omc_Expression_traverseExpSubs(threadData, _subs, ((modelica_fnptr) _rel), _arg ,&_arg);
tmp8 = (modelica_boolean)referenceEq(_subs, _subs_1);
if(tmp8)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box5(5, &DAE_ComponentRef_CREF__ITER__desc, _name, mmc_mk_integer(_ix), _ty, _subs_1);
tmpMeta[3] = tmpMeta[2];
}
_cr = tmpMeta[3];
tmpMeta[0+0] = _cr;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 6: {
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr = tmpMeta[2];
_instant = tmpMeta[3];
_arg = tmp4_2;
_cr_1 = omc_Expression_traverseExpCref(threadData, _cr, ((modelica_fnptr) _rel), _arg ,&_arg);
tmp9 = (modelica_boolean)referenceEq(_cr, _cr_1);
if(tmp9)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box3(6, &DAE_ComponentRef_OPTIMICA__ATTR__INST__CREF__desc, _cr_1, _instant);
tmpMeta[3] = tmpMeta[2];
}
_cr = tmpMeta[3];
tmpMeta[0+0] = _cr;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
_arg = tmp4_2;
tmpMeta[0+0] = _inCref;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
omc_Error_addMessage(threadData, _OMC_LIT31, _OMC_LIT93);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCref = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outCref;
}
DLLExport
modelica_metatype omc_Expression_traverseExpBidirCref(threadData_t *threadData, modelica_metatype _inCref, modelica_fnptr _inEnterFunc, modelica_fnptr _inExitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outCref = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inCref;
{
modelica_string _name = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _subs = NULL;
modelica_metatype _arg = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_name = tmpMeta[2];
_ty = tmpMeta[3];
_subs = tmpMeta[4];
_cr = tmpMeta[5];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_subs = omc_List_map2Fold(threadData, _subs, boxvar_Expression_traverseExpBidirSubs, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg, tmpMeta[2] ,&_arg);
_cr = omc_Expression_traverseExpBidirCref(threadData, _cr, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box5(3, &DAE_ComponentRef_CREF__QUAL__desc, _name, _ty, _subs, _cr);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_name = tmpMeta[2];
_ty = tmpMeta[3];
_subs = tmpMeta[4];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_subs = omc_List_map2Fold(threadData, _subs, boxvar_Expression_traverseExpBidirSubs, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg, tmpMeta[2] ,&_arg);
tmpMeta[2] = mmc_mk_box4(4, &DAE_ComponentRef_CREF__IDENT__desc, _name, _ty, _subs);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmpMeta[0+0] = _inCref;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCref = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outCref;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpBidirSubExps(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _inEnterFunc, modelica_fnptr _inExitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_integer _i;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _oe1 = NULL;
modelica_metatype _op = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _mat_expl = NULL;
modelica_metatype _match_ty = NULL;
modelica_metatype _match_decls = NULL;
modelica_metatype _match_cases = NULL;
modelica_integer _index;
modelica_integer _dim;
modelica_metatype _opt_exp_asub = NULL;
modelica_metatype _path = NULL;
modelica_boolean _b1;
modelica_metatype _ty = NULL;
modelica_metatype _t = NULL;
modelica_metatype _strl = NULL;
modelica_metatype _reductionInfo = NULL;
modelica_metatype _riters = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _aliases = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _typeVars = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 37; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cref = tmpMeta[2];
_ty = tmpMeta[3];
_cref = omc_Expression_traverseExpBidirCref(threadData, _cref, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cref, _ty);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
_e2 = omc_Expression_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[2];
_e1 = tmpMeta[3];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _op, _e1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
_e2 = omc_Expression_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box4(12, &DAE_Exp_LBINARY__desc, _e1, _op, _e2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[2];
_e1 = tmpMeta[3];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box3(13, &DAE_Exp_LUNARY__desc, _op, _e1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 10: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp6 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_index = tmp6;
_opt_exp_asub = tmpMeta[6];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
_e2 = omc_Expression_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e1, _op, _e2, mmc_mk_integer(_index), _opt_exp_asub);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_e3 = tmpMeta[4];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
_e2 = omc_Expression_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
_e3 = omc_Expression_traverseExpBidir(threadData, _e3, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _e1, _e2, _e3);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_path = tmpMeta[2];
_expl = tmpMeta[3];
_attr = tmpMeta[4];
_expl = omc_Expression_traverseExpListBidir(threadData, _expl, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _path, _expl, _attr);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_path = tmpMeta[2];
_expl = tmpMeta[3];
_strl = tmpMeta[4];
_ty = tmpMeta[5];
_expl = omc_Expression_traverseExpListBidir(threadData, _expl, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box5(17, &DAE_Exp_RECORD__desc, _path, _expl, _strl, _ty);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_path = tmpMeta[2];
_expl = tmpMeta[3];
_ty = tmpMeta[4];
_t = tmpMeta[5];
_expl = omc_Expression_traverseExpListBidir(threadData, _expl, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box5(18, &DAE_Exp_PARTEVALFUNCTION__desc, _path, _expl, _ty, _t);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 15: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp7 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_ty = tmpMeta[2];
_b1 = tmp7;
_expl = tmpMeta[4];
_expl = omc_Expression_traverseExpListBidir(threadData, _expl, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _ty, mmc_mk_boolean(_b1), _expl);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 16: {
modelica_integer tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_ty = tmpMeta[2];
_dim = tmp8;
_mat_expl = tmpMeta[4];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_mat_expl = omc_List_map2Fold(threadData, _mat_expl, boxvar_Expression_traverseExpListBidir, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg, tmpMeta[2] ,&_arg);
tmpMeta[2] = mmc_mk_box4(20, &DAE_Exp_MATRIX__desc, _ty, mmc_mk_integer(_dim), _mat_expl);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_ty = tmpMeta[2];
_e1 = tmpMeta[3];
_oe1 = tmpMeta[4];
_e2 = tmpMeta[5];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
_oe1 = omc_Expression_traverseExpOptBidir(threadData, _oe1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
_e2 = omc_Expression_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box5(21, &DAE_Exp_RANGE__desc, _ty, _e1, _oe1, _e2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_expl = tmpMeta[2];
_expl = omc_Expression_traverseExpListBidir(threadData, _expl, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, _expl);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_ty = tmpMeta[2];
_e1 = tmpMeta[3];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box3(23, &DAE_Exp_CAST__desc, _ty, _e1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_expl = tmpMeta[3];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
_expl = omc_Expression_traverseExpListBidir(threadData, _expl, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(24, &DAE_Exp_ASUB__desc, _e1, _expl);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,4) == 0) goto tmp3_end;
_e1 = tmp4_1;
_e2 = omc_Expression_traverseExpBidir(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e1), 2))), ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta[2]), MMC_UNTAGPTR(_e1), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[2]))[2] = _e2;
_e1 = tmpMeta[2];
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 22: {
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_i = tmp9;
_ty = tmpMeta[4];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box4(25, &DAE_Exp_TSUB__desc, _e1, mmc_mk_integer(_i), _ty);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_oe1 = tmpMeta[3];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
_oe1 = omc_Expression_traverseExpOptBidir(threadData, _oe1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(27, &DAE_Exp_SIZE__desc, _e1, _oe1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_reductionInfo = tmpMeta[2];
_e1 = tmpMeta[3];
_riters = tmpMeta[4];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_riters = omc_List_map2Fold(threadData, _riters, boxvar_Expression_traverseReductionIteratorBidir, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg, tmpMeta[2] ,&_arg);
tmpMeta[2] = mmc_mk_box4(30, &DAE_Exp_REDUCTION__desc, _reductionInfo, _e1, _riters);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_expl = tmpMeta[2];
_expl = omc_Expression_traverseExpListBidir(threadData, _expl, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box2(31, &DAE_Exp_LIST__desc, _expl);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 27: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
_e2 = omc_Expression_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(32, &DAE_Exp_CONS__desc, _e1, _e2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 28: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,30,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_expl = tmpMeta[2];
_expl = omc_Expression_traverseExpListBidir(threadData, _expl, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, _expl);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 29: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_oe1 = tmpMeta[2];
_oe1 = omc_Expression_traverseExpOptBidir(threadData, _oe1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box2(34, &DAE_Exp_META__OPTION__desc, _oe1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 30: {
modelica_integer tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,32,5) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_path = tmpMeta[2];
_expl = tmpMeta[3];
_strl = tmpMeta[4];
_index = tmp10;
_typeVars = tmpMeta[6];
_expl = omc_Expression_traverseExpListBidir(threadData, _expl, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box6(35, &DAE_Exp_METARECORDCALL__desc, _path, _expl, _strl, mmc_mk_integer(_index), _typeVars);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 31: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_match_ty = tmpMeta[2];
_expl = tmpMeta[3];
_aliases = tmpMeta[4];
_match_decls = tmpMeta[5];
_match_cases = tmpMeta[6];
_ty = tmpMeta[7];
_expl = omc_Expression_traverseExpListBidir(threadData, _expl, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[3] = stringAppend(_OMC_LIT98,omc_System_dladdr(threadData, ((modelica_fnptr) _inEnterFunc), NULL, NULL));
tmpMeta[4] = stringAppend(tmpMeta[3],_OMC_LIT1);
tmpMeta[5] = stringAppend(tmpMeta[4],omc_System_dladdr(threadData, ((modelica_fnptr) _inExitFunc), NULL, NULL));
tmpMeta[2] = mmc_mk_cons(tmpMeta[5], MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT97, tmpMeta[2], _OMC_LIT99);
tmpMeta[2] = mmc_mk_box7(36, &DAE_Exp_MATCHEXPRESSION__desc, _match_ty, _expl, _aliases, _match_decls, _match_cases, _ty);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 32: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,34,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[2];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box2(37, &DAE_Exp_BOX__desc, _e1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 33: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,35,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_ty = tmpMeta[3];
_e1 = omc_Expression_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[2] = mmc_mk_box3(38, &DAE_Exp_UNBOX__desc, _e1, _ty);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 34: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,36,2) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 35: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,37,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 36: {
tmpMeta[2] = stringAppend(_OMC_LIT100,omc_ExpressionDump_printExpStr(threadData, _inExp));
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT101);
tmpMeta[4] = stringAppend(tmpMeta[3],omc_System_dladdr(threadData, ((modelica_fnptr) _inEnterFunc), NULL, NULL));
tmpMeta[5] = stringAppend(tmpMeta[4],_OMC_LIT1);
tmpMeta[6] = stringAppend(tmpMeta[5],omc_System_dladdr(threadData, ((modelica_fnptr) _inExitFunc), NULL, NULL));
omc_Error_addInternalError(threadData, tmpMeta[6], _OMC_LIT102);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseExpOptBidir(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _inEnterFunc, modelica_fnptr _inExitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _arg = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_e = tmpMeta[2];
_e1 = omc_Expression_traverseExpBidir(threadData, _e, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg ,&_arg);
tmpMeta[0+0] = (referenceEq(_e, _e1)?_inExp:mmc_mk_some(_e1));
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseExpBidir(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _inEnterFunc, modelica_fnptr _inExitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outArg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inEnterFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inEnterFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inEnterFunc), 2))), _inExp, _inArg ,&_outArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inEnterFunc), 1)))) (threadData, _inExp, _inArg ,&_outArg);
_outExp = omc_Expression_traverseExpBidirSubExps(threadData, _outExp, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _outArg ,&_outArg);
_outExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExitFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExitFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExitFunc), 2))), _outExp, _outArg ,&_outArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExitFunc), 1)))) (threadData, _outExp, _outArg ,&_outArg);
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseExpListBidir(threadData_t *threadData, modelica_metatype _inExpl, modelica_fnptr _inEnterFunc, modelica_fnptr _inExitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outExpl = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outExpl = omc_List_map2Fold(threadData, _inExpl, boxvar_Expression_traverseExpBidir, ((modelica_fnptr) _inEnterFunc), ((modelica_fnptr) _inExitFunc), _inArg, tmpMeta[0] ,&_outArg);
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingDivExpFinder(threadData_t *threadData, modelica_metatype _e, modelica_metatype _exps, modelica_metatype *out_acc)
{
modelica_metatype _outExp = NULL;
modelica_metatype _acc = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[3];
tmpMeta[2] = mmc_mk_cons(_e2, _exps);
tmpMeta[0+0] = _e;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],10,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[3];
tmpMeta[2] = mmc_mk_cons(_e2, _exps);
tmpMeta[0+0] = _e;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],16,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[3];
tmpMeta[2] = mmc_mk_cons(_e2, _exps);
tmpMeta[0+0] = _e;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],17,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e2 = tmpMeta[3];
tmpMeta[2] = mmc_mk_cons(_e2, _exps);
tmpMeta[0+0] = _e;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 4: {
tmpMeta[0+0] = _e;
tmpMeta[0+1] = _exps;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_acc = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_acc) { *out_acc = _acc; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_extractDivExpFromExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExps = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_Expression_traversingDivExpFinder, tmpMeta[0] ,&_outExps);
_return: OMC_LABEL_UNUSED
return _outExps;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingCrefFinder(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_metatype _arg = NULL;
modelica_metatype _arg1 = NULL;
modelica_fnptr _func;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_cr = tmpMeta[2];
_func = tmpMeta[3];
_arg = tmpMeta[4];
_arg1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _cr, _arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _cr, _arg);
tmp6 = (modelica_boolean)referenceEq(_arg, _arg1);
if(tmp6)
{
tmpMeta[3] = _inTpl;
}
else
{
tmpMeta[2] = mmc_mk_box2(0, ((modelica_fnptr) _func), _arg1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outTpl = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseCrefsFromExp(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _inFunc, modelica_metatype _inArg)
{
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _arg = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[3] = mmc_mk_box2(0, ((modelica_fnptr) _inFunc), _inArg);
omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_Expression_traversingCrefFinder, tmpMeta[3], &tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_arg = tmpMeta[2];
tmpMeta[0] = _arg;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outArg = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_expHasCrefInSmoothZeroWork(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Ftpl, modelica_metatype *out_tpl)
{
modelica_metatype _exp = NULL;
modelica_metatype _tpl = NULL;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_exp = __omcQ_24in_5Fexp;
_tpl = __omcQ_24in_5Ftpl;
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _exp;
tmp3_2 = _tpl;
{
modelica_metatype _cr = NULL;
modelica_metatype _sCr = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
if (0 != tmp5) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (6 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT103), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,1) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[8]);
if (0 != tmp6) goto tmp2_end;
if (listEmpty(tmpMeta[7])) goto tmp2_end;
tmpMeta[9] = MMC_CAR(tmpMeta[7]);
tmpMeta[10] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],6,2) == 0) goto tmp2_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
if (!listEmpty(tmpMeta[10])) goto tmp2_end;
_cr = tmpMeta[1];
_sCr = tmpMeta[11];
_b = omc_ComponentReference_crefEqual(threadData, _sCr, _cr);
tmpMeta[1] = mmc_mk_box2(0, _cr, mmc_mk_boolean(_b));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _tpl;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_tpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_tpl) { *out_tpl = _tpl; }
return _exp;
}
DLLExport
modelica_boolean omc_Expression_expHasCrefInSmoothZero(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _cr)
{
modelica_boolean _b;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = mmc_mk_box2(0, _cr, mmc_mk_boolean(0));
omc_Expression_traverseExpBottomUp(threadData, _exp, boxvar_Expression_expHasCrefInSmoothZeroWork, tmpMeta[2], &tmpMeta[0]);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_Expression_expHasCrefInSmoothZero(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _cr)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Expression_expHasCrefInSmoothZero(threadData, _exp, _cr);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_metatype omc_Expression_expHasCrefInIfWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_metatype _outTpl = NULL;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[14] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_boolean _b;
modelica_integer _i;
modelica_metatype _cr = NULL;
modelica_metatype _e1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_boolean tmp7;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp6) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[3];
_e1 = tmpMeta[5];
if (!(!omc_Expression_isFunCall(threadData, _e1, _OMC_LIT104))) goto tmp3_end;
_b = omc_Expression_expHasCref(threadData, _e1, _cr);
tmp7 = (modelica_boolean)_b;
if(tmp7)
{
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(_b));
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _inTpl;
}
tmpMeta[0+0] = _e1;
tmp1_c1 = 1;
tmpMeta[0+2] = tmpMeta[4];
goto tmp3_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp8 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp8) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (6 != MMC_STRLEN(tmpMeta[6]) || strcmp(MMC_STRINGDATA(_OMC_LIT103), MMC_STRINGDATA(tmpMeta[6])) != 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],0,1) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmp9 = mmc_unbox_integer(tmpMeta[10]);
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[11] = MMC_CAR(tmpMeta[9]);
tmpMeta[12] = MMC_CDR(tmpMeta[9]);
if (!listEmpty(tmpMeta[12])) goto tmp3_end;
_cr = tmpMeta[3];
_i = tmp9;
_e1 = tmpMeta[11];
if (!(_i > ((modelica_integer) 1))) goto tmp3_end;
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(omc_Expression_expHasCref(threadData, _e1, _cr)));
tmpMeta[0+0] = _e1;
tmp1_c1 = 1;
tmpMeta[0+2] = tmpMeta[3];
goto tmp3_done;
}
case 2: {
modelica_integer tmp10;
modelica_boolean tmp11;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp10) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
_cr = tmpMeta[3];
if (!omc_Expression_isEventTriggeringFunctionExp(threadData, _inExp)) goto tmp3_end;
_b = omc_Expression_expHasCref(threadData, _inExp, _cr);
tmp11 = (modelica_boolean)_b;
if(tmp11)
{
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(_b));
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _inTpl;
}
tmpMeta[0+0] = _inExp;
tmp1_c1 = 1;
tmpMeta[0+2] = tmpMeta[4];
goto tmp3_done;
}
case 3: {
modelica_integer tmp12;
modelica_boolean tmp13;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp12 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp12) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (10 != MMC_STRLEN(tmpMeta[6]) || strcmp(MMC_STRINGDATA(_OMC_LIT17), MMC_STRINGDATA(tmpMeta[6])) != 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
if (listEmpty(tmpMeta[11])) goto tmp3_end;
tmpMeta[12] = MMC_CAR(tmpMeta[11]);
tmpMeta[13] = MMC_CDR(tmpMeta[11]);
if (!listEmpty(tmpMeta[13])) goto tmp3_end;
_cr = tmpMeta[3];
_e1 = tmpMeta[8];
_b = omc_Expression_expHasCref(threadData, _e1, _cr);
tmp13 = (modelica_boolean)_b;
if(tmp13)
{
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(_b));
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _inTpl;
}
tmpMeta[0+0] = _e1;
tmp1_c1 = 1;
tmpMeta[0+2] = tmpMeta[4];
goto tmp3_done;
}
case 4: {
modelica_integer tmp14;
modelica_boolean tmp15;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp14 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp14) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (4 != MMC_STRLEN(tmpMeta[6]) || strcmp(MMC_STRINGDATA(_OMC_LIT105), MMC_STRINGDATA(tmpMeta[6])) != 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (!listEmpty(tmpMeta[9])) goto tmp3_end;
_cr = tmpMeta[3];
_e1 = tmpMeta[8];
_b = omc_Expression_expHasCref(threadData, _e1, _cr);
tmp15 = (modelica_boolean)_b;
if(tmp15)
{
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(_b));
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _inTpl;
}
tmpMeta[0+0] = _e1;
tmp1_c1 = (!_b);
tmpMeta[0+2] = tmpMeta[4];
goto tmp3_done;
}
case 5: {
modelica_integer tmp16;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp16 = mmc_unbox_integer(tmpMeta[3]);
if (1 != tmp16) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
case 6: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = 1;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outTpl = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
modelica_metatype boxptr_Expression_expHasCrefInIfWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl)
{
modelica_boolean _cont;
modelica_metatype _outExp = NULL;
_outExp = omc_Expression_expHasCrefInIfWork(threadData, _inExp, _inTpl, &_cont, out_outTpl);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_expHasCrefInIf(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = mmc_mk_box2(0, _inCr, mmc_mk_boolean(0));
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_expHasCrefInIfWork, tmpMeta[2], &tmpMeta[0]);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_hasCref = tmp1;
_return: OMC_LABEL_UNUSED
return _hasCref;
}
modelica_metatype boxptr_Expression_expHasCrefInIf(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_metatype out_hasCref;
_hasCref = omc_Expression_expHasCrefInIf(threadData, _inExp, _inCr);
out_hasCref = mmc_mk_icon(_hasCref);
return out_hasCref;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingexpHasCrefNoPreOrStart(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_metatype _outTpl = NULL;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_boolean _b;
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 8; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT64), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (8 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT65), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (6 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT106), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (5 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT83), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (4 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT107), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (7 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT108), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
case 6: {
modelica_integer tmp6;
modelica_boolean tmp7;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp6) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[3];
_cr1 = tmpMeta[5];
_b = omc_ComponentReference_crefEqualNoStringCompare(threadData, _cr, _cr1);
tmp7 = (modelica_boolean)_b;
if(tmp7)
{
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(_b));
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _inTpl;
}
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = tmpMeta[4];
goto tmp3_done;
}
case 7: {
modelica_integer tmp8;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp8 = mmc_unbox_integer(tmpMeta[3]);
_b = tmp8;
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outTpl = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traversingexpHasCrefNoPreOrStart(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl)
{
modelica_boolean _cont;
modelica_metatype _outExp = NULL;
_outExp = omc_Expression_traversingexpHasCrefNoPreOrStart(threadData, _inExp, _inTpl, &_cont, out_outTpl);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_expHasCrefNoPreOrStart(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = mmc_mk_box2(0, _inCr, mmc_mk_boolean(0));
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingexpHasCrefNoPreOrStart, tmpMeta[2], &tmpMeta[0]);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_hasCref = tmp1;
_return: OMC_LABEL_UNUSED
return _hasCref;
}
modelica_metatype boxptr_Expression_expHasCrefNoPreOrStart(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_metatype out_hasCref;
_hasCref = omc_Expression_expHasCrefNoPreOrStart(threadData, _inExp, _inCr);
out_hasCref = mmc_mk_icon(_hasCref);
return out_hasCref;
}
DLLExport
modelica_boolean omc_Expression_expHasCrefsNoPreOrStart(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_integer tmp1;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_hasCref = 0;
{
modelica_metatype _cr;
for (tmpMeta[0] = _inCr; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_cr = MMC_CAR(tmpMeta[0]);
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(0));
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingexpHasCrefNoPreOrStart, tmpMeta[3], &tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[2]);
_hasCref = tmp1;
if(_hasCref)
{
break;
}
}
}
_return: OMC_LABEL_UNUSED
return _hasCref;
}
modelica_metatype boxptr_Expression_expHasCrefsNoPreOrStart(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_metatype out_hasCref;
_hasCref = omc_Expression_expHasCrefsNoPreOrStart(threadData, _inExp, _inCr);
out_hasCref = mmc_mk_icon(_hasCref);
return out_hasCref;
}
DLLExport
modelica_metatype omc_Expression_traversingexpHasCrefNoPreorDer(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_metatype _outTpl = NULL;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_boolean _b;
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT64), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (8 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT65), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
case 2: {
modelica_integer tmp6;
modelica_boolean tmp7;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp6) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[3];
_cr1 = tmpMeta[5];
_b = omc_ComponentReference_crefEqualNoStringCompare(threadData, _cr, _cr1);
tmp7 = (modelica_boolean)_b;
if(tmp7)
{
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(_b));
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _inTpl;
}
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = tmpMeta[4];
goto tmp3_done;
}
case 3: {
modelica_integer tmp8;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp8 = mmc_unbox_integer(tmpMeta[3]);
_b = tmp8;
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outTpl = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
modelica_metatype boxptr_Expression_traversingexpHasCrefNoPreorDer(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl)
{
modelica_boolean _cont;
modelica_metatype _outExp = NULL;
_outExp = omc_Expression_traversingexpHasCrefNoPreorDer(threadData, _inExp, _inTpl, &_cont, out_outTpl);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_expHasCrefNoPreorDer(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = mmc_mk_box2(0, _inCr, mmc_mk_boolean(0));
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingexpHasCrefNoPreorDer, tmpMeta[2], &tmpMeta[0]);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_hasCref = tmp1;
_return: OMC_LABEL_UNUSED
return _hasCref;
}
modelica_metatype boxptr_Expression_expHasCrefNoPreorDer(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_metatype out_hasCref;
_hasCref = omc_Expression_expHasCrefNoPreorDer(threadData, _inExp, _inCr);
out_hasCref = mmc_mk_icon(_hasCref);
return out_hasCref;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingexpHasPrevious(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inHasIt, modelica_boolean *out_cont, modelica_boolean *out_outHasIt)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_boolean _outHasIt;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inHasIt;
{
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (8 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT65), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 1: {
_b = tmp4_2;
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmp1_c2 = _inHasIt;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outHasIt = tmp1_c2;
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outHasIt) { *out_outHasIt = _outHasIt; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traversingexpHasPrevious(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inHasIt, modelica_metatype *out_cont, modelica_metatype *out_outHasIt)
{
modelica_integer tmp1;
modelica_boolean _cont;
modelica_boolean _outHasIt;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inHasIt);
_outExp = omc_Expression_traversingexpHasPrevious(threadData, _inExp, tmp1, &_cont, &_outHasIt);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
if (out_outHasIt) { *out_outHasIt = mmc_mk_icon(_outHasIt); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_expHasPrevious(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasPre;
modelica_integer tmp1;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingexpHasPrevious, mmc_mk_boolean(0), &tmpMeta[0]);
tmp1 = mmc_unbox_integer(tmpMeta[0]);
_hasPre = tmp1;
_return: OMC_LABEL_UNUSED
return _hasPre;
}
modelica_metatype boxptr_Expression_expHasPrevious(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasPre;
modelica_metatype out_hasPre;
_hasPre = omc_Expression_expHasPrevious(threadData, _inExp);
out_hasPre = mmc_mk_icon(_hasPre);
return out_hasPre;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traversingexpHasPre(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inHasIt, modelica_boolean *out_cont, modelica_boolean *out_outHasIt)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_boolean _outHasIt;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inHasIt;
{
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT64), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 1: {
_b = tmp4_2;
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmp1_c2 = _inHasIt;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outHasIt = tmp1_c2;
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outHasIt) { *out_outHasIt = _outHasIt; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traversingexpHasPre(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inHasIt, modelica_metatype *out_cont, modelica_metatype *out_outHasIt)
{
modelica_integer tmp1;
modelica_boolean _cont;
modelica_boolean _outHasIt;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inHasIt);
_outExp = omc_Expression_traversingexpHasPre(threadData, _inExp, tmp1, &_cont, &_outHasIt);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
if (out_outHasIt) { *out_outHasIt = mmc_mk_icon(_outHasIt); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_expHasPre(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasPre;
modelica_integer tmp1;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingexpHasPre, mmc_mk_boolean(0), &tmpMeta[0]);
tmp1 = mmc_unbox_integer(tmpMeta[0]);
_hasPre = tmp1;
_return: OMC_LABEL_UNUSED
return _hasPre;
}
modelica_metatype boxptr_Expression_expHasPre(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasPre;
modelica_metatype out_hasPre;
_hasPre = omc_Expression_expHasPre(threadData, _inExp);
out_hasPre = mmc_mk_icon(_hasPre);
return out_hasPre;
}
DLLExport
modelica_metatype omc_Expression_traversingexpHasDer(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inTpl, modelica_boolean *out_cont, modelica_boolean *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_boolean _outTpl;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_boolean _b;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 1: {
if (0 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[3];
if (!(omc_System_strncmp(threadData, omc_ComponentReference_crefFirstIdent(threadData, _cr), _OMC_LIT109, ((modelica_integer) 9)) == ((modelica_integer) 0))) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 2: {
_b = tmp4_2;
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmp1_c2 = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outTpl = tmp1_c2;
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
modelica_metatype boxptr_Expression_traversingexpHasDer(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl)
{
modelica_integer tmp1;
modelica_boolean _cont;
modelica_boolean _outTpl;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inTpl);
_outExp = omc_Expression_traversingexpHasDer(threadData, _inExp, tmp1, &_cont, &_outTpl);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
if (out_outTpl) { *out_outTpl = mmc_mk_icon(_outTpl); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_expHasDer(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasCref;
modelica_integer tmp1;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingexpHasDer, mmc_mk_boolean(0), &tmpMeta[0]);
tmp1 = mmc_unbox_integer(tmpMeta[0]);
_hasCref = tmp1;
_return: OMC_LABEL_UNUSED
return _hasCref;
}
modelica_metatype boxptr_Expression_expHasDer(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasCref;
modelica_metatype out_hasCref;
_hasCref = omc_Expression_expHasDer(threadData, _inExp);
out_hasCref = mmc_mk_icon(_hasCref);
return out_hasCref;
}
DLLExport
modelica_metatype omc_Expression_traversingexpHasDerCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_metatype _outTpl = NULL;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_boolean _b;
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_boolean tmp7;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp6) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (3 != MMC_STRLEN(tmpMeta[6]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[6])) != 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],6,2) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
if (!listEmpty(tmpMeta[9])) goto tmp3_end;
_cr = tmpMeta[3];
_cr1 = tmpMeta[10];
_b = omc_ComponentReference_crefEqualNoStringCompare(threadData, _cr, _cr1);
tmp7 = (modelica_boolean)_b;
if(tmp7)
{
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(_b));
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _inTpl;
}
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = tmpMeta[4];
goto tmp3_done;
}
case 1: {
modelica_integer tmp8;
modelica_boolean tmp9;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp8 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp8) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (3 != MMC_STRLEN(tmpMeta[6]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[6])) != 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],6,2) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
if (!listEmpty(tmpMeta[9])) goto tmp3_end;
_cr = tmpMeta[3];
_cr1 = tmpMeta[10];
_b = omc_ComponentReference_crefPrefixOf(threadData, _cr, _cr1);
tmp9 = (modelica_boolean)_b;
if(tmp9)
{
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(_b));
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _inTpl;
}
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = tmpMeta[4];
goto tmp3_done;
}
case 2: {
modelica_integer tmp10;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp10 = mmc_unbox_integer(tmpMeta[3]);
_b = tmp10;
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outTpl = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
modelica_metatype boxptr_Expression_traversingexpHasDerCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl)
{
modelica_boolean _cont;
modelica_metatype _outExp = NULL;
_outExp = omc_Expression_traversingexpHasDerCref(threadData, _inExp, _inTpl, &_cont, out_outTpl);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_expHasDerCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = mmc_mk_box2(0, _inCr, mmc_mk_boolean(0));
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingexpHasDerCref, tmpMeta[2], &tmpMeta[0]);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_hasCref = tmp1;
_return: OMC_LABEL_UNUSED
return _hasCref;
}
modelica_metatype boxptr_Expression_expHasDerCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_metatype out_hasCref;
_hasCref = omc_Expression_expHasDerCref(threadData, _inExp, _inCr);
out_hasCref = mmc_mk_icon(_hasCref);
return out_hasCref;
}
DLLExport
modelica_metatype omc_Expression_traversingexpHasName(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_metatype _outTpl = NULL;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_boolean _b;
modelica_string _name = NULL;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_boolean tmp7;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp6) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta[3];
_cr = tmpMeta[5];
_b = (stringEqual(_name, omc_ComponentReference_crefFirstIdent(threadData, _cr)));
tmp7 = (modelica_boolean)_b;
if(tmp7)
{
tmpMeta[3] = mmc_mk_box2(0, _name, mmc_mk_boolean(_b));
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _inTpl;
}
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = tmpMeta[4];
goto tmp3_done;
}
case 1: {
modelica_integer tmp8;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp8 = mmc_unbox_integer(tmpMeta[3]);
_b = tmp8;
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outTpl = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
modelica_metatype boxptr_Expression_traversingexpHasName(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl)
{
modelica_boolean _cont;
modelica_metatype _outExp = NULL;
_outExp = omc_Expression_traversingexpHasName(threadData, _inExp, _inTpl, &_cont, out_outTpl);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_anyExpHasCrefName(threadData_t *threadData, modelica_metatype _inExps, modelica_string _name)
{
modelica_boolean _hasCref;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_hasCref = mmc_unbox_boolean(omc_List_applyAndFold1(threadData, _inExps, boxvar_boolOr, boxvar_Expression_expHasCrefName, _name, mmc_mk_boolean(0)));
_return: OMC_LABEL_UNUSED
return _hasCref;
}
modelica_metatype boxptr_Expression_anyExpHasCrefName(threadData_t *threadData, modelica_metatype _inExps, modelica_metatype _name)
{
modelica_boolean _hasCref;
modelica_metatype out_hasCref;
_hasCref = omc_Expression_anyExpHasCrefName(threadData, _inExps, _name);
out_hasCref = mmc_mk_icon(_hasCref);
return out_hasCref;
}
DLLExport
modelica_boolean omc_Expression_expHasCrefName(threadData_t *threadData, modelica_metatype _inExp, modelica_string _name)
{
modelica_boolean _hasCref;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = mmc_mk_box2(0, _name, mmc_mk_boolean(0));
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingexpHasName, tmpMeta[2], &tmpMeta[0]);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_hasCref = tmp1;
_return: OMC_LABEL_UNUSED
return _hasCref;
}
modelica_metatype boxptr_Expression_expHasCrefName(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _name)
{
modelica_boolean _hasCref;
modelica_metatype out_hasCref;
_hasCref = omc_Expression_expHasCrefName(threadData, _inExp, _name);
out_hasCref = mmc_mk_icon(_hasCref);
return out_hasCref;
}
DLLExport
modelica_metatype omc_Expression_traversingexpHasCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_metatype _outTpl = NULL;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_boolean _b;
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_boolean tmp7;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp6) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[3];
_cr1 = tmpMeta[5];
_b = omc_ComponentReference_crefEqualNoStringCompare(threadData, _cr, _cr1);
tmp7 = (modelica_boolean)_b;
if(tmp7)
{
tmpMeta[3] = mmc_mk_box2(0, _cr, mmc_mk_boolean(_b));
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _inTpl;
}
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = tmpMeta[4];
goto tmp3_done;
}
case 1: {
modelica_integer tmp8;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp8 = mmc_unbox_integer(tmpMeta[3]);
_b = tmp8;
tmpMeta[0+0] = _inExp;
tmp1_c1 = (!_b);
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outTpl = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
modelica_metatype boxptr_Expression_traversingexpHasCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl)
{
modelica_boolean _cont;
modelica_metatype _outExp = NULL;
_outExp = omc_Expression_traversingexpHasCref(threadData, _inExp, _inTpl, &_cont, out_outTpl);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_expHasCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = mmc_mk_box2(0, _inCr, mmc_mk_boolean(0));
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingexpHasCref, tmpMeta[2], &tmpMeta[0]);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_hasCref = tmp1;
_return: OMC_LABEL_UNUSED
return _hasCref;
}
modelica_metatype boxptr_Expression_expHasCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCr)
{
modelica_boolean _hasCref;
modelica_metatype out_hasCref;
_hasCref = omc_Expression_expHasCref(threadData, _inExp, _inCr);
out_hasCref = mmc_mk_icon(_hasCref);
return out_hasCref;
}
DLLExport
modelica_metatype omc_Expression_traversingComponentRefFinderNoPreDer(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefs, modelica_boolean *out_cont, modelica_metatype *out_crefs)
{
modelica_metatype _e = NULL;
modelica_boolean _cont;
modelica_metatype _crefs = NULL;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inCrefs;
{
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[3];
_crefs = tmp4_2;
_crefs = omc_List_unionEltOnTrue(threadData, _cr, _crefs, boxvar_ComponentReference_crefEqual);
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _crefs;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inCrefs;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT64), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inCrefs;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (8 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT65), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _inCrefs;
goto tmp3_done;
}
case 4: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = 1;
tmpMeta[0+2] = _inCrefs;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_e = tmpMeta[0+0];
_cont = tmp1_c1;
_crefs = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_crefs) { *out_crefs = _crefs; }
return _e;
}
modelica_metatype boxptr_Expression_traversingComponentRefFinderNoPreDer(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefs, modelica_metatype *out_cont, modelica_metatype *out_crefs)
{
modelica_boolean _cont;
modelica_metatype _e = NULL;
_e = omc_Expression_traversingComponentRefFinderNoPreDer(threadData, _inExp, _inCrefs, &_cont, out_crefs);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
return _e;
}
DLLExport
modelica_metatype omc_Expression_traversingComponentRefPresent(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _found, modelica_boolean *out_cont, modelica_boolean *out_outFound)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_boolean _outFound;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _found;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (1 != tmp4_2) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmp1_c2 = 1;
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = 1;
tmp1_c2 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_outFound = tmp1_c2;
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outFound) { *out_outFound = _outFound; }
return _outExp;
}
modelica_metatype boxptr_Expression_traversingComponentRefPresent(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _found, modelica_metatype *out_cont, modelica_metatype *out_outFound)
{
modelica_integer tmp1;
modelica_boolean _cont;
modelica_boolean _outFound;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_found);
_outExp = omc_Expression_traversingComponentRefPresent(threadData, _inExp, tmp1, &_cont, &_outFound);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
if (out_outFound) { *out_outFound = mmc_mk_icon(_outFound); }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_expHasCrefs(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasCrefs;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingComponentRefPresent, mmc_mk_boolean(0), &tmpMeta[0]);
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_b = tmp6;
tmp1 = _b;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_hasCrefs = tmp1;
_return: OMC_LABEL_UNUSED
return _hasCrefs;
}
modelica_metatype boxptr_Expression_expHasCrefs(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasCrefs;
modelica_metatype out_hasCrefs;
_hasCrefs = omc_Expression_expHasCrefs(threadData, _inExp);
out_hasCrefs = mmc_mk_icon(_hasCrefs);
return out_hasCrefs;
}
DLLExport
modelica_metatype omc_Expression_traversingexpHasInitial(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_boolean __omcQ_24in_5Ffound, modelica_boolean *out_cont, modelica_boolean *out_found)
{
modelica_metatype _exp = NULL;
modelica_boolean _cont;
modelica_boolean _found;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_exp = __omcQ_24in_5Fexp;
_found = __omcQ_24in_5Ffound;
if(_found)
{
_cont = 0;
goto _return;
}
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (7 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT75), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmp1_c0 = 0;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
tmp1_c0 = 1;
tmp1_c1 = _found;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_cont = tmp1_c0;
_found = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_found) { *out_found = _found; }
return _exp;
}
modelica_metatype boxptr_Expression_traversingexpHasInitial(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Ffound, modelica_metatype *out_cont, modelica_metatype *out_found)
{
modelica_integer tmp1;
modelica_boolean _cont;
modelica_boolean _found;
modelica_metatype _exp = NULL;
tmp1 = mmc_unbox_integer(__omcQ_24in_5Ffound);
_exp = omc_Expression_traversingexpHasInitial(threadData, __omcQ_24in_5Fexp, tmp1, &_cont, &_found);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
if (out_found) { *out_found = mmc_mk_icon(_found); }
return _exp;
}
DLLExport
modelica_boolean omc_Expression_expHasInitial(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _found;
modelica_integer tmp1;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
omc_Expression_traverseExpTopDown(threadData, _exp, boxvar_Expression_traversingexpHasInitial, mmc_mk_boolean(0), &tmpMeta[0]);
tmp1 = mmc_unbox_integer(tmpMeta[0]);
_found = tmp1;
_return: OMC_LABEL_UNUSED
return _found;
}
modelica_metatype boxptr_Expression_expHasInitial(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _found;
modelica_metatype out_found;
_found = omc_Expression_expHasInitial(threadData, _exp);
out_found = mmc_mk_icon(_found);
return out_found;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_getLhsCrefsFromStatement(threadData_t *threadData, modelica_metatype _inStmt)
{
modelica_metatype _lhsCrefs = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inStmt;
{
modelica_metatype _exp1 = NULL;
modelica_metatype _expLst = NULL;
modelica_metatype _stmtLst = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exp1 = tmpMeta[1];
tmpMeta[0] = omc_Expression_extractCrefsFromExpDerPreStart(threadData, _exp1);
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_expLst = tmpMeta[1];
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _expLst, boxvar_Expression_extractCrefsFromExpDerPreStart));
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exp1 = tmpMeta[1];
tmpMeta[0] = omc_Expression_extractCrefsFromExpDerPreStart(threadData, _exp1);
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_stmtLst = tmpMeta[1];
tmpMeta[0] = omc_Expression_getLhsCrefsFromStatements(threadData, _stmtLst);
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,7) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_stmtLst = tmpMeta[1];
tmpMeta[0] = omc_Expression_getLhsCrefsFromStatements(threadData, _stmtLst);
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_stmtLst = tmpMeta[1];
tmpMeta[0] = omc_Expression_getLhsCrefsFromStatements(threadData, _stmtLst);
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_stmtLst = tmpMeta[1];
tmpMeta[0] = omc_Expression_getLhsCrefsFromStatements(threadData, _stmtLst);
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_lhsCrefs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _lhsCrefs;
}
DLLExport
modelica_metatype omc_Expression_getLhsCrefsFromStatements(threadData_t *threadData, modelica_metatype _inStmts)
{
modelica_metatype _lhsCrefs = NULL;
modelica_metatype _lhsCrefsLst = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_lhsCrefsLst = omc_List_map(threadData, _inStmts, boxvar_Expression_getLhsCrefsFromStatement);
_lhsCrefs = omc_List_flatten(threadData, _lhsCrefsLst);
_return: OMC_LABEL_UNUSED
return _lhsCrefs;
}
DLLExport
modelica_metatype omc_Expression_extractCrefsStatment(threadData_t *threadData, modelica_metatype _inStmt, modelica_metatype *out_orcrefs)
{
modelica_metatype _olcrefs = NULL;
modelica_metatype _orcrefs = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inStmt;
{
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _expLst = NULL;
modelica_metatype _stmtLst = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp1 = tmpMeta[2];
_exp2 = tmpMeta[3];
_olcrefs = omc_Expression_extractCrefsFromExpDerPreStart(threadData, _exp1);
_orcrefs = omc_Expression_extractCrefsFromExpDerPreStart(threadData, _exp2);
tmpMeta[0+0] = _olcrefs;
tmpMeta[0+1] = _orcrefs;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_expLst = tmpMeta[2];
_exp2 = tmpMeta[3];
_olcrefs = omc_List_flatten(threadData, omc_List_map(threadData, _expLst, boxvar_Expression_extractCrefsFromExpDerPreStart));
_orcrefs = omc_Expression_extractCrefsFromExpDerPreStart(threadData, _exp2);
tmpMeta[0+0] = _olcrefs;
tmpMeta[0+1] = _orcrefs;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp1 = tmpMeta[2];
_exp2 = tmpMeta[3];
_olcrefs = omc_Expression_extractCrefsFromExpDerPreStart(threadData, _exp1);
_orcrefs = omc_Expression_extractCrefsFromExpDerPreStart(threadData, _exp2);
tmpMeta[0+0] = _olcrefs;
tmpMeta[0+1] = _orcrefs;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_stmtLst = tmpMeta[2];
tmpMeta[2] = omc_Expression_extractUniqueCrefsFromStatmentS(threadData, _stmtLst);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_olcrefs = tmpMeta[3];
_orcrefs = tmpMeta[4];
tmpMeta[0+0] = _olcrefs;
tmpMeta[0+1] = _orcrefs;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,7) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_stmtLst = tmpMeta[2];
tmpMeta[2] = omc_Expression_extractUniqueCrefsFromStatmentS(threadData, _stmtLst);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_olcrefs = tmpMeta[3];
_orcrefs = tmpMeta[4];
tmpMeta[0+0] = _olcrefs;
tmpMeta[0+1] = _orcrefs;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_stmtLst = tmpMeta[2];
tmpMeta[2] = omc_Expression_extractUniqueCrefsFromStatmentS(threadData, _stmtLst);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_olcrefs = tmpMeta[3];
_orcrefs = tmpMeta[4];
tmpMeta[0+0] = _olcrefs;
tmpMeta[0+1] = _orcrefs;
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_stmtLst = tmpMeta[2];
tmpMeta[2] = omc_Expression_extractUniqueCrefsFromStatmentS(threadData, _stmtLst);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_olcrefs = tmpMeta[3];
_orcrefs = tmpMeta[4];
tmpMeta[0+0] = _olcrefs;
tmpMeta[0+1] = _orcrefs;
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_exp1 = tmpMeta[2];
_orcrefs = omc_Expression_extractCrefsFromExpDerPreStart(threadData, _exp1);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _orcrefs;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_olcrefs = tmpMeta[0+0];
_orcrefs = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_orcrefs) { *out_orcrefs = _orcrefs; }
return _olcrefs;
}
DLLExport
modelica_metatype omc_Expression_extractUniqueCrefsFromStatmentS(threadData_t *threadData, modelica_metatype _inStmts)
{
modelica_metatype _ocrefs = NULL;
modelica_metatype _lhscreflstlst = NULL;
modelica_metatype _rhscreflstlst = NULL;
modelica_metatype _orhscrefs = NULL;
modelica_metatype _olhscrefs = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_lhscreflstlst = omc_List_map__2(threadData, _inStmts, boxvar_Expression_extractCrefsStatment ,&_rhscreflstlst);
_orhscrefs = omc_List_unique(threadData, omc_List_flatten(threadData, _rhscreflstlst));
_olhscrefs = omc_List_unique(threadData, omc_List_flatten(threadData, _lhscreflstlst));
tmpMeta[0] = mmc_mk_box2(0, _olhscrefs, _orhscrefs);
_ocrefs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _ocrefs;
}
DLLExport
modelica_metatype omc_Expression_traversingComponentRefFinderDerPreStart(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefs, modelica_boolean *out_cont, modelica_metatype *out_crefs)
{
modelica_metatype _e = NULL;
modelica_boolean _cont;
modelica_metatype _crefs = NULL;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inCrefs;
{
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[3];
_crefs = tmp4_2;
_crefs = omc_List_unionEltOnTrue(threadData, _cr, _inCrefs, boxvar_ComponentReference_crefEqual);
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _crefs;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],6,2) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
_cr = tmpMeta[8];
_cr = omc_ComponentReference_crefPrefixDer(threadData, _cr);
_crefs = omc_List_unionEltOnTrue(threadData, _cr, _inCrefs, boxvar_ComponentReference_crefEqual);
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _crefs;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT64), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],6,2) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
_cr = tmpMeta[8];
_cr = omc_ComponentReference_crefPrefixPre(threadData, _cr);
_crefs = omc_List_unionEltOnTrue(threadData, _cr, _inCrefs, boxvar_ComponentReference_crefEqual);
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _crefs;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (8 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT65), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],6,2) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
_cr = tmpMeta[8];
_cr = omc_ComponentReference_crefPrefixPrevious(threadData, _cr);
_crefs = omc_List_unionEltOnTrue(threadData, _cr, _inCrefs, boxvar_ComponentReference_crefEqual);
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _crefs;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (5 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT112), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],6,2) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
_cr = tmpMeta[8];
tmpMeta[3] = stringAppend(_OMC_LIT110,omc_ExpressionDump_printExpStr(threadData, _inExp));
omc_Error_addInternalError(threadData, tmpMeta[3], _OMC_LIT111);
_cr = omc_ComponentReference_crefPrefixStart(threadData, _cr);
_crefs = omc_List_unionEltOnTrue(threadData, _cr, _inCrefs, boxvar_ComponentReference_crefEqual);
tmpMeta[0+0] = _inExp;
tmp1_c1 = 0;
tmpMeta[0+2] = _crefs;
goto tmp3_done;
}
case 5: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = 1;
tmpMeta[0+2] = _inCrefs;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_e = tmpMeta[0+0];
_cont = tmp1_c1;
_crefs = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_crefs) { *out_crefs = _crefs; }
return _e;
}
modelica_metatype boxptr_Expression_traversingComponentRefFinderDerPreStart(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefs, modelica_metatype *out_cont, modelica_metatype *out_crefs)
{
modelica_boolean _cont;
modelica_metatype _e = NULL;
_e = omc_Expression_traversingComponentRefFinderDerPreStart(threadData, _inExp, _inCrefs, &_cont, out_crefs);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
return _e;
}
DLLExport
modelica_metatype omc_Expression_extractCrefsFromExpDerPreStart(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _ocrefs = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_traversingComponentRefFinderDerPreStart, tmpMeta[0] ,&_ocrefs);
_return: OMC_LABEL_UNUSED
return _ocrefs;
}
DLLExport
modelica_metatype omc_Expression_extractUniqueCrefsFromExpDerPreStart(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _ocrefs = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ocrefs = omc_List_unique(threadData, omc_Expression_extractCrefsFromExpDerPreStart(threadData, _inExp));
_return: OMC_LABEL_UNUSED
return _ocrefs;
}
DLLExport
modelica_metatype omc_Expression_traversingComponentRefFinder(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefs, modelica_metatype *out_crefs)
{
modelica_metatype _outExp = NULL;
modelica_metatype _crefs = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inCrefs;
{
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[2];
_crefs = tmp4_2;
_crefs = omc_List_unionEltOnTrue(threadData, _cr, _crefs, boxvar_ComponentReference_crefEqual);
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _crefs;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inCrefs;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_crefs = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_crefs) { *out_crefs = _crefs; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_extractCrefsFromExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _ocrefs = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_Expression_traversingComponentRefFinder, tmpMeta[0] ,&_ocrefs);
_return: OMC_LABEL_UNUSED
return _ocrefs;
}
DLLExport
modelica_metatype omc_Expression_extractUniqueCrefsFromExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _ocrefs = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ocrefs = omc_List_unique(threadData, omc_Expression_extractCrefsFromExp(threadData, _inExp));
_return: OMC_LABEL_UNUSED
return _ocrefs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpTypeDims2(threadData_t *threadData, modelica_metatype _inDims, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outChanged)
{
modelica_metatype _outDims = NULL;
modelica_metatype _outArg = NULL;
modelica_boolean _outChanged;
modelica_boolean _changed;
modelica_metatype _exp = NULL;
modelica_metatype _new_exp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outDims = tmpMeta[0];
_outArg = _inArg;
_outChanged = 0;
{
modelica_metatype _dim;
for (tmpMeta[1] = _inDims; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_dim = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _dim;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exp = tmpMeta[3];
_new_exp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _exp, _outArg ,&_outArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _exp, _outArg ,&_outArg);
_changed = (!referenceEq(_new_exp, _exp));
_outChanged = (_outChanged || _changed);
tmp5 = (modelica_boolean)_changed;
if(tmp5)
{
tmpMeta[3] = mmc_mk_box2(6, &DAE_Dimension_DIM__EXP__desc, _exp);
tmpMeta[4] = tmpMeta[3];
}
else
{
tmpMeta[4] = _dim;
}
tmpMeta[2] = tmpMeta[4];
goto tmp2_done;
}
case 1: {
tmpMeta[2] = _dim;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_dim = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_dim, _outDims);
_outDims = tmpMeta[2];
}
}
_outDims = (_outChanged?listReverse(_outDims):_inDims);
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
if (out_outChanged) { *out_outChanged = _outChanged; }
return _outDims;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traverseExpTypeDims2(threadData_t *threadData, modelica_metatype _inDims, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outChanged)
{
modelica_boolean _outChanged;
modelica_metatype _outDims = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
_outDims = omc_Expression_traverseExpTypeDims2(threadData, _inDims, _inFunc, _inArg, out_outArg, &_outChanged);
if (out_outChanged) { *out_outChanged = mmc_mk_icon(_outChanged); }
return _outDims;
}
DLLExport
modelica_metatype omc_Expression_traverseExpTypeDims(threadData_t *threadData, modelica_metatype _inType, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outType = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inType;
{
modelica_metatype _ty = NULL;
modelica_metatype _new_ty = NULL;
modelica_metatype _dims = NULL;
modelica_metatype _arg = NULL;
modelica_boolean _changed;
modelica_metatype _state = NULL;
modelica_metatype _vars = NULL;
modelica_metatype _ec = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 9: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_ty = tmpMeta[2];
_dims = tmpMeta[3];
omc_Expression_traverseExpTypeDims2(threadData, _dims, ((modelica_fnptr) _inFunc), _inArg ,&_arg ,&_changed);
tmp5 = (modelica_boolean)_changed;
if(tmp5)
{
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, _dims);
tmpMeta[3] = tmpMeta[2];
}
else
{
tmpMeta[3] = _inType;
}
_ty = tmpMeta[3];
tmpMeta[0+0] = _ty;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 13: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_state = tmpMeta[2];
_vars = tmpMeta[3];
_ty = tmpMeta[4];
_ec = tmpMeta[5];
_new_ty = omc_Expression_traverseExpTypeDims(threadData, _ty, ((modelica_fnptr) _inFunc), _inArg ,&_arg);
tmp6 = (modelica_boolean)referenceEq(_new_ty, _ty);
if(tmp6)
{
tmpMeta[3] = _inType;
}
else
{
tmpMeta[2] = mmc_mk_box5(13, &DAE_Type_T__SUBTYPE__BASIC__desc, _state, _vars, _ty, _ec);
tmpMeta[3] = tmpMeta[2];
}
_ty = tmpMeta[3];
tmpMeta[0+0] = _ty;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmpMeta[0+0] = _inType;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outType = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outType;
}
DLLExport
modelica_metatype omc_Expression_traverseExpCrefDims(threadData_t *threadData, modelica_metatype _inCref, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outCref = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inCref;
{
modelica_string _id = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _new_ty = NULL;
modelica_metatype _subs = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _new_cr = NULL;
modelica_metatype _arg = NULL;
modelica_integer _idx;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_id = tmpMeta[2];
_ty = tmpMeta[3];
_subs = tmpMeta[4];
_cr = tmpMeta[5];
_new_cr = omc_Expression_traverseExpCrefDims(threadData, _cr, ((modelica_fnptr) _inFunc), _inArg ,&_arg);
_new_ty = omc_Expression_traverseExpTypeDims(threadData, _ty, ((modelica_fnptr) _inFunc), _inArg ,&_arg);
tmp5 = (modelica_boolean)(referenceEq(_new_cr, _cr) && referenceEq(_new_ty, _ty));
if(tmp5)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box5(3, &DAE_ComponentRef_CREF__QUAL__desc, _id, _new_ty, _subs, _new_cr);
tmpMeta[3] = tmpMeta[2];
}
_cr = tmpMeta[3];
tmpMeta[0+0] = _cr;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 4: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_id = tmpMeta[2];
_ty = tmpMeta[3];
_subs = tmpMeta[4];
_new_ty = omc_Expression_traverseExpTypeDims(threadData, _ty, ((modelica_fnptr) _inFunc), _inArg ,&_arg);
tmp6 = (modelica_boolean)referenceEq(_new_ty, _ty);
if(tmp6)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box4(4, &DAE_ComponentRef_CREF__IDENT__desc, _id, _new_ty, _subs);
tmpMeta[3] = tmpMeta[2];
}
_cr = tmpMeta[3];
tmpMeta[0+0] = _cr;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 5: {
modelica_integer tmp7;
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp7 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_id = tmpMeta[2];
_idx = tmp7;
_ty = tmpMeta[4];
_subs = tmpMeta[5];
_new_ty = omc_Expression_traverseExpTypeDims(threadData, _ty, ((modelica_fnptr) _inFunc), _inArg ,&_arg);
tmp8 = (modelica_boolean)referenceEq(_new_ty, _ty);
if(tmp8)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box5(5, &DAE_ComponentRef_CREF__ITER__desc, _id, mmc_mk_integer(_idx), _new_ty, _subs);
tmpMeta[3] = tmpMeta[2];
}
_cr = tmpMeta[3];
tmpMeta[0+0] = _cr;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmpMeta[0+0] = _inCref;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCref = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outCref;
}
DLLExport
modelica_metatype omc_Expression_traverseExpOptTopDown(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _func, modelica_metatype _inTypeA, modelica_metatype *out_outA)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outA = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTypeA;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _a = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!optionNone(tmp4_1)) goto tmp3_end;
_a = tmp4_2;
tmpMeta[0+0] = mmc_mk_none();
tmpMeta[0+1] = _a;
goto tmp3_done;
}
case 1: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_e = tmpMeta[2];
_a = tmp4_2;
_e1 = omc_Expression_traverseExpTopDown(threadData, _e, ((modelica_fnptr) _func), _a ,&_a);
tmpMeta[0+0] = (referenceEq(_e, _e1)?_inExp:mmc_mk_some(_e1));
tmpMeta[0+1] = _a;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outA = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outA) { *out_outA = _outA; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseExpOpt(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _func, modelica_metatype _inTypeA, modelica_metatype *out_outTypeA)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outTypeA = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTypeA;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _a = NULL;
modelica_metatype _oe = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!optionNone(tmp4_1)) goto tmp3_end;
_a = tmp4_2;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _a;
goto tmp3_done;
}
case 1: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_oe = tmp4_1;
_e = tmpMeta[2];
_a = tmp4_2;
_e1 = omc_Expression_traverseExpBottomUp(threadData, _e, ((modelica_fnptr) _func), _a ,&_a);
_oe = (referenceEq(_e, _e1)?_oe:mmc_mk_some(_e1));
tmpMeta[0+0] = _oe;
tmpMeta[0+1] = _a;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outTypeA = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outTypeA) { *out_outTypeA = _outTypeA; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseExpListTopDown(threadData_t *threadData, modelica_metatype _inExpl, modelica_fnptr _rel, modelica_metatype _inExt_arg, modelica_metatype *out_outA)
{
modelica_metatype _outExpl = NULL;
modelica_metatype _outA = NULL;
modelica_metatype _e_1 = NULL;
modelica_boolean _same;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outExpl = tmpMeta[0];
_outA = _inExt_arg;
_same = 1;
{
modelica_metatype _e;
for (tmpMeta[1] = _inExpl; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_e = MMC_CAR(tmpMeta[1]);
_e_1 = omc_Expression_traverseExpTopDown(threadData, _e, ((modelica_fnptr) _rel), _outA ,&_outA);
_same = (referenceEq(_e, _e_1)?_same:0);
tmpMeta[2] = mmc_mk_cons(_e_1, _outExpl);
_outExpl = tmpMeta[2];
}
}
if(_same)
{
_outExpl = _inExpl;
}
else
{
_outExpl = listReverseInPlace(_outExpl);
}
_return: OMC_LABEL_UNUSED
if (out_outA) { *out_outA = _outA; }
return _outExpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpMatrixTopDown(threadData_t *threadData, modelica_metatype _inMatrix, modelica_fnptr _func, modelica_metatype _inTypeA, modelica_metatype *out_outTypeA)
{
modelica_metatype _outMatrix = NULL;
modelica_metatype _outTypeA = NULL;
modelica_metatype _row_1 = NULL;
modelica_boolean _same;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outMatrix = tmpMeta[0];
_outTypeA = _inTypeA;
_same = 1;
{
modelica_metatype _row;
for (tmpMeta[1] = _inMatrix; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_row = MMC_CAR(tmpMeta[1]);
_row_1 = omc_Expression_traverseExpListTopDown(threadData, _row, ((modelica_fnptr) _func), _outTypeA ,&_outTypeA);
_same = (referenceEq(_row, _row_1)?_same:0);
tmpMeta[2] = mmc_mk_cons(_row_1, _outMatrix);
_outMatrix = tmpMeta[2];
}
}
if(_same)
{
_outMatrix = _inMatrix;
}
else
{
_outMatrix = listReverseInPlace(_outMatrix);
}
_return: OMC_LABEL_UNUSED
if (out_outTypeA) { *out_outTypeA = _outTypeA; }
return _outMatrix;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpTopDown1(threadData_t *threadData, modelica_boolean _cont, modelica_metatype _inExp, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_boolean tmp4_1;modelica_metatype tmp4_2;modelica_fnptr tmp4_3;modelica_metatype tmp4_4;
tmp4_1 = _cont;
tmp4_2 = _inExp;
tmp4_3 = ((modelica_fnptr) _func);
tmp4_4 = _inArg;
{
modelica_metatype _e1_1 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2_1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e3_1 = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _ext_arg_1 = NULL;
modelica_metatype _ext_arg_2 = NULL;
modelica_metatype _ext_arg = NULL;
modelica_metatype _ext_arg_3 = NULL;
modelica_metatype _op = NULL;
modelica_fnptr _rel;
modelica_metatype _expl_1 = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _fn = NULL;
modelica_boolean _scalar;
modelica_metatype _tp = NULL;
modelica_metatype _et = NULL;
modelica_metatype _t = NULL;
modelica_integer _i;
modelica_string _str = NULL;
modelica_metatype _fieldNames = NULL;
modelica_metatype _lstexpl_1 = NULL;
modelica_metatype _lstexpl = NULL;
modelica_integer _dim;
modelica_integer _index_;
modelica_metatype _isExpisASUB = NULL;
modelica_metatype _oe1 = NULL;
modelica_metatype _reductionInfo = NULL;
modelica_metatype _riters = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _localDecls = NULL;
modelica_metatype _matchType = NULL;
modelica_metatype _cases = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _aliases = NULL;
modelica_metatype _clk = NULL;
modelica_metatype _clk1 = NULL;
modelica_metatype _typeVars = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 42; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != tmp4_1) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
_ext_arg = tmp4_4;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
_ext_arg = tmp4_4;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
_ext_arg = tmp4_4;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,1) == 0) goto tmp3_end;
_ext_arg = tmp4_4;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 5: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,4,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_clk = tmpMeta[2];
_ext_arg = tmp4_4;
_clk1 = omc_Expression_traverseExpTopDownClockHelper(threadData, _clk, ((modelica_fnptr) _func), _ext_arg ,&_ext_arg);
tmp6 = (modelica_boolean)referenceEq(_clk1, _clk);
if(tmp6)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(7, &DAE_Exp_CLKCONST__desc, _clk1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = _e;
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,5,2) == 0) goto tmp3_end;
_ext_arg = tmp4_4;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 7: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_cr = tmpMeta[2];
_tp = tmpMeta[3];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_cr_1 = omc_Expression_traverseExpTopDownCrefHelper(threadData, _cr, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmp7 = (modelica_boolean)referenceEq(_cr, _cr_1);
if(tmp7)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr_1, _tp);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 8: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,8,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_op = tmpMeta[2];
_e1 = tmpMeta[3];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmp8 = (modelica_boolean)referenceEq(_e1, _e1_1);
if(tmp8)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _op, _e1_1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 9: {
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
_e2_1 = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _rel), _ext_arg_1 ,&_ext_arg_2);
tmp9 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp9)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1_1, _op, _e2_1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_2;
goto tmp3_done;
}
case 10: {
modelica_boolean tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,10,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_op = tmpMeta[2];
_e1 = tmpMeta[3];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmp10 = (modelica_boolean)referenceEq(_e1, _e1_1);
if(tmp10)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(13, &DAE_Exp_LUNARY__desc, _op, _e1_1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 11: {
modelica_boolean tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,9,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
_e2_1 = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _rel), _ext_arg_1 ,&_ext_arg_2);
tmp11 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp11)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(12, &DAE_Exp_LBINARY__desc, _e1_1, _op, _e2_1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_2;
goto tmp3_done;
}
case 12: {
modelica_integer tmp12;
modelica_boolean tmp13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,11,5) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp12 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_index_ = tmp12;
_isExpisASUB = tmpMeta[6];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
_e2_1 = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _rel), _ext_arg_1 ,&_ext_arg_2);
tmp13 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp13)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e1_1, _op, _e2_1, mmc_mk_integer(_index_), _isExpisASUB);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_2;
goto tmp3_done;
}
case 13: {
modelica_boolean tmp14;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,12,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_e3 = tmpMeta[4];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
_e2_1 = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _rel), _ext_arg_1 ,&_ext_arg_2);
_e3_1 = omc_Expression_traverseExpTopDown(threadData, _e3, ((modelica_fnptr) _rel), _ext_arg_2 ,&_ext_arg_3);
tmp14 = (modelica_boolean)((referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1)) && referenceEq(_e3, _e3_1));
if(tmp14)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _e1_1, _e2_1, _e3_1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_3;
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,13,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_fn = tmpMeta[2];
_expl = tmpMeta[3];
_attr = tmpMeta[4];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_expl_1 = omc_Expression_traverseExpListTopDown(threadData, _expl, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _fn, _expl_1, _attr);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,14,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
_fn = tmpMeta[2];
_expl = tmpMeta[3];
_fieldNames = tmpMeta[4];
_tp = tmpMeta[5];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_expl_1 = omc_Expression_traverseExpListTopDown(threadData, _expl, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box5(17, &DAE_Exp_RECORD__desc, _fn, _expl_1, _fieldNames, _tp);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,15,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
_fn = tmpMeta[2];
_expl = tmpMeta[3];
_tp = tmpMeta[4];
_t = tmpMeta[5];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_expl_1 = omc_Expression_traverseExpListTopDown(threadData, _expl, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box5(18, &DAE_Exp_PARTEVALFUNCTION__desc, _fn, _expl_1, _tp, _t);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 17: {
modelica_integer tmp15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,16,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp15 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_tp = tmpMeta[2];
_scalar = tmp15;
_expl = tmpMeta[4];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_expl_1 = omc_Expression_traverseExpListTopDown(threadData, _expl, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _tp, mmc_mk_boolean(_scalar), _expl_1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 18: {
modelica_integer tmp16;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,17,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp16 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_tp = tmpMeta[2];
_dim = tmp16;
_lstexpl = tmpMeta[4];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_lstexpl_1 = omc_Expression_traverseExpMatrixTopDown(threadData, _lstexpl, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box4(20, &DAE_Exp_MATRIX__desc, _tp, mmc_mk_integer(_dim), _lstexpl_1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 19: {
modelica_boolean tmp17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,18,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
if (!optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
_tp = tmpMeta[2];
_e1 = tmpMeta[3];
_e2 = tmpMeta[5];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
_e2_1 = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _rel), _ext_arg_1 ,&_ext_arg_2);
tmp17 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp17)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box5(21, &DAE_Exp_RANGE__desc, _tp, _e1_1, mmc_mk_none(), _e2_1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_2;
goto tmp3_done;
}
case 20: {
modelica_boolean tmp18;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,18,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
_tp = tmpMeta[2];
_e1 = tmpMeta[3];
_e2 = tmpMeta[5];
_e3 = tmpMeta[6];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
_e2_1 = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _rel), _ext_arg_1 ,&_ext_arg_2);
_e3_1 = omc_Expression_traverseExpTopDown(threadData, _e3, ((modelica_fnptr) _rel), _ext_arg_2 ,&_ext_arg_3);
tmp18 = (modelica_boolean)((referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1)) && referenceEq(_e3, _e3_1));
if(tmp18)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box5(21, &DAE_Exp_RANGE__desc, _tp, _e1_1, mmc_mk_some(_e2_1), _e3_1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_3;
goto tmp3_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,19,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_expl = tmpMeta[2];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_expl_1 = omc_Expression_traverseExpListTopDown(threadData, _expl, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, _expl_1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 22: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,20,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_tp = tmpMeta[2];
_e1 = tmpMeta[3];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box3(23, &DAE_Exp_CAST__desc, _tp, _e1_1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,21,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_e1 = tmpMeta[2];
_expl_1 = tmpMeta[3];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
_expl_1 = omc_Expression_traverseExpListTopDown(threadData, _expl_1, ((modelica_fnptr) _rel), _ext_arg_1 ,&_ext_arg_2);
tmpMeta[0+0] = omc_Expression_makeASUB(threadData, _e1_1, _expl_1);
tmpMeta[0+1] = _ext_arg_2;
goto tmp3_done;
}
case 24: {
modelica_integer tmp19;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,22,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp19 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_e1 = tmpMeta[2];
_i = tmp19;
_tp = tmpMeta[4];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box4(25, &DAE_Exp_TSUB__desc, _e1_1, mmc_mk_integer(_i), _tp);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,23,4) == 0) goto tmp3_end;
_e1 = tmp4_2;
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e1), 2))), ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
if((!referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e1), 2))), _e1_1)))
{
tmpMeta[2] = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta[2]), MMC_UNTAGPTR(_e1), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[2]))[2] = _e1_1;
_e1 = tmpMeta[2];
}
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,24,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (!optionNone(tmpMeta[3])) goto tmp3_end;
_e1 = tmpMeta[2];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box3(27, &DAE_Exp_SIZE__desc, _e1_1, mmc_mk_none());
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 27: {
modelica_boolean tmp20;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,24,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (optionNone(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
_e2_1 = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _rel), _ext_arg_1 ,&_ext_arg_2);
tmp20 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp20)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(27, &DAE_Exp_SIZE__desc, _e1_1, mmc_mk_some(_e2_1));
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_2;
goto tmp3_done;
}
case 28: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,25,2) == 0) goto tmp3_end;
_ext_arg = tmp4_4;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 29: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,27,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_reductionInfo = tmpMeta[2];
_e1 = tmpMeta[3];
_riters = tmpMeta[4];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg);
_riters = omc_Expression_traverseReductionIteratorsTopDown(threadData, _riters, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg);
tmpMeta[2] = mmc_mk_box4(30, &DAE_Exp_REDUCTION__desc, _reductionInfo, _e1, _riters);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 30: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,26,4) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 31: {
modelica_boolean tmp21;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,29,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
_e2_1 = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _rel), _ext_arg_1 ,&_ext_arg_2);
tmp21 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp21)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(32, &DAE_Exp_CONS__desc, _e1_1, _e2_1);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _ext_arg_2;
goto tmp3_done;
}
case 32: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,28,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_expl = tmpMeta[2];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_expl_1 = omc_Expression_traverseExpListTopDown(threadData, _expl, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box2(31, &DAE_Exp_LIST__desc, _expl_1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 33: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,30,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_expl = tmpMeta[2];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_expl_1 = omc_Expression_traverseExpListTopDown(threadData, _expl, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box2(33, &DAE_Exp_META__TUPLE__desc, _expl_1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 34: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,31,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_oe1 = tmpMeta[2];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_oe1 = omc_Expression_traverseExpOptTopDown(threadData, _oe1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg);
tmpMeta[2] = mmc_mk_box2(34, &DAE_Exp_META__OPTION__desc, _oe1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 35: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,33,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
_matchType = tmpMeta[2];
_expl = tmpMeta[3];
_aliases = tmpMeta[4];
_localDecls = tmpMeta[5];
_cases = tmpMeta[6];
_et = tmpMeta[7];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_expl = omc_Expression_traverseExpListTopDown(threadData, _expl, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg);
_cases = omc_Patternm_traverseCasesTopDown(threadData, _cases, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg);
tmpMeta[2] = mmc_mk_box7(36, &DAE_Exp_MATCHEXPRESSION__desc, _matchType, _expl, _aliases, _localDecls, _cases, _et);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 36: {
modelica_integer tmp22;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,32,5) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp22 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
_fn = tmpMeta[2];
_expl = tmpMeta[3];
_fieldNames = tmpMeta[4];
_i = tmp22;
_typeVars = tmpMeta[6];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_expl_1 = omc_Expression_traverseExpListTopDown(threadData, _expl, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box6(35, &DAE_Exp_METARECORDCALL__desc, _fn, _expl_1, _fieldNames, mmc_mk_integer(_i), _typeVars);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 37: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,35,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_e1 = tmpMeta[2];
_tp = tmpMeta[3];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box3(38, &DAE_Exp_UNBOX__desc, _e1_1, _tp);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 38: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,34,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_e1 = tmpMeta[2];
_rel = tmp4_3;
_ext_arg = tmp4_4;
_e1_1 = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg_1);
tmpMeta[2] = mmc_mk_box2(37, &DAE_Exp_BOX__desc, _e1_1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ext_arg_1;
goto tmp3_done;
}
case 39: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,37,1) == 0) goto tmp3_end;
_ext_arg = tmp4_4;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 40: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,36,2) == 0) goto tmp3_end;
_ext_arg = tmp4_4;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _ext_arg;
goto tmp3_done;
}
case 41: {
_str = omc_ExpressionDump_printExpStr(threadData, _inExp);
tmpMeta[2] = stringAppend(_OMC_LIT113,omc_System_dladdr(threadData, ((modelica_fnptr) _func), NULL, NULL));
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT114);
tmpMeta[4] = stringAppend(tmpMeta[3],_str);
_str = tmpMeta[4];
tmpMeta[2] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addMessage(threadData, _OMC_LIT31, tmpMeta[2]);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_traverseExpTopDown1(threadData_t *threadData, modelica_metatype _cont, modelica_metatype _inExp, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_integer tmp1;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_cont);
_outExp = omc_Expression_traverseExpTopDown1(threadData, tmp1, _inExp, _func, _inArg, out_outArg);
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpTopDownClockHelper(threadData_t *threadData, modelica_metatype _inClk, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outClk = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClk;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _ea = NULL;
modelica_metatype _eb = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _clk = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_ea = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _func), _inArg ,&_arg);
_eb = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _func), _inArg ,&_arg);
tmp5 = (modelica_boolean)(referenceEq(_ea, _e1) && referenceEq(_eb, _e2));
if(tmp5)
{
tmpMeta[3] = _inClk;
}
else
{
tmpMeta[2] = mmc_mk_box3(4, &DAE_ClockKind_INTEGER__CLOCK__desc, _ea, _eb);
tmpMeta[3] = tmpMeta[2];
}
_clk = tmpMeta[3];
tmpMeta[0+0] = _clk;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 5: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta[2];
_e1 = omc_Expression_traverseExpTopDown(threadData, _e, ((modelica_fnptr) _func), _inArg ,&_arg);
tmp6 = (modelica_boolean)referenceEq(_e1, _e);
if(tmp6)
{
tmpMeta[3] = _inClk;
}
else
{
tmpMeta[2] = mmc_mk_box2(5, &DAE_ClockKind_REAL__CLOCK__desc, _e1);
tmpMeta[3] = tmpMeta[2];
}
_clk = tmpMeta[3];
tmpMeta[0+0] = _clk;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 6: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_ea = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _func), _inArg ,&_arg);
_eb = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _func), _inArg ,&_arg);
tmp7 = (modelica_boolean)(referenceEq(_ea, _e1) && referenceEq(_eb, _e2));
if(tmp7)
{
tmpMeta[3] = _inClk;
}
else
{
tmpMeta[2] = mmc_mk_box3(6, &DAE_ClockKind_BOOLEAN__CLOCK__desc, _ea, _eb);
tmpMeta[3] = tmpMeta[2];
}
_clk = tmpMeta[3];
tmpMeta[0+0] = _clk;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 7: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_ea = omc_Expression_traverseExpTopDown(threadData, _e1, ((modelica_fnptr) _func), _inArg ,&_arg);
_eb = omc_Expression_traverseExpTopDown(threadData, _e2, ((modelica_fnptr) _func), _inArg ,&_arg);
tmp8 = (modelica_boolean)(referenceEq(_ea, _e1) && referenceEq(_eb, _e2));
if(tmp8)
{
tmpMeta[3] = _inClk;
}
else
{
tmpMeta[2] = mmc_mk_box3(7, &DAE_ClockKind_SOLVER__CLOCK__desc, _ea, _eb);
tmpMeta[3] = tmpMeta[2];
}
_clk = tmpMeta[3];
tmpMeta[0+0] = _clk;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmpMeta[0+0] = _inClk;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClk = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outClk;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpClk(threadData_t *threadData, modelica_metatype _inClk, modelica_fnptr _func, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outClk = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClk;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _ea = NULL;
modelica_metatype _eb = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _clk = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_ea = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _func), _inArg ,&_arg);
_eb = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _func), _inArg ,&_arg);
tmp5 = (modelica_boolean)(referenceEq(_ea, _e1) && referenceEq(_eb, _e2));
if(tmp5)
{
tmpMeta[3] = _inClk;
}
else
{
tmpMeta[2] = mmc_mk_box3(4, &DAE_ClockKind_INTEGER__CLOCK__desc, _ea, _eb);
tmpMeta[3] = tmpMeta[2];
}
_clk = tmpMeta[3];
tmpMeta[0+0] = _clk;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 5: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta[2];
_e1 = omc_Expression_traverseExpBottomUp(threadData, _e, ((modelica_fnptr) _func), _inArg ,&_arg);
tmp6 = (modelica_boolean)referenceEq(_e1, _e);
if(tmp6)
{
tmpMeta[3] = _inClk;
}
else
{
tmpMeta[2] = mmc_mk_box2(5, &DAE_ClockKind_REAL__CLOCK__desc, _e1);
tmpMeta[3] = tmpMeta[2];
}
_clk = tmpMeta[3];
tmpMeta[0+0] = _clk;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 6: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_ea = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _func), _inArg ,&_arg);
_eb = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _func), _inArg ,&_arg);
tmp7 = (modelica_boolean)(referenceEq(_ea, _e1) && referenceEq(_eb, _e2));
if(tmp7)
{
tmpMeta[3] = _inClk;
}
else
{
tmpMeta[2] = mmc_mk_box3(6, &DAE_ClockKind_BOOLEAN__CLOCK__desc, _ea, _eb);
tmpMeta[3] = tmpMeta[2];
}
_clk = tmpMeta[3];
tmpMeta[0+0] = _clk;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 7: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_ea = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _func), _inArg ,&_arg);
_eb = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _func), _inArg ,&_arg);
tmp8 = (modelica_boolean)(referenceEq(_ea, _e1) && referenceEq(_eb, _e2));
if(tmp8)
{
tmpMeta[3] = _inClk;
}
else
{
tmpMeta[2] = mmc_mk_box3(7, &DAE_ClockKind_SOLVER__CLOCK__desc, _ea, _eb);
tmpMeta[3] = tmpMeta[2];
}
_clk = tmpMeta[3];
tmpMeta[0+0] = _clk;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmpMeta[0+0] = _inClk;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClk = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outClk;
}
DLLExport
modelica_metatype omc_Expression_traverseExpTopDown(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _func, modelica_metatype _ext_arg, modelica_metatype *out_outArg)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outArg = NULL;
modelica_boolean _cont;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _inExp, _ext_arg, &tmpMeta[0], &tmpMeta[1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _inExp, _ext_arg, &tmpMeta[0], &tmpMeta[1]);
_outExp = tmpMeta[2];
tmp1 = mmc_unbox_integer(tmpMeta[0]);
_cont = tmp1;
_outArg = tmpMeta[1];
_outExp = omc_Expression_traverseExpTopDown1(threadData, _cont, _outExp, ((modelica_fnptr) _func), _outArg ,&_outArg);
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseExpList(threadData_t *threadData, modelica_metatype _inExpl, modelica_fnptr _rel, modelica_metatype _iext_arg, modelica_metatype *out_ext_arg)
{
modelica_metatype _expl = NULL;
modelica_metatype _ext_arg = NULL;
modelica_metatype _e1 = NULL;
modelica_boolean _allEq;
modelica_metatype _delst = NULL;
modelica_integer _nEq;
modelica_boolean tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ext_arg = _iext_arg;
_allEq = 1;
_nEq = ((modelica_integer) 0);
{
modelica_metatype _e;
for (tmpMeta[0] = _inExpl; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_e = MMC_CAR(tmpMeta[0]);
_e1 = omc_Expression_traverseExpBottomUp(threadData, _e, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg);
if((_allEq?(!referenceEq(_e, _e1)):0))
{
_allEq = 0;
_delst = omc_DoubleEnded_empty(threadData, _e1);
{
modelica_metatype _elt;
for (tmpMeta[1] = _inExpl; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
if((_nEq < ((modelica_integer) 1)))
{
break;
}
omc_DoubleEnded_push__back(threadData, _delst, _elt);
_nEq = ((modelica_integer) -1) + _nEq;
}
}
}
if(_allEq)
{
_nEq = ((modelica_integer) 1) + _nEq;
}
else
{
omc_DoubleEnded_push__back(threadData, _delst, _e1);
}
}
}
tmp1 = (modelica_boolean)_allEq;
if(tmp1)
{
tmpMeta[1] = _inExpl;
}
else
{
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = omc_DoubleEnded_toListAndClear(threadData, _delst, tmpMeta[0]);
}
_expl = tmpMeta[1];
_return: OMC_LABEL_UNUSED
if (out_ext_arg) { *out_ext_arg = _ext_arg; }
return _expl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_traverseExpMatrix(threadData_t *threadData, modelica_metatype _inMatrix, modelica_fnptr _func, modelica_metatype _inTypeA, modelica_metatype *out_outTypeA)
{
modelica_metatype _outMatrix = NULL;
modelica_metatype _outTypeA = NULL;
modelica_metatype _row_1 = NULL;
modelica_boolean _same;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outMatrix = tmpMeta[0];
_outTypeA = _inTypeA;
_same = 1;
{
modelica_metatype _row;
for (tmpMeta[1] = _inMatrix; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_row = MMC_CAR(tmpMeta[1]);
_row_1 = omc_Expression_traverseExpList(threadData, _row, ((modelica_fnptr) _func), _outTypeA ,&_outTypeA);
_same = (referenceEq(_row, _row_1)?_same:0);
tmpMeta[2] = mmc_mk_cons(_row_1, _outMatrix);
_outMatrix = tmpMeta[2];
}
}
if(_same)
{
_outMatrix = _inMatrix;
}
else
{
_outMatrix = listReverseInPlace(_outMatrix);
}
_return: OMC_LABEL_UNUSED
if (out_outTypeA) { *out_outTypeA = _outTypeA; }
return _outMatrix;
}
DLLExport
modelica_metatype omc_Expression_traverseSubexpressionsTopDownHelper(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _itpl, modelica_metatype *out_otpl)
{
modelica_metatype _outExp = NULL;
modelica_metatype _otpl = NULL;
modelica_fnptr _rel;
modelica_metatype _ext_arg = NULL;
modelica_metatype _ext_arg2 = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _itpl;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_rel = tmpMeta[1];
_ext_arg = tmpMeta[2];
_outExp = omc_Expression_traverseExpTopDown(threadData, _inExp, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg2);
tmp1 = (modelica_boolean)referenceEq(_ext_arg, _ext_arg2);
if(tmp1)
{
tmpMeta[1] = _itpl;
}
else
{
tmpMeta[0] = mmc_mk_box2(0, ((modelica_fnptr) _rel), _ext_arg2);
tmpMeta[1] = tmpMeta[0];
}
_otpl = tmpMeta[1];
_return: OMC_LABEL_UNUSED
if (out_otpl) { *out_otpl = _otpl; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseSubexpressionsDummyHelper(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _inFunc, modelica_fnptr *out_outFunc)
{
modelica_metatype _outExp = NULL;
modelica_fnptr _outFunc;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_Expression_traverseExpDummyHelper, ((modelica_fnptr) _inFunc) ,&_outFunc);
_return: OMC_LABEL_UNUSED
if (out_outFunc) { *out_outFunc = (modelica_fnptr)_outFunc; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseSubexpressions(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_metatype __omcQ_24in_5Farg, modelica_fnptr _func, modelica_metatype *out_arg)
{
modelica_metatype _e = NULL;
modelica_metatype _arg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_e = __omcQ_24in_5Fe;
_arg = __omcQ_24in_5Farg;
_e = omc_Expression_traverseExpBottomUp(threadData, _e, ((modelica_fnptr) _func), _arg ,&_arg);
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _e;
}
DLLExport
modelica_metatype omc_Expression_traverseSubexpressionsHelper(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _itpl, modelica_metatype *out_otpl)
{
modelica_metatype _outExp = NULL;
modelica_metatype _otpl = NULL;
modelica_fnptr _rel;
modelica_metatype _ext_arg = NULL;
modelica_metatype _ext_arg2 = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _itpl;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_rel = tmpMeta[1];
_ext_arg = tmpMeta[2];
_outExp = omc_Expression_traverseExpBottomUp(threadData, _inExp, ((modelica_fnptr) _rel), _ext_arg ,&_ext_arg2);
tmp1 = (modelica_boolean)referenceEq(_ext_arg, _ext_arg2);
if(tmp1)
{
tmpMeta[1] = _itpl;
}
else
{
tmpMeta[0] = mmc_mk_box2(0, ((modelica_fnptr) _rel), _ext_arg2);
tmpMeta[1] = tmpMeta[0];
}
_otpl = tmpMeta[1];
_return: OMC_LABEL_UNUSED
if (out_otpl) { *out_otpl = _otpl; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseExpDummyHelper(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _func, modelica_fnptr *out_outFunc)
{
modelica_metatype _outExp = NULL;
modelica_fnptr _outFunc;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _inExp) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _inExp);
_outFunc = (modelica_fnptr) ((modelica_fnptr) _func);
_return: OMC_LABEL_UNUSED
if (out_outFunc) { *out_outFunc = (modelica_fnptr)_outFunc; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseExpDummy(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _func)
{
modelica_metatype _outExp = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_Expression_traverseExpDummyHelper, ((modelica_fnptr) _func), NULL);
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traverseExpBottomUp(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _inFunc, modelica_metatype _inExtArg, modelica_metatype *out_outExtArg)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outExtArg = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _e1_1 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2_1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e3_1 = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _ext_arg = NULL;
modelica_metatype _op = NULL;
modelica_metatype _expl_1 = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _fn = NULL;
modelica_boolean _scalar;
modelica_metatype _tp = NULL;
modelica_metatype _t = NULL;
modelica_integer _i;
modelica_metatype _lstexpl_1 = NULL;
modelica_metatype _lstexpl = NULL;
modelica_integer _dim;
modelica_string _str = NULL;
modelica_metatype _localDecls = NULL;
modelica_metatype _fieldNames = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _cases = NULL;
modelica_metatype _cases_1 = NULL;
modelica_metatype _matchTy = NULL;
modelica_integer _index_;
modelica_metatype _isExpisASUB = NULL;
modelica_metatype _reductionInfo = NULL;
modelica_metatype _riters = NULL;
modelica_metatype _riters_1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _aliases = NULL;
modelica_metatype _clk = NULL;
modelica_metatype _clk1 = NULL;
modelica_metatype _typeVars = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 42; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,26,4) == 0) goto tmp3_end;
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _inExp, _inExtArg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _inExp, _inExtArg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _inExp, _inExtArg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _inExp, _inExtArg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _inExp, _inExtArg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _inExp, _inExtArg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _inExp, _inExtArg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _inExp, _inExtArg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _inExp, _inExtArg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _inExp, _inExtArg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 5: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_clk = tmpMeta[2];
_clk1 = omc_Expression_traverseExpClk(threadData, _clk, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp6 = (modelica_boolean)referenceEq(_clk1, _clk);
if(tmp6)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(7, &DAE_Exp_CLKCONST__desc, _clk1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _inExp, _inExtArg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _inExp, _inExtArg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 7: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr = tmpMeta[2];
_tp = tmpMeta[3];
_cr_1 = omc_Expression_traverseExpCref(threadData, _cr, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp7 = (modelica_boolean)referenceEq(_cr, _cr_1);
if(tmp7)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr_1, _tp);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 8: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[2];
_e1 = tmpMeta[3];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp8 = (modelica_boolean)referenceEq(_e1, _e1_1);
if(tmp8)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _op, _e1_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 9: {
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_e2_1 = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
tmp9 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp9)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1_1, _op, _e2_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 10: {
modelica_boolean tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[2];
_e1 = tmpMeta[3];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp10 = (modelica_boolean)referenceEq(_e1, _e1_1);
if(tmp10)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(13, &DAE_Exp_LUNARY__desc, _op, _e1_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 11: {
modelica_boolean tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_e2_1 = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
tmp11 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp11)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(12, &DAE_Exp_LBINARY__desc, _e1_1, _op, _e2_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 12: {
modelica_integer tmp12;
modelica_boolean tmp13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,5) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_index_ = tmp12;
_isExpisASUB = tmpMeta[6];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_e2_1 = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
tmp13 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp13)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _e1_1, _op, _e2_1, mmc_mk_integer(_index_), _isExpisASUB);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 13: {
modelica_boolean tmp14;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_e3 = tmpMeta[4];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_e2_1 = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
_e3_1 = omc_Expression_traverseExpBottomUp(threadData, _e3, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
tmp14 = (modelica_boolean)((referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1)) && referenceEq(_e3, _e3_1));
if(tmp14)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _e1_1, _e2_1, _e3_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 14: {
modelica_boolean tmp15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_fn = tmpMeta[2];
_expl = tmpMeta[3];
_attr = tmpMeta[4];
_expl_1 = omc_Expression_traverseExpList(threadData, _expl, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp15 = (modelica_boolean)referenceEq(_expl, _expl_1);
if(tmp15)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _fn, _expl_1, _attr);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 15: {
modelica_boolean tmp16;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_fn = tmpMeta[2];
_expl = tmpMeta[3];
_fieldNames = tmpMeta[4];
_tp = tmpMeta[5];
_expl_1 = omc_Expression_traverseExpList(threadData, _expl, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp16 = (modelica_boolean)referenceEq(_expl, _expl_1);
if(tmp16)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box5(17, &DAE_Exp_RECORD__desc, _fn, _expl_1, _fieldNames, _tp);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 16: {
modelica_boolean tmp17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_fn = tmpMeta[2];
_expl = tmpMeta[3];
_tp = tmpMeta[4];
_t = tmpMeta[5];
_expl_1 = omc_Expression_traverseExpList(threadData, _expl, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp17 = (modelica_boolean)referenceEq(_expl, _expl_1);
if(tmp17)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box5(18, &DAE_Exp_PARTEVALFUNCTION__desc, _fn, _expl_1, _tp, _t);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 17: {
modelica_integer tmp18;
modelica_boolean tmp19;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp18 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_tp = tmpMeta[2];
_scalar = tmp18;
_expl = tmpMeta[4];
_expl_1 = omc_Expression_traverseExpList(threadData, _expl, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp19 = (modelica_boolean)referenceEq(_expl, _expl_1);
if(tmp19)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _tp, mmc_mk_boolean(_scalar), _expl_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 18: {
modelica_integer tmp20;
modelica_boolean tmp21;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp20 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_tp = tmpMeta[2];
_dim = tmp20;
_lstexpl = tmpMeta[4];
_lstexpl_1 = omc_Expression_traverseExpMatrix(threadData, _lstexpl, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp21 = (modelica_boolean)referenceEq(_lstexpl, _lstexpl_1);
if(tmp21)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(20, &DAE_Exp_MATRIX__desc, _tp, mmc_mk_integer(_dim), _lstexpl_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 19: {
modelica_boolean tmp22;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_tp = tmpMeta[2];
_e1 = tmpMeta[3];
_e2 = tmpMeta[5];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_e2_1 = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
tmp22 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp22)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box5(21, &DAE_Exp_RANGE__desc, _tp, _e1_1, mmc_mk_none(), _e2_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 20: {
modelica_boolean tmp23;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_tp = tmpMeta[2];
_e1 = tmpMeta[3];
_e2 = tmpMeta[5];
_e3 = tmpMeta[6];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_e2_1 = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
_e3_1 = omc_Expression_traverseExpBottomUp(threadData, _e3, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
tmp23 = (modelica_boolean)((referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1)) && referenceEq(_e3, _e3_1));
if(tmp23)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box5(21, &DAE_Exp_RANGE__desc, _tp, _e1_1, mmc_mk_some(_e2_1), _e3_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 21: {
modelica_boolean tmp24;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_expl = tmpMeta[2];
_expl_1 = omc_Expression_traverseExpList(threadData, _expl, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp24 = (modelica_boolean)referenceEq(_expl, _expl_1);
if(tmp24)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, _expl_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 22: {
modelica_boolean tmp25;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_tp = tmpMeta[2];
_e1 = tmpMeta[3];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp25 = (modelica_boolean)referenceEq(_e1, _e1_1);
if(tmp25)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(23, &DAE_Exp_CAST__desc, _tp, _e1_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_expl = tmpMeta[3];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_expl_1 = omc_Expression_traverseExpList(threadData, _expl, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
_e = ((referenceEq(_e1, _e1_1) && referenceEq(_expl, _expl_1))?_inExp:omc_Expression_makeASUB(threadData, _e1_1, _expl_1));
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 24: {
modelica_integer tmp26;
modelica_boolean tmp27;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp26 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_i = tmp26;
_tp = tmpMeta[4];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp27 = (modelica_boolean)referenceEq(_e1, _e1_1);
if(tmp27)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(25, &DAE_Exp_TSUB__desc, _e1_1, mmc_mk_integer(_i), _tp);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,4) == 0) goto tmp3_end;
_e1 = tmp4_1;
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e1), 2))), ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
if((!referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e1), 2))), _e1_1)))
{
tmpMeta[2] = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta[2]), MMC_UNTAGPTR(_e1), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[2]))[2] = _e1_1;
_e1 = tmpMeta[2];
}
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e1, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e1, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 26: {
modelica_boolean tmp28;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!optionNone(tmpMeta[3])) goto tmp3_end;
_e1 = tmpMeta[2];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp28 = (modelica_boolean)referenceEq(_e1, _e1_1);
if(tmp28)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(27, &DAE_Exp_SIZE__desc, _e1_1, mmc_mk_none());
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 27: {
modelica_boolean tmp29;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,24,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_e2_1 = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
tmp29 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp29)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(27, &DAE_Exp_SIZE__desc, _e1_1, mmc_mk_some(_e2_1));
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 28: {
modelica_boolean tmp30;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_reductionInfo = tmpMeta[2];
_e1 = tmpMeta[3];
_riters = tmpMeta[4];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_riters_1 = omc_Expression_traverseReductionIterators(threadData, _riters, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
tmp30 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_riters, _riters_1));
if(tmp30)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(30, &DAE_Exp_REDUCTION__desc, _reductionInfo, _e1_1, _riters_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 29: {
modelica_boolean tmp31;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,29,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_e2_1 = omc_Expression_traverseExpBottomUp(threadData, _e2, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
tmp31 = (modelica_boolean)(referenceEq(_e1, _e1_1) && referenceEq(_e2, _e2_1));
if(tmp31)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(32, &DAE_Exp_CONS__desc, _e1_1, _e2_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 30: {
modelica_boolean tmp32;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_expl = tmpMeta[2];
_expl_1 = omc_Expression_traverseExpList(threadData, _expl, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp32 = (modelica_boolean)referenceEq(_expl, _expl_1);
if(tmp32)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(31, &DAE_Exp_LIST__desc, _expl_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 31: {
modelica_boolean tmp33;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,30,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_expl = tmpMeta[2];
_expl_1 = omc_Expression_traverseExpList(threadData, _expl, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp33 = (modelica_boolean)referenceEq(_expl, _expl_1);
if(tmp33)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(33, &DAE_Exp_META__TUPLE__desc, _expl_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 32: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _inExp, _inExtArg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _inExp, _inExtArg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 33: {
modelica_boolean tmp34;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,31,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
_e1 = tmpMeta[3];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp34 = (modelica_boolean)referenceEq(_e1, _e1_1);
if(tmp34)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(34, &DAE_Exp_META__OPTION__desc, mmc_mk_some(_e1_1));
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 34: {
modelica_boolean tmp35;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,34,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[2];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp35 = (modelica_boolean)referenceEq(_e1, _e1_1);
if(tmp35)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(37, &DAE_Exp_BOX__desc, _e1_1);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 35: {
modelica_boolean tmp36;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,35,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_tp = tmpMeta[3];
_e1_1 = omc_Expression_traverseExpBottomUp(threadData, _e1, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp36 = (modelica_boolean)referenceEq(_e1, _e1_1);
if(tmp36)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(38, &DAE_Exp_UNBOX__desc, _e1_1, _tp);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 36: {
modelica_integer tmp37;
modelica_boolean tmp38;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,32,5) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp37 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_fn = tmpMeta[2];
_expl = tmpMeta[3];
_fieldNames = tmpMeta[4];
_i = tmp37;
_typeVars = tmpMeta[6];
_expl_1 = omc_Expression_traverseExpList(threadData, _expl, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
tmp38 = (modelica_boolean)referenceEq(_expl, _expl_1);
if(tmp38)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box6(35, &DAE_Exp_METARECORDCALL__desc, _fn, _expl_1, _fieldNames, mmc_mk_integer(_i), _typeVars);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 37: {
modelica_boolean tmp39;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,33,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_matchTy = tmpMeta[2];
_expl = tmpMeta[3];
_aliases = tmpMeta[4];
_localDecls = tmpMeta[5];
_cases = tmpMeta[6];
_tp = tmpMeta[7];
_expl_1 = omc_Expression_traverseExpList(threadData, _expl, ((modelica_fnptr) _inFunc), _inExtArg ,&_ext_arg);
_cases_1 = omc_Patternm_traverseCases(threadData, _cases, ((modelica_fnptr) _inFunc), _ext_arg ,&_ext_arg);
tmp39 = (modelica_boolean)(referenceEq(_expl, _expl_1) && referenceEq(_cases, _cases_1));
if(tmp39)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box7(36, &DAE_Exp_MATCHEXPRESSION__desc, _matchTy, _expl_1, _aliases, _localDecls, _cases_1, _tp);
tmpMeta[3] = tmpMeta[2];
}
_e = tmpMeta[3];
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _ext_arg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _ext_arg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 38: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,36,2) == 0) goto tmp3_end;
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _inExp, _inExtArg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _inExp, _inExtArg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 39: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,37,1) == 0) goto tmp3_end;
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _inExp, _inExtArg, &tmpMeta[0+1]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _inExp, _inExtArg, &tmpMeta[0+1]);
goto tmp3_done;
}
case 40: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,2) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inExtArg;
goto tmp3_done;
}
case 41: {
_str = omc_ExpressionDump_printExpStr(threadData, _inExp);
tmpMeta[2] = stringAppend(_OMC_LIT115,_str);
_str = tmpMeta[2];
omc_Error_addInternalError(threadData, _str, _OMC_LIT116);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outExtArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outExtArg) { *out_outExtArg = _outExtArg; }
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_containsInitialCall(threadData_t *threadData, modelica_metatype _condition)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _condition;
{
modelica_metatype _array = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (7 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT75), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_array = tmpMeta[0];
tmp1 = omc_List_mapBoolOr(threadData, _array, boxvar_Expression_containsInitialCall);
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_Expression_containsInitialCall(threadData_t *threadData, modelica_metatype _condition)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_Expression_containsInitialCall(threadData, _condition);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_metatype omc_Expression_replaceCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_otpl)
{
modelica_metatype _outExp = NULL;
modelica_metatype _otpl = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_metatype _target = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_cr = tmpMeta[2];
_cr1 = tmpMeta[3];
_target = tmpMeta[4];
if (!omc_ComponentReference_crefEqualNoStringCompare(threadData, _cr, _cr1)) goto tmp3_end;
tmpMeta[0+0] = _target;
tmpMeta[0+1] = _inTpl;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_otpl = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_otpl) { *out_otpl = _otpl; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_replaceCrefBottomUp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inSourceExp, modelica_metatype _inTargetExp)
{
modelica_metatype _exp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(0, _inSourceExp, _inTargetExp);
_exp = omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_Expression_replaceCref, tmpMeta[0], NULL);
_return: OMC_LABEL_UNUSED
return _exp;
}
DLLExport
modelica_metatype omc_Expression_expressionCollector(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _acc, modelica_metatype *out_outExps)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outExps = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _exp;
tmpMeta[0] = mmc_mk_cons(_exp, _acc);
_outExps = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_outExps) { *out_outExps = _outExps; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_replaceExpWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_otpl)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_metatype _otpl = NULL;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inTpl;
{
modelica_metatype _source = NULL;
modelica_metatype _target = NULL;
modelica_integer _c;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[5]);
_source = tmpMeta[3];
_target = tmpMeta[4];
_c = tmp6;
if (!omc_Expression_expEqual(threadData, _inExp, _source)) goto tmp3_end;
tmpMeta[3] = mmc_mk_box3(0, _source, _target, mmc_mk_integer(((modelica_integer) 1) + _c));
tmpMeta[0+0] = _target;
tmp1_c1 = 0;
tmpMeta[0+2] = tmpMeta[3];
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = 1;
tmpMeta[0+2] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_cont = tmp1_c1;
_otpl = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_otpl) { *out_otpl = _otpl; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_replaceExpWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_otpl)
{
modelica_boolean _cont;
modelica_metatype _outExp = NULL;
_outExp = omc_Expression_replaceExpWork(threadData, _inExp, _inTpl, &_cont, out_otpl);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_replaceExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inSourceExp, modelica_metatype _inTargetExp)
{
modelica_metatype _out = NULL;
modelica_metatype _exp = NULL;
modelica_integer _i;
modelica_integer tmp1;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = mmc_mk_box3(0, _inSourceExp, _inTargetExp, mmc_mk_integer(((modelica_integer) 0)));
tmpMeta[3] = omc_Expression_traverseExpTopDown(threadData, _inExp, boxvar_Expression_replaceExpWork, tmpMeta[2], &tmpMeta[0]);
_exp = tmpMeta[3];
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp1;
tmpMeta[0] = mmc_mk_box2(0, _exp, mmc_mk_integer(_i));
_out = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _out;
}
DLLExport
modelica_metatype omc_Expression_replaceExpTpl(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _tpl, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _tpl;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _s = NULL;
modelica_metatype _t = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_e = tmp4_1;
_s = tmpMeta[2];
_t = tmpMeta[3];
tmpMeta[2] = omc_Expression_replaceExp(threadData, _e, _s, _t);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
_e1 = tmpMeta[3];
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _tpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outTpl = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_concatArrayType(threadData_t *threadData, modelica_metatype _arrayType1, modelica_metatype _arrayType2)
{
modelica_metatype _concatType = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _arrayType1;
tmp3_2 = _arrayType2;
{
modelica_metatype _et = NULL;
modelica_metatype _dim1 = NULL;
modelica_metatype _dim2 = NULL;
modelica_metatype _dims1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,6,2) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (listEmpty(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
_et = tmpMeta[1];
_dim1 = tmpMeta[3];
_dims1 = tmpMeta[4];
_dim2 = tmpMeta[6];
_dim1 = omc_Expression_dimensionsAdd(threadData, _dim1, _dim2);
tmpMeta[1] = mmc_mk_cons(_dim1, _dims1);
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _et, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_concatType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _concatType;
}
DLLExport
modelica_metatype omc_Expression_dimensionsAdd(threadData_t *threadData, modelica_metatype _dim1, modelica_metatype _dim2)
{
modelica_metatype _res = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_res = omc_Expression_intDimension(threadData, omc_Expression_dimensionSize(threadData, _dim1) + omc_Expression_dimensionSize(threadData, _dim2));
goto tmp2_done;
}
case 1: {
_res = _OMC_LIT117;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_Expression_dimensionsMult(threadData_t *threadData, modelica_metatype _dim1, modelica_metatype _dim2)
{
modelica_metatype _res = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = omc_Expression_intDimension(threadData, (omc_Expression_dimensionSize(threadData, _dim1)) * (omc_Expression_dimensionSize(threadData, _dim2)));
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_Expression_makeVar(threadData_t *threadData, modelica_string _name, modelica_metatype _tp)
{
modelica_metatype _v = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box7(3, &DAE_Var_TYPES__VAR__desc, _name, _OMC_LIT124, _tp, _OMC_LIT125, mmc_mk_boolean(0), mmc_mk_none());
_v = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _v;
}
DLLExport
modelica_metatype omc_Expression_makeIndexSubscript(threadData_t *threadData, modelica_metatype _exp)
{
modelica_metatype _subscript = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, _exp);
_subscript = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _subscript;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_arrayFill2(threadData_t *threadData, modelica_metatype _iDims, modelica_metatype _inExp)
{
modelica_metatype _oExp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _iDims;
{
modelica_integer _i;
modelica_metatype _d = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _arrexp = NULL;
modelica_metatype _dims = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_d = tmpMeta[1];
_ty = omc_Expression_typeof(threadData, _inExp);
_i = omc_Expression_dimensionSize(threadData, _d);
_expl = omc_List_fill(threadData, _inExp, _i);
tmpMeta[2] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(_i));
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, tmpMeta[1]);
tmpMeta[4] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, tmpMeta[3], mmc_mk_boolean(1), _expl);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_d = tmpMeta[1];
_dims = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_d, MMC_REFSTRUCTLIT(mmc_nil));
_arrexp = omc_Expression_arrayFill2(threadData, tmpMeta[1], _inExp);
_iDims = _dims;
_inExp = _arrexp;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_oExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _oExp;
}
DLLExport
modelica_metatype omc_Expression_arrayFill(threadData_t *threadData, modelica_metatype _dims, modelica_metatype _inExp)
{
modelica_metatype _oExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _dims;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _inExp;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = omc_Expression_arrayFill2(threadData, _dims, _inExp);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_oExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _oExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_listToArray3(threadData_t *threadData, modelica_metatype _inList, modelica_metatype _iDim)
{
modelica_metatype _oExps = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inList;
tmp3_2 = _iDim;
{
modelica_integer _i;
modelica_metatype _d = NULL;
modelica_metatype _explst = NULL;
modelica_metatype _restexps = NULL;
modelica_metatype _restarr = NULL;
modelica_metatype _arrexp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
_d = tmp3_2;
_i = omc_Expression_dimensionSize(threadData, _d);
if((_i > listLength(_inList)))
{
omc_Error_addMessage(threadData, _OMC_LIT31, _OMC_LIT127);
goto goto_1;
}
else
{
_explst = omc_List_split(threadData, _inList, _i ,&_restexps);
_arrexp = omc_Expression_makeArrayFromList(threadData, _explst);
_restarr = omc_Expression_listToArray3(threadData, _restexps, _d);
}
tmpMeta[1] = mmc_mk_cons(_arrexp, _restarr);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_oExps = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _oExps;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_listToArray2(threadData_t *threadData, modelica_metatype _inList, modelica_metatype _iDims, modelica_metatype _inType)
{
modelica_metatype _oExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _iDims;
{
modelica_integer _i;
modelica_metatype _d = NULL;
modelica_metatype _explst = NULL;
modelica_metatype _dims = NULL;
modelica_boolean _is_scalar;
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = MMC_CAR(tmp3_1);
tmpMeta[1] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
_d = tmpMeta[0];
_is_scalar = (!omc_Types_isArray(threadData, _inType));
if(omc_Expression_dimensionKnown(threadData, _d))
{
_i = omc_Expression_dimensionSize(threadData, _d);
if((_i != listLength(_inList)))
{
omc_Error_addMessage(threadData, _OMC_LIT31, _OMC_LIT129);
goto goto_1;
}
else
{
tmpMeta[0] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(listLength(_inList)));
_ty = omc_Expression_liftArrayR(threadData, _inType, tmpMeta[0]);
tmpMeta[0] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _ty, mmc_mk_boolean(_is_scalar), _inList);
_oExp = tmpMeta[0];
}
}
else
{
_ty = omc_Expression_liftArrayR(threadData, _inType, _d);
tmpMeta[0] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _ty, mmc_mk_boolean(_is_scalar), _inList);
_oExp = tmpMeta[0];
}
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = MMC_CAR(tmp3_1);
tmpMeta[1] = MMC_CDR(tmp3_1);
_d = omc_List_splitLast(threadData, _iDims ,&_dims);
_explst = omc_Expression_listToArray3(threadData, _inList, _d);
tmpMeta[0] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(listLength(_explst)));
_ty = omc_Expression_liftArrayR(threadData, _inType, tmpMeta[0]);
_oExp = omc_Expression_listToArray2(threadData, _explst, _dims, _ty);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
return _oExp;
}
DLLExport
modelica_metatype omc_Expression_listToArray(threadData_t *threadData, modelica_metatype _inList, modelica_metatype _dims)
{
modelica_metatype _oExp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inList;
tmp3_2 = _dims;
{
modelica_metatype _ty = NULL;
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
omc_Error_addMessage(threadData, _OMC_LIT31, _OMC_LIT131);
goto goto_1;
goto tmp2_done;
}
case 1: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 1;
omc_Error_addMessage(threadData, _OMC_LIT31, _OMC_LIT133);
goto goto_1;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_exp = tmpMeta[1];
_ty = omc_Expression_typeof(threadData, _exp);
tmpMeta[0] = omc_Expression_listToArray2(threadData, _inList, _dims, _ty);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_oExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _oExp;
}
DLLExport
modelica_metatype omc_Expression_makeOneExpression(threadData_t *threadData, modelica_metatype _inDims, modelica_metatype *out_outType)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inDims;
{
modelica_integer _i;
modelica_metatype _d = NULL;
modelica_metatype _dims = NULL;
modelica_metatype _e = NULL;
modelica_metatype _eLst = NULL;
modelica_metatype _ty = NULL;
modelica_boolean _scalar;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0+0] = _OMC_LIT6;
tmpMeta[0+1] = _OMC_LIT134;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_d = tmpMeta[2];
_dims = tmpMeta[3];
_i = omc_Expression_dimensionSize(threadData, _d);
_e = omc_Expression_makeOneExpression(threadData, _dims ,&_ty);
_eLst = omc_List_fill(threadData, _e, _i);
_scalar = listEmpty(_dims);
tmpMeta[2] = mmc_mk_cons(_d, _dims);
tmpMeta[3] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _OMC_LIT134, tmpMeta[2]);
tmpMeta[4] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, tmpMeta[3], mmc_mk_boolean(_scalar), _eLst);
tmpMeta[5] = mmc_mk_cons(_d, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[6] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, tmpMeta[5]);
tmpMeta[0+0] = tmpMeta[4];
tmpMeta[0+1] = tmpMeta[6];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outType = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outType) { *out_outType = _outType; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeZeroExpression(threadData_t *threadData, modelica_metatype _inDims, modelica_metatype *out_outType)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inDims;
{
modelica_integer _i;
modelica_metatype _d = NULL;
modelica_metatype _dims = NULL;
modelica_metatype _e = NULL;
modelica_metatype _eLst = NULL;
modelica_metatype _ty = NULL;
modelica_boolean _scalar;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0+0] = _OMC_LIT135;
tmpMeta[0+1] = _OMC_LIT134;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_d = tmpMeta[2];
_dims = tmpMeta[3];
_i = omc_Expression_dimensionSize(threadData, _d);
_e = omc_Expression_makeZeroExpression(threadData, _dims ,&_ty);
_eLst = omc_List_fill(threadData, _e, _i);
_scalar = listEmpty(_dims);
tmpMeta[2] = mmc_mk_cons(_d, _dims);
tmpMeta[3] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _OMC_LIT134, tmpMeta[2]);
tmpMeta[4] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, tmpMeta[3], mmc_mk_boolean(_scalar), _eLst);
tmpMeta[5] = mmc_mk_cons(_d, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[6] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, tmpMeta[5]);
tmpMeta[0+0] = tmpMeta[4];
tmpMeta[0+1] = tmpMeta[6];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outType = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outType) { *out_outType = _outType; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_createZeroExpression(threadData_t *threadData, modelica_metatype _inType)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inType;
{
modelica_metatype _typeLst = NULL;
modelica_metatype _expLst = NULL;
modelica_metatype _dims = NULL;
modelica_metatype _path = NULL;
modelica_metatype _varLst = NULL;
modelica_metatype _varNames = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!omc_Expression_isIntegerOrReal(threadData, _inType)) goto tmp2_end;
tmpMeta[0] = omc_Expression_makeConstZero(threadData, _inType);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,14,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_typeLst = tmpMeta[1];
_expLst = omc_List_map(threadData, _typeLst, boxvar_Expression_createZeroExpression);
tmpMeta[1] = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, _expLst);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_dims = tmpMeta[1];
tmpMeta[0] = omc_Expression_makeZeroExpression(threadData, _dims, NULL);
goto tmp2_done;
}
case 3: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_path = tmpMeta[2];
_varLst = tmpMeta[3];
{
modelica_metatype __omcQ_24tmpVar15;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar14;
int tmp6;
modelica_metatype _v_loopVar = 0;
modelica_metatype _v;
_v_loopVar = _varLst;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar15 = tmpMeta[2];
tmp5 = &__omcQ_24tmpVar15;
while(1) {
tmp6 = 1;
if (!listEmpty(_v_loopVar)) {
_v = MMC_CAR(_v_loopVar);
_v_loopVar = MMC_CDR(_v_loopVar);
tmp6--;
}
if (tmp6 == 0) {
__omcQ_24tmpVar14 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_v), 4)));
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar14,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar15;
}
_typeLst = tmpMeta[1];
_expLst = omc_List_map(threadData, _typeLst, boxvar_Expression_createZeroExpression);
_varNames = omc_List_map(threadData, _varLst, boxvar_Expression_varName);
tmp7 = (listLength(_varNames) == listLength(_expLst));
if (1 != tmp7) goto goto_1;
tmpMeta[1] = mmc_mk_box5(17, &DAE_Exp_RECORD__desc, _path, _expLst, _varNames, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeRealArrayOfZeros(threadData_t *threadData, modelica_integer _inDimension)
{
modelica_metatype _outExp = NULL;
modelica_metatype _l = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_l = omc_Expression_makeListOfZeros(threadData, _inDimension);
_outExp = omc_Expression_makeRealArray(threadData, _l);
_return: OMC_LABEL_UNUSED
return _outExp;
}
modelica_metatype boxptr_Expression_makeRealArrayOfZeros(threadData_t *threadData, modelica_metatype _inDimension)
{
modelica_integer tmp1;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inDimension);
_outExp = omc_Expression_makeRealArrayOfZeros(threadData, tmp1);
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeListOfZeros(threadData_t *threadData, modelica_integer _inDimension)
{
modelica_metatype _outList = NULL;
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outList = tmpMeta[0];
if((_inDimension > ((modelica_integer) 0)))
{
tmp1 = ((modelica_integer) 1); tmp2 = 1; tmp3 = _inDimension;
if(!(((tmp2 > 0) && (tmp1 > tmp3)) || ((tmp2 < 0) && (tmp1 < tmp3))))
{
modelica_integer _i;
for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp1, tmp3); _i += tmp2)
{
tmpMeta[1] = mmc_mk_cons(_OMC_LIT135, _outList);
_outList = tmpMeta[1];
}
}
}
_return: OMC_LABEL_UNUSED
return _outList;
}
modelica_metatype boxptr_Expression_makeListOfZeros(threadData_t *threadData, modelica_metatype _inDimension)
{
modelica_integer tmp1;
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
tmp1 = mmc_unbox_integer(_inDimension);
_outList = omc_Expression_makeListOfZeros(threadData, tmp1);
return _outList;
}
DLLExport
modelica_metatype omc_Expression_makeConstZeroE(threadData_t *threadData, modelica_metatype _iExp)
{
modelica_metatype _const = NULL;
modelica_metatype _tp = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_tp = omc_Expression_typeof(threadData, _iExp);
_const = omc_Expression_makeConstZero(threadData, _tp);
_return: OMC_LABEL_UNUSED
return _const;
}
DLLExport
modelica_metatype omc_Expression_makeConstNumber(threadData_t *threadData, modelica_metatype _ty, modelica_integer _n)
{
modelica_metatype _exp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _ty;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_n));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(((modelica_real)_n)));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_exp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _exp;
}
modelica_metatype boxptr_Expression_makeConstNumber(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _n)
{
modelica_integer tmp1;
modelica_metatype _exp = NULL;
tmp1 = mmc_unbox_integer(_n);
_exp = omc_Expression_makeConstNumber(threadData, _ty, tmp1);
return _exp;
}
DLLExport
modelica_metatype omc_Expression_makeConstZero(threadData_t *threadData, modelica_metatype _inType)
{
modelica_metatype _const = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inType;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
tmpMeta[0] = _OMC_LIT135;
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _OMC_LIT136;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _OMC_LIT135;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_const = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _const;
}
DLLExport
modelica_metatype omc_Expression_makeConstOne(threadData_t *threadData, modelica_metatype _inType)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inType;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
tmpMeta[0] = _OMC_LIT4;
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _OMC_LIT6;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _OMC_LIT6;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeBoolExp(threadData_t *threadData, modelica_boolean _b)
{
modelica_metatype _e = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(6, &DAE_Exp_BCONST__desc, mmc_mk_boolean(_b));
_e = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _e;
}
modelica_metatype boxptr_Expression_makeBoolExp(threadData_t *threadData, modelica_metatype _b)
{
modelica_integer tmp1;
modelica_metatype _e = NULL;
tmp1 = mmc_unbox_integer(_b);
_e = omc_Expression_makeBoolExp(threadData, tmp1);
return _e;
}
DLLExport
modelica_metatype omc_Expression_makeRealExp(threadData_t *threadData, modelica_real _r)
{
modelica_metatype _e = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(_r));
_e = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _e;
}
modelica_metatype boxptr_Expression_makeRealExp(threadData_t *threadData, modelica_metatype _r)
{
modelica_real tmp1;
modelica_metatype _e = NULL;
tmp1 = mmc_unbox_real(_r);
_e = omc_Expression_makeRealExp(threadData, tmp1);
return _e;
}
DLLExport
modelica_metatype omc_Expression_makeIntegerExp(threadData_t *threadData, modelica_integer _i)
{
modelica_metatype _e = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
_e = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _e;
}
modelica_metatype boxptr_Expression_makeIntegerExp(threadData_t *threadData, modelica_metatype _i)
{
modelica_integer tmp1;
modelica_metatype _e = NULL;
tmp1 = mmc_unbox_integer(_i);
_e = omc_Expression_makeIntegerExp(threadData, tmp1);
return _e;
}
DLLExport
modelica_metatype omc_Expression_makeAsubAddIndex(threadData_t *threadData, modelica_metatype _e, modelica_integer _indx)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _e;
{
modelica_metatype tmp3_1;
tmp3_1 = _outExp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,21,2) == 0) goto tmp2_end;
tmpMeta[3] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_indx));
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outExp), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[3] = listAppend((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), tmpMeta[2]);
_outExp = tmpMeta[1];
tmpMeta[0] = _outExp;
goto tmp2_done;
}
case 1: {
tmpMeta[2] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_indx));
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = omc_Expression_makeASUB(threadData, _e, tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
modelica_metatype boxptr_Expression_makeAsubAddIndex(threadData_t *threadData, modelica_metatype _e, modelica_metatype _indx)
{
modelica_integer tmp1;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_indx);
_outExp = omc_Expression_makeAsubAddIndex(threadData, _e, tmp1);
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeDivVector(threadData_t *threadData, modelica_metatype _v, modelica_metatype _e1)
{
modelica_metatype _res = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = omc_List_map1(threadData, _v, boxvar_Expression_makeDiv, _e1);
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_Expression_makeDiv(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!(omc_Expression_isZero(threadData, _e1) && (!omc_Expression_isZero(threadData, _e2)))) goto tmp2_end;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 1: {
if (!omc_Expression_isOne(threadData, _e2)) goto tmp2_end;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 2: {
tmpMeta[0] = omc_Expression_expDiv(threadData, _e1, _e2);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_res = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_Expression_expDiv(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _outExp = NULL;
modelica_metatype _tp = NULL;
modelica_boolean _b;
modelica_metatype _op = NULL;
modelica_boolean tmp1;
modelica_boolean tmp2;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_tp = omc_Expression_typeof(threadData, _e1);
tmp1 = omc_Types_isIntegerOrRealOrSubTypeOfEither(threadData, _tp);
if (1 != tmp1) MMC_THROW_INTERNAL();
_b = omc_DAEUtil_expTypeArray(threadData, _tp);
tmp2 = (modelica_boolean)_b;
if(tmp2)
{
tmpMeta[0] = mmc_mk_box2(13, &DAE_Operator_DIV__ARR__desc, _tp);
tmpMeta[2] = tmpMeta[0];
}
else
{
tmpMeta[1] = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
tmpMeta[2] = tmpMeta[1];
}
_op = tmpMeta[2];
tmpMeta[0] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_checkIfOther(threadData_t *threadData, modelica_metatype _inTp)
{
modelica_metatype _outTp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inTp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT134;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inTp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outTp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTp;
}
DLLExport
modelica_metatype omc_Expression_makeProductLst(threadData_t *threadData, modelica_metatype _inExpLst)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExpLst;
{
modelica_metatype _e1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _es = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _explst = NULL;
modelica_string _str = NULL;
modelica_boolean _b_isZero;
modelica_boolean _b1;
modelica_boolean _b2;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 13; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 11;
tmpMeta[0] = _OMC_LIT6;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_e1 = tmpMeta[1];
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 2: {
modelica_boolean tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_e = tmpMeta[1];
_es = tmpMeta[2];
tmp5 = omc_Expression_isConstOne(threadData, _e);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = omc_Expression_makeProductLst(threadData, _es);
goto tmp2_done;
}
case 3: {
modelica_boolean tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_e = tmpMeta[4];
tmp6 = omc_Expression_isZero(threadData, _e);
if (1 != tmp6) goto goto_1;
goto goto_1;
goto tmp2_done;
}
case 4: {
modelica_boolean tmp7;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_e = tmpMeta[6];
tmp7 = omc_Expression_isZero(threadData, _e);
if (1 != tmp7) goto goto_1;
goto goto_1;
goto tmp2_done;
}
case 5: {
modelica_boolean tmp8;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_e = tmpMeta[1];
tmp8 = omc_Expression_isZero(threadData, _e);
if (1 != tmp8) goto goto_1;
tmpMeta[0] = _e;
goto tmp2_done;
}
case 6: {
modelica_boolean tmp9;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[7] = MMC_CAR(tmpMeta[2]);
tmpMeta[8] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[8])) goto tmp2_end;
_e1 = tmpMeta[3];
_tp = tmpMeta[5];
_e = tmpMeta[6];
_e2 = tmpMeta[7];
tmp9 = omc_Expression_isConstOne(threadData, _e1);
if (1 != tmp9) goto goto_1;
tmpMeta[1] = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta[1], _e);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 7: {
modelica_boolean tmp10;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],3,1) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_e2 = tmpMeta[1];
_e1 = tmpMeta[5];
_tp = tmpMeta[7];
_e = tmpMeta[8];
tmp10 = omc_Expression_isConstOne(threadData, _e1);
if (1 != tmp10) goto goto_1;
tmpMeta[1] = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta[1], _e);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 8: {
modelica_boolean tmp11;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_e1 = tmpMeta[3];
_tp = tmpMeta[5];
_e = tmpMeta[6];
_es = tmpMeta[2];
tmp11 = omc_Expression_isConstOne(threadData, _e1);
if (1 != tmp11) goto goto_1;
_p1 = omc_Expression_makeProductLst(threadData, _es);
tmpMeta[1] = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _tp);
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _p1, tmpMeta[1], _e);
_res = tmpMeta[2];
_b_isZero = omc_Expression_isZero(threadData, _p1);
tmpMeta[0] = (_b_isZero?omc_Expression_makeConstZero(threadData, omc_Expression_typeof(threadData, _e)):_res);
goto tmp2_done;
}
case 9: {
modelica_boolean tmp12;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp12 = omc_Expression_isConstOne(threadData, _e2);
if (1 != tmp12) goto goto_1;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 10: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
_b1 = omc_Expression_isZero(threadData, _e1);
_b2 = omc_Expression_isZero(threadData, _e2);
_b_isZero = (_b1 || _b2);
_tp = omc_Expression_typeof(threadData, _e1);
_tp = omc_Expression_checkIfOther(threadData, _tp);
tmpMeta[1] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta[1], _e2);
_res = tmpMeta[2];
tmpMeta[0] = (_b_isZero?omc_Expression_makeConstZero(threadData, _tp):_res);
goto tmp2_done;
}
case 11: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_e1 = tmpMeta[1];
_rest = tmpMeta[2];
_e2 = omc_Expression_makeProductLst(threadData, _rest);
_tp = omc_Expression_typeof(threadData, _e1);
_tp = omc_Expression_checkIfOther(threadData, _tp);
tmpMeta[1] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta[1], _e2);
_res = tmpMeta[2];
_b1 = omc_Expression_isZero(threadData, _e1);
_b2 = omc_Expression_isZero(threadData, _e2);
_b_isZero = (_b1 || _b2);
tmpMeta[0] = (_b_isZero?omc_Expression_makeConstZero(threadData, omc_Expression_typeof(threadData, _e1)):_res);
goto tmp2_done;
}
case 12: {
modelica_boolean tmp13;
_lst = tmp3_1;
tmp13 = omc_Flags_isSet(threadData, _OMC_LIT60);
if (1 != tmp13) goto goto_1;
omc_Debug_trace(threadData, _OMC_LIT137);
_explst = omc_List_map(threadData, _lst, boxvar_ExpressionDump_printExpStr);
_str = stringDelimitList(_explst, _OMC_LIT138);
omc_Debug_traceln(threadData, _str);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 13) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeProduct(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _product = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_cons(_e1, mmc_mk_cons(_e2, MMC_REFSTRUCTLIT(mmc_nil)));
_product = omc_Expression_makeProductLst(threadData, tmpMeta[0]);
_return: OMC_LABEL_UNUSED
return _product;
}
DLLExport
modelica_metatype omc_Expression_subVec(threadData_t *threadData, modelica_metatype _v, modelica_metatype _w)
{
modelica_metatype _y = NULL;
modelica_integer _size1;
modelica_integer _size2;
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_size1 = arrayLength(_v);
_size2 = arrayLength(_w);
if((_size1 != _size2))
{
fputs(MMC_STRINGDATA(_OMC_LIT139),stdout);
goto _return;
}
_y = arrayCreate(_size1, _OMC_LIT135);
tmp1 = ((modelica_integer) 1); tmp2 = 1; tmp3 = _size1;
if(!(((tmp2 > 0) && (tmp1 > tmp3)) || ((tmp2 < 0) && (tmp1 < tmp3))))
{
modelica_integer _i;
for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp1, tmp3); _i += tmp2)
{
arrayUpdate(_y, _i, omc_Expression_expSub(threadData, arrayGet(_v, _i), arrayGet(_w, _i)));
}
}
_return: OMC_LABEL_UNUSED
return _y;
}
DLLExport
modelica_metatype omc_Expression_addVec(threadData_t *threadData, modelica_metatype _v, modelica_metatype _w)
{
modelica_metatype _y = NULL;
modelica_integer _size1;
modelica_integer _size2;
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_size1 = arrayLength(_v);
_size2 = arrayLength(_w);
if((_size1 != _size2))
{
fputs(MMC_STRINGDATA(_OMC_LIT139),stdout);
goto _return;
}
_y = arrayCreate(_size1, _OMC_LIT135);
tmp1 = ((modelica_integer) 1); tmp2 = 1; tmp3 = _size1;
if(!(((tmp2 > 0) && (tmp1 > tmp3)) || ((tmp2 < 0) && (tmp1 < tmp3))))
{
modelica_integer _i;
for(_i = ((modelica_integer) 1); in_range_integer(_i, tmp1, tmp3); _i += tmp2)
{
arrayUpdate(_y, _i, omc_Expression_expAdd(threadData, arrayGet(_v, _i), arrayGet(_w, _i)));
}
}
_return: OMC_LABEL_UNUSED
return _y;
}
DLLExport
modelica_metatype omc_Expression_lenVec(threadData_t *threadData, modelica_metatype _v)
{
modelica_metatype _len = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_len = omc_Expression_makeScalarProduct(threadData, _v, _v);
tmpMeta[0] = mmc_mk_cons(_len, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT140, tmpMeta[0], _OMC_LIT141);
_len = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _len;
}
DLLExport
modelica_metatype omc_Expression_makeScalarProduct(threadData_t *threadData, modelica_metatype _v, modelica_metatype _w)
{
modelica_metatype _s = NULL;
modelica_integer _size1;
modelica_integer _size2;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_s = _OMC_LIT135;
_size1 = arrayLength(_v);
_size2 = arrayLength(_w);
if((_size1 != _size2))
{
fputs(MMC_STRINGDATA(_OMC_LIT142),stdout);
goto _return;
}
{
modelica_metatype __omcQ_24tmpVar17;
modelica_metatype* tmp1;
modelica_metatype __omcQ_24tmpVar16;
int tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_integer _i;
tmp3 = 1;
tmp4 = _size1;
_i = ((modelica_integer) 1);
_i = (((modelica_integer) 1) /* Range start-value */)-tmp3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar17 = tmpMeta[1];
tmp1 = &__omcQ_24tmpVar17;
while(1) {
tmp2 = 1;
if (tmp3 > 0 ? _i+tmp3 <= tmp4 : _i+tmp3 >= tmp4) {
_i += tmp3;
tmp2--;
}
if (tmp2 == 0) {
__omcQ_24tmpVar16 = omc_Expression_expMul(threadData, arrayGet(_v, _i), arrayGet(_w, _i));
*tmp1 = mmc_mk_cons(__omcQ_24tmpVar16,0);
tmp1 = &MMC_CDR(*tmp1);
} else if (tmp2 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp1 = mmc_mk_nil();
tmpMeta[0] = __omcQ_24tmpVar17;
}
_s = omc_Expression_makeSum1(threadData, tmpMeta[0], 0);
_s = omc_ExpressionSimplify_simplify(threadData, _s, NULL);
_return: OMC_LABEL_UNUSED
return _s;
}
DLLExport
modelica_metatype omc_Expression_makeProductVector(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _v)
{
modelica_metatype _res = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = omc_List_map1(threadData, _v, boxvar_Expression_makeProduct, _e1);
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_Expression_expOptMinScalar(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _e1;
tmp3_2 = _e2;
{
modelica_metatype _e11 = NULL;
modelica_metatype _e22 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 1: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _e2;
goto tmp2_done;
}
case 2: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
_e11 = tmpMeta[1];
_e22 = tmpMeta[2];
tmpMeta[0] = mmc_mk_some(omc_Expression_expMinScalar(threadData, _e11, _e22));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expMinScalar(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _outExp = NULL;
modelica_metatype _tp = NULL;
modelica_boolean _b;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_tp = omc_Expression_typeof(threadData, _e1);
tmpMeta[0] = mmc_mk_cons(_e1, mmc_mk_cons(_e2, MMC_REFSTRUCTLIT(mmc_nil)));
tmpMeta[1] = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _tp, mmc_mk_boolean(0), mmc_mk_boolean(1), mmc_mk_boolean(0), mmc_mk_boolean(0), _OMC_LIT35, _OMC_LIT36);
tmpMeta[2] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT144, tmpMeta[0], tmpMeta[1]);
_outExp = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expOptMaxScalar(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _e1;
tmp3_2 = _e2;
{
modelica_metatype _e11 = NULL;
modelica_metatype _e22 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 1: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _e2;
goto tmp2_done;
}
case 2: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
_e11 = tmpMeta[1];
_e22 = tmpMeta[2];
tmpMeta[0] = mmc_mk_some(omc_Expression_expMaxScalar(threadData, _e11, _e22));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expMaxScalar(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _outExp = NULL;
modelica_metatype _tp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_tp = omc_Expression_typeof(threadData, _e1);
tmpMeta[0] = mmc_mk_cons(_e1, mmc_mk_cons(_e2, MMC_REFSTRUCTLIT(mmc_nil)));
tmpMeta[1] = mmc_mk_box8(3, &DAE_CallAttributes_CALL__ATTR__desc, _tp, mmc_mk_boolean(0), mmc_mk_boolean(1), mmc_mk_boolean(0), mmc_mk_boolean(0), _OMC_LIT35, _OMC_LIT36);
tmpMeta[2] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT146, tmpMeta[0], tmpMeta[1]);
_outExp = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expPowLst(threadData_t *threadData, modelica_metatype _expLst, modelica_metatype _n)
{
modelica_metatype _outExp = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = omc_List_map1(threadData, _expLst, boxvar_Expression_expPow, _n);
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expPow(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _e1;
tmp3_2 = _e2;
{
modelica_metatype _tp = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _e4 = NULL;
modelica_metatype _e5 = NULL;
modelica_boolean _b;
modelica_metatype _op = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 9; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!omc_Expression_isOne(threadData, _e2)) goto tmp2_end;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 1: {
if (!omc_Expression_isZero(threadData, _e2)) goto tmp2_end;
tmpMeta[0] = omc_Expression_makeConstOne(threadData, omc_Expression_typeof(threadData, _e1));
goto tmp2_done;
}
case 2: {
if (!omc_Expression_isConstOne(threadData, _e1)) goto tmp2_end;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 3: {
if (!(omc_Expression_isZero(threadData, _e1) && omc_Expression_expIsPositive(threadData, _e2))) goto tmp2_end;
tmpMeta[0] = omc_Expression_makeConstZero(threadData, omc_Expression_typeof(threadData, _e1));
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[2];
if (!omc_Expression_isEven(threadData, _e2)) goto tmp2_end;
_e1 = _e;
goto _tailrecursive;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,8,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],5,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_e3 = tmpMeta[1];
_e4 = tmpMeta[3];
_e5 = tmpMeta[5];
_e = omc_Expression_makeDiv(threadData, _e4, _e3);
_e1 = _e;
_e2 = _e5;
goto _tailrecursive;
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e3 = tmpMeta[1];
_e4 = tmpMeta[3];
if (!omc_Expression_isNegativeOrZero(threadData, _e2)) goto tmp2_end;
_e1 = omc_Expression_makeDiv(threadData, _e4, _e3);
_e2 = omc_Expression_negate(threadData, _e2);
goto _tailrecursive;
goto tmp2_done;
}
case 7: {
if (!omc_Expression_isHalf(threadData, _e2)) goto tmp2_end;
tmpMeta[1] = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT140, tmpMeta[1], _OMC_LIT141);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 8: {
modelica_boolean tmp5;
_tp = omc_Expression_typeof(threadData, _e1);
_b = omc_DAEUtil_expTypeArray(threadData, _tp);
tmp5 = (modelica_boolean)_b;
if(tmp5)
{
tmpMeta[1] = mmc_mk_box2(23, &DAE_Operator_POW__ARR__desc, _tp);
tmpMeta[3] = tmpMeta[1];
}
else
{
tmpMeta[2] = mmc_mk_box2(7, &DAE_Operator_POW__desc, _tp);
tmpMeta[3] = tmpMeta[2];
}
_op = tmpMeta[3];
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expMul(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _e1;
tmp3_2 = _e2;
{
modelica_metatype _tp = NULL;
modelica_boolean _b1;
modelica_boolean _b2;
modelica_metatype _op = NULL;
modelica_real _r1;
modelica_real _r2;
modelica_integer _i1;
modelica_integer _i2;
modelica_metatype _e1_1 = NULL;
modelica_metatype _e2_1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 9; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmp5 = omc_Expression_isZero(threadData, _e1);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
tmp6 = omc_Expression_isZero(threadData, _e2);
if (1 != tmp6) goto goto_1;
tmpMeta[0] = _e2;
goto tmp2_done;
}
case 2: {
modelica_real tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp7 = mmc_unbox_real(tmpMeta[1]);
if (1.0 != tmp7) goto tmp2_end;
tmpMeta[0] = _e2;
goto tmp2_done;
}
case 3: {
modelica_real tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp8 = mmc_unbox_real(tmpMeta[1]);
if (1.0 != tmp8) goto tmp2_end;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 4: {
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp9 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp9) goto tmp2_end;
tmpMeta[0] = _e2;
goto tmp2_done;
}
case 5: {
modelica_integer tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp10 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp10) goto tmp2_end;
tmp3 += 1;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 6: {
modelica_real tmp11;
modelica_real tmp12;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp11 = mmc_unbox_real(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp12 = mmc_unbox_real(tmpMeta[2]);
_r1 = tmp11;
_r2 = tmp12;
tmp3 += 1;
_r1 = (_r1) * (_r2);
tmpMeta[1] = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(_r1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
modelica_integer tmp13;
modelica_integer tmp14;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp13 = mmc_unbox_integer(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp14 = mmc_unbox_integer(tmpMeta[2]);
_i1 = tmp13;
_i2 = tmp14;
_i1 = (_i1) * (_i2);
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 8: {
modelica_boolean tmp15;
modelica_boolean tmp16;
modelica_boolean tmp17;
modelica_boolean tmp18;
_tp = omc_Expression_typeof(threadData, _e1);
tmp15 = omc_Types_isIntegerOrRealOrSubTypeOfEither(threadData, _tp);
if (1 != tmp15) goto goto_1;
_b1 = omc_DAEUtil_expTypeArray(threadData, _tp);
_tp = omc_Expression_typeof(threadData, _e2);
tmp16 = omc_Types_isIntegerOrRealOrSubTypeOfEither(threadData, _tp);
if (1 != tmp16) goto goto_1;
_b2 = omc_DAEUtil_expTypeArray(threadData, _tp);
_e1_1 = omc_Util_swap(threadData, ((!_b1) && _b2), _e1, _e2 ,&_e2_1);
tmp18 = (modelica_boolean)(_b1 && _b2);
if(tmp18)
{
tmpMeta[1] = mmc_mk_box2(12, &DAE_Operator_MUL__ARR__desc, _tp);
tmpMeta[5] = tmpMeta[1];
}
else
{
tmp17 = (modelica_boolean)((!_b1 && !_b2) || (_b1 && _b2));
if(tmp17)
{
tmpMeta[2] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
tmpMeta[4] = tmpMeta[2];
}
else
{
tmpMeta[3] = mmc_mk_box2(14, &DAE_Operator_MUL__ARRAY__SCALAR__desc, _tp);
tmpMeta[4] = tmpMeta[3];
}
tmpMeta[5] = tmpMeta[4];
}
_op = tmpMeta[5];
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1_1, _op, _e2_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 9) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeSum(threadData_t *threadData, modelica_metatype _inExpLst)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExpLst;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _res = NULL;
modelica_boolean _b1;
modelica_metatype _tp = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _explst = NULL;
modelica_string _str = NULL;
modelica_metatype _op = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 7; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 5;
tmpMeta[0] = _OMC_LIT135;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_e1 = tmpMeta[1];
tmp3 += 3;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 2: {
modelica_boolean tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp5 = omc_Expression_isZero(threadData, _e1);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _e2;
goto tmp2_done;
}
case 3: {
modelica_boolean tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp6 = omc_Expression_isZero(threadData, _e2);
if (1 != tmp6) goto goto_1;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 4: {
modelica_boolean tmp7;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
_tp = omc_Expression_typeof(threadData, _e1);
_b = omc_DAEUtil_expTypeArray(threadData, _tp);
tmp7 = (modelica_boolean)_b;
if(tmp7)
{
tmpMeta[1] = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _tp);
tmpMeta[3] = tmpMeta[1];
}
else
{
tmpMeta[2] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
tmpMeta[3] = tmpMeta[2];
}
_op = tmpMeta[3];
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
modelica_boolean tmp8;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_e1 = tmpMeta[1];
_rest = tmpMeta[2];
_b1 = omc_Expression_isZero(threadData, _e1);
_e2 = omc_Expression_makeSum(threadData, _rest);
_tp = omc_Expression_typeof(threadData, _e2);
_b = omc_DAEUtil_expTypeArray(threadData, _tp);
tmp8 = (modelica_boolean)_b;
if(tmp8)
{
tmpMeta[1] = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _tp);
tmpMeta[3] = tmpMeta[1];
}
else
{
tmpMeta[2] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
tmpMeta[3] = tmpMeta[2];
}
_op = tmpMeta[3];
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
_res = tmpMeta[1];
tmpMeta[0] = (_b1?_e2:_res);
goto tmp2_done;
}
case 6: {
modelica_boolean tmp9;
_lst = tmp3_1;
tmp9 = omc_Flags_isSet(threadData, _OMC_LIT60);
if (1 != tmp9) goto goto_1;
omc_Debug_trace(threadData, _OMC_LIT147);
_explst = omc_List_map(threadData, _lst, boxvar_ExpressionDump_printExpStr);
_str = stringDelimitList(_explst, _OMC_LIT138);
omc_Debug_traceln(threadData, _str);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 7) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makeSumWork(threadData_t *threadData, modelica_metatype _inExpLst, modelica_boolean _simplify)
{
modelica_metatype _outExp = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _eLst = NULL;
modelica_metatype _op = NULL;
modelica_boolean tmp1;
modelica_boolean tmp2;
modelica_boolean tmp3;
modelica_boolean tmp4;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inExpLst;
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_eLst = tmpMeta[1];
_rest = tmpMeta[2];
_tp = omc_Expression_typeof(threadData, _eLst);
tmp1 = (modelica_boolean)omc_DAEUtil_expTypeArray(threadData, _tp);
if(tmp1)
{
tmpMeta[0] = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _tp);
tmpMeta[2] = tmpMeta[0];
}
else
{
tmpMeta[1] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
tmpMeta[2] = tmpMeta[1];
}
_op = tmpMeta[2];
_outExp = _eLst;
{
modelica_metatype _elem;
for (tmpMeta[0] = _rest; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_elem = MMC_CAR(tmpMeta[0]);
tmp4 = (modelica_boolean)omc_Expression_isZero(threadData, _elem);
if(tmp4)
{
tmpMeta[5] = _outExp;
}
else
{
tmp3 = (modelica_boolean)omc_Expression_isZero(threadData, _outExp);
if(tmp3)
{
tmpMeta[4] = _elem;
}
else
{
tmp2 = (modelica_boolean)_simplify;
if(tmp2)
{
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _outExp, _op, _elem);
tmpMeta[3] = omc_ExpressionSimplify_simplify1(threadData, tmpMeta[1], NULL);
}
else
{
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _outExp, _op, _elem);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[4] = tmpMeta[3];
}
tmpMeta[5] = tmpMeta[4];
}
_outExp = tmpMeta[5];
}
}
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_makeSumWork(threadData_t *threadData, modelica_metatype _inExpLst, modelica_metatype _simplify)
{
modelica_integer tmp1;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_simplify);
_outExp = omc_Expression_makeSumWork(threadData, _inExpLst, tmp1);
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeSum1(threadData_t *threadData, modelica_metatype _inExpLst, modelica_boolean _simplify)
{
modelica_metatype _outExp = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExpLst;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[0] = _OMC_LIT135;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_e1 = tmpMeta[1];
tmp3 += 1;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmpMeta[0] = omc_Expression_expAdd(threadData, _e1, _e2);
goto tmp2_done;
}
case 3: {
tmpMeta[0] = omc_Expression_makeSumWork(threadData, _inExpLst, _simplify);
goto tmp2_done;
}
case 4: {
if(omc_Flags_isSet(threadData, _OMC_LIT60))
{
omc_Debug_trace(threadData, _OMC_LIT148);
omc_Debug_trace(threadData, omc_ExpressionDump_printExpListStr(threadData, _inExpLst));
}
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
modelica_metatype boxptr_Expression_makeSum1(threadData_t *threadData, modelica_metatype _inExpLst, modelica_metatype _simplify)
{
modelica_integer tmp1;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_simplify);
_outExp = omc_Expression_makeSum1(threadData, _inExpLst, tmp1);
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeLBinary(threadData_t *threadData, modelica_metatype _inExpLst, modelica_metatype _op)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inExpLst;
tmp3_2 = _op;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,22,1) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT20;
goto tmp2_done;
}
case 1: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,23,1) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT18;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_e1 = tmpMeta[1];
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box4(12, &DAE_Exp_LBINARY__desc, _e1, _op, _e2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_e1 = tmpMeta[1];
_rest = tmpMeta[2];
_res = omc_Expression_makeLBinary(threadData, _rest, _op);
tmpMeta[1] = mmc_mk_box4(12, &DAE_Exp_LBINARY__desc, _e1, _op, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
tmpMeta[1] = stringAppend(_OMC_LIT149,omc_ExpressionDump_lbinopSymbol(threadData, _op));
_str = tmpMeta[1];
tmpMeta[1] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addMessage(threadData, _OMC_LIT31, tmpMeta[1]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeDifference(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _res = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = omc_Expression_makeDiff(threadData, _e1, _e2);
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_Expression_makeDiff(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _res = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = (omc_Expression_isZero(threadData, _e2)?_e1:(omc_Expression_isZero(threadData, _e1)?omc_Expression_negate(threadData, _e2):omc_Expression_expSub(threadData, _e1, _e2)));
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_Expression_expSub(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _e1;
tmp3_2 = _e2;
{
modelica_metatype _tp = NULL;
modelica_boolean _b;
modelica_metatype _op = NULL;
modelica_real _r1;
modelica_real _r2;
modelica_integer _i1;
modelica_integer _i2;
modelica_metatype _e = NULL;
modelica_metatype _x = NULL;
modelica_metatype _y = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 13; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmp5 = omc_Expression_isZero(threadData, _e1);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = omc_Expression_negate(threadData, _e2);
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
tmp6 = omc_Expression_isZero(threadData, _e2);
if (1 != tmp6) goto goto_1;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 2: {
modelica_real tmp7;
modelica_real tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp7 = mmc_unbox_real(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp8 = mmc_unbox_real(tmpMeta[2]);
_r1 = tmp7;
_r2 = tmp8;
tmp3 += 9;
_r1 = _r1 - _r2;
tmpMeta[1] = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(_r1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
modelica_integer tmp9;
modelica_integer tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp9 = mmc_unbox_integer(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp10 = mmc_unbox_integer(tmpMeta[2]);
_i1 = tmp9;
_i2 = tmp10;
tmp3 += 8;
_i1 = _i1 - _i2;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_e = tmpMeta[2];
tmp3 += 5;
tmpMeta[0] = omc_Expression_expAdd(threadData, _e1, _e);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_e = tmpMeta[2];
tmp3 += 4;
tmpMeta[0] = omc_Expression_expAdd(threadData, _e1, _e);
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],5,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmp3 += 3;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expAdd(threadData, _e1, tmpMeta[1]);
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],9,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmp3 += 2;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expAdd(threadData, _e1, tmpMeta[1]);
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],5,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmp3 += 1;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expAdd(threadData, _e1, tmpMeta[1]);
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],10,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expAdd(threadData, _e1, tmpMeta[1]);
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[2];
tmp3 += 1;
_e = omc_Expression_expAdd(threadData, _e, _e2);
tmpMeta[0] = omc_Expression_negate(threadData, _e);
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[2];
_e = omc_Expression_expAdd(threadData, _e, _e2);
tmpMeta[0] = omc_Expression_negate(threadData, _e);
goto tmp2_done;
}
case 12: {
modelica_boolean tmp11;
_tp = omc_Expression_typeof(threadData, _e1);
if(omc_Types_isIntegerOrRealOrSubTypeOfEither(threadData, _tp))
{
_b = omc_DAEUtil_expTypeArray(threadData, _tp);
tmp11 = (modelica_boolean)_b;
if(tmp11)
{
tmpMeta[1] = mmc_mk_box2(11, &DAE_Operator_SUB__ARR__desc, _tp);
tmpMeta[3] = tmpMeta[1];
}
else
{
tmpMeta[2] = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
tmpMeta[3] = tmpMeta[2];
}
_op = tmpMeta[3];
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
_outExp = tmpMeta[1];
}
else
{
if(omc_Types_isEnumeration(threadData, _tp))
{
tmpMeta[1] = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _tp);
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta[1], _e2);
_outExp = tmpMeta[2];
}
else
{
goto goto_1;
}
}
tmpMeta[0] = _outExp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 13) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expAdd(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _e1;
tmp3_2 = _e2;
{
modelica_metatype _tp = NULL;
modelica_boolean _b;
modelica_metatype _op = NULL;
modelica_real _r1;
modelica_real _r2;
modelica_integer _i1;
modelica_integer _i2;
modelica_metatype _e = NULL;
modelica_metatype _x = NULL;
modelica_metatype _y = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 18; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmp5 = omc_Expression_isZero(threadData, _e1);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _e2;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
tmp6 = omc_Expression_isZero(threadData, _e2);
if (1 != tmp6) goto goto_1;
tmpMeta[0] = _e1;
goto tmp2_done;
}
case 2: {
modelica_real tmp7;
modelica_real tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp7 = mmc_unbox_real(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp8 = mmc_unbox_real(tmpMeta[2]);
_r1 = tmp7;
_r2 = tmp8;
tmp3 += 13;
_r1 = _r1 + _r2;
tmpMeta[1] = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(_r1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
modelica_integer tmp9;
modelica_integer tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp9 = mmc_unbox_integer(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmp10 = mmc_unbox_integer(tmpMeta[2]);
_i1 = tmp9;
_i2 = tmp10;
tmp3 += 12;
_i1 = _i1 + _i2;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_e = tmpMeta[2];
tmp3 += 5;
tmpMeta[0] = omc_Expression_expSub(threadData, _e1, _e);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_e = tmpMeta[2];
tmp3 += 4;
tmpMeta[0] = omc_Expression_expSub(threadData, _e1, _e);
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],5,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmp3 += 3;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expSub(threadData, _e1, tmpMeta[1]);
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],9,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmp3 += 2;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expSub(threadData, _e1, tmpMeta[1]);
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],5,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmp3 += 1;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expSub(threadData, _e1, tmpMeta[1]);
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],10,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expSub(threadData, _e1, tmpMeta[1]);
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[2];
tmp3 += 5;
tmpMeta[0] = omc_Expression_expSub(threadData, _e2, _e);
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[2];
tmp3 += 4;
tmpMeta[0] = omc_Expression_expSub(threadData, _e2, _e);
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],5,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmp3 += 3;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expSub(threadData, _e2, tmpMeta[1]);
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],9,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmp3 += 2;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expSub(threadData, _e2, tmpMeta[1]);
goto tmp2_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],5,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmp3 += 1;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expSub(threadData, _e2, tmpMeta[1]);
goto tmp2_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],10,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_x = tmpMeta[3];
_op = tmpMeta[4];
_y = tmpMeta[5];
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _x, _op, _y);
tmpMeta[0] = omc_Expression_expSub(threadData, _e2, tmpMeta[1]);
goto tmp2_done;
}
case 16: {
modelica_boolean tmp11;
modelica_boolean tmp12;
_tp = omc_Expression_typeof(threadData, _e1);
tmp11 = omc_Types_isIntegerOrRealOrSubTypeOfEither(threadData, _tp);
if (1 != tmp11) goto goto_1;
_b = omc_DAEUtil_expTypeArray(threadData, _tp);
tmp12 = (modelica_boolean)_b;
if(tmp12)
{
tmpMeta[1] = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _tp);
tmpMeta[3] = tmpMeta[1];
}
else
{
tmpMeta[2] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
tmpMeta[3] = tmpMeta[2];
}
_op = tmpMeta[3];
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 17: {
modelica_boolean tmp13;
_tp = omc_Expression_typeof(threadData, _e1);
tmp13 = omc_Types_isEnumeration(threadData, _tp);
if (1 != tmp13) goto goto_1;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _tp);
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta[1], _e2);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 18) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeRealAdd(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _inExp1, _OMC_LIT150, _inExp2);
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeRealArray(threadData_t *threadData, modelica_metatype _expl)
{
modelica_metatype _outExp = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = omc_Expression_makeScalarArray(threadData, _expl, _OMC_LIT134);
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeScalarArray(threadData_t *threadData, modelica_metatype _inExpLst, modelica_metatype _et)
{
modelica_metatype _outExp = NULL;
modelica_integer _i;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_i = listLength(_inExpLst);
tmpMeta[1] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(_i));
tmpMeta[0] = mmc_mk_cons(tmpMeta[1], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _et, tmpMeta[0]);
tmpMeta[3] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, tmpMeta[2], mmc_mk_boolean(1), _inExpLst);
_outExp = tmpMeta[3];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeArrayFromList(threadData_t *threadData, modelica_metatype _inElements)
{
modelica_metatype _outArray = NULL;
modelica_metatype _ty = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ty = omc_Expression_typeof(threadData, listHead(_inElements));
tmpMeta[1] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(listLength(_inElements)));
tmpMeta[0] = mmc_mk_cons(tmpMeta[1], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, tmpMeta[0]);
tmpMeta[3] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, tmpMeta[2], mmc_mk_boolean((!omc_Types_isArray(threadData, _ty))), _inElements);
_outArray = tmpMeta[3];
_return: OMC_LABEL_UNUSED
return _outArray;
}
DLLExport
modelica_metatype omc_Expression_makeArray(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inType, modelica_boolean _inScalar)
{
modelica_metatype _outArray = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _inType, mmc_mk_boolean(_inScalar), _inElements);
_outArray = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outArray;
}
modelica_metatype boxptr_Expression_makeArray(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inType, modelica_metatype _inScalar)
{
modelica_integer tmp1;
modelica_metatype _outArray = NULL;
tmp1 = mmc_unbox_integer(_inScalar);
_outArray = omc_Expression_makeArray(threadData, _inElements, _inType, tmp1);
return _outArray;
}
DLLExport
modelica_metatype omc_Expression_generateCrefsExpLstFromExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefPrefix)
{
modelica_metatype _outCrefExpList = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inExp;
tmp3_2 = _inCrefPrefix;
{
modelica_string _name = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _incref = NULL;
modelica_metatype _e = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _explst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 8; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,19,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_explst = tmpMeta[1];
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map1(threadData, _explst, boxvar_Expression_generateCrefsExpLstFromExp, _inCrefPrefix));
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_explst = tmpMeta[1];
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map1(threadData, _explst, boxvar_Expression_generateCrefsExpLstFromExp, _inCrefPrefix));
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],9,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_p1 = tmpMeta[1];
_explst = tmpMeta[2];
_p2 = tmpMeta[6];
if (!omc_AbsynUtil_pathEqual(threadData, _p1, _p2)) goto tmp2_end;
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map1(threadData, _explst, boxvar_Expression_generateCrefsExpLstFromExp, _inCrefPrefix));
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (3 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],6,2) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (!listEmpty(tmpMeta[5])) goto tmp2_end;
_incref = tmpMeta[6];
_cr = omc_ComponentReference_crefPrefixDer(threadData, _incref);
_e = omc_Expression_crefExp(threadData, _cr);
_inExp = _e;
goto _tailrecursive;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
_cr = tmpMeta[1];
_ty = tmpMeta[2];
_incref = tmpMeta[3];
_name = omc_ComponentReference_crefModelicaStr(threadData, _cr);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_cr = omc_ComponentReference_crefPrependIdent(threadData, _incref, _name, tmpMeta[1], _ty);
_e = omc_Expression_makeCrefExp(threadData, _cr, _ty);
tmpMeta[1] = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
if (!optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[1] = mmc_mk_cons(_inExp, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
_inExp = _e;
goto _tailrecursive;
goto tmp2_done;
}
case 7: {
tmpMeta[1] = stringAppend(_OMC_LIT151,omc_ExpressionDump_printExpStr(threadData, _inExp));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT42);
fputs(MMC_STRINGDATA(tmpMeta[2]),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCrefExpList = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCrefExpList;
}
DLLExport
modelica_metatype omc_Expression_generateCrefsExpFromExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefPrefix)
{
modelica_metatype _outCrefExp = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_string _name = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _e = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _explst = NULL;
modelica_boolean _b;
modelica_metatype _attr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,0) == 0) goto tmp2_end;
tmpMeta[0] = _inExp;
goto tmp2_done;
}
case 1: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ty = tmpMeta[1];
_b = tmp5;
_explst = tmpMeta[3];
_explst = omc_List_map1(threadData, _explst, boxvar_Expression_generateCrefsExpFromExp, _inCrefPrefix);
tmpMeta[1] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _ty, mmc_mk_boolean(_b), _explst);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],9,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_p1 = tmpMeta[1];
_explst = tmpMeta[2];
_attr = tmpMeta[3];
_p2 = tmpMeta[6];
tmp6 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp6) goto goto_1;
_explst = omc_List_map1(threadData, _explst, boxvar_Expression_generateCrefsExpFromExp, _inCrefPrefix);
tmpMeta[1] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _p1, _explst, _attr);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr = tmpMeta[1];
_ty = tmpMeta[2];
_name = omc_ComponentReference_crefModelicaStr(threadData, _cr);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_cr = omc_ComponentReference_crefPrependIdent(threadData, _inCrefPrefix, _name, tmpMeta[1], _ty);
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _cr, _ty);
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
tmpMeta[0] = omc_Expression_negate(threadData, omc_Expression_generateCrefsExpFromExp(threadData, _e, _inCrefPrefix));
goto tmp2_done;
}
case 5: {
tmpMeta[1] = stringAppend(_OMC_LIT152,omc_ExpressionDump_printExpStr(threadData, _inExp));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT42);
fputs(MMC_STRINGDATA(tmpMeta[2]),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCrefExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCrefExp;
}
DLLExport
modelica_metatype omc_Expression_generateCrefsFromExpVar(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inCrefPrefix)
{
modelica_metatype _outCref = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inVar;
{
modelica_string _name = NULL;
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_name = tmpMeta[1];
_ty = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = omc_ComponentReference_crefPrependIdent(threadData, _inCrefPrefix, _name, tmpMeta[1], _ty);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCref;
}
DLLExport
modelica_metatype omc_Expression_generateCrefsExpFromExpVar(threadData_t *threadData, modelica_metatype _inVar, modelica_metatype _inCrefPrefix)
{
modelica_metatype _outCrefExp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inVar;
{
modelica_string _name = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_name = tmpMeta[1];
_ty = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_cr = omc_ComponentReference_crefPrependIdent(threadData, _inCrefPrefix, _name, tmpMeta[1], _ty);
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _cr, _ty);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCrefExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCrefExp;
}
DLLExport
modelica_metatype omc_Expression_makeTuple(threadData_t *threadData, modelica_metatype _inExps)
{
modelica_metatype _outExp = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmp1 = (modelica_boolean)(listLength(_inExps) > ((modelica_integer) 1));
if(tmp1)
{
tmpMeta[0] = mmc_mk_box2(22, &DAE_Exp_TUPLE__desc, _inExps);
tmpMeta[1] = tmpMeta[0];
}
else
{
tmpMeta[1] = omc_List_first(threadData, _inExps);
}
_outExp = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeASUBSingleSub(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _sub)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_cons(_sub, MMC_REFSTRUCTLIT(mmc_nil));
_outExp = omc_Expression_makeASUB(threadData, _exp, tmpMeta[0]);
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeASUB(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inSubs)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inExp;
tmp3_2 = _inSubs;
{
modelica_metatype _exp = NULL;
modelica_metatype _subs = NULL;
modelica_metatype _subs1 = NULL;
modelica_metatype _subs2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,21,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exp = tmpMeta[1];
_subs1 = tmpMeta[2];
_subs2 = tmp3_2;
_subs = listAppend(_subs1, _subs2);
tmpMeta[1] = mmc_mk_box3(24, &DAE_Exp_ASUB__desc, _exp, _subs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if(omc_Flags_isSet(threadData, _OMC_LIT162))
{
{
modelica_metatype tmp7_1;
tmp7_1 = _inExp;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,6,2) == 0) goto tmp6_end;
tmpMeta[1] = stringAppend(_OMC_LIT153,omc_ExpressionDump_printExpStr(threadData, _inExp));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT154);
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT155);
tmpMeta[4] = stringAppend(tmpMeta[3],stringDelimitList(omc_List_map(threadData, _inSubs, boxvar_ExpressionDump_printExpStr), _OMC_LIT156));
tmpMeta[5] = stringAppend(tmpMeta[4],_OMC_LIT157);
tmpMeta[6] = stringAppend(tmpMeta[5],_OMC_LIT158);
omc_Debug_traceln(threadData, tmpMeta[6]);
goto tmp6_done;
}
case 1: {
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
;
}
tmpMeta[1] = mmc_mk_box3(24, &DAE_Exp_ASUB__desc, _inExp, _inSubs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_crefExp(threadData_t *threadData, modelica_metatype _cr)
{
modelica_metatype _cref = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _ty1 = NULL;
modelica_metatype _ty2 = NULL;
modelica_metatype _subs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_ty1 = omc_ComponentReference_crefLastType(threadData, _cr);
{
modelica_metatype tmp7_1;
tmp7_1 = _ty1;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,6,2) == 0) goto tmp6_end;
_subs = omc_ComponentReference_crefLastSubs(threadData, _cr);
_ty2 = omc_Expression_unliftArrayTypeWithSubs(threadData, _subs, _ty1);
tmpMeta[2] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr, _ty2);
tmpMeta[1] = tmpMeta[2];
goto tmp6_done;
}
case 1: {
tmpMeta[2] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr, _ty1);
tmpMeta[1] = tmpMeta[2];
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_cref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _cref;
}
DLLExport
modelica_metatype omc_Expression_crefToExp(threadData_t *threadData, modelica_metatype _cr)
{
modelica_metatype _cref = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cr, omc_ComponentReference_crefTypeFull(threadData, _cr));
_cref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _cref;
}
DLLExport
modelica_metatype omc_Expression_makeCrefExp(threadData_t *threadData, modelica_metatype _inCref, modelica_metatype _inExpType)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inCref;
tmp3_2 = _inExpType;
{
modelica_metatype _cref = NULL;
modelica_metatype _tGiven = NULL;
modelica_metatype _tExisting = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_cref = tmp3_1;
_tGiven = tmp3_2;
if(omc_Flags_isSet(threadData, _OMC_LIT169))
{
_tExisting = omc_ComponentReference_crefLastType(threadData, _cref);
if((!valueEq(_tGiven, _tExisting)))
{
tmpMeta[1] = stringAppend(_OMC_LIT163,omc_ComponentReference_printComponentRefStr(threadData, _cref));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT164);
tmpMeta[3] = stringAppend(tmpMeta[2],omc_Types_unparseType(threadData, _tGiven));
tmpMeta[4] = stringAppend(tmpMeta[3],_OMC_LIT165);
tmpMeta[5] = stringAppend(tmpMeta[4],omc_Types_unparseType(threadData, _tExisting));
omc_Debug_traceln(threadData, tmpMeta[5]);
}
}
tmpMeta[1] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cref, _tGiven);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_makeNestedIf(threadData_t *threadData, modelica_metatype _inConds, modelica_metatype _inTbExps, modelica_metatype _fExp)
{
modelica_metatype _ifExp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inConds;
tmp3_2 = _inTbExps;
{
modelica_metatype _c = NULL;
modelica_metatype _tbExp = NULL;
modelica_metatype _conds = NULL;
modelica_metatype _tbExps = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_2);
tmpMeta[4] = MMC_CDR(tmp3_2);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_c = tmpMeta[1];
_tbExp = tmpMeta[3];
tmpMeta[1] = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _c, _tbExp, _fExp);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_2);
tmpMeta[4] = MMC_CDR(tmp3_2);
_c = tmpMeta[1];
_conds = tmpMeta[2];
_tbExp = tmpMeta[3];
_tbExps = tmpMeta[4];
_ifExp = omc_Expression_makeNestedIf(threadData, _conds, _tbExps, _fExp);
tmpMeta[1] = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, _c, _tbExp, _ifExp);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_ifExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _ifExp;
}
DLLExport
modelica_metatype omc_Expression_makeSign(threadData_t *threadData, modelica_metatype _e1)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT170, tmpMeta[0], _OMC_LIT141);
_res = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_Expression_makeAbs(threadData_t *threadData, modelica_metatype _e1)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT171, tmpMeta[0], _OMC_LIT141);
_res = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_Expression_makeNoEvent(threadData_t *threadData, modelica_metatype _e1)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_cons(_e1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT172, tmpMeta[0], _OMC_LIT174);
_res = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_Expression_flattenArrayExpToList(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _expLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _e;
{
modelica_metatype _expl = NULL;
modelica_metatype _mexpl = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],16,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_expl = tmpMeta[3];
tmp3 += 3;
_expl = omc_List_flatten(threadData, omc_List_map(threadData, _expl, boxvar_Expression_flattenArrayExpToList));
tmpMeta[0] = omc_List_map(threadData, _expl, boxvar_Expression_negate);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expl = tmpMeta[1];
tmp3 += 2;
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _expl, boxvar_Expression_flattenArrayExpToList));
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],17,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_mexpl = tmpMeta[3];
tmp3 += 1;
_expl = omc_List_flatten(threadData, omc_List_map(threadData, omc_List_flatten(threadData, _mexpl), boxvar_Expression_flattenArrayExpToList));
tmpMeta[0] = omc_List_map(threadData, _expl, boxvar_Expression_negate);
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_mexpl = tmpMeta[1];
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, omc_List_flatten(threadData, _mexpl), boxvar_Expression_flattenArrayExpToList));
goto tmp2_done;
}
case 4: {
tmpMeta[1] = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_expLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _expLst;
}
DLLExport
modelica_metatype omc_Expression_getTermsContainingX(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _inExp2, modelica_metatype *out_outExp2)
{
modelica_metatype _outExp1 = NULL;
modelica_metatype _outExp2 = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inExp1;
tmp4_2 = _inExp2;
{
modelica_metatype _xt1 = NULL;
modelica_metatype _nonxt1 = NULL;
modelica_metatype _xt2 = NULL;
modelica_metatype _nonxt2 = NULL;
modelica_metatype _xt = NULL;
modelica_metatype _nonxt = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _e = NULL;
modelica_metatype _zero = NULL;
modelica_metatype _ty = NULL;
modelica_boolean _res;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_cr = tmp4_2;
_e1 = tmpMeta[2];
_ty = tmpMeta[4];
_e2 = tmpMeta[5];
tmp4 += 5;
_xt1 = omc_Expression_getTermsContainingX(threadData, _e1, _cr ,&_nonxt1);
_xt2 = omc_Expression_getTermsContainingX(threadData, _e2, _cr ,&_nonxt2);
tmpMeta[2] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _ty);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _xt1, tmpMeta[2], _xt2);
_xt = tmpMeta[3];
tmpMeta[2] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _ty);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _nonxt1, tmpMeta[2], _nonxt2);
_nonxt = tmpMeta[3];
tmpMeta[0+0] = _xt;
tmpMeta[0+1] = _nonxt;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_cr = tmp4_2;
_e1 = tmpMeta[2];
_ty = tmpMeta[4];
_e2 = tmpMeta[5];
tmp4 += 4;
_xt1 = omc_Expression_getTermsContainingX(threadData, _e1, _cr ,&_nonxt1);
_xt2 = omc_Expression_getTermsContainingX(threadData, _e2, _cr ,&_nonxt2);
tmpMeta[2] = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _ty);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _xt1, tmpMeta[2], _xt2);
_xt = tmpMeta[3];
tmpMeta[2] = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _ty);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _nonxt1, tmpMeta[2], _nonxt2);
_nonxt = tmpMeta[3];
tmpMeta[0+0] = _xt;
tmpMeta[0+1] = _nonxt;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],5,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr = tmp4_2;
_ty = tmpMeta[3];
_e = tmpMeta[4];
tmp4 += 3;
_xt1 = omc_Expression_getTermsContainingX(threadData, _e, _cr ,&_nonxt1);
tmpMeta[2] = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _ty);
tmpMeta[3] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, tmpMeta[2], _xt1);
_xt = tmpMeta[3];
tmpMeta[2] = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _ty);
tmpMeta[3] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, tmpMeta[2], _nonxt1);
_nonxt = tmpMeta[3];
tmpMeta[0+0] = _xt;
tmpMeta[0+1] = _nonxt;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_cr = tmp4_2;
_e1 = tmpMeta[2];
_ty = tmpMeta[4];
_e2 = tmpMeta[5];
tmp4 += 2;
_xt1 = omc_Expression_getTermsContainingX(threadData, _e1, _cr ,&_nonxt1);
_xt2 = omc_Expression_getTermsContainingX(threadData, _e2, _cr ,&_nonxt2);
tmpMeta[2] = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _ty);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _xt1, tmpMeta[2], _xt2);
_xt = tmpMeta[3];
tmpMeta[2] = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _ty);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _nonxt1, tmpMeta[2], _nonxt2);
_nonxt = tmpMeta[3];
tmpMeta[0+0] = _xt;
tmpMeta[0+1] = _nonxt;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],8,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_cr = tmp4_2;
_e1 = tmpMeta[2];
_ty = tmpMeta[4];
_e2 = tmpMeta[5];
tmp4 += 1;
_xt1 = omc_Expression_getTermsContainingX(threadData, _e1, _cr ,&_nonxt1);
_xt2 = omc_Expression_getTermsContainingX(threadData, _e2, _cr ,&_nonxt2);
tmpMeta[2] = mmc_mk_box2(11, &DAE_Operator_SUB__ARR__desc, _ty);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _xt1, tmpMeta[2], _xt2);
_xt = tmpMeta[3];
tmpMeta[2] = mmc_mk_box2(11, &DAE_Operator_SUB__ARR__desc, _ty);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _nonxt1, tmpMeta[2], _nonxt2);
_nonxt = tmpMeta[3];
tmpMeta[0+0] = _xt;
tmpMeta[0+1] = _nonxt;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr = tmp4_2;
_ty = tmpMeta[3];
_e = tmpMeta[4];
_xt1 = omc_Expression_getTermsContainingX(threadData, _e, _cr ,&_nonxt1);
tmpMeta[2] = mmc_mk_box2(9, &DAE_Operator_UMINUS__ARR__desc, _ty);
tmpMeta[3] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, tmpMeta[2], _xt1);
_xt = tmpMeta[3];
tmpMeta[2] = mmc_mk_box2(9, &DAE_Operator_UMINUS__ARR__desc, _ty);
tmpMeta[3] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, tmpMeta[2], _nonxt1);
_nonxt = tmpMeta[3];
tmpMeta[0+0] = _xt;
tmpMeta[0+1] = _nonxt;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_cr = tmp4_2;
_ty = tmpMeta[2];
_e = tmp4_1;
_res = omc_Expression_expContains(threadData, _e, _cr);
_zero = omc_Expression_makeZeroExpression(threadData, omc_Expression_arrayDimension(threadData, _ty), NULL);
_xt = (_res?_e:_zero);
_nonxt = (_res?_zero:_e);
tmpMeta[0+0] = _xt;
tmpMeta[0+1] = _nonxt;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 7) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp1 = tmpMeta[0+0];
_outExp2 = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outExp2) { *out_outExp2 = _outExp2; }
return _outExp1;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_expandFactorsWork2(threadData_t *threadData, modelica_metatype _inAcc, modelica_boolean _doInverseFactors)
{
modelica_metatype _outExpLst = NULL;
modelica_metatype _tmpExpLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outExpLst = tmpMeta[0];
{
modelica_metatype _elem;
for (tmpMeta[1] = _inAcc; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elem = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _elem;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,3) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = omc_Expression_expandFactorsWork(threadData, _elem, tmpMeta[3], _doInverseFactors);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,3) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = omc_Expression_expandFactorsWork(threadData, _elem, tmpMeta[3], _doInverseFactors);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,3) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],4,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = omc_Expression_expandFactorsWork(threadData, _elem, tmpMeta[3], _doInverseFactors);
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],5,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = omc_Expression_expandFactorsWork(threadData, _elem, tmpMeta[3], _doInverseFactors);
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],6,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = omc_Expression_expandFactorsWork(threadData, _elem, tmpMeta[3], _doInverseFactors);
goto tmp2_done;
}
case 5: {
tmpMeta[3] = mmc_mk_cons(_elem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = tmpMeta[3];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_tmpExpLst = tmpMeta[2];
_outExpLst = listAppend(_tmpExpLst, _outExpLst);
}
}
_return: OMC_LABEL_UNUSED
return _outExpLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_expandFactorsWork2(threadData_t *threadData, modelica_metatype _inAcc, modelica_metatype _doInverseFactors)
{
modelica_integer tmp1;
modelica_metatype _outExpLst = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
tmp1 = mmc_unbox_integer(_doInverseFactors);
_outExpLst = omc_Expression_expandFactorsWork2(threadData, _inAcc, tmp1);
return _outExpLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_expandFactorsWork3(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_boolean _doInverseFactors)
{
modelica_metatype _acc = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _op = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_acc = __omcQ_24in_5Facc;
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = omc_Expression_factorsWork(threadData, _inExp, _acc, _doInverseFactors);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 2;
_acc = omc_Expression_expandFactorsWork(threadData, _e1, _acc, _doInverseFactors);
tmpMeta[0] = omc_Expression_expandFactorsWork(threadData, _e2, _acc, _doInverseFactors);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e = tmpMeta[2];
_op = tmpMeta[3];
_e1 = tmpMeta[4];
_e2 = tmpMeta[6];
tmp3 += 1;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e, _op, omc_Expression_expMul(threadData, _e1, _e2));
_e = tmpMeta[1];
tmpMeta[0] = omc_Expression_expandFactorsWork(threadData, _e, _acc, _doInverseFactors);
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e = tmpMeta[2];
_e1 = tmpMeta[4];
_op = tmpMeta[5];
_e2 = tmpMeta[6];
_acc = omc_Expression_expandFactorsWork(threadData, _e, _acc, _doInverseFactors);
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, _op, _e2);
tmpMeta[0] = omc_Expression_expandFactorsWork(threadData, tmpMeta[1], _acc, _doInverseFactors);
goto tmp2_done;
}
case 4: {
tmpMeta[1] = mmc_mk_cons(_inExp, _acc);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_acc = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _acc;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_expandFactorsWork3(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_metatype _doInverseFactors)
{
modelica_integer tmp1;
modelica_metatype _acc = NULL;
tmp1 = mmc_unbox_integer(_doInverseFactors);
_acc = omc_Expression_expandFactorsWork3(threadData, _inExp, __omcQ_24in_5Facc, tmp1);
return _acc;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_expandFactorsWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_boolean _doInverseFactors)
{
modelica_metatype _acc = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_acc = __omcQ_24in_5Facc;
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _pow_acc = NULL;
modelica_metatype _pow_acc2 = NULL;
modelica_metatype _op = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 7; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
_e3 = tmpMeta[6];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_pow_acc = omc_Expression_expandFactorsWork(threadData, _e1, tmpMeta[1], _doInverseFactors);
_pow_acc = omc_Expression_expPowLst(threadData, _pow_acc, _e3);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_pow_acc2 = omc_Expression_expandFactorsWork(threadData, _e2, tmpMeta[1], _doInverseFactors);
_pow_acc2 = omc_Expression_expPowLst(threadData, _pow_acc2, _e3);
_acc = listAppend(_pow_acc, _acc);
tmpMeta[0] = listAppend(_pow_acc2, _acc);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
_e3 = tmpMeta[6];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_pow_acc = omc_Expression_expandFactorsWork(threadData, _e1, tmpMeta[1], _doInverseFactors);
_pow_acc = omc_Expression_expPowLst(threadData, _pow_acc, _e3);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_pow_acc2 = omc_Expression_expandFactorsWork(threadData, _e2, tmpMeta[1], _doInverseFactors);
_pow_acc2 = omc_Expression_expPowLst(threadData, _pow_acc2, omc_Expression_negate(threadData, _e3));
_acc = listAppend(_pow_acc, _acc);
tmpMeta[0] = listAppend(_pow_acc2, _acc);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],4,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
_e3 = tmpMeta[6];
_e = omc_Expression_expMul(threadData, _e2, _e3);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_pow_acc = omc_Expression_expandFactorsWork(threadData, _e1, tmpMeta[1], _doInverseFactors);
_pow_acc = omc_Expression_expPowLst(threadData, _pow_acc, _e);
tmpMeta[0] = listAppend(_pow_acc, _acc);
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_tp = tmpMeta[3];
_e2 = tmpMeta[4];
if (!omc_Expression_isZero(threadData, _e2)) goto tmp2_end;
if(_doInverseFactors)
{
_e = _e2;
}
else
{
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, omc_Expression_makeConstOne(threadData, _tp), _op, _e2);
_e = tmpMeta[1];
}
_acc = omc_Expression_expandFactorsWork(threadData, _e1, _acc, _doInverseFactors);
tmpMeta[1] = mmc_mk_cons(_e, _acc);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_tp = tmpMeta[2];
_e1 = tmpMeta[3];
_e = omc_Expression_makeConstOne(threadData, _tp);
_acc = omc_Expression_expandFactorsWork(threadData, _e1, _acc, _doInverseFactors);
_e = omc_Expression_negate(threadData, _e);
tmpMeta[1] = mmc_mk_cons(_e, _acc);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_tp = tmpMeta[2];
_e1 = tmpMeta[3];
_e = omc_Expression_makeConstOne(threadData, _tp);
_acc = omc_Expression_expandFactorsWork(threadData, _e1, _acc, _doInverseFactors);
_e = omc_Expression_negate(threadData, _e);
tmpMeta[1] = mmc_mk_cons(_e, _acc);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
_acc = omc_Expression_expandFactorsWork3(threadData, _inExp, _acc, _doInverseFactors);
tmpMeta[0] = omc_Expression_expandFactorsWork2(threadData, _acc, _doInverseFactors);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_acc = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _acc;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_expandFactorsWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_metatype _doInverseFactors)
{
modelica_integer tmp1;
modelica_metatype _acc = NULL;
tmp1 = mmc_unbox_integer(_doInverseFactors);
_acc = omc_Expression_expandFactorsWork(threadData, _inExp, __omcQ_24in_5Facc, tmp1);
return _acc;
}
DLLExport
modelica_metatype omc_Expression_expandFactors(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExpLst = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outExpLst = listReverse(omc_Expression_expandFactorsWork(threadData, _inExp, tmpMeta[0], 0));
_return: OMC_LABEL_UNUSED
return _outExpLst;
}
DLLExport
modelica_metatype omc_Expression_inverseFactors(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _tp2 = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _op = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],4,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_tp = tmpMeta[3];
_e2 = tmpMeta[4];
tmp3 += 1;
_tp2 = omc_Expression_typeof(threadData, _e2);
tmpMeta[1] = mmc_mk_box2(7, &DAE_Operator_POW__desc, _tp);
tmpMeta[2] = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _tp2);
tmpMeta[3] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, tmpMeta[2], _e2);
tmpMeta[4] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta[1], tmpMeta[3]);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
tmp5 = omc_Expression_isZero(threadData, _e1);
if (0 != tmp5) goto goto_1;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, _op, _e1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
modelica_boolean tmp6;
_e = tmp3_1;
tmp6 = omc_Expression_isZero(threadData, _e);
if (0 != tmp6) goto goto_1;
_tp = omc_Expression_typeof(threadData, _e);
{
modelica_metatype tmp9_1;
tmp9_1 = _tp;
{
volatile mmc_switch_type tmp9;
int tmp10;
tmp9 = 0;
for (; tmp9 < 2; tmp9++) {
switch (MMC_SWITCH_CAST(tmp9)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp9_1,1,1) == 0) goto tmp8_end;
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT6, _OMC_LIT175, _e);
tmpMeta[1] = tmpMeta[2];
goto tmp8_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp9_1,0,1) == 0) goto tmp8_end;
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _OMC_LIT4, _OMC_LIT177, _e);
tmpMeta[1] = tmpMeta[2];
goto tmp8_done;
}
}
goto tmp8_end;
tmp8_end: ;
}
goto goto_7;
goto_7:;
goto goto_1;
goto tmp8_done;
tmp8_done:;
}
}tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_factorsWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_boolean _doInverseFactors)
{
modelica_metatype _acc = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_acc = __omcQ_24in_5Facc;
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
_acc = omc_Expression_factorsWork(threadData, _e1, _acc, _doInverseFactors);
_inExp = _e2;
__omcQ_24in_5Facc = _acc;
goto _tailrecursive;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[4];
_acc = omc_Expression_factorsWork(threadData, _e1, _acc, _doInverseFactors);
_inExp = _e2;
__omcQ_24in_5Facc = _acc;
_doInverseFactors = (!_doInverseFactors);
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp5) goto tmp2_end;
tmpMeta[0] = _acc;
goto tmp2_done;
}
case 3: {
modelica_real tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp6 = mmc_unbox_real(tmpMeta[1]);
if (1.0 != tmp6) goto tmp2_end;
tmpMeta[0] = _acc;
goto tmp2_done;
}
case 4: {
tmpMeta[1] = mmc_mk_cons((_doInverseFactors?omc_Expression_inverseFactors(threadData, _inExp):_inExp), _acc);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_acc = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _acc;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_factorsWork(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype __omcQ_24in_5Facc, modelica_metatype _doInverseFactors)
{
modelica_integer tmp1;
modelica_metatype _acc = NULL;
tmp1 = mmc_unbox_integer(_doInverseFactors);
_acc = omc_Expression_factorsWork(threadData, _inExp, __omcQ_24in_5Facc, tmp1);
return _acc;
}
DLLExport
modelica_metatype omc_Expression_factors(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExpLst = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outExpLst = listReverse(omc_Expression_factorsWork(threadData, _inExp, tmpMeta[0], 0));
_return: OMC_LABEL_UNUSED
return _outExpLst;
}
DLLExport
modelica_metatype omc_Expression_quotient(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype *out_denom)
{
modelica_metatype _num = NULL;
modelica_metatype _denom = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _p = NULL;
modelica_metatype _q = NULL;
modelica_metatype _tp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
tmp4 += 2;
tmpMeta[0+0] = _e1;
tmpMeta[0+1] = _e2;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
_p = omc_Expression_quotient(threadData, _e1 ,&_q);
_tp = omc_Expression_typeof(threadData, _p);
tmpMeta[2] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, tmpMeta[2], _p);
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _q;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
_p = omc_Expression_quotient(threadData, _e2 ,&_q);
_tp = omc_Expression_typeof(threadData, _p);
tmpMeta[2] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta[2], _p);
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _q;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_num = tmpMeta[0+0];
_denom = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_denom) { *out_denom = _denom; }
return _num;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_terms2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inAcc, modelica_boolean _neg)
{
modelica_metatype _outExpLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_boolean tmp3_3;
tmp3_1 = _inExp;
tmp3_2 = _inAcc;
tmp3_3 = _neg;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _acc = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
_acc = tmp3_2;
_acc = omc_Expression_terms2(threadData, _e2, _acc, _neg);
_inExp = _e1;
_inAcc = _acc;
goto _tailrecursive;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
_acc = tmp3_2;
_acc = omc_Expression_terms2(threadData, _e2, _acc, (!_neg));
_inExp = _e1;
_inAcc = _acc;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
if (1 != tmp3_3) goto tmp2_end;
_e = tmp3_1;
_acc = tmp3_2;
_e = omc_Expression_negate(threadData, _e);
tmpMeta[1] = mmc_mk_cons(_e, _acc);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
_e = tmp3_1;
_acc = tmp3_2;
tmpMeta[1] = mmc_mk_cons(_e, _acc);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExpLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExpLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Expression_terms2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inAcc, modelica_metatype _neg)
{
modelica_integer tmp1;
modelica_metatype _outExpLst = NULL;
tmp1 = mmc_unbox_integer(_neg);
_outExpLst = omc_Expression_terms2(threadData, _inExp, _inAcc, tmp1);
return _outExpLst;
}
DLLExport
modelica_metatype omc_Expression_terms(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExpLst = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outExpLst = omc_Expression_terms2(threadData, _inExp, tmpMeta[0], 0);
_return: OMC_LABEL_UNUSED
return _outExpLst;
}
DLLExport
modelica_metatype omc_Expression_termsExpandUnary(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExpLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[2];
tmpMeta[0] = omc_List_map(threadData, omc_Expression_terms(threadData, _e), boxvar_Expression_negate);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = omc_Expression_terms(threadData, _inExp);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExpLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExpLst;
}
DLLExport
modelica_metatype omc_Expression_allTermsForCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _cr, modelica_fnptr _inFunc, modelica_metatype *out_outExpLstWithoutX)
{
modelica_metatype _outExpLstWithX = NULL;
modelica_metatype _outExpLstWithoutX = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _f1 = NULL;
modelica_metatype _f2 = NULL;
modelica_metatype _fx1 = NULL;
modelica_metatype _fx2 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _resx = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 9; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
tmp4 += 7;
_fx1 = omc_Expression_allTermsForCref(threadData, _e1, _cr, ((modelica_fnptr) _inFunc) ,&_f1);
_fx2 = omc_Expression_allTermsForCref(threadData, _e2, _cr, ((modelica_fnptr) _inFunc) ,&_f2);
_res = listAppend(_f1, _f2);
_resx = listAppend(_fx1, _fx2);
tmpMeta[0+0] = _resx;
tmpMeta[0+1] = _res;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
tmp4 += 6;
_fx1 = omc_Expression_allTermsForCref(threadData, _e1, _cr, ((modelica_fnptr) _inFunc) ,&_f1);
_fx2 = omc_Expression_allTermsForCref(threadData, _e2, _cr, ((modelica_fnptr) _inFunc) ,&_f2);
_f2 = omc_List_map(threadData, _f2, boxvar_Expression_negate);
_fx2 = omc_List_map(threadData, _fx2, boxvar_Expression_negate);
_res = listAppend(_f1, _f2);
_resx = listAppend(_fx1, _fx2);
tmpMeta[0+0] = _resx;
tmpMeta[0+1] = _res;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
tmp4 += 5;
_fx1 = omc_Expression_allTermsForCref(threadData, _e1, _cr, ((modelica_fnptr) _inFunc) ,&_f1);
_fx2 = omc_Expression_allTermsForCref(threadData, _e2, _cr, ((modelica_fnptr) _inFunc) ,&_f2);
_res = listAppend(_f1, _f2);
_resx = listAppend(_fx1, _fx2);
tmpMeta[0+0] = _resx;
tmpMeta[0+1] = _res;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],8,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
tmp4 += 4;
_fx1 = omc_Expression_allTermsForCref(threadData, _e1, _cr, ((modelica_fnptr) _inFunc) ,&_f1);
_fx2 = omc_Expression_allTermsForCref(threadData, _e2, _cr, ((modelica_fnptr) _inFunc) ,&_f2);
_f2 = omc_List_map(threadData, _f2, boxvar_Expression_negate);
_fx2 = omc_List_map(threadData, _fx2, boxvar_Expression_negate);
_res = listAppend(_f1, _f2);
_resx = listAppend(_fx1, _fx2);
tmpMeta[0+0] = _resx;
tmpMeta[0+1] = _res;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
if (!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e2, _cr) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e2, _cr))) goto tmp3_end;
_fx1 = omc_Expression_allTermsForCref(threadData, _e2, _cr, ((modelica_fnptr) _inFunc) ,&_f1);
_fx1 = omc_List_split1OnTrue(threadData, _fx1, ((modelica_fnptr) _inFunc), _cr ,&_f2);
_res = listAppend(_f1, _f2);
_e = omc_Expression_makeSum1(threadData, _res, 0);
_e = omc_Expression_expMul(threadData, _e, _e1);
_fx1 = omc_List_map1(threadData, _fx1, boxvar_Expression_expMul, _e1);
if((!omc_Expression_isZero(threadData, _e)))
{
if(omc_Expression_expHasCrefNoPreOrStart(threadData, _e1, _cr))
{
tmpMeta[2] = mmc_mk_cons(_e, _fx1);
_fx1 = tmpMeta[2];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_f1 = tmpMeta[2];
}
else
{
tmpMeta[2] = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
_f1 = tmpMeta[2];
}
}
tmpMeta[0+0] = _fx1;
tmpMeta[0+1] = _f1;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
tmp4 += 2;
if (!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e1, _cr) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e1, _cr))) goto tmp3_end;
_fx1 = omc_Expression_allTermsForCref(threadData, _e1, _cr, ((modelica_fnptr) _inFunc) ,&_f1);
_fx1 = omc_List_split1OnTrue(threadData, _fx1, ((modelica_fnptr) _inFunc), _cr ,&_f2);
_res = listAppend(_f1, _f2);
_e = omc_Expression_makeSum1(threadData, _res, 0);
_e = omc_Expression_expMul(threadData, _e, _e2);
_fx1 = omc_List_map1(threadData, _fx1, boxvar_Expression_expMul, _e2);
if((!omc_Expression_isZero(threadData, _e)))
{
if(omc_Expression_expHasCrefNoPreOrStart(threadData, _e1, _cr))
{
tmpMeta[2] = mmc_mk_cons(_e, _fx1);
_fx1 = tmpMeta[2];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_f1 = tmpMeta[2];
}
else
{
tmpMeta[2] = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
_f1 = tmpMeta[2];
}
}
tmpMeta[0+0] = _fx1;
tmpMeta[0+1] = _f1;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[4];
tmp4 += 1;
if (!mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e1, _cr) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e1, _cr))) goto tmp3_end;
_fx1 = omc_Expression_allTermsForCref(threadData, _e1, _cr, ((modelica_fnptr) _inFunc) ,&_f1);
_fx1 = omc_List_split1OnTrue(threadData, _fx1, ((modelica_fnptr) _inFunc), _cr ,&_f2);
_res = listAppend(_f1, _f2);
_e = omc_Expression_makeSum1(threadData, _res, 0);
_e = omc_Expression_makeDiv(threadData, _e, _e2);
_fx1 = omc_List_map1(threadData, _fx1, boxvar_Expression_makeDiv, _e2);
if((!omc_Expression_isZero(threadData, _e)))
{
if(omc_Expression_expHasCrefNoPreOrStart(threadData, _e1, _cr))
{
tmpMeta[2] = mmc_mk_cons(_e, _fx1);
_fx1 = tmpMeta[2];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_f1 = tmpMeta[2];
}
else
{
tmpMeta[2] = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
_f1 = tmpMeta[2];
}
}
tmpMeta[0+0] = _fx1;
tmpMeta[0+1] = _f1;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],5,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[3];
_fx1 = omc_Expression_allTermsForCref(threadData, _e1, _cr, ((modelica_fnptr) _inFunc) ,&_f1);
_f1 = omc_List_map(threadData, _f1, boxvar_Expression_negate);
_fx1 = omc_List_map(threadData, _fx1, boxvar_Expression_negate);
tmpMeta[0+0] = _fx1;
tmpMeta[0+1] = _f1;
goto tmp3_done;
}
case 8: {
if(mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _inExp, _cr) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _inExp, _cr)))
{
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_inExp, MMC_REFSTRUCTLIT(mmc_nil));
_resx = tmpMeta[2];
}
else
{
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_resx = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_inExp, MMC_REFSTRUCTLIT(mmc_nil));
_res = tmpMeta[2];
}
tmpMeta[0+0] = _resx;
tmpMeta[0+1] = _res;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 9) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExpLstWithX = tmpMeta[0+0];
_outExpLstWithoutX = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outExpLstWithoutX) { *out_outExpLstWithoutX = _outExpLstWithoutX; }
return _outExpLstWithX;
}
DLLExport
modelica_metatype omc_Expression_allTerms(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExpLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _f1 = NULL;
modelica_metatype _f2 = NULL;
modelica_metatype _f2_1 = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 19; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 17;
_f1 = omc_Expression_allTerms(threadData, _e1);
_f2 = omc_Expression_allTerms(threadData, _e2);
tmpMeta[0] = listAppend(_f1, _f2);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 16;
_f1 = omc_Expression_allTerms(threadData, _e1);
_f2 = omc_Expression_allTerms(threadData, _e2);
_f2_1 = omc_List_map(threadData, _f2, boxvar_Expression_negate);
tmpMeta[0] = listAppend(_f1, _f2_1);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],7,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 15;
_f1 = omc_Expression_allTerms(threadData, _e1);
_f2 = omc_Expression_allTerms(threadData, _e2);
tmpMeta[0] = listAppend(_f1, _f2);
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],8,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 14;
_f1 = omc_Expression_allTerms(threadData, _e1);
_f2 = omc_Expression_allTerms(threadData, _e2);
_f2_1 = omc_List_map(threadData, _f2, boxvar_Expression_negate);
tmpMeta[0] = listAppend(_f1, _f2_1);
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 2;
tmpMeta[1] = omc_Expression_allTerms(threadData, _e2);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_f1 = tmpMeta[1];
_f1 = omc_List_map1(threadData, _f1, boxvar_Expression_makeProduct, _e1);
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _f1, boxvar_Expression_allTerms));
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],9,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 2;
tmpMeta[1] = omc_Expression_allTerms(threadData, _e2);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_f1 = tmpMeta[1];
_f1 = omc_List_map1(threadData, _f1, boxvar_Expression_makeProduct, _e1);
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _f1, boxvar_Expression_allTerms));
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],11,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 2;
tmpMeta[1] = omc_Expression_allTerms(threadData, _e2);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_f1 = tmpMeta[1];
_f1 = omc_List_map1(threadData, _f1, boxvar_Expression_makeProduct, _e1);
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _f1, boxvar_Expression_allTerms));
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 10;
tmpMeta[1] = omc_Expression_allTerms(threadData, _e1);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_f1 = tmpMeta[1];
_f1 = omc_List_map1(threadData, _f1, boxvar_Expression_makeProduct, _e2);
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _f1, boxvar_Expression_allTerms));
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],9,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 9;
tmpMeta[1] = omc_Expression_allTerms(threadData, _e1);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_f1 = tmpMeta[1];
_f1 = omc_List_map1(threadData, _f1, boxvar_Expression_makeProduct, _e2);
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _f1, boxvar_Expression_allTerms));
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],11,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 8;
tmpMeta[1] = omc_Expression_allTerms(threadData, _e1);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_f1 = tmpMeta[1];
_f1 = omc_List_map1(threadData, _f1, boxvar_Expression_makeProduct, _e2);
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _f1, boxvar_Expression_allTerms));
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 7;
tmpMeta[1] = omc_Expression_allTerms(threadData, _e1);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_f1 = tmpMeta[1];
_f1 = omc_List_map1(threadData, _f1, boxvar_Expression_expDiv, _e2);
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _f1, boxvar_Expression_allTerms));
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],10,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 6;
tmpMeta[1] = omc_Expression_allTerms(threadData, _e1);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_f1 = tmpMeta[1];
_f1 = omc_List_map1(threadData, _f1, boxvar_Expression_expDiv, _e2);
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _f1, boxvar_Expression_allTerms));
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],16,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 5;
tmpMeta[1] = omc_Expression_allTerms(threadData, _e1);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_f1 = tmpMeta[1];
_f1 = omc_List_map1(threadData, _f1, boxvar_Expression_expDiv, _e2);
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _f1, boxvar_Expression_allTerms));
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],17,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 4;
tmpMeta[1] = omc_Expression_allTerms(threadData, _e1);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_f1 = tmpMeta[1];
_f1 = omc_List_map1(threadData, _f1, boxvar_Expression_expDiv, _e2);
tmpMeta[0] = omc_List_flatten(threadData, omc_List_map(threadData, _f1, boxvar_Expression_allTerms));
goto tmp2_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[2];
tmp3 += 3;
_f1 = omc_Expression_allTerms(threadData, _e1);
tmpMeta[0] = omc_List_map(threadData, _f1, boxvar_Expression_negate);
goto tmp2_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[2];
tmp3 += 2;
_f1 = omc_Expression_allTerms(threadData, _e1);
tmpMeta[0] = omc_List_map(threadData, _f1, boxvar_Expression_negate);
goto tmp2_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],24,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[2];
tmp3 += 1;
_f1 = omc_Expression_allTerms(threadData, _e1);
tmpMeta[0] = omc_List_map(threadData, _f1, boxvar_Expression_negate);
goto tmp2_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,21,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[1];
_f2 = tmpMeta[2];
_f1 = omc_Expression_allTerms(threadData, _e1);
tmpMeta[0] = omc_List_map1(threadData, _f1, boxvar_Expression_makeASUB, _f2);
goto tmp2_done;
}
case 18: {
tmpMeta[1] = mmc_mk_cons(_inExp, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 19) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExpLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExpLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_getAllCrefsExpanded2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefList, modelica_metatype *out_outCrefList)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outCrefList = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _crlst = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _inExp;
_outCrefList = _inCrefList;
if(omc_Expression_isCref(threadData, _inExp))
{
tmpMeta[0] = _inExp;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_cr = tmpMeta[1];
_crlst = omc_ComponentReference_expandCref(threadData, _cr, 1);
{
modelica_metatype _c;
for (tmpMeta[0] = _crlst; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_c = MMC_CAR(tmpMeta[0]);
if(((!omc_ComponentReference_crefEqual(threadData, _c, _OMC_LIT179)) && (!listMember(_c, _inCrefList))))
{
tmpMeta[1] = mmc_mk_cons(_c, _outCrefList);
_outCrefList = tmpMeta[1];
}
}
}
}
_return: OMC_LABEL_UNUSED
if (out_outCrefList) { *out_outCrefList = _outCrefList; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_getAllCrefsExpanded(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outCrefs = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_Expression_getAllCrefsExpanded2, tmpMeta[0] ,&_outCrefs);
_return: OMC_LABEL_UNUSED
return _outCrefs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_getAllCrefs2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefList, modelica_metatype *out_outCrefList)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outCrefList = NULL;
modelica_metatype _cr = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _inExp;
_outCrefList = _inCrefList;
if(omc_Expression_isCref(threadData, _inExp))
{
tmpMeta[0] = _inExp;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_cr = tmpMeta[1];
if(((!omc_ComponentReference_crefEqual(threadData, _cr, _OMC_LIT179)) && (!listMember(_cr, _inCrefList))))
{
tmpMeta[0] = mmc_mk_cons(_cr, _outCrefList);
_outCrefList = tmpMeta[0];
}
}
_return: OMC_LABEL_UNUSED
if (out_outCrefList) { *out_outCrefList = _outCrefList; }
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_getAllCrefs(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outCrefs = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Expression_traverseExpBottomUp(threadData, _inExp, boxvar_Expression_getAllCrefs2, tmpMeta[0] ,&_outCrefs);
_return: OMC_LABEL_UNUSED
return _outCrefs;
}
DLLExport
modelica_metatype omc_Expression_getRelations(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExpLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _tb = NULL;
modelica_metatype _fb = NULL;
modelica_metatype _rellst1 = NULL;
modelica_metatype _rellst2 = NULL;
modelica_metatype _rellst3 = NULL;
modelica_metatype _rellst4 = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _t = NULL;
modelica_boolean _sc;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 9; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,5) == 0) goto tmp2_end;
_e = tmp3_1;
tmpMeta[1] = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_rellst1 = omc_Expression_getRelations(threadData, _e1);
_rellst2 = omc_Expression_getRelations(threadData, _e2);
tmpMeta[0] = listAppend(_rellst1, _rellst2);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
_inExp = _e;
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_rellst1 = omc_Expression_getRelations(threadData, _e1);
_rellst2 = omc_Expression_getRelations(threadData, _e2);
tmpMeta[0] = listAppend(_rellst1, _rellst2);
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,12,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_cond = tmpMeta[1];
_tb = tmpMeta[2];
_fb = tmpMeta[3];
_rellst1 = omc_Expression_getRelations(threadData, _cond);
_rellst2 = omc_Expression_getRelations(threadData, _tb);
_rellst3 = omc_Expression_getRelations(threadData, _fb);
_rellst4 = listAppend(_rellst1, _rellst2);
tmpMeta[0] = listAppend(_rellst3, _rellst4);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (!listEmpty(tmpMeta[3])) goto tmp2_end;
_e = tmpMeta[2];
_inExp = _e;
goto _tailrecursive;
goto tmp2_done;
}
case 6: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_t = tmpMeta[1];
_sc = tmp5;
_e = tmpMeta[4];
_xs = tmpMeta[5];
tmpMeta[1] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _t, mmc_mk_boolean(_sc), _xs);
_rellst1 = omc_Expression_getRelations(threadData, tmpMeta[1]);
_rellst2 = omc_Expression_getRelations(threadData, _e);
tmpMeta[0] = listAppend(_rellst1, _rellst2);
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
_inExp = _e;
goto _tailrecursive;
goto tmp2_done;
}
case 8: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExpLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExpLst;
}
DLLExport
modelica_metatype omc_Expression_typeofOp(threadData_t *threadData, modelica_metatype _inOperator)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inOperator;
{
modelica_metatype _t = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,12,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,14,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,15,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 22: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,19,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,20,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,21,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,22,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,23,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 27: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,24,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 28: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,25,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 29: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,26,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 30: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,27,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 31: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,28,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 32: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,29,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 33: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,30,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
tmpMeta[0] = _t;
goto tmp2_done;
}
case 34: {
tmpMeta[0] = _OMC_LIT44;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_typeofRelation(threadData_t *threadData, modelica_metatype _inType)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inType;
{
modelica_metatype _ty = NULL;
modelica_metatype _dims = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_ty = tmpMeta[1];
_dims = tmpMeta[2];
omc_Expression_typeofRelation(threadData, _ty);
tmpMeta[1] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, _dims);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _OMC_LIT173;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
DLLExport
modelica_metatype omc_Expression_typeof(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[14] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _tp = NULL;
modelica_metatype _op = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _iterExp = NULL;
modelica_metatype _operExp = NULL;
modelica_metatype _explist = NULL;
modelica_metatype _exps = NULL;
modelica_metatype _p = NULL;
modelica_string _msg = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _iterTp = NULL;
modelica_metatype _operTp = NULL;
modelica_metatype _tys = NULL;
modelica_metatype _typeVars = NULL;
modelica_integer _i;
modelica_metatype _dim = NULL;
modelica_metatype _iterdims = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 40; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmp3 += 38;
tmpMeta[0] = _OMC_LIT176;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmp3 += 37;
tmpMeta[0] = _OMC_LIT134;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmp3 += 36;
tmpMeta[0] = _OMC_LIT180;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmp3 += 35;
tmpMeta[0] = _OMC_LIT173;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,1) == 0) goto tmp2_end;
tmp3 += 34;
tmpMeta[0] = _OMC_LIT181;
goto tmp2_done;
}
case 5: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
_p = tmpMeta[1];
_i = tmp5;
tmp3 += 33;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box6(8, &DAE_Type_T__ENUMERATION__desc, mmc_mk_some(mmc_mk_integer(_i)), _p, tmpMeta[1], tmpMeta[2], tmpMeta[3]);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_tp = tmpMeta[1];
tmp3 += 32;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_op = tmpMeta[1];
tmp3 += 31;
tmpMeta[0] = omc_Expression_typeofOp(threadData, _op);
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_op = tmpMeta[1];
tmp3 += 30;
tmpMeta[0] = omc_Expression_typeofOp(threadData, _op);
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_op = tmpMeta[1];
tmp3 += 29;
tmpMeta[0] = omc_Expression_typeofOp(threadData, _op);
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_op = tmpMeta[1];
tmp3 += 28;
tmpMeta[0] = omc_Expression_typeofOp(threadData, _op);
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_op = tmpMeta[1];
tmp3 += 27;
tmpMeta[0] = omc_Expression_typeofRelation(threadData, omc_Expression_typeofOp(threadData, _op));
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,12,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e2 = tmpMeta[1];
tmp3 += 26;
tmpMeta[0] = omc_Expression_typeof(threadData, _e2);
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_tp = tmpMeta[2];
tmp3 += 25;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,14,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_tp = tmpMeta[1];
tmp3 += 24;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,15,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_tp = tmpMeta[1];
tmp3 += 23;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_tp = tmpMeta[1];
tmp3 += 22;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_tp = tmpMeta[1];
tmp3 += 21;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_tp = tmpMeta[1];
tmp3 += 20;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,20,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_tp = tmpMeta[1];
tmp3 += 19;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 20: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,21,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
_explist = tmpMeta[2];
tmp3 += 18;
{
modelica_integer __omcQ_24tmpVar19;
modelica_integer __omcQ_24tmpVar18;
int tmp7;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _explist;
__omcQ_24tmpVar19 = ((modelica_integer) 0);
while(1) {
tmp7 = 1;
while (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
if (omc_Expression_isScalar(threadData, _e)) {
tmp7--;
break;
}
}
if (tmp7 == 0) {
__omcQ_24tmpVar18 = ((modelica_integer) 1);
__omcQ_24tmpVar19 = __omcQ_24tmpVar19 + __omcQ_24tmpVar18;
} else if (tmp7 == 1) {
break;
} else {
goto goto_1;
}
}
tmp6 = __omcQ_24tmpVar19;
}
_i = tmp6;
tmpMeta[0] = omc_Expression_unliftArrayX(threadData, omc_Expression_typeof(threadData, _e), _i);
goto tmp2_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,22,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_tp = tmpMeta[1];
tmp3 += 17;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 22: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,23,4) == 0) goto tmp2_end;
tmp3 += 16;
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 5)));
goto tmp2_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,25,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_tp = tmpMeta[1];
tmp3 += 15;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 24: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,27,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (5 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT189), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],6,2) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
if (listEmpty(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (listEmpty(tmpMeta[9])) goto tmp2_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 3));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 4));
if (!optionNone(tmpMeta[13])) goto tmp2_end;
if (!listEmpty(tmpMeta[11])) goto tmp2_end;
_dim = tmpMeta[6];
_operExp = tmpMeta[8];
_iterExp = tmpMeta[12];
tmp8 = omc_Expression_dimensionKnown(threadData, _dim);
if (0 != tmp8) goto goto_1;
_iterTp = omc_Expression_typeof(threadData, _iterExp);
_operTp = omc_Expression_typeof(threadData, _operExp);
tmpMeta[1] = _iterTp;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_iterdims = tmpMeta[2];
tmpMeta[0] = omc_Types_liftTypeWithDims(threadData, _operTp, _iterdims);
goto tmp2_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,27,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_ty = tmpMeta[2];
tmp3 += 13;
tmpMeta[0] = omc_Types_simplifyType(threadData, _ty);
goto tmp2_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,24,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (!optionNone(tmpMeta[1])) goto tmp2_end;
tmp3 += 12;
tmpMeta[0] = _OMC_LIT183;
goto tmp2_done;
}
case 27: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,24,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmp3 += 11;
tmpMeta[0] = _OMC_LIT176;
goto tmp2_done;
}
case 28: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,28,1) == 0) goto tmp2_end;
tmp3 += 10;
tmpMeta[0] = _OMC_LIT185;
goto tmp2_done;
}
case 29: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,29,2) == 0) goto tmp2_end;
tmp3 += 9;
tmpMeta[0] = _OMC_LIT185;
goto tmp2_done;
}
case 30: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,30,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exps = tmpMeta[1];
tmp3 += 8;
_tys = omc_List_map(threadData, _exps, boxvar_Expression_typeof);
tmpMeta[1] = mmc_mk_box2(21, &DAE_Type_T__METATUPLE__desc, _tys);
tmpMeta[2] = mmc_mk_box2(28, &DAE_Type_T__METATYPE__desc, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 31: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,19,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exps = tmpMeta[1];
tmp3 += 7;
_tys = omc_List_map(threadData, _exps, boxvar_Expression_typeof);
tmpMeta[1] = mmc_mk_box3(17, &DAE_Type_T__TUPLE__desc, _tys, mmc_mk_none());
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 32: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,31,1) == 0) goto tmp2_end;
tmp3 += 6;
tmpMeta[0] = _OMC_LIT187;
goto tmp2_done;
}
case 33: {
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,32,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp9 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_p = tmpMeta[1];
_i = tmp9;
_typeVars = tmpMeta[3];
tmp3 += 5;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box7(24, &DAE_Type_T__METARECORD__desc, _p, omc_AbsynUtil_stripLast(threadData, _p), _typeVars, mmc_mk_integer(_i), tmpMeta[1], mmc_mk_boolean(0));
tmpMeta[3] = mmc_mk_box2(28, &DAE_Type_T__METATYPE__desc, tmpMeta[2]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 34: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,34,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
tmp3 += 4;
tmpMeta[1] = mmc_mk_box2(26, &DAE_Type_T__METABOXED__desc, omc_Expression_typeof(threadData, _e));
tmpMeta[2] = mmc_mk_box2(28, &DAE_Type_T__METATYPE__desc, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 35: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,33,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_tp = tmpMeta[1];
tmp3 += 3;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 36: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,35,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_tp = tmpMeta[1];
tmp3 += 2;
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 37: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,36,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
tmp3 += 1;
tmpMeta[0] = omc_Expression_typeof(threadData, _e);
goto tmp2_done;
}
case 38: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,26,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_tp = tmpMeta[1];
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 39: {
_e = tmp3_1;
tmpMeta[1] = stringAppend(_OMC_LIT188,omc_ExpressionDump_printExpStr(threadData, _e));
_msg = tmpMeta[1];
tmpMeta[1] = mmc_mk_cons(_msg, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addMessage(threadData, _OMC_LIT31, tmpMeta[1]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 40) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
DLLExport
modelica_metatype omc_Expression_dimensionsSizes(threadData_t *threadData, modelica_metatype _inDims)
{
modelica_metatype _outValues = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outValues = omc_List_map(threadData, _inDims, boxvar_Expression_dimensionSizeAll);
_return: OMC_LABEL_UNUSED
return _outValues;
}
DLLExport
modelica_integer omc_Expression_dimensionSizeAll(threadData_t *threadData, modelica_metatype _dim)
{
modelica_integer _value;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _dim;
{
modelica_integer _i;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp6;
tmp4 += 5;
tmp1 = _i;
goto tmp3_done;
}
case 1: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp7 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp7;
tmp4 += 4;
tmp1 = _i;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
tmp4 += 3;
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta[0];
tmp1 = omc_Expression_expInt(threadData, _e);
goto tmp3_done;
}
case 4: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp4 += 1;
tmp8 = omc_Flags_getConfigBool(threadData, _OMC_LIT195);
if (1 != tmp8) goto goto_2;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 5: {
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
tmp9 = omc_Flags_getConfigBool(threadData, _OMC_LIT195);
if (1 != tmp9) goto goto_2;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_value = tmp1;
_return: OMC_LABEL_UNUSED
return _value;
}
modelica_metatype boxptr_Expression_dimensionSizeAll(threadData_t *threadData, modelica_metatype _dim)
{
modelica_integer _value;
modelica_metatype out_value;
_value = omc_Expression_dimensionSizeAll(threadData, _dim);
out_value = mmc_mk_icon(_value);
return out_value;
}
DLLExport
modelica_metatype omc_Expression_addDimensions(threadData_t *threadData, modelica_metatype _dim1, modelica_metatype _dim2)
{
modelica_metatype _dim = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_integer _i;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_i = omc_Expression_dimensionSize(threadData, _dim1) + omc_Expression_dimensionSize(threadData, _dim2);
tmpMeta[1] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(_i));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _OMC_LIT117;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_dim = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _dim;
}
DLLExport
modelica_integer omc_Expression_dimensionSize(threadData_t *threadData, modelica_metatype _dim)
{
modelica_integer _value;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _dim;
{
modelica_integer _i;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp6;
tmp1 = _i;
goto tmp3_done;
}
case 1: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp7 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp7;
tmp1 = _i;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 2);
goto tmp3_done;
}
case 3: {
modelica_integer tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp8 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp8;
tmp1 = _i;
goto tmp3_done;
}
case 4: {
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmp9 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp9;
tmp1 = _i;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_value = tmp1;
_return: OMC_LABEL_UNUSED
return _value;
}
modelica_metatype boxptr_Expression_dimensionSize(threadData_t *threadData, modelica_metatype _dim)
{
modelica_integer _value;
modelica_metatype out_value;
_value = omc_Expression_dimensionSize(threadData, _dim);
out_value = mmc_mk_icon(_value);
return out_value;
}
DLLExport
modelica_integer omc_Expression_sizeOf(threadData_t *threadData, modelica_metatype _inType)
{
modelica_integer _i;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inType;
{
modelica_metatype _ad = NULL;
modelica_integer _nr;
modelica_metatype _lstInt = NULL;
modelica_metatype _varLst = NULL;
modelica_metatype _typs = NULL;
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_ad = tmpMeta[0];
tmp4 += 5;
_nr = omc_Expression_dimensionSize(threadData, omc_List_reduce(threadData, _ad, boxvar_Expression_dimensionsMult));
tmp1 = (_nr) * (omc_Expression_sizeOf(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inType), 2)))));
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_varLst = tmpMeta[0];
tmp4 += 4;
_lstInt = omc_List_mapMap(threadData, _varLst, boxvar_Expression_varType, boxvar_Expression_sizeOf);
tmp1 = mmc_unbox_integer(omc_List_reduce(threadData, _lstInt, boxvar_intAdd));
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_typs = tmpMeta[0];
tmp4 += 3;
tmp1 = mmc_unbox_integer(omc_List_applyAndFold(threadData, _typs, boxvar_intAdd, boxvar_Expression_sizeOf, mmc_mk_integer(((modelica_integer) 0))));
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_ty = tmpMeta[0];
tmp4 += 2;
tmp1 = omc_Expression_sizeOf(threadData, _ty);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,25,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_ty = tmpMeta[0];
tmp4 += 1;
tmp1 = omc_Expression_sizeOf(threadData, _ty);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,0) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 6: {
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 7) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_i = tmp1;
_return: OMC_LABEL_UNUSED
return _i;
}
modelica_metatype boxptr_Expression_sizeOf(threadData_t *threadData, modelica_metatype _inType)
{
modelica_integer _i;
modelica_metatype out_i;
_i = omc_Expression_sizeOf(threadData, _inType);
out_i = mmc_mk_icon(_i);
return out_i;
}
DLLExport
modelica_metatype omc_Expression_arrayEltType(threadData_t *threadData, modelica_metatype _inType)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inType;
{
modelica_metatype _t = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_t = tmpMeta[1];
_inType = _t;
goto _tailrecursive;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inType;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
DLLExport
modelica_metatype omc_Expression_subscriptDimension(threadData_t *threadData, modelica_metatype _inSubscript)
{
modelica_metatype _outDimension = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inSubscript;
{
modelica_integer _x;
modelica_metatype _e = NULL;
modelica_string _sub_str = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
_x = tmp5;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(_x));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(6, &DAE_Dimension_DIM__EXP__desc, _e);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT117;
goto tmp2_done;
}
case 3: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[2]);
_x = tmp6;
if (!(!omc_Config_splitArrays(threadData))) goto tmp2_end;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(_x));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
if (!(!omc_Config_splitArrays(threadData))) goto tmp2_end;
tmpMeta[1] = mmc_mk_box2(6, &DAE_Dimension_DIM__EXP__desc, _e);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
modelica_boolean tmp7;
tmp7 = omc_Flags_isSet(threadData, _OMC_LIT60);
if (1 != tmp7) goto goto_1;
_sub_str = omc_ExpressionDump_subscriptString(threadData, _inSubscript);
tmpMeta[1] = stringAppend(_OMC_LIT196,_sub_str);
omc_Debug_traceln(threadData, tmpMeta[1]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outDimension = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outDimension;
}
DLLExport
modelica_metatype omc_Expression_subscriptDimensions(threadData_t *threadData, modelica_metatype _inSubscripts)
{
modelica_metatype _outDimensions = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outDimensions = omc_List_map(threadData, _inSubscripts, boxvar_Expression_subscriptDimension);
_return: OMC_LABEL_UNUSED
return _outDimensions;
}
DLLExport
modelica_metatype omc_Expression_arrayTypeDimensions(threadData_t *threadData, modelica_metatype _tp)
{
modelica_metatype _dims = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _tp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_dims = tmpMeta[1];
tmpMeta[0] = _dims;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_dims = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _dims;
}
DLLExport
modelica_metatype omc_Expression_arrayDimension(threadData_t *threadData, modelica_metatype _tp)
{
modelica_metatype _dims = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _tp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_dims = tmpMeta[1];
tmpMeta[0] = _dims;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_dims = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _dims;
}
DLLExport
modelica_metatype omc_Expression_expDimensions(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outDims = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _tp = NULL;
modelica_metatype _e = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_tp = tmpMeta[1];
tmpMeta[0] = omc_Expression_arrayDimension(threadData, _tp);
goto tmp2_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_tp = tmpMeta[1];
tmpMeta[0] = omc_Expression_arrayDimension(threadData, _tp);
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
_inExp = _e;
goto _tailrecursive;
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
_inExp = _e;
goto _tailrecursive;
goto tmp2_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_tp = tmpMeta[2];
tmpMeta[0] = omc_Expression_arrayDimension(threadData, _tp);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outDims = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outDims;
}
DLLExport
modelica_metatype omc_Expression_expLastSubs(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outSubscriptLst = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cr = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
tmpMeta[0] = omc_ComponentReference_crefLastSubs(threadData, _cr);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
_inExp = _e;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSubscriptLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubscriptLst;
}
DLLExport
modelica_metatype omc_Expression_nthArrayExp(threadData_t *threadData, modelica_metatype _inExp, modelica_integer _inInteger)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e_1 = NULL;
modelica_metatype _e_2 = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _op = NULL;
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
tmp3 += 1;
_ty = omc_Expression_typeofOp(threadData, _op);
tmp5 = omc_Types_isArray(threadData, _ty);
if (1 != tmp5) goto goto_1;
_e_1 = omc_Expression_nthArrayExp(threadData, _e1, _inInteger);
_e_2 = omc_Expression_nthArrayExp(threadData, _e2, _inInteger);
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e_1, _op, _e_2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expl = tmpMeta[1];
tmpMeta[0] = listGet(_expl, _inInteger);
goto tmp2_done;
}
case 2: {
tmpMeta[0] = _inExp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
modelica_metatype boxptr_Expression_nthArrayExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outExp = omc_Expression_nthArrayExp(threadData, _inExp, tmp1);
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_subscriptIsFirst(threadData_t *threadData, modelica_metatype _inSubscript)
{
modelica_boolean _outIsFirst;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inSubscript;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp6) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp7) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
modelica_integer tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmp8 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp8) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsFirst = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsFirst;
}
modelica_metatype boxptr_Expression_subscriptIsFirst(threadData_t *threadData, modelica_metatype _inSubscript)
{
modelica_boolean _outIsFirst;
modelica_metatype out_outIsFirst;
_outIsFirst = omc_Expression_subscriptIsFirst(threadData, _inSubscript);
out_outIsFirst = mmc_mk_icon(_outIsFirst);
return out_outIsFirst;
}
DLLExport
modelica_metatype omc_Expression_subscriptNonExpandedExp(threadData_t *threadData, modelica_metatype _inSubscript)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inSubscript;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
tmpMeta[0] = _e;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_getSubscriptExp(threadData_t *threadData, modelica_metatype _inSubscript)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inSubscript;
{
modelica_metatype _e = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
tmpMeta[0] = _e;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
tmpMeta[0] = _e;
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
tmpMeta[0] = _e;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_subscriptIndexExp(threadData_t *threadData, modelica_metatype _inSubscript)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inSubscript;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_outExp = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_boxExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _e;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,34,1) == 0) goto tmp2_end;
tmpMeta[0] = _e;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = mmc_mk_box2(37, &DAE_Exp_BOX__desc, _e);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_unboxExp(threadData_t *threadData, modelica_metatype _ie)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _ie;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,34,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
_ie = _e;
goto _tailrecursive;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _ie;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_unboxExpType(threadData_t *threadData, modelica_metatype _inType)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inType;
{
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,23,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_ty = tmpMeta[1];
tmpMeta[0] = _ty;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inType;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
DLLExport
modelica_metatype omc_Expression_get2dArrayOrMatrixContent(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outExps = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _e;
{
modelica_metatype _es = NULL;
modelica_metatype _ess = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_es = tmpMeta[1];
tmpMeta[0] = omc_List_map(threadData, _es, boxvar_Expression_getArrayContents);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ess = tmpMeta[1];
tmpMeta[0] = _ess;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExps = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExps;
}
DLLExport
modelica_metatype omc_Expression_getArrayOrRangeContents(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _es = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _e;
{
modelica_boolean _bstart;
modelica_boolean _bstop;
modelica_integer _istart;
modelica_integer _istep;
modelica_integer _istop;
modelica_real _rstart;
modelica_real _rstep;
modelica_real _rstop;
modelica_metatype _matrix = NULL;
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 8; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_es = tmpMeta[1];
tmpMeta[0] = _es;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ty = tmpMeta[1];
_matrix = tmpMeta[2];
_ty = omc_Types_unliftArray(threadData, _ty);
tmpMeta[0] = omc_List_map2(threadData, _matrix, boxvar_Expression_makeArray, _ty, mmc_mk_boolean((!omc_Types_arrayType(threadData, _ty))));
goto tmp2_done;
}
case 2: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[5]);
_istop = tmp5;
_es = omc_List_map(threadData, omc_ExpressionSimplify_simplifyRange(threadData, ((modelica_integer) 1), ((modelica_integer) 1), _istop), boxvar_Expression_makeIntegerExp);
tmpMeta[0] = omc_List_map1r(threadData, _es, boxvar_Expression_makeASUBSingleSub, _e);
goto tmp2_done;
}
case 3: {
modelica_integer tmp6;
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (!optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp7 = mmc_unbox_integer(tmpMeta[5]);
_bstart = tmp6;
_bstop = tmp7;
tmpMeta[0] = omc_List_map(threadData, omc_ExpressionSimplify_simplifyRangeBool(threadData, _bstart, _bstop), boxvar_Expression_makeBoolExp);
goto tmp2_done;
}
case 4: {
modelica_integer tmp8;
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (!optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp9 = mmc_unbox_integer(tmpMeta[5]);
_istart = tmp8;
_istop = tmp9;
tmpMeta[0] = omc_List_map(threadData, omc_ExpressionSimplify_simplifyRange(threadData, _istart, ((modelica_integer) 1), _istop), boxvar_Expression_makeIntegerExp);
goto tmp2_done;
}
case 5: {
modelica_integer tmp10;
modelica_integer tmp11;
modelica_integer tmp12;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp10 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp11 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,1) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmp12 = mmc_unbox_integer(tmpMeta[7]);
_istart = tmp10;
_istep = tmp11;
_istop = tmp12;
tmpMeta[0] = omc_List_map(threadData, omc_ExpressionSimplify_simplifyRange(threadData, _istart, _istep, _istop), boxvar_Expression_makeIntegerExp);
goto tmp2_done;
}
case 6: {
modelica_real tmp13;
modelica_real tmp14;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp13 = mmc_unbox_real(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (!optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp14 = mmc_unbox_real(tmpMeta[5]);
_rstart = tmp13;
_rstop = tmp14;
tmpMeta[0] = omc_List_map(threadData, omc_ExpressionSimplify_simplifyRangeReal(threadData, _rstart, 1.0, _rstop), boxvar_Expression_makeRealExp);
goto tmp2_done;
}
case 7: {
modelica_real tmp15;
modelica_real tmp16;
modelica_real tmp17;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp15 = mmc_unbox_real(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp16 = mmc_unbox_real(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,1) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmp17 = mmc_unbox_real(tmpMeta[7]);
_rstart = tmp15;
_rstep = tmp16;
_rstop = tmp17;
tmpMeta[0] = omc_List_map(threadData, omc_ExpressionSimplify_simplifyRangeReal(threadData, _rstart, _rstep, _rstop), boxvar_Expression_makeRealExp);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_es = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _es;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_getComplexContentsInCall(threadData_t *threadData, modelica_metatype _expIn)
{
modelica_metatype _expsOut = NULL;
modelica_metatype _expLst = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_expLst = omc_Expression_getComplexContents(threadData, _expIn);
tmp1 = (modelica_boolean)listEmpty(_expLst);
if(tmp1)
{
tmpMeta[0] = mmc_mk_cons(_expIn, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = tmpMeta[0];
}
else
{
tmpMeta[1] = _expLst;
}
_expsOut = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _expsOut;
}
static modelica_metatype closure1_Expression_makeBinaryExp(threadData_t *thData, modelica_metatype closure, modelica_metatype inLhs, modelica_metatype inRhs)
{
modelica_metatype inOp = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_Expression_makeBinaryExp(thData, inLhs, inOp, inRhs);
}
DLLExport
modelica_metatype omc_Expression_getComplexContents(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _es = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _e;
{
modelica_boolean _noArr;
modelica_metatype _exp = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _expLst = NULL;
modelica_metatype _expLst1 = NULL;
modelica_metatype _expLst2 = NULL;
modelica_metatype _expLstLst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 10; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmp3 += 8;
_expLst = omc_Expression_arrayElements(threadData, _e);
_noArr = (listLength(_expLst) == ((modelica_integer) 1));
_exp = listHead(_expLst);
_noArr = (_noArr && omc_Expression_expEqual(threadData, _exp, _e));
tmp5 = (modelica_boolean)_noArr;
if(tmp5)
{
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = tmpMeta[1];
}
else
{
tmpMeta[2] = _expLst;
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],7,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[3];
tmp3 += 7;
if(omc_Expression_isArray(threadData, _exp1))
{
_expLst1 = omc_Expression_getComplexContents(threadData, _exp1);
}
else
{
_expLst1 = omc_Expression_makeASUBsForDimension(threadData, _exp1);
}
if(omc_Expression_isArray(threadData, _exp2))
{
_expLst2 = omc_Expression_getComplexContents(threadData, _exp2);
}
else
{
_expLst2 = omc_Expression_makeASUBsForDimension(threadData, _exp2);
}
_ty = omc_Expression_typeof(threadData, listHead(_expLst1));
tmpMeta[2] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _ty);
tmpMeta[1] = mmc_mk_box1(0, tmpMeta[2]);
tmpMeta[0] = omc_List_threadMap(threadData, _expLst1, _expLst2, (modelica_fnptr) mmc_mk_box2(0,closure1_Expression_makeBinaryExp,tmpMeta[1]));
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_expLst = tmpMeta[1];
tmp3 += 6;
_expLstLst = omc_List_map(threadData, _expLst, boxvar_Expression_getComplexContentsInCall);
tmpMeta[0] = omc_List_flatten(threadData, _expLstLst);
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,14,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_expLst = tmpMeta[1];
tmp3 += 5;
tmpMeta[0] = _expLst;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmp3 += 4;
tmpMeta[0] = omc_Expression_arrayElements(threadData, _e);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expLstLst = tmpMeta[1];
tmp3 += 3;
tmpMeta[0] = omc_List_flatten(threadData, _expLstLst);
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,19,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_expLst = tmpMeta[1];
tmp3 += 2;
tmpMeta[0] = _expLst;
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,20,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exp = tmpMeta[1];
tmp3 += 1;
tmpMeta[0] = omc_Expression_getComplexContents(threadData, _exp);
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,21,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exp = tmpMeta[1];
tmpMeta[0] = omc_Expression_getComplexContents(threadData, _exp);
goto tmp2_done;
}
case 9: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 10) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_es = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _es;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makeASUBsForDimension(threadData_t *threadData, modelica_metatype _eIn)
{
modelica_metatype _eLstOut = NULL;
modelica_integer _size;
modelica_metatype _dims = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_eLstOut = tmpMeta[0];
_dims = omc_Expression_expDimensions(threadData, _eIn);
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
tmpMeta[1] = _dims;
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto goto_1;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[4]);
if (!listEmpty(tmpMeta[3])) goto goto_1;
_size = tmp5;
tmp6 = _size; tmp7 = ((modelica_integer) -1); tmp8 = ((modelica_integer) 1);
if(!(((tmp7 > 0) && (tmp6 > tmp8)) || ((tmp7 < 0) && (tmp6 < tmp8))))
{
modelica_integer _i;
for(_i = _size; in_range_integer(_i, tmp6, tmp8); _i += tmp7)
{
tmpMeta[2] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
tmpMeta[1] = mmc_mk_cons(omc_Expression_makeASUBSingleSub(threadData, _eIn, tmpMeta[2]), _eLstOut);
_eLstOut = tmpMeta[1];
}
}
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_eLstOut = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _eLstOut;
}
DLLExport
modelica_metatype omc_Expression_getArrayOrMatrixContents(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outContents = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _expl = NULL;
modelica_metatype _mat = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _el_ty = NULL;
modelica_metatype _dims = NULL;
modelica_boolean _sc;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expl = tmpMeta[1];
tmpMeta[0] = _expl;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_el_ty = tmpMeta[2];
_dims = tmpMeta[5];
_mat = tmpMeta[6];
tmpMeta[1] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _el_ty, _dims);
_ty = tmpMeta[1];
_sc = omc_Types_basicType(threadData, _el_ty);
tmpMeta[0] = omc_List_map2(threadData, _mat, boxvar_Expression_makeArray, _ty, mmc_mk_boolean(_sc));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outContents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outContents;
}
DLLExport
modelica_metatype omc_Expression_getArrayContents(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _es = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _e;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],16,3) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_es = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _es;
}
DLLExport
modelica_metatype omc_Expression_expCrefInclIfExpFactors(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outComponentRefs = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cr = NULL;
modelica_metatype _tb = NULL;
modelica_metatype _fb = NULL;
modelica_metatype _f = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
tmpMeta[1] = mmc_mk_cons(_cr, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,12,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_tb = tmpMeta[1];
_fb = tmpMeta[2];
_f = omc_List_select(threadData, listAppend(omc_Expression_factors(threadData, _tb), omc_Expression_factors(threadData, _fb)), boxvar_Expression_isCref);
tmpMeta[0] = omc_List_map(threadData, _f, boxvar_Expression_expCref);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRefs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRefs;
}
DLLExport
modelica_metatype omc_Expression_expCrefTuple(threadData_t *threadData, modelica_metatype _inTuple)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inTuple;
{
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_cr = tmpMeta[2];
tmpMeta[0] = _cr;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
DLLExport
modelica_metatype omc_Expression_expCrefNegCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
tmpMeta[0] = _cr;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_cr = tmpMeta[3];
tmpMeta[0] = _cr;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_cr = tmpMeta[3];
tmpMeta[0] = _cr;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
DLLExport
modelica_metatype omc_Expression_expCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
tmpMeta[0] = _cr;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
DLLExport
modelica_metatype omc_Expression_expOrDerCref(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean *out_isDer)
{
modelica_metatype _outComponentRef = NULL;
modelica_boolean _isDer;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[2];
tmpMeta[0+0] = _cr;
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (3 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],6,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (!listEmpty(tmpMeta[6])) goto tmp3_end;
_cr = tmpMeta[7];
tmpMeta[0+0] = _cr;
tmp1_c1 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outComponentRef = tmpMeta[0+0];
_isDer = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_isDer) { *out_isDer = _isDer; }
return _outComponentRef;
}
modelica_metatype boxptr_Expression_expOrDerCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype *out_isDer)
{
modelica_boolean _isDer;
modelica_metatype _outComponentRef = NULL;
_outComponentRef = omc_Expression_expOrDerCref(threadData, _inExp, &_isDer);
if (out_isDer) { *out_isDer = mmc_mk_icon(_isDer); }
return _outComponentRef;
}
DLLExport
modelica_metatype omc_Expression_varType(threadData_t *threadData, modelica_metatype _v)
{
modelica_metatype _tp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _v;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_tp = tmpMeta[1];
tmpMeta[0] = _tp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_tp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _tp;
}
DLLExport
modelica_string omc_Expression_varName(threadData_t *threadData, modelica_metatype _v)
{
modelica_string _name = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _v;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta[0];
tmp1 = _name;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_name = tmp1;
_return: OMC_LABEL_UNUSED
return _name;
}
DLLExport
modelica_string omc_Expression_sconstEnumNameString(threadData_t *threadData, modelica_metatype _exp)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
modelica_string _s = NULL;
modelica_metatype _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_s = tmpMeta[0];
tmp1 = _s;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta[0];
tmp1 = omc_AbsynUtil_pathString(threadData, _name, _OMC_LIT47, 1, 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_integer omc_Expression_expArrayIndex(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_integer _outIndex;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))));
goto tmp3_done;
}
case 8: {
tmp1 = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3))));
goto tmp3_done;
}
case 6: {
tmp1 = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))))?((modelica_integer) 2):((modelica_integer) 1));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIndex = tmp1;
_return: OMC_LABEL_UNUSED
return _outIndex;
}
modelica_metatype boxptr_Expression_expArrayIndex(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_integer _outIndex;
modelica_metatype out_outIndex;
_outIndex = omc_Expression_expArrayIndex(threadData, _inExp);
out_outIndex = mmc_mk_icon(_outIndex);
return out_outIndex;
}
DLLExport
modelica_metatype omc_Expression_getClockInterval(threadData_t *threadData, modelica_metatype _inClk)
{
modelica_metatype _outIntvl = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e2 = NULL;
modelica_integer _res;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClk;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
tmpMeta[0] = _e;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
_e2 = tmpMeta[2];
tmpMeta[1] = mmc_mk_box3(23, &DAE_Exp_CAST__desc, _OMC_LIT134, _e);
tmpMeta[2] = mmc_mk_box3(23, &DAE_Exp_CAST__desc, _OMC_LIT134, _e2);
tmpMeta[3] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta[1], _OMC_LIT175, tmpMeta[2]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
_e2 = tmpMeta[2];
tmpMeta[0] = _e2;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _OMC_LIT135;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outIntvl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outIntvl;
}
DLLExport
modelica_integer omc_Expression_expInt(threadData_t *threadData, modelica_metatype _exp)
{
modelica_integer _i;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))));
goto tmp3_done;
}
case 8: {
tmp1 = mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))));
goto tmp3_done;
}
case 6: {
tmp1 = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 2))))?((modelica_integer) 1):((modelica_integer) 0));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_i = tmp1;
_return: OMC_LABEL_UNUSED
return _i;
}
modelica_metatype boxptr_Expression_expInt(threadData_t *threadData, modelica_metatype _exp)
{
modelica_integer _i;
modelica_metatype out_i;
_i = omc_Expression_expInt(threadData, _exp);
out_i = mmc_mk_icon(_i);
return out_i;
}
DLLExport
modelica_metatype omc_Expression_realExpIntLit(threadData_t *threadData, modelica_metatype _exp)
{
modelica_metatype _oi = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _exp;
{
modelica_real _r;
modelica_integer _i;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_real tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_real(tmpMeta[1]);
_r = tmp5;
_i = ((modelica_integer)floor(_r));
tmpMeta[0] = ((_r == ((modelica_real)_i))?mmc_mk_some(mmc_mk_integer(_i)):mmc_mk_none());
goto tmp2_done;
}
case 1: {
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_oi = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _oi;
}
DLLExport
modelica_boolean omc_Expression_toBool(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBool;
modelica_integer tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inExp;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,1) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_outBool = tmp1;
_return: OMC_LABEL_UNUSED
return _outBool;
}
modelica_metatype boxptr_Expression_toBool(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _outBool;
modelica_metatype out_outBool;
_outBool = omc_Expression_toBool(threadData, _inExp);
out_outBool = mmc_mk_icon(_outBool);
return out_outBool;
}
DLLExport
modelica_real omc_Expression_toReal(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_real _outReal;
modelica_real tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
tmp1 = mmc_unbox_real((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))));
goto tmp3_done;
}
case 3: {
tmp1 = ((modelica_real)mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2)))));
goto tmp3_done;
}
case 23: {
_inExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3)));
goto _tailrecursive;
goto tmp3_done;
}
case 8: {
tmp1 = ((modelica_real)mmc_unbox_integer((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3)))));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outReal = tmp1;
_return: OMC_LABEL_UNUSED
return _outReal;
}
modelica_metatype boxptr_Expression_toReal(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_real _outReal;
modelica_metatype out_outReal;
_outReal = omc_Expression_toReal(threadData, _inExp);
out_outReal = mmc_mk_rcon(_outReal);
return out_outReal;
}
DLLExport
modelica_metatype omc_Expression_arrayDimensionSetFirst(threadData_t *threadData, modelica_metatype _inArrayType, modelica_metatype _dimension)
{
modelica_metatype _outArrayType = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inArrayType;
{
modelica_metatype _ty = NULL;
modelica_metatype _rest_dims = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_ty = tmpMeta[1];
_rest_dims = tmpMeta[4];
tmpMeta[1] = mmc_mk_cons(_dimension, _rest_dims);
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outArrayType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outArrayType;
}
DLLExport
modelica_metatype omc_Expression_arrayAppend(threadData_t *threadData, modelica_metatype _head, modelica_metatype _rest)
{
modelica_metatype _array = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _rest;
{
modelica_metatype _ty = NULL;
modelica_boolean _scalar;
modelica_metatype _expl = NULL;
modelica_integer _dim;
modelica_metatype _dims = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[6]);
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[7]);
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ty = tmpMeta[2];
_dim = tmp5;
_dims = tmpMeta[5];
_scalar = tmp6;
_expl = tmpMeta[8];
_dim = ((modelica_integer) 1) + _dim;
tmpMeta[2] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(_dim));
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _dims);
_dims = tmpMeta[1];
tmpMeta[1] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, _dims);
tmpMeta[2] = mmc_mk_cons(_head, _expl);
tmpMeta[3] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, tmpMeta[1], mmc_mk_boolean(_scalar), tmpMeta[2]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp7;
tmp7 = omc_Flags_isSet(threadData, _OMC_LIT60);
if (1 != tmp7) goto goto_1;
omc_Debug_traceln(threadData, _OMC_LIT197);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_array = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _array;
}
DLLExport
modelica_metatype omc_Expression_unliftArrayX(threadData_t *threadData, modelica_metatype _inType, modelica_integer _x)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_integer tmp3_1;
tmp3_1 = _x;
{
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (0 != tmp3_1) goto tmp2_end;
tmpMeta[0] = _inType;
goto tmp2_done;
}
case 1: {
_ty = omc_Expression_unliftArray(threadData, _inType);
_inType = _ty;
_x = ((modelica_integer) -1) + _x;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
modelica_metatype boxptr_Expression_unliftArrayX(threadData_t *threadData, modelica_metatype _inType, modelica_metatype _x)
{
modelica_integer tmp1;
modelica_metatype _outType = NULL;
tmp1 = mmc_unbox_integer(_x);
_outType = omc_Expression_unliftArrayX(threadData, _inType, tmp1);
return _outType;
}
DLLExport
modelica_metatype omc_Expression_unliftArrayTypeWithSubs(threadData_t *threadData, modelica_metatype _subs, modelica_metatype _ity)
{
modelica_metatype _oty = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _subs;
tmp3_2 = _ity;
{
modelica_metatype _rest = NULL;
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_ty = tmp3_2;
tmpMeta[0] = _ty;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
_ty = tmp3_2;
_ty = omc_Expression_unliftArray(threadData, _ty);
_subs = _rest;
_ity = _ty;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_oty = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _oty;
}
DLLExport
modelica_metatype omc_Expression_subscriptsReplaceSlice(threadData_t *threadData, modelica_metatype _inSubscripts, modelica_metatype _inSubscript)
{
modelica_metatype _outSubscripts = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inSubscripts;
{
modelica_metatype _rest_subs = NULL;
modelica_metatype _sub = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp2_end;
_rest_subs = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_inSubscript, _rest_subs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
_rest_subs = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_inSubscript, _rest_subs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_sub = tmpMeta[1];
_rest_subs = tmpMeta[2];
_rest_subs = omc_Expression_subscriptsReplaceSlice(threadData, _rest_subs, _inSubscript);
tmpMeta[1] = mmc_mk_cons(_sub, _rest_subs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSubscripts = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubscripts;
}
DLLExport
modelica_metatype omc_Expression_subscriptsAppend(threadData_t *threadData, modelica_metatype _inSubscriptLst, modelica_metatype _inSubscript)
{
modelica_metatype _outSubscriptLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inSubscriptLst;
{
modelica_metatype _e_1 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _s = NULL;
modelica_metatype _ss_1 = NULL;
modelica_metatype _ss = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[2] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, _inSubscript);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp2_end;
_ss = tmpMeta[2];
tmpMeta[2] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, _inSubscript);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _ss);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_e = tmpMeta[3];
tmpMeta[1] = mmc_mk_cons(_inSubscript, MMC_REFSTRUCTLIT(mmc_nil));
_e_1 = omc_ExpressionSimplify_simplify1(threadData, omc_Expression_makeASUB(threadData, _e, tmpMeta[1]), NULL);
tmpMeta[2] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, _e_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto tmp2_end;
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_s = tmpMeta[1];
tmpMeta[2] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, _inSubscript);
tmpMeta[1] = mmc_mk_cons(_s, mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil)));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_s = tmpMeta[1];
_ss = tmpMeta[2];
_ss_1 = omc_Expression_subscriptsAppend(threadData, _ss, _inSubscript);
tmpMeta[1] = mmc_mk_cons(_s, _ss_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSubscriptLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubscriptLst;
}
DLLExport
modelica_boolean omc_Expression_isArrayScalarOp(threadData_t *threadData, modelica_metatype _inOperator)
{
modelica_boolean _outIsArrayScalarOp;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inOperator;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 14: {
tmp1 = 1;
goto tmp3_done;
}
case 15: {
tmp1 = 1;
goto tmp3_done;
}
case 19: {
tmp1 = 1;
goto tmp3_done;
}
case 21: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsArrayScalarOp = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsArrayScalarOp;
}
modelica_metatype boxptr_Expression_isArrayScalarOp(threadData_t *threadData, modelica_metatype _inOperator)
{
modelica_boolean _outIsArrayScalarOp;
modelica_metatype out_outIsArrayScalarOp;
_outIsArrayScalarOp = omc_Expression_isArrayScalarOp(threadData, _inOperator);
out_outIsArrayScalarOp = mmc_mk_icon(_outIsArrayScalarOp);
return out_outIsArrayScalarOp;
}
DLLExport
modelica_boolean omc_Expression_isScalarArrayOp(threadData_t *threadData, modelica_metatype _inOperator)
{
modelica_boolean _outIsScalarArrayOp;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inOperator;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 16: {
tmp1 = 1;
goto tmp3_done;
}
case 20: {
tmp1 = 1;
goto tmp3_done;
}
case 22: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsScalarArrayOp = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsScalarArrayOp;
}
modelica_metatype boxptr_Expression_isScalarArrayOp(threadData_t *threadData, modelica_metatype _inOperator)
{
modelica_boolean _outIsScalarArrayOp;
modelica_metatype out_outIsScalarArrayOp;
_outIsScalarArrayOp = omc_Expression_isScalarArrayOp(threadData, _inOperator);
out_outIsScalarArrayOp = mmc_mk_icon(_outIsScalarArrayOp);
return out_outIsScalarArrayOp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_makeScalarOpFromArrayOp(threadData_t *threadData, modelica_metatype _inOperator, modelica_metatype _inType)
{
modelica_metatype _outOperator = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inOperator;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 14: {
tmpMeta[1] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 15: {
tmpMeta[1] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 16: {
tmpMeta[1] = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 19: {
tmpMeta[1] = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 20: {
tmpMeta[1] = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 21: {
tmpMeta[1] = mmc_mk_box2(7, &DAE_Operator_POW__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 22: {
tmpMeta[1] = mmc_mk_box2(7, &DAE_Operator_POW__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 9: {
tmpMeta[1] = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 10: {
tmpMeta[1] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 11: {
tmpMeta[1] = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 12: {
tmpMeta[1] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 13: {
tmpMeta[1] = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _inOperator;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outOperator = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outOperator;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_unliftOperator2(threadData_t *threadData, modelica_metatype _inOperator, modelica_metatype _inType)
{
modelica_metatype _outOperator = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inType;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[0] = omc_Expression_setOpType(threadData, _inOperator, _inType);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = omc_Expression_makeScalarOpFromArrayOp(threadData, _inOperator, _inType);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outOperator = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outOperator;
}
DLLExport
modelica_metatype omc_Expression_unliftOperatorX(threadData_t *threadData, modelica_metatype _inOperator, modelica_integer _inX)
{
modelica_metatype _outOperator = NULL;
modelica_metatype _ty = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ty = omc_Expression_typeofOp(threadData, _inOperator);
_ty = omc_Expression_unliftArrayX(threadData, _ty, _inX);
_outOperator = omc_Expression_unliftOperator2(threadData, _inOperator, _ty);
_return: OMC_LABEL_UNUSED
return _outOperator;
}
modelica_metatype boxptr_Expression_unliftOperatorX(threadData_t *threadData, modelica_metatype _inOperator, modelica_metatype _inX)
{
modelica_integer tmp1;
modelica_metatype _outOperator = NULL;
tmp1 = mmc_unbox_integer(_inX);
_outOperator = omc_Expression_unliftOperatorX(threadData, _inOperator, tmp1);
return _outOperator;
}
DLLExport
modelica_metatype omc_Expression_unliftOperator(threadData_t *threadData, modelica_metatype _inOperator)
{
modelica_metatype _outOperator = NULL;
modelica_metatype _ty = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ty = omc_Expression_typeofOp(threadData, _inOperator);
_ty = omc_Expression_unliftArray(threadData, _ty);
_outOperator = omc_Expression_unliftOperator2(threadData, _inOperator, _ty);
_return: OMC_LABEL_UNUSED
return _outOperator;
}
DLLExport
modelica_metatype omc_Expression_setOpType(threadData_t *threadData, modelica_metatype _inOp, modelica_metatype _inType)
{
modelica_metatype _outOp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inOp;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
tmpMeta[1] = mmc_mk_box2(3, &DAE_Operator_ADD__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
tmpMeta[1] = mmc_mk_box2(4, &DAE_Operator_SUB__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
tmpMeta[1] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
tmpMeta[1] = mmc_mk_box2(6, &DAE_Operator_DIV__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
tmpMeta[1] = mmc_mk_box2(7, &DAE_Operator_POW__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 8: {
tmpMeta[1] = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 9: {
tmpMeta[1] = mmc_mk_box2(9, &DAE_Operator_UMINUS__ARR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 10: {
tmpMeta[1] = mmc_mk_box2(10, &DAE_Operator_ADD__ARR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 11: {
tmpMeta[1] = mmc_mk_box2(11, &DAE_Operator_SUB__ARR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 12: {
tmpMeta[1] = mmc_mk_box2(12, &DAE_Operator_MUL__ARR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 13: {
tmpMeta[1] = mmc_mk_box2(13, &DAE_Operator_DIV__ARR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 14: {
tmpMeta[1] = mmc_mk_box2(14, &DAE_Operator_MUL__ARRAY__SCALAR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 15: {
tmpMeta[1] = mmc_mk_box2(15, &DAE_Operator_ADD__ARRAY__SCALAR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 16: {
tmpMeta[1] = mmc_mk_box2(16, &DAE_Operator_SUB__SCALAR__ARRAY__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 17: {
tmpMeta[1] = mmc_mk_box2(17, &DAE_Operator_MUL__SCALAR__PRODUCT__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 18: {
tmpMeta[1] = mmc_mk_box2(18, &DAE_Operator_MUL__MATRIX__PRODUCT__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 19: {
tmpMeta[1] = mmc_mk_box2(19, &DAE_Operator_DIV__ARRAY__SCALAR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 20: {
tmpMeta[1] = mmc_mk_box2(20, &DAE_Operator_DIV__SCALAR__ARRAY__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 21: {
tmpMeta[1] = mmc_mk_box2(21, &DAE_Operator_POW__ARRAY__SCALAR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 22: {
tmpMeta[1] = mmc_mk_box2(22, &DAE_Operator_POW__SCALAR__ARRAY__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 23: {
tmpMeta[1] = mmc_mk_box2(23, &DAE_Operator_POW__ARR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 24: {
tmpMeta[1] = mmc_mk_box2(24, &DAE_Operator_POW__ARR2__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 25: {
tmpMeta[1] = mmc_mk_box2(25, &DAE_Operator_AND__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 26: {
tmpMeta[1] = mmc_mk_box2(26, &DAE_Operator_OR__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 27: {
tmpMeta[1] = mmc_mk_box2(27, &DAE_Operator_NOT__desc, _inType);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 28: {
tmpMeta[0] = _inOp;
goto tmp2_done;
}
case 29: {
tmpMeta[0] = _inOp;
goto tmp2_done;
}
case 30: {
tmpMeta[0] = _inOp;
goto tmp2_done;
}
case 31: {
tmpMeta[0] = _inOp;
goto tmp2_done;
}
case 32: {
tmpMeta[0] = _inOp;
goto tmp2_done;
}
case 33: {
tmpMeta[0] = _inOp;
goto tmp2_done;
}
case 34: {
tmpMeta[0] = _inOp;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
modelica_boolean tmp4;
tmp4 = omc_Flags_isSet(threadData, _OMC_LIT60);
if (1 != tmp4) goto goto_1;
omc_Debug_traceln(threadData, _OMC_LIT198);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outOp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outOp;
}
DLLExport
modelica_metatype omc_Expression_liftArrayLeftList(threadData_t *threadData, modelica_metatype _inType, modelica_metatype _inDimensions)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inType;
tmp3_2 = _inDimensions;
{
modelica_metatype _ty = NULL;
modelica_metatype _dims = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[0] = _inType;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_ty = tmpMeta[1];
_dims = tmpMeta[2];
_dims = listAppend(_inDimensions, _dims);
tmpMeta[1] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, _dims);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
tmpMeta[1] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _inType, _inDimensions);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
DLLExport
modelica_metatype omc_Expression_liftArrayLeft(threadData_t *threadData, modelica_metatype _inType, modelica_metatype _inDimension)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inType;
tmp3_2 = _inDimension;
{
modelica_metatype _ty = NULL;
modelica_metatype _dims = NULL;
modelica_metatype _dim = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_ty = tmpMeta[1];
_dims = tmpMeta[2];
_dim = tmp3_2;
tmpMeta[1] = mmc_mk_cons(_dim, _dims);
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = mmc_mk_cons(_inDimension, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _inType, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
DLLExport
modelica_metatype omc_Expression_liftArrayRight(threadData_t *threadData, modelica_metatype _inType, modelica_metatype _inDimension)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inType;
tmp3_2 = _inDimension;
{
modelica_metatype _ty_1 = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _dims = NULL;
modelica_metatype _dim = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_ty = tmpMeta[1];
_dims = tmpMeta[2];
_dim = tmp3_2;
_ty_1 = omc_Expression_liftArrayRight(threadData, _ty, _dim);
tmpMeta[1] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _ty_1, _dims);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = mmc_mk_cons(_inDimension, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _inType, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
DLLExport
modelica_metatype omc_Expression_liftExpList(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDimensions)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _inExp;
{
modelica_metatype _dim;
for (tmpMeta[0] = listReverse(_inDimensions); !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_dim = MMC_CAR(tmpMeta[0]);
_outExp = omc_Expression_liftExp(threadData, _outExp, _dim);
}
}
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_liftExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDimension)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, omc_Types_liftArray(threadData, omc_Expression_typeof(threadData, _inExp), _inDimension), mmc_mk_boolean(0), omc_List_fill(threadData, _inExp, omc_Expression_dimensionSize(threadData, _inDimension)));
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_unliftExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _ty = NULL;
modelica_metatype _cr = NULL;
modelica_boolean _s;
modelica_metatype _a = NULL;
modelica_integer _i;
modelica_metatype _mat = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr = tmpMeta[1];
_ty = tmpMeta[2];
_ty = omc_Expression_unliftArray(threadData, _ty);
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _cr, _ty);
goto tmp2_done;
}
case 19: {
modelica_integer tmp4;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp4 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ty = tmpMeta[1];
_s = tmp4;
_a = tmpMeta[3];
_ty = omc_Expression_unliftArray(threadData, _ty);
tmpMeta[1] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _ty, mmc_mk_boolean(_s), _a);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 20: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_ty = tmpMeta[1];
_i = tmp5;
_mat = tmpMeta[3];
_ty = omc_Expression_unliftArray(threadData, _ty);
tmpMeta[1] = mmc_mk_box4(20, &DAE_Exp_MATRIX__desc, _ty, mmc_mk_integer(_i), _mat);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _inExp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_unliftArrayIgnoreFirst(threadData_t *threadData, modelica_metatype _a, modelica_metatype _inType)
{
modelica_metatype _outType = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outType = omc_Expression_unliftArray(threadData, _inType);
_return: OMC_LABEL_UNUSED
return _outType;
}
DLLExport
modelica_metatype omc_Expression_unliftArray(threadData_t *threadData, modelica_metatype _inType)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inType;
{
modelica_metatype _tp = NULL;
modelica_metatype _ds = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_tp = tmpMeta[1];
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_tp = tmpMeta[1];
_ds = tmpMeta[4];
tmpMeta[1] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _tp, _ds);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,25,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_tp = tmpMeta[1];
tmpMeta[0] = omc_Types_simplifyType(threadData, omc_Expression_unliftArray(threadData, _tp));
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,22,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_tp = tmpMeta[1];
tmpMeta[0] = _tp;
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _inType;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
DLLExport
modelica_metatype omc_Expression_subscriptExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inSubs)
{
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inExp;
tmp3_2 = _inSubs;
{
modelica_metatype _cref = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _explst = NULL;
modelica_metatype _sub = NULL;
modelica_metatype _restsubs = NULL;
modelica_metatype _op = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[0] = _inExp;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cref = tmpMeta[1];
_ty = tmpMeta[2];
_cref = omc_ComponentReference_subscriptCref(threadData, _cref, _inSubs);
tmpMeta[1] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cref, _ty);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmp3_2);
tmpMeta[3] = MMC_CDR(tmp3_2);
_explst = tmpMeta[1];
_sub = tmpMeta[2];
_restsubs = tmpMeta[3];
_exp = listGet(_explst, omc_Expression_subscriptInt(threadData, _sub));
_inExp = _exp;
_inSubs = _restsubs;
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp1 = tmpMeta[1];
_op = tmpMeta[2];
_exp2 = tmpMeta[3];
_exp1 = omc_Expression_subscriptExp(threadData, _exp1, _inSubs);
_exp2 = omc_Expression_subscriptExp(threadData, _exp2, _inSubs);
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _exp1, _op, _exp2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,20,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_ty = tmpMeta[1];
_exp1 = tmpMeta[2];
_exp1 = omc_Expression_subscriptExp(threadData, _exp1, _inSubs);
_ty = omc_Types_arrayElementType(threadData, _ty);
tmpMeta[1] = mmc_mk_box3(23, &DAE_Exp_CAST__desc, _ty, _exp1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
tmpMeta[1] = stringAppend(_OMC_LIT199,omc_ExpressionDump_printExpStr(threadData, _inExp));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT42);
_str = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addMessage(threadData, _OMC_LIT31, tmpMeta[1]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outArg = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outArg;
}
DLLExport
modelica_metatype omc_Expression_applyExpSubscriptsFoldCheckSimplify(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _inSubs, modelica_boolean __omcQ_24in_5FcheckSimplify, modelica_boolean *out_checkSimplify)
{
modelica_metatype _exp = NULL;
modelica_boolean _checkSimplify;
modelica_boolean _b;
modelica_metatype _s = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_exp = __omcQ_24in_5Fexp;
_checkSimplify = __omcQ_24in_5FcheckSimplify;
{
modelica_metatype _sub;
for (tmpMeta[0] = _inSubs; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_sub = MMC_CAR(tmpMeta[0]);
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_s = omc_Expression_getSubscriptExp(threadData, _sub);
tmpMeta[1] = mmc_mk_cons(_s, MMC_REFSTRUCTLIT(mmc_nil));
_exp = omc_ExpressionSimplify_simplify(threadData, omc_Expression_makeASUB(threadData, _exp, tmpMeta[1]) ,&_b);
_checkSimplify = (_b || _checkSimplify);
goto tmp2_done;
}
case 1: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
}
}
_return: OMC_LABEL_UNUSED
if (out_checkSimplify) { *out_checkSimplify = _checkSimplify; }
return _exp;
}
modelica_metatype boxptr_Expression_applyExpSubscriptsFoldCheckSimplify(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _inSubs, modelica_metatype __omcQ_24in_5FcheckSimplify, modelica_metatype *out_checkSimplify)
{
modelica_integer tmp1;
modelica_boolean _checkSimplify;
modelica_metatype _exp = NULL;
tmp1 = mmc_unbox_integer(__omcQ_24in_5FcheckSimplify);
_exp = omc_Expression_applyExpSubscriptsFoldCheckSimplify(threadData, __omcQ_24in_5Fexp, _inSubs, tmp1, &_checkSimplify);
if (out_checkSimplify) { *out_checkSimplify = mmc_mk_icon(_checkSimplify); }
return _exp;
}
DLLExport
modelica_metatype omc_Expression_applyExpSubscripts(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype _inSubs)
{
modelica_metatype _exp = NULL;
modelica_metatype _s = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_exp = __omcQ_24in_5Fexp;
_exp = omc_Expression_applyExpSubscriptsFoldCheckSimplify(threadData, _exp, _inSubs, 0, NULL);
_return: OMC_LABEL_UNUSED
return _exp;
}
DLLExport
modelica_metatype omc_Expression_prependSubscriptExp(threadData_t *threadData, modelica_metatype _exp, modelica_metatype _subscr)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _exp;
{
modelica_metatype _t = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _subs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr = tmpMeta[1];
_t = tmpMeta[2];
_cr1 = omc_ComponentReference_crefStripLastSubs(threadData, _cr);
_subs = omc_ComponentReference_crefLastSubs(threadData, _cr);
tmpMeta[1] = mmc_mk_cons(_subscr, _subs);
_cr2 = omc_ComponentReference_subscriptCref(threadData, _cr1, tmpMeta[1]);
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _cr2, _t);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expStripLastIdent(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cr = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _op1 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e_1 = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_cr_1 = omc_ComponentReference_crefStripLastIdent(threadData, _cr);
_ty = omc_ComponentReference_crefLastType(threadData, _cr_1);
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _cr_1, _ty);
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
_e_1 = omc_Expression_expStripLastIdent(threadData, _e);
_ty = omc_Expression_typeof(threadData, _e_1);
_b = omc_DAEUtil_expTypeArray(threadData, _ty);
tmp5 = (modelica_boolean)_b;
if(tmp5)
{
tmpMeta[1] = mmc_mk_box2(9, &DAE_Operator_UMINUS__ARR__desc, _ty);
tmpMeta[3] = tmpMeta[1];
}
else
{
tmpMeta[2] = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _ty);
tmpMeta[3] = tmpMeta[2];
}
_op1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _op1, _e_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expStripLastSubs(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cr = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _op1 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e_1 = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_ty = omc_ComponentReference_crefLastType(threadData, _cr);
_cr_1 = omc_ComponentReference_crefStripLastSubs(threadData, _cr);
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _cr_1, _ty);
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[1];
_e_1 = omc_Expression_expStripLastSubs(threadData, _e);
_ty = omc_Expression_typeof(threadData, _e_1);
_b = omc_DAEUtil_expTypeArray(threadData, _ty);
tmp5 = (modelica_boolean)_b;
if(tmp5)
{
tmpMeta[1] = mmc_mk_box2(9, &DAE_Operator_UMINUS__ARR__desc, _ty);
tmpMeta[3] = tmpMeta[1];
}
else
{
tmpMeta[2] = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _ty);
tmpMeta[3] = tmpMeta[2];
}
_op1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _op1, _e_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_addNoEventToEventTriggeringFunctionsExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _e;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
if (!omc_Expression_isEventTriggeringFunctionExp(threadData, _e)) goto tmp2_end;
tmpMeta[0] = omc_Expression_makeNoEvent(threadData, _e);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _e;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_addNoEventToEventTriggeringFunctions(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outE = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outE = omc_Expression_traverseExpDummy(threadData, _e, boxvar_Expression_addNoEventToEventTriggeringFunctionsExp);
_return: OMC_LABEL_UNUSED
return _outE;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_addNoEventToRelationandCondExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _e;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e3 = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 14: {
tmpMeta[0] = omc_Expression_makeNoEvent(threadData, _e);
goto tmp2_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,12,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_e3 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box4(15, &DAE_Exp_IFEXP__desc, omc_Expression_makeNoEvent(threadData, _e1), _e2, _e3);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _e;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_addNoEventToRelationsAndConds(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outE = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outE = omc_Expression_traverseExpDummy(threadData, _e, boxvar_Expression_addNoEventToRelationandCondExp);
_return: OMC_LABEL_UNUSED
return _outE;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_addNoEventToRelationExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _e;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,5) == 0) goto tmp2_end;
tmpMeta[0] = omc_Expression_makeNoEvent(threadData, _e);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _e;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_addNoEventToRelations(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outE = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outE = omc_Expression_traverseExpDummy(threadData, _e, boxvar_Expression_addNoEventToRelationExp);
_return: OMC_LABEL_UNUSED
return _outE;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_stripNoEventExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _e;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (7 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT104), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (!listEmpty(tmpMeta[5])) goto tmp2_end;
_outExp = tmpMeta[4];
tmpMeta[0] = _outExp;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _e;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_stripNoEvent(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outE = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outE = omc_Expression_traverseExpDummy(threadData, _e, boxvar_Expression_stripNoEventExp);
_return: OMC_LABEL_UNUSED
return _outE;
}
DLLExport
modelica_metatype omc_Expression_expAbs(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_integer _i2;
modelica_integer _i;
modelica_real _r2;
modelica_real _r;
modelica_metatype _e = NULL;
modelica_metatype _e1_1 = NULL;
modelica_metatype _e2_1 = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _op = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp5;
_i2 = labs(_i);
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i2));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_real tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp6 = mmc_unbox_real(tmpMeta[1]);
_r = tmp6;
_r2 = fabs(_r);
tmpMeta[1] = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(_r2));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[2];
_inExp = _e;
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
_e1_1 = omc_Expression_expAbs(threadData, _e1);
_e2_1 = omc_Expression_expAbs(threadData, _e2);
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1_1, _op, _e2_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _inExp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expDer(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_cons(_inExp, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT200, tmpMeta[0], _OMC_LIT141);
_outExp = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_expand(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _outE = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _e;
{
modelica_metatype _tp = NULL;
modelica_metatype _op = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e21 = NULL;
modelica_metatype _e22 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],7,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_e1 = tmpMeta[1];
_tp = tmpMeta[3];
_e2 = tmpMeta[4];
_e21 = tmpMeta[5];
_op = tmpMeta[6];
_e22 = tmpMeta[7];
if (!omc_Expression_isAddOrSub(threadData, _op)) goto tmp2_end;
tmpMeta[1] = omc_Expression_expand(threadData, _e2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,3) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_e21 = tmpMeta[2];
_op = tmpMeta[3];
_e22 = tmpMeta[4];
tmpMeta[1] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
tmpMeta[2] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta[1], _e21);
tmpMeta[3] = mmc_mk_box2(5, &DAE_Operator_MUL__desc, _tp);
tmpMeta[4] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e1, tmpMeta[3], _e22);
tmpMeta[5] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, tmpMeta[2], _op, tmpMeta[4]);
tmpMeta[0] = tmpMeta[5];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _e;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outE = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outE;
}
DLLExport
modelica_metatype omc_Expression_negateReal(threadData_t *threadData, modelica_metatype _inReal)
{
modelica_metatype _outNegatedReal = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _OMC_LIT201, _inReal);
_outNegatedReal = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outNegatedReal;
}
DLLExport
modelica_metatype omc_Expression_negate(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _t = NULL;
modelica_metatype _op = NULL;
modelica_boolean _b;
modelica_boolean _b_1;
modelica_real _r;
modelica_real _r_1;
modelica_integer _i;
modelica_integer _i_1;
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 10; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[2];
tmpMeta[0] = _e;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[2];
tmpMeta[0] = _e;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],24,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[2];
tmpMeta[0] = _e;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
if (!omc_Expression_isMulOrDiv(threadData, _op)) goto tmp2_end;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, omc_Expression_negate(threadData, _e1), _op, _e2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
if (!omc_Expression_isSub(threadData, _op)) goto tmp2_end;
tmpMeta[1] = mmc_mk_box4(10, &DAE_Exp_BINARY__desc, _e2, _op, _e1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
_e = tmp3_1;
if (!omc_Expression_isZero(threadData, _e)) goto tmp2_end;
tmpMeta[0] = _e;
goto tmp2_done;
}
case 6: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp5;
_i_1 = (-_i);
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i_1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
modelica_real tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp6 = mmc_unbox_real(tmpMeta[1]);
_r = tmp6;
_r_1 = (-_r);
tmpMeta[1] = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(_r_1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 8: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
_b = tmp7;
_b_1 = (!_b);
tmpMeta[1] = mmc_mk_box2(6, &DAE_Exp_BCONST__desc, mmc_mk_boolean(_b_1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 9: {
_e = tmp3_1;
_t = omc_Expression_typeof(threadData, _e);
{
modelica_metatype tmp10_1;
tmp10_1 = _t;
{
volatile mmc_switch_type tmp10;
int tmp11;
tmp10 = 0;
for (; tmp10 < 2; tmp10++) {
switch (MMC_SWITCH_CAST(tmp10)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,3,1) == 0) goto tmp9_end;
tmpMeta[2] = mmc_mk_box2(27, &DAE_Operator_NOT__desc, _t);
tmpMeta[3] = mmc_mk_box3(13, &DAE_Exp_LUNARY__desc, tmpMeta[2], _e);
tmpMeta[1] = tmpMeta[3];
goto tmp9_done;
}
case 1: {
modelica_boolean tmp12;
_b = omc_DAEUtil_expTypeArray(threadData, _t);
tmp12 = (modelica_boolean)_b;
if(tmp12)
{
tmpMeta[2] = mmc_mk_box2(9, &DAE_Operator_UMINUS__ARR__desc, _t);
tmpMeta[4] = tmpMeta[2];
}
else
{
tmpMeta[3] = mmc_mk_box2(8, &DAE_Operator_UMINUS__desc, _t);
tmpMeta[4] = tmpMeta[3];
}
_op = tmpMeta[4];
tmpMeta[2] = mmc_mk_box3(11, &DAE_Exp_UNARY__desc, _op, _e);
tmpMeta[1] = tmpMeta[2];
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
goto_8:;
goto goto_1;
goto tmp9_done;
tmp9_done:;
}
}tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_dimensionSubscript(threadData_t *threadData, modelica_metatype _dim)
{
modelica_metatype _sub = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _dim;
{
modelica_integer _i;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
modelica_integer tmp4;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp4 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp4;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
tmpMeta[2] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 5: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp5;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
tmpMeta[2] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _OMC_LIT203;
goto tmp2_done;
}
case 7: {
tmpMeta[0] = _OMC_LIT91;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_sub = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _sub;
}
DLLExport
modelica_metatype omc_Expression_intDimension(threadData_t *threadData, modelica_integer _value)
{
modelica_metatype _dim = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(_value));
_dim = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _dim;
}
modelica_metatype boxptr_Expression_intDimension(threadData_t *threadData, modelica_metatype _value)
{
modelica_integer tmp1;
modelica_metatype _dim = NULL;
tmp1 = mmc_unbox_integer(_value);
_dim = omc_Expression_intDimension(threadData, tmp1);
return _dim;
}
DLLExport
modelica_metatype omc_Expression_dimensionSizeExpHandleUnkown(threadData_t *threadData, modelica_metatype _dim)
{
modelica_metatype _exp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _dim;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT204;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = omc_Expression_dimensionSizeExp(threadData, _dim);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_exp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _exp;
}
DLLExport
modelica_metatype omc_Expression_dimensionSizeExp(threadData_t *threadData, modelica_metatype _dim)
{
modelica_metatype _exp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _dim;
{
modelica_integer _i;
modelica_metatype _e = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
modelica_integer tmp4;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp4 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp4;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp5;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _OMC_LIT202;
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
tmpMeta[0] = _e;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_exp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _exp;
}
DLLExport
modelica_metatype omc_Expression_dimensionSizeConstantExp(threadData_t *threadData, modelica_metatype _dim)
{
modelica_metatype _exp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _dim;
{
modelica_integer _i;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
modelica_integer tmp4;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp4 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp4;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp5;
tmpMeta[1] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_i));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _OMC_LIT202;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_exp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _exp;
}
DLLExport
modelica_metatype omc_Expression_liftArrayR(threadData_t *threadData, modelica_metatype _tp, modelica_metatype _n)
{
modelica_metatype _outTp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _tp;
{
modelica_metatype _elt_tp = NULL;
modelica_metatype _dims = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_elt_tp = tmpMeta[1];
_dims = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_n, _dims);
_dims = tmpMeta[1];
tmpMeta[1] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _elt_tp, _dims);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = mmc_mk_cons(_n, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _tp, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outTp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTp;
}
DLLExport
modelica_metatype omc_Expression_realToIntIfPossible(threadData_t *threadData, modelica_real _inVal)
{
modelica_metatype _outVal = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(((modelica_integer)floor(_inVal))));
_outVal = tmpMeta[0];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = mmc_mk_box2(4, &DAE_Exp_RCONST__desc, mmc_mk_real(_inVal));
_outVal = tmpMeta[0];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outVal;
}
modelica_metatype boxptr_Expression_realToIntIfPossible(threadData_t *threadData, modelica_metatype _inVal)
{
modelica_real tmp1;
modelica_metatype _outVal = NULL;
tmp1 = mmc_unbox_real(_inVal);
_outVal = omc_Expression_realToIntIfPossible(threadData, tmp1);
return _outVal;
}
DLLExport
modelica_metatype omc_Expression_CodeVarToCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _e_cref = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,25,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_cref = tmpMeta[2];
omc_Static_elabUntypedCref(threadData, omc_FCore_emptyCache(threadData), omc_FGraph_empty(threadData), _cref, 0, _OMC_LIT205, _OMC_LIT26 ,&_e_cref);
tmpMeta[0] = omc_Expression_crefExp(threadData, _e_cref);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,25,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],11,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (3 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT40), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (!listEmpty(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,2) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (listEmpty(tmpMeta[7])) goto tmp2_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],2,1) == 0) goto tmp2_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
if (!listEmpty(tmpMeta[9])) goto tmp2_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
if (!listEmpty(tmpMeta[11])) goto tmp2_end;
_cref = tmpMeta[10];
omc_Static_elabUntypedCref(threadData, omc_FCore_emptyCache(threadData), omc_FGraph_empty(threadData), _cref, 0, _OMC_LIT205, _OMC_LIT26 ,&_e_cref);
_e = omc_Expression_crefExp(threadData, _e_cref);
tmpMeta[1] = mmc_mk_cons(_e, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box4(16, &DAE_Exp_CALL__desc, _OMC_LIT200, tmpMeta[1], _OMC_LIT141);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_traversingstringifyCrefFinder(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cr = NULL;
modelica_metatype _crs = NULL;
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],12,1) == 0) goto tmp2_end;
tmpMeta[0] = _inExp;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],13,2) == 0) goto tmp2_end;
tmpMeta[0] = _inExp;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr = tmpMeta[1];
_ty = tmpMeta[2];
_crs = omc_ComponentReference_stringifyComponentRef(threadData, _cr);
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _crs, _ty);
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _inExp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_stringifyCrefs(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = omc_Expression_traverseExpDummy(threadData, _inExp, boxvar_Expression_traversingstringifyCrefFinder);
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_unelabOperator(threadData_t *threadData, modelica_metatype _op)
{
modelica_metatype _aop = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _op;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
tmpMeta[0] = _OMC_LIT206;
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _OMC_LIT207;
goto tmp2_done;
}
case 5: {
tmpMeta[0] = _OMC_LIT208;
goto tmp2_done;
}
case 6: {
tmpMeta[0] = _OMC_LIT209;
goto tmp2_done;
}
case 7: {
tmpMeta[0] = _OMC_LIT210;
goto tmp2_done;
}
case 8: {
tmpMeta[0] = _OMC_LIT211;
goto tmp2_done;
}
case 9: {
tmpMeta[0] = _OMC_LIT211;
goto tmp2_done;
}
case 10: {
tmpMeta[0] = _OMC_LIT206;
goto tmp2_done;
}
case 11: {
tmpMeta[0] = _OMC_LIT207;
goto tmp2_done;
}
case 12: {
tmpMeta[0] = _OMC_LIT208;
goto tmp2_done;
}
case 13: {
tmpMeta[0] = _OMC_LIT209;
goto tmp2_done;
}
case 14: {
tmpMeta[0] = _OMC_LIT208;
goto tmp2_done;
}
case 15: {
tmpMeta[0] = _OMC_LIT206;
goto tmp2_done;
}
case 16: {
tmpMeta[0] = _OMC_LIT207;
goto tmp2_done;
}
case 17: {
tmpMeta[0] = _OMC_LIT208;
goto tmp2_done;
}
case 18: {
tmpMeta[0] = _OMC_LIT208;
goto tmp2_done;
}
case 20: {
tmpMeta[0] = _OMC_LIT209;
goto tmp2_done;
}
case 19: {
tmpMeta[0] = _OMC_LIT209;
goto tmp2_done;
}
case 22: {
tmpMeta[0] = _OMC_LIT210;
goto tmp2_done;
}
case 21: {
tmpMeta[0] = _OMC_LIT210;
goto tmp2_done;
}
case 23: {
tmpMeta[0] = _OMC_LIT210;
goto tmp2_done;
}
case 24: {
tmpMeta[0] = _OMC_LIT210;
goto tmp2_done;
}
case 25: {
tmpMeta[0] = _OMC_LIT212;
goto tmp2_done;
}
case 26: {
tmpMeta[0] = _OMC_LIT213;
goto tmp2_done;
}
case 27: {
tmpMeta[0] = _OMC_LIT214;
goto tmp2_done;
}
case 28: {
tmpMeta[0] = _OMC_LIT215;
goto tmp2_done;
}
case 29: {
tmpMeta[0] = _OMC_LIT216;
goto tmp2_done;
}
case 30: {
tmpMeta[0] = _OMC_LIT217;
goto tmp2_done;
}
case 31: {
tmpMeta[0] = _OMC_LIT218;
goto tmp2_done;
}
case 32: {
tmpMeta[0] = _OMC_LIT219;
goto tmp2_done;
}
case 33: {
tmpMeta[0] = _OMC_LIT220;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_aop = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _aop;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_unelabReductionIterator(threadData_t *threadData, modelica_metatype _riter)
{
modelica_metatype _aiter = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _riter;
{
modelica_string _id = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _gexp = NULL;
modelica_metatype _aexp = NULL;
modelica_metatype _agexp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_id = tmpMeta[1];
_exp = tmpMeta[2];
_gexp = tmpMeta[3];
_aexp = omc_Expression_unelabExp(threadData, _exp);
_agexp = omc_Util_applyOption(threadData, _gexp, boxvar_Expression_unelabExp);
tmpMeta[1] = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _id, _agexp, mmc_mk_some(_aexp));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_aiter = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _aiter;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_unelabDimensionToFillExp(threadData_t *threadData, modelica_metatype _inDim)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inDim;
{
modelica_integer _i;
modelica_metatype _e = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
modelica_integer tmp4;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp4 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp4;
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Exp_INTEGER__desc, mmc_mk_integer(_i));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
tmpMeta[0] = omc_Expression_unelabExp(threadData, _e);
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _OMC_LIT221;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Expression_unleabZeroExpFromType(threadData_t *threadData, modelica_metatype _ty)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _ty;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 6: {
tmpMeta[0] = _OMC_LIT222;
goto tmp2_done;
}
case 5: {
tmpMeta[0] = _OMC_LIT223;
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _OMC_LIT224;
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _OMC_LIT226;
goto tmp2_done;
}
case 11: {
tmpMeta[0] = _OMC_LIT226;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_Expression_unelabDimension(threadData_t *threadData, modelica_metatype _inDim)
{
modelica_metatype _outDim = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inDim;
{
modelica_integer _i;
modelica_metatype _p = NULL;
modelica_metatype _c = NULL;
modelica_metatype _e = NULL;
modelica_metatype _ae = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
modelica_integer tmp4;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp4 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp4;
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Exp_INTEGER__desc, mmc_mk_integer(_i));
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Subscript_SUBSCRIPT__desc, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _OMC_LIT230;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_c = omc_AbsynUtil_pathToCref(threadData, _p);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _c);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Subscript_SUBSCRIPT__desc, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
_ae = omc_Expression_unelabExp(threadData, _e);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Subscript_SUBSCRIPT__desc, _ae);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
tmpMeta[0] = _OMC_LIT231;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outDim = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outDim;
}
DLLExport
modelica_metatype omc_Expression_unelabExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_integer _i;
modelica_real _r;
modelica_string _s = NULL;
modelica_boolean _b;
modelica_metatype _cr_1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _expl_1 = NULL;
modelica_metatype _aexpl = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _op = NULL;
modelica_metatype _ae1 = NULL;
modelica_metatype _ae2 = NULL;
modelica_metatype _ae3 = NULL;
modelica_metatype _aop = NULL;
modelica_metatype _mexpl2 = NULL;
modelica_metatype _amexpl = NULL;
modelica_metatype _acref = NULL;
modelica_metatype _path = NULL;
modelica_metatype _code = NULL;
modelica_metatype _riters = NULL;
modelica_metatype _aiters = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _dims = NULL;
modelica_metatype _iterType = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 28; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
_i = tmp5;
tmp3 += 26;
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Exp_INTEGER__desc, mmc_mk_integer(_i));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_real tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp6 = mmc_unbox_real(tmpMeta[1]);
_r = tmp6;
tmp3 += 25;
_s = realString(_r);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Exp_REAL__desc, _s);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_s = tmpMeta[1];
tmp3 += 24;
tmpMeta[1] = mmc_mk_box2(6, &Absyn_Exp_STRING__desc, _s);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
_b = tmp7;
tmp3 += 23;
tmpMeta[1] = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_b));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
tmp3 += 22;
_cr_1 = omc_AbsynUtil_pathToCref(threadData, _path);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
tmp3 += 21;
_cr_1 = omc_ComponentReference_unelabCref(threadData, _cr);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
tmp3 += 20;
_aop = omc_Expression_unelabOperator(threadData, _op);
_ae1 = omc_Expression_unelabExp(threadData, _e1);
_ae2 = omc_Expression_unelabExp(threadData, _e2);
tmpMeta[1] = mmc_mk_box4(8, &Absyn_Exp_BINARY__desc, _ae1, _aop, _ae2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_op = tmpMeta[1];
_e1 = tmpMeta[2];
tmp3 += 19;
_aop = omc_Expression_unelabOperator(threadData, _op);
_ae1 = omc_Expression_unelabExp(threadData, _e1);
tmpMeta[1] = mmc_mk_box3(9, &Absyn_Exp_UNARY__desc, _aop, _ae1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
tmp3 += 18;
_aop = omc_Expression_unelabOperator(threadData, _op);
_ae1 = omc_Expression_unelabExp(threadData, _e1);
_ae2 = omc_Expression_unelabExp(threadData, _e2);
tmpMeta[1] = mmc_mk_box4(10, &Absyn_Exp_LBINARY__desc, _ae1, _aop, _ae2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_op = tmpMeta[1];
_e1 = tmpMeta[2];
tmp3 += 17;
_aop = omc_Expression_unelabOperator(threadData, _op);
_ae1 = omc_Expression_unelabExp(threadData, _e1);
tmpMeta[1] = mmc_mk_box3(11, &Absyn_Exp_LUNARY__desc, _aop, _ae1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_op = tmpMeta[2];
_e2 = tmpMeta[3];
tmp3 += 16;
_aop = omc_Expression_unelabOperator(threadData, _op);
_ae1 = omc_Expression_unelabExp(threadData, _e1);
_ae2 = omc_Expression_unelabExp(threadData, _e2);
tmpMeta[1] = mmc_mk_box4(12, &Absyn_Exp_RELATION__desc, _ae1, _aop, _ae2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,12,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_e3 = tmpMeta[3];
tmp3 += 15;
_ae1 = omc_Expression_unelabExp(threadData, _e1);
_ae2 = omc_Expression_unelabExp(threadData, _e2);
_ae3 = omc_Expression_unelabExp(threadData, _e3);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box5(13, &Absyn_Exp_IFEXP__desc, _ae1, _ae2, _ae3, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_path = tmpMeta[1];
_expl = tmpMeta[2];
tmp3 += 14;
_aexpl = omc_List_map(threadData, _expl, boxvar_Expression_unelabExp);
_acref = omc_AbsynUtil_pathToCref(threadData, _path);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _aexpl, tmpMeta[1]);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, _acref, tmpMeta[2], tmpMeta[3]);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,14,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_path = tmpMeta[1];
_expl = tmpMeta[2];
tmp3 += 13;
_aexpl = omc_List_map(threadData, _expl, boxvar_Expression_unelabExp);
_acref = omc_AbsynUtil_pathToCref(threadData, _path);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _aexpl, tmpMeta[1]);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, _acref, tmpMeta[2], tmpMeta[3]);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,15,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_path = tmpMeta[1];
_expl = tmpMeta[2];
tmp3 += 12;
_aexpl = omc_List_map(threadData, _expl, boxvar_Expression_unelabExp);
_acref = omc_AbsynUtil_pathToCref(threadData, _path);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _aexpl, tmpMeta[1]);
tmpMeta[3] = mmc_mk_box3(15, &Absyn_Exp_PARTEVALFUNCTION__desc, _acref, tmpMeta[2]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_ty = tmpMeta[1];
_ty = omc_Types_flattenArrayType(threadData, _ty ,&_dims);
_ae1 = omc_Expression_unleabZeroExpFromType(threadData, _ty);
_expl_1 = omc_List_map(threadData, _dims, boxvar_Expression_unelabDimensionToFillExp);
tmpMeta[1] = mmc_mk_cons(_ae1, _expl_1);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, tmpMeta[1], tmpMeta[2]);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, _OMC_LIT233, tmpMeta[3], tmpMeta[4]);
tmpMeta[0] = tmpMeta[5];
goto tmp2_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expl = tmpMeta[1];
tmp3 += 10;
_expl_1 = omc_List_map(threadData, _expl, boxvar_Expression_unelabExp);
tmpMeta[1] = mmc_mk_box2(16, &Absyn_Exp_ARRAY__desc, _expl_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_mexpl2 = tmpMeta[1];
tmp3 += 9;
_amexpl = omc_List_mapList(threadData, _mexpl2, boxvar_Expression_unelabExp);
tmpMeta[1] = mmc_mk_box2(17, &Absyn_Exp_MATRIX__desc, _amexpl);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
_e3 = tmpMeta[4];
tmp3 += 8;
_ae1 = omc_Expression_unelabExp(threadData, _e1);
_ae2 = omc_Expression_unelabExp(threadData, _e2);
_ae3 = omc_Expression_unelabExp(threadData, _e3);
tmpMeta[1] = mmc_mk_box4(18, &Absyn_Exp_RANGE__desc, _ae1, mmc_mk_some(_ae2), _ae3);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (!optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_e1 = tmpMeta[1];
_e3 = tmpMeta[3];
tmp3 += 7;
_ae1 = omc_Expression_unelabExp(threadData, _e1);
_ae3 = omc_Expression_unelabExp(threadData, _e3);
tmpMeta[1] = mmc_mk_box4(18, &Absyn_Exp_RANGE__desc, _ae1, mmc_mk_none(), _ae3);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,19,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_expl = tmpMeta[1];
tmp3 += 6;
_expl_1 = omc_List_map(threadData, _expl, boxvar_Expression_unelabExp);
tmpMeta[1] = mmc_mk_box2(19, &Absyn_Exp_TUPLE__desc, _expl_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,20,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[1];
tmp3 += 5;
tmpMeta[0] = omc_Expression_unelabExp(threadData, _e1);
goto tmp2_done;
}
case 22: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,21,2) == 0) goto tmp2_end;
tmp3 += 4;
fputs(MMC_STRINGDATA(_OMC_LIT234),stdout);
goto goto_1;
goto tmp2_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,22,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e1 = tmpMeta[1];
tmp3 += 3;
tmpMeta[0] = omc_Expression_unelabExp(threadData, _e1);
goto tmp2_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,24,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
tmp3 += 2;
_ae1 = omc_Expression_unelabExp(threadData, _e1);
_ae2 = omc_Expression_unelabExp(threadData, _e2);
tmpMeta[1] = mmc_mk_cons(_ae1, mmc_mk_cons(_ae2, MMC_REFSTRUCTLIT(mmc_nil)));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, tmpMeta[1], tmpMeta[2]);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, _OMC_LIT236, tmpMeta[3], tmpMeta[4]);
tmpMeta[0] = tmpMeta[5];
goto tmp2_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,25,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_code = tmpMeta[1];
tmp3 += 1;
tmpMeta[1] = mmc_mk_box2(21, &Absyn_Exp_CODE__desc, _code);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,27,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_path = tmpMeta[2];
_iterType = tmpMeta[3];
_e1 = tmpMeta[4];
_riters = tmpMeta[5];
_acref = omc_AbsynUtil_pathToCref(threadData, _path);
_ae1 = omc_Expression_unelabExp(threadData, _e1);
_aiters = omc_List_map(threadData, _riters, boxvar_Expression_unelabReductionIterator);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_FunctionArgs_FOR__ITER__FARG__desc, _ae1, _iterType, _aiters);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, _acref, tmpMeta[1], tmpMeta[2]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 27: {
modelica_boolean tmp8;
tmp8 = omc_Flags_isSet(threadData, _OMC_LIT60);
if (1 != tmp8) goto goto_1;
tmpMeta[1] = stringAppend(_OMC_LIT237,omc_ExpressionDump_printExpStr(threadData, _inExp));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT42);
fputs(MMC_STRINGDATA(tmpMeta[2]),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 28) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_boolean omc_Expression_dimensionIsZero(threadData_t *threadData, modelica_metatype _inDimension)
{
modelica_boolean _outIsZero;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outIsZero = (((modelica_integer) 0) == omc_Expression_dimensionSize(threadData, _inDimension));
_return: OMC_LABEL_UNUSED
return _outIsZero;
}
modelica_metatype boxptr_Expression_dimensionIsZero(threadData_t *threadData, modelica_metatype _inDimension)
{
modelica_boolean _outIsZero;
modelica_metatype out_outIsZero;
_outIsZero = omc_Expression_dimensionIsZero(threadData, _inDimension);
out_outIsZero = mmc_mk_icon(_outIsZero);
return out_outIsZero;
}
DLLExport
modelica_metatype omc_Expression_subscriptsInt(threadData_t *threadData, modelica_metatype _inSubscripts)
{
modelica_metatype _outIntegers = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outIntegers = omc_List_map(threadData, _inSubscripts, boxvar_Expression_subscriptInt);
_return: OMC_LABEL_UNUSED
return _outIntegers;
}
DLLExport
modelica_integer omc_Expression_subscriptInt(threadData_t *threadData, modelica_metatype _inSubscript)
{
modelica_integer _outInteger;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outInteger = omc_Expression_expArrayIndex(threadData, omc_Expression_subscriptIndexExp(threadData, _inSubscript));
_return: OMC_LABEL_UNUSED
return _outInteger;
}
modelica_metatype boxptr_Expression_subscriptInt(threadData_t *threadData, modelica_metatype _inSubscript)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_Expression_subscriptInt(threadData, _inSubscript);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
DLLExport
modelica_metatype omc_Expression_intSubscripts(threadData_t *threadData, modelica_metatype _inIntegers)
{
modelica_metatype _outSubscripts = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outSubscripts = omc_List_map(threadData, _inIntegers, boxvar_Expression_intSubscript);
_return: OMC_LABEL_UNUSED
return _outSubscripts;
}
DLLExport
modelica_metatype omc_Expression_intSubscript(threadData_t *threadData, modelica_integer _inInteger)
{
modelica_metatype _outSubscript = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, mmc_mk_integer(_inInteger));
tmpMeta[1] = mmc_mk_box2(5, &DAE_Subscript_INDEX__desc, tmpMeta[0]);
_outSubscript = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _outSubscript;
}
modelica_metatype boxptr_Expression_intSubscript(threadData_t *threadData, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_metatype _outSubscript = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outSubscript = omc_Expression_intSubscript(threadData, tmp1);
return _outSubscript;
}
