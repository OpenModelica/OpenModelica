#ifdef OMC_BASE_FILE
#define OMC_FILE OMC_BASE_FILE
#else
#define OMC_FILE "InteractiveUtil.c"
#endif
#include "omc_simulation_settings.h"
#include "InteractiveUtil.h"
#define _OMC_LIT0_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,1,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT1,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT1 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT1)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT2,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT2 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT2)
#define _OMC_LIT3_data "Class %s not found in scope %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT3,31,_OMC_LIT3_data);
#define _OMC_LIT3 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT3)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT4,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT3}};
#define _OMC_LIT4 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT4)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT5,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(3)),_OMC_LIT1,_OMC_LIT2,_OMC_LIT4}};
#define _OMC_LIT5 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT5)
#define _OMC_LIT6_data "<TOP>"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT6,5,_OMC_LIT6_data);
#define _OMC_LIT6 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT7,1,4) {&Absyn_Within_TOP__desc,}};
#define _OMC_LIT7 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data ", "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,2,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,1,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
#define _OMC_LIT10_data "}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT10,1,_OMC_LIT10_data);
#define _OMC_LIT10 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT10)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT11,1,3) {&DAE_Prefix_NOPRE__desc,}};
#define _OMC_LIT11 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data "="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,1,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT13,1,3) {&Absyn_EqMod_NOMOD__desc,}};
#define _OMC_LIT13 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT13)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT14,1,4) {&SCode_Final_NOT__FINAL__desc,}};
#define _OMC_LIT14 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT14)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT15,1,4) {&SCode_Each_NOT__EACH__desc,}};
#define _OMC_LIT15 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT15)
#define _OMC_LIT16_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT16,0,_OMC_LIT16_data);
#define _OMC_LIT16 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT16)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT17,0.0);
#define _OMC_LIT17 MMC_REFREALLIT(_OMC_LIT_STRUCT17)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT18,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT16,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT17}};
#define _OMC_LIT18 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT18)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT19,1,4) {&SCode_Partial_NOT__PARTIAL__desc,}};
#define _OMC_LIT19 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT19)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT20,1,4) {&UnitAbsyn_InstStore_NOSTORE__desc,}};
#define _OMC_LIT20 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT20)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT21,1,3) {&InstTypes_CallingScope_TOP__CALL__desc,}};
#define _OMC_LIT21 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT21)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT22,7,3) {&ConnectionGraph_ConnectionGraph_GRAPH__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT22 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT22)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT23,1,7) {&DAE_ComponentRef_WILD__desc,}};
#define _OMC_LIT23 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT23)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT24,5,3) {&DAE_Connect_SetTrieNode_SET__TRIE__NODE__desc,_OMC_LIT16,_OMC_LIT23,MMC_REFSTRUCTLIT(mmc_nil),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT24 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT24)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT25,5,3) {&DAE_Connect_Sets_SETS__desc,_OMC_LIT24,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT25 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT25)
#define _OMC_LIT26_data "("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT26,1,_OMC_LIT26_data);
#define _OMC_LIT26 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT26)
#define _OMC_LIT27_data ")"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT27,1,_OMC_LIT27_data);
#define _OMC_LIT27 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT27)
#define _OMC_LIT28_data "(error)"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT28,7,_OMC_LIT28_data);
#define _OMC_LIT28 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT28)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT29,1,5) {&DAE_Mod_NOMOD__desc,}};
#define _OMC_LIT29 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT29)
#define _OMC_LIT30_data "{}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT30,2,_OMC_LIT30_data);
#define _OMC_LIT30 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT30)
#define _OMC_LIT31_data "Ok"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT31,2,_OMC_LIT31_data);
#define _OMC_LIT31 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT31)
#define _OMC_LIT32_data "Error"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT32,5,_OMC_LIT32_data);
#define _OMC_LIT32 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT32)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT33,1,3) {&SCode_Visibility_PUBLIC__desc,}};
#define _OMC_LIT33 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT33)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT34,1,4) {&InstTypes_CallingScope_INNER__CALL__desc,}};
#define _OMC_LIT34 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT34)
#define _OMC_LIT35_data "(replaceable type "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT35,18,_OMC_LIT35_data);
#define _OMC_LIT35 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT35)
#define _OMC_LIT36_data "["
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT36,1,_OMC_LIT36_data);
#define _OMC_LIT36 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT36)
#define _OMC_LIT37_data " "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT37,1,_OMC_LIT37_data);
#define _OMC_LIT37 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT37)
#define _OMC_LIT38_data "input "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT38,6,_OMC_LIT38_data);
#define _OMC_LIT38 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT38)
#define _OMC_LIT39_data "output "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT39,7,_OMC_LIT39_data);
#define _OMC_LIT39 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT39)
#define _OMC_LIT40_data "(extends "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT40,9,_OMC_LIT40_data);
#define _OMC_LIT40 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT40)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT41,2,1) {_OMC_LIT27,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT41 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT41)
#define _OMC_LIT42_data "<"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT42,1,_OMC_LIT42_data);
#define _OMC_LIT42 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT42)
#define _OMC_LIT43_data ","
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT43,1,_OMC_LIT43_data);
#define _OMC_LIT43 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT43)
#define _OMC_LIT44_data ">"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT44,1,_OMC_LIT44_data);
#define _OMC_LIT44 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT44)
#define _OMC_LIT45_data "\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT45,1,_OMC_LIT45_data);
#define _OMC_LIT45 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT45)
#define _OMC_LIT46_data "polymorphic"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT46,11,_OMC_LIT46_data);
#define _OMC_LIT46 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "Any"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,3,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
#define _OMC_LIT48_data "(package "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT48,9,_OMC_LIT48_data);
#define _OMC_LIT48 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT48)
#define _OMC_LIT49_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT49,1,_OMC_LIT49_data);
#define _OMC_LIT49 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "(partial impure function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,24,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
#define _OMC_LIT51_data "(partial function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT51,17,_OMC_LIT51_data);
#define _OMC_LIT51 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data "(impure function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,16,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
#define _OMC_LIT53_data "(function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT53,9,_OMC_LIT53_data);
#define _OMC_LIT53 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT53)
#define _OMC_LIT54_data "(operator function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT54,18,_OMC_LIT54_data);
#define _OMC_LIT54 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT54)
#define _OMC_LIT55_data "(uniontype"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT55,10,_OMC_LIT55_data);
#define _OMC_LIT55 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT55)
#define _OMC_LIT56_data "(record"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT56,7,_OMC_LIT56_data);
#define _OMC_LIT56 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT56)
#define _OMC_LIT57_data "(metarecord"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT57,11,_OMC_LIT57_data);
#define _OMC_LIT57 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT57)
#define _OMC_LIT58_data "(type"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT58,5,_OMC_LIT58_data);
#define _OMC_LIT58 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT58)
#define _OMC_LIT59_data "public"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT59,6,_OMC_LIT59_data);
#define _OMC_LIT59 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT59)
#define _OMC_LIT60_data "\"(\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT60,3,_OMC_LIT60_data);
#define _OMC_LIT60 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT60)
#define _OMC_LIT61_data "SourceInfo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT61,10,_OMC_LIT61_data);
#define _OMC_LIT61 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT61)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT62,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT61}};
#define _OMC_LIT62 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data "\n)\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,3,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT64,1,11) {&Absyn_Algorithm_ALG__BREAK__desc,}};
#define _OMC_LIT64 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT64)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT65,1,10) {&Absyn_Algorithm_ALG__RETURN__desc,}};
#define _OMC_LIT65 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT65)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT66,1,3) {&Absyn_Subscript_NOSUB__desc,}};
#define _OMC_LIT66 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT66)
#define _OMC_LIT67_data "InteractiveUtil.transformFlatPart failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT67,41,_OMC_LIT67_data);
#define _OMC_LIT67 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT67)
#define _OMC_LIT68_data "InteractiveUtil.transformFlatClassDef failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT68,45,_OMC_LIT68_data);
#define _OMC_LIT68 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT68)
#define _OMC_LIT69_data "InteractiveUtil.transformFlatClass failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT69,42,_OMC_LIT69_data);
#define _OMC_LIT69 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT69)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT70,1,4) {&Absyn_Each_NON__EACH__desc,}};
#define _OMC_LIT70 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT70)
#define _OMC_LIT71_data "- InteractiveUtil.namedargToModification failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT71,48,_OMC_LIT71_data);
#define _OMC_LIT71 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "InteractiveUtil.recordConstructorToModification failed, exp="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,60,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
#define _OMC_LIT73_data "annotate"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT73,8,_OMC_LIT73_data);
#define _OMC_LIT73 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT73)
#define _OMC_LIT74_data "comment"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT74,7,_OMC_LIT74_data);
#define _OMC_LIT74 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT74)
#define _OMC_LIT75_data "binding"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT75,7,_OMC_LIT75_data);
#define _OMC_LIT75 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT75)
#define _OMC_LIT76_data "modification"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT76,12,_OMC_LIT76_data);
#define _OMC_LIT76 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT76)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT77,1,6) {&Absyn_InnerOuter_NOT__INNER__OUTER__desc,}};
#define _OMC_LIT77 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT77)
#define _OMC_LIT78_data "Failed in replaceInnerClass\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT78,28,_OMC_LIT78_data);
#define _OMC_LIT78 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT78)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT79,1,8) {&ErrorTypes_MessageType_SCRIPTING__desc,}};
#define _OMC_LIT79 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT79)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT80,1,5) {&ErrorTypes_Severity_WARNING__desc,}};
#define _OMC_LIT80 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT80)
#define _OMC_LIT81_data "Class %s not found inside class %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT81,35,_OMC_LIT81_data);
#define _OMC_LIT81 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT81)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT82,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT81}};
#define _OMC_LIT82 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT82)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT83,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(555)),_OMC_LIT79,_OMC_LIT80,_OMC_LIT82}};
#define _OMC_LIT83 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT83)
#define _OMC_LIT84_data "\n  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT84,3,_OMC_LIT84_data);
#define _OMC_LIT84 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT84)
#define _OMC_LIT85_data "Failed to insert class %s %s the available classes were:%s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT85,58,_OMC_LIT85_data);
#define _OMC_LIT85 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT85)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT86,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT85}};
#define _OMC_LIT86 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT86)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT87,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(213)),_OMC_LIT79,_OMC_LIT2,_OMC_LIT86}};
#define _OMC_LIT87 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT87)
#define _OMC_LIT88_data "OpenModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT88,12,_OMC_LIT88_data);
#define _OMC_LIT88 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT88)
#define _OMC_LIT89_data "\", \""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT89,4,_OMC_LIT89_data);
#define _OMC_LIT89 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT89)
#define _OMC_LIT90_data ", \""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT90,3,_OMC_LIT90_data);
#define _OMC_LIT90 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT90)
#define _OMC_LIT91_data ", \"{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT91,4,_OMC_LIT91_data);
#define _OMC_LIT91 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT91)
#define _OMC_LIT92_data "}\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT92,2,_OMC_LIT92_data);
#define _OMC_LIT92 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT92)
#define _OMC_LIT93_data ", {"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT93,3,_OMC_LIT93_data);
#define _OMC_LIT93 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT93)
#define _OMC_LIT94_data "\"input\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT94,7,_OMC_LIT94_data);
#define _OMC_LIT94 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT94)
#define _OMC_LIT95_data "\"output\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT95,8,_OMC_LIT95_data);
#define _OMC_LIT95 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT95)
#define _OMC_LIT96_data "\"unspecified\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT96,13,_OMC_LIT96_data);
#define _OMC_LIT96 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT96)
#define _OMC_LIT97_data "\"discrete\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT97,10,_OMC_LIT97_data);
#define _OMC_LIT97 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT97)
#define _OMC_LIT98_data "\"parameter\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT98,11,_OMC_LIT98_data);
#define _OMC_LIT98 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT98)
#define _OMC_LIT99_data "\"constant\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT99,10,_OMC_LIT99_data);
#define _OMC_LIT99 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT99)
#define _OMC_LIT100_data "\"parglobal\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT100,11,_OMC_LIT100_data);
#define _OMC_LIT100 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT100)
#define _OMC_LIT101_data "\"parlocal\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT101,10,_OMC_LIT101_data);
#define _OMC_LIT101 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT101)
#define _OMC_LIT102_data "true"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT102,4,_OMC_LIT102_data);
#define _OMC_LIT102 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT102)
#define _OMC_LIT103_data "false"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT103,5,_OMC_LIT103_data);
#define _OMC_LIT103 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT103)
#define _OMC_LIT104_data "\"inner\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT104,7,_OMC_LIT104_data);
#define _OMC_LIT104 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT104)
#define _OMC_LIT105_data "\"outer\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT105,7,_OMC_LIT105_data);
#define _OMC_LIT105 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT105)
#define _OMC_LIT106_data "\"none\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT106,6,_OMC_LIT106_data);
#define _OMC_LIT106 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT106)
#define _OMC_LIT107_data "\"innerouter\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT107,12,_OMC_LIT107_data);
#define _OMC_LIT107 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT107)
#define _OMC_LIT108_data "},{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT108,3,_OMC_LIT108_data);
#define _OMC_LIT108 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT108)
#define _OMC_LIT109_data "$Any"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT109,4,_OMC_LIT109_data);
#define _OMC_LIT109 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT109)
#define _OMC_LIT110_data "nfAPI"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT110,5,_OMC_LIT110_data);
#define _OMC_LIT110 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT110)
#define _OMC_LIT111_data "Enables experimental new instantiation use in the OMC API."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT111,58,_OMC_LIT111_data);
#define _OMC_LIT111 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT111)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT112,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT111}};
#define _OMC_LIT112 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT112)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT113,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(172)),_OMC_LIT110,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT112}};
#define _OMC_LIT113 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT113)
#define _OMC_LIT114_data "Real"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT114,4,_OMC_LIT114_data);
#define _OMC_LIT114 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT114)
#define _OMC_LIT115_data "Integer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT115,7,_OMC_LIT115_data);
#define _OMC_LIT115 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT115)
#define _OMC_LIT116_data "Boolean"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT116,7,_OMC_LIT116_data);
#define _OMC_LIT116 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT116)
#define _OMC_LIT117_data "String"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT117,6,_OMC_LIT117_data);
#define _OMC_LIT117 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT117)
#define _OMC_LIT118_data "\"-\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT118,3,_OMC_LIT118_data);
#define _OMC_LIT118 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT118)
#define _OMC_LIT119_data "\"co\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT119,4,_OMC_LIT119_data);
#define _OMC_LIT119 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT119)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT120,2,1) {_OMC_LIT16,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT120 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT120)
#define _OMC_LIT121_data "\"cl\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT121,4,_OMC_LIT121_data);
#define _OMC_LIT121 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT121)
#define _OMC_LIT122_data "interaction"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT122,11,_OMC_LIT122_data);
#define _OMC_LIT122 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT122)
#define _OMC_LIT123_data "graphics"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT123,8,_OMC_LIT123_data);
#define _OMC_LIT123 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT123)
#define _OMC_LIT124_data "Icon"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT124,4,_OMC_LIT124_data);
#define _OMC_LIT124 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT124)
#define _OMC_LIT125_data "Diagram"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT125,7,_OMC_LIT125_data);
#define _OMC_LIT125 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT125)
#define _OMC_LIT126_data "buildEnvForGraphicProgram"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT126,25,_OMC_LIT126_data);
#define _OMC_LIT126 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT126)
#define _OMC_LIT127_data "getAnnotationString: Icon"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT127,25,_OMC_LIT127_data);
#define _OMC_LIT127 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT127)
#define _OMC_LIT128_data "checkModel"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT128,10,_OMC_LIT128_data);
#define _OMC_LIT128 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT128)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT129,1,3) {&Flags_FlagVisibility_INTERNAL__desc,}};
#define _OMC_LIT129 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT129)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT130,2,4) {&Flags_FlagData_BOOL__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT130 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT130)
#define _OMC_LIT131_data "Set when checkModel is used to turn on specific features for checking."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT131,70,_OMC_LIT131_data);
#define _OMC_LIT131 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT131)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT132,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT131}};
#define _OMC_LIT132 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT132)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT133,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(31)),_OMC_LIT128,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT129,_OMC_LIT130,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT132}};
#define _OMC_LIT133 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT133)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT134,3,3) {&Absyn_Program_PROGRAM__desc,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT7}};
#define _OMC_LIT134 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT134)
#define _OMC_LIT135_data "$Code(),"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT135,8,_OMC_LIT135_data);
#define _OMC_LIT135 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT135)
#define _OMC_LIT136_data "$Code()"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT136,7,_OMC_LIT136_data);
#define _OMC_LIT136 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT136)
#define _OMC_LIT137_data "},"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT137,2,_OMC_LIT137_data);
#define _OMC_LIT137 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT137)
#define _OMC_LIT138_data "{nada},"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT138,7,_OMC_LIT138_data);
#define _OMC_LIT138 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT138)
#define _OMC_LIT139_data "{},"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT139,3,_OMC_LIT139_data);
#define _OMC_LIT139 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT139)
#define _OMC_LIT140_data "Placement"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT140,9,_OMC_LIT140_data);
#define _OMC_LIT140 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT140)
#define _OMC_LIT141_data "\n\npackage GraphicalAnnotationsProgram____ end GraphicalAnnotationsProgram____;\n\n// Not implemented yet!\n  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT141,106,_OMC_LIT141_data);
#define _OMC_LIT141 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT141)
#define _OMC_LIT142_data "<1.x annotations>"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT142,17,_OMC_LIT142_data);
#define _OMC_LIT142 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT142)
#define _OMC_LIT143_data "std"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT143,3,_OMC_LIT143_data);
#define _OMC_LIT143 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT143)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT144,1,4) {&Flags_FlagVisibility_EXTERNAL__desc,}};
#define _OMC_LIT144 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT144)
#define _OMC_LIT145_data "1.x"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT145,3,_OMC_LIT145_data);
#define _OMC_LIT145 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT145)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT146,2,0) {_OMC_LIT145,MMC_IMMEDIATE(MMC_TAGFIXNUM(10))}};
#define _OMC_LIT146 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT146)
#define _OMC_LIT147_data "2.x"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT147,3,_OMC_LIT147_data);
#define _OMC_LIT147 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT147)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT148,2,0) {_OMC_LIT147,MMC_IMMEDIATE(MMC_TAGFIXNUM(20))}};
#define _OMC_LIT148 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT148)
#define _OMC_LIT149_data "3.0"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT149,3,_OMC_LIT149_data);
#define _OMC_LIT149 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT149)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT150,2,0) {_OMC_LIT149,MMC_IMMEDIATE(MMC_TAGFIXNUM(30))}};
#define _OMC_LIT150 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT150)
#define _OMC_LIT151_data "3.1"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT151,3,_OMC_LIT151_data);
#define _OMC_LIT151 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT151)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT152,2,0) {_OMC_LIT151,MMC_IMMEDIATE(MMC_TAGFIXNUM(31))}};
#define _OMC_LIT152 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT152)
#define _OMC_LIT153_data "3.2"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT153,3,_OMC_LIT153_data);
#define _OMC_LIT153 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT153)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT154,2,0) {_OMC_LIT153,MMC_IMMEDIATE(MMC_TAGFIXNUM(32))}};
#define _OMC_LIT154 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT154)
#define _OMC_LIT155_data "3.3"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT155,3,_OMC_LIT155_data);
#define _OMC_LIT155 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT155)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT156,2,0) {_OMC_LIT155,MMC_IMMEDIATE(MMC_TAGFIXNUM(33))}};
#define _OMC_LIT156 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT156)
#define _OMC_LIT157_data "3.4"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT157,3,_OMC_LIT157_data);
#define _OMC_LIT157 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT157)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT158,2,0) {_OMC_LIT157,MMC_IMMEDIATE(MMC_TAGFIXNUM(34))}};
#define _OMC_LIT158 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT158)
#define _OMC_LIT159_data "3.5"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT159,3,_OMC_LIT159_data);
#define _OMC_LIT159 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT159)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT160,2,0) {_OMC_LIT159,MMC_IMMEDIATE(MMC_TAGFIXNUM(35))}};
#define _OMC_LIT160 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT160)
#define _OMC_LIT161_data "latest"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT161,6,_OMC_LIT161_data);
#define _OMC_LIT161 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT161)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT162,2,0) {_OMC_LIT161,MMC_IMMEDIATE(MMC_TAGFIXNUM(1000))}};
#define _OMC_LIT162 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT162)
#define _OMC_LIT163_data "experimental"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT163,12,_OMC_LIT163_data);
#define _OMC_LIT163 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT163)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT164,2,0) {_OMC_LIT163,MMC_IMMEDIATE(MMC_TAGFIXNUM(9999))}};
#define _OMC_LIT164 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT164)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT165,2,1) {_OMC_LIT164,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT165 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT165)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT166,2,1) {_OMC_LIT162,_OMC_LIT165}};
#define _OMC_LIT166 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT166)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT167,2,1) {_OMC_LIT160,_OMC_LIT166}};
#define _OMC_LIT167 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT167)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT168,2,1) {_OMC_LIT158,_OMC_LIT167}};
#define _OMC_LIT168 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT168)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT169,2,1) {_OMC_LIT156,_OMC_LIT168}};
#define _OMC_LIT169 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT169)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT170,2,1) {_OMC_LIT154,_OMC_LIT169}};
#define _OMC_LIT170 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT170)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT171,2,1) {_OMC_LIT152,_OMC_LIT170}};
#define _OMC_LIT171 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT171)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT172,2,1) {_OMC_LIT150,_OMC_LIT171}};
#define _OMC_LIT172 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT172)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT173,2,1) {_OMC_LIT148,_OMC_LIT172}};
#define _OMC_LIT173 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT173)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT174,2,1) {_OMC_LIT146,_OMC_LIT173}};
#define _OMC_LIT174 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT174)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT175,3,10) {&Flags_FlagData_ENUM__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1000)),_OMC_LIT174}};
#define _OMC_LIT175 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT175)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT176,2,1) {_OMC_LIT163,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT176 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT176)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT177,2,1) {_OMC_LIT161,_OMC_LIT176}};
#define _OMC_LIT177 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT177)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT178,2,1) {_OMC_LIT159,_OMC_LIT177}};
#define _OMC_LIT178 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT178)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT179,2,1) {_OMC_LIT157,_OMC_LIT178}};
#define _OMC_LIT179 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT179)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT180,2,1) {_OMC_LIT155,_OMC_LIT179}};
#define _OMC_LIT180 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT180)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT181,2,1) {_OMC_LIT153,_OMC_LIT180}};
#define _OMC_LIT181 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT181)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT182,2,1) {_OMC_LIT151,_OMC_LIT181}};
#define _OMC_LIT182 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT182)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT183,2,1) {_OMC_LIT147,_OMC_LIT182}};
#define _OMC_LIT183 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT183)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT184,2,1) {_OMC_LIT145,_OMC_LIT183}};
#define _OMC_LIT184 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT184)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT185,2,3) {&Flags_ValidOptions_STRING__OPTION__desc,_OMC_LIT184}};
#define _OMC_LIT185 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT185)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT186,1,1) {_OMC_LIT185}};
#define _OMC_LIT186 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT186)
#define _OMC_LIT187_data "Sets the language standard that should be used."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT187,47,_OMC_LIT187_data);
#define _OMC_LIT187 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT187)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT188,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT187}};
#define _OMC_LIT188 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT188)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT189,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(8)),_OMC_LIT143,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT144,_OMC_LIT175,_OMC_LIT186,_OMC_LIT188}};
#define _OMC_LIT189 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT189)
#define _OMC_LIT190_data "\n\npackage GraphicalAnnotationsProgram____  end GraphicalAnnotationsProgram____;\n\n// Constants.diagramProgram:\nrecord GraphicItem\n  Boolean visible=true;\nend GraphicItem;\n\nrecord CoordinateSystem\n  Real extent[2,2];\nend CoordinateSystem;\n\nrecord Diagram\n  CoordinateSystem coordinateSystem(extent={{-100.0,-100.0},{100.0,100.0}});\nend Diagram;\n\ntype LinePattern= enumeration(None, Solid, Dash, Dot, DashDot, DashDotDot );\ntype Arrow= enumeration(None, Open, Filled , Half );\ntype FillPattern= enumeration(None, Solid, Horizontal, Vertical, Cross, Forward, Backward, CrossDiag, HorizontalCylinder, VerticalCylinder, Sphere );\ntype BorderPattern= enumeration(None, Raised, Sunken, Engraved );\ntype TextStyle= enumeration(Bold, Italic, Underline );\n\nrecord Line\n  Boolean visible=true;\n  Real points[:,2];\n  Integer color[3]={0,0,0};\n  LinePattern pattern=LinePattern.Solid;\n  Real thickness=0.25;\n  Arrow arrow[2]={Arrow.None,Arrow.None};\n  Real arrowSize=3.0;\n  Boolean smooth=false;\nend Line;\n\nrecord Polygon\n  Boolean visible=true;\n  Integer lineColor[3]={0,0,0};\n  Integer fillColor[3]={0,0,0};\n  LinePattern pattern=LinePattern.Solid;\n  FillPattern fillPattern=FillPattern.None;\n  Real lineThickness=0.25;\n  Real points[:,2];\n  Boolean smooth=false;\nend Polygon;\n\nrecord Rectangle\n  Boolean visible=true;\n  Integer lineColor[3]={0,0,0};\n  Integer fillColor[3]={0,0,0};\n  LinePattern pattern=LinePattern.Solid;\n  FillPattern fillPattern=FillPattern.None;\n  Real lineThickness=0.25;\n  BorderPattern borderPattern=BorderPattern.None;\n  Real extent[2,2];\n  Real radius=0.0;\nend Rectangle;\n\nrecord Ellipse\n  Boolean visible=true;\n  Integer lineColor[3]={0,0,0};\n  Integer fillColor[3]={0,0,0};\n  LinePattern pattern=LinePattern.Solid;\n  FillPattern fillPattern=FillPattern.None;\n  Real lineThickness=0.25;\n  Real extent[2,2];\nend Ellipse;\n\nrecord Text\n  Boolean visible=true;\n  Integer lineColor[3]={0,0,0};\n  Integer fillColor[3]={0,0,0};\n  LinePattern pattern=LinePattern.Solid;\n  FillPattern fillPattern=FillPattern.None;\n  Real lineThickness=0.25;\n  Real extent[2,2];\n  String textString;\n  Real fontSize=0.0;\n  String fontName=\"\";\n  TextStyle textStyle[:];\nend Text;\n\nrecord Bitmap\n  Boolean visible=true;\n  Real extent[2,2];\n  String fileName=\"\";\n  String imageSource=\"\";\nend Bitmap;\n\n// Constants.iconProgram:\nrecord Icon\n  CoordinateSystem coordinateSystem(extent={{-10.0,-10.0},{10.0,10.0}});\nend Icon;\n\n// Constants.graphicsProgram\n// ...\n// Constants.lineProgram\n// ...\n\n// Constants.placementProgram:\nrecord Transformation\n  Real x=0.0;\n  Real y=0.0;\n  Real scale=1.0;\n  Real aspectRatio=1.0;\n  Boolean flipHorizontal=false;\n  Boolean flipVertical=false;\n  Real rotation=0.0;\nend Transformation;\n\nrecord Placement\n  Boolean visible=true;\n  Transformation transformation;\n  Transformation iconTransformation;\nend Placement;\n\n  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT190,2835,_OMC_LIT190_data);
#define _OMC_LIT190 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT190)
#define _OMC_LIT191_data "<2.x annotations>"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT191,17,_OMC_LIT191_data);
#define _OMC_LIT191 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT191)
#define _OMC_LIT192_data "\n\npackage GraphicalAnnotationsProgram____ end     GraphicalAnnotationsProgram____;\n\n// type DrawingUnit = Real/*(final unit=\"mm\")*/;\n// type Point = DrawingUnit[2] \"{x, y}\";\n// type Extent = Point[2] \"Defines a rectangular area {{x1, y1}, {x2, y2}}\";\n\n//partial\nrecord GraphicItem\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation(quantity=\"angle\", unit=\"deg\")=0;\nend GraphicItem;\n\nrecord CoordinateSystem\n  Real extent[2,2]/*(each final unit=\"mm\")*/;\n  Boolean preserveAspectRatio;\n  Real initialScale;\n  Real grid[2]/*(each final unit=\"mm\")*/;\nend CoordinateSystem;\n\n// example\n// CoordinateSystem(extent = {{-10, -10}, {10, 10}});\n// i.e. a coordinate system with width 20 units and height 20 units.\n\nrecord Icon \"Representation of the icon layer\"\n  CoordinateSystem coordinateSystem;\n  //GraphicItem[:] graphics;\nend Icon;\n\nrecord Diagram \"Representation of the diagram layer\"\n  CoordinateSystem coordinateSystem;\n  //GraphicItem[:] graphics;\nend Diagram;\n\ntype Color = Integer[3](each min=0, each max=255) \"RGB representation\";\n// constant Color Black = {0, 0, 0}; // zeros(3);\ntype LinePattern = enumeration(None, Solid, Dash, Dot, DashDot, DashDotDot);\ntype FillPattern = enumeration(None, Solid, Horizontal, Vertical, Cross, Forward, Backward, CrossDiag, HorizontalCylinder, VerticalCylinder, Sphere);\ntype BorderPattern = enumeration(None, Raised, Sunken, Engraved);\ntype Smooth = enumeration(None, Bezier);\ntype EllipseClosure = enumeration(None, Chord, Radial); // added in Modelica 3.4\n\ntype Arrow = enumeration(None, Open, Filled, Half);\ntype TextStyle = enumeration(Bold, Italic, UnderLine);\ntype TextAlignment = enumeration(Left, Center, Right);\n\n// Filled shapes have the following attributes for the border and interior.\nrecord FilledShape \"Style attributes for filled shapes\"\n  Integer lineColor[3] = {0, 0, 0} \"Color of border line\";\n  Integer fillColor[3] = {0, 0, 0} \"Interior fill color\";\n  LinePattern pattern = LinePattern.Solid \"Border line pattern\";\n  FillPattern fillPattern = FillPattern.None \"Interior fill pattern\";\n  Real lineThickness = 0.25 \"Line thickness\";\nend FilledShape;\n\nrecord Transformation\n  Real origin[2]/*(each final unit=\"mm\")*/;\n  Real extent[2,2]/*(each final unit=\"mm\")*/;\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/;\nend Transformation;\n\nrecord Placement\n  Boolean visible = true;\n  Transformation transformation \"Placement in the dagram layer\";\n  Transformation iconTransformation \"Placement in the icon layer\";\nend Placement;\n\nrecord IconMap\n  Real extent[2,2]/*(each final unit=\"mm\")*/ = {{0, 0}, {0, 0}};\n  Boolean primitivesVisible = true;\nend IconMap;\n\nrecord DiagramMap\n  Real extent[2,2]/*(each final unit=\"mm\")*/ = {{0, 0}, {0, 0}};\n  Boolean primitivesVisible = true;\nend DiagramMap;\n\nrecord Line\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/ = 0;\n  // end GraphicItem\n\n  Real points[:, 2]/*(each final unit=\"mm\")*/;\n  Integer color[3] = {0, 0, 0};\n  LinePattern pattern = LinePattern.Solid;\n  Real thickness/*(final unit=\"mm\")*/ = 0.25;\n  Arrow arrow[2] = {Arrow.None, Arrow.None} \"{start arrow, end arrow}\";\n  Real arrowSize/*(final unit=\"mm\")*/ = 3;\n  Smooth smooth = Smooth.None \"Spline\";\nend Line;\n\nrecord Polygon\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/ = 0;\n  // end GraphicItem\n\n  //extends FilledShape;\n  Integer lineColor[3] = {0, 0, 0} \"Color of border line\";\n  Integer fillColor[3] = {0, 0, 0} \"Interior fill color\";\n  LinePattern pattern = LinePattern.Solid \"Border line pattern\";\n  FillPattern fillPattern = FillPattern.None \"Interior fill pattern\";\n  Real lineThickness = 0.25 \"Line thickness\";\n  // end FilledShape\n\n  Real points[:,2]/*(each final unit=\"mm\")*/;\n  Smooth smooth = Smooth.None \"Spline outline\";\nend Polygon;\n\nrecord Rectangle\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/ = 0;\n  // end GraphicItem\n\n  //extends FilledShape;\n  Integer lineColor[3] = {0, 0, 0} \"Color of border line\";\n  Integer fillColor[3] = {0, 0, 0} \"Interior fill color\";\n  LinePattern pattern = LinePattern.Solid \"Border line pattern\";\n  FillPattern fillPattern = FillPattern.None \"Interior fill pattern\";\n  Real lineThickness = 0.25 \"Line thickness\";\n  // end FilledShape\n\n  BorderPattern borderPattern = BorderPattern.None;\n  Real extent[2,2]/*(each final unit=\"mm\")*/;\n  Real radius/*(final unit=\"mm\")*/ = 0 \"Corner radius\";\nend Rectangle;\n\nrecord Ellipse\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/=0;\n  // end GraphicItem\n\n  //extends FilledShape;\n  Integer lineColor[3] = {0, 0, 0} \"Color of border line\";\n  Integer fillColor[3] = {0, 0, 0} \"Interior fill color\";\n  LinePattern pattern = LinePattern.Solid \"Border line pattern\";\n  FillPattern fillPattern = FillPattern.None \"Interior fill pattern\";\n  Real lineThickness = 0.25 \"Line thickness\";\n  // end FilledShape\n\n  Real extent[2,2]/*(each final unit=\"mm\")*/;\n  Real startAngle/*(quantity=\"angle\", unit=\"deg\")*/ = 0;\n  Real endAngle/*(quantity=\"angle\", unit=\"deg\")*/ = 360;\n  EllipseClosure closure = if startAngle == 0 and endAngle == 360 then EllipseClosure.Chord else EllipseClosure.Radial; // added in Modelica 3.4\nend Ellipse;\n\nrecord Text\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/ = 0;\n  // end GraphicItem\n\n  //extends FilledShape;\n  Integer lineColor[3] = {0, 0, 0} \"Color of border line\";\n  Integer fillColor[3] = {0, 0, 0} \"Interior fill color\";\n  LinePattern pattern = LinePattern.Solid \"Border line pattern\";\n  FillPattern fillPattern = FillPattern.None \"Interior fill pattern\";\n  Real lineThickness = 0.25 \"Line thickness\";\n  // end FilledShape\n\n  Real extent[2,2]/*(each final unit=\"mm\")*/ = {{-10, -10}, {10, 10}};\n  String textString = \"\";\n  Real fontSize = 0 \"unit pt\";\n  Integer textColor[3] = {-1, -1, -1} \"defaults to fillColor\";\n  String fontName = \"\";\n  TextStyle textStyle[:] = fill(TextStyle.Bold, 0);\n  TextAlignment horizontalAlignment = TextAlignment.Center;\nend Text;\n\nrecord Bitmap\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/=0;\n  // end GraphicItem\n\n  Real extent[2,2]/*(each final unit=\"mm\")*/;\n  String fileName = \"\" \"Name of bitmap file\";\n  String imageSource =  \"\" \"Base64 representation of bitmap\";\nend Bitmap;\n\n// dynamic annotations\n// annotation (\n//   Icon(graphics={Rectangle(\n//     extent=DynamicSelect({{0,0},{20,20}},{{0,0},{20,level}}),\n//     fillColor=DynamicSelect({0,0,255},\n//     if overflow then {255,0,0} else {0,0,255}))}\n//   );\n\n// events & interaction\nrecord OnMouseDownSetBoolean\n   Boolean variable \"Name of variable to change when mouse button pressed\";\n   Boolean value \"Assigned value\";\nend OnMouseDownSetBoolean;\n\n// interaction={OnMouseDown(on, true), OnMouseUp(on, false)};\nrecord OnMouseMoveXSetReal\n   Real xVariable \"Name of variable to change when cursor moved in x direction\";\n   Real minValue;\n   Real maxValue;\nend OnMouseMoveXSetReal;\n\n//\nrecord OnMouseMoveYSetReal\n   Real yVariable \"Name of variable to change when cursor moved in y direction\";\n   Real minValue;\n   Real maxValue;\nend OnMouseMoveYSetReal;\n\nrecord OnMouseDownEditInteger\n   Integer variable \"Name of variable to change\";\nend OnMouseDownEditInteger;\n\nrecord OnMouseDownEditReal\n   Real variable \"Name of variable to change\";\nend OnMouseDownEditReal;\n\n//\nrecord OnMouseDownEditString\n   String variable \"Name of variable to change\";\nend OnMouseDownEditString;\n\n//\n// annotation(defaultComponentName = \"name\")\n// annotation(missingInnerMessage = \"message\")\n//\n// model World\n//   annotation(defaultComponentName = \"world\",\n//   defaultComponentPrefixes = \"inner replaceable\",\n//   missingInnerMessage = \"The World object is missing\");\n// ...\n// end World;\n//\n// inner replaceable World world;\n//\n// annotation(unassignedMessage = \"message\");\n//\n// annotation(Dialog(enable = parameter-expression, tab = \"tab\", group = \"group\"));\n//\nrecord Dialog\n   parameter String tab = \"General\";\n   parameter String group = \"Parameters\";\n   parameter Boolean enable = true;\n   parameter Boolean showStartAttribute = false;\n   parameter Boolean colorSelector = false;\n   parameter Selector loadSelector;\n   parameter Selector saveSelector;\n   parameter String groupImage = \"\";\n   parameter Boolean connectorSizing = false;\nend Dialog;\n\nrecord Selector\n  parameter String filter;\n  parameter String caption;\nend Selector;\n\nrecord choices\n  Boolean checkBox = false;\n  Boolean __Dymola_checkBox = false;\nend choices;\n\n//\n// connector Frame \"Frame of a mechanical system\"\n//   ...\n//   flow Modelica.SIunits.Force f[3] annotation(unassignedMessage =\n//    \"All Forces cannot be uniquely calculated. The reason could be that the\n//      mechanism contains a planar loop or that joints constrain the same motion.\n//      For planar loops, use in one revolute joint per loop the option\n//      PlanarCutJoint=true in the Advanced menu.\");\n// end Frame;\n//\n// model BodyShape\n//   ...\n//   parameter Boolean animation = true;\n//   parameter SI.Length length \"Length of shape\"\n//   annotation(Dialog(enable = animation, tab = \"Animation\",\n//   group = \"Shape definition\"));\n//   ...\n// end BodyShape;\n\nrecord Documentation\n  String info = \"\" \"Description of the class\";\n  String revisions = \"\" \"Revision history\";\n  // Spec 3.5 Figure[:] figures = {}; \"Simulation result figures\";\nend Documentation;\n  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT192,9878,_OMC_LIT192_data);
#define _OMC_LIT192 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT192)
#define _OMC_LIT193_data "<3.x annotations>"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT193,17,_OMC_LIT193_data);
#define _OMC_LIT193 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT193)
#define _OMC_LIT194_data "3.x"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT194,3,_OMC_LIT194_data);
#define _OMC_LIT194 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT194)
#define _OMC_LIT195_data "empty"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT195,5,_OMC_LIT195_data);
#define _OMC_LIT195 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT195)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT196,2,4) {&FCore_Graph_EG__desc,_OMC_LIT195}};
#define _OMC_LIT196 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT196)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT197,3,3) {&Absyn_FunctionArgs_FUNCTIONARGS__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT197 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT197)
#define _OMC_LIT198_data "__OpenModelica_infoHeader"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT198,25,_OMC_LIT198_data);
#define _OMC_LIT198 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT198)
#define _OMC_LIT199_data "revisions"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT199,9,_OMC_LIT199_data);
#define _OMC_LIT199 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT199)
#define _OMC_LIT200_data "info"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT200,4,_OMC_LIT200_data);
#define _OMC_LIT200 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT200)
#define _OMC_LIT201_data "defaultComponentPrefixes"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT201,24,_OMC_LIT201_data);
#define _OMC_LIT201 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT201)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT202,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT201}};
#define _OMC_LIT202 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT202)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT203,1,1) {_OMC_LIT30}};
#define _OMC_LIT203 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT203)
#define _OMC_LIT204_data "defaultComponentName"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT204,20,_OMC_LIT204_data);
#define _OMC_LIT204 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT204)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT205,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT204}};
#define _OMC_LIT205 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT205)
#define _OMC_LIT206_data "DocumentationClass"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT206,18,_OMC_LIT206_data);
#define _OMC_LIT206 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT206)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT207,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT206}};
#define _OMC_LIT207 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT207)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT208,1,1) {_OMC_LIT103}};
#define _OMC_LIT208 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT208)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT209,1,3) {&Interactive_AnnotationType_ICON__ANNOTATION__desc,}};
#define _OMC_LIT209 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT209)
#define _OMC_LIT210_data "Uses-annotation is missing version for library %s. Assuming the tool-specific version=\"default\"."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT210,96,_OMC_LIT210_data);
#define _OMC_LIT210 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT210)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT211,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT210}};
#define _OMC_LIT211 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT211)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT212,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(558)),_OMC_LIT79,_OMC_LIT80,_OMC_LIT211}};
#define _OMC_LIT212 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT212)
#define _OMC_LIT213_data "default"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT213,7,_OMC_LIT213_data);
#define _OMC_LIT213 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT213)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT214,2,1) {_OMC_LIT213,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT214 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT214)
#define _OMC_LIT215_data "version"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT215,7,_OMC_LIT215_data);
#define _OMC_LIT215 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT215)
#define _OMC_LIT216_data "uses"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT216,4,_OMC_LIT216_data);
#define _OMC_LIT216 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT216)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT217,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT216}};
#define _OMC_LIT217 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT217)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT218,1,4) {&Interactive_AnnotationType_DIAGRAM__ANNOTATION__desc,}};
#define _OMC_LIT218 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT218)
#define _OMC_LIT219_data "immediate"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT219,9,_OMC_LIT219_data);
#define _OMC_LIT219 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT219)
#define _OMC_LIT220_data "reset"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT220,5,_OMC_LIT220_data);
#define _OMC_LIT220 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT220)
#define _OMC_LIT221_data "synchronize"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT221,11,_OMC_LIT221_data);
#define _OMC_LIT221 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT221)
#define _OMC_LIT222_data "priority"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT222,8,_OMC_LIT222_data);
#define _OMC_LIT222 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT222)
#define _OMC_LIT223_data "1"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT223,1,_OMC_LIT223_data);
#define _OMC_LIT223 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT223)
#define _OMC_LIT224_data "<interactive>"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT224,13,_OMC_LIT224_data);
#define _OMC_LIT224 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT224)
#define _OMC_LIT225_data "transition"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT225,10,_OMC_LIT225_data);
#define _OMC_LIT225 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT225)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT226,3,5) {&Absyn_ComponentRef_CREF__IDENT__desc,_OMC_LIT225,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT226 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT226)
#define _OMC_LIT227_data "permissive"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT227,10,_OMC_LIT227_data);
#define _OMC_LIT227 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT227)
#define _OMC_LIT228_data "Disables some error checks to allow erroneous models to compile."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT228,64,_OMC_LIT228_data);
#define _OMC_LIT228 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT228)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT229,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT228}};
#define _OMC_LIT229 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT229)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT230,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(82)),_OMC_LIT227,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT129,_OMC_LIT130,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT229}};
#define _OMC_LIT230 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT230)
#define _OMC_LIT231_data "\"public\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT231,8,_OMC_LIT231_data);
#define _OMC_LIT231 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT231)
#define _OMC_LIT232_data "\"protected\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT232,11,_OMC_LIT232_data);
#define _OMC_LIT232 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT232)
#define _OMC_LIT233_data "useQuotes"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT233,9,_OMC_LIT233_data);
#define _OMC_LIT233 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT233)
#define _OMC_LIT234_data ",{}}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT234,4,_OMC_LIT234_data);
#define _OMC_LIT234 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT234)
#define _OMC_LIT235_data "getInheritedClassesHelper"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT235,25,_OMC_LIT235_data);
#define _OMC_LIT235 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT235)
#define _OMC_LIT236_data "parameter"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT236,9,_OMC_LIT236_data);
#define _OMC_LIT236 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT236)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT237,1,5) {&Absyn_Parallelism_NON__PARALLEL__desc,}};
#define _OMC_LIT237 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT237)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT238,1,5) {&Absyn_Variability_PARAM__desc,}};
#define _OMC_LIT238 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT238)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT239,1,5) {&Absyn_Direction_BIDIR__desc,}};
#define _OMC_LIT239 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT239)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT240,1,3) {&Absyn_IsField_NONFIELD__desc,}};
#define _OMC_LIT240 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT240)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT241,8,3) {&Absyn_ElementAttributes_ATTR__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT237,_OMC_LIT238,_OMC_LIT239,_OMC_LIT240,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT241 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT241)
#define _OMC_LIT242_data "constant"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT242,8,_OMC_LIT242_data);
#define _OMC_LIT242 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT242)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT243,1,6) {&Absyn_Variability_CONST__desc,}};
#define _OMC_LIT243 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT243)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT244,8,3) {&Absyn_ElementAttributes_ATTR__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT237,_OMC_LIT243,_OMC_LIT239,_OMC_LIT240,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT244 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT244)
#define _OMC_LIT245_data "discrete"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT245,8,_OMC_LIT245_data);
#define _OMC_LIT245 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT245)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT246,1,4) {&Absyn_Variability_DISCRETE__desc,}};
#define _OMC_LIT246 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT246)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT247,8,3) {&Absyn_ElementAttributes_ATTR__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT237,_OMC_LIT246,_OMC_LIT239,_OMC_LIT240,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT247 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT247)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT248,1,3) {&Absyn_Variability_VAR__desc,}};
#define _OMC_LIT248 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT248)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT249,8,3) {&Absyn_ElementAttributes_ATTR__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT237,_OMC_LIT248,_OMC_LIT239,_OMC_LIT240,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT249 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT249)
#define _OMC_LIT250_data "replaceable"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT250,11,_OMC_LIT250_data);
#define _OMC_LIT250 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT250)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT251,1,4) {&Absyn_RedeclareKeywords_REPLACEABLE__desc,}};
#define _OMC_LIT251 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT251)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT252,1,1) {_OMC_LIT251}};
#define _OMC_LIT252 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT252)
#define _OMC_LIT253_data "inner"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT253,5,_OMC_LIT253_data);
#define _OMC_LIT253 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT253)
#define _OMC_LIT254_data "outer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT254,5,_OMC_LIT254_data);
#define _OMC_LIT254 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT254)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT255,1,3) {&Absyn_InnerOuter_INNER__desc,}};
#define _OMC_LIT255 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT255)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT256,1,4) {&Absyn_InnerOuter_OUTER__desc,}};
#define _OMC_LIT256 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT256)
#define _OMC_LIT257_data "false\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT257,6,_OMC_LIT257_data);
#define _OMC_LIT257 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT257)
#define _OMC_LIT258_data "Ok\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT258,3,_OMC_LIT258_data);
#define _OMC_LIT258 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT258)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT259,1,17) {&Absyn_Restriction_R__PREDEFINED__REAL__desc,}};
#define _OMC_LIT259 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT259)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT260,6,3) {&Absyn_ClassDef_PARTS__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT260 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT260)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT261,8,3) {&Absyn_Class_CLASS__desc,_OMC_LIT114,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT259,_OMC_LIT260,_OMC_LIT18}};
#define _OMC_LIT261 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT261)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT262,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT114}};
#define _OMC_LIT262 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT262)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT263,1,16) {&Absyn_Restriction_R__PREDEFINED__INTEGER__desc,}};
#define _OMC_LIT263 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT263)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT264,8,3) {&Absyn_Class_CLASS__desc,_OMC_LIT115,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT263,_OMC_LIT260,_OMC_LIT18}};
#define _OMC_LIT264 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT264)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT265,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT115}};
#define _OMC_LIT265 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT265)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT266,1,18) {&Absyn_Restriction_R__PREDEFINED__STRING__desc,}};
#define _OMC_LIT266 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT266)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT267,8,3) {&Absyn_Class_CLASS__desc,_OMC_LIT117,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT266,_OMC_LIT260,_OMC_LIT18}};
#define _OMC_LIT267 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT267)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT268,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT117}};
#define _OMC_LIT268 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT268)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT269,1,19) {&Absyn_Restriction_R__PREDEFINED__BOOLEAN__desc,}};
#define _OMC_LIT269 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT269)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT270,8,3) {&Absyn_Class_CLASS__desc,_OMC_LIT116,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT269,_OMC_LIT260,_OMC_LIT18}};
#define _OMC_LIT270 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT270)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT271,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT116}};
#define _OMC_LIT271 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT271)
#define _OMC_LIT272_data "Clock"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT272,5,_OMC_LIT272_data);
#define _OMC_LIT272 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT272)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT273,1,21) {&Absyn_Restriction_R__PREDEFINED__CLOCK__desc,}};
#define _OMC_LIT273 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT273)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT274,8,3) {&Absyn_Class_CLASS__desc,_OMC_LIT272,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT273,_OMC_LIT260,_OMC_LIT18}};
#define _OMC_LIT274 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT274)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT275,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT272}};
#define _OMC_LIT275 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT275)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT276,1,11) {&DAE_Type_T__UNKNOWN__desc,}};
#define _OMC_LIT276 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT276)
#define _OMC_LIT277_data "scope"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT277,5,_OMC_LIT277_data);
#define _OMC_LIT277 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT277)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT278,3,5) {&Absyn_ComponentRef_CREF__IDENT__desc,_OMC_LIT16,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT278 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT278)
#define _OMC_LIT279_data "\"flow\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT279,6,_OMC_LIT279_data);
#define _OMC_LIT279 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT279)
#define _OMC_LIT280_data "\"\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT280,2,_OMC_LIT280_data);
#define _OMC_LIT280 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT280)
#define _OMC_LIT281_data "\"stream\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT281,8,_OMC_LIT281_data);
#define _OMC_LIT281 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT281)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT282,1,5) {&Absyn_Restriction_R__MODEL__desc,}};
#define _OMC_LIT282 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT282)
#define _OMC_LIT283_data "error"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT283,5,_OMC_LIT283_data);
#define _OMC_LIT283 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT283)
#define _OMC_LIT284_data "Error: component with name: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT284,28,_OMC_LIT284_data);
#define _OMC_LIT284 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT284)
#define _OMC_LIT285_data " in class: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT285,11,_OMC_LIT285_data);
#define _OMC_LIT285 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT285)
#define _OMC_LIT286_data " not found."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT286,11,_OMC_LIT286_data);
#define _OMC_LIT286 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT286)
#define _OMC_LIT287_data "Error: class: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT287,14,_OMC_LIT287_data);
#define _OMC_LIT287 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT287)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT288,3,3) {&Absyn_Modification_CLASSMOD__desc,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT13}};
#define _OMC_LIT288 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT288)
#define _OMC_LIT289_data "-set_submodifier_in_elementargs failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT289,39,_OMC_LIT289_data);
#define _OMC_LIT289 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT289)
#define _OMC_LIT290_data "kind=named, id="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT290,15,_OMC_LIT290_data);
#define _OMC_LIT290 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT290)
#define _OMC_LIT291_data ", path="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT291,7,_OMC_LIT291_data);
#define _OMC_LIT291 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT291)
#define _OMC_LIT292_data "kind=qualified, path="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT292,21,_OMC_LIT292_data);
#define _OMC_LIT292 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT292)
#define _OMC_LIT293_data "kind=unqualified, path="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT293,23,_OMC_LIT293_data);
#define _OMC_LIT293 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT293)
#define _OMC_LIT294_data "readonly"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT294,8,_OMC_LIT294_data);
#define _OMC_LIT294 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT294)
#define _OMC_LIT295_data "writable"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT295,8,_OMC_LIT295_data);
#define _OMC_LIT295 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT295)
#define _OMC_LIT296_data "PDEModelica: %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT296,15,_OMC_LIT296_data);
#define _OMC_LIT296 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT296)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT297,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT296}};
#define _OMC_LIT297 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT297)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT298,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(7013)),_OMC_LIT1,_OMC_LIT2,_OMC_LIT297}};
#define _OMC_LIT298 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT298)
#define _OMC_LIT299_data "Fields not supported in standard modelica. Enable PDEModelica usign flag --grammar=\"PDEModelica\"."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT299,97,_OMC_LIT299_data);
#define _OMC_LIT299 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT299)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT300,2,1) {_OMC_LIT299,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT300 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT300)
#define _OMC_LIT301_data "grammar"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT301,7,_OMC_LIT301_data);
#define _OMC_LIT301 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT301)
#define _OMC_LIT302_data "g"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT302,1,_OMC_LIT302_data);
#define _OMC_LIT302 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT302)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT303,1,1) {_OMC_LIT302}};
#define _OMC_LIT303 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT303)
#define _OMC_LIT304_data "Modelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT304,8,_OMC_LIT304_data);
#define _OMC_LIT304 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT304)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT305,2,0) {_OMC_LIT304,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT305 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT305)
#define _OMC_LIT306_data "MetaModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT306,12,_OMC_LIT306_data);
#define _OMC_LIT306 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT306)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT307,2,0) {_OMC_LIT306,MMC_IMMEDIATE(MMC_TAGFIXNUM(2))}};
#define _OMC_LIT307 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT307)
#define _OMC_LIT308_data "ParModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT308,11,_OMC_LIT308_data);
#define _OMC_LIT308 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT308)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT309,2,0) {_OMC_LIT308,MMC_IMMEDIATE(MMC_TAGFIXNUM(3))}};
#define _OMC_LIT309 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT309)
#define _OMC_LIT310_data "Optimica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT310,8,_OMC_LIT310_data);
#define _OMC_LIT310 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT310)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT311,2,0) {_OMC_LIT310,MMC_IMMEDIATE(MMC_TAGFIXNUM(4))}};
#define _OMC_LIT311 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT311)
#define _OMC_LIT312_data "PDEModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT312,11,_OMC_LIT312_data);
#define _OMC_LIT312 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT312)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT313,2,0) {_OMC_LIT312,MMC_IMMEDIATE(MMC_TAGFIXNUM(5))}};
#define _OMC_LIT313 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT313)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT314,2,1) {_OMC_LIT313,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT314 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT314)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT315,2,1) {_OMC_LIT311,_OMC_LIT314}};
#define _OMC_LIT315 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT315)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT316,2,1) {_OMC_LIT309,_OMC_LIT315}};
#define _OMC_LIT316 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT316)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT317,2,1) {_OMC_LIT307,_OMC_LIT316}};
#define _OMC_LIT317 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT317)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT318,2,1) {_OMC_LIT305,_OMC_LIT317}};
#define _OMC_LIT318 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT318)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT319,3,10) {&Flags_FlagData_ENUM__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT318}};
#define _OMC_LIT319 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT319)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT320,2,1) {_OMC_LIT312,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT320 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT320)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT321,2,1) {_OMC_LIT310,_OMC_LIT320}};
#define _OMC_LIT321 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT321)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT322,2,1) {_OMC_LIT308,_OMC_LIT321}};
#define _OMC_LIT322 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT322)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT323,2,1) {_OMC_LIT306,_OMC_LIT322}};
#define _OMC_LIT323 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT323)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT324,2,1) {_OMC_LIT304,_OMC_LIT323}};
#define _OMC_LIT324 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT324)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT325,2,3) {&Flags_ValidOptions_STRING__OPTION__desc,_OMC_LIT324}};
#define _OMC_LIT325 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT325)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT326,1,1) {_OMC_LIT325}};
#define _OMC_LIT326 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT326)
#define _OMC_LIT327_data "Sets the grammar and semantics to accept."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT327,41,_OMC_LIT327_data);
#define _OMC_LIT327 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT327)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT328,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT327}};
#define _OMC_LIT328 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT328)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT329,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(6)),_OMC_LIT301,_OMC_LIT303,_OMC_LIT144,_OMC_LIT319,_OMC_LIT326,_OMC_LIT328}};
#define _OMC_LIT329 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT329)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT330,1,4) {&Absyn_IsField_FIELD__desc,}};
#define _OMC_LIT330 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT330)
#define _OMC_LIT331_data "nonfield"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT331,8,_OMC_LIT331_data);
#define _OMC_LIT331 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT331)
#define _OMC_LIT332_data "field"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT332,5,_OMC_LIT332_data);
#define _OMC_LIT332 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT332)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT333,1,3) {&Absyn_Direction_INPUT__desc,}};
#define _OMC_LIT333 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT333)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT334,1,4) {&Absyn_Direction_OUTPUT__desc,}};
#define _OMC_LIT334 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT334)
#define _OMC_LIT335_data "input"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT335,5,_OMC_LIT335_data);
#define _OMC_LIT335 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT335)
#define _OMC_LIT336_data "output"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT336,6,_OMC_LIT336_data);
#define _OMC_LIT336 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT336)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT337,1,3) {&Absyn_Parallelism_PARGLOBAL__desc,}};
#define _OMC_LIT337 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT337)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT338,1,4) {&Absyn_Parallelism_PARLOCAL__desc,}};
#define _OMC_LIT338 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT338)
#define _OMC_LIT339_data "parglobal"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT339,9,_OMC_LIT339_data);
#define _OMC_LIT339 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT339)
#define _OMC_LIT340_data "parlocal"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT340,8,_OMC_LIT340_data);
#define _OMC_LIT340 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT340)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT341,1,5) {&Absyn_InnerOuter_INNER__OUTER__desc,}};
#define _OMC_LIT341 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT341)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT342,1,3) {&Absyn_RedeclareKeywords_REDECLARE__desc,}};
#define _OMC_LIT342 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT342)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT343,1,1) {_OMC_LIT342}};
#define _OMC_LIT343 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT343)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT344,1,5) {&Absyn_RedeclareKeywords_REDECLARE__REPLACEABLE__desc,}};
#define _OMC_LIT344 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT344)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT345,1,1) {_OMC_LIT344}};
#define _OMC_LIT345 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT345)
#define _OMC_LIT346_data "cl: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT346,4,_OMC_LIT346_data);
#define _OMC_LIT346 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT346)
#define _OMC_LIT347_data "	 type: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT347,8,_OMC_LIT347_data);
#define _OMC_LIT347 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT347)
#define _OMC_LIT348_data "		 name: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT348,9,_OMC_LIT348_data);
#define _OMC_LIT348 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT348)
#define _OMC_LIT349_data "ex: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT349,4,_OMC_LIT349_data);
#define _OMC_LIT349 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT349)
#define _OMC_LIT350_data "	 exte: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT350,8,_OMC_LIT350_data);
#define _OMC_LIT350 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT350)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT351,3,3) {&GlobalScript_Components_COMPONENTS__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT351 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT351)
#define _OMC_LIT352_data "-first_component failed: no components\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT352,39,_OMC_LIT352_data);
#define _OMC_LIT352 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT352)
#define _OMC_LIT353_data "-extract_components_from_componentitems failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT353,47,_OMC_LIT353_data);
#define _OMC_LIT353 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT353)
#define _OMC_LIT354_data "-extract_components_from_class failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT354,38,_OMC_LIT354_data);
#define _OMC_LIT354 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT354)
#define _OMC_LIT355_data "-get_components_with_type failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT355,33,_OMC_LIT355_data);
#define _OMC_LIT355 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT355)
#define _OMC_LIT356_data "-get_components_from_class failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT356,34,_OMC_LIT356_data);
#define _OMC_LIT356 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT356)
#define _OMC_LIT357_data "-get_components_with_components_type failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT357,44,_OMC_LIT357_data);
#define _OMC_LIT357 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT357)
#define _OMC_LIT358_data "-get_components_with_components_class failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT358,45,_OMC_LIT358_data);
#define _OMC_LIT358 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT358)
#define _OMC_LIT359_data "-get_dependency_with_type failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT359,33,_OMC_LIT359_data);
#define _OMC_LIT359 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT359)
#define _OMC_LIT360_data "---------comps_types----------\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT360,31,_OMC_LIT360_data);
#define _OMC_LIT360 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT360)
#define _OMC_LIT361_data "===================\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT361,20,_OMC_LIT361_data);
#define _OMC_LIT361 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT361)
#define _OMC_LIT362_data "---------DEPENDENCIES----------\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT362,32,_OMC_LIT362_data);
#define _OMC_LIT362 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT362)
#define _OMC_LIT363_data "-get_dependency_on_class failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT363,32,_OMC_LIT363_data);
#define _OMC_LIT363 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT363)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT364,3,3) {&GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT364 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT364)
#define _OMC_LIT365_data "-first_componentReplacement failed: no componentReplacementReplacementRules\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT365,76,_OMC_LIT365_data);
#define _OMC_LIT365 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT365)
#define _OMC_LIT366_data "-make_componentsReplacementRules_from_components failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT366,56,_OMC_LIT366_data);
#define _OMC_LIT366 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT366)
#define _OMC_LIT367_data "-get_new_componentreplacementsrules_for_each_rule failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT367,57,_OMC_LIT367_data);
#define _OMC_LIT367 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT367)
#define _OMC_LIT368_data "-get_componentreplacementsrules failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT368,39,_OMC_LIT368_data);
#define _OMC_LIT368 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT368)
#define _OMC_LIT369_data "-rename_component_in_external_decl not implemented yet\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT369,55,_OMC_LIT369_data);
#define _OMC_LIT369 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT369)
#define _OMC_LIT370_data "-rename_component_in_namedArgs failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT370,38,_OMC_LIT370_data);
#define _OMC_LIT370 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT370)
#define _OMC_LIT371_data "-rename_component_in_function_args failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT371,42,_OMC_LIT371_data);
#define _OMC_LIT371 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT371)
#define _OMC_LIT372_data "-rename_component_in_exp_algoritms_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT372,47,_OMC_LIT372_data);
#define _OMC_LIT372 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT372)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT373,1,20) {&Absyn_Exp_END__desc,}};
#define _OMC_LIT373 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT373)
#define _OMC_LIT374_data "-rename_component_in_exp failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT374,32,_OMC_LIT374_data);
#define _OMC_LIT374 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT374)
#define _OMC_LIT375_data "-rename_component_in_element_arg_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT375,45,_OMC_LIT375_data);
#define _OMC_LIT375 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT375)
#define _OMC_LIT376_data "-rename_component_in_exp_tuple_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT376,43,_OMC_LIT376_data);
#define _OMC_LIT376 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT376)
#define _OMC_LIT377_data "-rename_component_in_exp_list_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT377,42,_OMC_LIT377_data);
#define _OMC_LIT377 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT377)
#define _OMC_LIT378_data "-rename_component_in_exp_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT378,37,_OMC_LIT378_data);
#define _OMC_LIT378 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT378)
#define _OMC_LIT379_data "-rename_component_in_equation EQ_NORETCALL not implemented yet\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT379,63,_OMC_LIT379_data);
#define _OMC_LIT379 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT379)
#define _OMC_LIT380_data "-rename_component_in_equation failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT380,37,_OMC_LIT380_data);
#define _OMC_LIT380 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT380)
#define _OMC_LIT381_data "-rename_component_in_exp_equationitem_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT381,50,_OMC_LIT381_data);
#define _OMC_LIT381 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT381)
#define _OMC_LIT382_data "-InteractiveUtil.renameComponentInComponentitems failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT382,56,_OMC_LIT382_data);
#define _OMC_LIT382 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT382)
#define _OMC_LIT383_data "-rename_component_from_componentreplacements failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT383,52,_OMC_LIT383_data);
#define _OMC_LIT383 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT383)
#define _OMC_LIT384_data "-extract_renamed_classes_as_string_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT384,47,_OMC_LIT384_data);
#define _OMC_LIT384 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT384)
#define _OMC_LIT385_data " is in a read only file!"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT385,24,_OMC_LIT385_data);
#define _OMC_LIT385 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT385)
#define _OMC_LIT386_data "renameComponentOnlyInClass failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT386,34,_OMC_LIT386_data);
#define _OMC_LIT386 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT386)
#define _OMC_LIT387_data "failtrace"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT387,9,_OMC_LIT387_data);
#define _OMC_LIT387 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT387)
#define _OMC_LIT388_data "Sets whether to print a failtrace or not."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT388,41,_OMC_LIT388_data);
#define _OMC_LIT388 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT388)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT389,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT388}};
#define _OMC_LIT389 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT389)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT390,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT387,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT389}};
#define _OMC_LIT390 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT390)
#define _OMC_LIT391_data "rename_component failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT391,24,_OMC_LIT391_data);
#define _OMC_LIT391 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT391)
#define _OMC_LIT392_data "InteractiveUtil.extractAllComponentreplacements"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT392,47,_OMC_LIT392_data);
#define _OMC_LIT392 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT392)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT393,2,3) {&Dump_DumpOptions_DUMPOPTIONS__desc,_OMC_LIT16}};
#define _OMC_LIT393 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT393)
#include "util/modelica.h"
#include "InteractiveUtil_includes.h"
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClassListNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClassListNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClassListNoPartial,2,0) {(void*) boxptr_InteractiveUtil_getClassnamesInClassListNoPartial,0}};
#define boxvar_InteractiveUtil_getClassnamesInClassListNoPartial MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClassListNoPartial)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateConnectionNamesInEqList(threadData_t *threadData, modelica_metatype _equations, modelica_string _from, modelica_string _to, modelica_string _fromNew, modelica_string _toNew);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateConnectionNamesInEqList,2,0) {(void*) boxptr_InteractiveUtil_updateConnectionNamesInEqList,0}};
#define boxvar_InteractiveUtil_updateConnectionNamesInEqList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateConnectionNamesInEqList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateConnectionNamesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_string _inFrom, modelica_string _inTo, modelica_string _inFromNew, modelica_string _inToNew);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateConnectionNamesInClass,2,0) {(void*) boxptr_InteractiveUtil_updateConnectionNamesInClass,0}};
#define boxvar_InteractiveUtil_updateConnectionNamesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateConnectionNamesInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateConnectionAnnotationInEqList(threadData_t *threadData, modelica_metatype _equations, modelica_string _from, modelica_string _to, modelica_metatype _ann);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateConnectionAnnotationInEqList,2,0) {(void*) boxptr_InteractiveUtil_updateConnectionAnnotationInEqList,0}};
#define boxvar_InteractiveUtil_updateConnectionAnnotationInEqList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateConnectionAnnotationInEqList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNFComponentitemsAnnotationsFromItems(threadData_t *threadData, modelica_metatype _inComponentItems, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNFComponentitemsAnnotationsFromItems,2,0) {(void*) boxptr_InteractiveUtil_getNFComponentitemsAnnotationsFromItems,0}};
#define boxvar_InteractiveUtil_getNFComponentitemsAnnotationsFromItems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNFComponentitemsAnnotationsFromItems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNFComponentitemsAnnotationsElArgs(threadData_t *threadData, modelica_metatype _inElementArgs, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNFComponentitemsAnnotationsElArgs,2,0) {(void*) boxptr_InteractiveUtil_getNFComponentitemsAnnotationsElArgs,0}};
#define boxvar_InteractiveUtil_getNFComponentitemsAnnotationsElArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNFComponentitemsAnnotationsElArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNFAnnotationsFromConstraintClass(threadData_t *threadData, modelica_metatype _inCC);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNFAnnotationsFromConstraintClass,2,0) {(void*) boxptr_InteractiveUtil_getNFAnnotationsFromConstraintClass,0}};
#define boxvar_InteractiveUtil_getNFAnnotationsFromConstraintClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNFAnnotationsFromConstraintClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_excludeElementsFromFile(threadData_t *threadData, modelica_string _inFile, modelica_metatype _inEls);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_excludeElementsFromFile,2,0) {(void*) boxptr_InteractiveUtil_excludeElementsFromFile,0}};
#define boxvar_InteractiveUtil_excludeElementsFromFile MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_excludeElementsFromFile)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeElements(threadData_t *threadData, modelica_metatype _inEls1, modelica_metatype _inEls2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeElements,2,0) {(void*) boxptr_InteractiveUtil_mergeElements,0}};
#define boxvar_InteractiveUtil_mergeElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeElement(threadData_t *threadData, modelica_metatype _inEls, modelica_metatype _inEl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeElement,2,0) {(void*) boxptr_InteractiveUtil_mergeElement,0}};
#define boxvar_InteractiveUtil_mergeElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeClasses(threadData_t *threadData, modelica_metatype _cNew, modelica_metatype _cOld);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeClasses,2,0) {(void*) boxptr_InteractiveUtil_mergeClasses,0}};
#define boxvar_InteractiveUtil_mergeClasses MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentDimensionsInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inFound, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_boolean *out_outFound, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentDimensionsInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inFound, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_metatype *out_outFound, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentDimensionsInCompitems,2,0) {(void*) boxptr_InteractiveUtil_setComponentDimensionsInCompitems,0}};
#define boxvar_InteractiveUtil_setComponentDimensionsInCompitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentDimensionsInCompitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentDimensionsInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _inDimensions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentDimensionsInClass,2,0) {(void*) boxptr_InteractiveUtil_setComponentDimensionsInClass,0}};
#define boxvar_InteractiveUtil_setComponentDimensionsInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentDimensionsInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentDimensions(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_metatype _inProgram, modelica_string *out_outResult);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentDimensions,2,0) {(void*) boxptr_InteractiveUtil_setComponentDimensions,0}};
#define boxvar_InteractiveUtil_setComponentDimensions MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentDimensions)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassEnvNoElaboration(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inClassPath, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassEnvNoElaboration,2,0) {(void*) boxptr_InteractiveUtil_getClassEnvNoElaboration,0}};
#define boxvar_InteractiveUtil_getClassEnvNoElaboration MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassEnvNoElaboration)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassNameFromExtends(threadData_t *threadData, modelica_metatype _inElementSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassNameFromExtends,2,0) {(void*) boxptr_InteractiveUtil_getBaseClassNameFromExtends,0}};
#define boxvar_InteractiveUtil_getBaseClassNameFromExtends MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassNameFromExtends)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAllClassesInClass(threadData_t *threadData, modelica_metatype _class_);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAllClassesInClass,2,0) {(void*) boxptr_InteractiveUtil_getAllClassesInClass,0}};
#define boxvar_InteractiveUtil_getAllClassesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAllClassesInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getFunctionsInClasses(threadData_t *threadData, modelica_metatype _classes, modelica_metatype _acc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFunctionsInClasses,2,0) {(void*) boxptr_InteractiveUtil_getFunctionsInClasses,0}};
#define boxvar_InteractiveUtil_getFunctionsInClasses MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFunctionsInClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentElementInClass(threadData_t *threadData, modelica_metatype _cl, modelica_string _compName);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentElementInClass,2,0) {(void*) boxptr_InteractiveUtil_getComponentElementInClass,0}};
#define boxvar_InteractiveUtil_getComponentElementInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentElementInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getSCodeClassNamesRecursiveWork(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inAcc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getSCodeClassNamesRecursiveWork,2,0) {(void*) boxptr_InteractiveUtil_getSCodeClassNamesRecursiveWork,0}};
#define boxvar_InteractiveUtil_getSCodeClassNamesRecursiveWork MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getSCodeClassNamesRecursiveWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinPaths(threadData_t *threadData, modelica_string _child, modelica_metatype _parent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinPaths,2,0) {(void*) boxptr_InteractiveUtil_joinPaths,0}};
#define boxvar_InteractiveUtil_joinPaths MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinPaths)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClassList(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClassList(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClassList,2,0) {(void*) boxptr_InteractiveUtil_getClassnamesInClassList,0}};
#define boxvar_InteractiveUtil_getClassnamesInClassList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClassList)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementTypeName(threadData_t *threadData, modelica_metatype _inElementSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementTypeName,2,0) {(void*) boxptr_InteractiveUtil_getElementTypeName,0}};
#define boxvar_InteractiveUtil_getElementTypeName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementTypeName)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementName(threadData_t *threadData, modelica_metatype _inElementSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementName,2,0) {(void*) boxptr_InteractiveUtil_getElementName,0}};
#define boxvar_InteractiveUtil_getElementName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionTypeVars(threadData_t *threadData, modelica_metatype _inTypeVars, modelica_metatype _inDefinitions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionTypeVars,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionTypeVars,0}};
#define boxvar_InteractiveUtil_getDefinitionTypeVars MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionTypeVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionComponents(threadData_t *threadData, modelica_string _typeStr, modelica_string _dirStr, modelica_integer _numDim, modelica_metatype _components);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionComponents(threadData_t *threadData, modelica_metatype _typeStr, modelica_metatype _dirStr, modelica_metatype _numDim, modelica_metatype _components);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionComponents,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionComponents,0}};
#define boxvar_InteractiveUtil_getDefinitionComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionComponents)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionDirString(threadData_t *threadData, modelica_metatype _dir, modelica_metatype _variability, modelica_boolean _isFunction);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionDirString(threadData_t *threadData, modelica_metatype _dir, modelica_metatype _variability, modelica_metatype _isFunction);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionDirString,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionDirString,0}};
#define boxvar_InteractiveUtil_getDefinitionDirString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionDirString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionContent(threadData_t *threadData, modelica_metatype _contents, modelica_boolean _addFunctions, modelica_boolean _isPublic);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionContent(threadData_t *threadData, modelica_metatype _contents, modelica_metatype _addFunctions, modelica_metatype _isPublic);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionContent,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionContent,0}};
#define boxvar_InteractiveUtil_getDefinitionContent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionContent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionParts(threadData_t *threadData, modelica_metatype _parts, modelica_metatype _inTypeVars, modelica_boolean _isFunction);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionParts(threadData_t *threadData, modelica_metatype _parts, modelica_metatype _inTypeVars, modelica_metatype _isFunction);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionParts,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionParts,0}};
#define boxvar_InteractiveUtil_getDefinitionParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionParts)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_getDefinitionDimensions(threadData_t *threadData, modelica_metatype _ts, modelica_metatype _attr);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionDimensions(threadData_t *threadData, modelica_metatype _ts, modelica_metatype _attr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionDimensions,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionDimensions,0}};
#define boxvar_InteractiveUtil_getDefinitionDimensions MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionDimensions)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionPathString(threadData_t *threadData, modelica_metatype _path);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionPathString,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionPathString,0}};
#define boxvar_InteractiveUtil_getDefinitionPathString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionPathString)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getEnumerationLiterals(threadData_t *threadData, modelica_metatype _el);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getEnumerationLiterals,2,0) {(void*) boxptr_InteractiveUtil_getEnumerationLiterals,0}};
#define boxvar_InteractiveUtil_getEnumerationLiterals MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getEnumerationLiterals)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionsReplaceableClass(threadData_t *threadData, modelica_metatype _class_);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionsReplaceableClass,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionsReplaceableClass,0}};
#define boxvar_InteractiveUtil_getDefinitionsReplaceableClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionsReplaceableClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionsClass(threadData_t *threadData, modelica_metatype _class_, modelica_boolean _addFunctions);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionsClass(threadData_t *threadData, modelica_metatype _class_, modelica_metatype _addFunctions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionsClass,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionsClass,0}};
#define boxvar_InteractiveUtil_getDefinitionsClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionsClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitions2(threadData_t *threadData, modelica_metatype _classes, modelica_boolean _addFunctions);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitions2(threadData_t *threadData, modelica_metatype _classes, modelica_metatype _addFunctions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitions2,2,0) {(void*) boxptr_InteractiveUtil_getDefinitions2,0}};
#define boxvar_InteractiveUtil_getDefinitions2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitions2)
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_printWithNewline(threadData_t *threadData, modelica_string _s);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_printWithNewline,2,0) {(void*) boxptr_InteractiveUtil_printWithNewline,0}};
#define boxvar_InteractiveUtil_printWithNewline MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_printWithNewline)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItem, modelica_boolean _inBoolean, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItem, modelica_metatype _inBoolean, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInAlgorithmItem,2,0) {(void*) boxptr_InteractiveUtil_getLocalVariablesInAlgorithmItem,0}};
#define boxvar_InteractiveUtil_getLocalVariablesInAlgorithmItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInAlgorithmItem)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst, modelica_boolean _inBoolean, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst, modelica_metatype _inBoolean, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInAlgorithmsItems,2,0) {(void*) boxptr_InteractiveUtil_getLocalVariablesInAlgorithmsItems,0}};
#define boxvar_InteractiveUtil_getLocalVariablesInAlgorithmsItems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInAlgorithmsItems)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInClassParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_boolean _inBoolean, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInClassParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inBoolean, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInClassParts,2,0) {(void*) boxptr_InteractiveUtil_getLocalVariablesInClassParts,0}};
#define boxvar_InteractiveUtil_getLocalVariablesInClassParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInClassParts)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitions(threadData_t *threadData, modelica_metatype _ast, modelica_boolean _addFunctions);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitions(threadData_t *threadData, modelica_metatype _ast, modelica_metatype _addFunctions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitions,2,0) {(void*) boxptr_InteractiveUtil_getDefinitions,0}};
#define boxvar_InteractiveUtil_getDefinitions MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitions)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElseIfAlgorithm(threadData_t *threadData, modelica_metatype _elseIfbranch);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElseIfAlgorithm,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElseIfAlgorithm,0}};
#define boxvar_InteractiveUtil_transformFlatElseIfAlgorithm MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElseIfAlgorithm)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatAlgorithm(threadData_t *threadData, modelica_metatype _alg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatAlgorithm,2,0) {(void*) boxptr_InteractiveUtil_transformFlatAlgorithm,0}};
#define boxvar_InteractiveUtil_transformFlatAlgorithm MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatAlgorithm)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatAlgorithmItem(threadData_t *threadData, modelica_metatype _algitem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatAlgorithmItem,2,0) {(void*) boxptr_InteractiveUtil_transformFlatAlgorithmItem,0}};
#define boxvar_InteractiveUtil_transformFlatAlgorithmItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatAlgorithmItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatExp(threadData_t *threadData, modelica_metatype _inExp, modelica_integer _inDummy, modelica_integer *out_outDummy);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformFlatExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDummy, modelica_metatype *out_outDummy);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatExp,2,0) {(void*) boxptr_InteractiveUtil_transformFlatExp,0}};
#define boxvar_InteractiveUtil_transformFlatExp MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatExpTrav(threadData_t *threadData, modelica_metatype _inExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatExpTrav,2,0) {(void*) boxptr_InteractiveUtil_transformFlatExpTrav,0}};
#define boxvar_InteractiveUtil_transformFlatExpTrav MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatExpTrav)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatNamedArg(threadData_t *threadData, modelica_metatype _namedArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatNamedArg,2,0) {(void*) boxptr_InteractiveUtil_transformFlatNamedArg,0}};
#define boxvar_InteractiveUtil_transformFlatNamedArg MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatNamedArg)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatFunctionArgs(threadData_t *threadData, modelica_metatype _fargs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatFunctionArgs,2,0) {(void*) boxptr_InteractiveUtil_transformFlatFunctionArgs,0}};
#define boxvar_InteractiveUtil_transformFlatFunctionArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatFunctionArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElseIfPart(threadData_t *threadData, modelica_metatype _elseIfPart);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElseIfPart,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElseIfPart,0}};
#define boxvar_InteractiveUtil_transformFlatElseIfPart MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElseIfPart)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatEquation(threadData_t *threadData, modelica_metatype _eqn);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatEquation,2,0) {(void*) boxptr_InteractiveUtil_transformFlatEquation,0}};
#define boxvar_InteractiveUtil_transformFlatEquation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatEquationItem(threadData_t *threadData, modelica_metatype _eqnitem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatEquationItem,2,0) {(void*) boxptr_InteractiveUtil_transformFlatEquationItem,0}};
#define boxvar_InteractiveUtil_transformFlatEquationItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatEquationItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponentRef(threadData_t *threadData, modelica_metatype _cr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponentRef,2,0) {(void*) boxptr_InteractiveUtil_transformFlatComponentRef,0}};
#define boxvar_InteractiveUtil_transformFlatComponentRef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponentRef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatModificationOption(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatModificationOption,2,0) {(void*) boxptr_InteractiveUtil_transformFlatModificationOption,0}};
#define boxvar_InteractiveUtil_transformFlatModificationOption MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatModificationOption)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementArg(threadData_t *threadData, modelica_metatype _eltArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementArg,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElementArg,0}};
#define boxvar_InteractiveUtil_transformFlatElementArg MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementArg)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatSubscript(threadData_t *threadData, modelica_metatype _s);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatSubscript,2,0) {(void*) boxptr_InteractiveUtil_transformFlatSubscript,0}};
#define boxvar_InteractiveUtil_transformFlatSubscript MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatSubscript)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatArrayDim(threadData_t *threadData, modelica_metatype _ad);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatArrayDim,2,0) {(void*) boxptr_InteractiveUtil_transformFlatArrayDim,0}};
#define boxvar_InteractiveUtil_transformFlatArrayDim MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatArrayDim)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponent(threadData_t *threadData, modelica_metatype _comp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponent,2,0) {(void*) boxptr_InteractiveUtil_transformFlatComponent,0}};
#define boxvar_InteractiveUtil_transformFlatComponent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponentItem(threadData_t *threadData, modelica_metatype _compitem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponentItem,2,0) {(void*) boxptr_InteractiveUtil_transformFlatComponentItem,0}};
#define boxvar_InteractiveUtil_transformFlatComponentItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponentItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementSpec(threadData_t *threadData, modelica_metatype _eltSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementSpec,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElementSpec,0}};
#define boxvar_InteractiveUtil_transformFlatElementSpec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementSpec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElement(threadData_t *threadData, modelica_metatype _elt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElement,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElement,0}};
#define boxvar_InteractiveUtil_transformFlatElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementItem(threadData_t *threadData, modelica_metatype _eitem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementItem,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElementItem,0}};
#define boxvar_InteractiveUtil_transformFlatElementItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatClassDef(threadData_t *threadData, modelica_metatype _cdef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatClassDef,2,0) {(void*) boxptr_InteractiveUtil_transformFlatClassDef,0}};
#define boxvar_InteractiveUtil_transformFlatClassDef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatClassDef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatClass(threadData_t *threadData, modelica_metatype _inTuple);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatClass,2,0) {(void*) boxptr_InteractiveUtil_transformFlatClass,0}};
#define boxvar_InteractiveUtil_transformFlatClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getSurroundingPackage(threadData_t *threadData, modelica_metatype _classpath, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getSurroundingPackage,2,0) {(void*) boxptr_InteractiveUtil_getSurroundingPackage,0}};
#define boxvar_InteractiveUtil_getSurroundingPackage MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getSurroundingPackage)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeClassDiffFiledInElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_string _inFilename);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeClassDiffFiledInElementitemlist,2,0) {(void*) boxptr_InteractiveUtil_removeClassDiffFiledInElementitemlist,0}};
#define boxvar_InteractiveUtil_removeClassDiffFiledInElementitemlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeClassDiffFiledInElementitemlist)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classIsInFile(threadData_t *threadData, modelica_string _inFilename, modelica_metatype _inElement);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classIsInFile(threadData_t *threadData, modelica_metatype _inFilename, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_classIsInFile,2,0) {(void*) boxptr_InteractiveUtil_classIsInFile,0}};
#define boxvar_InteractiveUtil_classIsInFile MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_classIsInFile)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerDiffFiledClass(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerDiffFiledClass,2,0) {(void*) boxptr_InteractiveUtil_removeInnerDiffFiledClass,0}};
#define boxvar_InteractiveUtil_removeInnerDiffFiledClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerDiffFiledClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerDiffFiledClasses(threadData_t *threadData, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerDiffFiledClasses,2,0) {(void*) boxptr_InteractiveUtil_removeInnerDiffFiledClasses,0}};
#define boxvar_InteractiveUtil_removeInnerDiffFiledClasses MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerDiffFiledClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_namedargToModification(threadData_t *threadData, modelica_metatype _inNamedArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_namedargToModification,2,0) {(void*) boxptr_InteractiveUtil_namedargToModification,0}};
#define boxvar_InteractiveUtil_namedargToModification MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_namedargToModification)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_recordConstructorToModification(threadData_t *threadData, modelica_metatype _inExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_recordConstructorToModification,2,0) {(void*) boxptr_InteractiveUtil_recordConstructorToModification,0}};
#define boxvar_InteractiveUtil_recordConstructorToModification MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_recordConstructorToModification)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_annotationListToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_annotationListToAbsyn,2,0) {(void*) boxptr_InteractiveUtil_annotationListToAbsyn,0}};
#define boxvar_InteractiveUtil_annotationListToAbsyn MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_annotationListToAbsyn)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_commentToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_commentToAbsyn,2,0) {(void*) boxptr_InteractiveUtil_commentToAbsyn,0}};
#define boxvar_InteractiveUtil_commentToAbsyn MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_commentToAbsyn)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_annotationListToAbsynComment2(threadData_t *threadData, modelica_metatype _inNamedArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_annotationListToAbsynComment2,2,0) {(void*) boxptr_InteractiveUtil_annotationListToAbsynComment2,0}};
#define boxvar_InteractiveUtil_annotationListToAbsynComment2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_annotationListToAbsynComment2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_annotationListToAbsynComment(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inAbsynCommentOption);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_annotationListToAbsynComment,2,0) {(void*) boxptr_InteractiveUtil_annotationListToAbsynComment,0}};
#define boxvar_InteractiveUtil_annotationListToAbsynComment MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_annotationListToAbsynComment)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_selectAnnotation(threadData_t *threadData, modelica_metatype _newAnn, modelica_metatype _oldAnn);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_selectAnnotation,2,0) {(void*) boxptr_InteractiveUtil_selectAnnotation,0}};
#define boxvar_InteractiveUtil_selectAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_selectAnnotation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_modificationToAbsyn2(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_modificationToAbsyn2,2,0) {(void*) boxptr_InteractiveUtil_modificationToAbsyn2,0}};
#define boxvar_InteractiveUtil_modificationToAbsyn2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_modificationToAbsyn2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_modificationToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inAbsynModificationOption);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_modificationToAbsyn,2,0) {(void*) boxptr_InteractiveUtil_modificationToAbsyn,0}};
#define boxvar_InteractiveUtil_modificationToAbsyn MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_modificationToAbsyn)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformPathedClassInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_fnptr _inFunc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformPathedClassInClass,2,0) {(void*) boxptr_InteractiveUtil_transformPathedClassInClass,0}};
#define boxvar_InteractiveUtil_transformPathedClassInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformPathedClassInClass)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_compareClassName(threadData_t *threadData, modelica_metatype _cl, modelica_string _str);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_compareClassName(threadData_t *threadData, modelica_metatype _cl, modelica_metatype _str);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_compareClassName,2,0) {(void*) boxptr_InteractiveUtil_compareClassName,0}};
#define boxvar_InteractiveUtil_compareClassName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_compareClassName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassInProgram(threadData_t *threadData, modelica_string _inString, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassInProgram,2,0) {(void*) boxptr_InteractiveUtil_getClassInProgram,0}};
#define boxvar_InteractiveUtil_getClassInProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassInProgram)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInElts,2,0) {(void*) boxptr_InteractiveUtil_getClassesInElts,0}};
#define boxvar_InteractiveUtil_getClassesInElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInElts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInParts,2,0) {(void*) boxptr_InteractiveUtil_getClassesInParts,0}};
#define boxvar_InteractiveUtil_getClassesInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInClass(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInClass,2,0) {(void*) boxptr_InteractiveUtil_getClassesInClass,0}};
#define boxvar_InteractiveUtil_getClassesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassInClass(threadData_t *threadData, modelica_string _inString, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassInClass,2,0) {(void*) boxptr_InteractiveUtil_getClassInClass,0}};
#define boxvar_InteractiveUtil_getClassInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWorkNoThrow(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWorkNoThrow,2,0) {(void*) boxptr_InteractiveUtil_getPathedClassInProgramWorkNoThrow,0}};
#define boxvar_InteractiveUtil_getPathedClassInProgramWorkNoThrow MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWorkNoThrow)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWorkThrow(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWorkThrow,2,0) {(void*) boxptr_InteractiveUtil_getPathedClassInProgramWorkThrow,0}};
#define boxvar_InteractiveUtil_getPathedClassInProgramWorkThrow MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWorkThrow)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWork(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _enclOnErr);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getPathedClassInProgramWork(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _enclOnErr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWork,2,0) {(void*) boxptr_InteractiveUtil_getPathedClassInProgramWork,0}};
#define boxvar_InteractiveUtil_getPathedClassInProgramWork MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWork)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classInProgram(threadData_t *threadData, modelica_string _name, modelica_metatype _p);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classInProgram(threadData_t *threadData, modelica_metatype _name, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_classInProgram,2,0) {(void*) boxptr_InteractiveUtil_classInProgram,0}};
#define boxvar_InteractiveUtil_classInProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_classInProgram)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassFromElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_string _inIdent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassFromElementitemlist,2,0) {(void*) boxptr_InteractiveUtil_getClassFromElementitemlist,0}};
#define boxvar_InteractiveUtil_getClassFromElementitemlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassFromElementitemlist)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInitialAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInitialAlgorithmList,2,0) {(void*) boxptr_InteractiveUtil_getInitialAlgorithmList,0}};
#define boxvar_InteractiveUtil_getInitialAlgorithmList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInitialAlgorithmList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAlgorithmList,2,0) {(void*) boxptr_InteractiveUtil_getAlgorithmList,0}};
#define boxvar_InteractiveUtil_getAlgorithmList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAlgorithmList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInitialEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInitialEquationList,2,0) {(void*) boxptr_InteractiveUtil_getInitialEquationList,0}};
#define boxvar_InteractiveUtil_getInitialEquationList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInitialEquationList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getEquationList,2,0) {(void*) boxptr_InteractiveUtil_getEquationList,0}};
#define boxvar_InteractiveUtil_getEquationList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getEquationList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteProtectedList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteProtectedList,2,0) {(void*) boxptr_InteractiveUtil_deleteProtectedList,0}};
#define boxvar_InteractiveUtil_deleteProtectedList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteProtectedList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deletePublicList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deletePublicList,2,0) {(void*) boxptr_InteractiveUtil_deletePublicList,0}};
#define boxvar_InteractiveUtil_deletePublicList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deletePublicList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInitialAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynAlgorithmItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInitialAlgorithmList,2,0) {(void*) boxptr_InteractiveUtil_replaceInitialAlgorithmList,0}};
#define boxvar_InteractiveUtil_replaceInitialAlgorithmList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInitialAlgorithmList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynAlgorithmItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceAlgorithmList,2,0) {(void*) boxptr_InteractiveUtil_replaceAlgorithmList,0}};
#define boxvar_InteractiveUtil_replaceAlgorithmList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceAlgorithmList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInitialEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynEquationItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInitialEquationList,2,0) {(void*) boxptr_InteractiveUtil_replaceInitialEquationList,0}};
#define boxvar_InteractiveUtil_replaceInitialEquationList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInitialEquationList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynEquationItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceEquationList,2,0) {(void*) boxptr_InteractiveUtil_replaceEquationList,0}};
#define boxvar_InteractiveUtil_replaceEquationList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceEquationList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceProtectedList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceProtectedList,2,0) {(void*) boxptr_InteractiveUtil_replaceProtectedList,0}};
#define boxvar_InteractiveUtil_replaceProtectedList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceProtectedList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replacePublicList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replacePublicList,2,0) {(void*) boxptr_InteractiveUtil_replacePublicList,0}};
#define boxvar_InteractiveUtil_replacePublicList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replacePublicList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInnerClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inIdent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInnerClass,2,0) {(void*) boxptr_InteractiveUtil_getInnerClass,0}};
#define boxvar_InteractiveUtil_getInnerClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInnerClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_addClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_addClassInElementitemlist,2,0) {(void*) boxptr_InteractiveUtil_addClassInElementitemlist,0}};
#define boxvar_InteractiveUtil_addClassInElementitemlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_addClassInElementitemlist)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass, modelica_boolean _mergeAST, modelica_boolean *out_replaced);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass, modelica_metatype _mergeAST, modelica_metatype *out_replaced);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInElementitemlist,2,0) {(void*) boxptr_InteractiveUtil_replaceClassInElementitemlist,0}};
#define boxvar_InteractiveUtil_replaceClassInElementitemlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInElementitemlist)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_boolean _mergeAST);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _mergeAST);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInnerClass,2,0) {(void*) boxptr_InteractiveUtil_replaceInnerClass,0}};
#define boxvar_InteractiveUtil_replaceInnerClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInnerClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeClassInElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeClassInElementitemlist,2,0) {(void*) boxptr_InteractiveUtil_removeClassInElementitemlist,0}};
#define boxvar_InteractiveUtil_removeClassInElementitemlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeClassInElementitemlist)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classElementItemIsNamed(threadData_t *threadData, modelica_string _inClassName, modelica_metatype _inElement);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classElementItemIsNamed(threadData_t *threadData, modelica_metatype _inClassName, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_classElementItemIsNamed,2,0) {(void*) boxptr_InteractiveUtil_classElementItemIsNamed,0}};
#define boxvar_InteractiveUtil_classElementItemIsNamed MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_classElementItemIsNamed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerClass,2,0) {(void*) boxptr_InteractiveUtil_removeInnerClass,0}};
#define boxvar_InteractiveUtil_removeInnerClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getFirstIdentFromPath(threadData_t *threadData, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFirstIdentFromPath,2,0) {(void*) boxptr_InteractiveUtil_getFirstIdentFromPath,0}};
#define boxvar_InteractiveUtil_getFirstIdentFromPath MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFirstIdentFromPath)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inWithin2, modelica_metatype _inClass3, modelica_boolean _mergeAST);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_insertClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inWithin2, modelica_metatype _inClass3, modelica_metatype _mergeAST);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertClassInClass,2,0) {(void*) boxptr_InteractiveUtil_insertClassInClass,0}};
#define boxvar_InteractiveUtil_insertClassInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertClassInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inWithin, modelica_metatype _inProgram, modelica_boolean _mergeAST);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_insertClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inWithin, modelica_metatype _inProgram, modelica_metatype _mergeAST);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertClassInProgram,2,0) {(void*) boxptr_InteractiveUtil_insertClassInProgram,0}};
#define boxvar_InteractiveUtil_insertClassInProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertClassInProgram)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_boolean _mergeAST);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _mergeAST);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInProgram,2,0) {(void*) boxptr_InteractiveUtil_replaceClassInProgram,0}};
#define boxvar_InteractiveUtil_replaceClassInProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInProgram)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_replaceClassInProgram2(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inClassName);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInProgram2(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inClassName);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInProgram2,2,0) {(void*) boxptr_InteractiveUtil_replaceClassInProgram2,0}};
#define boxvar_InteractiveUtil_replaceClassInProgram2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInProgram2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildPath(threadData_t *threadData, modelica_metatype _inWithin, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildPath,2,0) {(void*) boxptr_InteractiveUtil_buildPath,0}};
#define boxvar_InteractiveUtil_buildPath MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildPath)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_addToEquation(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEquationItem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_addToEquation,2,0) {(void*) boxptr_InteractiveUtil_addToEquation,0}};
#define boxvar_InteractiveUtil_addToEquation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_addToEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_addToProtected(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementItem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_addToProtected,2,0) {(void*) boxptr_InteractiveUtil_addToProtected,0}};
#define boxvar_InteractiveUtil_addToProtected MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_addToProtected)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentItemsName(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inQuoteNames);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentItemsName(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inQuoteNames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentItemsName,2,0) {(void*) boxptr_InteractiveUtil_getComponentItemsName,0}};
#define boxvar_InteractiveUtil_getComponentItemsName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentItemsName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentItemsNameAndComment(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inQuoteNames);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentItemsNameAndComment(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inQuoteNames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentItemsNameAndComment,2,0) {(void*) boxptr_InteractiveUtil_getComponentItemsNameAndComment,0}};
#define boxvar_InteractiveUtil_getComponentItemsNameAndComment MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentItemsNameAndComment)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_prefixTypename(threadData_t *threadData, modelica_string _inType, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_prefixTypename,2,0) {(void*) boxptr_InteractiveUtil_prefixTypename,0}};
#define boxvar_InteractiveUtil_prefixTypename MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_prefixTypename)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_suffixInfos(threadData_t *threadData, modelica_metatype _eltInfo, modelica_metatype _idims, modelica_string _typeAd, modelica_string _suffix, modelica_boolean _inQuoteNames);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_suffixInfos(threadData_t *threadData, modelica_metatype _eltInfo, modelica_metatype _idims, modelica_metatype _typeAd, modelica_metatype _suffix, modelica_metatype _inQuoteNames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_suffixInfos,2,0) {(void*) boxptr_InteractiveUtil_suffixInfos,0}};
#define boxvar_InteractiveUtil_suffixInfos MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_suffixInfos)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsDimension(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsDimension,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsDimension,0}};
#define boxvar_InteractiveUtil_getComponentitemsDimension MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsDimension)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrDirectionStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrDirectionStr,2,0) {(void*) boxptr_InteractiveUtil_attrDirectionStr,0}};
#define boxvar_InteractiveUtil_attrDirectionStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrDirectionStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrDimensionStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrDimensionStr,2,0) {(void*) boxptr_InteractiveUtil_attrDimensionStr,0}};
#define boxvar_InteractiveUtil_attrDimensionStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrDimensionStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrVariabilityStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrVariabilityStr,2,0) {(void*) boxptr_InteractiveUtil_attrVariabilityStr,0}};
#define boxvar_InteractiveUtil_attrVariabilityStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrVariabilityStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrParallelismStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrParallelismStr,2,0) {(void*) boxptr_InteractiveUtil_attrParallelismStr,0}};
#define boxvar_InteractiveUtil_attrParallelismStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrParallelismStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrStreamStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrStreamStr,2,0) {(void*) boxptr_InteractiveUtil_attrStreamStr,0}};
#define boxvar_InteractiveUtil_attrStreamStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrStreamStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrFlowStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrFlowStr,2,0) {(void*) boxptr_InteractiveUtil_attrFlowStr,0}};
#define boxvar_InteractiveUtil_attrFlowStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrFlowStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_innerOuterStr(threadData_t *threadData, modelica_metatype _inInnerOuter);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_innerOuterStr,2,0) {(void*) boxptr_InteractiveUtil_innerOuterStr,0}};
#define boxvar_InteractiveUtil_innerOuterStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_innerOuterStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementsInfo2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv, modelica_metatype _acc);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementsInfo2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv, modelica_metatype _acc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsInfo2,2,0) {(void*) boxptr_InteractiveUtil_getElementsInfo2,0}};
#define boxvar_InteractiveUtil_getElementsInfo2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsInfo2)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementsInfo(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementsInfo(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsInfo,2,0) {(void*) boxptr_InteractiveUtil_getElementsInfo,0}};
#define boxvar_InteractiveUtil_getElementsInfo MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsInfo)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_arrayDimensionStr(threadData_t *threadData, modelica_metatype _ad);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_arrayDimensionStr,2,0) {(void*) boxptr_InteractiveUtil_arrayDimensionStr,0}};
#define boxvar_InteractiveUtil_arrayDimensionStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_arrayDimensionStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_boolean _inQuoteNames, modelica_string _inVisibility, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inQuoteNames, modelica_metatype _inVisibility, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementInfo,2,0) {(void*) boxptr_InteractiveUtil_getElementInfo,0}};
#define boxvar_InteractiveUtil_getElementInfo MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementInfo)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementsInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsInElementitems,2,0) {(void*) boxptr_InteractiveUtil_getElementsInElementitems,0}};
#define boxvar_InteractiveUtil_getElementsInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_stripGraphicsAndInteractionModification(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype *out_outAbsynElementArgLst2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_stripGraphicsAndInteractionModification,2,0) {(void*) boxptr_InteractiveUtil_stripGraphicsAndInteractionModification,0}};
#define boxvar_InteractiveUtil_stripGraphicsAndInteractionModification MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_stripGraphicsAndInteractionModification)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAnnotationString(threadData_t *threadData, modelica_metatype _inAnnotation, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationString,2,0) {(void*) boxptr_InteractiveUtil_getAnnotationString,0}};
#define boxvar_InteractiveUtil_getAnnotationString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildEnvForGraphicProgramFull(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inModelPath, modelica_metatype *out_outEnv, modelica_metatype *out_outProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildEnvForGraphicProgramFull,2,0) {(void*) boxptr_InteractiveUtil_buildEnvForGraphicProgramFull,0}};
#define boxvar_InteractiveUtil_buildEnvForGraphicProgramFull MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildEnvForGraphicProgramFull)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildEnvForGraphicProgram(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inAnnotationMod, modelica_metatype *out_outEnv, modelica_metatype *out_outGraphicProgram, modelica_metatype *out_outGraphicEnvCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildEnvForGraphicProgram,2,0) {(void*) boxptr_InteractiveUtil_buildEnvForGraphicProgram,0}};
#define boxvar_InteractiveUtil_buildEnvForGraphicProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildEnvForGraphicProgram)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsModification(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsModification,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsModification,0}};
#define boxvar_InteractiveUtil_getComponentitemsModification MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsModification)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsAnnotation(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsAnnotation,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsAnnotation,0}};
#define boxvar_InteractiveUtil_getComponentitemsAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsAnnotation)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentAnnotation(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentAnnotation,2,0) {(void*) boxptr_InteractiveUtil_getComponentAnnotation,0}};
#define boxvar_InteractiveUtil_getComponentAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentAnnotation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsFromItems(threadData_t *threadData, modelica_metatype _inComponentItems, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsFromItems,2,0) {(void*) boxptr_InteractiveUtil_getElementitemsAnnotationsFromItems,0}};
#define boxvar_InteractiveUtil_getElementitemsAnnotationsFromItems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsFromItems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsElArgs(threadData_t *threadData, modelica_metatype _inElementArgs, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsElArgs,2,0) {(void*) boxptr_InteractiveUtil_getElementitemsAnnotationsElArgs,0}};
#define boxvar_InteractiveUtil_getElementitemsAnnotationsElArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsElArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAnnotationsFromConstraintClass(threadData_t *threadData, modelica_metatype _inCC);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationsFromConstraintClass,2,0) {(void*) boxptr_InteractiveUtil_getAnnotationsFromConstraintClass,0}};
#define boxvar_InteractiveUtil_getAnnotationsFromConstraintClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationsFromConstraintClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsFromElArgs(threadData_t *threadData, modelica_metatype _inAnnotations, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsFromElArgs,2,0) {(void*) boxptr_InteractiveUtil_getElementitemsAnnotationsFromElArgs,0}};
#define boxvar_InteractiveUtil_getElementitemsAnnotationsFromElArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsFromElArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotations(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotations,2,0) {(void*) boxptr_InteractiveUtil_getElementitemsAnnotations,0}};
#define boxvar_InteractiveUtil_getElementitemsAnnotations MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotations)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementAnnotationsFromElts(threadData_t *threadData, modelica_metatype _els, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementAnnotationsFromElts,2,0) {(void*) boxptr_InteractiveUtil_getElementAnnotationsFromElts,0}};
#define boxvar_InteractiveUtil_getElementAnnotationsFromElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementAnnotationsFromElts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionsInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionsInEquations,2,0) {(void*) boxptr_InteractiveUtil_getConnectionsInEquations,0}};
#define boxvar_InteractiveUtil_getConnectionsInEquations MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionsInEquations)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionsInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionsInClassparts,2,0) {(void*) boxptr_InteractiveUtil_getConnectionsInClassparts,0}};
#define boxvar_InteractiveUtil_getConnectionsInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionsInClassparts)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getConnectionStr(threadData_t *threadData, modelica_metatype _inEquation, modelica_string *out_outToString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionStr,2,0) {(void*) boxptr_InteractiveUtil_getConnectionStr,0}};
#define boxvar_InteractiveUtil_getConnectionStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNthConnectionitemInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_integer _inInteger);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnectionitemInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_metatype _inInteger);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnectionitemInEquations,2,0) {(void*) boxptr_InteractiveUtil_getNthConnectionitemInEquations,0}};
#define boxvar_InteractiveUtil_getNthConnectionitemInEquations MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnectionitemInEquations)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getConnectionAnnotationStr(threadData_t *threadData, modelica_metatype _inEquationItem, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionAnnotationStr,2,0) {(void*) boxptr_InteractiveUtil_getConnectionAnnotationStr,0}};
#define boxvar_InteractiveUtil_getConnectionAnnotationStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionAnnotationStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionAnnotationStrElArgs(threadData_t *threadData, modelica_metatype _inElArgLst, modelica_metatype _info, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionAnnotationStrElArgs,2,0) {(void*) boxptr_InteractiveUtil_getConnectionAnnotationStrElArgs,0}};
#define boxvar_InteractiveUtil_getConnectionAnnotationStrElArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionAnnotationStrElArgs)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inAbsynElementItemLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countConnectors,2,0) {(void*) boxptr_InteractiveUtil_countConnectors,0}};
#define boxvar_InteractiveUtil_countConnectors MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countConnectors)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countPublicConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countPublicConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countPublicConnectors,2,0) {(void*) boxptr_InteractiveUtil_countPublicConnectors,0}};
#define boxvar_InteractiveUtil_countPublicConnectors MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countPublicConnectors)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthCompname(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_integer _inInteger);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthCompname(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inInteger);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthCompname,2,0) {(void*) boxptr_InteractiveUtil_getNthCompname,0}};
#define boxvar_InteractiveUtil_getNthCompname MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthCompname)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthConnectorStr(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_integer _inInteger, modelica_metatype *out_outPath);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnectorStr(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inInteger, modelica_metatype *out_outPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnectorStr,2,0) {(void*) boxptr_InteractiveUtil_getNthConnectorStr,0}};
#define boxvar_InteractiveUtil_getNthConnectorStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnectorStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthPublicConnectorStr(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_integer _inInteger, modelica_metatype *out_outPath);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthPublicConnectorStr(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _inInteger, modelica_metatype *out_outPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthPublicConnectorStr,2,0) {(void*) boxptr_InteractiveUtil_getNthPublicConnectorStr,0}};
#define boxvar_InteractiveUtil_getNthPublicConnectorStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthPublicConnectorStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationInfoHeader(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationInfoHeader,2,0) {(void*) boxptr_InteractiveUtil_getDocumentationAnnotationInfoHeader,0}};
#define boxvar_InteractiveUtil_getDocumentationAnnotationInfoHeader MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationInfoHeader)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationRevision(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationRevision,2,0) {(void*) boxptr_InteractiveUtil_getDocumentationAnnotationRevision,0}};
#define boxvar_InteractiveUtil_getDocumentationAnnotationRevision MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationRevision)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationInfo(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationInfo,2,0) {(void*) boxptr_InteractiveUtil_getDocumentationAnnotationInfo,0}};
#define boxvar_InteractiveUtil_getDocumentationAnnotationInfo MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationInfo)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExperimentAnnotationString2(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExperimentAnnotationString2,2,0) {(void*) boxptr_InteractiveUtil_getExperimentAnnotationString2,0}};
#define boxvar_InteractiveUtil_getExperimentAnnotationString2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExperimentAnnotationString2)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentPrefixes(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentPrefixes,2,0) {(void*) boxptr_InteractiveUtil_getDefaultComponentPrefixes,0}};
#define boxvar_InteractiveUtil_getDefaultComponentPrefixes MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentPrefixes)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentNameModStr(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentNameModStr,2,0) {(void*) boxptr_InteractiveUtil_getDefaultComponentNameModStr,0}};
#define boxvar_InteractiveUtil_getDefaultComponentNameModStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentNameModStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentName(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentName,2,0) {(void*) boxptr_InteractiveUtil_getDefaultComponentName,0}};
#define boxvar_InteractiveUtil_getDefaultComponentName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentName)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationClassAnnotationModStr(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationClassAnnotationModStr,2,0) {(void*) boxptr_InteractiveUtil_getDocumentationClassAnnotationModStr,0}};
#define boxvar_InteractiveUtil_getDocumentationClassAnnotationModStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationClassAnnotationModStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAnnotationStr(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _annotationType, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationStr,2,0) {(void*) boxptr_InteractiveUtil_getAnnotationStr,0}};
#define boxvar_InteractiveUtil_getAnnotationStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationStr)
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_containAnnotation(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _annotationType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_containAnnotation,2,0) {(void*) boxptr_InteractiveUtil_containAnnotation,0}};
#define boxvar_InteractiveUtil_containAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_containAnnotation)
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_isAnnotationType(threadData_t *threadData, modelica_string _annotationStr, modelica_metatype _annotationType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isAnnotationType,2,0) {(void*) boxptr_InteractiveUtil_isAnnotationType,0}};
#define boxvar_InteractiveUtil_isAnnotationType MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isAnnotationType)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAnnotationInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _annotationType, modelica_metatype _inProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationInClass,2,0) {(void*) boxptr_InteractiveUtil_getAnnotationInClass,0}};
#define boxvar_InteractiveUtil_getAnnotationInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationInClass)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClassesFromElts,2,0) {(void*) boxptr_InteractiveUtil_countBaseClassesFromElts,0}};
#define boxvar_InteractiveUtil_countBaseClassesFromElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClassesFromElts)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClassesFromParts,2,0) {(void*) boxptr_InteractiveUtil_countBaseClassesFromParts,0}};
#define boxvar_InteractiveUtil_countBaseClassesFromParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClassesFromParts)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClasses(threadData_t *threadData, modelica_metatype _inClass);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClasses(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClasses,2,0) {(void*) boxptr_InteractiveUtil_countBaseClasses,0}};
#define boxvar_InteractiveUtil_countBaseClasses MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassesFromElts,2,0) {(void*) boxptr_InteractiveUtil_getBaseClassesFromElts,0}};
#define boxvar_InteractiveUtil_getBaseClassesFromElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassesFromElts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassesFromParts,2,0) {(void*) boxptr_InteractiveUtil_getBaseClassesFromParts,0}};
#define boxvar_InteractiveUtil_getBaseClassesFromParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassesFromParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClasses(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClasses,2,0) {(void*) boxptr_InteractiveUtil_getBaseClasses,0}};
#define boxvar_InteractiveUtil_getBaseClasses MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClass,2,0) {(void*) boxptr_InteractiveUtil_getClassnamesInClass,0}};
#define boxvar_InteractiveUtil_getClassnamesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getTopQualifiedClassnames(threadData_t *threadData, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getTopQualifiedClassnames,2,0) {(void*) boxptr_InteractiveUtil_getTopQualifiedClassnames,0}};
#define boxvar_InteractiveUtil_getTopQualifiedClassnames MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getTopQualifiedClassnames)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInElts,2,0) {(void*) boxptr_InteractiveUtil_getPackagesInElts,0}};
#define boxvar_InteractiveUtil_getPackagesInElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInElts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInParts,2,0) {(void*) boxptr_InteractiveUtil_getPackagesInParts,0}};
#define boxvar_InteractiveUtil_getPackagesInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInClass,2,0) {(void*) boxptr_InteractiveUtil_getPackagesInClass,0}};
#define boxvar_InteractiveUtil_getPackagesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getTopPackagesInProgram(threadData_t *threadData, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getTopPackagesInProgram,2,0) {(void*) boxptr_InteractiveUtil_getTopPackagesInProgram,0}};
#define boxvar_InteractiveUtil_getTopPackagesInProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getTopPackagesInProgram)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getIconAnnotation(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getIconAnnotation,2,0) {(void*) boxptr_InteractiveUtil_getIconAnnotation,0}};
#define boxvar_InteractiveUtil_getIconAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getIconAnnotation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getUsesAnnotationString2(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getUsesAnnotationString2,2,0) {(void*) boxptr_InteractiveUtil_getUsesAnnotationString2,0}};
#define boxvar_InteractiveUtil_getUsesAnnotationString2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getUsesAnnotationString2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getUsesAnnotationString(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getUsesAnnotationString,2,0) {(void*) boxptr_InteractiveUtil_getUsesAnnotationString,0}};
#define boxvar_InteractiveUtil_getUsesAnnotationString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getUsesAnnotationString)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDiagramAnnotation(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDiagramAnnotation,2,0) {(void*) boxptr_InteractiveUtil_getDiagramAnnotation,0}};
#define boxvar_InteractiveUtil_getDiagramAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDiagramAnnotation)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthConnectorIconAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_integer _inInteger);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnectorIconAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_metatype _inInteger);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnectorIconAnnotation,2,0) {(void*) boxptr_InteractiveUtil_getNthConnectorIconAnnotation,0}};
#define boxvar_InteractiveUtil_getNthConnectorIconAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnectorIconAnnotation)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthConnector(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_integer _inInteger);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnector(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_metatype _inInteger);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnector,2,0) {(void*) boxptr_InteractiveUtil_getNthConnector,0}};
#define boxvar_InteractiveUtil_getNthConnector MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnector)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getConnectorCount(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectorCount,2,0) {(void*) boxptr_InteractiveUtil_getConnectorCount,0}};
#define boxvar_InteractiveUtil_getConnectorCount MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectorCount)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthConnectionAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_integer _inInteger);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnectionAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_metatype _inInteger);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnectionAnnotation,2,0) {(void*) boxptr_InteractiveUtil_getNthConnectionAnnotation,0}};
#define boxvar_InteractiveUtil_getNthConnectionAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnectionAnnotation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInEquations,2,0) {(void*) boxptr_InteractiveUtil_setConnectionCommentInEquations,0}};
#define boxvar_InteractiveUtil_setConnectionCommentInEquations MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInEquations)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInParts,2,0) {(void*) boxptr_InteractiveUtil_setConnectionCommentInParts,0}};
#define boxvar_InteractiveUtil_setConnectionCommentInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInClass,2,0) {(void*) boxptr_InteractiveUtil_setConnectionCommentInClass,0}};
#define boxvar_InteractiveUtil_setConnectionCommentInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionComment(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4, modelica_metatype _inProgram5, modelica_string *out_outString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionComment,2,0) {(void*) boxptr_InteractiveUtil_setConnectionComment,0}};
#define boxvar_InteractiveUtil_setConnectionComment MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionComment)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inComponentRef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInCompitems,2,0) {(void*) boxptr_InteractiveUtil_setComponentCommentInCompitems,0}};
#define boxvar_InteractiveUtil_setComponentCommentInCompitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInCompitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inComponentRef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInElementspec,2,0) {(void*) boxptr_InteractiveUtil_setComponentCommentInElementspec,0}};
#define boxvar_InteractiveUtil_setComponentCommentInElementspec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInElementspec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponentRef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInElementitems,2,0) {(void*) boxptr_InteractiveUtil_setComponentCommentInElementitems,0}};
#define boxvar_InteractiveUtil_setComponentCommentInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponentRef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInParts,2,0) {(void*) boxptr_InteractiveUtil_setComponentCommentInParts,0}};
#define boxvar_InteractiveUtil_setComponentCommentInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentRef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInClass,2,0) {(void*) boxptr_InteractiveUtil_setComponentCommentInClass,0}};
#define boxvar_InteractiveUtil_setComponentCommentInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_setComponentComment(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_string _inString3, modelica_metatype _inProgram4, modelica_metatype *out_outProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentComment,2,0) {(void*) boxptr_InteractiveUtil_setComponentComment,0}};
#define boxvar_InteractiveUtil_setComponentComment MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentComment)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getClassCommentInCommentOpt(threadData_t *threadData, modelica_metatype _inComment);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassCommentInCommentOpt,2,0) {(void*) boxptr_InteractiveUtil_getClassCommentInCommentOpt,0}};
#define boxvar_InteractiveUtil_getClassCommentInCommentOpt MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassCommentInCommentOpt)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInCompitems,2,0) {(void*) boxptr_InteractiveUtil_getComponentCommentInCompitems,0}};
#define boxvar_InteractiveUtil_getComponentCommentInCompitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInCompitems)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInElementspec,2,0) {(void*) boxptr_InteractiveUtil_getComponentCommentInElementspec,0}};
#define boxvar_InteractiveUtil_getComponentCommentInElementspec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInElementspec)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInElementitems,2,0) {(void*) boxptr_InteractiveUtil_getComponentCommentInElementitems,0}};
#define boxvar_InteractiveUtil_getComponentCommentInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInElementitems)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInParts,2,0) {(void*) boxptr_InteractiveUtil_getComponentCommentInParts,0}};
#define boxvar_InteractiveUtil_getComponentCommentInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInParts)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInClass,2,0) {(void*) boxptr_InteractiveUtil_getComponentCommentInClass,0}};
#define boxvar_InteractiveUtil_getComponentCommentInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentComment(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inProgram4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentComment,2,0) {(void*) boxptr_InteractiveUtil_getComponentComment,0}};
#define boxvar_InteractiveUtil_getComponentComment MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentComment)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_compareTransitionFuncArgs(threadData_t *threadData, modelica_metatype _args, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_compareTransitionFuncArgs(threadData_t *threadData, modelica_metatype _args, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_compareTransitionFuncArgs,2,0) {(void*) boxptr_InteractiveUtil_compareTransitionFuncArgs,0}};
#define boxvar_InteractiveUtil_compareTransitionFuncArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_compareTransitionFuncArgs)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_namedArgValueAsString(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_string _inNamedArg, modelica_string _inDefaultValue, modelica_boolean *out_outDefault);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_namedArgValueAsString(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inNamedArg, modelica_metatype _inDefaultValue, modelica_metatype *out_outDefault);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_namedArgValueAsString,2,0) {(void*) boxptr_InteractiveUtil_namedArgValueAsString,0}};
#define boxvar_InteractiveUtil_namedArgValueAsString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_namedArgValueAsString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteTransitionInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteTransitionInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteTransitionInEqlist,2,0) {(void*) boxptr_InteractiveUtil_deleteTransitionInEqlist,0}};
#define boxvar_InteractiveUtil_deleteTransitionInEqlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteTransitionInEqlist)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteTransitionInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteTransitionInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteTransitionInClass,2,0) {(void*) boxptr_InteractiveUtil_deleteTransitionInClass,0}};
#define boxvar_InteractiveUtil_deleteTransitionInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteTransitionInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteEquationInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteEquationInEqlist,2,0) {(void*) boxptr_InteractiveUtil_deleteEquationInEqlist,0}};
#define boxvar_InteractiveUtil_deleteEquationInEqlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteEquationInEqlist)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteEquationInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteEquationInClass,2,0) {(void*) boxptr_InteractiveUtil_deleteEquationInClass,0}};
#define boxvar_InteractiveUtil_deleteEquationInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteEquationInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_deleteConnection(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inProgram4, modelica_metatype *out_outProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteConnection,2,0) {(void*) boxptr_InteractiveUtil_deleteConnection,0}};
#define boxvar_InteractiveUtil_deleteConnection MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteConnection)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_addConnection(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inAbsynNamedArgLst4, modelica_metatype _inProgram5, modelica_metatype *out_outProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_addConnection,2,0) {(void*) boxptr_InteractiveUtil_addConnection,0}};
#define boxvar_InteractiveUtil_addConnection MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_addConnection)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsCondition(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsCondition,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsCondition,0}};
#define boxvar_InteractiveUtil_getComponentitemsCondition MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsCondition)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCondition(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCondition,2,0) {(void*) boxptr_InteractiveUtil_getComponentCondition,0}};
#define boxvar_InteractiveUtil_getComponentCondition MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCondition)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElements2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_boolean _inBoolean, modelica_integer _inAccess);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElements2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inBoolean, modelica_metatype _inAccess);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElements2,2,0) {(void*) boxptr_InteractiveUtil_getElements2,0}};
#define boxvar_InteractiveUtil_getElements2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElements2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertQuotesToList(threadData_t *threadData, modelica_metatype _inStringList);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertQuotesToList,2,0) {(void*) boxptr_InteractiveUtil_insertQuotesToList,0}};
#define boxvar_InteractiveUtil_insertQuotesToList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertQuotesToList)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_useQuotes(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_useQuotes(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_useQuotes,2,0) {(void*) boxptr_InteractiveUtil_useQuotes,0}};
#define boxvar_InteractiveUtil_useQuotes MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_useQuotes)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClass2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_integer _inInteger3, modelica_metatype _inEnv4);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClass2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _inInteger3, modelica_metatype _inEnv4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClass2,2,0) {(void*) boxptr_InteractiveUtil_getNthInheritedClass2,0}};
#define boxvar_InteractiveUtil_getNthInheritedClass2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClass2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInElementitems,2,0) {(void*) boxptr_InteractiveUtil_getExtendsInElementitems,0}};
#define boxvar_InteractiveUtil_getExtendsInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInParts,2,0) {(void*) boxptr_InteractiveUtil_getExtendsInParts,0}};
#define boxvar_InteractiveUtil_getExtendsInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInClass(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInClass,2,0) {(void*) boxptr_InteractiveUtil_getExtendsInClass,0}};
#define boxvar_InteractiveUtil_getExtendsInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClassMapAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_integer _inInteger, modelica_metatype _inProgram, modelica_string _inMapType);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClassMapAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inInteger, modelica_metatype _inProgram, modelica_metatype _inMapType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClassMapAnnotation,2,0) {(void*) boxptr_InteractiveUtil_getNthInheritedClassMapAnnotation,0}};
#define boxvar_InteractiveUtil_getNthInheritedClassMapAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClassMapAnnotation)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getMapAnnotationStr(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_string _inMapType, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getMapAnnotationStr,2,0) {(void*) boxptr_InteractiveUtil_getMapAnnotationStr,0}};
#define boxvar_InteractiveUtil_getMapAnnotationStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getMapAnnotationStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData_t *threadData, modelica_metatype _inModelPath, modelica_integer _inInteger, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype *out_annotationOpt);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inInteger, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype *out_annotationOpt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClassAnnotationOpt,2,0) {(void*) boxptr_InteractiveUtil_getNthInheritedClassAnnotationOpt,0}};
#define boxvar_InteractiveUtil_getNthInheritedClassAnnotationOpt MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClassAnnotationOpt)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_integer _inInteger);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inInteger);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClass,2,0) {(void*) boxptr_InteractiveUtil_getNthInheritedClass,0}};
#define boxvar_InteractiveUtil_getNthInheritedClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClass)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_getInheritanceCount(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getInheritanceCount(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInheritanceCount,2,0) {(void*) boxptr_InteractiveUtil_getInheritanceCount,0}};
#define boxvar_InteractiveUtil_getInheritanceCount MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInheritanceCount)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInheritedClassesHelper(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _inEnv4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInheritedClassesHelper,2,0) {(void*) boxptr_InteractiveUtil_getInheritedClassesHelper,0}};
#define boxvar_InteractiveUtil_getInheritedClassesHelper MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInheritedClassesHelper)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateComponent(threadData_t *threadData, modelica_string _inString1, modelica_metatype _inTypeCref, modelica_metatype _inComponentRef3, modelica_metatype _inAbsynNamedArgLst4, modelica_metatype _inProgram5, modelica_string *out_outString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateComponent,2,0) {(void*) boxptr_InteractiveUtil_updateComponent,0}};
#define boxvar_InteractiveUtil_updateComponent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateComponent)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentPrefixesModStr(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentPrefixesModStr,2,0) {(void*) boxptr_InteractiveUtil_getDefaultComponentPrefixesModStr,0}};
#define boxvar_InteractiveUtil_getDefaultComponentPrefixesModStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentPrefixesModStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultAttr(threadData_t *threadData, modelica_string _str);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultAttr,2,0) {(void*) boxptr_InteractiveUtil_getDefaultAttr,0}};
#define boxvar_InteractiveUtil_getDefaultAttr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultAttr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultReplaceable(threadData_t *threadData, modelica_string _str);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultReplaceable,2,0) {(void*) boxptr_InteractiveUtil_getDefaultReplaceable,0}};
#define boxvar_InteractiveUtil_getDefaultReplaceable MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultReplaceable)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultInnerOuter(threadData_t *threadData, modelica_string _str);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultInnerOuter,2,0) {(void*) boxptr_InteractiveUtil_getDefaultInnerOuter,0}};
#define boxvar_InteractiveUtil_getDefaultInnerOuter MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultInnerOuter)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeReplaceableIfPartial(threadData_t *threadData, modelica_metatype _p, modelica_metatype _className, modelica_metatype _redecl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeReplaceableIfPartial,2,0) {(void*) boxptr_InteractiveUtil_makeReplaceableIfPartial,0}};
#define boxvar_InteractiveUtil_makeReplaceableIfPartial MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeReplaceableIfPartial)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultPrefixes(threadData_t *threadData, modelica_metatype _p, modelica_metatype _className, modelica_metatype *out_redecl, modelica_metatype *out_attr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultPrefixes,2,0) {(void*) boxptr_InteractiveUtil_getDefaultPrefixes,0}};
#define boxvar_InteractiveUtil_getDefaultPrefixes MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultPrefixes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData_t *threadData, modelica_string _inString, modelica_metatype _inAbsynElementItemLst, modelica_metatype _item, modelica_boolean *out_success);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData_t *threadData, modelica_metatype _inString, modelica_metatype _inAbsynElementItemLst, modelica_metatype _item, modelica_metatype *out_success);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteOrUpdateComponentFromElementitems,2,0) {(void*) boxptr_InteractiveUtil_deleteOrUpdateComponentFromElementitems,0}};
#define boxvar_InteractiveUtil_deleteOrUpdateComponentFromElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteOrUpdateComponentFromElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponentFromClass(threadData_t *threadData, modelica_string _inString, modelica_metatype _inClass, modelica_metatype _item);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteOrUpdateComponentFromClass,2,0) {(void*) boxptr_InteractiveUtil_deleteOrUpdateComponentFromClass,0}};
#define boxvar_InteractiveUtil_deleteOrUpdateComponentFromClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteOrUpdateComponentFromClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponent(threadData_t *threadData, modelica_string _inString, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype _item);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteOrUpdateComponent,2,0) {(void*) boxptr_InteractiveUtil_deleteOrUpdateComponent,0}};
#define boxvar_InteractiveUtil_deleteOrUpdateComponent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteOrUpdateComponent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_lookupClassdef(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2, modelica_metatype _inProgram3, modelica_metatype *out_outPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_lookupClassdef,2,0) {(void*) boxptr_InteractiveUtil_lookupClassdef,0}};
#define boxvar_InteractiveUtil_lookupClassdef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_lookupClassdef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getVariableValueLst(threadData_t *threadData, modelica_metatype _ids, modelica_metatype _vars);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVariableValueLst,2,0) {(void*) boxptr_InteractiveUtil_getVariableValueLst,0}};
#define boxvar_InteractiveUtil_getVariableValueLst MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVariableValueLst)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getVariableValue(threadData_t *threadData, modelica_string _inIdent, modelica_metatype _inVariableLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVariableValue,2,0) {(void*) boxptr_InteractiveUtil_getVariableValue,0}};
#define boxvar_InteractiveUtil_getVariableValue MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVariableValue)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateProgram2(threadData_t *threadData, modelica_metatype _inNewClasses, modelica_metatype _w, modelica_metatype _inOldProgram, modelica_boolean _mergeAST);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_updateProgram2(threadData_t *threadData, modelica_metatype _inNewClasses, modelica_metatype _w, modelica_metatype _inOldProgram, modelica_metatype _mergeAST);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateProgram2,2,0) {(void*) boxptr_InteractiveUtil_updateProgram2,0}};
#define boxvar_InteractiveUtil_updateProgram2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateProgram2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getCompitemNamed(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynComponentItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getCompitemNamed,2,0) {(void*) boxptr_InteractiveUtil_getCompitemNamed,0}};
#define boxvar_InteractiveUtil_getCompitemNamed MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getCompitemNamed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementContainsName,2,0) {(void*) boxptr_InteractiveUtil_getElementContainsName,0}};
#define boxvar_InteractiveUtil_getElementContainsName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementContainsName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsContainsName,2,0) {(void*) boxptr_InteractiveUtil_getComponentsContainsName,0}};
#define boxvar_InteractiveUtil_getComponentsContainsName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsContainsName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemContainsName,2,0) {(void*) boxptr_InteractiveUtil_getElementitemContainsName,0}};
#define boxvar_InteractiveUtil_getElementitemContainsName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemContainsName)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getEnumLiterals(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getEnumLiterals,2,0) {(void*) boxptr_InteractiveUtil_getEnumLiterals,0}};
#define boxvar_InteractiveUtil_getEnumLiterals MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getEnumLiterals)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isProtectedClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inString);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isProtectedClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isProtectedClassInElements,2,0) {(void*) boxptr_InteractiveUtil_isProtectedClassInElements,0}};
#define boxvar_InteractiveUtil_isProtectedClassInElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isProtectedClassInElements)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isReplaceableInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inString);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isReplaceableInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isReplaceableInElements,2,0) {(void*) boxptr_InteractiveUtil_isReplaceableInElements,0}};
#define boxvar_InteractiveUtil_isReplaceableInElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isReplaceableInElements)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isReplaceable(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_string _inString, modelica_metatype _inProgram);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isReplaceable(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inString, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isReplaceable,2,0) {(void*) boxptr_InteractiveUtil_isReplaceable,0}};
#define boxvar_InteractiveUtil_isReplaceable MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isReplaceable)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isConstant(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isConstant(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isConstant,2,0) {(void*) boxptr_InteractiveUtil_isConstant,0}};
#define boxvar_InteractiveUtil_isConstant MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isConstant)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isProtected(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isProtected(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isProtected,2,0) {(void*) boxptr_InteractiveUtil_isProtected,0}};
#define boxvar_InteractiveUtil_isProtected MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isProtected)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isParameter(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isParameter(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isParameter,2,0) {(void*) boxptr_InteractiveUtil_isParameter,0}};
#define boxvar_InteractiveUtil_isParameter MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isParameter)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getClassDimensions(threadData_t *threadData, modelica_metatype _cdef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassDimensions,2,0) {(void*) boxptr_InteractiveUtil_getClassDimensions,0}};
#define boxvar_InteractiveUtil_getClassDimensions MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassDimensions)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getExternalFunctionSpecification(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExternalFunctionSpecification,2,0) {(void*) boxptr_InteractiveUtil_getExternalFunctionSpecification,0}};
#define boxvar_InteractiveUtil_getExternalFunctionSpecification MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExternalFunctionSpecification)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getShortDefinitionBaseClassInformation(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getShortDefinitionBaseClassInformation,2,0) {(void*) boxptr_InteractiveUtil_getShortDefinitionBaseClassInformation,0}};
#define boxvar_InteractiveUtil_getShortDefinitionBaseClassInformation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getShortDefinitionBaseClassInformation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInCommentOpt(threadData_t *threadData, modelica_metatype _inAbsynCommentOption, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInCommentOpt,2,0) {(void*) boxptr_InteractiveUtil_setClassCommentInCommentOpt,0}};
#define boxvar_InteractiveUtil_setClassCommentInCommentOpt MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInCommentOpt)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInClassdef(threadData_t *threadData, modelica_metatype _inClassDef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInClassdef,2,0) {(void*) boxptr_InteractiveUtil_setClassCommentInClassdef,0}};
#define boxvar_InteractiveUtil_setClassCommentInClassdef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInClassdef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInClass,2,0) {(void*) boxptr_InteractiveUtil_setClassCommentInClass,0}};
#define boxvar_InteractiveUtil_setClassCommentInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteClassFromList(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inAbsynClassLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteClassFromList,2,0) {(void*) boxptr_InteractiveUtil_deleteClassFromList,0}};
#define boxvar_InteractiveUtil_deleteClassFromList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteClassFromList)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_deleteClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype *out_outProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteClass,2,0) {(void*) boxptr_InteractiveUtil_deleteClass,0}};
#define boxvar_InteractiveUtil_deleteClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_createModel(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_createModel,2,0) {(void*) boxptr_InteractiveUtil_createModel,0}};
#define boxvar_InteractiveUtil_createModel MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_createModel)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_changeLastIdent(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_changeLastIdent,2,0) {(void*) boxptr_InteractiveUtil_changeLastIdent,0}};
#define boxvar_InteractiveUtil_changeLastIdent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_changeLastIdent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInImport(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInImport(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInImport,2,0) {(void*) boxptr_InteractiveUtil_renameClassInImport,0}};
#define boxvar_InteractiveUtil_renameClassInImport MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInImport)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInElementSpec,2,0) {(void*) boxptr_InteractiveUtil_renameClassInElementSpec,0}};
#define boxvar_InteractiveUtil_renameClassInElementSpec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInElementSpec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInElements,2,0) {(void*) boxptr_InteractiveUtil_renameClassInElements,0}};
#define boxvar_InteractiveUtil_renameClassInElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInParts,2,0) {(void*) boxptr_InteractiveUtil_renameClassInParts,0}};
#define boxvar_InteractiveUtil_renameClassInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInClass,2,0) {(void*) boxptr_InteractiveUtil_renameClassInClass,0}};
#define boxvar_InteractiveUtil_renameClassInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassVisitor,2,0) {(void*) boxptr_InteractiveUtil_renameClassVisitor,0}};
#define boxvar_InteractiveUtil_renameClassVisitor MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassVisitor)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_renameClass(threadData_t *threadData, modelica_metatype _inProgram1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype *out_outProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClass,2,0) {(void*) boxptr_InteractiveUtil_renameClass,0}};
#define boxvar_InteractiveUtil_renameClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsInElement(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsInElement,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsInElement,0}};
#define boxvar_InteractiveUtil_getComponentitemsInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsInElement)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemName(threadData_t *threadData, modelica_metatype _inComponentItem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemName,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemName,0}};
#define boxvar_InteractiveUtil_getComponentitemName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemName)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_componentitemNamed(threadData_t *threadData, modelica_metatype _inComponentItem, modelica_string _inIdent);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_componentitemNamed(threadData_t *threadData, modelica_metatype _inComponentItem, modelica_metatype _inIdent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_componentitemNamed,2,0) {(void*) boxptr_InteractiveUtil_componentitemNamed,0}};
#define boxvar_InteractiveUtil_componentitemNamed MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_componentitemNamed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInCompitems,2,0) {(void*) boxptr_InteractiveUtil_setVariableBindingInCompitems,0}};
#define boxvar_InteractiveUtil_setVariableBindingInCompitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInCompitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInElement,2,0) {(void*) boxptr_InteractiveUtil_setVariableBindingInElement,0}};
#define boxvar_InteractiveUtil_setVariableBindingInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInElementitems,2,0) {(void*) boxptr_InteractiveUtil_setVariableBindingInElementitems,0}};
#define boxvar_InteractiveUtil_setVariableBindingInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInClassparts,2,0) {(void*) boxptr_InteractiveUtil_setVariableBindingInClassparts,0}};
#define boxvar_InteractiveUtil_setVariableBindingInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInClass,2,0) {(void*) boxptr_InteractiveUtil_setVariableBindingInClass,0}};
#define boxvar_InteractiveUtil_setVariableBindingInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setParameterValue(threadData_t *threadData, modelica_metatype _inComponentRefClass, modelica_metatype _inComponentRefComponentName, modelica_metatype _inBindingExp, modelica_metatype _inFullProgram, modelica_string *out_outString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setParameterValue,2,0) {(void*) boxptr_InteractiveUtil_setParameterValue,0}};
#define boxvar_InteractiveUtil_setParameterValue MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setParameterValue)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getVariableBindingInComponentitem(threadData_t *threadData, modelica_metatype _inComponentItem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVariableBindingInComponentitem,2,0) {(void*) boxptr_InteractiveUtil_getVariableBindingInComponentitem,0}};
#define boxvar_InteractiveUtil_getVariableBindingInComponentitem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVariableBindingInComponentitem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getModificationNames(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_boolean _includeRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getModificationNames(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _includeRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getModificationNames,2,0) {(void*) boxptr_InteractiveUtil_getModificationNames,0}};
#define boxvar_InteractiveUtil_getModificationNames MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getModificationNames)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getModificationValues(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getModificationValues,2,0) {(void*) boxptr_InteractiveUtil_getModificationValues,0}};
#define boxvar_InteractiveUtil_getModificationValues MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getModificationValues)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_findPathModification(threadData_t *threadData, modelica_metatype _path, modelica_metatype _lst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_findPathModification(threadData_t *threadData, modelica_metatype _path, modelica_metatype _lst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_findPathModification,2,0) {(void*) boxptr_InteractiveUtil_findPathModification,0}};
#define boxvar_InteractiveUtil_findPathModification MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_findPathModification)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElementargs(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath, modelica_metatype _inModification);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElementargs,2,0) {(void*) boxptr_InteractiveUtil_setSubmodifierInElementargs,0}};
#define boxvar_InteractiveUtil_setSubmodifierInElementargs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElementargs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInClass(threadData_t *threadData, modelica_metatype _inElementName, modelica_metatype _inClass, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInClass,2,0) {(void*) boxptr_InteractiveUtil_setSubmodifierInClass,0}};
#define boxvar_InteractiveUtil_setSubmodifierInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElementSpec(threadData_t *threadData, modelica_metatype _inElementName, modelica_metatype _inElSpec, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElementSpec,2,0) {(void*) boxptr_InteractiveUtil_setSubmodifierInElementSpec,0}};
#define boxvar_InteractiveUtil_setSubmodifierInElementSpec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElementSpec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_boolean _inFound, modelica_metatype _inElementName, modelica_metatype _inMod, modelica_boolean *out_outFound, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inFound, modelica_metatype _inElementName, modelica_metatype _inMod, modelica_metatype *out_outFound, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElement,2,0) {(void*) boxptr_InteractiveUtil_setSubmodifierInElement,0}};
#define boxvar_InteractiveUtil_setSubmodifierInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementSubmodifierInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementName, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementSubmodifierInClass,2,0) {(void*) boxptr_InteractiveUtil_setElementSubmodifierInClass,0}};
#define boxvar_InteractiveUtil_setElementSubmodifierInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementSubmodifierInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_stripModifiersKeepRedeclares(threadData_t *threadData, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_stripModifiersKeepRedeclares,2,0) {(void*) boxptr_InteractiveUtil_stripModifiersKeepRedeclares,0}};
#define boxvar_InteractiveUtil_stripModifiersKeepRedeclares MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_stripModifiersKeepRedeclares)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_clearComponentModifiersInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inFound, modelica_string _inComponentName, modelica_boolean _keepRedeclares, modelica_boolean *out_outFound, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_clearComponentModifiersInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inFound, modelica_metatype _inComponentName, modelica_metatype _keepRedeclares, modelica_metatype *out_outFound, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_clearComponentModifiersInCompitems,2,0) {(void*) boxptr_InteractiveUtil_clearComponentModifiersInCompitems,0}};
#define boxvar_InteractiveUtil_clearComponentModifiersInCompitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_clearComponentModifiersInCompitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_clearComponentModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inComponentName, modelica_boolean _keepRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_clearComponentModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _keepRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_clearComponentModifiersInClass,2,0) {(void*) boxptr_InteractiveUtil_clearComponentModifiersInClass,0}};
#define boxvar_InteractiveUtil_clearComponentModifiersInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_clearComponentModifiersInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInElement(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInElement,2,0) {(void*) boxptr_InteractiveUtil_getExtendsElementspecInElement,0}};
#define boxvar_InteractiveUtil_getExtendsElementspecInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInElementitems,2,0) {(void*) boxptr_InteractiveUtil_getExtendsElementspecInElementitems,0}};
#define boxvar_InteractiveUtil_getExtendsElementspecInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInClassparts,2,0) {(void*) boxptr_InteractiveUtil_getExtendsElementspecInClassparts,0}};
#define boxvar_InteractiveUtil_getExtendsElementspecInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInClass(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInClass,2,0) {(void*) boxptr_InteractiveUtil_getExtendsElementspecInClass,0}};
#define boxvar_InteractiveUtil_getExtendsElementspecInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extendsName(threadData_t *threadData, modelica_metatype _inElementSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extendsName,2,0) {(void*) boxptr_InteractiveUtil_extendsName,0}};
#define boxvar_InteractiveUtil_extendsName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extendsName)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_extendsElementspecNamed(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_extendsElementspecNamed(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extendsElementspecNamed,2,0) {(void*) boxptr_InteractiveUtil_extendsElementspecNamed,0}};
#define boxvar_InteractiveUtil_extendsElementspecNamed MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extendsElementspecNamed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeExtendsFullyQualified(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeExtendsFullyQualified,2,0) {(void*) boxptr_InteractiveUtil_makeExtendsFullyQualified,0}};
#define boxvar_InteractiveUtil_makeExtendsFullyQualified MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeExtendsFullyQualified)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_isExtendsModifierFinal(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inProgram4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isExtendsModifierFinal,2,0) {(void*) boxptr_InteractiveUtil_isExtendsModifierFinal,0}};
#define boxvar_InteractiveUtil_isExtendsModifierFinal MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isExtendsModifierFinal)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getExtendsModifierValue(threadData_t *threadData, modelica_metatype _classRef, modelica_metatype _extendsRef, modelica_metatype _varRef, modelica_metatype _program);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsModifierValue,2,0) {(void*) boxptr_InteractiveUtil_getExtendsModifierValue,0}};
#define boxvar_InteractiveUtil_getExtendsModifierValue MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsModifierValue)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInElement,2,0) {(void*) boxptr_InteractiveUtil_setExtendsSubmodifierInElement,0}};
#define boxvar_InteractiveUtil_setExtendsSubmodifierInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInElementitems,2,0) {(void*) boxptr_InteractiveUtil_setExtendsSubmodifierInElementitems,0}};
#define boxvar_InteractiveUtil_setExtendsSubmodifierInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInClassparts,2,0) {(void*) boxptr_InteractiveUtil_setExtendsSubmodifierInClassparts,0}};
#define boxvar_InteractiveUtil_setExtendsSubmodifierInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInClass,2,0) {(void*) boxptr_InteractiveUtil_setExtendsSubmodifierInClass,0}};
#define boxvar_InteractiveUtil_setExtendsSubmodifierInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsModifierValue(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inModification4, modelica_metatype _inProgram5, modelica_string *out_outString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsModifierValue,2,0) {(void*) boxptr_InteractiveUtil_setExtendsModifierValue,0}};
#define boxvar_InteractiveUtil_setExtendsModifierValue MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsModifierValue)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInElement,2,0) {(void*) boxptr_InteractiveUtil_removeExtendsModifiersInElement,0}};
#define boxvar_InteractiveUtil_removeExtendsModifiersInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInElementitems,2,0) {(void*) boxptr_InteractiveUtil_removeExtendsModifiersInElementitems,0}};
#define boxvar_InteractiveUtil_removeExtendsModifiersInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInClassparts,2,0) {(void*) boxptr_InteractiveUtil_removeExtendsModifiersInClassparts,0}};
#define boxvar_InteractiveUtil_removeExtendsModifiersInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInClass,2,0) {(void*) boxptr_InteractiveUtil_removeExtendsModifiersInClass,0}};
#define boxvar_InteractiveUtil_removeExtendsModifiersInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_appendNonEmptyStrings(threadData_t *threadData, modelica_string _inString1, modelica_string _inString2, modelica_string _inString3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_appendNonEmptyStrings,2,0) {(void*) boxptr_InteractiveUtil_appendNonEmptyStrings,0}};
#define boxvar_InteractiveUtil_appendNonEmptyStrings MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_appendNonEmptyStrings)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getImportString(threadData_t *threadData, modelica_metatype _inImport);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getImportString,2,0) {(void*) boxptr_InteractiveUtil_getImportString,0}};
#define boxvar_InteractiveUtil_getImportString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getImportString)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getCrefInfo(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getCrefInfo,2,0) {(void*) boxptr_InteractiveUtil_getCrefInfo,0}};
#define boxvar_InteractiveUtil_getCrefInfo MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getCrefInfo)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_selectString(threadData_t *threadData, modelica_boolean _inSelector, modelica_string _inString2, modelica_string _inString3);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_selectString(threadData_t *threadData, modelica_metatype _inSelector, modelica_metatype _inString2, modelica_metatype _inString3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_selectString,2,0) {(void*) boxptr_InteractiveUtil_selectString,0}};
#define boxvar_InteractiveUtil_selectString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_selectString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementIsField(threadData_t *threadData, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementIsField,2,0) {(void*) boxptr_InteractiveUtil_setElementIsField,0}};
#define boxvar_InteractiveUtil_setElementIsField MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementIsField)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementCausality(threadData_t *threadData, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementCausality,2,0) {(void*) boxptr_InteractiveUtil_setElementCausality,0}};
#define boxvar_InteractiveUtil_setElementCausality MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementCausality)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementVariability(threadData_t *threadData, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementVariability,2,0) {(void*) boxptr_InteractiveUtil_setElementVariability,0}};
#define boxvar_InteractiveUtil_setElementVariability MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementVariability)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementParallelism(threadData_t *threadData, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementParallelism,2,0) {(void*) boxptr_InteractiveUtil_setElementParallelism,0}};
#define boxvar_InteractiveUtil_setElementParallelism MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementParallelism)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementAttributes(threadData_t *threadData, modelica_metatype _inElementAttributes1, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_string _inString2, modelica_string _inString3, modelica_string _inString4, modelica_string _inString5);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setElementAttributes(threadData_t *threadData, modelica_metatype _inElementAttributes1, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inString2, modelica_metatype _inString3, modelica_metatype _inString4, modelica_metatype _inString5);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementAttributes,2,0) {(void*) boxptr_InteractiveUtil_setElementAttributes,0}};
#define boxvar_InteractiveUtil_setElementAttributes MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementAttributes)
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_itemsContainCompname(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_string _inIdent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_itemsContainCompname,2,0) {(void*) boxptr_InteractiveUtil_itemsContainCompname,0}};
#define boxvar_InteractiveUtil_itemsContainCompname MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_itemsContainCompname)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_string _inIdent2, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_string _inString3, modelica_string _inString4, modelica_string _inString5, modelica_string _inString6);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inIdent2, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inString3, modelica_metatype _inString4, modelica_metatype _inString5, modelica_metatype _inString6);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElementspec,2,0) {(void*) boxptr_InteractiveUtil_setComponentPropertiesInElementspec,0}};
#define boxvar_InteractiveUtil_setComponentPropertiesInElementspec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElementspec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setInnerOuterAttributes(threadData_t *threadData, modelica_metatype _inBooleanLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setInnerOuterAttributes,2,0) {(void*) boxptr_InteractiveUtil_setInnerOuterAttributes,0}};
#define boxvar_InteractiveUtil_setInnerOuterAttributes MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setInnerOuterAttributes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setReplaceableKeywordAttributes(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption, modelica_boolean _inBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setReplaceableKeywordAttributes(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption, modelica_metatype _inBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setReplaceableKeywordAttributes,2,0) {(void*) boxptr_InteractiveUtil_setReplaceableKeywordAttributes,0}};
#define boxvar_InteractiveUtil_setReplaceableKeywordAttributes MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setReplaceableKeywordAttributes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElement(threadData_t *threadData, modelica_metatype _inElement1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inReplaceable, modelica_string _inString5, modelica_string _inString6, modelica_metatype _inBooleanLst7, modelica_string _inString8, modelica_string _inString9);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElement(threadData_t *threadData, modelica_metatype _inElement1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inReplaceable, modelica_metatype _inString5, modelica_metatype _inString6, modelica_metatype _inBooleanLst7, modelica_metatype _inString8, modelica_metatype _inString9);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElement,2,0) {(void*) boxptr_InteractiveUtil_setComponentPropertiesInElement,0}};
#define boxvar_InteractiveUtil_setComponentPropertiesInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inReplaceable, modelica_string _inString5, modelica_string _inString6, modelica_metatype _inBooleanLst7, modelica_string _inString8, modelica_string _inString9);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inReplaceable, modelica_metatype _inString5, modelica_metatype _inString6, modelica_metatype _inBooleanLst7, modelica_metatype _inString8, modelica_metatype _inString9);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElementitems,2,0) {(void*) boxptr_InteractiveUtil_setComponentPropertiesInElementitems,0}};
#define boxvar_InteractiveUtil_setComponentPropertiesInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString6, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_string _inString10);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString6, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inString10);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInClassparts,2,0) {(void*) boxptr_InteractiveUtil_setComponentPropertiesInClassparts,0}};
#define boxvar_InteractiveUtil_setComponentPropertiesInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_string _inString2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString6, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_string _inString10);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inString2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString6, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inString10);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInClass,2,0) {(void*) boxptr_InteractiveUtil_setComponentPropertiesInClass,0}};
#define boxvar_InteractiveUtil_setComponentPropertiesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_setComponentProperties(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inComponentRef2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_metatype _inProgram10, modelica_metatype *out_outProgram);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentProperties(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inComponentRef2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inProgram10, modelica_metatype *out_outProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentProperties,2,0) {(void*) boxptr_InteractiveUtil_setComponentProperties,0}};
#define boxvar_InteractiveUtil_setComponentProperties MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentProperties)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isParameterElement(threadData_t *threadData, modelica_metatype _inElement);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isParameterElement(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isParameterElement,2,0) {(void*) boxptr_InteractiveUtil_isParameterElement,0}};
#define boxvar_InteractiveUtil_isParameterElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isParameterElement)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_dumpComponentsToString(threadData_t *threadData, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_dumpComponentsToString,2,0) {(void*) boxptr_InteractiveUtil_dumpComponentsToString,0}};
#define boxvar_InteractiveUtil_dumpComponentsToString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_dumpComponentsToString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_addComponentToComponents(threadData_t *threadData, modelica_metatype _inComponent, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_addComponentToComponents,2,0) {(void*) boxptr_InteractiveUtil_addComponentToComponents,0}};
#define boxvar_InteractiveUtil_addComponentToComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_addComponentToComponents)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_lengthComponents(threadData_t *threadData, modelica_metatype _inComponents);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_lengthComponents(threadData_t *threadData, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_lengthComponents,2,0) {(void*) boxptr_InteractiveUtil_lengthComponents,0}};
#define boxvar_InteractiveUtil_lengthComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_lengthComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_restComponents(threadData_t *threadData, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_restComponents,2,0) {(void*) boxptr_InteractiveUtil_restComponents,0}};
#define boxvar_InteractiveUtil_restComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_restComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_firstComponent(threadData_t *threadData, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_firstComponent,2,0) {(void*) boxptr_InteractiveUtil_firstComponent,0}};
#define boxvar_InteractiveUtil_firstComponent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_firstComponent)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_emptyComponents(threadData_t *threadData, modelica_metatype _inComponents);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_emptyComponents(threadData_t *threadData, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_emptyComponents,2,0) {(void*) boxptr_InteractiveUtil_emptyComponents,0}};
#define boxvar_InteractiveUtil_emptyComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_emptyComponents)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_existsComponentInComponents(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponent);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_existsComponentInComponents(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_existsComponentInComponents,2,0) {(void*) boxptr_InteractiveUtil_existsComponentInComponents,0}};
#define boxvar_InteractiveUtil_existsComponentInComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_existsComponentInComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinComponents(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinComponents,2,0) {(void*) boxptr_InteractiveUtil_joinComponents,0}};
#define boxvar_InteractiveUtil_joinComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromModificationOption(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynModificationOption, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromModificationOption,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromModificationOption,0}};
#define boxvar_InteractiveUtil_extractComponentsFromModificationOption MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromModificationOption)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElementargs(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElementargs,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromElementargs,0}};
#define boxvar_InteractiveUtil_extractComponentsFromElementargs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElementargs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromComponentitems(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2, modelica_metatype _inAbsynComponentItemLst3, modelica_metatype _inComponents4, modelica_metatype _inEnv5);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromComponentitems,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromComponentitems,0}};
#define boxvar_InteractiveUtil_extractComponentsFromComponentitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromComponentitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElementspec(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inElementSpec, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElementspec,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromElementspec,0}};
#define boxvar_InteractiveUtil_extractComponentsFromElementspec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElementspec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElements(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElements,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromElements,0}};
#define boxvar_InteractiveUtil_extractComponentsFromElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClassparts(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClassparts,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromClassparts,0}};
#define boxvar_InteractiveUtil_extractComponentsFromClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClassdef(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClassDef, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClassdef,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromClassdef,0}};
#define boxvar_InteractiveUtil_extractComponentsFromClassdef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClassdef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClass,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromClass,0}};
#define boxvar_InteractiveUtil_extractComponentsFromClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClass)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isReadOnly(threadData_t *threadData, modelica_metatype _file_info);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isReadOnly(threadData_t *threadData, modelica_metatype _file_info);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isReadOnly,2,0) {(void*) boxptr_InteractiveUtil_isReadOnly,0}};
#define boxvar_InteractiveUtil_isReadOnly MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isReadOnly)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponentsVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponentsVisitor,2,0) {(void*) boxptr_InteractiveUtil_extractAllComponentsVisitor,0}};
#define boxvar_InteractiveUtil_extractAllComponentsVisitor MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponentsVisitor)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponents(threadData_t *threadData, modelica_metatype _p, modelica_metatype _path);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponents,2,0) {(void*) boxptr_InteractiveUtil_extractAllComponents,0}};
#define boxvar_InteractiveUtil_extractAllComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithType(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithType,2,0) {(void*) boxptr_InteractiveUtil_getComponentsWithType,0}};
#define boxvar_InteractiveUtil_getComponentsWithType MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsFromClass(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsFromClass,2,0) {(void*) boxptr_InteractiveUtil_getComponentsFromClass,0}};
#define boxvar_InteractiveUtil_getComponentsFromClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsFromClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithComponentsType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithComponentsType,2,0) {(void*) boxptr_InteractiveUtil_getComponentsWithComponentsType,0}};
#define boxvar_InteractiveUtil_getComponentsWithComponentsType MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithComponentsType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithComponentsClass(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithComponentsClass,2,0) {(void*) boxptr_InteractiveUtil_getComponentsWithComponentsClass,0}};
#define boxvar_InteractiveUtil_getComponentsWithComponentsClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithComponentsClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDependencyWithType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2, modelica_integer _inInteger3);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDependencyWithType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2, modelica_metatype _inInteger3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDependencyWithType,2,0) {(void*) boxptr_InteractiveUtil_getDependencyWithType,0}};
#define boxvar_InteractiveUtil_getDependencyWithType MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDependencyWithType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDependencyOnClass(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDependencyOnClass,2,0) {(void*) boxptr_InteractiveUtil_getDependencyOnClass,0}};
#define boxvar_InteractiveUtil_getDependencyOnClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDependencyOnClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_restComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_restComponentReplacementRules,2,0) {(void*) boxptr_InteractiveUtil_restComponentReplacementRules,0}};
#define boxvar_InteractiveUtil_restComponentReplacementRules MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_restComponentReplacementRules)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_firstComponentReplacement(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_firstComponentReplacement,2,0) {(void*) boxptr_InteractiveUtil_firstComponentReplacement,0}};
#define boxvar_InteractiveUtil_firstComponentReplacement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_firstComponentReplacement)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_lengthComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_lengthComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_lengthComponentReplacementRules,2,0) {(void*) boxptr_InteractiveUtil_lengthComponentReplacementRules,0}};
#define boxvar_InteractiveUtil_lengthComponentReplacementRules MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_lengthComponentReplacementRules)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules1, modelica_metatype _inComponentReplacementRules2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinComponentReplacementRules,2,0) {(void*) boxptr_InteractiveUtil_joinComponentReplacementRules,0}};
#define boxvar_InteractiveUtil_joinComponentReplacementRules MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinComponentReplacementRules)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_emptyComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_emptyComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_emptyComponentReplacementRules,2,0) {(void*) boxptr_InteractiveUtil_emptyComponentReplacementRules,0}};
#define boxvar_InteractiveUtil_emptyComponentReplacementRules MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_emptyComponentReplacementRules)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeComponentsReplacementRulesFromComponents(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeComponentsReplacementRulesFromComponents,2,0) {(void*) boxptr_InteractiveUtil_makeComponentsReplacementRulesFromComponents,0}};
#define boxvar_InteractiveUtil_makeComponentsReplacementRulesFromComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeComponentsReplacementRulesFromComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNewComponentreplacementsrulesForEachRule(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNewComponentreplacementsrulesForEachRule,2,0) {(void*) boxptr_InteractiveUtil_getNewComponentreplacementsrulesForEachRule,0}};
#define boxvar_InteractiveUtil_getNewComponentreplacementsrulesForEachRule MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNewComponentreplacementsrulesForEachRule)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentreplacementsrules(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules, modelica_integer _inInteger);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentreplacementsrules(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules, modelica_metatype _inInteger);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentreplacementsrules,2,0) {(void*) boxptr_InteractiveUtil_getComponentreplacementsrules,0}};
#define boxvar_InteractiveUtil_getComponentreplacementsrules MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentreplacementsrules)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceStartInComponentRef2(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceStartInComponentRef2,2,0) {(void*) boxptr_InteractiveUtil_replaceStartInComponentRef2,0}};
#define boxvar_InteractiveUtil_replaceStartInComponentRef2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceStartInComponentRef2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceStartInComponentRef(threadData_t *threadData, modelica_metatype _cr1, modelica_metatype _cr2, modelica_metatype _cr3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceStartInComponentRef,2,0) {(void*) boxptr_InteractiveUtil_replaceStartInComponentRef,0}};
#define boxvar_InteractiveUtil_replaceStartInComponentRef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceStartInComponentRef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExternalDecl(threadData_t *threadData, modelica_metatype _external_, modelica_metatype _old_comp, modelica_metatype _new_comp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExternalDecl,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExternalDecl,0}};
#define boxvar_InteractiveUtil_renameComponentInExternalDecl MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExternalDecl)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInNamedArgs(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInNamedArgs,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInNamedArgs,0}};
#define boxvar_InteractiveUtil_renameComponentInNamedArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInNamedArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInIterators(threadData_t *threadData, modelica_metatype _iterators, modelica_metatype _oldComp, modelica_metatype _newComp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInIterators,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInIterators,0}};
#define boxvar_InteractiveUtil_renameComponentInIterators MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInIterators)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInFunctionArgs(threadData_t *threadData, modelica_metatype _inFunctionArgs1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInFunctionArgs,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInFunctionArgs,0}};
#define boxvar_InteractiveUtil_renameComponentInFunctionArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInFunctionArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpAlgoritmsList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynAlgorithmItemLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpAlgoritmsList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExpAlgoritmsList,0}};
#define boxvar_InteractiveUtil_renameComponentInExpAlgoritmsList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpAlgoritmsList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInAlgorithm(threadData_t *threadData, modelica_metatype _inAlgorithm1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInAlgorithm,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInAlgorithm,0}};
#define boxvar_InteractiveUtil_renameComponentInAlgorithm MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInAlgorithm)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInAlgorithms(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInAlgorithms,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInAlgorithms,0}};
#define boxvar_InteractiveUtil_renameComponentInAlgorithms MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInAlgorithms)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExp(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _oldPrefix, modelica_metatype _newPrefix);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExp,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExp,0}};
#define boxvar_InteractiveUtil_renameComponentInExp MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInCode(threadData_t *threadData, modelica_metatype _inCode1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInCode,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInCode,0}};
#define boxvar_InteractiveUtil_renameComponentInCode MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInCode)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementArg(threadData_t *threadData, modelica_metatype _inElementArg1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementArg,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInElementArg,0}};
#define boxvar_InteractiveUtil_renameComponentInElementArg MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementArg)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementArgList(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementArgList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInElementArgList,0}};
#define boxvar_InteractiveUtil_renameComponentInElementArgList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementArgList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpTupleList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynExpLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpTupleList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExpTupleList,0}};
#define boxvar_InteractiveUtil_renameComponentInExpTupleList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpTupleList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpListList(threadData_t *threadData, modelica_metatype _inAbsynExpLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpListList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExpListList,0}};
#define boxvar_InteractiveUtil_renameComponentInExpListList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpListList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpList(threadData_t *threadData, modelica_metatype _inAbsynExpLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExpList,0}};
#define boxvar_InteractiveUtil_renameComponentInExpList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInEquation(threadData_t *threadData, modelica_metatype _inEquation1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInEquation,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInEquation,0}};
#define boxvar_InteractiveUtil_renameComponentInEquation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpEquationitemList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynEquationItemLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpEquationitemList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExpEquationitemList,0}};
#define boxvar_InteractiveUtil_renameComponentInExpEquationitemList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpEquationitemList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInEquationList(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInEquationList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInEquationList,0}};
#define boxvar_InteractiveUtil_renameComponentInEquationList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInEquationList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInComponentitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInComponentitems,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInComponentitems,0}};
#define boxvar_InteractiveUtil_renameComponentInComponentitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInComponentitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementSpec,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInElementSpec,0}};
#define boxvar_InteractiveUtil_renameComponentInElementSpec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementSpec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElements,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInElements,0}};
#define boxvar_InteractiveUtil_renameComponentInElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInParts,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInParts,0}};
#define boxvar_InteractiveUtil_renameComponentInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInClass,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInClass,0}};
#define boxvar_InteractiveUtil_renameComponentInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionComponentReplacement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentVisitor,2,0) {(void*) boxptr_InteractiveUtil_renameComponentVisitor,0}};
#define boxvar_InteractiveUtil_renameComponentVisitor MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentVisitor)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentFromComponentreplacements(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentFromComponentreplacements,2,0) {(void*) boxptr_InteractiveUtil_renameComponentFromComponentreplacements,0}};
#define boxvar_InteractiveUtil_renameComponentFromComponentreplacements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentFromComponentreplacements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractRenamedClassesAsStringList(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractRenamedClassesAsStringList,2,0) {(void*) boxptr_InteractiveUtil_extractRenamedClassesAsStringList,0}};
#define boxvar_InteractiveUtil_extractRenamedClassesAsStringList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractRenamedClassesAsStringList)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_renameComponentOnlyInClass(threadData_t *threadData, modelica_metatype _inProgram1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inComponentRef4, modelica_metatype *out_outProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentOnlyInClass,2,0) {(void*) boxptr_InteractiveUtil_renameComponentOnlyInClass,0}};
#define boxvar_InteractiveUtil_renameComponentOnlyInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentOnlyInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_renameComponent(threadData_t *threadData, modelica_metatype _inProgram1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inComponentRef4, modelica_metatype *out_outProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponent,2,0) {(void*) boxptr_InteractiveUtil_renameComponent,0}};
#define boxvar_InteractiveUtil_renameComponent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponent)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isClassReadOnly(threadData_t *threadData, modelica_metatype _cl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isClassReadOnly(threadData_t *threadData, modelica_metatype _cl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isClassReadOnly,2,0) {(void*) boxptr_InteractiveUtil_isClassReadOnly,0}};
#define boxvar_InteractiveUtil_isClassReadOnly MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isClassReadOnly)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponentreplacements(threadData_t *threadData, modelica_metatype _p, modelica_metatype _class_, modelica_metatype _cref1, modelica_metatype _cref2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponentreplacements,2,0) {(void*) boxptr_InteractiveUtil_extractAllComponentreplacements,0}};
#define boxvar_InteractiveUtil_extractAllComponentreplacements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponentreplacements)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_listClass(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_listClass,2,0) {(void*) boxptr_InteractiveUtil_listClass,0}};
#define boxvar_InteractiveUtil_listClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_listClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getApiFunctionNamedArgs(threadData_t *threadData, modelica_metatype _inStmt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getApiFunctionNamedArgs,2,0) {(void*) boxptr_InteractiveUtil_getApiFunctionNamedArgs,0}};
#define boxvar_InteractiveUtil_getApiFunctionNamedArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getApiFunctionNamedArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getApiFunctionArgs(threadData_t *threadData, modelica_metatype _inStmt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getApiFunctionArgs,2,0) {(void*) boxptr_InteractiveUtil_getApiFunctionArgs,0}};
#define boxvar_InteractiveUtil_getApiFunctionArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getApiFunctionArgs)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getApiFunctionNameInfo(threadData_t *threadData, modelica_metatype _inStmt, modelica_metatype *out_outInfo);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getApiFunctionNameInfo,2,0) {(void*) boxptr_InteractiveUtil_getApiFunctionNameInfo,0}};
#define boxvar_InteractiveUtil_getApiFunctionNameInfo MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getApiFunctionNameInfo)
DLLExport
modelica_metatype omc_InteractiveUtil_getClassnamesInEltsNoPartial(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_boolean _includeConstants)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _delst = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_delst = omc_DoubleEnded_fromList(threadData, tmpMeta1);
{
modelica_metatype _elt;
for (tmpMeta2 = _inAbsynElementItemLst; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_elt = MMC_CAR(tmpMeta2);
{
modelica_metatype tmp5_1;
tmp5_1 = _elt;
{
modelica_string _id = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp5;
int tmp6;
tmp5 = 0;
for (; tmp5 < 4; tmp5++) {
switch (MMC_SWITCH_CAST(tmp5)) {
case 0: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_integer tmp11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,1) == 0) goto tmp4_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,6) == 0) goto tmp4_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,2) == 0) goto tmp4_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
tmp11 = mmc_unbox_integer(tmpMeta10);
if (0 != tmp11) goto tmp4_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,4,5) == 0) goto tmp4_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_id = tmpMeta13;
omc_DoubleEnded_push__back(threadData, _delst, _id);
goto tmp4_done;
}
case 1: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_integer tmp19;
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,1) == 0) goto tmp4_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,6) == 0) goto tmp4_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,0,2) == 0) goto tmp4_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 3));
tmp19 = mmc_unbox_integer(tmpMeta18);
if (0 != tmp19) goto tmp4_end;
_id = tmpMeta17;
omc_DoubleEnded_push__back(threadData, _delst, _id);
goto tmp4_done;
}
case 2: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,1) == 0) goto tmp4_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,0,6) == 0) goto tmp4_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,3,3) == 0) goto tmp4_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,3,0) == 0) goto tmp4_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 4));
_lst = tmpMeta24;
if (!_includeConstants) goto tmp4_end;
omc_DoubleEnded_push__list__back(threadData, _delst, omc_InteractiveUtil_getComponentItemsName(threadData, _lst, 0));
goto tmp4_done;
}
case 3: {
goto tmp4_done;
}
}
goto tmp4_end;
tmp4_end: ;
}
goto goto_3;
goto_3:;
MMC_THROW_INTERNAL();
goto tmp4_done;
tmp4_done:;
}
}
;
}
}
tmpMeta26 = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = omc_DoubleEnded_toListAndClear(threadData, _delst, tmpMeta26);
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
modelica_metatype boxptr_InteractiveUtil_getClassnamesInEltsNoPartial(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_includeConstants);
_outStringLst = omc_InteractiveUtil_getClassnamesInEltsNoPartial(threadData, _inAbsynElementItemLst, tmp1);
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;volatile modelica_boolean tmp4_3;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inShowProtected;
tmp4_3 = _includeConstants;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elts = tmpMeta9;
_rest = tmpMeta8;
_b = tmp4_2;
_c = tmp4_3;
tmp4 += 1;
_l1 = omc_InteractiveUtil_getClassnamesInEltsNoPartial(threadData, _elts, _c);
_l2 = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _rest, _b, _c);
tmpMeta1 = listAppend(_l1, _l2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (1 != tmp4_2) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,1) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_elts = tmpMeta12;
_rest = tmpMeta11;
_c = tmp4_3;
_l1 = omc_InteractiveUtil_getClassnamesInEltsNoPartial(threadData, _elts, _c);
_l2 = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _rest, 1, _c);
tmpMeta1 = listAppend(_l1, _l2);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
_rest = tmpMeta14;
_b = tmp4_2;
_c = tmp4_3;
tmpMeta1 = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _rest, _b, _c);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
modelica_metatype boxptr_InteractiveUtil_getClassnamesInPartsNoPartial(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_outStringLst = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _inAbsynClassPartLst, tmp1, tmp2);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClassListNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(omc_AbsynUtil_isPartial(threadData, _inClass))
{
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outString = tmpMeta1;
goto _return;
}
{
modelica_metatype tmp5_1;modelica_boolean tmp5_2;modelica_boolean tmp5_3;
tmp5_1 = _inClass;
tmp5_2 = _inShowProtected;
tmp5_3 = _includeConstants;
{
modelica_metatype _parts = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp5;
int tmp6;
tmp5 = 0;
for (; tmp5 < 6; tmp5++) {
switch (MMC_SWITCH_CAST(tmp5)) {
case 0: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,5) == 0) goto tmp4_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_parts = tmpMeta8;
_b = tmp5_2;
_c = tmp5_3;
tmpMeta2 = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _parts, _b, _c);
goto tmp4_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,4,5) == 0) goto tmp4_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
_parts = tmpMeta10;
_b = tmp5_2;
_c = tmp5_3;
tmpMeta2 = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _parts, _b, _c);
goto tmp4_done;
}
case 2: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,1,4) == 0) goto tmp4_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,0,2) == 0) goto tmp4_end;
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta2 = tmpMeta13;
goto tmp4_done;
}
case 3: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,3,2) == 0) goto tmp4_end;
tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta2 = tmpMeta15;
goto tmp4_done;
}
case 4: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,2,2) == 0) goto tmp4_end;
tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta2 = tmpMeta17;
goto tmp4_done;
}
case 5: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,5,3) == 0) goto tmp4_end;
tmpMeta19 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta2 = tmpMeta19;
goto tmp4_done;
}
}
goto tmp4_end;
tmp4_end: ;
}
goto goto_3;
goto_3:;
MMC_THROW_INTERNAL();
goto tmp4_done;
tmp4_done:;
}
}
_outString = tmpMeta2;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClassListNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outString = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_outString = omc_InteractiveUtil_getClassnamesInClassListNoPartial(threadData, _inPath, _inProgram, _inClass, tmp1, tmp2);
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassNamesRecursiveNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _inShowProtected, modelica_boolean _includeConstants, modelica_metatype _inAcc, modelica_metatype *out_paths)
{
modelica_metatype _opath = NULL;
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
tmp4_3 = _inShowProtected;
tmp4_4 = _includeConstants;
tmp4_5 = _inAcc;
{
modelica_metatype _cdef = NULL;
modelica_string _s1 = NULL;
modelica_metatype _strlst = NULL;
modelica_metatype _pp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _classes = NULL;
modelica_metatype _result_path_lst = NULL;
modelica_metatype _acc = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_pp = tmpMeta6;
_p = tmp4_2;
_b = tmp4_3;
_c = tmp4_4;
_acc = tmp4_5;
tmp4 += 1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _pp, _p, 0);
if(omc_AbsynUtil_isNotPartial(threadData, _cdef))
{
tmpMeta7 = mmc_mk_cons(_pp, _acc);
_acc = tmpMeta7;
_strlst = omc_InteractiveUtil_getClassnamesInClassListNoPartial(threadData, _pp, _p, _cdef, _b, _c);
_result_path_lst = omc_List_map(threadData, omc_List_map1(threadData, _strlst, boxvar_InteractiveUtil_joinPaths, _pp), boxvar_Util_makeOption);
omc_List_map3Fold(threadData, _result_path_lst, boxvar_InteractiveUtil_getClassNamesRecursiveNoPartial, _p, mmc_mk_boolean(_b), mmc_mk_boolean(_c), _acc ,&_acc);
}
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = _acc;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p = tmp4_2;
_classes = tmpMeta8;
_b = tmp4_3;
_c = tmp4_4;
_acc = tmp4_5;
tmp4 += 1;
_strlst = omc_List_map(threadData, omc_List_filterOnTrue(threadData, _classes, boxvar_AbsynUtil_isNotPartial), boxvar_AbsynUtil_getClassName);
_result_path_lst = omc_List_mapMap(threadData, _strlst, boxvar_AbsynUtil_makeIdentPathFromString, boxvar_Util_makeOption);
omc_List_map3Fold(threadData, _result_path_lst, boxvar_InteractiveUtil_getClassNamesRecursiveNoPartial, _p, mmc_mk_boolean(_b), mmc_mk_boolean(_c), _acc ,&_acc);
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = _acc;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_pp = tmpMeta9;
_s1 = omc_AbsynUtil_pathString(threadData, _pp, _OMC_LIT0, 1, 0);
tmpMeta10 = mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT6, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addMessage(threadData, _OMC_LIT5, tmpMeta10);
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = tmpMeta11;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_opath = tmpMeta[0+0];
_paths = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_paths) { *out_paths = _paths; }
return _opath;
}
modelica_metatype boxptr_InteractiveUtil_getClassNamesRecursiveNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inShowProtected, modelica_metatype _includeConstants, modelica_metatype _inAcc, modelica_metatype *out_paths)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _opath = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_opath = omc_InteractiveUtil_getClassNamesRecursiveNoPartial(threadData, _inPath, _inProgram, tmp1, tmp2, _inAcc, out_paths);
return _opath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateConnectionNamesInEqList(threadData_t *threadData, modelica_metatype _equations, modelica_string _from, modelica_string _to, modelica_string _fromNew, modelica_string _toNew)
{
modelica_metatype _outEquations = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_string _c1_str = NULL;
modelica_string _c2_str = NULL;
modelica_boolean _found;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outEquations = tmpMeta1;
_found = 0;
{
modelica_metatype _eq;
for (tmpMeta2 = _equations; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_eq = MMC_CAR(tmpMeta2);
if((!_found))
{
{
modelica_metatype tmp6_1;
tmp6_1 = _eq;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
for (; tmp6 < 2; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,3) == 0) goto tmp5_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,3,2) == 0) goto tmp5_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
_c1 = tmpMeta9;
_c2 = tmpMeta10;
_c1_str = omc_AbsynUtil_crefString(threadData, _c1);
_c2_str = omc_AbsynUtil_crefString(threadData, _c2);
_found = (((stringEqual(_c1_str, _from)) && (stringEqual(_c2_str, _to)))?1:((stringEqual(_c1_str, _to)) && (stringEqual(_c2_str, _from))));
if(_found)
{
tmpMeta12 = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, omc_Parser_stringCref(threadData, _fromNew), omc_Parser_stringCref(threadData, _toNew));
tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_eq), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[2] = tmpMeta12;
_eq = tmpMeta11;
}
tmpMeta3 = _eq;
goto tmp5_done;
}
case 1: {
tmpMeta3 = _eq;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
goto_4:;
MMC_THROW_INTERNAL();
goto tmp5_done;
tmp5_done:;
}
}
_eq = tmpMeta3;
}
tmpMeta13 = mmc_mk_cons(_eq, _outEquations);
_outEquations = tmpMeta13;
}
}
_outEquations = listReverseInPlace(_outEquations);
_return: OMC_LABEL_UNUSED
return _outEquations;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateConnectionNamesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_string _inFrom, modelica_string _inTo, modelica_string _inFromNew, modelica_string _inToNew)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;modelica_string tmp4_3;modelica_string tmp4_4;modelica_string tmp4_5;
tmp4_1 = _inClass1;
tmp4_2 = _inFrom;
tmp4_3 = _inTo;
tmp4_4 = _inFromNew;
tmp4_5 = _inToNew;
{
modelica_metatype _eqlst = NULL;
modelica_metatype _eqlst_1 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
modelica_string _from = NULL;
modelica_string _to = NULL;
modelica_string _fromNew = NULL;
modelica_string _toNew = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_from = tmp4_2;
_to = tmp4_3;
_fromNew = tmp4_4;
_toNew = tmp4_5;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_updateConnectionNamesInEqList(threadData, _eqlst, _from, _to, _fromNew, _toNew);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta21, _file_info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_r = tmpMeta30;
_bcname = tmpMeta32;
_modif = tmpMeta33;
_cmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_from = tmp4_2;
_to = tmp4_3;
_fromNew = tmp4_4;
_toNew = tmp4_5;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_updateConnectionNamesInEqList(threadData, _eqlst, _from, _to, _fromNew, _toNew);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta38, _file_info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_boolean omc_InteractiveUtil_updateConnectionNames(threadData_t *threadData, modelica_metatype _inPath, modelica_string _inFrom, modelica_string _inTo, modelica_string _inFromNew, modelica_string _inToNew, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _outResult;
modelica_metatype _outProgram = NULL;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_string tmp4_3;volatile modelica_string tmp4_4;volatile modelica_string tmp4_5;volatile modelica_metatype tmp4_6;
tmp4_1 = _inPath;
tmp4_2 = _inFrom;
tmp4_3 = _inTo;
tmp4_4 = _inFromNew;
tmp4_5 = _inToNew;
tmp4_6 = _inProgram;
{
modelica_metatype _path = NULL;
modelica_metatype _modelwithin = NULL;
modelica_string _from = NULL;
modelica_string _to = NULL;
modelica_string _fromNew = NULL;
modelica_string _toNew = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_path = tmp4_1;
_from = tmp4_2;
_to = tmp4_3;
_fromNew = tmp4_4;
_toNew = tmp4_5;
_p = tmp4_6;
_modelwithin = omc_AbsynUtil_stripLast(threadData, _path);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_newcdef = omc_InteractiveUtil_updateConnectionNamesInClass(threadData, _cdef, _from, _to, _fromNew, _toNew);
tmpMeta6 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _modelwithin);
tmpMeta8 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, tmpMeta7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta8, _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
_path = tmp4_1;
_from = tmp4_2;
_to = tmp4_3;
_fromNew = tmp4_4;
_toNew = tmp4_5;
_p = tmp4_6;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_newcdef = omc_InteractiveUtil_updateConnectionNamesInClass(threadData, _cdef, _from, _to, _fromNew, _toNew);
tmpMeta9 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta10 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta9, _OMC_LIT7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta10, _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 2: {
_p = tmp4_6;
tmp1_c0 = 0;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outResult = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outResult;
}
modelica_metatype boxptr_InteractiveUtil_updateConnectionNames(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inFrom, modelica_metatype _inTo, modelica_metatype _inFromNew, modelica_metatype _inToNew, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _outResult;
modelica_metatype out_outResult;
_outResult = omc_InteractiveUtil_updateConnectionNames(threadData, _inPath, _inFrom, _inTo, _inFromNew, _inToNew, _inProgram, out_outProgram);
out_outResult = mmc_mk_icon(_outResult);
return out_outResult;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateConnectionAnnotationInEqList(threadData_t *threadData, modelica_metatype _equations, modelica_string _from, modelica_string _to, modelica_metatype _ann)
{
modelica_metatype _outEquations = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_string _c1_str = NULL;
modelica_string _c2_str = NULL;
modelica_boolean _found;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outEquations = tmpMeta1;
_found = 0;
{
modelica_metatype _eq;
for (tmpMeta2 = _equations; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_eq = MMC_CAR(tmpMeta2);
if((!_found))
{
{
modelica_metatype tmp6_1;
tmp6_1 = _eq;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
for (; tmp6 < 2; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,3) == 0) goto tmp5_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,3,2) == 0) goto tmp5_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
_c1 = tmpMeta9;
_c2 = tmpMeta10;
_c1_str = omc_AbsynUtil_crefString(threadData, _c1);
_c2_str = omc_AbsynUtil_crefString(threadData, _c2);
if(((stringEqual(_c1_str, _from)) && (stringEqual(_c2_str, _to))))
{
_found = 1;
}
if((!_found))
{
_found = ((stringEqual(_c1_str, _to)) && (stringEqual(_c2_str, _from)));
}
if(_found)
{
tmpMeta12 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(_ann), mmc_mk_none());
tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_eq), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[3] = mmc_mk_some(tmpMeta12);
_eq = tmpMeta11;
}
tmpMeta3 = _eq;
goto tmp5_done;
}
case 1: {
tmpMeta3 = _eq;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
goto_4:;
MMC_THROW_INTERNAL();
goto tmp5_done;
tmp5_done:;
}
}
_eq = tmpMeta3;
}
tmpMeta13 = mmc_mk_cons(_eq, _outEquations);
_outEquations = tmpMeta13;
}
}
_outEquations = listReverseInPlace(_outEquations);
_return: OMC_LABEL_UNUSED
return _outEquations;
}
DLLExport
modelica_metatype omc_InteractiveUtil_updateConnectionAnnotationInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_string _inFrom, modelica_string _inTo, modelica_metatype _inAnnotation)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;modelica_string tmp4_3;modelica_metatype tmp4_4;
tmp4_1 = _inClass1;
tmp4_2 = _inFrom;
tmp4_3 = _inTo;
tmp4_4 = _inAnnotation;
{
modelica_metatype _eqlst = NULL;
modelica_metatype _eqlst_1 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
modelica_string _from = NULL;
modelica_string _to = NULL;
modelica_metatype _annotation_ = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_from = tmp4_2;
_to = tmp4_3;
_annotation_ = tmp4_4;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_updateConnectionAnnotationInEqList(threadData, _eqlst, _from, _to, _annotation_);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta21, _file_info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_r = tmpMeta30;
_bcname = tmpMeta32;
_modif = tmpMeta33;
_cmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_from = tmp4_2;
_to = tmp4_3;
_annotation_ = tmp4_4;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_updateConnectionAnnotationInEqList(threadData, _eqlst, _from, _to, _annotation_);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta38, _file_info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_updateConnectionAnnotation(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inFrom, modelica_string _inTo, modelica_metatype _inAnnotation, modelica_metatype _inProgram)
{
modelica_metatype _outProgram = NULL;
modelica_metatype _class_path = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _class_within = NULL;
modelica_metatype tmpMeta1;
modelica_boolean tmp2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_class_path = omc_AbsynUtil_crefToPath(threadData, _inClass);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _class_path, _inProgram, 0);
_cls = omc_InteractiveUtil_updateConnectionAnnotationInClass(threadData, _cls, _inFrom, _inTo, omc_InteractiveUtil_annotationListToAbsyn(threadData, _inAnnotation));
tmp2 = (modelica_boolean)omc_AbsynUtil_pathIsIdent(threadData, _class_path);
if(tmp2)
{
tmpMeta3 = _OMC_LIT7;
}
else
{
tmpMeta1 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, omc_AbsynUtil_stripLast(threadData, _class_path));
tmpMeta3 = tmpMeta1;
}
_class_within = tmpMeta3;
tmpMeta4 = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta5 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta4, _class_within);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta5, _inProgram, 0);
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNFComponentitemsAnnotationsFromItems(threadData_t *threadData, modelica_metatype _inComponentItems, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _outCache = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _res = NULL;
modelica_string _str = NULL;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta1;
_outCache = _inCache;
{
modelica_metatype _comp;
for (tmpMeta2 = listReverse(_inComponentItems); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_comp = MMC_CAR(tmpMeta2);
{
modelica_metatype tmp6_1;
tmp6_1 = _comp;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
for (; tmp6 < 2; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (optionNone(tmpMeta8)) goto tmp5_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
if (optionNone(tmpMeta10)) goto tmp5_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
_annotations = tmpMeta12;
tmpMeta3 = listAppend(_annotations, _ccAnnotations);
goto tmp5_done;
}
case 1: {
tmpMeta3 = _ccAnnotations;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
goto_4:;
MMC_THROW_INTERNAL();
goto tmp5_done;
tmp5_done:;
}
}
_annotations = tmpMeta3;
_res = omc_InteractiveUtil_getNFComponentitemsAnnotationsElArgs(threadData, _annotations, _inEnv, _inClass, _outCache ,&_outCache);
_str = stringDelimitList(_res, _OMC_LIT8);
tmpMeta14 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta13 = mmc_mk_cons(stringAppendList(tmpMeta14), _outStringLst);
_outStringLst = tmpMeta13;
}
}
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNFComponentitemsAnnotationsElArgs(threadData_t *threadData, modelica_metatype _inElementArgs, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _outCache = NULL;
modelica_string _str = NULL;
modelica_string _ann_name = NULL;
modelica_metatype _eq_aexp = NULL;
modelica_metatype _eq_dexp = NULL;
modelica_metatype _prop = NULL;
modelica_metatype _info = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _c = NULL;
modelica_metatype _smod = NULL;
modelica_metatype _dmod = NULL;
modelica_metatype _dae = NULL;
modelica_metatype tmpMeta2;
modelica_string tmp3 = 0;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta1;
_outCache = _inCache;
{
modelica_metatype _e;
for (tmpMeta2 = listReverse(_inElementArgs); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_e = MMC_CAR(tmpMeta2);
{
volatile modelica_metatype tmp6_1;
tmp6_1 = _e;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp5_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp6 < 4; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,1) == 0) goto tmp5_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (optionNone(tmpMeta10)) goto tmp5_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
if (!listEmpty(tmpMeta12)) goto tmp5_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,1,2) == 0) goto tmp5_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 7));
_ann_name = tmpMeta9;
_eq_aexp = tmpMeta14;
_info = tmpMeta15;
tmp6 += 3;
tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, tmpMeta16 ,&_env ,NULL ,&_outCache);
omc_StaticScript_elabGraphicsExp(threadData, _cache, _env, _eq_aexp, 0, _OMC_LIT11, _info ,&_eq_dexp ,&_prop);
_cache = omc_Ceval_cevalIfConstant(threadData, _cache, _env, _eq_dexp, _prop, 0, _info ,&_eq_dexp ,&_prop);
_eq_dexp = omc_ExpressionSimplify_simplify1(threadData, _eq_dexp, NULL);
omc_Print_clearErrorBuf(threadData);
_str = omc_ExpressionDump_printExpStr(threadData, _eq_dexp);
tmpMeta17 = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil))));
tmp3 = stringAppendList(tmpMeta17);
goto tmp5_done;
}
case 1: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,1,1) == 0) goto tmp5_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (optionNone(tmpMeta20)) goto tmp5_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 1));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,0,0) == 0) goto tmp5_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 7));
_ann_name = tmpMeta19;
_mod = tmpMeta22;
_info = tmpMeta24;
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, _mod ,&_env ,NULL ,&_outCache);
_cache = omc_Lookup_lookupClassIdent(threadData, _cache, _inEnv, _ann_name, mmc_mk_none() ,&_c ,&_env2);
tmpMeta25 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _mod, _OMC_LIT13);
_smod = omc_AbsynToSCode_translateMod(threadData, mmc_mk_some(tmpMeta25), _OMC_LIT14, _OMC_LIT15, _info);
tmpMeta26 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta27 = mmc_mk_box2(3, &Mod_ModScope_COMPONENT__desc, _ann_name);
_cache = omc_Mod_elabMod(threadData, _cache, _env, tmpMeta26, _OMC_LIT11, _smod, 0, tmpMeta27, _OMC_LIT18 ,&_dmod);
_c = omc_SCodeUtil_classSetPartial(threadData, _c, _OMC_LIT19);
tmpMeta28 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta29 = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_instClass(threadData, _cache, _env2, tmpMeta28, _OMC_LIT20, _dmod, _OMC_LIT11, _c, tmpMeta29, 0, _OMC_LIT21, _OMC_LIT22, _OMC_LIT25 ,NULL ,NULL ,NULL ,&_dae, NULL, NULL, NULL, NULL, NULL);
_str = omc_DAEUtil_getVariableBindingsStr(threadData, omc_DAEUtil_daeElements(threadData, _dae));
tmpMeta30 = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT26, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT27, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp3 = stringAppendList(tmpMeta30);
goto tmp5_done;
}
case 2: {
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,1,1) == 0) goto tmp5_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (optionNone(tmpMeta33)) goto tmp5_end;
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 1));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta35,0,0) == 0) goto tmp5_end;
_ann_name = tmpMeta32;
tmp6 += 1;
tmpMeta36 = stringAppend(_ann_name,_OMC_LIT28);
tmp3 = tmpMeta36;
goto tmp5_done;
}
case 3: {
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta37,1,1) == 0) goto tmp5_end;
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 2));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (!optionNone(tmpMeta39)) goto tmp5_end;
_ann_name = tmpMeta38;
tmpMeta40 = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, tmpMeta40 ,NULL ,NULL ,&_outCache);
_cache = omc_Lookup_lookupClassIdent(threadData, _cache, _inEnv, _ann_name, mmc_mk_none() ,&_c ,&_env);
_c = omc_SCodeUtil_classSetPartial(threadData, _c, _OMC_LIT19);
tmpMeta41 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta42 = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_instClass(threadData, _cache, _env, tmpMeta41, _OMC_LIT20, _OMC_LIT29, _OMC_LIT11, _c, tmpMeta42, 0, _OMC_LIT21, _OMC_LIT22, _OMC_LIT25 ,NULL ,NULL ,NULL ,&_dae, NULL, NULL, NULL, NULL, NULL);
_str = omc_DAEUtil_getVariableBindingsStr(threadData, omc_DAEUtil_daeElements(threadData, _dae));
tmpMeta43 = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT26, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT27, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp3 = stringAppendList(tmpMeta43);
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
tmp5_done:
(void)tmp6;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp5_done2;
goto_4:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp6 < 4) {
goto tmp5_top;
}
MMC_THROW_INTERNAL();
tmp5_done2:;
}
}
_str = tmp3;
tmpMeta44 = mmc_mk_cons(_str, _outStringLst);
_outStringLst = tmpMeta44;
}
}
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNFAnnotationsFromConstraintClass(threadData_t *threadData, modelica_metatype _inCC)
{
modelica_metatype _outElArgLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inCC;
{
modelica_metatype _elementArgs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (optionNone(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
if (optionNone(tmpMeta9)) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_elementArgs = tmpMeta11;
tmpMeta1 = _elementArgs;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElArgLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElArgLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getNFComponentitemsAnnotations(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _res = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _items = NULL;
modelica_metatype _cc = NULL;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta13;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta1;
_cache = _inCache;
{
modelica_metatype _e;
for (tmpMeta2 = listReverse(_inElements); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_e = MMC_CAR(tmpMeta2);
{
volatile modelica_metatype tmp6_1;
tmp6_1 = _e;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp5_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp6 < 3; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,3,3) == 0) goto tmp5_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 7));
_items = tmpMeta9;
_cc = tmpMeta10;
_res = omc_InteractiveUtil_getNFComponentitemsAnnotationsFromItems(threadData, _items, omc_InteractiveUtil_getNFAnnotationsFromConstraintClass(threadData, _cc), _inEnv, _inClass, _cache ,&_cache);
tmpMeta3 = listAppend(_res, _outStringLst);
goto tmp5_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,3,3) == 0) goto tmp5_end;
tmpMeta12 = mmc_mk_cons(_OMC_LIT30, _outStringLst);
tmpMeta3 = tmpMeta12;
goto tmp5_done;
}
case 2: {
tmpMeta3 = _outStringLst;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
tmp5_done:
(void)tmp6;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp5_done2;
goto_4:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp6 < 3) {
goto tmp5_top;
}
MMC_THROW_INTERNAL();
tmp5_done2:;
}
}
_outStringLst = tmpMeta3;
}
}
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getRecursiveInheritedClasses(threadData_t *threadData, modelica_metatype _inClassName, modelica_metatype _inProgram)
{
modelica_metatype _outBaseClassNames = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inClassName;
tmp4_2 = _inProgram;
{
modelica_metatype _p_class = NULL;
modelica_metatype _paths = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _exts = NULL;
modelica_metatype _p = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
_p_class = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_exts = omc_InteractiveUtil_getExtendsElementspecInClass(threadData, _cdef);
_env = omc_InteractiveUtil_getClassEnv__dispatch(threadData, _p, _p_class);
{
modelica_metatype __omcQ_24tmpVar1;
modelica_metatype tmpMeta7;
modelica_metatype __omcQ_24tmpVar0;
modelica_integer tmp8;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _exts;
tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar1 = tmpMeta7;
while(1) {
tmp8 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp8--;
}
if (tmp8 == 0) {
__omcQ_24tmpVar0 = omc_InteractiveUtil_makeExtendsFullyQualified(threadData, _e, _env);
__omcQ_24tmpVar1 = mmc_mk_cons(__omcQ_24tmpVar0,__omcQ_24tmpVar1);
} else if (tmp8 == 1) {
break;
} else {
goto goto_2;
}
}
tmpMeta6 = __omcQ_24tmpVar1;
}
_exts = tmpMeta6;
_paths = omc_List_map(threadData, _exts, boxvar_InteractiveUtil_getBaseClassNameFromExtends);
_paths = omc_List_unique(threadData, _paths);
{
modelica_metatype _pt;
for (tmpMeta9 = _paths; !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
{
_pt = MMC_CAR(tmpMeta9);
_paths = omc_List_append__reverse(threadData, omc_InteractiveUtil_getRecursiveInheritedClasses(threadData, _pt, _p), _paths);
}
}
tmpMeta1 = listReverseInPlace(omc_List_unique(threadData, _paths));
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBaseClassNames = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outBaseClassNames;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getAllSubtypeOf(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inParentClass, modelica_metatype _inProgram, modelica_boolean _qualified, modelica_boolean _includePartial)
{
modelica_metatype _paths = NULL;
modelica_metatype _cdef = NULL;
modelica_string _s1 = NULL;
modelica_metatype _strlst = NULL;
modelica_metatype _pp = NULL;
modelica_metatype _fqpath = NULL;
modelica_metatype _p = NULL;
modelica_metatype _classes = NULL;
modelica_metatype _result_path_lst = NULL;
modelica_metatype _acc = NULL;
modelica_metatype _extendPaths = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_metatype _genv = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_boolean tmp11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inProgram;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
_classes = tmpMeta2;
_strlst = omc_List_map(threadData, omc_List_filterOnTrue(threadData, _classes, boxvar_AbsynUtil_isNotPartial), boxvar_AbsynUtil_getClassName);
_result_path_lst = omc_List_mapMap(threadData, _strlst, boxvar_AbsynUtil_makeIdentPathFromString, boxvar_Util_makeOption);
tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
omc_List_map3Fold(threadData, _result_path_lst, boxvar_InteractiveUtil_getClassNamesRecursiveNoPartial, _inProgram, mmc_mk_boolean(1), mmc_mk_boolean(0), tmpMeta3 ,&_acc);
{
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp5_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp6 < 2; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
_genv = omc_InteractiveUtil_createEnvironment(threadData, _inProgram, mmc_mk_none(), _inParentClass);
_fqpath = omc_InteractiveUtil_qualifyPath(threadData, _genv, _inClass);
goto tmp5_done;
}
case 1: {
_fqpath = _inClass;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
tmp5_done:
(void)tmp6;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp5_done2;
goto_4:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp6 < 2) {
goto tmp5_top;
}
MMC_THROW_INTERNAL();
tmp5_done2:;
}
}
;
tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
_paths = tmpMeta8;
{
modelica_metatype _pt;
for (tmpMeta9 = _acc; !listEmpty(tmpMeta9); tmpMeta9=MMC_CDR(tmpMeta9))
{
_pt = MMC_CAR(tmpMeta9);
_extendPaths = omc_InteractiveUtil_getAllInheritedClasses(threadData, _pt, _inProgram);
_b = mmc_unbox_boolean(omc_List_applyAndFold1(threadData, _extendPaths, boxvar_boolOr, boxvar_AbsynUtil_pathSuffixOfr, _fqpath, mmc_mk_boolean(0)));
tmp11 = (modelica_boolean)_b;
if(tmp11)
{
tmpMeta10 = mmc_mk_cons(_pt, _paths);
tmpMeta12 = tmpMeta10;
}
else
{
tmpMeta12 = _paths;
}
_paths = tmpMeta12;
}
}
_paths = omc_List_unique(threadData, _paths);
_return: OMC_LABEL_UNUSED
return _paths;
}
modelica_metatype boxptr_InteractiveUtil_getAllSubtypeOf(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inParentClass, modelica_metatype _inProgram, modelica_metatype _qualified, modelica_metatype _includePartial)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _paths = NULL;
tmp1 = mmc_unbox_integer(_qualified);
tmp2 = mmc_unbox_integer(_includePartial);
_paths = omc_InteractiveUtil_getAllSubtypeOf(threadData, _inClass, _inParentClass, _inProgram, tmp1, tmp2);
return _paths;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_excludeElementsFromFile(threadData_t *threadData, modelica_string _inFile, modelica_metatype _inEls)
{
modelica_metatype _outEls = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inFile;
tmp4_2 = _inEls;
{
modelica_metatype _e = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _filtered = NULL;
modelica_string _f = NULL;
modelica_string _file = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_boolean tmp12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_2);
tmpMeta8 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,6) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 6));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_e = tmpMeta7;
_f = tmpMeta11;
_rest = tmpMeta8;
_file = tmp4_1;
tmp12 = (stringEqual(_file, _f));
if (0 != tmp12) goto goto_2;
_filtered = omc_InteractiveUtil_excludeElementsFromFile(threadData, _file, _rest);
tmpMeta13 = mmc_mk_cons(_e, _filtered);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_boolean tmp19;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmp4_2);
tmpMeta15 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,1) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,0,6) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 6));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
_f = tmpMeta18;
_rest = tmpMeta15;
_file = tmp4_1;
tmp19 = (stringEqual(_file, _f));
if (1 != tmp19) goto goto_2;
tmpMeta1 = omc_InteractiveUtil_excludeElementsFromFile(threadData, _file, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outEls = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outEls;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeElements(threadData_t *threadData, modelica_metatype _inEls1, modelica_metatype _inEls2)
{
modelica_metatype _outEls = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inEls1;
tmp4_2 = _inEls2;
{
modelica_metatype _rest = NULL;
modelica_metatype _merged = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta1 = _inEls2;
goto tmp3_done;
}
case 1: {
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmp4 += 1;
tmpMeta1 = _inEls1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_2);
tmpMeta7 = MMC_CDR(tmp4_2);
_e2 = tmpMeta6;
_rest = tmpMeta7;
_merged = omc_InteractiveUtil_mergeElement(threadData, _inEls1, _e2);
tmpMeta1 = omc_InteractiveUtil_mergeElements(threadData, _merged, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outEls = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outEls;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeElement(threadData_t *threadData, modelica_metatype _inEls, modelica_metatype _inEl)
{
modelica_metatype _outEls = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inEls;
tmp4_2 = _inEl;
{
modelica_string _n1 = NULL;
modelica_string _n2 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _filtered = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_boolean _r;
modelica_boolean _f;
modelica_metatype _redecl = NULL;
modelica_metatype _innout = NULL;
modelica_metatype _i = NULL;
modelica_metatype _cc = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = mmc_mk_cons(_inEl, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_integer tmp15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_integer tmp20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_boolean tmp25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,2) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_1);
tmpMeta12 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,1) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,6) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
tmp15 = mmc_unbox_integer(tmpMeta14);
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,0,2) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
tmp20 = mmc_unbox_integer(tmpMeta19);
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 3));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 6));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 7));
_c2 = tmpMeta9;
_n2 = tmpMeta10;
_f = tmp15;
_redecl = tmpMeta16;
_innout = tmpMeta17;
_r = tmp20;
_c1 = tmpMeta21;
_n1 = tmpMeta22;
_i = tmpMeta23;
_cc = tmpMeta24;
_rest = tmpMeta12;
tmp25 = (stringEqual(_n1, _n2));
if (1 != tmp25) goto goto_2;
_c1 = omc_InteractiveUtil_mergeClasses(threadData, _c1, _c2);
tmpMeta27 = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(_r), _c1);
tmpMeta28 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _redecl, _innout, tmpMeta27, _i, _cc);
tmpMeta29 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta28);
tmpMeta26 = mmc_mk_cons(tmpMeta29, _rest);
tmpMeta1 = tmpMeta26;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta30 = MMC_CAR(tmp4_1);
tmpMeta31 = MMC_CDR(tmp4_1);
_e1 = tmpMeta30;
_rest = tmpMeta31;
_e2 = tmp4_2;
_filtered = omc_InteractiveUtil_mergeElement(threadData, _rest, _e2);
tmpMeta32 = mmc_mk_cons(_e1, _filtered);
tmpMeta1 = tmpMeta32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outEls = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outEls;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeClasses(threadData_t *threadData, modelica_metatype _cNew, modelica_metatype _cOld)
{
modelica_metatype _c = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _cNew;
tmp4_2 = _cOld;
{
modelica_metatype _partsC1 = NULL;
modelica_metatype _partsC2 = NULL;
modelica_metatype _pubElementsC1 = NULL;
modelica_metatype _pubElementsC2 = NULL;
modelica_string _file = NULL;
modelica_string _n = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _i = NULL;
modelica_metatype _typeVars1 = NULL;
modelica_metatype _classAttrs1 = NULL;
modelica_metatype _ann1 = NULL;
modelica_metatype _cmt1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (!listEmpty(tmpMeta7)) goto tmp3_end;
tmp4 += 1;
tmpMeta1 = _cNew;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
if (!listEmpty(tmpMeta9)) goto tmp3_end;
tmp4 += 1;
tmpMeta1 = _cNew;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_integer tmp14;
modelica_metatype tmpMeta15;
modelica_integer tmp16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp14 = mmc_unbox_integer(tmpMeta13);
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp16 = mmc_unbox_integer(tmpMeta15);
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,0,5) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 3));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 4));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 5));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 6));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,0,5) == 0) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 4));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 2));
_n = tmpMeta10;
_p = tmp12;
_f = tmp14;
_e = tmp16;
_r = tmpMeta17;
_typeVars1 = tmpMeta19;
_classAttrs1 = tmpMeta20;
_partsC1 = tmpMeta21;
_ann1 = tmpMeta22;
_cmt1 = tmpMeta23;
_i = tmpMeta24;
_partsC2 = tmpMeta26;
_file = tmpMeta28;
_pubElementsC2 = omc_InteractiveUtil_getPublicList(threadData, _partsC2);
_pubElementsC2 = omc_InteractiveUtil_excludeElementsFromFile(threadData, _file, _pubElementsC2);
_pubElementsC1 = omc_InteractiveUtil_getPublicList(threadData, _partsC1);
_pubElementsC1 = omc_InteractiveUtil_mergeElements(threadData, _pubElementsC1, _pubElementsC2);
_partsC1 = omc_InteractiveUtil_replacePublicList(threadData, _partsC1, _pubElementsC1);
tmpMeta29 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars1, _classAttrs1, _partsC1, _ann1, _cmt1);
tmpMeta30 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _n, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta29, _i);
tmpMeta1 = tmpMeta30;
goto tmp3_done;
}
case 3: {
tmpMeta1 = _cNew;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_c = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _c;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentDimensionsInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inFound, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_boolean *out_outFound, modelica_boolean *out_outContinue)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _item = NULL;
modelica_metatype _rest_items = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _args_old = NULL;
modelica_metatype _args_new = NULL;
modelica_metatype _eqmod_old = NULL;
modelica_metatype _eqmod_new = NULL;
modelica_string _comp_id = NULL;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outComponents = tmpMeta1;
_rest_items = _inComponents;
_comp_id = omc_AbsynUtil_crefFirstIdent(threadData, _inComponentName);
while(1)
{
if(!(!listEmpty(_rest_items))) break;
tmpMeta2 = _rest_items;
if (listEmpty(tmpMeta2)) MMC_THROW_INTERNAL();
tmpMeta3 = MMC_CAR(tmpMeta2);
tmpMeta4 = MMC_CDR(tmpMeta2);
_item = tmpMeta3;
_rest_items = tmpMeta4;
if((stringEqual(omc_AbsynUtil_componentName(threadData, _item), _comp_id)))
{
{
modelica_metatype tmp7_1;
tmp7_1 = _item;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 1; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_comp = tmpMeta9;
tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_comp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[3] = omc_List_map(threadData, _inDimensions, boxvar_AbsynUtil_makeSubscript);
_comp = tmpMeta10;
tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_item), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[2] = _comp;
_item = tmpMeta11;
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
MMC_THROW_INTERNAL();
goto tmp6_done;
tmp6_done:;
}
}
;
tmpMeta12 = mmc_mk_cons(_item, _rest_items);
_outComponents = omc_List_append__reverse(threadData, _outComponents, tmpMeta12);
_outFound = 1;
_outContinue = 0;
goto _return;
}
tmpMeta13 = mmc_mk_cons(_item, _outComponents);
_outComponents = tmpMeta13;
}
_outComponents = _inComponents;
_outFound = 0;
_outContinue = 1;
_return: OMC_LABEL_UNUSED
if (out_outFound) { *out_outFound = _outFound; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentDimensionsInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inFound, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_metatype *out_outFound, modelica_metatype *out_outContinue)
{
modelica_integer tmp1;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta2;
tmp1 = mmc_unbox_integer(_inFound);
_outComponents = omc_InteractiveUtil_setComponentDimensionsInCompitems(threadData, _inComponents, tmp1, _inComponentName, _inDimensions, &_outFound, &_outContinue);
if (out_outFound) { *out_outFound = mmc_mk_icon(_outFound); }
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outComponents;
}
static modelica_metatype closure0_InteractiveUtil_setComponentDimensionsInCompitems(threadData_t *thData, modelica_metatype closure, modelica_metatype inComponents, modelica_metatype inFound, modelica_metatype tmp3, modelica_metatype tmp4)
{
modelica_metatype inComponentName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype inDimensions = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_setComponentDimensionsInCompitems(thData, inComponents, inFound, inComponentName, inDimensions, tmp3, tmp4);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentDimensionsInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _inDimensions)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
modelica_integer tmp2;
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
tmpMeta5 = mmc_mk_box2(0, _inComponentName, _inDimensions);
tmpMeta6 = omc_AbsynUtil_traverseClassComponents(threadData, _inClass, (modelica_fnptr) mmc_mk_box2(0,closure0_InteractiveUtil_setComponentDimensionsInCompitems,tmpMeta5), mmc_mk_boolean(0), &tmpMeta1);
_outClass = tmpMeta6;
tmp2 = mmc_unbox_integer(tmpMeta1);
if (1 != tmp2) MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentDimensions(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_metatype _inProgram, modelica_string *out_outResult)
{
modelica_metatype _outProgram = NULL;
modelica_string _outResult = NULL;
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cls = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
_p_class = omc_AbsynUtil_crefToPath(threadData, _inClass);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _inProgram, 0);
_cls = omc_InteractiveUtil_setComponentDimensionsInClass(threadData, _cls, _inComponentName, _inDimensions);
tmpMeta5 = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta6 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta5, _within_);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta6, _inProgram, 0);
_outResult = _OMC_LIT31;
goto tmp2_done;
}
case 1: {
_outProgram = _inProgram;
_outResult = _OMC_LIT32;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outResult) { *out_outResult = _outResult; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassEnvNoElaboration(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inClassPath, modelica_metatype _inEnv)
{
modelica_metatype _outEnv = NULL;
modelica_metatype _cl = NULL;
modelica_string _id = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _env = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _cache = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta6 = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _inEnv, _inClassPath, mmc_mk_none(), &tmpMeta1, &tmpMeta5);
_cache = tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,2,8) == 0) MMC_THROW_INTERNAL();
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 4));
tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 6));
_cl = tmpMeta1;
_id = tmpMeta2;
_encflag = tmpMeta3;
_restr = tmpMeta4;
_env = tmpMeta5;
_env = omc_FGraph_openScope(threadData, _env, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env));
{
{
volatile mmc_switch_type tmp9;
int tmp10;
tmp9 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp8_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp9 < 2; tmp9++) {
switch (MMC_SWITCH_CAST(tmp9)) {
case 0: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, _cache, _env, tmpMeta11, _OMC_LIT29, _OMC_LIT11, _ci_state, _cl, _OMC_LIT33, tmpMeta12, ((modelica_integer) 0) ,&_outEnv, NULL, NULL, NULL);
goto tmp8_done;
}
case 1: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_instClassIn(threadData, _cache, _env, tmpMeta13, _OMC_LIT20, _OMC_LIT29, _OMC_LIT11, _ci_state, _cl, _OMC_LIT33, tmpMeta14, 0, _OMC_LIT34, _OMC_LIT22, _OMC_LIT25, mmc_mk_none() ,&_outEnv, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
goto tmp8_done;
}
}
goto tmp8_end;
tmp8_end: ;
}
goto goto_7;
tmp8_done:
(void)tmp9;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp8_done2;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp9 < 2) {
goto tmp8_top;
}
MMC_THROW_INTERNAL();
tmp8_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outEnv;
}
DLLExport
modelica_string omc_InteractiveUtil_printIstmtStr(threadData_t *threadData, modelica_metatype _inStatements)
{
modelica_string _strIstmt = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_strIstmt = omc_GlobalScriptDump_printIstmtsStr(threadData, _inStatements);
_return: OMC_LABEL_UNUSED
return _strIstmt;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassNameFromExtends(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_metatype _outBaseClassPath = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementSpec;
{
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta6;
tmpMeta1 = _path;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBaseClassPath = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outBaseClassPath;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getAllInheritedClasses(threadData_t *threadData, modelica_metatype _inClassName, modelica_metatype _inProgram)
{
modelica_metatype _outBaseClassNames = NULL;
modelica_metatype _genv = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp5_1;volatile modelica_metatype tmp5_2;
tmp5_1 = _inClassName;
tmp5_2 = _inProgram;
{
modelica_metatype _p_class = NULL;
modelica_metatype _paths = NULL;
modelica_metatype _fqpaths = NULL;
modelica_metatype _allPaths = NULL;
modelica_metatype tmpMeta3;
modelica_metatype _cdef = NULL;
modelica_metatype _exts = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp5;
int tmp6;
tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
_allPaths = tmpMeta3;
tmp5 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp4_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp5 < 2; tmp5++) {
switch (MMC_SWITCH_CAST(tmp5)) {
case 0: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
_p_class = tmp5_1;
_p = tmp5_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_exts = omc_InteractiveUtil_getExtendsElementspecInClass(threadData, _cdef);
_paths = omc_List_map(threadData, _exts, boxvar_InteractiveUtil_getBaseClassNameFromExtends);
tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
_fqpaths = tmpMeta7;
{
{
volatile mmc_switch_type tmp10;
int tmp11;
tmp10 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp9_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp10 < 2; tmp10++) {
switch (MMC_SWITCH_CAST(tmp10)) {
case 0: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
_genv = omc_InteractiveUtil_createEnvironment(threadData, _p, mmc_mk_none(), _p_class);
{
modelica_metatype _pt;
for (tmpMeta12 = _paths; !listEmpty(tmpMeta12); tmpMeta12=MMC_CDR(tmpMeta12))
{
_pt = MMC_CAR(tmpMeta12);
tmpMeta13 = mmc_mk_cons(omc_InteractiveUtil_qualifyPath(threadData, _genv, _pt), _fqpaths);
_fqpaths = tmpMeta13;
}
}
_fqpaths = listReverse(_fqpaths);
goto tmp9_done;
}
case 1: {
_fqpaths = _paths;
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
tmp9_done:
(void)tmp10;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp9_done2;
goto_8:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp10 < 2) {
goto tmp9_top;
}
goto goto_2;
tmp9_done2:;
}
}
;
tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
_allPaths = tmpMeta15;
{
modelica_metatype _pt;
for (tmpMeta16 = _fqpaths; !listEmpty(tmpMeta16); tmpMeta16=MMC_CDR(tmpMeta16))
{
_pt = MMC_CAR(tmpMeta16);
_allPaths = omc_List_append__reverse(threadData, omc_InteractiveUtil_getAllInheritedClasses(threadData, _pt, _p), _allPaths);
}
}
_allPaths = listReverseInPlace(omc_List_unique(threadData, _allPaths));
tmpMeta1 = listAppend(_fqpaths, _allPaths);
goto tmp4_done;
}
case 1: {
modelica_metatype tmpMeta18;
tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta18;
goto tmp4_done;
}
}
goto tmp4_end;
tmp4_end: ;
}
goto goto_2;
tmp4_done:
(void)tmp5;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp4_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp5 < 2) {
goto tmp4_top;
}
MMC_THROW_INTERNAL();
tmp4_done2:;
}
}
_outBaseClassNames = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outBaseClassNames;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAllClassesInClass(threadData_t *threadData, modelica_metatype _class_)
{
modelica_metatype _outClasses = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _class_;
{
modelica_metatype _classParts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_classParts = tmpMeta7;
tmpMeta1 = omc_InteractiveUtil_getClassesInParts(threadData, _classParts);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClasses = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClasses;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getFunctionsInClasses(threadData_t *threadData, modelica_metatype _classes, modelica_metatype _acc)
{
modelica_metatype _funcs = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _classes;
{
modelica_metatype _cl = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta1 = _acc;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,9,1) == 0) goto tmp3_end;
_cl = tmpMeta6;
_rest = tmpMeta7;
tmpMeta9 = mmc_mk_cons(_cl, _acc);
_classes = _rest;
_acc = tmpMeta9;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_rest = tmpMeta11;
_classes = _rest;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_funcs = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _funcs;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getFunctionsInProgram(threadData_t *threadData, modelica_metatype _prog)
{
modelica_metatype _funcs = NULL;
modelica_metatype _classes = NULL;
modelica_metatype _classesList = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _prog;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
_classes = tmpMeta2;
_classesList = omc_List_map(threadData, _classes, boxvar_InteractiveUtil_getAllClassesInClass);
tmpMeta3 = mmc_mk_cons(_classes, _classesList);
tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
_funcs = omc_List_fold(threadData, tmpMeta3, boxvar_InteractiveUtil_getFunctionsInClasses, tmpMeta4);
_return: OMC_LABEL_UNUSED
return _funcs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentElementInClass(threadData_t *threadData, modelica_metatype _cl, modelica_string _compName)
{
modelica_metatype _comp = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _cl;
{
modelica_metatype _parts = NULL;
modelica_metatype _publst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta9 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _compName, tmpMeta8);
tmpMeta1 = omc_InteractiveUtil_getComponentsContainsName(threadData, tmpMeta9, _publst);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,4,5) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 5));
_parts = tmpMeta11;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta13 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _compName, tmpMeta12);
tmpMeta1 = omc_InteractiveUtil_getComponentsContainsName(threadData, tmpMeta13, _publst);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_comp = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _comp;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPathedComponentElementInProgram(threadData_t *threadData, modelica_metatype _path, modelica_metatype _prg)
{
modelica_metatype _comp = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _cl = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cl = omc_InteractiveUtil_getPathedClassInProgram(threadData, omc_AbsynUtil_stripLast(threadData, _path), _prg, 0);
tmpMeta1 = omc_InteractiveUtil_getComponentElementInClass(threadData, _cl, omc_AbsynUtil_pathLastIdent(threadData, _path));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_comp = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _comp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getSCodeClassNamesRecursiveWork(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inAcc)
{
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inElement;
tmp4_2 = _inPath;
tmp4_3 = _inAcc;
{
modelica_metatype _classes = NULL;
modelica_metatype _acc = NULL;
modelica_metatype _path = NULL;
modelica_string _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!optionNone(tmp4_2)) goto tmp3_end;
_name = tmpMeta6;
_acc = tmp4_3;
tmpMeta7 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
_path = tmpMeta7;
tmpMeta8 = mmc_mk_cons(_path, _acc);
_acc = tmpMeta8;
_classes = omc_SCodeUtil_getClassElements(threadData, _inElement);
tmpMeta1 = omc_List_fold1(threadData, _classes, boxvar_InteractiveUtil_getSCodeClassNamesRecursiveWork, mmc_mk_some(_path), _acc);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (optionNone(tmp4_2)) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
_name = tmpMeta9;
_path = tmpMeta10;
_acc = tmp4_3;
_path = omc_AbsynUtil_suffixPath(threadData, _path, _name);
tmpMeta11 = mmc_mk_cons(_path, _acc);
_acc = tmpMeta11;
_classes = omc_SCodeUtil_getClassElements(threadData, _inElement);
tmpMeta1 = omc_List_fold1(threadData, _classes, boxvar_InteractiveUtil_getSCodeClassNamesRecursiveWork, mmc_mk_some(_path), _acc);
goto tmp3_done;
}
case 2: {
tmpMeta1 = _inAcc;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_paths = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _paths;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getSCodeClassNamesRecursive(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_paths = omc_List_fold1(threadData, _inProgram, boxvar_InteractiveUtil_getSCodeClassNamesRecursiveWork, mmc_mk_none(), tmpMeta1);
_return: OMC_LABEL_UNUSED
return _paths;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassNamesRecursive(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _inShowProtected, modelica_boolean _includeConstants, modelica_metatype _inAcc, modelica_metatype *out_paths)
{
modelica_metatype _opath = NULL;
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
tmp4_3 = _inShowProtected;
tmp4_4 = _includeConstants;
tmp4_5 = _inAcc;
{
modelica_metatype _cdef = NULL;
modelica_string _s1 = NULL;
modelica_metatype _strlst = NULL;
modelica_metatype _pp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _classes = NULL;
modelica_metatype _result_path_lst = NULL;
modelica_metatype _acc = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_pp = tmpMeta6;
_p = tmp4_2;
_b = tmp4_3;
_c = tmp4_4;
_acc = tmp4_5;
tmp4 += 1;
tmpMeta7 = mmc_mk_cons(_pp, _acc);
_acc = tmpMeta7;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _pp, _p, 0);
_strlst = omc_InteractiveUtil_getClassnamesInClassList(threadData, _pp, _p, _cdef, _b, _c);
_result_path_lst = omc_List_map(threadData, omc_List_map1(threadData, _strlst, boxvar_InteractiveUtil_joinPaths, _pp), boxvar_Util_makeOption);
omc_List_map3Fold(threadData, _result_path_lst, boxvar_InteractiveUtil_getClassNamesRecursive, _p, mmc_mk_boolean(_b), mmc_mk_boolean(_c), _acc ,&_acc);
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = _acc;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p = tmp4_2;
_classes = tmpMeta8;
_b = tmp4_3;
_c = tmp4_4;
_acc = tmp4_5;
tmp4 += 1;
_strlst = omc_List_map(threadData, _classes, boxvar_AbsynUtil_getClassName);
_result_path_lst = omc_List_mapMap(threadData, _strlst, boxvar_AbsynUtil_makeIdentPathFromString, boxvar_Util_makeOption);
omc_List_map3Fold(threadData, _result_path_lst, boxvar_InteractiveUtil_getClassNamesRecursive, _p, mmc_mk_boolean(_b), mmc_mk_boolean(_c), _acc ,&_acc);
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = _acc;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_pp = tmpMeta9;
_s1 = omc_AbsynUtil_pathString(threadData, _pp, _OMC_LIT0, 1, 0);
tmpMeta10 = mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT6, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addMessage(threadData, _OMC_LIT5, tmpMeta10);
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = tmpMeta11;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_opath = tmpMeta[0+0];
_paths = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_paths) { *out_paths = _paths; }
return _opath;
}
modelica_metatype boxptr_InteractiveUtil_getClassNamesRecursive(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inShowProtected, modelica_metatype _includeConstants, modelica_metatype _inAcc, modelica_metatype *out_paths)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _opath = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_opath = omc_InteractiveUtil_getClassNamesRecursive(threadData, _inPath, _inProgram, tmp1, tmp2, _inAcc, out_paths);
return _opath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinPaths(threadData_t *threadData, modelica_string _child, modelica_metatype _parent)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _child;
tmp4_2 = _parent;
{
modelica_metatype _r = NULL;
modelica_string _c = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
_c = tmp4_1;
_r = tmp4_2;
tmpMeta6 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _c);
tmpMeta1 = omc_AbsynUtil_joinPaths(threadData, _r, tmpMeta6);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outPath = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClassList(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;modelica_boolean tmp4_3;
tmp4_1 = _inClass;
tmp4_2 = _inShowProtected;
tmp4_3 = _includeConstants;
{
modelica_metatype _parts = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
_b = tmp4_2;
_c = tmp4_3;
tmpMeta1 = omc_InteractiveUtil_getClassnamesInParts(threadData, _parts, _b, _c);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_parts = tmpMeta9;
_b = tmp4_2;
_c = tmp4_3;
tmpMeta1 = omc_InteractiveUtil_getClassnamesInParts(threadData, _parts, _b, _c);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,4) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,2) == 0) goto tmp3_end;
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,3,2) == 0) goto tmp3_end;
tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,2,2) == 0) goto tmp3_end;
tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta16;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,5,3) == 0) goto tmp3_end;
tmpMeta18 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta18;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClassList(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outString = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_outString = omc_InteractiveUtil_getClassnamesInClassList(threadData, _inPath, _inProgram, _inClass, tmp1, tmp2);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementTypeName(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementSpec;
{
modelica_metatype _typeSpec = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_typeSpec = tmpMeta6;
tmp1 = omc_Dump_unparseTypeSpec(threadData, _typeSpec);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementName(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementSpec;
{
modelica_metatype _names = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_lst = tmpMeta6;
_names = omc_InteractiveUtil_getComponentItemsNameAndComment(threadData, _lst, 0);
tmp1 = stringDelimitList(_names, _OMC_LIT8);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_parseFile(threadData_t *threadData, modelica_string _fileName, modelica_string _encoding, modelica_boolean _updateProgram)
{
modelica_metatype _topClassNamesQualified = NULL;
modelica_metatype _parsed = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if((!omc_System_regularFileExists(threadData, _fileName)))
{
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_topClassNamesQualified = tmpMeta1;
goto _return;
}
_parsed = omc_Parser_parse(threadData, _fileName, _encoding, _OMC_LIT16, mmc_mk_none());
_parsed = omc_MetaUtil_createMetaClassesInProgram(threadData, _parsed);
_topClassNamesQualified = omc_InteractiveUtil_getTopQualifiedClassnames(threadData, _parsed);
if(_updateProgram)
{
omc_SymbolTable_setAbsyn(threadData, omc_Interactive_updateProgram(threadData, _parsed, omc_SymbolTable_getAbsyn(threadData), 0));
}
_return: OMC_LABEL_UNUSED
return _topClassNamesQualified;
}
modelica_metatype boxptr_InteractiveUtil_parseFile(threadData_t *threadData, modelica_metatype _fileName, modelica_metatype _encoding, modelica_metatype _updateProgram)
{
modelica_integer tmp1;
modelica_metatype _topClassNamesQualified = NULL;
tmp1 = mmc_unbox_integer(_updateProgram);
_topClassNamesQualified = omc_InteractiveUtil_parseFile(threadData, _fileName, _encoding, tmp1);
return _topClassNamesQualified;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionTypeVars(threadData_t *threadData, modelica_metatype _inTypeVars, modelica_metatype _inDefinitions)
{
modelica_metatype _outDefinitions = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outDefinitions = _inDefinitions;
{
modelica_metatype _ty_var;
for (tmpMeta1 = listReverse(_inTypeVars); !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
{
_ty_var = MMC_CAR(tmpMeta1);
tmpMeta3 = stringAppend(_OMC_LIT35,_ty_var);
tmpMeta4 = stringAppend(tmpMeta3,_OMC_LIT27);
tmpMeta2 = mmc_mk_cons(tmpMeta4, _outDefinitions);
_outDefinitions = tmpMeta2;
}
}
_return: OMC_LABEL_UNUSED
return _outDefinitions;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionComponents(threadData_t *threadData, modelica_string _typeStr, modelica_string _dirStr, modelica_integer _numDim, modelica_metatype _components)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _components;
{
modelica_metatype _rest = NULL;
modelica_string _ident = NULL;
modelica_metatype _l = NULL;
modelica_integer _sumDim;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_boolean tmp13;
modelica_string tmp14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
_ident = tmpMeta10;
_l = tmpMeta11;
_rest = tmpMeta8;
_sumDim = _numDim + listLength(_l);
tmp13 = (modelica_boolean)(_numDim == ((modelica_integer) 0));
if(tmp13)
{
tmp14 = _OMC_LIT16;
}
else
{
tmpMeta12 = stringAppend(_OMC_LIT36,intString(_sumDim));
tmp14 = tmpMeta12;
}
tmpMeta15 = stringAppend(_dirStr,tmp14);
tmpMeta16 = stringAppend(tmpMeta15,_typeStr);
tmpMeta17 = stringAppend(tmpMeta16,_OMC_LIT37);
tmpMeta18 = stringAppend(tmpMeta17,_ident);
_ident = tmpMeta18;
tmpMeta19 = stringAppend(_OMC_LIT26,_ident);
tmpMeta20 = stringAppend(tmpMeta19,_OMC_LIT27);
_ident = tmpMeta20;
_res = omc_InteractiveUtil_getDefinitionComponents(threadData, _typeStr, _dirStr, _numDim, _rest);
tmpMeta21 = mmc_mk_cons(_ident, _res);
tmpMeta1 = tmpMeta21;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta22 = MMC_CAR(tmp4_1);
tmpMeta23 = MMC_CDR(tmp4_1);
_rest = tmpMeta23;
tmpMeta1 = omc_InteractiveUtil_getDefinitionComponents(threadData, _typeStr, _dirStr, _numDim, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionComponents(threadData_t *threadData, modelica_metatype _typeStr, modelica_metatype _dirStr, modelica_metatype _numDim, modelica_metatype _components)
{
modelica_integer tmp1;
modelica_metatype _res = NULL;
tmp1 = mmc_unbox_integer(_numDim);
_res = omc_InteractiveUtil_getDefinitionComponents(threadData, _typeStr, _dirStr, tmp1, _components);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionDirString(threadData_t *threadData, modelica_metatype _dir, modelica_metatype _variability, modelica_boolean _isFunction)
{
modelica_string _res = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;
tmp4_1 = _dir;
tmp4_2 = _isFunction;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (1 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT38;
goto tmp3_done;
}
case 1: {
if (1 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT39;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp6;
modelica_metatype tmpMeta8;
if (0 != tmp4_2) goto tmp3_end;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmpMeta8 = _variability;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,3,0) == 0) goto goto_7;
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_2;}
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionDirString(threadData_t *threadData, modelica_metatype _dir, modelica_metatype _variability, modelica_metatype _isFunction)
{
modelica_integer tmp1;
modelica_string _res = NULL;
tmp1 = mmc_unbox_integer(_isFunction);
_res = omc_InteractiveUtil_getDefinitionDirString(threadData, _dir, _variability, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionContent(threadData_t *threadData, modelica_metatype _contents, modelica_boolean _addFunctions, modelica_boolean _isPublic)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;volatile modelica_boolean tmp4_3;
tmp4_1 = _contents;
tmp4_2 = _addFunctions;
tmp4_3 = _isPublic;
{
modelica_metatype _rest = NULL;
modelica_string _ident = NULL;
modelica_string _typeStr = NULL;
modelica_string _dirStr = NULL;
modelica_string _str = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _path = NULL;
modelica_metatype _components = NULL;
modelica_metatype _direction = NULL;
modelica_metatype _ts = NULL;
modelica_metatype _variability = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _res2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 5;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,6) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,2) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
tmp12 = mmc_unbox_integer(tmpMeta11);
if (0 != tmp12) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
_class_ = tmpMeta13;
_rest = tmpMeta8;
tmp4 += 3;
_res = omc_InteractiveUtil_getDefinitionContent(threadData, _rest, _addFunctions, _isPublic);
_str = omc_InteractiveUtil_getDefinitionsClass(threadData, _class_, _addFunctions);
tmpMeta14 = mmc_mk_cons(_str, _res);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_integer tmp20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta15 = MMC_CAR(tmp4_1);
tmpMeta16 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,0,1) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,0,6) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,0,2) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
tmp20 = mmc_unbox_integer(tmpMeta19);
if (1 != tmp20) goto tmp3_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 3));
_class_ = tmpMeta21;
_rest = tmpMeta16;
tmp4 += 2;
_res = omc_InteractiveUtil_getDefinitionContent(threadData, _rest, _addFunctions, _isPublic);
_ident = omc_InteractiveUtil_getDefinitionsReplaceableClass(threadData, _class_);
tmpMeta22 = mmc_mk_cons(_ident, _res);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
if (1 != tmp4_3) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta23 = MMC_CAR(tmp4_1);
tmpMeta24 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,0,1) == 0) goto tmp3_end;
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,0,6) == 0) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta26,3,3) == 0) goto tmp3_end;
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 2));
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 5));
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 6));
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 3));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 4));
_attr = tmpMeta27;
_variability = tmpMeta28;
_direction = tmpMeta29;
_ts = tmpMeta30;
_components = tmpMeta31;
_rest = tmpMeta24;
tmp4 += 1;
_typeStr = omc_InteractiveUtil_getDefinitionTypeSpecPathString(threadData, _ts);
_dirStr = omc_InteractiveUtil_getDefinitionDirString(threadData, _direction, _variability, _addFunctions);
_res = omc_InteractiveUtil_getDefinitionComponents(threadData, _typeStr, _dirStr, omc_InteractiveUtil_getDefinitionDimensions(threadData, _ts, _attr), _components);
_res2 = omc_InteractiveUtil_getDefinitionContent(threadData, _rest, _addFunctions, _isPublic);
tmpMeta1 = listAppend(_res, _res2);
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
if (0 != tmp4_2) goto tmp3_end;
if (1 != tmp4_3) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta32 = MMC_CAR(tmp4_1);
tmpMeta33 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,0,1) == 0) goto tmp3_end;
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta34,0,6) == 0) goto tmp3_end;
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta35,1,3) == 0) goto tmp3_end;
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 2));
_path = tmpMeta36;
_rest = tmpMeta33;
tmpMeta37 = stringAppend(_OMC_LIT40,omc_InteractiveUtil_getDefinitionPathString(threadData, _path));
tmpMeta38 = stringAppend(tmpMeta37,_OMC_LIT27);
_typeStr = tmpMeta38;
_res = omc_InteractiveUtil_getDefinitionContent(threadData, _rest, _addFunctions, _isPublic);
tmpMeta39 = mmc_mk_cons(_typeStr, _res);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta40 = MMC_CAR(tmp4_1);
tmpMeta41 = MMC_CDR(tmp4_1);
_rest = tmpMeta41;
tmpMeta1 = omc_InteractiveUtil_getDefinitionContent(threadData, _rest, _addFunctions, _isPublic);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionContent(threadData_t *threadData, modelica_metatype _contents, modelica_metatype _addFunctions, modelica_metatype _isPublic)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _res = NULL;
tmp1 = mmc_unbox_integer(_addFunctions);
tmp2 = mmc_unbox_integer(_isPublic);
_res = omc_InteractiveUtil_getDefinitionContent(threadData, _contents, tmp1, tmp2);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionParts(threadData_t *threadData, modelica_metatype _parts, modelica_metatype _inTypeVars, modelica_boolean _isFunction)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _parts;
{
modelica_metatype _rest = NULL;
modelica_metatype _contents = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta1 = omc_InteractiveUtil_getDefinitionTypeVars(threadData, _inTypeVars, _OMC_LIT41);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_contents = tmpMeta8;
_rest = tmpMeta7;
tmp4 += 1;
tmpMeta1 = listAppend(omc_InteractiveUtil_getDefinitionContent(threadData, _contents, _isFunction, 1), omc_InteractiveUtil_getDefinitionParts(threadData, _rest, _inTypeVars, _isFunction));
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,1) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_contents = tmpMeta11;
_rest = tmpMeta10;
tmpMeta1 = listAppend(omc_InteractiveUtil_getDefinitionContent(threadData, _contents, _isFunction, 0), omc_InteractiveUtil_getDefinitionParts(threadData, _rest, _inTypeVars, _isFunction));
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_rest = tmpMeta13;
tmpMeta1 = omc_InteractiveUtil_getDefinitionParts(threadData, _rest, _inTypeVars, _isFunction);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionParts(threadData_t *threadData, modelica_metatype _parts, modelica_metatype _inTypeVars, modelica_metatype _isFunction)
{
modelica_integer tmp1;
modelica_metatype _res = NULL;
tmp1 = mmc_unbox_integer(_isFunction);
_res = omc_InteractiveUtil_getDefinitionParts(threadData, _parts, _inTypeVars, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_getDefinitionDimensions(threadData_t *threadData, modelica_metatype _ts, modelica_metatype _attr)
{
modelica_integer _out;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _ts;
tmp4_2 = _attr;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta6)) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_l1 = tmpMeta7;
_l2 = tmpMeta8;
tmp1 = listLength(_l1) + listLength(_l2);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta9)) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_l1 = tmpMeta10;
_l2 = tmpMeta11;
tmp1 = listLength(_l1) + listLength(_l2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!optionNone(tmpMeta12)) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_l2 = tmpMeta13;
tmp1 = listLength(_l2);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!optionNone(tmpMeta14)) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_l2 = tmpMeta15;
tmp1 = listLength(_l2);
goto tmp3_done;
}
case 4: {
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_out = tmp1;
_return: OMC_LABEL_UNUSED
return _out;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionDimensions(threadData_t *threadData, modelica_metatype _ts, modelica_metatype _attr)
{
modelica_integer _out;
modelica_metatype out_out;
_out = omc_InteractiveUtil_getDefinitionDimensions(threadData, _ts, _attr);
out_out = mmc_mk_icon(_out);
return out_out;
}
DLLExport
modelica_string omc_InteractiveUtil_getDefinitionTypeSpecPathString(threadData_t *threadData, modelica_metatype _tp)
{
modelica_string _s = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _tp;
{
modelica_metatype _p = NULL;
modelica_metatype _tspecs = NULL;
modelica_metatype _tspecsStr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!listEmpty(tmpMeta7)) goto tmp3_end;
_p = tmpMeta6;
tmp1 = omc_InteractiveUtil_getDefinitionPathString(threadData, _p);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_p = tmpMeta8;
_tspecs = tmpMeta9;
tmp4 += 1;
_tspecsStr = omc_List_map(threadData, _tspecs, boxvar_InteractiveUtil_getDefinitionTypeSpecPathString);
tmpMeta10 = stringAppend(omc_InteractiveUtil_getDefinitionPathString(threadData, _p),_OMC_LIT42);
tmpMeta11 = stringAppend(tmpMeta10,stringDelimitList(_tspecsStr, _OMC_LIT43));
tmpMeta12 = stringAppend(tmpMeta11,_OMC_LIT44);
tmp1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta13;
tmp1 = omc_InteractiveUtil_getDefinitionPathString(threadData, _p);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_s = tmp1;
_return: OMC_LABEL_UNUSED
return _s;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionPathString(threadData_t *threadData, modelica_metatype _path)
{
modelica_string _out = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_out = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
_return: OMC_LABEL_UNUSED
return _out;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getEnumerationLiterals(threadData_t *threadData, modelica_metatype _el)
{
modelica_string _out = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _el;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_out = tmpMeta6;
tmpMeta7 = mmc_mk_cons(_OMC_LIT45, mmc_mk_cons(_out, mmc_mk_cons(_OMC_LIT45, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta7);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_out = tmp1;
_return: OMC_LABEL_UNUSED
return _out;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionsReplaceableClass(threadData_t *threadData, modelica_metatype _class_)
{
modelica_string _res = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _class_;
{
modelica_string _ident = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,7,0) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,4) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,3) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,1) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
if (11 != MMC_STRLEN(tmpMeta11) || strcmp(MMC_STRINGDATA(_OMC_LIT46), MMC_STRINGDATA(tmpMeta11)) != 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
if (listEmpty(tmpMeta12)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmpMeta12);
tmpMeta14 = MMC_CDR(tmpMeta12);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,2) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,1,1) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
if (3 != MMC_STRLEN(tmpMeta16) || strcmp(MMC_STRINGDATA(_OMC_LIT47), MMC_STRINGDATA(tmpMeta16)) != 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
if (!optionNone(tmpMeta17)) goto tmp3_end;
if (!listEmpty(tmpMeta14)) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
if (!optionNone(tmpMeta18)) goto tmp3_end;
_ident = tmpMeta6;
tmpMeta19 = stringAppend(_OMC_LIT35,_ident);
tmpMeta20 = stringAppend(tmpMeta19,_OMC_LIT27);
tmp1 = tmpMeta20;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionsClass(threadData_t *threadData, modelica_metatype _class_, modelica_boolean _addFunctions)
{
modelica_string _res = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;
tmp4_1 = _class_;
tmp4_2 = _addFunctions;
{
modelica_string _ident = NULL;
modelica_string _tyStr = NULL;
modelica_metatype _strs = NULL;
modelica_metatype _ts = NULL;
modelica_metatype _attr = NULL;
modelica_integer _numDim;
modelica_integer _index;
modelica_metatype _path = NULL;
modelica_string _indexArg = NULL;
modelica_string _pathArg = NULL;
modelica_metatype _body = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 11; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,8,0) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,5) == 0) goto tmp3_end;
_ident = tmpMeta6;
_body = tmpMeta8;
tmp4 += 9;
tmpMeta9 = stringAppend(_OMC_LIT48,_ident);
_ident = tmpMeta9;
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), _addFunctions);
tmpMeta10 = mmc_mk_cons(_ident, _strs);
_strs = tmpMeta10;
tmp1 = stringDelimitList(_strs, _OMC_LIT49);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_integer tmp13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp13 = mmc_unbox_integer(tmpMeta12);
if (1 != tmp13) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,9,1) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,0,1) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,1,0) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,0,5) == 0) goto tmp3_end;
_ident = tmpMeta11;
tmpMeta18 = mmc_mk_cons(_OMC_LIT50, mmc_mk_cons(_ident, mmc_mk_cons(_OMC_LIT27, MMC_REFSTRUCTLIT(mmc_nil))));
_strs = tmpMeta18;
tmp1 = stringDelimitList(_strs, _OMC_LIT37);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_integer tmp21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp21 = mmc_unbox_integer(tmpMeta20);
if (1 != tmp21) goto tmp3_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,9,1) == 0) goto tmp3_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,0,1) == 0) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta24,0,5) == 0) goto tmp3_end;
_ident = tmpMeta19;
tmp4 += 7;
tmpMeta25 = mmc_mk_cons(_OMC_LIT51, mmc_mk_cons(_ident, mmc_mk_cons(_OMC_LIT27, MMC_REFSTRUCTLIT(mmc_nil))));
_strs = tmpMeta25;
tmp1 = stringDelimitList(_strs, _OMC_LIT37);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_integer tmp28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
if (1 != tmp4_2) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp28 = mmc_unbox_integer(tmpMeta27);
if (0 != tmp28) goto tmp3_end;
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta29,9,1) == 0) goto tmp3_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta29), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta30,0,1) == 0) goto tmp3_end;
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,1,0) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,0,5) == 0) goto tmp3_end;
_ident = tmpMeta26;
_body = tmpMeta32;
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), 1);
tmpMeta34 = mmc_mk_cons(_ident, _strs);
tmpMeta33 = mmc_mk_cons(_OMC_LIT52, tmpMeta34);
_strs = tmpMeta33;
tmp1 = stringDelimitList(_strs, _OMC_LIT37);
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_integer tmp37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
if (1 != tmp4_2) goto tmp3_end;
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp37 = mmc_unbox_integer(tmpMeta36);
if (0 != tmp37) goto tmp3_end;
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta38,9,1) == 0) goto tmp3_end;
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta38), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta39,0,1) == 0) goto tmp3_end;
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta40,0,5) == 0) goto tmp3_end;
_ident = tmpMeta35;
_body = tmpMeta40;
tmp4 += 5;
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), 1);
tmpMeta42 = mmc_mk_cons(_ident, _strs);
tmpMeta41 = mmc_mk_cons(_OMC_LIT53, tmpMeta42);
_strs = tmpMeta41;
tmp1 = stringDelimitList(_strs, _OMC_LIT37);
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_integer tmp45;
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
if (1 != tmp4_2) goto tmp3_end;
tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp45 = mmc_unbox_integer(tmpMeta44);
if (0 != tmp45) goto tmp3_end;
tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta46,9,1) == 0) goto tmp3_end;
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta47,1,0) == 0) goto tmp3_end;
tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta48,0,5) == 0) goto tmp3_end;
_ident = tmpMeta43;
_body = tmpMeta48;
tmp4 += 4;
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), 1);
tmpMeta50 = mmc_mk_cons(_ident, _strs);
tmpMeta49 = mmc_mk_cons(_OMC_LIT54, tmpMeta50);
_strs = tmpMeta49;
tmp1 = stringDelimitList(_strs, _OMC_LIT37);
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta52,19,0) == 0) goto tmp3_end;
tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta53,0,5) == 0) goto tmp3_end;
_ident = tmpMeta51;
tmp4 += 3;
tmpMeta54 = mmc_mk_cons(_OMC_LIT55, mmc_mk_cons(_ident, mmc_mk_cons(_OMC_LIT27, MMC_REFSTRUCTLIT(mmc_nil))));
_strs = tmpMeta54;
tmp1 = stringDelimitList(_strs, _OMC_LIT37);
goto tmp3_done;
}
case 7: {
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta56,3,0) == 0) goto tmp3_end;
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta57,0,5) == 0) goto tmp3_end;
_ident = tmpMeta55;
_body = tmpMeta57;
tmp4 += 2;
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), 0);
tmpMeta59 = mmc_mk_cons(_ident, _strs);
tmpMeta58 = mmc_mk_cons(_OMC_LIT56, tmpMeta59);
_strs = tmpMeta58;
tmp1 = stringDelimitList(_strs, _OMC_LIT37);
goto tmp3_done;
}
case 8: {
modelica_metatype tmpMeta60;
modelica_metatype tmpMeta61;
modelica_metatype tmpMeta62;
modelica_metatype tmpMeta63;
modelica_integer tmp64;
modelica_metatype tmpMeta65;
modelica_metatype tmpMeta66;
modelica_metatype tmpMeta67;
modelica_metatype tmpMeta68;
modelica_metatype tmpMeta69;
tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta61,20,5) == 0) goto tmp3_end;
tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta61), 2));
tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta61), 3));
tmp64 = mmc_unbox_integer(tmpMeta63);
tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta65,0,5) == 0) goto tmp3_end;
_ident = tmpMeta60;
_path = tmpMeta62;
_index = tmp64;
_body = tmpMeta65;
tmp4 += 1;
_indexArg = intString(_index);
_pathArg = omc_AbsynUtil_pathLastIdent(threadData, _path);
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), 0);
tmpMeta69 = mmc_mk_cons(_pathArg, _strs);
tmpMeta68 = mmc_mk_cons(_indexArg, tmpMeta69);
tmpMeta67 = mmc_mk_cons(_ident, tmpMeta68);
tmpMeta66 = mmc_mk_cons(_OMC_LIT57, tmpMeta67);
_strs = tmpMeta66;
tmp1 = stringDelimitList(_strs, _OMC_LIT37);
goto tmp3_done;
}
case 9: {
modelica_metatype tmpMeta70;
modelica_metatype tmpMeta71;
modelica_metatype tmpMeta72;
modelica_metatype tmpMeta73;
modelica_metatype tmpMeta74;
modelica_boolean tmp75;
modelica_string tmp76;
modelica_metatype tmpMeta77;
modelica_metatype tmpMeta78;
tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta71,1,4) == 0) goto tmp3_end;
tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta71), 2));
tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta71), 3));
_ident = tmpMeta70;
_ts = tmpMeta72;
_attr = tmpMeta73;
_numDim = omc_InteractiveUtil_getDefinitionDimensions(threadData, _ts, _attr);
tmp75 = (modelica_boolean)(_numDim == ((modelica_integer) 0));
if(tmp75)
{
tmp76 = _OMC_LIT16;
}
else
{
tmpMeta74 = stringAppend(_OMC_LIT36,intString(_numDim));
tmp76 = tmpMeta74;
}
tmpMeta77 = stringAppend(tmp76,omc_InteractiveUtil_getDefinitionTypeSpecPathString(threadData, _ts));
_tyStr = tmpMeta77;
tmpMeta78 = mmc_mk_cons(_OMC_LIT58, mmc_mk_cons(_ident, mmc_mk_cons(_tyStr, mmc_mk_cons(_OMC_LIT27, MMC_REFSTRUCTLIT(mmc_nil)))));
_strs = tmpMeta78;
tmp1 = stringDelimitList(_strs, _OMC_LIT37);
goto tmp3_done;
}
case 10: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 11) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionsClass(threadData_t *threadData, modelica_metatype _class_, modelica_metatype _addFunctions)
{
modelica_integer tmp1;
modelica_string _res = NULL;
tmp1 = mmc_unbox_integer(_addFunctions);
_res = omc_InteractiveUtil_getDefinitionsClass(threadData, _class_, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitions2(threadData_t *threadData, modelica_metatype _classes, modelica_boolean _addFunctions)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _classes;
{
modelica_metatype _rest = NULL;
modelica_metatype _class_ = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
_class_ = tmpMeta7;
_rest = tmpMeta8;
_str = omc_InteractiveUtil_getDefinitionsClass(threadData, _class_, _addFunctions);
_res = omc_InteractiveUtil_getDefinitions2(threadData, _rest, _addFunctions);
tmpMeta9 = mmc_mk_cons(_str, _res);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitions2(threadData_t *threadData, modelica_metatype _classes, modelica_metatype _addFunctions)
{
modelica_integer tmp1;
modelica_metatype _res = NULL;
tmp1 = mmc_unbox_integer(_addFunctions);
_res = omc_InteractiveUtil_getDefinitions2(threadData, _classes, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_printWithNewline(threadData_t *threadData, modelica_string _s)
{
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
omc_Print_printBuf(threadData, _s);
omc_Print_printBuf(threadData, _OMC_LIT49);
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItem, modelica_boolean _inBoolean, modelica_metatype _inEnv)
{
modelica_string _outList = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inAbsynAlgorithmItem;
tmp4_2 = _inBoolean;
tmp4_3 = _inEnv;
{
modelica_metatype _env = NULL;
modelica_boolean _b;
modelica_metatype _elsItems = NULL;
modelica_metatype _els = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,21,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_elsItems = tmpMeta7;
_b = tmp4_2;
_env = tmp4_3;
_els = omc_Interactive_getComponentsInElementitems(threadData, _elsItems);
tmp1 = omc_Interactive_getComponentsInfo(threadData, _els, _b, _OMC_LIT59, _env);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outList = tmp1;
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItem, modelica_metatype _inBoolean, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outList = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outList = omc_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData, _inAbsynAlgorithmItem, tmp1, _inEnv);
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst, modelica_boolean _inBoolean, modelica_metatype _inEnv)
{
modelica_string _outList = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynAlgorithmItemLst;
tmp4_2 = _inBoolean;
tmp4_3 = _inEnv;
{
modelica_metatype _env = NULL;
modelica_boolean _b;
modelica_metatype _xs = NULL;
modelica_metatype _alg = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,3) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_alg = tmpMeta8;
_b = tmp4_2;
_env = tmp4_3;
tmp1 = omc_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData, _alg, _b, _env);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
_xs = tmpMeta10;
_b = tmp4_2;
_env = tmp4_3;
tmp4 += 1;
tmp1 = omc_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData, _xs, _b, _env);
goto tmp3_done;
}
case 2: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outList = tmp1;
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst, modelica_metatype _inBoolean, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outList = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outList = omc_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData, _inAbsynAlgorithmItemLst, tmp1, _inEnv);
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInClassParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_boolean _inBoolean, modelica_metatype _inEnv)
{
modelica_string _outList = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inBoolean;
tmp4_3 = _inEnv;
{
modelica_metatype _env = NULL;
modelica_boolean _b;
modelica_metatype _algs = NULL;
modelica_metatype _xs = NULL;
modelica_string _strList = NULL;
modelica_string _strList1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_boolean tmp10;
modelica_string tmp11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,5,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_algs = tmpMeta8;
_xs = tmpMeta7;
_b = tmp4_2;
_env = tmp4_3;
_strList1 = omc_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData, _algs, _b, _env);
_strList = omc_InteractiveUtil_getLocalVariablesInClassParts(threadData, _xs, _b, _env);
tmp10 = (modelica_boolean)(stringEqual(_strList, _OMC_LIT16));
if(tmp10)
{
tmp11 = _strList1;
}
else
{
tmpMeta9 = mmc_mk_cons(_strList1, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_strList, MMC_REFSTRUCTLIT(mmc_nil))));
tmp11 = stringAppendList(tmpMeta9);
}
tmp1 = tmp11;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_xs = tmpMeta13;
_b = tmp4_2;
_env = tmp4_3;
tmp4 += 1;
tmp1 = omc_InteractiveUtil_getLocalVariablesInClassParts(threadData, _xs, _b, _env);
goto tmp3_done;
}
case 2: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outList = tmp1;
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInClassParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inBoolean, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outList = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outList = omc_InteractiveUtil_getLocalVariablesInClassParts(threadData, _inAbsynClassPartLst, tmp1, _inEnv);
return _outList;
}
DLLExport
modelica_string omc_InteractiveUtil_getLocalVariables(threadData_t *threadData, modelica_metatype _inClass, modelica_boolean _inBoolean, modelica_metatype _inEnv)
{
modelica_string _outList = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inClass;
tmp4_2 = _inBoolean;
tmp4_3 = _inEnv;
{
modelica_metatype _env = NULL;
modelica_boolean _b;
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
_b = tmp4_2;
_env = tmp4_3;
tmp1 = omc_InteractiveUtil_getLocalVariablesInClassParts(threadData, _parts, _b, _env);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_parts = tmpMeta9;
_b = tmp4_2;
_env = tmp4_3;
tmp1 = omc_InteractiveUtil_getLocalVariablesInClassParts(threadData, _parts, _b, _env);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outList = tmp1;
_return: OMC_LABEL_UNUSED
return _outList;
}
modelica_metatype boxptr_InteractiveUtil_getLocalVariables(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inBoolean, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outList = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outList = omc_InteractiveUtil_getLocalVariables(threadData, _inClass, tmp1, _inEnv);
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitions(threadData_t *threadData, modelica_metatype _ast, modelica_boolean _addFunctions)
{
modelica_string _res = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _classes = NULL;
modelica_metatype _toPrint = NULL;
modelica_integer _handle;
modelica_metatype _cl = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = omc_MetaUtil_createMetaClassesInProgram(threadData, _ast);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_classes = tmpMeta7;
_handle = omc_Print_saveAndClearBuf(threadData);
omc_Print_printBuf(threadData, _OMC_LIT60);
_toPrint = omc_InteractiveUtil_getDefinitions2(threadData, _classes, _addFunctions);
omc_List_map__0(threadData, _toPrint, boxvar_InteractiveUtil_printWithNewline);
_cl = omc_InteractiveUtil_getPathedClassInProgram(threadData, _OMC_LIT62, _ast, 0);
tmpMeta8 = mmc_mk_cons(_cl, MMC_REFSTRUCTLIT(mmc_nil));
_toPrint = omc_InteractiveUtil_getDefinitions2(threadData, tmpMeta8, 0);
omc_List_map__0(threadData, _toPrint, boxvar_InteractiveUtil_printWithNewline);
omc_Print_printBuf(threadData, _OMC_LIT63);
_res = omc_Print_getString(threadData);
omc_Print_restoreBuf(threadData, _handle);
tmp1 = _res;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitions(threadData_t *threadData, modelica_metatype _ast, modelica_metatype _addFunctions)
{
modelica_integer tmp1;
modelica_string _res = NULL;
tmp1 = mmc_unbox_integer(_addFunctions);
_res = omc_InteractiveUtil_getDefinitions(threadData, _ast, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElseIfAlgorithm(threadData_t *threadData, modelica_metatype _elseIfbranch)
{
modelica_metatype _outElseIfbranch = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _elseIfbranch;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e11 = NULL;
modelica_metatype _algitems = NULL;
modelica_metatype _algitems1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta6;
_algitems = tmpMeta7;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_algitems1 = omc_List_map(threadData, _algitems, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
tmpMeta8 = mmc_mk_box2(0, _e11, _algitems1);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElseIfbranch = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElseIfbranch;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatAlgorithm(threadData_t *threadData, modelica_metatype _alg)
{
modelica_metatype _outAlg = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _alg;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e11 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e21 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _body = NULL;
modelica_metatype _body1 = NULL;
modelica_metatype _thenPart = NULL;
modelica_metatype _thenPart1 = NULL;
modelica_metatype _elsePart = NULL;
modelica_metatype _elsePart1 = NULL;
modelica_metatype _elseIfPart = NULL;
modelica_metatype _elseIfPart1 = NULL;
modelica_metatype _whenBranch = NULL;
modelica_metatype _whenBranch1 = NULL;
modelica_string _id = NULL;
modelica_metatype _fargs = NULL;
modelica_metatype _fargs1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 9; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,1) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr = tmpMeta7;
_e1 = tmpMeta8;
omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_cr1 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr);
tmpMeta9 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr1);
tmpMeta10 = mmc_mk_box3(3, &Absyn_Algorithm_ALG__ASSIGN__desc, tmpMeta9, _e1);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,16,1) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta11;
_e2 = tmpMeta12;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_e21 = omc_AbsynUtil_traverseExp(threadData, _e2, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta13 = mmc_mk_box3(3, &Absyn_Algorithm_ALG__ASSIGN__desc, _e11, _e21);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e1 = tmpMeta14;
_thenPart = tmpMeta15;
_elseIfPart = tmpMeta16;
_elsePart = tmpMeta17;
_thenPart1 = omc_List_map(threadData, _thenPart, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
_elseIfPart1 = omc_List_map(threadData, _elseIfPart, boxvar_InteractiveUtil_transformFlatElseIfAlgorithm);
_elsePart1 = omc_List_map(threadData, _elsePart, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta18 = mmc_mk_box5(4, &Absyn_Algorithm_ALG__IF__desc, _e11, _thenPart1, _elseIfPart1, _elsePart1);
tmpMeta1 = tmpMeta18;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta19)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmpMeta19);
tmpMeta21 = MMC_CDR(tmpMeta19);
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 3));
if (!optionNone(tmpMeta23)) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 4));
if (optionNone(tmpMeta24)) goto tmp3_end;
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 1));
if (!listEmpty(tmpMeta21)) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta22;
_e1 = tmpMeta25;
_body = tmpMeta26;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_body1 = omc_List_map(threadData, _body, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
tmpMeta28 = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _id, mmc_mk_none(), mmc_mk_some(_e11));
tmpMeta27 = mmc_mk_cons(tmpMeta28, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta29 = mmc_mk_box3(5, &Absyn_Algorithm_ALG__FOR__desc, tmpMeta27, _body1);
tmpMeta1 = tmpMeta29;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta30;
_body = tmpMeta31;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_body1 = omc_List_map(threadData, _body, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
tmpMeta32 = mmc_mk_box3(7, &Absyn_Algorithm_ALG__WHILE__desc, _e11, _body1);
tmpMeta1 = tmpMeta32;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,3) == 0) goto tmp3_end;
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta33;
_body = tmpMeta34;
_whenBranch = tmpMeta35;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_body1 = omc_List_map(threadData, _body, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
_whenBranch1 = omc_List_map(threadData, _whenBranch, boxvar_InteractiveUtil_transformFlatElseIfAlgorithm);
tmpMeta36 = mmc_mk_box4(8, &Absyn_Algorithm_ALG__WHEN__A__desc, _e11, _body1, _whenBranch1);
tmpMeta1 = tmpMeta36;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr = tmpMeta37;
_fargs = tmpMeta38;
_cr1 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr);
_fargs1 = omc_InteractiveUtil_transformFlatFunctionArgs(threadData, _fargs);
tmpMeta39 = mmc_mk_box3(9, &Absyn_Algorithm_ALG__NORETCALL__desc, _cr1, _fargs1);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,0) == 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT64;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,0) == 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT65;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAlg = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAlg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatAlgorithmItem(threadData_t *threadData, modelica_metatype _algitem)
{
modelica_metatype _outAlgitem = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _algitem;
{
modelica_metatype _cmt = NULL;
modelica_metatype _alg = NULL;
modelica_metatype _alg1 = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_alg = tmpMeta6;
_cmt = tmpMeta7;
_info = tmpMeta8;
_alg1 = omc_InteractiveUtil_transformFlatAlgorithm(threadData, _alg);
tmpMeta9 = mmc_mk_box4(3, &Absyn_AlgorithmItem_ALGORITHMITEM__desc, _alg1, _cmt, _info);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAlgitem = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAlgitem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatExp(threadData_t *threadData, modelica_metatype _inExp, modelica_integer _inDummy, modelica_integer *out_outDummy)
{
modelica_metatype _outExp = NULL;
modelica_integer _outDummy;
modelica_integer tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_integer tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inDummy;
{
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
modelica_integer _i;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta6;
_i = tmp4_2;
_cr1 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr);
tmpMeta7 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr1);
tmpMeta[0+0] = tmpMeta7;
tmp1_c1 = _i;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = _inDummy;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_outDummy = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outDummy) { *out_outDummy = _outDummy; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformFlatExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDummy, modelica_metatype *out_outDummy)
{
modelica_integer tmp1;
modelica_integer _outDummy;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inDummy);
_outExp = omc_InteractiveUtil_transformFlatExp(threadData, _inExp, tmp1, &_outDummy);
if (out_outDummy) { *out_outDummy = mmc_mk_icon(_outDummy); }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatExpTrav(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_integer _i;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp8 = mmc_unbox_integer(tmpMeta7);
_e = tmpMeta6;
_i = tmp8;
tmpMeta11 = omc_AbsynUtil_traverseExp(threadData, _e, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), &tmpMeta9);
_e1 = tmpMeta11;
tmp10 = mmc_unbox_integer(tmpMeta9);
_i = tmp10;
tmpMeta12 = mmc_mk_box2(0, _e1, mmc_mk_integer(_i));
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatNamedArg(threadData_t *threadData, modelica_metatype _namedArg)
{
modelica_metatype _outNamedArg = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _namedArg;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e11 = NULL;
modelica_string _id = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta6;
_e1 = tmpMeta7;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta8 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _id, _e11);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outNamedArg = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outNamedArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatFunctionArgs(threadData_t *threadData, modelica_metatype _fargs)
{
modelica_metatype _outFargs = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _fargs;
{
modelica_metatype _expl = NULL;
modelica_metatype _expl1 = NULL;
modelica_metatype _namedArgs = NULL;
modelica_metatype _namedArgs1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_expl = tmpMeta6;
_namedArgs = tmpMeta7;
{
modelica_metatype __omcQ_24tmpVar3;
modelica_metatype* tmp9;
modelica_metatype tmpMeta10;
modelica_metatype __omcQ_24tmpVar2;
modelica_integer tmp11;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _expl;
tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar3 = tmpMeta10;
tmp9 = &__omcQ_24tmpVar3;
while(1) {
tmp11 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp11--;
}
if (tmp11 == 0) {
__omcQ_24tmpVar2 = omc_AbsynUtil_traverseExp(threadData, _e, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
*tmp9 = mmc_mk_cons(__omcQ_24tmpVar2,0);
tmp9 = &MMC_CDR(*tmp9);
} else if (tmp11 == 1) {
break;
} else {
goto goto_2;
}
}
*tmp9 = mmc_mk_nil();
tmpMeta8 = __omcQ_24tmpVar3;
}
_expl1 = tmpMeta8;
_namedArgs1 = omc_List_map(threadData, _namedArgs, boxvar_InteractiveUtil_transformFlatNamedArg);
tmpMeta12 = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _expl1, _namedArgs1);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta1 = _fargs;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outFargs = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outFargs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElseIfPart(threadData_t *threadData, modelica_metatype _elseIfPart)
{
modelica_metatype _outElseIfPart = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _elseIfPart;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e11 = NULL;
modelica_metatype _eqnitems = NULL;
modelica_metatype _eqnitems1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta6;
_eqnitems = tmpMeta7;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_eqnitems1 = omc_List_map(threadData, _eqnitems, boxvar_InteractiveUtil_transformFlatEquationItem);
tmpMeta8 = mmc_mk_box2(0, _e11, _eqnitems1);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElseIfPart = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElseIfPart;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatEquation(threadData_t *threadData, modelica_metatype _eqn)
{
modelica_metatype _outEqn = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eqn;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e11 = NULL;
modelica_metatype _e21 = NULL;
modelica_string _id = NULL;
modelica_metatype _name = NULL;
modelica_metatype _thenpart = NULL;
modelica_metatype _thenpart1 = NULL;
modelica_metatype _elsepart = NULL;
modelica_metatype _elsepart1 = NULL;
modelica_metatype _forEqns = NULL;
modelica_metatype _forEqns1 = NULL;
modelica_metatype _whenEqns = NULL;
modelica_metatype _whenEqns1 = NULL;
modelica_metatype _elseifpart = NULL;
modelica_metatype _elseifpart1 = NULL;
modelica_metatype _elseWhenEqns = NULL;
modelica_metatype _elseWhenEqns1 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _cr11 = NULL;
modelica_metatype _cr21 = NULL;
modelica_metatype _fargs = NULL;
modelica_metatype _fargs1 = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e1 = tmpMeta5;
_thenpart = tmpMeta6;
_elseifpart = tmpMeta7;
_elsepart = tmpMeta8;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_thenpart1 = omc_List_map(threadData, _thenpart, boxvar_InteractiveUtil_transformFlatEquationItem);
_elsepart1 = omc_List_map(threadData, _elsepart, boxvar_InteractiveUtil_transformFlatEquationItem);
_elseifpart1 = omc_List_map(threadData, _elseifpart, boxvar_InteractiveUtil_transformFlatElseIfPart);
tmpMeta9 = mmc_mk_box5(3, &Absyn_Equation_EQ__IF__desc, _e11, _thenpart1, _elseifpart1, _elsepart1);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta10;
_e2 = tmpMeta11;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_e21 = omc_AbsynUtil_traverseExp(threadData, _e2, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta12 = mmc_mk_box3(4, &Absyn_Equation_EQ__EQUALS__desc, _e11, _e21);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta13;
_e2 = tmpMeta14;
_cr1 = tmpMeta15;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_e21 = omc_AbsynUtil_traverseExp(threadData, _e2, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_cr11 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr1);
tmpMeta16 = mmc_mk_box4(5, &Absyn_Equation_EQ__PDE__desc, _e11, _e21, _cr11);
tmpMeta1 = tmpMeta16;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr1 = tmpMeta17;
_cr2 = tmpMeta18;
_cr11 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr1);
_cr21 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr2);
tmpMeta19 = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _cr11, _cr21);
tmpMeta1 = tmpMeta19;
goto tmp3_done;
}
case 7: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta20)) goto tmp3_end;
tmpMeta21 = MMC_CAR(tmpMeta20);
tmpMeta22 = MMC_CDR(tmpMeta20);
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 3));
if (!optionNone(tmpMeta24)) goto tmp3_end;
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 4));
if (optionNone(tmpMeta25)) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 1));
if (!listEmpty(tmpMeta22)) goto tmp3_end;
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta23;
_e1 = tmpMeta26;
_forEqns = tmpMeta27;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_forEqns1 = omc_List_map(threadData, _forEqns, boxvar_InteractiveUtil_transformFlatEquationItem);
tmpMeta29 = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _id, mmc_mk_none(), mmc_mk_some(_e11));
tmpMeta28 = mmc_mk_cons(tmpMeta29, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta30 = mmc_mk_box3(7, &Absyn_Equation_EQ__FOR__desc, tmpMeta28, _forEqns1);
tmpMeta1 = tmpMeta30;
goto tmp3_done;
}
case 8: {
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,3) == 0) goto tmp3_end;
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta31;
_whenEqns = tmpMeta32;
_elseWhenEqns = tmpMeta33;
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_elseWhenEqns1 = omc_List_map(threadData, _elseWhenEqns, boxvar_InteractiveUtil_transformFlatElseIfPart);
_whenEqns1 = omc_List_map(threadData, _whenEqns, boxvar_InteractiveUtil_transformFlatEquationItem);
tmpMeta34 = mmc_mk_box4(8, &Absyn_Equation_EQ__WHEN__E__desc, _e11, _whenEqns1, _elseWhenEqns1);
tmpMeta1 = tmpMeta34;
goto tmp3_done;
}
case 9: {
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_name = tmpMeta35;
_fargs = tmpMeta36;
_fargs1 = omc_InteractiveUtil_transformFlatFunctionArgs(threadData, _fargs);
tmpMeta37 = mmc_mk_box3(9, &Absyn_Equation_EQ__NORETCALL__desc, _name, _fargs1);
tmpMeta1 = tmpMeta37;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outEqn = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outEqn;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatEquationItem(threadData_t *threadData, modelica_metatype _eqnitem)
{
modelica_metatype _outEqnitem = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eqnitem;
{
modelica_metatype _cmt = NULL;
modelica_metatype _eqn = NULL;
modelica_metatype _eqn1 = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_eqn = tmpMeta6;
_cmt = tmpMeta7;
_info = tmpMeta8;
_eqn1 = omc_InteractiveUtil_transformFlatEquation(threadData, _eqn);
tmpMeta9 = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, _eqn1, _cmt, _info);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outEqnitem = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outEqnitem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponentRef(threadData_t *threadData, modelica_metatype _cr)
{
modelica_metatype _outCr = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _cr1 = NULL;
modelica_metatype _ss = NULL;
modelica_string _s = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
_ss = omc_AbsynUtil_crefLastSubs(threadData, _cr);
_cr1 = omc_AbsynUtil_crefStripLastSubs(threadData, _cr);
_s = omc_Dump_printComponentRefStr(threadData, _cr1);
tmpMeta6 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _s, _ss);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCr = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outCr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatModificationOption(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _outMod = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _info = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _eltArgs = NULL;
modelica_metatype _eltArgs1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,2) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
_eltArgs = tmpMeta7;
_e = tmpMeta9;
_info = tmpMeta10;
_eltArgs1 = omc_List_map(threadData, _eltArgs, boxvar_InteractiveUtil_transformFlatElementArg);
_e1 = omc_AbsynUtil_traverseExp(threadData, _e, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta11 = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _e1, _info);
tmpMeta12 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _eltArgs1, tmpMeta11);
tmpMeta1 = mmc_mk_some(tmpMeta12);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,0,0) == 0) goto tmp3_end;
_eltArgs = tmpMeta14;
_eltArgs1 = omc_List_map(threadData, _eltArgs, boxvar_InteractiveUtil_transformFlatElementArg);
tmpMeta16 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _eltArgs1, _OMC_LIT13);
tmpMeta1 = mmc_mk_some(tmpMeta16);
goto tmp3_done;
}
case 2: {
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta1 = mmc_mk_none();
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outMod = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outMod;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementArg(threadData_t *threadData, modelica_metatype _eltArg)
{
modelica_metatype _outEltArg = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eltArg;
{
modelica_boolean _f;
modelica_metatype _e = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _mod1 = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _info = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta6);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_f = tmp7;
_e = tmpMeta8;
_p = tmpMeta9;
_mod = tmpMeta10;
_cmt = tmpMeta11;
_info = tmpMeta12;
_mod1 = omc_InteractiveUtil_transformFlatModificationOption(threadData, _mod);
tmpMeta13 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _e, _p, _mod1, _cmt, _info);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,6) == 0) goto tmp3_end;
tmpMeta1 = _eltArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outEltArg = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outEltArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatSubscript(threadData_t *threadData, modelica_metatype _s)
{
modelica_metatype _outS = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _s;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT66;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta6;
_e1 = omc_AbsynUtil_traverseExp(threadData, _e, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta7 = mmc_mk_box2(4, &Absyn_Subscript_SUBSCRIPT__desc, _e1);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outS = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outS;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatArrayDim(threadData_t *threadData, modelica_metatype _ad)
{
modelica_metatype _outAd = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outAd = omc_List_map(threadData, _ad, boxvar_InteractiveUtil_transformFlatSubscript);
_return: OMC_LABEL_UNUSED
return _outAd;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponent(threadData_t *threadData, modelica_metatype _comp)
{
modelica_metatype _outComp = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _comp;
{
modelica_metatype _arraydim = NULL;
modelica_metatype _arraydimTransformed = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _modTransformed = NULL;
modelica_string _id = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_id = tmpMeta6;
_arraydim = tmpMeta7;
_mod = tmpMeta8;
_modTransformed = omc_InteractiveUtil_transformFlatModificationOption(threadData, _mod);
_arraydimTransformed = omc_InteractiveUtil_transformFlatArrayDim(threadData, _arraydim);
tmpMeta9 = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _id, _arraydimTransformed, _modTransformed);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outComp = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponentItem(threadData_t *threadData, modelica_metatype _compitem)
{
modelica_metatype _outCompitem = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _compitem;
{
modelica_metatype _cond = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _compTransformed = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_comp = tmpMeta6;
_cond = tmpMeta7;
_cmt = tmpMeta8;
_compTransformed = omc_InteractiveUtil_transformFlatComponent(threadData, _comp);
tmpMeta9 = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, _compTransformed, _cond, _cmt);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCompitem = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outCompitem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementSpec(threadData_t *threadData, modelica_metatype _eltSpec)
{
modelica_metatype _outEltSpec = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eltSpec;
{
modelica_boolean _r;
modelica_metatype _cl = NULL;
modelica_metatype _cl1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _eargs = NULL;
modelica_metatype _eargs1 = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _annOpt = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_metatype tmpMeta5;
modelica_integer tmp6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta5);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_r = tmp6;
_cl = tmpMeta7;
tmpMeta8 = mmc_mk_box3(0, _cl, mmc_mk_none(), mmc_mk_integer(((modelica_integer) 0)));
tmpMeta9 = omc_InteractiveUtil_transformFlatClass(threadData, tmpMeta8);
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
_cl1 = tmpMeta10;
tmpMeta11 = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(_r), _cl1);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_path = tmpMeta12;
_eargs = tmpMeta13;
_annOpt = tmpMeta14;
_eargs1 = omc_List_map(threadData, _eargs, boxvar_InteractiveUtil_transformFlatElementArg);
tmpMeta15 = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _path, _eargs1, _annOpt);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 5: {
tmpMeta1 = _eltSpec;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_attr = tmpMeta16;
_tp = tmpMeta17;
_comps = tmpMeta18;
_comps1 = omc_List_map(threadData, _comps, boxvar_InteractiveUtil_transformFlatComponentItem);
tmpMeta19 = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr, _tp, _comps1);
tmpMeta1 = tmpMeta19;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outEltSpec = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outEltSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElement(threadData_t *threadData, modelica_metatype _elt)
{
modelica_metatype _outElt = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _elt;
{
modelica_boolean _f;
modelica_metatype _r = NULL;
modelica_metatype _io = NULL;
modelica_metatype _spec = NULL;
modelica_metatype _spec1 = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
tmpMeta1 = _elt;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta6);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_f = tmp7;
_r = tmpMeta8;
_io = tmpMeta9;
_spec = tmpMeta10;
_info = tmpMeta11;
_constr = tmpMeta12;
_spec1 = omc_InteractiveUtil_transformFlatElementSpec(threadData, _spec);
tmpMeta13 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _io, _spec1, _info, _constr);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElt = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElt;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementItem(threadData_t *threadData, modelica_metatype _eitem)
{
modelica_metatype _outEitem = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eitem;
{
modelica_metatype _elt = NULL;
modelica_metatype _elt1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_elt = tmpMeta6;
_elt1 = omc_InteractiveUtil_transformFlatElement(threadData, _elt);
tmpMeta7 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt1);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outEitem = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outEitem;
}
DLLExport
modelica_metatype omc_InteractiveUtil_transformFlatPart(threadData_t *threadData, modelica_metatype _part)
{
modelica_metatype _outPart = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _part;
{
modelica_metatype _eitems = NULL;
modelica_metatype _eitems1 = NULL;
modelica_metatype _eqnitems = NULL;
modelica_metatype _eqnitems1 = NULL;
modelica_metatype _algitems = NULL;
modelica_metatype _algitems1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 8; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_eitems = tmpMeta6;
tmp4 += 6;
_eitems1 = omc_List_map(threadData, _eitems, boxvar_InteractiveUtil_transformFlatElementItem);
tmpMeta7 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _eitems1);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_eitems = tmpMeta8;
tmp4 += 5;
_eitems1 = omc_List_map(threadData, _eitems, boxvar_InteractiveUtil_transformFlatElementItem);
tmpMeta9 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _eitems1);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_eqnitems = tmpMeta10;
tmp4 += 4;
_eqnitems1 = omc_List_map(threadData, _eqnitems, boxvar_InteractiveUtil_transformFlatEquationItem);
tmpMeta11 = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _eqnitems1);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_eqnitems = tmpMeta12;
tmp4 += 3;
_eqnitems1 = omc_List_map(threadData, _eqnitems, boxvar_InteractiveUtil_transformFlatEquationItem);
tmpMeta13 = mmc_mk_box2(7, &Absyn_ClassPart_INITIALEQUATIONS__desc, _eqnitems1);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_algitems = tmpMeta14;
tmp4 += 2;
_algitems1 = omc_List_map(threadData, _algitems, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
tmpMeta15 = mmc_mk_box2(8, &Absyn_ClassPart_ALGORITHMS__desc, _algitems1);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,1) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_algitems = tmpMeta16;
tmp4 += 1;
_algitems1 = omc_List_map(threadData, _algitems, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
tmpMeta17 = mmc_mk_box2(9, &Absyn_ClassPart_INITIALALGORITHMS__desc, _algitems1);
tmpMeta1 = tmpMeta17;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,2) == 0) goto tmp3_end;
tmpMeta1 = _part;
goto tmp3_done;
}
case 7: {
fputs(MMC_STRINGDATA(_OMC_LIT67),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 8) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outPart = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outPart;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatClassDef(threadData_t *threadData, modelica_metatype _cdef)
{
modelica_metatype _outCdef = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _cdef;
{
modelica_metatype _parts = NULL;
modelica_metatype _partsTransformed = NULL;
modelica_string _baseClassName = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmp4 += 5;
tmpMeta1 = _cdef;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmp4 += 4;
tmpMeta1 = _cdef;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmp4 += 3;
tmpMeta1 = _cdef;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,3) == 0) goto tmp3_end;
tmp4 += 2;
tmpMeta1 = _cdef;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_typeVars = tmpMeta6;
_classAttrs = tmpMeta7;
_parts = tmpMeta8;
_ann = tmpMeta9;
_cmt = tmpMeta10;
tmp4 += 1;
_partsTransformed = omc_List_map(threadData, _parts, boxvar_InteractiveUtil_transformFlatPart);
tmpMeta11 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _partsTransformed, _ann, _cmt);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,5) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_baseClassName = tmpMeta12;
_modifications = tmpMeta13;
_cmt = tmpMeta14;
_parts = tmpMeta15;
_ann = tmpMeta16;
_partsTransformed = omc_List_map(threadData, _parts, boxvar_InteractiveUtil_transformFlatPart);
tmpMeta17 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _partsTransformed, _ann);
tmpMeta1 = tmpMeta17;
goto tmp3_done;
}
case 6: {
fputs(MMC_STRINGDATA(_OMC_LIT68),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 7) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCdef = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outCdef;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatClass(threadData_t *threadData, modelica_metatype _inTuple)
{
modelica_metatype _outTuple = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inTuple;
{
modelica_string _id = NULL;
modelica_metatype _pa = NULL;
modelica_boolean _a;
modelica_boolean _b;
modelica_boolean _c;
modelica_metatype _d = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef1 = NULL;
modelica_integer _i;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_integer tmp9;
modelica_metatype tmpMeta10;
modelica_integer tmp11;
modelica_metatype tmpMeta12;
modelica_integer tmp13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_integer tmp19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
tmp9 = mmc_unbox_integer(tmpMeta8);
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
tmp11 = mmc_unbox_integer(tmpMeta10);
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
tmp13 = mmc_unbox_integer(tmpMeta12);
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 7));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 8));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp19 = mmc_unbox_integer(tmpMeta18);
_id = tmpMeta7;
_a = tmp9;
_b = tmp11;
_c = tmp13;
_d = tmpMeta14;
_cdef = tmpMeta15;
_file_info = tmpMeta16;
_pa = tmpMeta17;
_i = tmp19;
_cdef1 = omc_InteractiveUtil_transformFlatClassDef(threadData, _cdef);
tmpMeta20 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_a), mmc_mk_boolean(_b), mmc_mk_boolean(_c), _d, _cdef1, _file_info);
tmpMeta21 = mmc_mk_box3(0, tmpMeta20, _pa, mmc_mk_integer(_i));
tmpMeta1 = tmpMeta21;
goto tmp3_done;
}
case 1: {
fputs(MMC_STRINGDATA(_OMC_LIT69),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outTuple = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outTuple;
}
DLLExport
modelica_metatype omc_InteractiveUtil_transformFlatProgram(threadData_t *threadData, modelica_metatype _p)
{
modelica_metatype _newP = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_AbsynUtil_traverseClasses(threadData, _p, mmc_mk_none(), boxvar_InteractiveUtil_transformFlatClass, mmc_mk_integer(((modelica_integer) 0)), 1);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
_newP = tmpMeta7;
tmpMeta1 = _newP;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_newP = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _newP;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getSurroundingPackage(threadData_t *threadData, modelica_metatype _classpath, modelica_metatype _inProgram)
{
modelica_metatype _p = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_p = _inProgram;
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _p;
{
modelica_metatype _cdef = NULL;
modelica_metatype _pdef = NULL;
modelica_string _filename1 = NULL;
modelica_string _filename2 = NULL;
modelica_metatype _ppath = NULL;
modelica_metatype _within_ = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _classpath, _p, 0);
_filename1 = omc_AbsynUtil_classFilename(threadData, _cdef);
_ppath = omc_AbsynUtil_stripLast(threadData, _classpath);
_pdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _ppath, _p, 0);
_filename2 = omc_AbsynUtil_classFilename(threadData, _pdef);
tmp6 = (stringEqual(_filename1, _filename2));
if (1 != tmp6) goto goto_2;
tmpMeta1 = omc_InteractiveUtil_getSurroundingPackage(threadData, _ppath, _p);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = mmc_mk_cons(omc_InteractiveUtil_getPathedClassInProgram(threadData, _classpath, _p, 0), MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_p), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[2] = tmpMeta8;
_p = tmpMeta7;
tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_p), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[3] = omc_InteractiveUtil_buildWithin(threadData, _classpath);
_p = tmpMeta9;
tmpMeta1 = _p;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_p = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _p;
}
static modelica_metatype closure1_InteractiveUtil_classIsInFile(threadData_t *thData, modelica_metatype closure, modelica_metatype inElement)
{
modelica_string inFilename = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_InteractiveUtil_classIsInFile(thData, inFilename, inElement);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeClassDiffFiledInElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_string _inFilename)
{
modelica_metatype _outElements = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = mmc_mk_box1(0, _inFilename);
_outElements = omc_List_filterOnTrue(threadData, _inElements, (modelica_fnptr) mmc_mk_box2(0,closure1_InteractiveUtil_classIsInFile,tmpMeta1));
_return: OMC_LABEL_UNUSED
return _outElements;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classIsInFile(threadData_t *threadData, modelica_string _inFilename, modelica_metatype _inElement)
{
modelica_boolean _outInFile;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_string _filename = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 8));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_filename = tmpMeta10;
tmp1 = (stringEqual(_inFilename, _filename));
goto tmp3_done;
}
case 1: {
tmp1 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outInFile = tmp1;
_return: OMC_LABEL_UNUSED
return _outInFile;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classIsInFile(threadData_t *threadData, modelica_metatype _inFilename, modelica_metatype _inElement)
{
modelica_boolean _outInFile;
modelica_metatype out_outInFile;
_outInFile = omc_InteractiveUtil_classIsInFile(threadData, _inFilename, _inElement);
out_outInFile = mmc_mk_icon(_outInFile);
return out_outInFile;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerDiffFiledClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _a = NULL;
modelica_string _file = NULL;
modelica_string _baseClassName = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
_a = tmpMeta6;
_b = tmp8;
_c = tmp10;
_d = tmp12;
_e = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_file = tmpMeta21;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_removeClassDiffFiledInElementitemlist(threadData, _publst, _file);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta22 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta23 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta22, _file_info);
tmpMeta1 = tmpMeta23;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_integer tmp26;
modelica_metatype tmpMeta27;
modelica_integer tmp28;
modelica_metatype tmpMeta29;
modelica_integer tmp30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp26 = mmc_unbox_integer(tmpMeta25);
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp28 = mmc_unbox_integer(tmpMeta27);
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp30 = mmc_unbox_integer(tmpMeta29);
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,4,5) == 0) goto tmp3_end;
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 2));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 3));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 4));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 5));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 6));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta38), 2));
_a = tmpMeta24;
_b = tmp26;
_c = tmp28;
_d = tmp30;
_e = tmpMeta31;
_baseClassName = tmpMeta33;
_modifications = tmpMeta34;
_cmt = tmpMeta35;
_parts = tmpMeta36;
_ann = tmpMeta37;
_file_info = tmpMeta38;
_file = tmpMeta39;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_removeClassDiffFiledInElementitemlist(threadData, _publst, _file);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta40 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _parts2, _ann);
tmpMeta41 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta40, _file_info);
tmpMeta1 = tmpMeta41;
goto tmp3_done;
}
case 2: {
tmpMeta1 = _inClass;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerDiffFiledClasses(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _p = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_p = _inProgram;
{
modelica_metatype tmp4_1;
tmp4_1 = _p;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_p), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[2] = omc_List_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))), boxvar_InteractiveUtil_removeInnerDiffFiledClass);
_p = tmpMeta6;
tmpMeta1 = _p;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_p = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _p;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getContainedClassAndFile(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_string _filename = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _p_2 = NULL;
modelica_metatype _p = NULL;
modelica_metatype _classname = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_classname = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _classname, _p, 0);
_filename = omc_AbsynUtil_classFilename(threadData, _cdef);
_p_1 = omc_InteractiveUtil_getSurroundingPackage(threadData, _classname, _p);
_p_2 = omc_InteractiveUtil_removeInnerDiffFiledClasses(threadData, _p_1);
tmpMeta[0+0] = _p_2;
tmp1_c1 = _filename;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_namedargToModification(threadData_t *threadData, modelica_metatype _inNamedArg)
{
modelica_metatype _outElementArg = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inNamedArg;
{
modelica_metatype _elts = NULL;
modelica_string _id = NULL;
modelica_metatype _c = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,11,3) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,2) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
if (!listEmpty(tmpMeta9)) goto tmp3_end;
_id = tmpMeta6;
_c = tmpMeta7;
tmpMeta10 = omc_InteractiveUtil_recordConstructorToModification(threadData, _c);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,6) == 0) goto goto_2;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 5));
if (optionNone(tmpMeta11)) goto goto_2;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 6));
if (!optionNone(tmpMeta14)) goto goto_2;
_elts = tmpMeta13;
tmpMeta15 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
tmpMeta16 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _elts, _OMC_LIT13);
tmpMeta17 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT70, tmpMeta15, mmc_mk_some(tmpMeta16), mmc_mk_none(), _OMC_LIT18);
tmpMeta1 = tmpMeta17;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta18;
_e = tmpMeta19;
tmpMeta20 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta22 = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _e, _OMC_LIT18);
tmpMeta23 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta21, tmpMeta22);
tmpMeta24 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT70, tmpMeta20, mmc_mk_some(tmpMeta23), mmc_mk_none(), _OMC_LIT18);
tmpMeta1 = tmpMeta24;
goto tmp3_done;
}
case 2: {
omc_Print_printBuf(threadData, _OMC_LIT71);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElementArg = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_recordConstructorToModification(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outElementArg = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _eltarglst = NULL;
modelica_metatype _emod = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _nargs = NULL;
modelica_metatype _e = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (listEmpty(tmpMeta8)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmpMeta8);
tmpMeta10 = MMC_CDR(tmpMeta8);
if (!listEmpty(tmpMeta10)) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
if (!listEmpty(tmpMeta11)) goto tmp3_end;
_cr = tmpMeta6;
_e = tmpMeta9;
tmp4 += 1;
_p = omc_AbsynUtil_crefToPath(threadData, _cr);
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta13 = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _e, _OMC_LIT18);
tmpMeta14 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta12, tmpMeta13);
tmpMeta15 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT70, _p, mmc_mk_some(tmpMeta14), mmc_mk_none(), _OMC_LIT18);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,3) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,0,2) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
if (!listEmpty(tmpMeta18)) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 3));
_cr = tmpMeta16;
_nargs = tmpMeta19;
tmp4 += 1;
_eltarglst = omc_List_map(threadData, _nargs, boxvar_InteractiveUtil_namedargToModification);
_p = omc_AbsynUtil_crefToPath(threadData, _cr);
tmpMeta20 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _eltarglst, _OMC_LIT13);
tmpMeta21 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT70, _p, mmc_mk_some(tmpMeta20), mmc_mk_none(), _OMC_LIT18);
tmpMeta1 = tmpMeta21;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,3) == 0) goto tmp3_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,0,2) == 0) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
if (listEmpty(tmpMeta24)) goto tmp3_end;
tmpMeta25 = MMC_CAR(tmpMeta24);
tmpMeta26 = MMC_CDR(tmpMeta24);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,11,3) == 0) goto tmp3_end;
if (!listEmpty(tmpMeta26)) goto tmp3_end;
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 3));
_cr = tmpMeta22;
_e = tmpMeta25;
_nargs = tmpMeta27;
_eltarglst = omc_List_map(threadData, _nargs, boxvar_InteractiveUtil_namedargToModification);
_emod = omc_InteractiveUtil_recordConstructorToModification(threadData, _e);
_p = omc_AbsynUtil_crefToPath(threadData, _cr);
tmpMeta28 = mmc_mk_cons(_emod, _eltarglst);
tmpMeta29 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta28, _OMC_LIT13);
tmpMeta30 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT70, _p, mmc_mk_some(tmpMeta29), mmc_mk_none(), _OMC_LIT18);
tmpMeta1 = tmpMeta30;
goto tmp3_done;
}
case 3: {
omc_Print_printBuf(threadData, _OMC_LIT72);
omc_Dump_printExp(threadData, _inExp);
omc_Print_printBuf(threadData, _OMC_LIT49);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElementArg = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_annotationListToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst)
{
modelica_metatype _outAnnotation = NULL;
modelica_metatype _args = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_args = tmpMeta1;
{
modelica_metatype _arg;
for (tmpMeta2 = _inAbsynNamedArgLst; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_arg = MMC_CAR(tmpMeta2);
{
modelica_metatype tmp6_1;
tmp6_1 = _arg;
{
modelica_metatype _eltarg = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
for (; tmp6 < 3; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
if (8 != MMC_STRLEN(tmpMeta8) || strcmp(MMC_STRINGDATA(_OMC_LIT73), MMC_STRINGDATA(tmpMeta8)) != 0) goto tmp5_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
_e = tmpMeta9;
_eltarg = omc_InteractiveUtil_recordConstructorToModification(threadData, _e);
tmpMeta10 = mmc_mk_cons(_eltarg, _args);
tmpMeta3 = tmpMeta10;
goto tmp5_done;
}
case 1: {
modelica_metatype tmpMeta11;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
if (7 != MMC_STRLEN(tmpMeta11) || strcmp(MMC_STRINGDATA(_OMC_LIT74), MMC_STRINGDATA(tmpMeta11)) != 0) goto tmp5_end;
tmpMeta3 = _args;
goto tmp5_done;
}
case 2: {
tmpMeta3 = _args;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
goto_4:;
MMC_THROW_INTERNAL();
goto tmp5_done;
tmp5_done:;
}
}
_args = tmpMeta3;
}
}
tmpMeta13 = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, listReverseInPlace(_args));
_outAnnotation = tmpMeta13;
_return: OMC_LABEL_UNUSED
return _outAnnotation;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_commentToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst)
{
modelica_metatype _outStringOption = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynNamedArgLst;
{
modelica_string _str = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (7 != MMC_STRLEN(tmpMeta8) || strcmp(MMC_STRINGDATA(_OMC_LIT74), MMC_STRINGDATA(tmpMeta8)) != 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,3,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_str = tmpMeta10;
if (!(!(stringEqual(_str, _OMC_LIT16)))) goto tmp3_end;
tmpMeta1 = mmc_mk_some(_str);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_1);
tmpMeta12 = MMC_CDR(tmp4_1);
_rest = tmpMeta12;
_inAbsynNamedArgLst = _rest;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
tmpMeta1 = mmc_mk_none();
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outStringOption = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_annotationListToAbsynComment2(threadData_t *threadData, modelica_metatype _inNamedArgs)
{
modelica_metatype _outComment = NULL;
modelica_metatype _annargs = NULL;
modelica_metatype _ostrcmt = NULL;
modelica_metatype _ann = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = omc_InteractiveUtil_annotationListToAbsyn(threadData, _inNamedArgs);
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
_ann = tmpMeta1;
_annargs = tmpMeta2;
_ostrcmt = omc_InteractiveUtil_commentToAbsyn(threadData, _inNamedArgs);
{
modelica_metatype tmp6_1;modelica_metatype tmp6_2;
tmp6_1 = _ostrcmt;
tmp6_2 = _annargs;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
for (; tmp6 < 4; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
if (!listEmpty(tmp6_2)) goto tmp5_end;
if (optionNone(tmp6_1)) goto tmp5_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 1));
if (0 != MMC_STRLEN(tmpMeta8) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmpMeta8)) != 0) goto tmp5_end;
tmpMeta3 = mmc_mk_none();
goto tmp5_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (optionNone(tmp6_1)) goto tmp5_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 1));
if (!listEmpty(tmp6_2)) goto tmp5_end;
tmpMeta10 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_none(), _ostrcmt);
tmpMeta3 = mmc_mk_some(tmpMeta10);
goto tmp5_done;
}
case 2: {
if (!optionNone(tmp6_1)) goto tmp5_end;
if (!listEmpty(tmp6_2)) goto tmp5_end;
tmpMeta3 = mmc_mk_none();
goto tmp5_done;
}
case 3: {
modelica_metatype tmpMeta11;
tmpMeta11 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(_ann), _ostrcmt);
tmpMeta3 = mmc_mk_some(tmpMeta11);
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
goto_4:;
MMC_THROW_INTERNAL();
goto tmp5_done;
tmp5_done:;
}
}
_outComment = tmpMeta3;
_return: OMC_LABEL_UNUSED
return _outComment;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_annotationListToAbsynComment(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inAbsynCommentOption)
{
modelica_metatype _outAbsynCommentOption = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inAbsynNamedArgLst;
tmp4_2 = _inAbsynCommentOption;
{
modelica_metatype _ann = NULL;
modelica_metatype _nargs = NULL;
modelica_string _oldcmt = NULL;
modelica_string _newcmt = NULL;
modelica_metatype _cmtOpt = NULL;
modelica_metatype _annOptOld = NULL;
modelica_metatype _annOptNew = NULL;
modelica_metatype _annOpt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (!optionNone(tmp4_2)) goto tmp3_end;
_nargs = tmp4_1;
tmp4 += 3;
tmpMeta6 = omc_InteractiveUtil_annotationListToAbsynComment2(threadData, _nargs);
if (optionNone(tmpMeta6)) goto goto_2;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
_ann = tmpMeta7;
tmpMeta1 = mmc_mk_some(_ann);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (optionNone(tmp4_2)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
if (!optionNone(tmpMeta10)) goto tmp3_end;
_annOptOld = tmpMeta9;
_nargs = tmp4_1;
tmp4 += 2;
tmpMeta11 = omc_InteractiveUtil_annotationListToAbsynComment2(threadData, _nargs);
if (optionNone(tmpMeta11)) goto goto_2;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
_annOptNew = tmpMeta13;
_cmtOpt = tmpMeta14;
_annOpt = omc_InteractiveUtil_selectAnnotation(threadData, _annOptNew, _annOptOld);
tmpMeta15 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, _annOpt, _cmtOpt);
tmpMeta1 = mmc_mk_some(tmpMeta15);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
if (optionNone(tmp4_2)) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 3));
if (optionNone(tmpMeta18)) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
_annOptOld = tmpMeta17;
_oldcmt = tmpMeta19;
_nargs = tmp4_1;
tmpMeta20 = omc_InteractiveUtil_annotationListToAbsynComment2(threadData, _nargs);
if (optionNone(tmpMeta20)) goto goto_2;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 1));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 3));
if (!optionNone(tmpMeta23)) goto goto_2;
_annOptNew = tmpMeta22;
_annOpt = omc_InteractiveUtil_selectAnnotation(threadData, _annOptNew, _annOptOld);
tmpMeta24 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, _annOpt, mmc_mk_some(_oldcmt));
tmpMeta1 = mmc_mk_some(tmpMeta24);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
if (optionNone(tmp4_2)) goto tmp3_end;
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 2));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 3));
if (optionNone(tmpMeta27)) goto tmp3_end;
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 1));
_annOptOld = tmpMeta26;
_nargs = tmp4_1;
tmpMeta29 = omc_InteractiveUtil_annotationListToAbsynComment2(threadData, _nargs);
if (optionNone(tmpMeta29)) goto goto_2;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta29), 1));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 2));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 3));
if (optionNone(tmpMeta32)) goto goto_2;
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 1));
_annOptNew = tmpMeta31;
_newcmt = tmpMeta33;
_annOpt = omc_InteractiveUtil_selectAnnotation(threadData, _annOptNew, _annOptOld);
tmpMeta34 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, _annOpt, mmc_mk_some(_newcmt));
tmpMeta1 = mmc_mk_some(tmpMeta34);
goto tmp3_done;
}
case 4: {
tmpMeta1 = _inAbsynCommentOption;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynCommentOption = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynCommentOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_selectAnnotation(threadData_t *threadData, modelica_metatype _newAnn, modelica_metatype _oldAnn)
{
modelica_metatype _outAnn = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _newAnn;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta1 = _newAnn;
goto tmp3_done;
}
case 1: {
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta1 = _oldAnn;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAnn = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAnn;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_modificationToAbsyn2(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst)
{
modelica_metatype _outAbsynModificationOption = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynNamedArgLst;
{
modelica_metatype _exp = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta1 = mmc_mk_none();
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (7 != MMC_STRLEN(tmpMeta8) || strcmp(MMC_STRINGDATA(_OMC_LIT75), MMC_STRINGDATA(tmpMeta8)) != 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
_exp = tmpMeta9;
tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta11 = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _exp, _OMC_LIT18);
tmpMeta12 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta10, tmpMeta11);
tmpMeta1 = mmc_mk_some(tmpMeta12);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
if (12 != MMC_STRLEN(tmpMeta15) || strcmp(MMC_STRINGDATA(_OMC_LIT76), MMC_STRINGDATA(tmpMeta15)) != 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,18,1) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,7,1) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
_mod = tmpMeta18;
tmpMeta1 = mmc_mk_some(_mod);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta19 = MMC_CAR(tmp4_1);
tmpMeta20 = MMC_CDR(tmp4_1);
_xs = tmpMeta20;
_inAbsynNamedArgLst = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynModificationOption = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynModificationOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_modificationToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inAbsynModificationOption)
{
modelica_metatype _outAbsynModificationOption = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynNamedArgLst;
{
modelica_metatype _mod = NULL;
modelica_metatype _nargs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_nargs = tmp4_1;
tmpMeta6 = omc_InteractiveUtil_modificationToAbsyn2(threadData, _nargs);
if (optionNone(tmpMeta6)) goto goto_2;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
_mod = tmpMeta7;
tmpMeta1 = mmc_mk_some(_mod);
goto tmp3_done;
}
case 1: {
tmpMeta1 = _inAbsynModificationOption;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynModificationOption = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynModificationOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformPathedClassInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_fnptr _inFunc)
{
modelica_metatype _outClass = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_transformClassInProgram(threadData_t *threadData, modelica_string _inName, modelica_metatype _inProgram, modelica_fnptr _inFunc)
{
modelica_metatype _outProgram = NULL;
modelica_metatype _classes = NULL;
modelica_metatype _acc = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _wi = NULL;
modelica_metatype _cls = NULL;
modelica_string _name = NULL;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_acc = tmpMeta1;
tmpMeta2 = _inProgram;
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
_classes = tmpMeta3;
_wi = tmpMeta4;
while(1)
{
if(!1) break;
tmpMeta5 = _classes;
if (listEmpty(tmpMeta5)) MMC_THROW_INTERNAL();
tmpMeta6 = MMC_CAR(tmpMeta5);
tmpMeta7 = MMC_CDR(tmpMeta5);
_cls = tmpMeta6;
_classes = tmpMeta7;
tmpMeta8 = _cls;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_name = tmpMeta9;
if((stringEqual(_name, _inName)))
{
_cls = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _cls) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _cls);
tmpMeta10 = mmc_mk_cons(_cls, _classes);
_classes = omc_List_append__reverse(threadData, _acc, tmpMeta10);
tmpMeta11 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _classes, _wi);
_outProgram = tmpMeta11;
break;
}
}
_return: OMC_LABEL_UNUSED
return _outProgram;
}
static modelica_metatype closure2_InteractiveUtil_transformPathedClassInClass(threadData_t *thData, modelica_metatype closure, modelica_metatype inClass)
{
modelica_metatype inPath = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_fnptr inFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_transformPathedClassInClass(thData, inPath, inClass, inFunc);
}
DLLExport
modelica_metatype omc_InteractiveUtil_transformPathedClassInProgram(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_fnptr _inFunc)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
tmpMeta1 = omc_InteractiveUtil_transformClassInProgram(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 2))), _inProgram, ((modelica_fnptr) _inFunc));
goto tmp3_done;
}
case 5: {
_inPath = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 2)));
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta5;
tmpMeta5 = mmc_mk_box2(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 3))), ((modelica_fnptr) _inFunc));
tmpMeta1 = omc_InteractiveUtil_transformClassInProgram(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 2))), _inProgram, (modelica_fnptr) mmc_mk_box2(0,closure2_InteractiveUtil_transformPathedClassInClass,tmpMeta5));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outProgram = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_compareClassName(threadData_t *threadData, modelica_metatype _cl, modelica_string _str)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _cl;
{
modelica_string _c1name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,4,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_c1name = tmpMeta7;
tmp1 = (stringEqual(_str, _c1name));
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_c1name = tmpMeta8;
tmp1 = (stringEqual(_str, _c1name));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_compareClassName(threadData_t *threadData, modelica_metatype _cl, modelica_metatype _str)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_InteractiveUtil_compareClassName(threadData, _cl, _str);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassInProgram(threadData_t *threadData, modelica_string _inString, modelica_metatype _inProgram)
{
modelica_metatype _cl = NULL;
modelica_metatype _classes = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inProgram;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
_classes = tmpMeta2;
_cl = omc_List_find1(threadData, _classes, boxvar_InteractiveUtil_compareClassName, _inString);
_return: OMC_LABEL_UNUSED
return _cl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynClassLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementItemLst;
{
modelica_metatype _res = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,6) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,2) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
_class_ = tmpMeta11;
_rest = tmpMeta8;
_res = omc_InteractiveUtil_getClassesInElts(threadData, _rest);
tmpMeta12 = mmc_mk_cons(_class_, _res);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
_rest = tmpMeta14;
_inAbsynElementItemLst = _rest;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynClassLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elts = tmpMeta9;
_rest = tmpMeta8;
tmp4 += 1;
_l1 = omc_InteractiveUtil_getClassesInParts(threadData, _rest);
_l2 = omc_InteractiveUtil_getClassesInElts(threadData, _elts);
tmpMeta1 = listAppend(_l1, _l2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,1) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_elts = tmpMeta12;
_rest = tmpMeta11;
_l1 = omc_InteractiveUtil_getClassesInParts(threadData, _rest);
_l2 = omc_InteractiveUtil_getClassesInElts(threadData, _elts);
tmpMeta1 = listAppend(_l1, _l2);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
_rest = tmpMeta14;
tmpMeta1 = omc_InteractiveUtil_getClassesInParts(threadData, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynClassLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
tmpMeta1 = omc_InteractiveUtil_getClassesInParts(threadData, _parts);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_parts = tmpMeta9;
tmpMeta1 = omc_InteractiveUtil_getClassesInParts(threadData, _parts);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,4) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,2) == 0) goto tmp3_end;
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassInClass(threadData_t *threadData, modelica_string _inString, modelica_metatype _inClass)
{
modelica_metatype _outClass = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = omc_List_find1(threadData, omc_InteractiveUtil_getClassesInClass(threadData, _inClass), boxvar_InteractiveUtil_compareClassName, _inString);
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWorkNoThrow(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass)
{
modelica_metatype _outClass = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
{
modelica_metatype tmp8_1;
tmp8_1 = _inPath;
{
modelica_metatype _c = NULL;
modelica_string _str = NULL;
modelica_metatype _path = NULL;
int tmp8;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp8_1))) {
case 4: {
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,1,1) == 0) goto tmp7_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
_str = tmpMeta9;
tmpMeta5 = omc_InteractiveUtil_getClassInClass(threadData, _str, _inClass);
goto tmp7_done;
}
case 5: {
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,2,1) == 0) goto tmp7_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
_path = tmpMeta10;
tmpMeta5 = omc_InteractiveUtil_getPathedClassInProgramWorkNoThrow(threadData, _path, _inClass);
goto tmp7_done;
}
case 3: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,0,2) == 0) goto tmp7_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 3));
_str = tmpMeta11;
_path = tmpMeta12;
_c = omc_InteractiveUtil_getClassInClass(threadData, _str, _inClass);
tmpMeta5 = omc_InteractiveUtil_getPathedClassInProgramWorkNoThrow(threadData, _path, _c);
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
goto_6:;
goto goto_1;
goto tmp7_done;
tmp7_done:;
}
}
_outClass = tmpMeta5;
goto tmp2_done;
}
case 1: {
_outClass = _inClass;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWorkThrow(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_metatype _c = NULL;
modelica_string _str = NULL;
modelica_metatype _path = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
modelica_metatype tmpMeta5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_str = tmpMeta5;
tmpMeta1 = omc_InteractiveUtil_getClassInClass(threadData, _str, _inClass);
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta6;
_inPath = _path;
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_str = tmpMeta7;
_path = tmpMeta8;
_c = omc_InteractiveUtil_getClassInClass(threadData, _str, _inClass);
_inPath = _path;
_inClass = _c;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWork(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _enclOnErr)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_metatype _c = NULL;
modelica_string _str = NULL;
modelica_metatype _path = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
modelica_metatype tmpMeta5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_str = tmpMeta5;
tmpMeta1 = omc_InteractiveUtil_getClassInProgram(threadData, _str, _inProgram);
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta6;
tmpMeta1 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, _enclOnErr);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_str = tmpMeta7;
_path = tmpMeta8;
_c = omc_InteractiveUtil_getClassInProgram(threadData, _str, _inProgram);
tmpMeta1 = (_enclOnErr?omc_InteractiveUtil_getPathedClassInProgramWorkNoThrow(threadData, _path, _c):omc_InteractiveUtil_getPathedClassInProgramWorkThrow(threadData, _path, _c));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getPathedClassInProgramWork(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _enclOnErr)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_enclOnErr);
_outClass = omc_InteractiveUtil_getPathedClassInProgramWork(threadData, _inPath, _inProgram, tmp1);
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPathedClassInProgram(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _enclOnErr)
{
modelica_metatype _outClass = NULL;
modelica_metatype _p = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_outClass = omc_InteractiveUtil_getPathedClassInProgramWork(threadData, _inPath, _inProgram, _enclOnErr);
goto tmp2_done;
}
case 1: {
_p = omc_FBuiltin_getInitialFunctions(threadData, NULL);
_outClass = omc_InteractiveUtil_getPathedClassInProgramWork(threadData, _inPath, _p, _enclOnErr);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outClass;
}
modelica_metatype boxptr_InteractiveUtil_getPathedClassInProgram(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _enclOnErr)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_enclOnErr);
_outClass = omc_InteractiveUtil_getPathedClassInProgram(threadData, _inPath, _inProgram, tmp1);
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classInProgram(threadData_t *threadData, modelica_string _name, modelica_metatype _p)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _p;
{
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
{
modelica_metatype _cl;
for (tmpMeta6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))); !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
{
_cl = MMC_CAR(tmpMeta6);
tmpMeta7 = _cl;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_str = tmpMeta8;
if((stringEqual(_str, _name)))
{
_b = 1;
goto _return;
}
}
}
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classInProgram(threadData_t *threadData, modelica_metatype _name, modelica_metatype _p)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_InteractiveUtil_classInProgram(threadData, _name, _p);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassFromElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_string _inIdent)
{
modelica_metatype _outClass = NULL;
modelica_metatype _elem = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_elem = omc_List_getMemberOnTrue(threadData, _inIdent, _inElements, boxvar_InteractiveUtil_classElementItemIsNamed);
tmpMeta1 = _elem;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,0,1) == 0) MMC_THROW_INTERNAL();
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta2,0,6) == 0) MMC_THROW_INTERNAL();
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta3,0,2) == 0) MMC_THROW_INTERNAL();
tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 3));
_outClass = tmpMeta4;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInitialAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynInitialAlgorithmItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _lst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,6,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_lst = tmpMeta8;
tmpMeta1 = _lst;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
_xs = tmpMeta10;
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynInitialAlgorithmItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynInitialAlgorithmItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynAlgorithmItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _lst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,5,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_lst = tmpMeta8;
tmpMeta1 = _lst;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
_xs = tmpMeta10;
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynAlgorithmItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynAlgorithmItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInitialEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynInitialEquationItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _lst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,4,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_lst = tmpMeta8;
tmpMeta1 = _lst;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
_xs = tmpMeta10;
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynInitialEquationItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynInitialEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynEquationItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _lst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_lst = tmpMeta8;
tmpMeta1 = _lst;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
_xs = tmpMeta10;
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynEquationItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynEquationItemLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getProtectedList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _res2 = NULL;
modelica_metatype _res1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_res1 = tmpMeta9;
_rest = tmpMeta8;
_res2 = omc_InteractiveUtil_getProtectedList(threadData, _rest);
tmpMeta1 = listAppend(_res1, _res2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_xs = tmpMeta11;
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynElementItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPublicList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _res2 = NULL;
modelica_metatype _res1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_res1 = tmpMeta9;
_rest = tmpMeta8;
_res2 = omc_InteractiveUtil_getPublicList(threadData, _rest);
tmpMeta1 = listAppend(_res1, _res2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_xs = tmpMeta11;
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynElementItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteProtectedList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _res = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _x = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,1) == 0) goto tmp3_end;
_xs = tmpMeta8;
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
_x = tmpMeta9;
_xs = tmpMeta10;
_res = omc_InteractiveUtil_deleteProtectedList(threadData, _xs);
tmpMeta11 = mmc_mk_cons(_x, _res);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deletePublicList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _res = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _x = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
_xs = tmpMeta8;
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
_x = tmpMeta9;
_xs = tmpMeta10;
_res = omc_InteractiveUtil_deletePublicList(threadData, _xs);
tmpMeta11 = mmc_mk_cons(_x, _res);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInitialAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynAlgorithmItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inAbsynAlgorithmItemLst;
{
modelica_metatype _x = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _newalgorithmlst = NULL;
modelica_metatype _new = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,6,1) == 0) goto tmp3_end;
_rest = tmpMeta7;
_newalgorithmlst = tmp4_2;
tmpMeta9 = mmc_mk_box2(9, &Absyn_ClassPart_INITIALALGORITHMS__desc, _newalgorithmlst);
tmpMeta8 = mmc_mk_cons(tmpMeta9, _rest);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_x = tmpMeta10;
_xs = tmpMeta11;
_new = tmp4_2;
_ys = omc_InteractiveUtil_replaceInitialAlgorithmList(threadData, _xs, _new);
tmpMeta12 = mmc_mk_cons(_x, _ys);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynAlgorithmItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inAbsynAlgorithmItemLst;
{
modelica_metatype _x = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _newalgorithmlst = NULL;
modelica_metatype _new = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,5,1) == 0) goto tmp3_end;
_rest = tmpMeta7;
_newalgorithmlst = tmp4_2;
tmpMeta9 = mmc_mk_box2(8, &Absyn_ClassPart_ALGORITHMS__desc, _newalgorithmlst);
tmpMeta8 = mmc_mk_cons(tmpMeta9, _rest);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_x = tmpMeta10;
_xs = tmpMeta11;
_new = tmp4_2;
_ys = omc_InteractiveUtil_replaceAlgorithmList(threadData, _xs, _new);
tmpMeta12 = mmc_mk_cons(_x, _ys);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInitialEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynEquationItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inAbsynEquationItemLst;
{
modelica_metatype _x = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _newequationlst = NULL;
modelica_metatype _new = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,4,1) == 0) goto tmp3_end;
_rest = tmpMeta7;
_newequationlst = tmp4_2;
tmpMeta9 = mmc_mk_box2(7, &Absyn_ClassPart_INITIALEQUATIONS__desc, _newequationlst);
tmpMeta8 = mmc_mk_cons(tmpMeta9, _rest);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_x = tmpMeta10;
_xs = tmpMeta11;
_new = tmp4_2;
_ys = omc_InteractiveUtil_replaceInitialEquationList(threadData, _xs, _new);
tmpMeta12 = mmc_mk_cons(_x, _ys);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynEquationItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inAbsynEquationItemLst;
{
modelica_metatype _x = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _newequationlst = NULL;
modelica_metatype _new = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,1) == 0) goto tmp3_end;
_rest = tmpMeta7;
_newequationlst = tmp4_2;
tmpMeta9 = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _newequationlst);
tmpMeta8 = mmc_mk_cons(tmpMeta9, _rest);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_x = tmpMeta10;
_xs = tmpMeta11;
_new = tmp4_2;
_ys = omc_InteractiveUtil_replaceEquationList(threadData, _xs, _new);
tmpMeta12 = mmc_mk_cons(_x, _ys);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceProtectedList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inAbsynElementItemLst;
{
modelica_metatype _rest_1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _x = NULL;
modelica_metatype _newprotlist = NULL;
modelica_metatype _new = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
_rest = tmpMeta7;
_newprotlist = tmp4_2;
_rest_1 = omc_InteractiveUtil_deleteProtectedList(threadData, _rest);
tmpMeta9 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _newprotlist);
tmpMeta8 = mmc_mk_cons(tmpMeta9, _rest_1);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_x = tmpMeta10;
_xs = tmpMeta11;
_new = tmp4_2;
_ys = omc_InteractiveUtil_replaceProtectedList(threadData, _xs, _new);
tmpMeta12 = mmc_mk_cons(_x, _ys);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (!listEmpty(tmp4_1)) goto tmp3_end;
_newprotlist = tmp4_2;
tmpMeta14 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _newprotlist);
tmpMeta13 = mmc_mk_cons(tmpMeta14, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replacePublicList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inAbsynElementItemLst;
{
modelica_metatype _rest_1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _x = NULL;
modelica_metatype _newpublst = NULL;
modelica_metatype _new = NULL;
modelica_metatype _newpublist = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
_rest = tmpMeta7;
_newpublst = tmp4_2;
_rest_1 = omc_InteractiveUtil_deletePublicList(threadData, _rest);
tmpMeta9 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _newpublst);
tmpMeta8 = mmc_mk_cons(tmpMeta9, _rest_1);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_x = tmpMeta10;
_xs = tmpMeta11;
_new = tmp4_2;
_ys = omc_InteractiveUtil_replacePublicList(threadData, _xs, _new);
tmpMeta12 = mmc_mk_cons(_x, _ys);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (!listEmpty(tmp4_1)) goto tmp3_end;
_newpublist = tmp4_2;
tmpMeta14 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _newpublist);
tmpMeta13 = mmc_mk_cons(tmpMeta14, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInnerClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inIdent)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inIdent;
{
modelica_metatype _publst = NULL;
modelica_metatype _prolst = NULL;
modelica_metatype _parts = NULL;
modelica_string _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
_name = tmp4_2;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta1 = omc_InteractiveUtil_getClassFromElementitemlist(threadData, _publst, _name);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
_parts = tmpMeta9;
_name = tmp4_2;
tmp4 += 2;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta1 = omc_InteractiveUtil_getClassFromElementitemlist(threadData, _prolst, _name);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,4,5) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 5));
_parts = tmpMeta11;
_name = tmp4_2;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta1 = omc_InteractiveUtil_getClassFromElementitemlist(threadData, _publst, _name);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,4,5) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 5));
_parts = tmpMeta13;
_name = tmp4_2;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta1 = omc_InteractiveUtil_getClassFromElementitemlist(threadData, _prolst, _name);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_addClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype _info = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inClass;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 8));
_info = tmpMeta2;
tmpMeta4 = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(0), _inClass);
tmpMeta5 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(0), mmc_mk_none(), _OMC_LIT77, tmpMeta4, _info, mmc_mk_none());
tmpMeta6 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta5);
tmpMeta3 = mmc_mk_cons(tmpMeta6, MMC_REFSTRUCTLIT(mmc_nil));
_outAbsynElementItemLst = listAppend(_inAbsynElementItemLst, tmpMeta3);
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass, modelica_boolean _mergeAST, modelica_boolean *out_replaced)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_boolean _replaced;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inClass;
{
modelica_metatype _res = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _c = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_string _name1 = NULL;
modelica_string _name = NULL;
modelica_boolean _a;
modelica_boolean _e;
modelica_metatype _b = NULL;
modelica_metatype _info = NULL;
modelica_metatype _h = NULL;
modelica_metatype _io = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_integer tmp15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,2) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
tmp15 = mmc_unbox_integer(tmpMeta14);
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 7));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_a = tmp10;
_b = tmpMeta11;
_io = tmpMeta12;
_e = tmp15;
_c1 = tmpMeta16;
_name1 = tmpMeta17;
_h = tmpMeta18;
_xs = tmpMeta7;
_c2 = tmp4_2;
_name = tmpMeta19;
if (!(stringEqual(_name1, _name))) goto tmp3_end;
_c = (_mergeAST?omc_InteractiveUtil_mergeClasses(threadData, _c2, _c1):_c2);
tmpMeta20 = _c;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 8));
_info = tmpMeta21;
tmpMeta23 = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(_e), _c);
tmpMeta24 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_a), _b, _io, tmpMeta23, _info, _h);
tmpMeta25 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta24);
tmpMeta22 = mmc_mk_cons(tmpMeta25, _xs);
tmpMeta[0+0] = tmpMeta22;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta26 = MMC_CAR(tmp4_1);
tmpMeta27 = MMC_CDR(tmp4_1);
_e1 = tmpMeta26;
_xs = tmpMeta27;
_c = tmp4_2;
_res = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _xs, _c, _mergeAST ,&_replaced);
tmpMeta28 = mmc_mk_cons(_e1, _res);
tmpMeta[0+0] = tmpMeta28;
tmp1_c1 = _replaced;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta29;
tmpMeta29 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta29;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynElementItemLst = tmpMeta[0+0];
_replaced = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_replaced) { *out_replaced = _replaced; }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass, modelica_metatype _mergeAST, modelica_metatype *out_replaced)
{
modelica_integer tmp1;
modelica_boolean _replaced;
modelica_metatype _outAbsynElementItemLst = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outAbsynElementItemLst = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _inAbsynElementItemLst, _inClass, tmp1, &_replaced);
if (out_replaced) { *out_replaced = mmc_mk_icon(_replaced); }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_boolean _mergeAST)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inClass1;
tmp4_2 = _inClass2;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst2 = NULL;
modelica_metatype _prolst = NULL;
modelica_metatype _prolst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _c1 = NULL;
modelica_string _a = NULL;
modelica_string _bcname = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_boolean tmp21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta6;
_b = tmp8;
_c = tmp10;
_d = tmp12;
_e = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_c1 = tmp4_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta22 = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _publst, _c1, _mergeAST, &tmp21);
_publst2 = tmpMeta22;
if (1 != tmp21) goto goto_2;
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta23 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta24 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta23, _file_info);
tmpMeta1 = tmpMeta24;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_integer tmp31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_boolean tmp40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp31 = mmc_unbox_integer(tmpMeta30);
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta33,0,5) == 0) goto tmp3_end;
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 2));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 3));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 4));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 5));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 6));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta25;
_b = tmp27;
_c = tmp29;
_d = tmp31;
_e = tmpMeta32;
_typeVars = tmpMeta34;
_classAttrs = tmpMeta35;
_parts = tmpMeta36;
_ann = tmpMeta37;
_cmt = tmpMeta38;
_file_info = tmpMeta39;
_c1 = tmp4_1;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta41 = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _prolst, _c1, _mergeAST, &tmp40);
_prolst2 = tmpMeta41;
if (1 != tmp40) goto goto_2;
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _prolst2);
tmpMeta42 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta43 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta42, _file_info);
tmpMeta1 = tmpMeta43;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_integer tmp46;
modelica_metatype tmpMeta47;
modelica_integer tmp48;
modelica_metatype tmpMeta49;
modelica_integer tmp50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp46 = mmc_unbox_integer(tmpMeta45);
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp48 = mmc_unbox_integer(tmpMeta47);
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp50 = mmc_unbox_integer(tmpMeta49);
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta52,0,5) == 0) goto tmp3_end;
tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 2));
tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 3));
tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 4));
tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 5));
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 6));
tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta44;
_b = tmp46;
_c = tmp48;
_d = tmp50;
_e = tmpMeta51;
_typeVars = tmpMeta53;
_classAttrs = tmpMeta54;
_parts = tmpMeta55;
_ann = tmpMeta56;
_cmt = tmpMeta57;
_file_info = tmpMeta58;
_c1 = tmp4_1;
tmp4 += 3;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst = omc_InteractiveUtil_addClassInElementitemlist(threadData, _publst, _c1);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst);
tmpMeta59 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta60 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta59, _file_info);
tmpMeta1 = tmpMeta60;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta61;
modelica_metatype tmpMeta62;
modelica_integer tmp63;
modelica_metatype tmpMeta64;
modelica_integer tmp65;
modelica_metatype tmpMeta66;
modelica_integer tmp67;
modelica_metatype tmpMeta68;
modelica_metatype tmpMeta69;
modelica_metatype tmpMeta70;
modelica_metatype tmpMeta71;
modelica_metatype tmpMeta72;
modelica_metatype tmpMeta73;
modelica_metatype tmpMeta74;
modelica_metatype tmpMeta75;
modelica_boolean tmp76;
modelica_metatype tmpMeta77;
modelica_metatype tmpMeta78;
modelica_metatype tmpMeta79;
tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp63 = mmc_unbox_integer(tmpMeta62);
tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp65 = mmc_unbox_integer(tmpMeta64);
tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp67 = mmc_unbox_integer(tmpMeta66);
tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta69,4,5) == 0) goto tmp3_end;
tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 2));
tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 3));
tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 4));
tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 5));
tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 6));
tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta61;
_b = tmp63;
_c = tmp65;
_d = tmp67;
_e = tmpMeta68;
_bcname = tmpMeta70;
_modif = tmpMeta71;
_cmt = tmpMeta72;
_parts = tmpMeta73;
_ann = tmpMeta74;
_file_info = tmpMeta75;
_c1 = tmp4_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta77 = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _publst, _c1, _mergeAST, &tmp76);
_publst2 = tmpMeta77;
if (1 != tmp76) goto goto_2;
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta78 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta79 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta78, _file_info);
tmpMeta1 = tmpMeta79;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta80;
modelica_metatype tmpMeta81;
modelica_integer tmp82;
modelica_metatype tmpMeta83;
modelica_integer tmp84;
modelica_metatype tmpMeta85;
modelica_integer tmp86;
modelica_metatype tmpMeta87;
modelica_metatype tmpMeta88;
modelica_metatype tmpMeta89;
modelica_metatype tmpMeta90;
modelica_metatype tmpMeta91;
modelica_metatype tmpMeta92;
modelica_metatype tmpMeta93;
modelica_metatype tmpMeta94;
modelica_boolean tmp95;
modelica_metatype tmpMeta96;
modelica_metatype tmpMeta97;
modelica_metatype tmpMeta98;
tmpMeta80 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta81 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp82 = mmc_unbox_integer(tmpMeta81);
tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp84 = mmc_unbox_integer(tmpMeta83);
tmpMeta85 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp86 = mmc_unbox_integer(tmpMeta85);
tmpMeta87 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta88,4,5) == 0) goto tmp3_end;
tmpMeta89 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 2));
tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 3));
tmpMeta91 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 4));
tmpMeta92 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 5));
tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 6));
tmpMeta94 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta80;
_b = tmp82;
_c = tmp84;
_d = tmp86;
_e = tmpMeta87;
_bcname = tmpMeta89;
_modif = tmpMeta90;
_cmt = tmpMeta91;
_parts = tmpMeta92;
_ann = tmpMeta93;
_file_info = tmpMeta94;
_c1 = tmp4_1;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta96 = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _prolst, _c1, _mergeAST, &tmp95);
_prolst2 = tmpMeta96;
if (1 != tmp95) goto goto_2;
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _prolst2);
tmpMeta97 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta98 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta97, _file_info);
tmpMeta1 = tmpMeta98;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta99;
modelica_metatype tmpMeta100;
modelica_integer tmp101;
modelica_metatype tmpMeta102;
modelica_integer tmp103;
modelica_metatype tmpMeta104;
modelica_integer tmp105;
modelica_metatype tmpMeta106;
modelica_metatype tmpMeta107;
modelica_metatype tmpMeta108;
modelica_metatype tmpMeta109;
modelica_metatype tmpMeta110;
modelica_metatype tmpMeta111;
modelica_metatype tmpMeta112;
modelica_metatype tmpMeta113;
modelica_metatype tmpMeta114;
modelica_metatype tmpMeta115;
tmpMeta99 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta100 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp101 = mmc_unbox_integer(tmpMeta100);
tmpMeta102 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp103 = mmc_unbox_integer(tmpMeta102);
tmpMeta104 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp105 = mmc_unbox_integer(tmpMeta104);
tmpMeta106 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta107 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta107,4,5) == 0) goto tmp3_end;
tmpMeta108 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta107), 2));
tmpMeta109 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta107), 3));
tmpMeta110 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta107), 4));
tmpMeta111 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta107), 5));
tmpMeta112 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta107), 6));
tmpMeta113 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta99;
_b = tmp101;
_c = tmp103;
_d = tmp105;
_e = tmpMeta106;
_bcname = tmpMeta108;
_modif = tmpMeta109;
_cmt = tmpMeta110;
_parts = tmpMeta111;
_ann = tmpMeta112;
_file_info = tmpMeta113;
_c1 = tmp4_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst = omc_InteractiveUtil_addClassInElementitemlist(threadData, _publst, _c1);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst);
tmpMeta114 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta115 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta114, _file_info);
tmpMeta1 = tmpMeta115;
goto tmp3_done;
}
case 6: {
omc_Print_printBuf(threadData, _OMC_LIT78);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 7) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outClass = omc_InteractiveUtil_replaceInnerClass(threadData, _inClass1, _inClass2, tmp1);
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeClassInElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inClass)
{
modelica_metatype _outElements = NULL;
modelica_string _name = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inClass;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
_name = tmpMeta2;
_outElements = omc_List_deleteMemberOnTrue(threadData, _name, _inElements, boxvar_InteractiveUtil_classElementItemIsNamed, NULL);
_return: OMC_LABEL_UNUSED
return _outElements;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classElementItemIsNamed(threadData_t *threadData, modelica_string _inClassName, modelica_metatype _inElement)
{
modelica_boolean _outIsNamed;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_string _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_name = tmpMeta9;
tmp1 = (stringEqual(_inClassName, _name));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsNamed = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsNamed;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classElementItemIsNamed(threadData_t *threadData, modelica_metatype _inClassName, modelica_metatype _inElement)
{
modelica_boolean _outIsNamed;
modelica_metatype out_outIsNamed;
_outIsNamed = omc_InteractiveUtil_classElementItemIsNamed(threadData, _inClassName, _inElement);
out_outIsNamed = mmc_mk_icon(_outIsNamed);
return out_outIsNamed;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inClass1;
tmp4_2 = _inClass2;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst2 = NULL;
modelica_metatype _prolst = NULL;
modelica_metatype _prolst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _c1 = NULL;
modelica_string _a = NULL;
modelica_string _bcname = NULL;
modelica_string _n = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta6;
_b = tmp8;
_c = tmp10;
_d = tmp12;
_e = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_c1 = tmp4_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_removeClassInElementitemlist(threadData, _publst, _c1);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta21, _file_info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,0,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta23;
_b = tmp25;
_c = tmp27;
_d = tmp29;
_e = tmpMeta30;
_typeVars = tmpMeta32;
_classAttrs = tmpMeta33;
_parts = tmpMeta34;
_ann = tmpMeta35;
_cmt = tmpMeta36;
_file_info = tmpMeta37;
_c1 = tmp4_1;
tmp4 += 2;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_prolst2 = omc_InteractiveUtil_removeClassInElementitemlist(threadData, _prolst, _c1);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _prolst2);
tmpMeta38 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta38, _file_info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_integer tmp42;
modelica_metatype tmpMeta43;
modelica_integer tmp44;
modelica_metatype tmpMeta45;
modelica_integer tmp46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp42 = mmc_unbox_integer(tmpMeta41);
tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp44 = mmc_unbox_integer(tmpMeta43);
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp46 = mmc_unbox_integer(tmpMeta45);
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta48,4,5) == 0) goto tmp3_end;
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 2));
tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 3));
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 4));
tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 5));
tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 6));
tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta40;
_b = tmp42;
_c = tmp44;
_d = tmp46;
_e = tmpMeta47;
_bcname = tmpMeta49;
_modif = tmpMeta50;
_cmt = tmpMeta51;
_parts = tmpMeta52;
_ann = tmpMeta53;
_file_info = tmpMeta54;
_c1 = tmp4_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_removeClassInElementitemlist(threadData, _publst, _c1);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta55 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta56 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta55, _file_info);
tmpMeta1 = tmpMeta56;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_integer tmp59;
modelica_metatype tmpMeta60;
modelica_integer tmp61;
modelica_metatype tmpMeta62;
modelica_integer tmp63;
modelica_metatype tmpMeta64;
modelica_metatype tmpMeta65;
modelica_metatype tmpMeta66;
modelica_metatype tmpMeta67;
modelica_metatype tmpMeta68;
modelica_metatype tmpMeta69;
modelica_metatype tmpMeta70;
modelica_metatype tmpMeta71;
modelica_metatype tmpMeta72;
modelica_metatype tmpMeta73;
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp59 = mmc_unbox_integer(tmpMeta58);
tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp61 = mmc_unbox_integer(tmpMeta60);
tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp63 = mmc_unbox_integer(tmpMeta62);
tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta65,4,5) == 0) goto tmp3_end;
tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 2));
tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 3));
tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 4));
tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 5));
tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 6));
tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta57;
_b = tmp59;
_c = tmp61;
_d = tmp63;
_e = tmpMeta64;
_bcname = tmpMeta66;
_modif = tmpMeta67;
_cmt = tmpMeta68;
_parts = tmpMeta69;
_ann = tmpMeta70;
_file_info = tmpMeta71;
_c1 = tmp4_1;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_prolst2 = omc_InteractiveUtil_removeClassInElementitemlist(threadData, _prolst, _c1);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _prolst2);
tmpMeta72 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta73 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta72, _file_info);
tmpMeta1 = tmpMeta73;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta74;
modelica_metatype tmpMeta75;
modelica_metatype tmpMeta76;
modelica_metatype tmpMeta77;
tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_n = tmpMeta74;
_a = tmpMeta75;
_file_info = tmpMeta76;
tmpMeta77 = mmc_mk_cons(_n, mmc_mk_cons(_a, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addSourceMessage(threadData, _OMC_LIT83, tmpMeta77, _file_info);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getFirstIdentFromPath(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_string _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta6;
tmp1 = _name;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta7;
tmp1 = _name;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inWithin2, modelica_metatype _inClass3, modelica_boolean _mergeAST)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inClass1;
tmp4_2 = _inWithin2;
tmp4_3 = _inClass3;
{
modelica_metatype _cnew = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _cinner = NULL;
modelica_string _name2 = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto tmp3_end;
_c1 = tmp4_1;
_c2 = tmp4_3;
tmpMeta1 = omc_InteractiveUtil_replaceInnerClass(threadData, _c1, _c2, _mergeAST);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
_path = tmpMeta8;
_c1 = tmp4_1;
_c2 = tmp4_3;
_name2 = omc_InteractiveUtil_getFirstIdentFromPath(threadData, _path);
_cinner = omc_InteractiveUtil_getInnerClass(threadData, _c2, _name2);
tmpMeta9 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _path);
_cnew = omc_InteractiveUtil_insertClassInClass(threadData, _c1, tmpMeta9, _cinner, _mergeAST);
tmpMeta1 = omc_InteractiveUtil_replaceInnerClass(threadData, _cnew, _c2, _mergeAST);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_insertClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inWithin2, modelica_metatype _inClass3, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outClass = omc_InteractiveUtil_insertClassInClass(threadData, _inClass1, _inWithin2, _inClass3, tmp1);
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inWithin, modelica_metatype _inProgram, modelica_boolean _mergeAST)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inClass;
tmp4_2 = _inWithin;
tmp4_3 = _inProgram;
{
modelica_metatype _c2 = NULL;
modelica_metatype _c3 = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _p = NULL;
modelica_metatype _w = NULL;
modelica_string _n1 = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_string _name = NULL;
modelica_metatype _paths = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,2) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_w = tmp4_2;
_n1 = tmpMeta7;
_c1 = tmp4_1;
_p = tmp4_3;
tmp4 += 1;
_c2 = omc_InteractiveUtil_getClassInProgram(threadData, _n1, _p);
_c3 = omc_InteractiveUtil_insertClassInClass(threadData, _c1, _w, _c2, _mergeAST);
tmpMeta8 = mmc_mk_cons(_c3, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta9 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta8, _OMC_LIT7);
tmpMeta1 = omc_InteractiveUtil_updateProgram(threadData, tmpMeta9, _p, _mergeAST);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,1) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_w = tmp4_2;
_n1 = tmpMeta11;
_c1 = tmp4_1;
_p = tmp4_3;
tmp4 += 1;
_c2 = omc_InteractiveUtil_getClassInProgram(threadData, _n1, _p);
_c3 = omc_InteractiveUtil_insertClassInClass(threadData, _c1, _w, _c2, _mergeAST);
tmpMeta12 = mmc_mk_cons(_c3, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta13 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta12, _OMC_LIT7);
tmpMeta1 = omc_InteractiveUtil_updateProgram(threadData, tmpMeta13, _p, _mergeAST);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,2) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
if (12 != MMC_STRLEN(tmpMeta15) || strcmp(MMC_STRINGDATA(_OMC_LIT88), MMC_STRINGDATA(tmpMeta15)) != 0) goto tmp3_end;
_p = tmp4_3;
tmpMeta1 = _p;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta22;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta16;
_w = tmp4_2;
_p = tmp4_3;
_s1 = omc_Dump_unparseWithin(threadData, _w);
tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
omc_InteractiveUtil_getClassNamesRecursive(threadData, mmc_mk_none(), _p, 0, 0, tmpMeta17 ,&_paths);
{
modelica_metatype __omcQ_24tmpVar5;
modelica_metatype* tmp19;
modelica_metatype tmpMeta20;
modelica_string __omcQ_24tmpVar4;
modelica_integer tmp21;
modelica_metatype _p_loopVar = 0;
modelica_metatype _p;
_p_loopVar = _paths;
tmpMeta20 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar5 = tmpMeta20;
tmp19 = &__omcQ_24tmpVar5;
while(1) {
tmp21 = 1;
if (!listEmpty(_p_loopVar)) {
_p = MMC_CAR(_p_loopVar);
_p_loopVar = MMC_CDR(_p_loopVar);
tmp21--;
}
if (tmp21 == 0) {
__omcQ_24tmpVar4 = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT0, 1, 0);
*tmp19 = mmc_mk_cons(__omcQ_24tmpVar4,0);
tmp19 = &MMC_CDR(*tmp19);
} else if (tmp21 == 1) {
break;
} else {
goto goto_2;
}
}
*tmp19 = mmc_mk_nil();
tmpMeta18 = __omcQ_24tmpVar5;
}
_s2 = stringAppendList(omc_List_map1r(threadData, tmpMeta18, boxvar_stringAppend, _OMC_LIT84));
tmpMeta22 = mmc_mk_cons(_name, mmc_mk_cons(_s1, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil))));
omc_Error_addMessage(threadData, _OMC_LIT87, tmpMeta22);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_insertClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inWithin, modelica_metatype _inProgram, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outProgram = omc_InteractiveUtil_insertClassInProgram(threadData, _inClass, _inWithin, _inProgram, tmp1);
return _outProgram;
}
static modelica_metatype closure3_InteractiveUtil_replaceClassInProgram2(threadData_t *thData, modelica_metatype closure, modelica_metatype inClass)
{
modelica_string inClassName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_InteractiveUtil_replaceClassInProgram2(thData, inClass, inClassName);
}static modelica_metatype closure4_InteractiveUtil_replaceClassInProgram2(threadData_t *thData, modelica_metatype closure, modelica_metatype inClass)
{
modelica_string inClassName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_InteractiveUtil_replaceClassInProgram2(thData, inClass, inClassName);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_boolean _mergeAST)
{
modelica_metatype _outProgram = NULL;
modelica_string _cls_name1 = NULL;
modelica_string _cls_name2 = NULL;
modelica_metatype _clst = NULL;
modelica_metatype _clsFilter = NULL;
modelica_metatype _w = NULL;
modelica_boolean _replaced;
modelica_metatype _cls = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inClass;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
_cls_name1 = tmpMeta2;
tmpMeta3 = _inProgram;
tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 2));
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 3));
_clst = tmpMeta4;
_w = tmpMeta5;
if(_mergeAST)
{
tmpMeta6 = mmc_mk_box1(0, _cls_name1);
_clsFilter = omc_List_filterOnTrue(threadData, _clst, (modelica_fnptr) mmc_mk_box2(0,closure3_InteractiveUtil_replaceClassInProgram2,tmpMeta6));
if(listEmpty(_clsFilter))
{
_cls = _inClass;
}
else
{
tmpMeta7 = _clsFilter;
if (listEmpty(tmpMeta7)) MMC_THROW_INTERNAL();
tmpMeta8 = MMC_CAR(tmpMeta7);
tmpMeta9 = MMC_CDR(tmpMeta7);
_cls = tmpMeta8;
_cls = omc_InteractiveUtil_mergeClasses(threadData, _inClass, _cls);
}
}
else
{
_cls = _inClass;
}
tmpMeta10 = mmc_mk_box1(0, _cls_name1);
_clst = omc_List_replaceOnTrue(threadData, _cls, _clst, (modelica_fnptr) mmc_mk_box2(0,closure4_InteractiveUtil_replaceClassInProgram2,tmpMeta10) ,&_replaced);
if((!_replaced))
{
_clst = omc_List_appendElt(threadData, _inClass, _clst);
}
tmpMeta11 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _clst, _w);
_outProgram = tmpMeta11;
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outProgram = omc_InteractiveUtil_replaceClassInProgram(threadData, _inClass, _inProgram, tmp1);
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_replaceClassInProgram2(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inClassName)
{
modelica_boolean _outReplace;
modelica_string _cls_name = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inClass;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
_cls_name = tmpMeta2;
_outReplace = (stringEqual(_cls_name, _inClassName));
_return: OMC_LABEL_UNUSED
return _outReplace;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInProgram2(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inClassName)
{
modelica_boolean _outReplace;
modelica_metatype out_outReplace;
_outReplace = omc_InteractiveUtil_replaceClassInProgram2(threadData, _inClass, _inClassName);
out_outReplace = mmc_mk_icon(_outReplace);
return out_outReplace;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildPath(threadData_t *threadData, modelica_metatype _inWithin, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inWithin;
tmp4_2 = _inPath;
{
modelica_metatype _p = NULL;
modelica_metatype _p1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
_p = tmp4_2;
tmpMeta1 = _p;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta6;
_p1 = tmp4_2;
tmpMeta1 = omc_AbsynUtil_joinPaths(threadData, _p, _p1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outPath = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_addToEquation(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEquationItem)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inEquationItem;
{
modelica_metatype _eqlst = NULL;
modelica_metatype _eqlst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _newparts = NULL;
modelica_string _i = NULL;
modelica_string _baseClassName = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _eitem = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_eitem = tmp4_2;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
tmpMeta21 = mmc_mk_cons(_eitem, _eqlst);
_eqlst2 = tmpMeta21;
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst2);
tmpMeta22 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta23 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta22, _file_info);
tmpMeta1 = tmpMeta23;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_integer tmp26;
modelica_metatype tmpMeta27;
modelica_integer tmp28;
modelica_metatype tmpMeta29;
modelica_integer tmp30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp26 = mmc_unbox_integer(tmpMeta25);
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp28 = mmc_unbox_integer(tmpMeta27);
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp30 = mmc_unbox_integer(tmpMeta29);
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,0,5) == 0) goto tmp3_end;
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 2));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 3));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 4));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 5));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 6));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta24;
_p = tmp26;
_f = tmp28;
_e = tmp30;
_r = tmpMeta31;
_typeVars = tmpMeta33;
_classAttrs = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_cmt = tmpMeta37;
_file_info = tmpMeta38;
_eitem = tmp4_2;
tmp4 += 2;
tmpMeta40 = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta41 = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, tmpMeta40);
tmpMeta39 = mmc_mk_cons(tmpMeta41, MMC_REFSTRUCTLIT(mmc_nil));
_newparts = listAppend(_parts, tmpMeta39);
tmpMeta42 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _newparts, _ann, _cmt);
tmpMeta43 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta42, _file_info);
tmpMeta1 = tmpMeta43;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_integer tmp46;
modelica_metatype tmpMeta47;
modelica_integer tmp48;
modelica_metatype tmpMeta49;
modelica_integer tmp50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
modelica_metatype tmpMeta61;
tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp46 = mmc_unbox_integer(tmpMeta45);
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp48 = mmc_unbox_integer(tmpMeta47);
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp50 = mmc_unbox_integer(tmpMeta49);
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta52,4,5) == 0) goto tmp3_end;
tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 2));
tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 3));
tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 4));
tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 5));
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 6));
tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta44;
_p = tmp46;
_f = tmp48;
_e = tmp50;
_r = tmpMeta51;
_baseClassName = tmpMeta53;
_modifications = tmpMeta54;
_cmt = tmpMeta55;
_parts = tmpMeta56;
_ann = tmpMeta57;
_file_info = tmpMeta58;
_eitem = tmp4_2;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
tmpMeta59 = mmc_mk_cons(_eitem, _eqlst);
_eqlst2 = tmpMeta59;
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst2);
tmpMeta60 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _parts2, _ann);
tmpMeta61 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta60, _file_info);
tmpMeta1 = tmpMeta61;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta62;
modelica_metatype tmpMeta63;
modelica_integer tmp64;
modelica_metatype tmpMeta65;
modelica_integer tmp66;
modelica_metatype tmpMeta67;
modelica_integer tmp68;
modelica_metatype tmpMeta69;
modelica_metatype tmpMeta70;
modelica_metatype tmpMeta71;
modelica_metatype tmpMeta72;
modelica_metatype tmpMeta73;
modelica_metatype tmpMeta74;
modelica_metatype tmpMeta75;
modelica_metatype tmpMeta76;
modelica_metatype tmpMeta77;
modelica_metatype tmpMeta78;
modelica_metatype tmpMeta79;
modelica_metatype tmpMeta80;
modelica_metatype tmpMeta81;
tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp64 = mmc_unbox_integer(tmpMeta63);
tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp66 = mmc_unbox_integer(tmpMeta65);
tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp68 = mmc_unbox_integer(tmpMeta67);
tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta70,4,5) == 0) goto tmp3_end;
tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 2));
tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 3));
tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 4));
tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 5));
tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 6));
tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta62;
_p = tmp64;
_f = tmp66;
_e = tmp68;
_r = tmpMeta69;
_baseClassName = tmpMeta71;
_modifications = tmpMeta72;
_cmt = tmpMeta73;
_parts = tmpMeta74;
_ann = tmpMeta75;
_file_info = tmpMeta76;
_eitem = tmp4_2;
tmpMeta78 = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta79 = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, tmpMeta78);
tmpMeta77 = mmc_mk_cons(tmpMeta79, MMC_REFSTRUCTLIT(mmc_nil));
_newparts = listAppend(_parts, tmpMeta77);
tmpMeta80 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _newparts, _ann);
tmpMeta81 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta80, _file_info);
tmpMeta1 = tmpMeta81;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_addToProtected(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementItem)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inElementItem;
{
modelica_metatype _protlst = NULL;
modelica_metatype _protlst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _baseClassName = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _eitem = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_eitem = tmp4_2;
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta21 = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
_protlst2 = listAppend(_protlst, tmpMeta21);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _protlst2);
tmpMeta22 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta23 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta22, _file_info);
tmpMeta1 = tmpMeta23;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_integer tmp26;
modelica_metatype tmpMeta27;
modelica_integer tmp28;
modelica_metatype tmpMeta29;
modelica_integer tmp30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp26 = mmc_unbox_integer(tmpMeta25);
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp28 = mmc_unbox_integer(tmpMeta27);
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp30 = mmc_unbox_integer(tmpMeta29);
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,0,5) == 0) goto tmp3_end;
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 2));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 3));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 4));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 5));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 6));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta24;
_p = tmp26;
_f = tmp28;
_e = tmp30;
_r = tmpMeta31;
_typeVars = tmpMeta33;
_classAttrs = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_cmt = tmpMeta37;
_file_info = tmpMeta38;
_eitem = tmp4_2;
tmp4 += 2;
tmpMeta40 = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta41 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, tmpMeta40);
tmpMeta39 = mmc_mk_cons(tmpMeta41, _parts);
tmpMeta42 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, tmpMeta39, _ann, _cmt);
tmpMeta43 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta42, _file_info);
tmpMeta1 = tmpMeta43;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_integer tmp46;
modelica_metatype tmpMeta47;
modelica_integer tmp48;
modelica_metatype tmpMeta49;
modelica_integer tmp50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
modelica_metatype tmpMeta61;
tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp46 = mmc_unbox_integer(tmpMeta45);
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp48 = mmc_unbox_integer(tmpMeta47);
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp50 = mmc_unbox_integer(tmpMeta49);
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta52,4,5) == 0) goto tmp3_end;
tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 2));
tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 3));
tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 4));
tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 5));
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 6));
tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta44;
_p = tmp46;
_f = tmp48;
_e = tmp50;
_r = tmpMeta51;
_baseClassName = tmpMeta53;
_modifications = tmpMeta54;
_cmt = tmpMeta55;
_parts = tmpMeta56;
_ann = tmpMeta57;
_file_info = tmpMeta58;
_eitem = tmp4_2;
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta59 = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
_protlst2 = listAppend(_protlst, tmpMeta59);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _protlst2);
tmpMeta60 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _parts2, _ann);
tmpMeta61 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta60, _file_info);
tmpMeta1 = tmpMeta61;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta62;
modelica_metatype tmpMeta63;
modelica_integer tmp64;
modelica_metatype tmpMeta65;
modelica_integer tmp66;
modelica_metatype tmpMeta67;
modelica_integer tmp68;
modelica_metatype tmpMeta69;
modelica_metatype tmpMeta70;
modelica_metatype tmpMeta71;
modelica_metatype tmpMeta72;
modelica_metatype tmpMeta73;
modelica_metatype tmpMeta74;
modelica_metatype tmpMeta75;
modelica_metatype tmpMeta76;
modelica_metatype tmpMeta77;
modelica_metatype tmpMeta78;
modelica_metatype tmpMeta79;
modelica_metatype tmpMeta80;
modelica_metatype tmpMeta81;
tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp64 = mmc_unbox_integer(tmpMeta63);
tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp66 = mmc_unbox_integer(tmpMeta65);
tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp68 = mmc_unbox_integer(tmpMeta67);
tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta70,4,5) == 0) goto tmp3_end;
tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 2));
tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 3));
tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 4));
tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 5));
tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 6));
tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta62;
_p = tmp64;
_f = tmp66;
_e = tmp68;
_r = tmpMeta69;
_baseClassName = tmpMeta71;
_modifications = tmpMeta72;
_cmt = tmpMeta73;
_parts = tmpMeta74;
_ann = tmpMeta75;
_file_info = tmpMeta76;
_eitem = tmp4_2;
tmpMeta78 = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta79 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, tmpMeta78);
tmpMeta77 = mmc_mk_cons(tmpMeta79, _parts);
tmpMeta80 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, tmpMeta77, _ann);
tmpMeta81 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta80, _file_info);
tmpMeta1 = tmpMeta81;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addToPublic(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementItem)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inElementItem;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _baseClassName = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _eitem = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_eitem = tmp4_2;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta21 = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
_publst2 = listAppend(_publst, tmpMeta21);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta22 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta23 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta22, _file_info);
tmpMeta1 = tmpMeta23;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_integer tmp26;
modelica_metatype tmpMeta27;
modelica_integer tmp28;
modelica_metatype tmpMeta29;
modelica_integer tmp30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp26 = mmc_unbox_integer(tmpMeta25);
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp28 = mmc_unbox_integer(tmpMeta27);
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp30 = mmc_unbox_integer(tmpMeta29);
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,0,5) == 0) goto tmp3_end;
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 2));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 3));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 4));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 5));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 6));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta24;
_p = tmp26;
_f = tmp28;
_e = tmp30;
_r = tmpMeta31;
_typeVars = tmpMeta33;
_classAttrs = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_cmt = tmpMeta37;
_file_info = tmpMeta38;
_eitem = tmp4_2;
tmp4 += 2;
tmpMeta40 = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta41 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, tmpMeta40);
tmpMeta39 = mmc_mk_cons(tmpMeta41, _parts);
tmpMeta42 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, tmpMeta39, _ann, _cmt);
tmpMeta43 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta42, _file_info);
tmpMeta1 = tmpMeta43;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_integer tmp46;
modelica_metatype tmpMeta47;
modelica_integer tmp48;
modelica_metatype tmpMeta49;
modelica_integer tmp50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
modelica_metatype tmpMeta61;
tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp46 = mmc_unbox_integer(tmpMeta45);
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp48 = mmc_unbox_integer(tmpMeta47);
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp50 = mmc_unbox_integer(tmpMeta49);
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta52,4,5) == 0) goto tmp3_end;
tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 2));
tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 3));
tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 4));
tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 5));
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta52), 6));
tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta44;
_p = tmp46;
_f = tmp48;
_e = tmp50;
_r = tmpMeta51;
_baseClassName = tmpMeta53;
_modifications = tmpMeta54;
_cmt = tmpMeta55;
_parts = tmpMeta56;
_ann = tmpMeta57;
_file_info = tmpMeta58;
_eitem = tmp4_2;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta59 = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
_publst2 = listAppend(_publst, tmpMeta59);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta60 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _parts2, _ann);
tmpMeta61 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta60, _file_info);
tmpMeta1 = tmpMeta61;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta62;
modelica_metatype tmpMeta63;
modelica_integer tmp64;
modelica_metatype tmpMeta65;
modelica_integer tmp66;
modelica_metatype tmpMeta67;
modelica_integer tmp68;
modelica_metatype tmpMeta69;
modelica_metatype tmpMeta70;
modelica_metatype tmpMeta71;
modelica_metatype tmpMeta72;
modelica_metatype tmpMeta73;
modelica_metatype tmpMeta74;
modelica_metatype tmpMeta75;
modelica_metatype tmpMeta76;
modelica_metatype tmpMeta77;
modelica_metatype tmpMeta78;
modelica_metatype tmpMeta79;
modelica_metatype tmpMeta80;
modelica_metatype tmpMeta81;
tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp64 = mmc_unbox_integer(tmpMeta63);
tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp66 = mmc_unbox_integer(tmpMeta65);
tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp68 = mmc_unbox_integer(tmpMeta67);
tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta70,4,5) == 0) goto tmp3_end;
tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 2));
tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 3));
tmpMeta73 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 4));
tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 5));
tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta70), 6));
tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta62;
_p = tmp64;
_f = tmp66;
_e = tmp68;
_r = tmpMeta69;
_baseClassName = tmpMeta71;
_modifications = tmpMeta72;
_cmt = tmpMeta73;
_parts = tmpMeta74;
_ann = tmpMeta75;
_file_info = tmpMeta76;
_eitem = tmp4_2;
tmpMeta78 = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta79 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, tmpMeta78);
tmpMeta77 = mmc_mk_cons(tmpMeta79, _parts);
tmpMeta80 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, tmpMeta77, _ann);
tmpMeta81 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta80, _file_info);
tmpMeta1 = tmpMeta81;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentItemsName(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inQuoteNames)
{
modelica_metatype _outStrings = NULL;
modelica_metatype tmpMeta1;
modelica_string _name = NULL;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta13;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outStrings = tmpMeta1;
{
modelica_metatype _comp;
for (tmpMeta2 = listReverse(_inComponents); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_comp = MMC_CAR(tmpMeta2);
{
modelica_metatype tmp5_1;
tmp5_1 = _comp;
{
volatile mmc_switch_type tmp5;
int tmp6;
tmp5 = 0;
for (; tmp5 < 2; tmp5++) {
switch (MMC_SWITCH_CAST(tmp5)) {
case 0: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_boolean tmp11;
modelica_string tmp12;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_name = tmpMeta8;
tmp11 = (modelica_boolean)_inQuoteNames;
if(tmp11)
{
tmpMeta10 = mmc_mk_cons(_OMC_LIT45, mmc_mk_cons(_name, mmc_mk_cons(_OMC_LIT45, MMC_REFSTRUCTLIT(mmc_nil))));
tmp12 = stringAppendList(tmpMeta10);
}
else
{
tmp12 = _name;
}
tmpMeta9 = mmc_mk_cons(tmp12, _outStrings);
_outStrings = tmpMeta9;
goto tmp4_done;
}
case 1: {
goto tmp4_done;
}
}
goto tmp4_end;
tmp4_end: ;
}
goto goto_3;
goto_3:;
MMC_THROW_INTERNAL();
goto tmp4_done;
tmp4_done:;
}
}
;
}
}
_return: OMC_LABEL_UNUSED
return _outStrings;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentItemsName(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inQuoteNames)
{
modelica_integer tmp1;
modelica_metatype _outStrings = NULL;
modelica_metatype tmpMeta2;
tmp1 = mmc_unbox_integer(_inQuoteNames);
_outStrings = omc_InteractiveUtil_getComponentItemsName(threadData, _inComponents, tmp1);
return _outStrings;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentItemsNameAndComment(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inQuoteNames)
{
modelica_metatype _outStrings = NULL;
modelica_metatype tmpMeta1;
modelica_string _name = NULL;
modelica_string _cmt_str = NULL;
modelica_string _str = NULL;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta14;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outStrings = tmpMeta1;
{
modelica_metatype _comp;
for (tmpMeta2 = listReverse(_inComponents); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_comp = MMC_CAR(tmpMeta2);
{
modelica_metatype tmp5_1;
tmp5_1 = _comp;
{
volatile mmc_switch_type tmp5;
int tmp6;
tmp5 = 0;
for (; tmp5 < 2; tmp5++) {
switch (MMC_SWITCH_CAST(tmp5)) {
case 0: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_boolean tmp12;
modelica_string tmp13;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_name = tmpMeta8;
_cmt_str = omc_InteractiveUtil_getClassCommentInCommentOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 4))));
tmp12 = (modelica_boolean)_inQuoteNames;
if(tmp12)
{
tmpMeta10 = mmc_mk_cons(_OMC_LIT45, mmc_mk_cons(_name, mmc_mk_cons(_OMC_LIT89, mmc_mk_cons(_cmt_str, mmc_mk_cons(_OMC_LIT45, MMC_REFSTRUCTLIT(mmc_nil))))));
tmp13 = stringAppendList(tmpMeta10);
}
else
{
tmpMeta11 = mmc_mk_cons(_name, mmc_mk_cons(_OMC_LIT90, mmc_mk_cons(_cmt_str, mmc_mk_cons(_OMC_LIT45, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp13 = stringAppendList(tmpMeta11);
}
tmpMeta9 = mmc_mk_cons(tmp13, _outStrings);
_outStrings = tmpMeta9;
goto tmp4_done;
}
case 1: {
goto tmp4_done;
}
}
goto tmp4_end;
tmp4_end: ;
}
goto goto_3;
goto_3:;
MMC_THROW_INTERNAL();
goto tmp4_done;
tmp4_done:;
}
}
;
}
}
_return: OMC_LABEL_UNUSED
return _outStrings;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentItemsNameAndComment(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inQuoteNames)
{
modelica_integer tmp1;
modelica_metatype _outStrings = NULL;
modelica_metatype tmpMeta2;
tmp1 = mmc_unbox_integer(_inQuoteNames);
_outStrings = omc_InteractiveUtil_getComponentItemsNameAndComment(threadData, _inComponents, tmp1);
return _outStrings;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_prefixTypename(threadData_t *threadData, modelica_string _inType, modelica_metatype _inComponents)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype __omcQ_24tmpVar7;
modelica_metatype* tmp2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_string __omcQ_24tmpVar6;
modelica_integer tmp5;
modelica_metatype _c_loopVar = 0;
modelica_metatype _c;
_c_loopVar = _inComponents;
tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar7 = tmpMeta3;
tmp2 = &__omcQ_24tmpVar7;
while(1) {
tmp5 = 1;
if (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
tmp5--;
}
if (tmp5 == 0) {
tmpMeta4 = mmc_mk_cons(_inType, mmc_mk_cons(_OMC_LIT8, mmc_mk_cons(_c, MMC_REFSTRUCTLIT(mmc_nil))));
__omcQ_24tmpVar6 = stringAppendList(tmpMeta4);
*tmp2 = mmc_mk_cons(__omcQ_24tmpVar6,0);
tmp2 = &MMC_CDR(*tmp2);
} else if (tmp5 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp2 = mmc_mk_nil();
tmpMeta1 = __omcQ_24tmpVar7;
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_suffixInfos(threadData_t *threadData, modelica_metatype _eltInfo, modelica_metatype _idims, modelica_string _typeAd, modelica_string _suffix, modelica_boolean _inQuoteNames)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_boolean tmp4_3;
tmp4_1 = _eltInfo;
tmp4_2 = _idims;
tmp4_3 = _inQuoteNames;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _dims = NULL;
modelica_string _str_1 = NULL;
modelica_string _str = NULL;
modelica_string _dim = NULL;
modelica_string _s1 = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_boolean tmp14;
modelica_string tmp15;
modelica_metatype tmpMeta16;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_2);
tmpMeta10 = MMC_CDR(tmp4_2);
_str = tmpMeta7;
_rest = tmpMeta8;
_dim = tmpMeta9;
_dims = tmpMeta10;
_b = tmp4_3;
_res = omc_InteractiveUtil_suffixInfos(threadData, _rest, _dims, _typeAd, _suffix, _b);
tmpMeta11 = mmc_mk_cons(_dim, mmc_mk_cons(_typeAd, MMC_REFSTRUCTLIT(mmc_nil)));
_s1 = omc_Util_stringDelimitListNonEmptyElts(threadData, tmpMeta11, _OMC_LIT43);
tmp14 = (modelica_boolean)_b;
if(tmp14)
{
tmpMeta12 = mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT8, mmc_mk_cons(_suffix, mmc_mk_cons(_OMC_LIT91, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT92, MMC_REFSTRUCTLIT(mmc_nil)))))));
tmp15 = stringAppendList(tmpMeta12);
}
else
{
tmpMeta13 = mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT8, mmc_mk_cons(_suffix, mmc_mk_cons(_OMC_LIT93, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil)))))));
tmp15 = stringAppendList(tmpMeta13);
}
_str_1 = tmp15;
tmpMeta16 = mmc_mk_cons(_str_1, _res);
tmpMeta1 = tmpMeta16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_suffixInfos(threadData_t *threadData, modelica_metatype _eltInfo, modelica_metatype _idims, modelica_metatype _typeAd, modelica_metatype _suffix, modelica_metatype _inQuoteNames)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inQuoteNames);
_outStringLst = omc_InteractiveUtil_suffixInfos(threadData, _eltInfo, _idims, _typeAd, _suffix, tmp1);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsDimension(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynComponentItemLst;
{
modelica_string _str = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ad = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmpMeta7);
tmpMeta11 = MMC_CDR(tmpMeta7);
_ad = tmpMeta9;
_c2 = tmpMeta10;
_rest = tmpMeta11;
tmpMeta12 = mmc_mk_cons(_c2, _rest);
_lst = omc_InteractiveUtil_getComponentitemsDimension(threadData, tmpMeta12);
_str = stringDelimitList(omc_List_map(threadData, _ad, boxvar_Dump_printSubscriptStr), _OMC_LIT43);
tmpMeta13 = mmc_mk_cons(_str, _lst);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmp4_1);
tmpMeta15 = MMC_CDR(tmp4_1);
_rest = tmpMeta15;
tmpMeta1 = omc_InteractiveUtil_getComponentitemsDimension(threadData, _rest);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_1);
tmpMeta17 = MMC_CDR(tmp4_1);
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 3));
if (!listEmpty(tmpMeta17)) goto tmp3_end;
_ad = tmpMeta19;
_str = stringDelimitList(omc_List_map(threadData, _ad, boxvar_Dump_printSubscriptStr), _OMC_LIT43);
tmpMeta20 = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta1 = tmpMeta20;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta21 = MMC_CAR(tmp4_1);
tmpMeta22 = MMC_CDR(tmp4_1);
if (!listEmpty(tmpMeta22)) goto tmp3_end;
tmpMeta23 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta23;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrDirectionStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT94;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT95;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta8;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,2,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT96;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrDimensionStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
modelica_metatype _ad = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_ad = tmpMeta6;
tmp1 = omc_InteractiveUtil_arrayDimensionStr(threadData, mmc_mk_some(_ad));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrVariabilityStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT96;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT97;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta8;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,2,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT98;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta9;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,3,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT99;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrParallelismStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT100;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT101;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta8;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,2,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrStreamStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
modelica_boolean _s;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp7 = mmc_unbox_integer(tmpMeta6);
_s = tmp7;
tmp1 = (_s?_OMC_LIT102:_OMC_LIT103);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrFlowStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
modelica_boolean _f;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta6);
_f = tmp7;
tmp1 = (_f?_OMC_LIT102:_OMC_LIT103);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_innerOuterStr(threadData_t *threadData, modelica_metatype _inInnerOuter)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inInnerOuter;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = _OMC_LIT104;
goto tmp3_done;
}
case 4: {
tmp1 = _OMC_LIT105;
goto tmp3_done;
}
case 6: {
tmp1 = _OMC_LIT106;
goto tmp3_done;
}
case 5: {
tmp1 = _OMC_LIT107;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_boolean omc_InteractiveUtil_keywordReplaceable(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynRedeclareKeywordsOption;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,2,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_keywordReplaceable(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_keywordReplaceable(threadData, _inAbsynRedeclareKeywordsOption);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementsInfo2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv, modelica_metatype _acc)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;modelica_string tmp4_3;modelica_metatype tmp4_4;
tmp4_1 = _inAbsynElementLst;
tmp4_2 = _inBoolean;
tmp4_3 = _inString;
tmp4_4 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _rest = NULL;
modelica_string _access = NULL;
modelica_metatype _env = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta1 = listReverse(_acc);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
_elt = tmpMeta6;
_rest = tmpMeta7;
_b = tmp4_2;
_access = tmp4_3;
_env = tmp4_4;
_res = omc_InteractiveUtil_getElementInfo(threadData, _elt, _b, _access, _env);
_inAbsynElementLst = _rest;
_inBoolean = _b;
_inString = _access;
_inEnv = _env;
_acc = omc_List_append__reverse(threadData, _res, _acc);
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementsInfo2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv, modelica_metatype _acc)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outStringLst = omc_InteractiveUtil_getElementsInfo2(threadData, _inAbsynElementLst, tmp1, _inString, _inEnv, _acc);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementsInfo(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynElementLst;
tmp4_2 = _inString;
tmp4_3 = _inEnv;
{
modelica_metatype _lst = NULL;
modelica_string _lst_1 = NULL;
modelica_string _access = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
_elts = tmp4_1;
_access = tmp4_2;
_env = tmp4_3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta7 = omc_InteractiveUtil_getElementsInfo2(threadData, _elts, _inBoolean, _access, _env, tmpMeta6);
if (listEmpty(tmpMeta7)) goto goto_2;
tmpMeta8 = MMC_CAR(tmpMeta7);
tmpMeta9 = MMC_CDR(tmpMeta7);
_lst = tmpMeta7;
_lst_1 = stringDelimitList(_lst, _OMC_LIT108);
tmpMeta10 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_lst_1, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta10);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementsInfo(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outString = omc_InteractiveUtil_getElementsInfo(threadData, _inAbsynElementLst, tmp1, _inString, _inEnv);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_arrayDimensionStr(threadData_t *threadData, modelica_metatype _ad)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _ad;
{
modelica_metatype _adim = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_adim = tmpMeta6;
tmp1 = stringDelimitList(omc_List_map(threadData, _adim, boxvar_Dump_printSubscriptStr), _OMC_LIT43);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_metatype omc_InteractiveUtil_qualifyType(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _p)
{
jmp_buf *old_mmc_jumper = threadData->mmc_jumper;
modelica_metatype _fqp = NULL;
modelica_metatype _oenv_path = NULL;
modelica_metatype _env_path = NULL;
modelica_metatype _tp_path = NULL;
modelica_metatype _pkg_path = NULL;
modelica_string _tp_name = NULL;
modelica_metatype _env = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_fqp = _p;
if(omc_AbsynUtil_pathIsFullyQualified(threadData, _p))
{
goto _return;
}
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _inEnv, _p, mmc_mk_none() ,NULL ,&_env);
_oenv_path = omc_FGraph_getScopePath(threadData, _env);
if(isSome(_oenv_path))
{
tmpMeta6 = _oenv_path;
if (optionNone(tmpMeta6)) goto goto_2;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
_env_path = tmpMeta7;
_tp_name = omc_AbsynUtil_pathLastIdent(threadData, _p);
_tp_path = omc_AbsynUtil_suffixPath(threadData, _env_path, _tp_name);
}
else
{
_tp_path = _p;
}
tmpMeta1 = _tp_path;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
_pkg_path = omc_AbsynUtil_pathFirstPath(threadData, _p);
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _inEnv, _pkg_path, mmc_mk_none() ,NULL ,&_env);
_oenv_path = omc_FGraph_getScopePath(threadData, _env);
if(isSome(_oenv_path))
{
tmpMeta8 = _oenv_path;
if (optionNone(tmpMeta8)) goto goto_2;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
_env_path = tmpMeta9;
_tp_path = omc_AbsynUtil_joinPaths(threadData, _env_path, _p);
}
else
{
_tp_path = _p;
}
tmpMeta1 = _tp_path;
goto tmp3_done;
}
case 2: {
tmpMeta1 = _p;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_fqp = tmpMeta1;
_return: OMC_LABEL_UNUSED
threadData->mmc_jumper = old_mmc_jumper;
return _fqp;
}
DLLExport
modelica_string omc_InteractiveUtil_getConstrainClassStr(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _occ)
{
modelica_string _s = NULL;
modelica_metatype _p = NULL;
modelica_metatype _qpath = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _occ;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,3) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_p = tmpMeta8;
tmp1 = omc_AbsynUtil_pathString(threadData, omc_InteractiveUtil_qualifyPath(threadData, _inEnv, _p), _OMC_LIT0, 1, 0);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT109;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_s = tmp1;
_return: OMC_LABEL_UNUSED
return _s;
}
DLLExport
modelica_metatype omc_InteractiveUtil_qualifyPath(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_string _n = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta1 = _inPath;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (4 != MMC_STRLEN(tmpMeta6) || strcmp(MMC_STRINGDATA(_OMC_LIT114), MMC_STRINGDATA(tmpMeta6)) != 0) goto tmp3_end;
tmpMeta1 = _inPath;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT115), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
tmpMeta1 = _inPath;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta8) || strcmp(MMC_STRINGDATA(_OMC_LIT116), MMC_STRINGDATA(tmpMeta8)) != 0) goto tmp3_end;
tmpMeta1 = _inPath;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta9) || strcmp(MMC_STRINGDATA(_OMC_LIT117), MMC_STRINGDATA(tmpMeta9)) != 0) goto tmp3_end;
tmpMeta1 = _inPath;
goto tmp3_done;
}
case 5: {
{
{
volatile mmc_switch_type tmp12;
int tmp13;
tmp12 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp11_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp12 < 2; tmp12++) {
switch (MMC_SWITCH_CAST(tmp12)) {
case 0: {
if(omc_Flags_isSet(threadData, _OMC_LIT113))
{
omc_Interactive_mkFullyQual(threadData, _inEnv, _inPath ,&_outPath);
}
else
{
_outPath = omc_InteractiveUtil_qualifyType(threadData, omc_Interactive_envFromGraphicEnvCache(threadData, _inEnv), _inPath);
}
goto tmp11_done;
}
case 1: {
_outPath = _inPath;
goto tmp11_done;
}
}
goto tmp11_end;
tmp11_end: ;
}
goto goto_10;
tmp11_done:
(void)tmp12;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp11_done2;
goto_10:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp12 < 2) {
goto tmp11_top;
}
goto goto_2;
tmp11_done2:;
}
}
;
tmpMeta1 = _outPath;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outPath = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_boolean _inQuoteNames, modelica_string _inVisibility, modelica_metatype _inEnv)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _attr = NULL;
modelica_metatype _p = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _names = NULL;
modelica_metatype _dims = NULL;
modelica_string _typename = NULL;
modelica_string _final_str = NULL;
modelica_string _repl_str = NULL;
modelica_string _io_str = NULL;
modelica_string _flow_str = NULL;
modelica_string _stream_str = NULL;
modelica_string _var_str = NULL;
modelica_string _dir_str = NULL;
modelica_string _dim_str = NULL;
modelica_string _str = NULL;
modelica_string _cc_str = NULL;
modelica_string _name = NULL;
modelica_string _cmt_str = NULL;
modelica_metatype _ocmt = NULL;
modelica_metatype _oadim = NULL;
modelica_metatype _ad = NULL;
modelica_metatype _occ = NULL;
modelica_metatype _restriction = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,3) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,2) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_attr = tmpMeta7;
_p = tmpMeta9;
_comps = tmpMeta10;
_occ = tmpMeta11;
_typename = omc_AbsynUtil_pathString(threadData, omc_InteractiveUtil_qualifyPath(threadData, _inEnv, _p), _OMC_LIT0, 1, 0);
_names = omc_InteractiveUtil_getComponentItemsNameAndComment(threadData, _comps, _inQuoteNames);
_dims = omc_InteractiveUtil_getComponentitemsDimension(threadData, _comps);
_final_str = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 2))))?_OMC_LIT102:_OMC_LIT103);
_repl_str = (omc_InteractiveUtil_keywordReplaceable(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 3))))?_OMC_LIT102:_OMC_LIT103);
_io_str = omc_InteractiveUtil_innerOuterStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 4))));
_flow_str = omc_InteractiveUtil_attrFlowStr(threadData, _attr);
_stream_str = omc_InteractiveUtil_attrStreamStr(threadData, _attr);
_var_str = omc_InteractiveUtil_attrVariabilityStr(threadData, _attr);
_dir_str = omc_InteractiveUtil_attrDirectionStr(threadData, _attr);
_dim_str = omc_InteractiveUtil_attrDimensionStr(threadData, _attr);
_cc_str = omc_InteractiveUtil_getConstrainClassStr(threadData, _inEnv, _occ);
if(_inQuoteNames)
{
_typename = omc_StringUtil_quote(threadData, _typename);
_final_str = omc_StringUtil_quote(threadData, _final_str);
_repl_str = omc_StringUtil_quote(threadData, _repl_str);
_flow_str = omc_StringUtil_quote(threadData, _flow_str);
_stream_str = omc_StringUtil_quote(threadData, _stream_str);
_cc_str = omc_StringUtil_quote(threadData, _cc_str);
}
_names = omc_InteractiveUtil_prefixTypename(threadData, _typename, _names);
_names = omc_InteractiveUtil_prefixTypename(threadData, _OMC_LIT118, _names);
_names = omc_InteractiveUtil_prefixTypename(threadData, _OMC_LIT119, _names);
tmpMeta12 = mmc_mk_cons(_inVisibility, mmc_mk_cons(_final_str, mmc_mk_cons(_flow_str, mmc_mk_cons(_stream_str, mmc_mk_cons(_repl_str, mmc_mk_cons(_var_str, mmc_mk_cons(_io_str, mmc_mk_cons(_dir_str, mmc_mk_cons(_cc_str, MMC_REFSTRUCTLIT(mmc_nil))))))))));
_str = stringDelimitList(tmpMeta12, _OMC_LIT8);
tmpMeta1 = omc_InteractiveUtil_suffixInfos(threadData, _names, _dims, _dim_str, _str, _inQuoteNames);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_boolean tmp27;
modelica_string tmp28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,2) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,1,4) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,0,2) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 3));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 3));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 5));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_name = tmpMeta15;
_restriction = tmpMeta16;
_p = tmpMeta19;
_oadim = tmpMeta20;
_attr = tmpMeta21;
_ocmt = tmpMeta22;
_occ = tmpMeta23;
_typename = omc_AbsynUtil_pathString(threadData, omc_InteractiveUtil_qualifyPath(threadData, _inEnv, _p), _OMC_LIT0, 1, 0);
_cmt_str = omc_InteractiveUtil_getClassCommentInCommentOpt(threadData, _ocmt);
tmp27 = (modelica_boolean)_inQuoteNames;
if(tmp27)
{
tmpMeta25 = mmc_mk_cons(_OMC_LIT45, mmc_mk_cons(_name, mmc_mk_cons(_OMC_LIT89, mmc_mk_cons(_cmt_str, mmc_mk_cons(_OMC_LIT45, MMC_REFSTRUCTLIT(mmc_nil))))));
tmp28 = stringAppendList(tmpMeta25);
}
else
{
tmpMeta26 = mmc_mk_cons(_name, mmc_mk_cons(_OMC_LIT90, mmc_mk_cons(_cmt_str, mmc_mk_cons(_OMC_LIT45, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp28 = stringAppendList(tmpMeta26);
}
tmpMeta24 = mmc_mk_cons(tmp28, MMC_REFSTRUCTLIT(mmc_nil));
_names = tmpMeta24;
{
modelica_metatype tmp32_1;
tmp32_1 = _oadim;
{
volatile mmc_switch_type tmp32;
int tmp33;
tmp32 = 0;
for (; tmp32 < 2; tmp32++) {
switch (MMC_SWITCH_CAST(tmp32)) {
case 0: {
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
if (optionNone(tmp32_1)) goto tmp31_end;
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp32_1), 1));
_ad = tmpMeta34;
tmpMeta35 = mmc_mk_cons(stringDelimitList(omc_List_map(threadData, _ad, boxvar_Dump_printSubscriptStr), _OMC_LIT43), MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta29 = tmpMeta35;
goto tmp31_done;
}
case 1: {
tmpMeta29 = _OMC_LIT120;
goto tmp31_done;
}
}
goto tmp31_end;
tmp31_end: ;
}
goto goto_30;
goto_30:;
goto goto_2;
goto tmp31_done;
tmp31_done:;
}
}
_dims = tmpMeta29;
_final_str = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 2))))?_OMC_LIT102:_OMC_LIT103);
_repl_str = (omc_InteractiveUtil_keywordReplaceable(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 3))))?_OMC_LIT102:_OMC_LIT103);
_io_str = omc_InteractiveUtil_innerOuterStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 4))));
_flow_str = omc_InteractiveUtil_attrFlowStr(threadData, _attr);
_stream_str = omc_InteractiveUtil_attrStreamStr(threadData, _attr);
_var_str = omc_InteractiveUtil_attrVariabilityStr(threadData, _attr);
_dir_str = omc_InteractiveUtil_attrDirectionStr(threadData, _attr);
_dim_str = omc_InteractiveUtil_attrDimensionStr(threadData, _attr);
_cc_str = omc_InteractiveUtil_getConstrainClassStr(threadData, _inEnv, _occ);
if(_inQuoteNames)
{
_typename = omc_StringUtil_quote(threadData, _typename);
_final_str = omc_StringUtil_quote(threadData, _final_str);
_repl_str = omc_StringUtil_quote(threadData, _repl_str);
_flow_str = omc_StringUtil_quote(threadData, _flow_str);
_stream_str = omc_StringUtil_quote(threadData, _stream_str);
_cc_str = omc_StringUtil_quote(threadData, _cc_str);
}
_names = omc_InteractiveUtil_prefixTypename(threadData, _typename, _names);
tmpMeta36 = stringAppend(_OMC_LIT45,omc_Dump_unparseRestrictionStr(threadData, _restriction));
tmpMeta37 = stringAppend(tmpMeta36,_OMC_LIT45);
_names = omc_InteractiveUtil_prefixTypename(threadData, tmpMeta37, _names);
_names = omc_InteractiveUtil_prefixTypename(threadData, _OMC_LIT121, _names);
tmpMeta38 = mmc_mk_cons(_inVisibility, mmc_mk_cons(_final_str, mmc_mk_cons(_flow_str, mmc_mk_cons(_stream_str, mmc_mk_cons(_repl_str, mmc_mk_cons(_var_str, mmc_mk_cons(_io_str, mmc_mk_cons(_dir_str, mmc_mk_cons(_cc_str, MMC_REFSTRUCTLIT(mmc_nil))))))))));
_str = stringDelimitList(tmpMeta38, _OMC_LIT8);
tmpMeta1 = omc_InteractiveUtil_suffixInfos(threadData, _names, _dims, _dim_str, _str, _inQuoteNames);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta39;
tmpMeta39 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inQuoteNames, modelica_metatype _inVisibility, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inQuoteNames);
_outStringLst = omc_InteractiveUtil_getElementInfo(threadData, _inElement, tmp1, _inVisibility, _inEnv);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementsInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta9;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outAbsynElementLst = tmpMeta1;
{
modelica_metatype _el;
for (tmpMeta2 = _inAbsynElementItemLst; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_el = MMC_CAR(tmpMeta2);
{
modelica_metatype tmp5_1;
tmp5_1 = _el;
{
modelica_metatype _elt = NULL;
volatile mmc_switch_type tmp5;
int tmp6;
tmp5 = 0;
for (; tmp5 < 2; tmp5++) {
switch (MMC_SWITCH_CAST(tmp5)) {
case 0: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,1) == 0) goto tmp4_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
_elt = tmpMeta7;
tmpMeta8 = mmc_mk_cons(_elt, _outAbsynElementLst);
_outAbsynElementLst = tmpMeta8;
goto tmp4_done;
}
case 1: {
goto tmp4_done;
}
}
goto tmp4_end;
tmp4_end: ;
}
goto goto_3;
goto_3:;
MMC_THROW_INTERNAL();
goto tmp4_done;
tmp4_done:;
}
}
;
}
}
_outAbsynElementLst = listReverseInPlace(_outAbsynElementLst);
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getProtectedElementsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (!listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta18;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,5) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
_lst = tmpMeta10;
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta11;
{
modelica_metatype _elt;
for (tmpMeta12 = _lst; !listEmpty(tmpMeta12); tmpMeta12=MMC_CDR(tmpMeta12))
{
_elt = MMC_CAR(tmpMeta12);
{
modelica_metatype tmp15_1;
tmp15_1 = _elt;
{
volatile mmc_switch_type tmp15;
int tmp16;
tmp15 = 0;
for (; tmp15 < 2; tmp15++) {
switch (MMC_SWITCH_CAST(tmp15)) {
case 0: {
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp15_1,1,1) == 0) goto tmp14_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp15_1), 2));
_elts = tmpMeta17;
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp14_done;
}
case 1: {
goto tmp14_done;
}
}
goto tmp14_end;
tmp14_end: ;
}
goto goto_13;
goto_13:;
goto goto_2;
goto tmp14_done;
tmp14_done:;
}
}
;
}
}
tmpMeta1 = listReverseInPlace(_res);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,4,5) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 5));
if (!listEmpty(tmpMeta20)) goto tmp3_end;
tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta21;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta31;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,4,5) == 0) goto tmp3_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 5));
_lst = tmpMeta23;
tmpMeta24 = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta24;
{
modelica_metatype _elt;
for (tmpMeta25 = _lst; !listEmpty(tmpMeta25); tmpMeta25=MMC_CDR(tmpMeta25))
{
_elt = MMC_CAR(tmpMeta25);
{
modelica_metatype tmp28_1;
tmp28_1 = _elt;
{
volatile mmc_switch_type tmp28;
int tmp29;
tmp28 = 0;
for (; tmp28 < 2; tmp28++) {
switch (MMC_SWITCH_CAST(tmp28)) {
case 0: {
modelica_metatype tmpMeta30;
if (mmc__uniontype__metarecord__typedef__equal(tmp28_1,1,1) == 0) goto tmp27_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp28_1), 2));
_elts = tmpMeta30;
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp27_done;
}
case 1: {
goto tmp27_done;
}
}
goto tmp27_end;
tmp27_end: ;
}
goto goto_26;
goto_26:;
goto goto_2;
goto tmp27_done;
tmp27_done:;
}
}
;
}
}
tmpMeta1 = listReverseInPlace(_res);
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta32;
tmpMeta32 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynElementLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPublicElementsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (!listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta18;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,5) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
_lst = tmpMeta10;
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta11;
{
modelica_metatype _elt;
for (tmpMeta12 = _lst; !listEmpty(tmpMeta12); tmpMeta12=MMC_CDR(tmpMeta12))
{
_elt = MMC_CAR(tmpMeta12);
{
modelica_metatype tmp15_1;
tmp15_1 = _elt;
{
volatile mmc_switch_type tmp15;
int tmp16;
tmp15 = 0;
for (; tmp15 < 2; tmp15++) {
switch (MMC_SWITCH_CAST(tmp15)) {
case 0: {
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp15_1,0,1) == 0) goto tmp14_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp15_1), 2));
_elts = tmpMeta17;
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp14_done;
}
case 1: {
goto tmp14_done;
}
}
goto tmp14_end;
tmp14_end: ;
}
goto goto_13;
goto_13:;
goto goto_2;
goto tmp14_done;
tmp14_done:;
}
}
;
}
}
tmpMeta1 = listReverseInPlace(_res);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,4,5) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 5));
if (!listEmpty(tmpMeta20)) goto tmp3_end;
tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta21;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta31;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,4,5) == 0) goto tmp3_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 5));
_lst = tmpMeta23;
tmpMeta24 = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta24;
{
modelica_metatype _elt;
for (tmpMeta25 = _lst; !listEmpty(tmpMeta25); tmpMeta25=MMC_CDR(tmpMeta25))
{
_elt = MMC_CAR(tmpMeta25);
{
modelica_metatype tmp28_1;
tmp28_1 = _elt;
{
volatile mmc_switch_type tmp28;
int tmp29;
tmp28 = 0;
for (; tmp28 < 2; tmp28++) {
switch (MMC_SWITCH_CAST(tmp28)) {
case 0: {
modelica_metatype tmpMeta30;
if (mmc__uniontype__metarecord__typedef__equal(tmp28_1,0,1) == 0) goto tmp27_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp28_1), 2));
_elts = tmpMeta30;
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp27_done;
}
case 1: {
goto tmp27_done;
}
}
goto tmp27_end;
tmp27_end: ;
}
goto goto_26;
goto_26:;
goto goto_2;
goto tmp27_done;
tmp27_done:;
}
}
;
}
}
tmpMeta1 = listReverseInPlace(_res);
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta32;
tmpMeta32 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynElementLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getElementsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (!listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta18;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,5) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
_lst = tmpMeta10;
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta11;
{
modelica_metatype _elt;
for (tmpMeta12 = _lst; !listEmpty(tmpMeta12); tmpMeta12=MMC_CDR(tmpMeta12))
{
_elt = MMC_CAR(tmpMeta12);
{
modelica_metatype tmp15_1;
tmp15_1 = _elt;
{
int tmp15;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp15_1))) {
case 3: {
modelica_metatype tmpMeta16;
if (mmc__uniontype__metarecord__typedef__equal(tmp15_1,0,1) == 0) goto tmp14_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp15_1), 2));
_elts = tmpMeta16;
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp14_done;
}
case 4: {
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp15_1,1,1) == 0) goto tmp14_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp15_1), 2));
_elts = tmpMeta17;
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp14_done;
}
default:
tmp14_default: OMC_LABEL_UNUSED; {
goto tmp14_done;
}
}
goto tmp14_end;
tmp14_end: ;
}
goto goto_13;
goto_13:;
goto goto_2;
goto tmp14_done;
tmp14_done:;
}
}
;
}
}
tmpMeta1 = listReverseInPlace(_res);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,4,5) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 5));
if (!listEmpty(tmpMeta20)) goto tmp3_end;
tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta21;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta31;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,4,5) == 0) goto tmp3_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 5));
_lst = tmpMeta23;
tmpMeta24 = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta24;
{
modelica_metatype _elt;
for (tmpMeta25 = _lst; !listEmpty(tmpMeta25); tmpMeta25=MMC_CDR(tmpMeta25))
{
_elt = MMC_CAR(tmpMeta25);
{
modelica_metatype tmp28_1;
tmp28_1 = _elt;
{
int tmp28;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp28_1))) {
case 3: {
modelica_metatype tmpMeta29;
if (mmc__uniontype__metarecord__typedef__equal(tmp28_1,0,1) == 0) goto tmp27_end;
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp28_1), 2));
_elts = tmpMeta29;
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp27_done;
}
case 4: {
modelica_metatype tmpMeta30;
if (mmc__uniontype__metarecord__typedef__equal(tmp28_1,1,1) == 0) goto tmp27_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp28_1), 2));
_elts = tmpMeta30;
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp27_done;
}
default:
tmp27_default: OMC_LABEL_UNUSED; {
goto tmp27_done;
}
}
goto tmp27_end;
tmp27_end: ;
}
goto goto_26;
goto_26:;
goto goto_2;
goto tmp27_done;
tmp27_done:;
}
}
;
}
}
tmpMeta1 = listReverseInPlace(_res);
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta32;
tmpMeta32 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynElementLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_stripGraphicsAndInteractionModification(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype *out_outAbsynElementArgLst2)
{
modelica_metatype _outAbsynElementArgLst1 = NULL;
modelica_metatype _outAbsynElementArgLst2 = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementArgLst;
{
modelica_metatype _mod = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 4;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta6;
tmpMeta[0+1] = tmpMeta7;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta8 = MMC_CAR(tmp4_1);
tmpMeta9 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,1) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
if (11 != MMC_STRLEN(tmpMeta11) || strcmp(MMC_STRINGDATA(_OMC_LIT122), MMC_STRINGDATA(tmpMeta11)) != 0) goto tmp3_end;
_rest = tmpMeta9;
tmp4 += 2;
tmpMeta[0+0] = omc_InteractiveUtil_stripGraphicsAndInteractionModification(threadData, _rest, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,0,6) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,1,1) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
if (8 != MMC_STRLEN(tmpMeta15) || strcmp(MMC_STRINGDATA(_OMC_LIT123), MMC_STRINGDATA(tmpMeta15)) != 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 5));
if (!optionNone(tmpMeta16)) goto tmp3_end;
_rest = tmpMeta13;
tmp4 += 1;
tmpMeta[0+0] = omc_InteractiveUtil_stripGraphicsAndInteractionModification(threadData, _rest, &tmpMeta[0+1]);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta17 = MMC_CAR(tmp4_1);
tmpMeta18 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,0,6) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,1,1) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
if (8 != MMC_STRLEN(tmpMeta20) || strcmp(MMC_STRINGDATA(_OMC_LIT123), MMC_STRINGDATA(tmpMeta20)) != 0) goto tmp3_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 5));
if (optionNone(tmpMeta21)) goto tmp3_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 1));
_mod = tmpMeta17;
_rest = tmpMeta18;
_l1 = omc_InteractiveUtil_stripGraphicsAndInteractionModification(threadData, _rest ,&_l2);
tmpMeta23 = mmc_mk_cons(_mod, _l2);
tmpMeta[0+0] = _l1;
tmpMeta[0+1] = tmpMeta23;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta24 = MMC_CAR(tmp4_1);
tmpMeta25 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta24,0,6) == 0) goto tmp3_end;
_mod = tmpMeta24;
_rest = tmpMeta25;
_l1 = omc_InteractiveUtil_stripGraphicsAndInteractionModification(threadData, _rest ,&_l2);
tmpMeta26 = mmc_mk_cons(_mod, _l1);
tmpMeta[0+0] = tmpMeta26;
tmpMeta[0+1] = _l2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementArgLst1 = tmpMeta[0+0];
_outAbsynElementArgLst2 = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outAbsynElementArgLst2) { *out_outAbsynElementArgLst2 = _outAbsynElementArgLst2; }
return _outAbsynElementArgLst1;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAnnotationString(threadData_t *threadData, modelica_metatype _inAnnotation, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAnnotation;
{
modelica_string _ann_name = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _stripped_mod = NULL;
modelica_metatype _graphic_mod = NULL;
modelica_metatype _info = NULL;
modelica_boolean _is_icon;
modelica_boolean _is_diagram;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _graphic_prog = NULL;
modelica_metatype _placement_cls = NULL;
modelica_metatype _smod = NULL;
modelica_metatype _dmod = NULL;
modelica_metatype _graphic_exp = NULL;
modelica_metatype _graphic_dexp = NULL;
modelica_metatype _prop = NULL;
modelica_metatype _dae = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta6)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmpMeta6);
tmpMeta8 = MMC_CDR(tmpMeta6);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
if (optionNone(tmpMeta11)) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 7));
if (!listEmpty(tmpMeta8)) goto tmp3_end;
_ann_name = tmpMeta10;
_mod = tmpMeta13;
_info = tmpMeta14;
_is_icon = (stringEqual(_ann_name, _OMC_LIT124));
_is_diagram = (stringEqual(_ann_name, _OMC_LIT125));
_stripped_mod = omc_InteractiveUtil_stripGraphicsAndInteractionModification(threadData, _mod ,&_graphic_mod);
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT126);
{
{
volatile mmc_switch_type tmp17;
int tmp18;
tmp17 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp16_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp17 < 2; tmp17++) {
switch (MMC_SWITCH_CAST(tmp17)) {
case 0: {
modelica_metatype tmpMeta19;
tmpMeta19 = mmc_mk_box3(3, &Interactive_GraphicEnvCache_GRAPHIC__ENV__NO__CACHE__desc, _inFullProgram, _inModelPath);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, tmpMeta19, _mod ,&_env ,&_graphic_prog, NULL);
omc_ErrorExt_rollBack(threadData, _OMC_LIT126);
goto tmp16_done;
}
case 1: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
omc_ErrorExt_delCheckpoint(threadData, _OMC_LIT126);
tmpMeta20 = mmc_mk_box3(3, &Interactive_GraphicEnvCache_GRAPHIC__ENV__NO__CACHE__desc, _inFullProgram, _inModelPath);
tmpMeta21 = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, tmpMeta20, tmpMeta21 ,&_env ,&_graphic_prog, NULL);
goto tmp16_done;
}
}
goto tmp16_end;
tmp16_end: ;
}
goto goto_15;
tmp16_done:
(void)tmp17;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp16_done2;
goto_15:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp17 < 2) {
goto tmp16_top;
}
goto goto_2;
tmp16_done2:;
}
}
;
tmpMeta22 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _stripped_mod, _OMC_LIT13);
_smod = omc_AbsynToSCode_translateMod(threadData, mmc_mk_some(tmpMeta22), _OMC_LIT14, _OMC_LIT15, _info);
tmpMeta23 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta24 = mmc_mk_box2(3, &Mod_ModScope_COMPONENT__desc, _ann_name);
_cache = omc_Mod_elabMod(threadData, _cache, _env, tmpMeta23, _OMC_LIT11, _smod, 0, tmpMeta24, _info ,&_dmod);
_placement_cls = omc_AbsynToSCode_translateClass(threadData, omc_InteractiveUtil_getClassInProgram(threadData, _ann_name, _graphic_prog));
tmpMeta25 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta26 = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_instClass(threadData, _cache, _env, tmpMeta25, _OMC_LIT20, _dmod, _OMC_LIT11, _placement_cls, tmpMeta26, 0, _OMC_LIT21, _OMC_LIT22, _OMC_LIT25 ,NULL ,NULL ,NULL ,&_dae, NULL, NULL, NULL, NULL, NULL);
_outString = omc_DAEUtil_getVariableBindingsStr(threadData, omc_DAEUtil_daeElements(threadData, _dae));
if((_is_icon || _is_diagram))
{
{
{
volatile mmc_switch_type tmp29;
int tmp30;
tmp29 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp28_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp29 < 2; tmp29++) {
switch (MMC_SWITCH_CAST(tmp29)) {
case 0: {
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta31 = _graphic_mod;
if (listEmpty(tmpMeta31)) goto goto_27;
tmpMeta32 = MMC_CAR(tmpMeta31);
tmpMeta33 = MMC_CDR(tmpMeta31);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,0,6) == 0) goto goto_27;
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 5));
if (optionNone(tmpMeta34)) goto goto_27;
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 1));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta36,1,2) == 0) goto goto_27;
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta36), 2));
if (!listEmpty(tmpMeta33)) goto goto_27;
_graphic_exp = tmpMeta37;
omc_StaticScript_elabGraphicsExp(threadData, _cache, _env, _graphic_exp, 0, _OMC_LIT11, _info ,&_graphic_dexp ,&_prop);
if(_is_icon)
{
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT127);
_cache = omc_Ceval_cevalIfConstant(threadData, _cache, _env, _graphic_dexp, _prop, 0, _info ,&_graphic_dexp, NULL);
_graphic_dexp = omc_ExpressionSimplify_simplify1(threadData, _graphic_dexp, NULL);
omc_ErrorExt_rollBack(threadData, _OMC_LIT127);
}
tmpMeta38 = stringAppend(_outString,_OMC_LIT43);
tmpMeta39 = stringAppend(tmpMeta38,omc_ExpressionDump_printExpStr(threadData, _graphic_dexp));
_outString = tmpMeta39;
goto tmp28_done;
}
case 1: {
goto tmp28_done;
}
}
goto tmp28_end;
tmp28_end: ;
}
goto goto_27;
tmp28_done:
(void)tmp29;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp28_done2;
goto_27:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp29 < 2) {
goto tmp28_top;
}
goto goto_2;
tmp28_done2:;
}
}
;
}
omc_Print_clearErrorBuf(threadData);
tmp1 = _outString;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta40;
tmpMeta40 = stringAppend(omc_Dump_unparseAnnotation(threadData, _inAnnotation),_OMC_LIT37);
tmp1 = tmpMeta40;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildEnvForGraphicProgramFull(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inModelPath, modelica_metatype *out_outEnv, modelica_metatype *out_outProgram)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outProgram = NULL;
modelica_boolean _check_model;
modelica_boolean _eval_param;
modelica_boolean _failed;
modelica_boolean _graphics_mode;
modelica_metatype _graphic_program = NULL;
modelica_metatype _scode_program = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_failed = 0;
_graphic_program = omc_InteractiveUtil_modelicaAnnotationProgram(threadData, omc_Config_getAnnotationVersion(threadData));
_outProgram = omc_InteractiveUtil_updateProgram(threadData, _graphic_program, _inProgram, 0);
_scode_program = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _outProgram);
_check_model = omc_Flags_getConfigBool(threadData, _OMC_LIT133);
_eval_param = omc_Config_getEvaluateParametersInAnnotations(threadData);
_graphics_mode = omc_Config_getGraphicsExpMode(threadData);
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT133, 1);
omc_Config_setEvaluateParametersInAnnotations(threadData, 1);
omc_Config_setGraphicsExpMode(threadData, 1);
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
_outCache = omc_Inst_instantiateClass(threadData, omc_FCore_emptyCache(threadData), tmpMeta5, _scode_program, _inModelPath, 1 ,&_outEnv, NULL, NULL);
goto tmp2_done;
}
case 1: {
_failed = 1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
omc_Config_setEvaluateParametersInAnnotations(threadData, _eval_param);
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT133, _check_model);
omc_Config_setGraphicsExpMode(threadData, _graphics_mode);
if(_failed)
{
MMC_THROW_INTERNAL();
}
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildEnvForGraphicProgram(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inAnnotationMod, modelica_metatype *out_outEnv, modelica_metatype *out_outGraphicProgram, modelica_metatype *out_outGraphicEnvCache)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outGraphicProgram = NULL;
modelica_metatype _outGraphicEnvCache = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inCache;
{
modelica_metatype _scode_program = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 4)));
tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 5)));
tmpMeta[0+2] = _OMC_LIT134;
tmpMeta[0+3] = _inCache;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta5;
if(omc_AbsynUtil_onlyLiteralsInAnnotationMod(threadData, _inAnnotationMod))
{
_outCache = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 4)));
_outEnv = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 5)));
_outGraphicEnvCache = _inCache;
_outGraphicProgram = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2)));
}
else
{
_outCache = omc_InteractiveUtil_buildEnvForGraphicProgramFull(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3))) ,&_outEnv ,&_outGraphicProgram);
tmpMeta5 = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3))), _outCache, _outEnv);
_outGraphicEnvCache = tmpMeta5;
}
tmpMeta[0+0] = _outCache;
tmpMeta[0+1] = _outEnv;
tmpMeta[0+2] = _outGraphicProgram;
tmpMeta[0+3] = _outGraphicEnvCache;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if(omc_AbsynUtil_onlyLiteralsInAnnotationMod(threadData, _inAnnotationMod))
{
_outGraphicProgram = omc_InteractiveUtil_modelicaAnnotationProgram(threadData, omc_Config_getAnnotationVersion(threadData));
_scode_program = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _outGraphicProgram);
_outCache = omc_Inst_makeEnvFromProgram(threadData, _scode_program ,&_outEnv);
tmpMeta6 = mmc_mk_box5(4, &Interactive_GraphicEnvCache_GRAPHIC__ENV__PARTIAL__CACHE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3))), _outCache, _outEnv);
_outGraphicEnvCache = tmpMeta6;
}
else
{
_outCache = omc_InteractiveUtil_buildEnvForGraphicProgramFull(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3))) ,&_outEnv ,&_outGraphicProgram);
tmpMeta7 = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3))), _outCache, _outEnv);
_outGraphicEnvCache = tmpMeta7;
}
tmpMeta[0+0] = _outCache;
tmpMeta[0+1] = _outEnv;
tmpMeta[0+2] = _outGraphicProgram;
tmpMeta[0+3] = _outGraphicEnvCache;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outEnv = tmpMeta[0+1];
_outGraphicProgram = tmpMeta[0+2];
_outGraphicEnvCache = tmpMeta[0+3];
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outGraphicProgram) { *out_outGraphicProgram = _outGraphicProgram; }
if (out_outGraphicEnvCache) { *out_outGraphicEnvCache = _outGraphicEnvCache; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsModification(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynComponentItemLst;
{
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_string _str = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
if (optionNone(tmpMeta9)) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmpMeta7);
tmpMeta12 = MMC_CDR(tmpMeta7);
_mod = tmpMeta10;
_rest = tmpMeta7;
tmp4 += 4;
tmpMeta13 = mmc_mk_box2(10, &Absyn_CodeNode_C__MODIFICATION__desc, _mod);
tmpMeta14 = mmc_mk_box2(21, &Absyn_Exp_CODE__desc, tmpMeta13);
_s1 = omc_Dump_printExpStr(threadData, tmpMeta14);
_s2 = omc_InteractiveUtil_getComponentitemsModification(threadData, _rest);
tmpMeta15 = mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta15);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_1);
tmpMeta17 = MMC_CDR(tmp4_1);
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 4));
if (optionNone(tmpMeta19)) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 1));
if (!listEmpty(tmpMeta17)) goto tmp3_end;
_mod = tmpMeta20;
tmp4 += 2;
tmpMeta21 = mmc_mk_box2(10, &Absyn_CodeNode_C__MODIFICATION__desc, _mod);
tmpMeta22 = mmc_mk_box2(21, &Absyn_Exp_CODE__desc, tmpMeta21);
tmp1 = omc_Dump_printExpStr(threadData, tmpMeta22);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta23 = MMC_CAR(tmp4_1);
tmpMeta24 = MMC_CDR(tmp4_1);
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 4));
if (!optionNone(tmpMeta26)) goto tmp3_end;
if (listEmpty(tmpMeta24)) goto tmp3_end;
tmpMeta27 = MMC_CAR(tmpMeta24);
tmpMeta28 = MMC_CDR(tmpMeta24);
_rest = tmpMeta24;
_str = omc_InteractiveUtil_getComponentitemsModification(threadData, _rest);
tmpMeta29 = stringAppend(_OMC_LIT135,_str);
tmp1 = tmpMeta29;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta30 = MMC_CAR(tmp4_1);
tmpMeta31 = MMC_CDR(tmp4_1);
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 4));
if (!optionNone(tmpMeta33)) goto tmp3_end;
if (listEmpty(tmpMeta31)) goto tmp3_end;
tmpMeta34 = MMC_CAR(tmpMeta31);
tmpMeta35 = MMC_CDR(tmpMeta31);
_rest = tmpMeta31;
tmp4 += 1;
_str = omc_InteractiveUtil_getComponentitemsModification(threadData, _rest);
tmpMeta36 = stringAppend(_OMC_LIT135,_str);
tmp1 = tmpMeta36;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta37 = MMC_CAR(tmp4_1);
tmpMeta38 = MMC_CDR(tmp4_1);
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 4));
if (!optionNone(tmpMeta39)) goto tmp3_end;
if (!listEmpty(tmpMeta38)) goto tmp3_end;
tmp1 = _OMC_LIT136;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getComponentModification(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,3) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_lst = tmpMeta7;
tmp1 = omc_InteractiveUtil_getComponentitemsModification(threadData, _lst);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsAnnotation(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynComponentItemLst;
{
modelica_string _s1 = NULL;
modelica_string _str = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (optionNone(tmpMeta8)) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
if (optionNone(tmpMeta10)) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
if (listEmpty(tmpMeta12)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmpMeta12);
tmpMeta14 = MMC_CDR(tmpMeta12);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,6) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,1,1) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
if (9 != MMC_STRLEN(tmpMeta16) || strcmp(MMC_STRINGDATA(_OMC_LIT140), MMC_STRINGDATA(tmpMeta16)) != 0) goto tmp3_end;
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta17 = MMC_CAR(tmpMeta7);
tmpMeta18 = MMC_CDR(tmpMeta7);
_mod = tmpMeta12;
_rest = tmpMeta7;
tmpMeta19 = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, _mod);
_s1 = omc_InteractiveUtil_getAnnotationString(threadData, tmpMeta19, _inClass, _inFullProgram, _inModelPath);
_str = omc_InteractiveUtil_getComponentitemsAnnotation(threadData, _rest, _inClass, _inFullProgram, _inModelPath);
tmpMeta20 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT137, mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp1 = stringAppendList(tmpMeta20);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta21 = MMC_CAR(tmp4_1);
tmpMeta22 = MMC_CDR(tmp4_1);
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 4));
if (optionNone(tmpMeta23)) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 1));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 2));
if (optionNone(tmpMeta25)) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 1));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 2));
if (listEmpty(tmpMeta27)) goto tmp3_end;
tmpMeta28 = MMC_CAR(tmpMeta27);
tmpMeta29 = MMC_CDR(tmpMeta27);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta28,0,6) == 0) goto tmp3_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta30,1,1) == 0) goto tmp3_end;
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 2));
if (9 != MMC_STRLEN(tmpMeta31) || strcmp(MMC_STRINGDATA(_OMC_LIT140), MMC_STRINGDATA(tmpMeta31)) != 0) goto tmp3_end;
if (!listEmpty(tmpMeta22)) goto tmp3_end;
_mod = tmpMeta27;
tmpMeta32 = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, _mod);
_s1 = omc_InteractiveUtil_getAnnotationString(threadData, tmpMeta32, _inClass, _inFullProgram, _inModelPath);
tmpMeta33 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta33);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta34 = MMC_CAR(tmp4_1);
tmpMeta35 = MMC_CDR(tmp4_1);
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 4));
if (optionNone(tmpMeta36)) goto tmp3_end;
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta36), 1));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 2));
if (!optionNone(tmpMeta38)) goto tmp3_end;
if (listEmpty(tmpMeta35)) goto tmp3_end;
tmpMeta39 = MMC_CAR(tmpMeta35);
tmpMeta40 = MMC_CDR(tmpMeta35);
_rest = tmpMeta35;
_str = omc_InteractiveUtil_getComponentitemsAnnotation(threadData, _rest, _inClass, _inFullProgram, _inModelPath);
tmpMeta41 = stringAppend(_OMC_LIT138,_str);
tmp1 = tmpMeta41;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta47;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta42 = MMC_CAR(tmp4_1);
tmpMeta43 = MMC_CDR(tmp4_1);
tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta42), 4));
if (!optionNone(tmpMeta44)) goto tmp3_end;
if (listEmpty(tmpMeta43)) goto tmp3_end;
tmpMeta45 = MMC_CAR(tmpMeta43);
tmpMeta46 = MMC_CDR(tmpMeta43);
_rest = tmpMeta43;
_str = omc_InteractiveUtil_getComponentitemsAnnotation(threadData, _rest, _inClass, _inFullProgram, _inModelPath);
tmpMeta47 = stringAppend(_OMC_LIT139,_str);
tmp1 = tmpMeta47;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta48 = MMC_CAR(tmp4_1);
tmpMeta49 = MMC_CDR(tmp4_1);
tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 4));
if (!optionNone(tmpMeta50)) goto tmp3_end;
if (!listEmpty(tmpMeta49)) goto tmp3_end;
tmp1 = _OMC_LIT30;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_modelicaAnnotationProgram(threadData_t *threadData, modelica_string _annotationVersion)
{
modelica_metatype _annotationProgram = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;
tmp4_1 = _annotationVersion;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT145), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = omc_Parser_parsestring(threadData, _OMC_LIT141, _OMC_LIT142, omc_Config_acceptedGrammar(threadData), omc_Flags_getConfigEnum(threadData, _OMC_LIT189));
goto tmp3_done;
}
case 1: {
if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT147), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = omc_Parser_parsestring(threadData, _OMC_LIT190, _OMC_LIT191, omc_Config_acceptedGrammar(threadData), omc_Flags_getConfigEnum(threadData, _OMC_LIT189));
goto tmp3_done;
}
case 2: {
if (3 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT194), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = omc_Parser_parsestring(threadData, _OMC_LIT192, _OMC_LIT193, omc_Config_acceptedGrammar(threadData), omc_Flags_getConfigEnum(threadData, _OMC_LIT189));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_annotationProgram = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _annotationProgram;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentAnnotation(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,3) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_lst = tmpMeta7;
tmp1 = omc_InteractiveUtil_getComponentitemsAnnotation(threadData, _lst, _inClass, _inFullProgram, _inModelPath);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsFromItems(threadData_t *threadData, modelica_metatype _inComponentItems, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _outCache = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _res = NULL;
modelica_string _str = NULL;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta1;
_outCache = _inCache;
{
modelica_metatype _comp;
for (tmpMeta2 = listReverse(_inComponentItems); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_comp = MMC_CAR(tmpMeta2);
{
modelica_metatype tmp6_1;
tmp6_1 = _comp;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
for (; tmp6 < 2; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (optionNone(tmpMeta8)) goto tmp5_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
if (optionNone(tmpMeta10)) goto tmp5_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
_annotations = tmpMeta12;
tmpMeta3 = listAppend(_annotations, _ccAnnotations);
goto tmp5_done;
}
case 1: {
tmpMeta3 = _ccAnnotations;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
goto_4:;
MMC_THROW_INTERNAL();
goto tmp5_done;
tmp5_done:;
}
}
_annotations = tmpMeta3;
_res = omc_InteractiveUtil_getElementitemsAnnotationsElArgs(threadData, _annotations, _inEnv, _inClass, _outCache ,&_outCache);
_str = stringDelimitList(_res, _OMC_LIT8);
tmpMeta14 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta13 = mmc_mk_cons(stringAppendList(tmpMeta14), _outStringLst);
_outStringLst = tmpMeta13;
}
}
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsElArgs(threadData_t *threadData, modelica_metatype _inElementArgs, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _outCache = NULL;
modelica_string _str = NULL;
modelica_string _ann_name = NULL;
modelica_metatype _eq_aexp = NULL;
modelica_metatype _eq_dexp = NULL;
modelica_metatype _prop = NULL;
modelica_metatype _info = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _c = NULL;
modelica_metatype _smod = NULL;
modelica_metatype _dmod = NULL;
modelica_metatype _dae = NULL;
modelica_metatype tmpMeta2;
modelica_string tmp3 = 0;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta1;
_outCache = _inCache;
{
modelica_metatype _e;
for (tmpMeta2 = listReverse(_inElementArgs); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_e = MMC_CAR(tmpMeta2);
{
volatile modelica_metatype tmp6_1;
tmp6_1 = _e;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp5_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp6 < 4; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,1) == 0) goto tmp5_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (optionNone(tmpMeta10)) goto tmp5_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
if (!listEmpty(tmpMeta12)) goto tmp5_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,1,2) == 0) goto tmp5_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 7));
_ann_name = tmpMeta9;
_eq_aexp = tmpMeta14;
_info = tmpMeta15;
tmp6 += 3;
tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, tmpMeta16 ,&_env ,NULL ,&_outCache);
omc_StaticScript_elabGraphicsExp(threadData, _cache, _env, _eq_aexp, 0, _OMC_LIT11, _info ,&_eq_dexp ,&_prop);
_cache = omc_Ceval_cevalIfConstant(threadData, _cache, _env, _eq_dexp, _prop, 0, _info ,&_eq_dexp ,&_prop);
_eq_dexp = omc_ExpressionSimplify_simplify1(threadData, _eq_dexp, NULL);
omc_Print_clearErrorBuf(threadData);
_str = omc_ExpressionDump_printExpStr(threadData, _eq_dexp);
tmpMeta17 = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil))));
tmp3 = stringAppendList(tmpMeta17);
goto tmp5_done;
}
case 1: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,1,1) == 0) goto tmp5_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (optionNone(tmpMeta20)) goto tmp5_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 1));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,0,0) == 0) goto tmp5_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 7));
_ann_name = tmpMeta19;
_mod = tmpMeta22;
_info = tmpMeta24;
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, _mod ,&_env ,NULL ,&_outCache);
_cache = omc_Lookup_lookupClassIdent(threadData, _cache, _inEnv, _ann_name, mmc_mk_none() ,&_c ,&_env2);
tmpMeta25 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _mod, _OMC_LIT13);
_smod = omc_AbsynToSCode_translateMod(threadData, mmc_mk_some(tmpMeta25), _OMC_LIT14, _OMC_LIT15, _info);
tmpMeta26 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta27 = mmc_mk_box2(3, &Mod_ModScope_COMPONENT__desc, _ann_name);
_cache = omc_Mod_elabMod(threadData, _cache, _env, tmpMeta26, _OMC_LIT11, _smod, 0, tmpMeta27, _OMC_LIT18 ,&_dmod);
_c = omc_SCodeUtil_classSetPartial(threadData, _c, _OMC_LIT19);
tmpMeta28 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta29 = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_instClass(threadData, _cache, _env2, tmpMeta28, _OMC_LIT20, _dmod, _OMC_LIT11, _c, tmpMeta29, 0, _OMC_LIT21, _OMC_LIT22, _OMC_LIT25 ,NULL ,NULL ,NULL ,&_dae, NULL, NULL, NULL, NULL, NULL);
_str = omc_DAEUtil_getVariableBindingsStr(threadData, omc_DAEUtil_daeElements(threadData, _dae));
tmpMeta30 = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT26, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT27, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp3 = stringAppendList(tmpMeta30);
goto tmp5_done;
}
case 2: {
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,1,1) == 0) goto tmp5_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (optionNone(tmpMeta33)) goto tmp5_end;
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 1));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta35,0,0) == 0) goto tmp5_end;
_ann_name = tmpMeta32;
tmp6 += 1;
tmpMeta36 = stringAppend(_ann_name,_OMC_LIT28);
tmp3 = tmpMeta36;
goto tmp5_done;
}
case 3: {
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta37,1,1) == 0) goto tmp5_end;
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 2));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (!optionNone(tmpMeta39)) goto tmp5_end;
_ann_name = tmpMeta38;
tmpMeta40 = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, tmpMeta40 ,NULL ,NULL ,&_outCache);
_cache = omc_Lookup_lookupClassIdent(threadData, _cache, _inEnv, _ann_name, mmc_mk_none() ,&_c ,&_env);
_c = omc_SCodeUtil_classSetPartial(threadData, _c, _OMC_LIT19);
tmpMeta41 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta42 = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_instClass(threadData, _cache, _env, tmpMeta41, _OMC_LIT20, _OMC_LIT29, _OMC_LIT11, _c, tmpMeta42, 0, _OMC_LIT21, _OMC_LIT22, _OMC_LIT25 ,NULL ,NULL ,NULL ,&_dae, NULL, NULL, NULL, NULL, NULL);
_str = omc_DAEUtil_getVariableBindingsStr(threadData, omc_DAEUtil_daeElements(threadData, _dae));
tmpMeta43 = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT26, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT27, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp3 = stringAppendList(tmpMeta43);
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
tmp5_done:
(void)tmp6;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp5_done2;
goto_4:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp6 < 4) {
goto tmp5_top;
}
MMC_THROW_INTERNAL();
tmp5_done2:;
}
}
_str = tmp3;
tmpMeta44 = mmc_mk_cons(_str, _outStringLst);
_outStringLst = tmpMeta44;
}
}
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAnnotationsFromConstraintClass(threadData_t *threadData, modelica_metatype _inCC)
{
modelica_metatype _outElArgLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inCC;
{
modelica_metatype _elementArgs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (optionNone(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
if (optionNone(tmpMeta9)) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_elementArgs = tmpMeta11;
tmpMeta1 = _elementArgs;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElArgLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElArgLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsFromElArgs(threadData_t *threadData, modelica_metatype _inAnnotations, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _outCache = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _res = NULL;
modelica_string _str = NULL;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta1;
_outCache = _inCache;
_annotations = listAppend(_inAnnotations, _ccAnnotations);
_res = omc_InteractiveUtil_getElementitemsAnnotationsElArgs(threadData, _annotations, _inEnv, _inClass, _outCache ,&_outCache);
_str = stringDelimitList(_res, _OMC_LIT8);
tmpMeta3 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta2 = mmc_mk_cons(stringAppendList(tmpMeta3), _outStringLst);
_outStringLst = tmpMeta2;
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotations(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache)
{
jmp_buf *old_mmc_jumper = threadData->mmc_jumper;
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _res = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _items = NULL;
modelica_metatype _cc = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _fullProgram = NULL;
modelica_metatype _modelPath = NULL;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta32;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta1;
_cache = _inCache;
if(omc_Flags_isSet(threadData, _OMC_LIT113))
{
_fullProgram = omc_Interactive_cacheProgramAndPath(threadData, _inCache ,&_modelPath);
_outStringLst = omc_NFApi_evaluateAnnotations(threadData, _fullProgram, _modelPath, _inElements);
goto _return;
}
{
modelica_metatype _e;
for (tmpMeta2 = listReverse(_inElements); !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_e = MMC_CAR(tmpMeta2);
{
volatile modelica_metatype tmp6_1;
tmp6_1 = _e;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp5_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp6 < 5; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,3,3) == 0) goto tmp5_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 7));
_items = tmpMeta9;
_cc = tmpMeta10;
tmp6 += 1;
_res = omc_InteractiveUtil_getElementitemsAnnotationsFromItems(threadData, _items, omc_InteractiveUtil_getAnnotationsFromConstraintClass(threadData, _cc), _inEnv, _inClass, _cache ,&_cache);
tmpMeta3 = listAppend(_res, _outStringLst);
goto tmp5_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,2) == 0) goto tmp5_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,1,4) == 0) goto tmp5_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 5));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 7));
_cmt = tmpMeta14;
_cc = tmpMeta15;
tmp6 += 1;
{
modelica_metatype tmp19_1;
tmp19_1 = _cmt;
{
volatile mmc_switch_type tmp19;
int tmp20;
tmp19 = 0;
for (; tmp19 < 2; tmp19++) {
switch (MMC_SWITCH_CAST(tmp19)) {
case 0: {
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
if (optionNone(tmp19_1)) goto tmp18_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp19_1), 1));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
if (optionNone(tmpMeta22)) goto tmp18_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 1));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
_annotations = tmpMeta24;
tmpMeta16 = _annotations;
goto tmp18_done;
}
case 1: {
modelica_metatype tmpMeta25;
tmpMeta25 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta16 = tmpMeta25;
goto tmp18_done;
}
}
goto tmp18_end;
tmp18_end: ;
}
goto goto_17;
goto_17:;
goto goto_4;
goto tmp18_done;
tmp18_done:;
}
}
_annotations = tmpMeta16;
_res = omc_InteractiveUtil_getElementitemsAnnotationsFromElArgs(threadData, _annotations, omc_InteractiveUtil_getAnnotationsFromConstraintClass(threadData, _cc), _inEnv, _inClass, _cache ,&_cache);
tmpMeta3 = listAppend(_res, _outStringLst);
goto tmp5_done;
}
case 2: {
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta26,3,3) == 0) goto tmp5_end;
tmp6 += 1;
tmpMeta27 = mmc_mk_cons(_OMC_LIT30, _outStringLst);
tmpMeta3 = tmpMeta27;
goto tmp5_done;
}
case 3: {
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,6) == 0) goto tmp5_end;
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta28,0,2) == 0) goto tmp5_end;
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 3));
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta29), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta30,1,4) == 0) goto tmp5_end;
tmpMeta31 = mmc_mk_cons(_OMC_LIT30, _outStringLst);
tmpMeta3 = tmpMeta31;
goto tmp5_done;
}
case 4: {
tmpMeta3 = _outStringLst;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
tmp5_done:
(void)tmp6;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp5_done2;
goto_4:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp6 < 5) {
goto tmp5_top;
}
MMC_THROW_INTERNAL();
tmp5_done2:;
}
}
_outStringLst = tmpMeta3;
}
}
_return: OMC_LABEL_UNUSED
threadData->mmc_jumper = old_mmc_jumper;
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementAnnotationsFromElts(threadData_t *threadData, modelica_metatype _els, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _resStr = NULL;
modelica_metatype _graphicProgramSCode = NULL;
modelica_metatype _env = NULL;
modelica_metatype _res = NULL;
modelica_metatype _placementProgram = NULL;
modelica_metatype _cache = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if((!omc_Flags_isSet(threadData, _OMC_LIT113)))
{
_placementProgram = omc_InteractiveUtil_modelicaAnnotationProgram(threadData, omc_Config_getAnnotationVersion(threadData));
_graphicProgramSCode = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _placementProgram);
omc_Inst_makeEnvFromProgram(threadData, _graphicProgramSCode ,&_env);
}
else
{
_env = _OMC_LIT196;
}
tmpMeta1 = mmc_mk_box3(3, &Interactive_GraphicEnvCache_GRAPHIC__ENV__NO__CACHE__desc, _inFullProgram, _inModelPath);
_cache = tmpMeta1;
_res = omc_InteractiveUtil_getElementitemsAnnotations(threadData, _els, _env, _inClass, _cache);
_resStr = stringDelimitList(_res, _OMC_LIT43);
_return: OMC_LABEL_UNUSED
return _resStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionsInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynEquationItemLst;
{
modelica_metatype _eq = NULL;
modelica_metatype _eqlist1 = NULL;
modelica_metatype _eqlist2 = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _forEqList = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,3) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,3,2) == 0) goto tmp3_end;
_eq = tmpMeta6;
_xs = tmpMeta7;
_eqlist1 = omc_InteractiveUtil_getConnectionsInEquations(threadData, _xs);
tmpMeta9 = mmc_mk_cons(_eq, _eqlist1);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,3) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,4,2) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
_forEqList = tmpMeta13;
_xs = tmpMeta11;
_eqlist1 = omc_InteractiveUtil_getConnectionsInEquations(threadData, _forEqList);
_eqlist2 = omc_InteractiveUtil_getConnectionsInEquations(threadData, _xs);
tmpMeta1 = listAppend(_eqlist1, _eqlist2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmp4_1);
tmpMeta15 = MMC_CDR(tmp4_1);
_xs = tmpMeta15;
_inAbsynEquationItemLst = _xs;
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta16;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outList = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionsInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _eqlist1 = NULL;
modelica_metatype _eqlist2 = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_eqlist1 = tmpMeta8;
_xs = tmpMeta7;
_eqlist1 = omc_InteractiveUtil_getConnectionsInEquations(threadData, _eqlist1);
_eqlist2 = omc_InteractiveUtil_getConnectionsInClassparts(threadData, _xs);
tmpMeta1 = listAppend(_eqlist1, _eqlist2);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
_xs = tmpMeta10;
tmp4 += 1;
tmpMeta1 = omc_InteractiveUtil_getConnectionsInClassparts(threadData, _xs);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta11;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outList = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outList;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getConnections(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
tmpMeta1 = omc_InteractiveUtil_getConnectionsInClassparts(threadData, _parts);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_parts = tmpMeta9;
tmpMeta1 = omc_InteractiveUtil_getConnectionsInClassparts(threadData, _parts);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,4) == 0) goto tmp3_end;
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outList = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getConnectionStr(threadData_t *threadData, modelica_metatype _inEquation, modelica_string *out_outToString)
{
modelica_string _outFromString = NULL;
modelica_string _outToString = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inEquation;
{
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr1 = tmpMeta6;
_cr2 = tmpMeta7;
_s1 = omc_Dump_printComponentRefStr(threadData, _cr1);
_s2 = omc_Dump_printComponentRefStr(threadData, _cr2);
tmp1_c0 = _s1;
tmp1_c1 = _s2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outFromString = tmp1_c0;
_outToString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outToString) { *out_outToString = _outToString; }
return _outFromString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNthConnectionitemInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_integer _inInteger)
{
modelica_metatype _outEquationItem = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_integer tmp4_2;
tmp4_1 = _inAbsynEquationItemLst;
tmp4_2 = _inInteger;
{
modelica_metatype _eq = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _forEqList = NULL;
modelica_integer _newn;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (1 != tmp4_2) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,3) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,3,2) == 0) goto tmp3_end;
_eq = tmpMeta6;
tmpMeta1 = _eq;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,3) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,3,2) == 0) goto tmp3_end;
_xs = tmpMeta10;
_n = tmp4_2;
tmp4 += 1;
_newn = ((modelica_integer) -1) + _n;
tmpMeta1 = omc_InteractiveUtil_getNthConnectionitemInEquations(threadData, _xs, _newn);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,0,3) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,4,2) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
_forEqList = tmpMeta15;
_xs = tmpMeta13;
_n = tmp4_2;
{
{
volatile mmc_switch_type tmp18;
int tmp19;
tmp18 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp17_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp18 < 2; tmp18++) {
switch (MMC_SWITCH_CAST(tmp18)) {
case 0: {
_eq = omc_InteractiveUtil_getNthConnectionitemInEquations(threadData, _forEqList, _n);
goto tmp17_done;
}
case 1: {
_newn = _n - listLength(_forEqList);
_eq = omc_InteractiveUtil_getNthConnectionitemInEquations(threadData, _xs, _newn);
goto tmp17_done;
}
}
goto tmp17_end;
tmp17_end: ;
}
goto goto_16;
tmp17_done:
(void)tmp18;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp17_done2;
goto_16:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp18 < 2) {
goto tmp17_top;
}
goto goto_2;
tmp17_done2:;
}
}
;
tmpMeta1 = _eq;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_1);
tmpMeta21 = MMC_CDR(tmp4_1);
_xs = tmpMeta21;
_n = tmp4_2;
tmpMeta1 = omc_InteractiveUtil_getNthConnectionitemInEquations(threadData, _xs, _n);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outEquationItem = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outEquationItem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnectionitemInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_metatype _outEquationItem = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outEquationItem = omc_InteractiveUtil_getNthConnectionitemInEquations(threadData, _inAbsynEquationItemLst, tmp1);
return _outEquationItem;
}
DLLExport
modelica_metatype omc_InteractiveUtil_createFuncargsFromElementargs(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst)
{
modelica_metatype _outFunctionArgs = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementArgLst;
{
modelica_metatype _expl = NULL;
modelica_metatype _narg = NULL;
modelica_string _id = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta1 = _OMC_LIT197;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
if (optionNone(tmpMeta10)) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,2) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_id = tmpMeta9;
_exp = tmpMeta13;
_xs = tmpMeta7;
tmpMeta14 = omc_InteractiveUtil_createFuncargsFromElementargs(threadData, _xs);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,2) == 0) goto goto_2;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
_expl = tmpMeta15;
_narg = tmpMeta16;
tmpMeta18 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _id, _exp);
tmpMeta17 = mmc_mk_cons(tmpMeta18, _narg);
tmpMeta19 = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _expl, tmpMeta17);
tmpMeta1 = tmpMeta19;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_1);
tmpMeta21 = MMC_CDR(tmp4_1);
_xs = tmpMeta21;
tmpMeta22 = omc_InteractiveUtil_createFuncargsFromElementargs(threadData, _xs);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,0,2) == 0) goto goto_2;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 3));
_expl = tmpMeta23;
_narg = tmpMeta24;
tmpMeta25 = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _expl, _narg);
tmpMeta1 = tmpMeta25;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outFunctionArgs = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outFunctionArgs;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getConnectionAnnotationStr(threadData_t *threadData, modelica_metatype _inEquationItem, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inEquationItem;
{
modelica_metatype _res = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,2) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
if (optionNone(tmpMeta9)) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_annotations = tmpMeta11;
_info = tmpMeta12;
_res = omc_InteractiveUtil_getConnectionAnnotationStrElArgs(threadData, _annotations, _info, _inClass, _inFullProgram, _inModelPath);
tmp1 = stringDelimitList(_res, _OMC_LIT8);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionAnnotationStrElArgs(threadData_t *threadData, modelica_metatype _inElArgLst, modelica_metatype _info, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inElArgLst;
{
modelica_metatype _fargs = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _newexp = NULL;
modelica_string _gexpstr = NULL;
modelica_string _gexpstr_1 = NULL;
modelica_string _annName = NULL;
modelica_metatype _res = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _prop = NULL;
modelica_metatype _lineProgram = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
if (optionNone(tmpMeta11)) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_annName = tmpMeta10;
_mod = tmpMeta13;
_rest = tmpMeta8;
_lineProgram = omc_InteractiveUtil_modelicaAnnotationProgram(threadData, omc_Config_getAnnotationVersion(threadData));
_fargs = omc_InteractiveUtil_createFuncargsFromElementargs(threadData, _mod);
_p_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _lineProgram);
_cache = omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta15 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _annName, tmpMeta14);
tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta17 = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, tmpMeta15, _fargs, tmpMeta16);
omc_StaticScript_elabGraphicsExp(threadData, _cache, _env, tmpMeta17, 0, _OMC_LIT11, _info ,&_newexp ,&_prop);
_cache = omc_Ceval_cevalIfConstant(threadData, _cache, _env, _newexp, _prop, 0, _info ,&_newexp ,&_prop);
omc_Print_clearErrorBuf(threadData);
_gexpstr = omc_ExpressionDump_printExpStr(threadData, _newexp);
_res = omc_InteractiveUtil_getConnectionAnnotationStrElArgs(threadData, _rest, _info, _inClass, _inFullProgram, _inModelPath);
tmpMeta18 = mmc_mk_cons(_gexpstr, _res);
tmpMeta1 = tmpMeta18;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta19 = MMC_CAR(tmp4_1);
tmpMeta20 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,0,6) == 0) goto tmp3_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,1,1) == 0) goto tmp3_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 5));
if (optionNone(tmpMeta23)) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 1));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,0,0) == 0) goto tmp3_end;
_annName = tmpMeta22;
_rest = tmpMeta20;
tmpMeta26 = stringAppend(_annName,_OMC_LIT28);
_gexpstr_1 = tmpMeta26;
_res = omc_InteractiveUtil_getConnectionAnnotationStrElArgs(threadData, _rest, _info, _inClass, _inFullProgram, _inModelPath);
tmpMeta27 = mmc_mk_cons(_gexpstr_1, _res);
tmpMeta1 = tmpMeta27;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inAbsynElementItemLst)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
tmp4_3 = _inAbsynElementItemLst;
{
modelica_metatype _cdef = NULL;
modelica_metatype _newmodelpath = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _tp = NULL;
modelica_integer _c1;
modelica_integer _c2;
modelica_metatype _p = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _complst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_3);
tmpMeta7 = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,3) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_tp = tmpMeta10;
_lst = tmpMeta7;
_modelpath = tmp4_1;
_p = tmp4_2;
tmp4 += 2;
_cdef = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p ,&_newmodelpath);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _newmodelpath, _p, _cdef);
_c2 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _lst);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_3);
tmpMeta12 = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,1) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,6) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,3,3) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,0,2) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
_tp = tmpMeta16;
_complst = tmpMeta17;
_lst = tmpMeta12;
_modelpath = tmp4_1;
_p = tmp4_2;
tmpMeta18 = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,5,0) == 0) goto goto_2;
_c1 = listLength(_complst);
_c2 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _lst);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_3);
tmpMeta21 = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,0,1) == 0) goto tmp3_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,0,6) == 0) goto tmp3_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,3,3) == 0) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta24,0,2) == 0) goto tmp3_end;
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 2));
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 4));
_tp = tmpMeta25;
_complst = tmpMeta26;
_lst = tmpMeta21;
_modelpath = tmp4_1;
_p = tmp4_2;
tmpMeta27 = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta28,6,0) == 0) goto goto_2;
_c1 = listLength(_complst);
_c2 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _lst);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta29 = MMC_CAR(tmp4_3);
tmpMeta30 = MMC_CDR(tmp4_3);
_lst = tmpMeta30;
_modelpath = tmp4_1;
_p = tmp4_2;
tmp4 += 1;
tmp1 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _lst);
goto tmp3_done;
}
case 4: {
if (!listEmpty(tmp4_3)) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inAbsynElementItemLst)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countConnectors(threadData, _inPath, _inProgram, _inAbsynElementItemLst);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countPublicConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
tmp4_3 = _inClass;
{
modelica_integer _c1;
modelica_integer _c2;
modelica_metatype _modelpath = NULL;
modelica_metatype _newmodelpath = NULL;
modelica_metatype _cname = NULL;
modelica_metatype _p = NULL;
modelica_string _a = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
if (listEmpty(tmpMeta15)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmpMeta15);
tmpMeta17 = MMC_CDR(tmpMeta15);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,0,1) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
_a = tmpMeta6;
_b = tmp8;
_c = tmp10;
_d = tmp12;
_e = tmpMeta13;
_elt = tmpMeta18;
_lst = tmpMeta17;
_ann = tmpMeta19;
_cmt = tmpMeta20;
_file_info = tmpMeta21;
_modelpath = tmp4_1;
_p = tmp4_2;
tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta23 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta24 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta22, tmpMeta23, _lst, _ann, _cmt);
tmpMeta25 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta24, _file_info);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta25);
_c2 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _elt);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_integer tmp28;
modelica_metatype tmpMeta29;
modelica_integer tmp30;
modelica_metatype tmpMeta31;
modelica_integer tmp32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
tmp28 = mmc_unbox_integer(tmpMeta27);
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmp30 = mmc_unbox_integer(tmpMeta29);
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 5));
tmp32 = mmc_unbox_integer(tmpMeta31);
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta34,0,5) == 0) goto tmp3_end;
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 4));
if (listEmpty(tmpMeta35)) goto tmp3_end;
tmpMeta36 = MMC_CAR(tmpMeta35);
tmpMeta37 = MMC_CDR(tmpMeta35);
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 5));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 6));
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
_a = tmpMeta26;
_b = tmp28;
_c = tmp30;
_d = tmp32;
_e = tmpMeta33;
_lst = tmpMeta37;
_ann = tmpMeta38;
_cmt = tmpMeta39;
_file_info = tmpMeta40;
_modelpath = tmp4_1;
_p = tmp4_2;
tmp4 += 5;
tmpMeta41 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta42 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta43 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta41, tmpMeta42, _lst, _ann, _cmt);
tmpMeta44 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta43, _file_info);
tmp1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta44);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta45,0,5) == 0) goto tmp3_end;
tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 4));
if (!listEmpty(tmpMeta46)) goto tmp3_end;
tmp4 += 4;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_integer tmp49;
modelica_metatype tmpMeta50;
modelica_integer tmp51;
modelica_metatype tmpMeta52;
modelica_integer tmp53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
modelica_metatype tmpMeta61;
modelica_metatype tmpMeta62;
modelica_metatype tmpMeta63;
modelica_metatype tmpMeta64;
modelica_metatype tmpMeta65;
modelica_metatype tmpMeta66;
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
tmp49 = mmc_unbox_integer(tmpMeta48);
tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmp51 = mmc_unbox_integer(tmpMeta50);
tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 5));
tmp53 = mmc_unbox_integer(tmpMeta52);
tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta55,4,5) == 0) goto tmp3_end;
tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta55), 4));
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta55), 5));
if (listEmpty(tmpMeta57)) goto tmp3_end;
tmpMeta58 = MMC_CAR(tmpMeta57);
tmpMeta59 = MMC_CDR(tmpMeta57);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta58,0,1) == 0) goto tmp3_end;
tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta58), 2));
tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta55), 6));
tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
_a = tmpMeta47;
_b = tmp49;
_c = tmp51;
_d = tmp53;
_e = tmpMeta54;
_cmt = tmpMeta56;
_elt = tmpMeta60;
_lst = tmpMeta59;
_ann = tmpMeta61;
_file_info = tmpMeta62;
_modelpath = tmp4_1;
_p = tmp4_2;
tmpMeta63 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta64 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta65 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta63, tmpMeta64, _lst, _ann, _cmt);
tmpMeta66 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta65, _file_info);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta66);
_c2 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _elt);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta67;
modelica_metatype tmpMeta68;
modelica_integer tmp69;
modelica_metatype tmpMeta70;
modelica_integer tmp71;
modelica_metatype tmpMeta72;
modelica_integer tmp73;
modelica_metatype tmpMeta74;
modelica_metatype tmpMeta75;
modelica_metatype tmpMeta76;
modelica_metatype tmpMeta77;
modelica_metatype tmpMeta78;
modelica_metatype tmpMeta79;
modelica_metatype tmpMeta80;
modelica_metatype tmpMeta81;
modelica_metatype tmpMeta82;
modelica_metatype tmpMeta83;
modelica_metatype tmpMeta84;
modelica_metatype tmpMeta85;
tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
tmp69 = mmc_unbox_integer(tmpMeta68);
tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmp71 = mmc_unbox_integer(tmpMeta70);
tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 5));
tmp73 = mmc_unbox_integer(tmpMeta72);
tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta75,4,5) == 0) goto tmp3_end;
tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 4));
tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 5));
if (listEmpty(tmpMeta77)) goto tmp3_end;
tmpMeta78 = MMC_CAR(tmpMeta77);
tmpMeta79 = MMC_CDR(tmpMeta77);
tmpMeta80 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 6));
tmpMeta81 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
_a = tmpMeta67;
_b = tmp69;
_c = tmp71;
_d = tmp73;
_e = tmpMeta74;
_cmt = tmpMeta76;
_lst = tmpMeta79;
_ann = tmpMeta80;
_file_info = tmpMeta81;
_modelpath = tmp4_1;
_p = tmp4_2;
tmp4 += 2;
tmpMeta82 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta83 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta84 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta82, tmpMeta83, _lst, _ann, _cmt);
tmpMeta85 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta84, _file_info);
tmp1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta85);
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta86;
modelica_metatype tmpMeta87;
tmpMeta86 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta86,4,5) == 0) goto tmp3_end;
tmpMeta87 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta86), 5));
if (!listEmpty(tmpMeta87)) goto tmp3_end;
tmp4 += 1;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta88;
modelica_metatype tmpMeta89;
modelica_metatype tmpMeta90;
tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta88,1,4) == 0) goto tmp3_end;
tmpMeta89 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta89,0,2) == 0) goto tmp3_end;
tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta89), 2));
_cname = tmpMeta90;
_modelpath = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_lookupClassdef(threadData, _cname, _modelpath, _p ,&_newmodelpath);
tmp1 = omc_InteractiveUtil_countPublicConnectors(threadData, _newmodelpath, _p, _cdef);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 7) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countPublicConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countPublicConnectors(threadData, _inPath, _inProgram, _inClass);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthCompname(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_integer tmp4_2;
tmp4_1 = _inAbsynComponentItemLst;
tmp4_2 = _inInteger;
{
modelica_string _id = NULL;
modelica_metatype _xs = NULL;
modelica_integer _n1;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (1 != tmp4_2) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_id = tmpMeta9;
tmp1 = _id;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_xs = tmpMeta11;
_n = tmp4_2;
_n1 = ((modelica_integer) -1) + _n;
_inAbsynComponentItemLst = _xs;
_inInteger = _n1;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthCompname(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthCompname(threadData, _inAbsynComponentItemLst, tmp1);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthConnectorStr(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_integer _inInteger, modelica_metatype *out_outPath)
{
modelica_string _outString = NULL;
modelica_metatype _outPath = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_integer tmp4_4;
tmp4_1 = _inProgram;
tmp4_2 = _inPath;
tmp4_3 = _inAbsynElementItemLst;
tmp4_4 = _inInteger;
{
modelica_metatype _cdef = NULL;
modelica_metatype _newmodelpath = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _modelpath = NULL;
modelica_string _str = NULL;
modelica_metatype _p = NULL;
modelica_metatype _lst = NULL;
modelica_integer _n;
modelica_integer _c1;
modelica_integer _c2;
modelica_integer _newn;
modelica_metatype _complst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_3);
tmpMeta7 = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,3) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_tp = tmpMeta10;
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
_cdef = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p ,&_newmodelpath);
tmp1_c0 = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _newmodelpath, _cdef, _p, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_3);
tmpMeta12 = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,1) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,6) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,1,3) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
_tp = tmpMeta15;
_lst = tmpMeta12;
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmp4 += 4;
_cdef = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p ,&_newmodelpath);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _newmodelpath, _p, _cdef);
_c2 = _n - _c1;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _lst, _c2, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_3);
tmpMeta17 = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,0,1) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,0,6) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,3,3) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,0,2) == 0) goto tmp3_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 4));
_tp = tmpMeta21;
_complst = tmpMeta22;
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmpMeta23 = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta24,5,0) == 0) goto goto_2;
_str = omc_InteractiveUtil_getNthCompname(threadData, _complst, _n);
tmp1_c0 = _str;
tmpMeta[0+1] = _tp;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta25 = MMC_CAR(tmp4_3);
tmpMeta26 = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta25,0,1) == 0) goto tmp3_end;
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta27,0,6) == 0) goto tmp3_end;
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta28,3,3) == 0) goto tmp3_end;
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta29,0,2) == 0) goto tmp3_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta29), 2));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 4));
_tp = tmpMeta30;
_complst = tmpMeta31;
_lst = tmpMeta26;
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmpMeta32 = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta33,5,0) == 0) goto goto_2;
_c1 = listLength(_complst);
_newn = _n - _c1;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _lst, _newn, &tmpMeta[0+1]);
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta34 = MMC_CAR(tmp4_3);
tmpMeta35 = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta34,0,1) == 0) goto tmp3_end;
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta36,0,6) == 0) goto tmp3_end;
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta36), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta37,3,3) == 0) goto tmp3_end;
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta38,0,2) == 0) goto tmp3_end;
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta38), 2));
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 4));
_tp = tmpMeta39;
_complst = tmpMeta40;
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmpMeta41 = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta41), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta42,6,0) == 0) goto goto_2;
_str = omc_InteractiveUtil_getNthCompname(threadData, _complst, _n);
tmp1_c0 = _str;
tmpMeta[0+1] = _tp;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
modelica_metatype tmpMeta51;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta43 = MMC_CAR(tmp4_3);
tmpMeta44 = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta43,0,1) == 0) goto tmp3_end;
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta43), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta45,0,6) == 0) goto tmp3_end;
tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta46,3,3) == 0) goto tmp3_end;
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta47,0,2) == 0) goto tmp3_end;
tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta47), 2));
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 4));
_tp = tmpMeta48;
_complst = tmpMeta49;
_lst = tmpMeta44;
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmpMeta50 = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta50), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta51,6,0) == 0) goto goto_2;
_c1 = listLength(_complst);
_newn = _n - _c1;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _lst, _newn, &tmpMeta[0+1]);
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta52 = MMC_CAR(tmp4_3);
tmpMeta53 = MMC_CDR(tmp4_3);
_lst = tmpMeta53;
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _lst, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 7) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outPath = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outPath) { *out_outPath = _outPath; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnectorStr(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inInteger, modelica_metatype *out_outPath)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthConnectorStr(threadData, _inProgram, _inPath, _inAbsynElementItemLst, tmp1, out_outPath);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthPublicConnectorStr(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_integer _inInteger, modelica_metatype *out_outPath)
{
modelica_string _outString = NULL;
modelica_metatype _outPath = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_integer tmp4_4;
tmp4_1 = _inPath;
tmp4_2 = _inClass;
tmp4_3 = _inProgram;
tmp4_4 = _inInteger;
{
modelica_string _a = NULL;
modelica_metatype _modelpath = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
modelica_integer _c1;
modelica_integer _c2;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_CAR(tmpMeta7);
tmpMeta9 = MMC_CDR(tmpMeta7);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_elt = tmpMeta10;
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _elt, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_integer tmp13;
modelica_metatype tmpMeta14;
modelica_integer tmp15;
modelica_metatype tmpMeta16;
modelica_integer tmp17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp13 = mmc_unbox_integer(tmpMeta12);
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp15 = mmc_unbox_integer(tmpMeta14);
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp17 = mmc_unbox_integer(tmpMeta16);
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,0,5) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 4));
if (listEmpty(tmpMeta20)) goto tmp3_end;
tmpMeta21 = MMC_CAR(tmpMeta20);
tmpMeta22 = MMC_CDR(tmpMeta20);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,0,1) == 0) goto tmp3_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 5));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 6));
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta11;
_b = tmp13;
_c = tmp15;
_d = tmp17;
_e = tmpMeta18;
_elt = tmpMeta23;
_lst = tmpMeta22;
_ann = tmpMeta24;
_cmt = tmpMeta25;
_file_info = tmpMeta26;
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmpMeta27 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta28 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta30 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elt);
tmpMeta29 = mmc_mk_cons(tmpMeta30, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta31 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta27, tmpMeta28, tmpMeta29, _ann, _cmt);
tmpMeta32 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta31, _file_info);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta32);
_c2 = _n - _c1;
tmpMeta33 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta34 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta35 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta33, tmpMeta34, _lst, _ann, _cmt);
tmpMeta36 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta35, _file_info);
tmp1_c0 = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, tmpMeta36, _p, _c2, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_integer tmp39;
modelica_metatype tmpMeta40;
modelica_integer tmp41;
modelica_metatype tmpMeta42;
modelica_integer tmp43;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp39 = mmc_unbox_integer(tmpMeta38);
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp41 = mmc_unbox_integer(tmpMeta40);
tmpMeta42 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp43 = mmc_unbox_integer(tmpMeta42);
tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta45,0,5) == 0) goto tmp3_end;
tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 4));
if (listEmpty(tmpMeta46)) goto tmp3_end;
tmpMeta47 = MMC_CAR(tmpMeta46);
tmpMeta48 = MMC_CDR(tmpMeta46);
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 5));
tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta45), 6));
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta37;
_b = tmp39;
_c = tmp41;
_d = tmp43;
_e = tmpMeta44;
_lst = tmpMeta48;
_ann = tmpMeta49;
_cmt = tmpMeta50;
_file_info = tmpMeta51;
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmp4 += 3;
tmpMeta52 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta53 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta54 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta52, tmpMeta53, _lst, _ann, _cmt);
tmpMeta55 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta54, _file_info);
tmp1_c0 = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, tmpMeta55, _p, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta56,4,5) == 0) goto tmp3_end;
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta56), 5));
if (listEmpty(tmpMeta57)) goto tmp3_end;
tmpMeta58 = MMC_CAR(tmpMeta57);
tmpMeta59 = MMC_CDR(tmpMeta57);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta58,0,1) == 0) goto tmp3_end;
tmpMeta60 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta58), 2));
_elt = tmpMeta60;
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _elt, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta61;
modelica_metatype tmpMeta62;
modelica_integer tmp63;
modelica_metatype tmpMeta64;
modelica_integer tmp65;
modelica_metatype tmpMeta66;
modelica_integer tmp67;
modelica_metatype tmpMeta68;
modelica_metatype tmpMeta69;
modelica_metatype tmpMeta70;
modelica_metatype tmpMeta71;
modelica_metatype tmpMeta72;
modelica_metatype tmpMeta73;
modelica_metatype tmpMeta74;
modelica_metatype tmpMeta75;
modelica_metatype tmpMeta76;
modelica_metatype tmpMeta77;
modelica_metatype tmpMeta78;
modelica_metatype tmpMeta79;
modelica_metatype tmpMeta80;
modelica_metatype tmpMeta81;
modelica_metatype tmpMeta82;
modelica_metatype tmpMeta83;
modelica_metatype tmpMeta84;
modelica_metatype tmpMeta85;
modelica_metatype tmpMeta86;
tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp63 = mmc_unbox_integer(tmpMeta62);
tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp65 = mmc_unbox_integer(tmpMeta64);
tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp67 = mmc_unbox_integer(tmpMeta66);
tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta69,4,5) == 0) goto tmp3_end;
tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 4));
tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 5));
if (listEmpty(tmpMeta71)) goto tmp3_end;
tmpMeta72 = MMC_CAR(tmpMeta71);
tmpMeta73 = MMC_CDR(tmpMeta71);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta72,0,1) == 0) goto tmp3_end;
tmpMeta74 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta72), 2));
tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 6));
tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta61;
_b = tmp63;
_c = tmp65;
_d = tmp67;
_e = tmpMeta68;
_cmt = tmpMeta70;
_elt = tmpMeta74;
_lst = tmpMeta73;
_ann = tmpMeta75;
_file_info = tmpMeta76;
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmpMeta77 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta78 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta80 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elt);
tmpMeta79 = mmc_mk_cons(tmpMeta80, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta81 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta77, tmpMeta78, tmpMeta79, _ann, _cmt);
tmpMeta82 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta81, _file_info);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta82);
_c2 = _n - _c1;
tmpMeta83 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta84 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta85 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta83, tmpMeta84, _lst, _ann, _cmt);
tmpMeta86 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta85, _file_info);
tmp1_c0 = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, tmpMeta86, _p, _c2, &tmpMeta[0+1]);
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta87;
modelica_metatype tmpMeta88;
modelica_integer tmp89;
modelica_metatype tmpMeta90;
modelica_integer tmp91;
modelica_metatype tmpMeta92;
modelica_integer tmp93;
modelica_metatype tmpMeta94;
modelica_metatype tmpMeta95;
modelica_metatype tmpMeta96;
modelica_metatype tmpMeta97;
modelica_metatype tmpMeta98;
modelica_metatype tmpMeta99;
modelica_metatype tmpMeta100;
modelica_metatype tmpMeta101;
modelica_metatype tmpMeta102;
modelica_metatype tmpMeta103;
modelica_metatype tmpMeta104;
modelica_metatype tmpMeta105;
tmpMeta87 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp89 = mmc_unbox_integer(tmpMeta88);
tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp91 = mmc_unbox_integer(tmpMeta90);
tmpMeta92 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp93 = mmc_unbox_integer(tmpMeta92);
tmpMeta94 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta95 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta95,4,5) == 0) goto tmp3_end;
tmpMeta96 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 4));
tmpMeta97 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 5));
if (listEmpty(tmpMeta97)) goto tmp3_end;
tmpMeta98 = MMC_CAR(tmpMeta97);
tmpMeta99 = MMC_CDR(tmpMeta97);
tmpMeta100 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta95), 6));
tmpMeta101 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta87;
_b = tmp89;
_c = tmp91;
_d = tmp93;
_e = tmpMeta94;
_cmt = tmpMeta96;
_lst = tmpMeta99;
_ann = tmpMeta100;
_file_info = tmpMeta101;
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmpMeta102 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta103 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta104 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta102, tmpMeta103, _lst, _ann, _cmt);
tmpMeta105 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta104, _file_info);
tmp1_c0 = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, tmpMeta105, _p, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outPath = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outPath) { *out_outPath = _outPath; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthPublicConnectorStr(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _inInteger, modelica_metatype *out_outPath)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _inPath, _inClass, _inProgram, tmp1, out_outPath);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationInfoHeader(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _exp = NULL;
modelica_metatype _xs = NULL;
modelica_string _s = NULL;
modelica_metatype _dexp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
if (25 != MMC_STRLEN(tmpMeta9) || strcmp(MMC_STRINGDATA(_OMC_LIT198), MMC_STRINGDATA(tmpMeta9)) != 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
if (optionNone(tmpMeta10)) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,2) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_exp = tmpMeta13;
omc_StaticScript_elabGraphicsExp(threadData, omc_FCore_emptyCache(threadData), omc_FGraph_empty(threadData), _exp, 1, _OMC_LIT11, _OMC_LIT18 ,&_dexp ,NULL);
tmpMeta14 = omc_ExpressionSimplify_simplify(threadData, _dexp, NULL);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,2,1) == 0) goto goto_2;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
_s = tmpMeta15;
tmp1 = _s;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_1);
tmpMeta17 = MMC_CDR(tmp4_1);
_xs = tmpMeta17;
tmp1 = omc_InteractiveUtil_getDocumentationAnnotationInfoHeader(threadData, _xs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationRevision(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _exp = NULL;
modelica_metatype _xs = NULL;
modelica_string _s = NULL;
modelica_metatype _dexp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
if (9 != MMC_STRLEN(tmpMeta9) || strcmp(MMC_STRINGDATA(_OMC_LIT199), MMC_STRINGDATA(tmpMeta9)) != 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
if (optionNone(tmpMeta10)) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,2) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_exp = tmpMeta13;
omc_StaticScript_elabGraphicsExp(threadData, omc_FCore_emptyCache(threadData), omc_FGraph_empty(threadData), _exp, 1, _OMC_LIT11, _OMC_LIT18 ,&_dexp ,NULL);
tmpMeta14 = omc_ExpressionSimplify_simplify(threadData, _dexp, NULL);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,2,1) == 0) goto goto_2;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
_s = tmpMeta15;
tmp1 = _s;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_1);
tmpMeta17 = MMC_CDR(tmp4_1);
_xs = tmpMeta17;
tmp1 = omc_InteractiveUtil_getDocumentationAnnotationRevision(threadData, _xs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationInfo(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _exp = NULL;
modelica_metatype _dexp = NULL;
modelica_metatype _xs = NULL;
modelica_string _s = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
if (4 != MMC_STRLEN(tmpMeta9) || strcmp(MMC_STRINGDATA(_OMC_LIT200), MMC_STRINGDATA(tmpMeta9)) != 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
if (optionNone(tmpMeta10)) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,2) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_exp = tmpMeta13;
omc_StaticScript_elabGraphicsExp(threadData, omc_FCore_emptyCache(threadData), omc_FGraph_empty(threadData), _exp, 1, _OMC_LIT11, _OMC_LIT18 ,&_dexp ,NULL);
tmpMeta14 = omc_ExpressionSimplify_simplify(threadData, _dexp, NULL);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,2,1) == 0) goto goto_2;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
_s = tmpMeta15;
tmp1 = _s;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_1);
tmpMeta17 = MMC_CDR(tmp4_1);
_xs = tmpMeta17;
tmp1 = omc_InteractiveUtil_getDocumentationAnnotationInfo(threadData, _xs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getDocumentationAnnotationString(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _docStr = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _arglst = NULL;
modelica_string _info = NULL;
modelica_string _revisions = NULL;
modelica_string _infoHeader = NULL;
modelica_boolean _partialInst;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_arglst = tmpMeta7;
_partialInst = omc_System_getPartialInstantiation(threadData);
omc_System_setPartialInstantiation(threadData, 1);
_info = omc_InteractiveUtil_getDocumentationAnnotationInfo(threadData, _arglst);
_revisions = omc_InteractiveUtil_getDocumentationAnnotationRevision(threadData, _arglst);
_infoHeader = omc_InteractiveUtil_getDocumentationAnnotationInfoHeader(threadData, _arglst);
omc_System_setPartialInstantiation(threadData, _partialInst);
tmpMeta8 = mmc_mk_box3(0, _info, _revisions, _infoHeader);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_docStr = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _docStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExperimentAnnotationString2(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_metatype _strs = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _exp = NULL;
modelica_metatype _xs = NULL;
modelica_string _name = NULL;
modelica_string _s = NULL;
modelica_metatype _ss = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
if (optionNone(tmpMeta11)) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,1,2) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
_name = tmpMeta10;
_exp = tmpMeta14;
_xs = tmpMeta8;
tmpMeta15 = stringAppend(_name,_OMC_LIT12);
tmpMeta16 = stringAppend(tmpMeta15,omc_Dump_printExpStr(threadData, _exp));
_s = tmpMeta16;
_ss = omc_InteractiveUtil_getExperimentAnnotationString2(threadData, _xs);
tmpMeta17 = mmc_mk_cons(_s, _ss);
tmpMeta1 = tmpMeta17;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta18 = MMC_CAR(tmp4_1);
tmpMeta19 = MMC_CDR(tmp4_1);
_xs = tmpMeta19;
tmpMeta1 = omc_InteractiveUtil_getExperimentAnnotationString2(threadData, _xs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_strs = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _strs;
}
DLLExport
modelica_string omc_InteractiveUtil_getExperimentAnnotationString(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _experimentStr = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _arglst = NULL;
modelica_metatype _strs = NULL;
modelica_string _s = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_arglst = tmpMeta7;
_strs = omc_InteractiveUtil_getExperimentAnnotationString2(threadData, _arglst);
_s = stringDelimitList(_strs, _OMC_LIT43);
tmpMeta8 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_s, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta8);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_experimentStr = tmp1;
_return: OMC_LABEL_UNUSED
return _experimentStr;
}
DLLExport
modelica_string omc_InteractiveUtil_getAnnotationStringValueOrFail(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_string _s = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (!listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,2) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,3,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_s = tmpMeta10;
tmp1 = _s;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getAnnotationExp(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _exp = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _mod;
if (optionNone(tmpMeta1)) MMC_THROW_INTERNAL();
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 1));
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
if (!listEmpty(tmpMeta3)) MMC_THROW_INTERNAL();
tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta4,1,2) == 0) MMC_THROW_INTERNAL();
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta4), 2));
_exp = tmpMeta5;
_return: OMC_LABEL_UNUSED
return _exp;
}
DLLExport
modelica_string omc_InteractiveUtil_getAnnotationValue(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_string _s = NULL;
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (!listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,2) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_exp = tmpMeta9;
_s = omc_Dump_printExpStr(threadData, _exp);
tmpMeta10 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_s, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta10);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT30;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentPrefixes(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_string _compName = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_compName = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT202, _OMC_LIT203, boxvar_InteractiveUtil_getDefaultComponentPrefixesModStr);
_return: OMC_LABEL_UNUSED
return _compName;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentNameModStr(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _docStr = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_e = tmpMeta8;
tmp1 = omc_Dump_printExpStr(threadData, _e);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_docStr = tmp1;
_return: OMC_LABEL_UNUSED
return _docStr;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentName(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_string _compName = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_compName = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT205, _OMC_LIT203, boxvar_InteractiveUtil_getDefaultComponentNameModStr);
_return: OMC_LABEL_UNUSED
return _compName;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationClassAnnotationModStr(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _docStr = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_e = tmpMeta8;
tmp1 = omc_Dump_printExpStr(threadData, _e);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT103;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_docStr = tmp1;
_return: OMC_LABEL_UNUSED
return _docStr;
}
DLLExport
modelica_boolean omc_InteractiveUtil_getDocumentationClassAnnotation(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_boolean _isDocClass;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _docStr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_docStr = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT207, _OMC_LIT208, boxvar_InteractiveUtil_getDocumentationClassAnnotationModStr);
tmp1 = (stringEqual(_docStr, _OMC_LIT102));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isDocClass = tmp1;
_return: OMC_LABEL_UNUSED
return _isDocClass;
}
modelica_metatype boxptr_InteractiveUtil_getDocumentationClassAnnotation(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_boolean _isDocClass;
modelica_metatype out_isDocClass;
_isDocClass = omc_InteractiveUtil_getDocumentationClassAnnotation(threadData, _className, _p);
out_isDocClass = mmc_mk_icon(_isDocClass);
return out_isDocClass;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAnnotationStr(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _annotationType, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inAbsynElementArgLst;
tmp4_2 = _inClass;
tmp4_3 = _inProgram;
tmp4_4 = _inModelPath;
{
modelica_string _ann_name = NULL;
modelica_metatype _ann = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _fullProgram = NULL;
modelica_metatype _c = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_ann = tmpMeta6;
_ann_name = tmpMeta9;
_c = tmp4_2;
_fullProgram = tmp4_3;
_p = tmp4_4;
omc_InteractiveUtil_isAnnotationType(threadData, _ann_name, _annotationType);
tmpMeta10 = mmc_mk_cons(_ann, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta11 = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, tmpMeta10);
tmp1 = omc_InteractiveUtil_getAnnotationString(threadData, tmpMeta11, _c, _fullProgram, _p);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_xs = tmpMeta13;
_c = tmp4_2;
_fullProgram = tmp4_3;
_p = tmp4_4;
tmp1 = omc_InteractiveUtil_getAnnotationStr(threadData, _xs, _annotationType, _c, _fullProgram, _p);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_containAnnotation(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _annotationType)
{
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynElementArgLst;
{
modelica_metatype _lst = NULL;
modelica_string _ann_name = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta5 = MMC_CAR(tmp3_1);
tmpMeta6 = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta5,0,6) == 0) goto tmp2_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,1) == 0) goto tmp2_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_ann_name = tmpMeta8;
omc_InteractiveUtil_isAnnotationType(threadData, _ann_name, _annotationType);
goto tmp2_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta9 = MMC_CAR(tmp3_1);
tmpMeta10 = MMC_CDR(tmp3_1);
_lst = tmpMeta10;
omc_InteractiveUtil_containAnnotation(threadData, _lst, _annotationType);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_isAnnotationType(threadData_t *threadData, modelica_string _annotationStr, modelica_metatype _annotationType)
{
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _annotationStr;
tmp3_2 = _annotationType;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (4 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT124), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,0) == 0) goto tmp2_end;
goto tmp2_done;
}
case 1: {
if (7 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT125), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,0) == 0) goto tmp2_end;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAnnotationInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _annotationType, modelica_metatype _inProgram, modelica_metatype _inModelPath)
{
modelica_string _annotationStr = NULL;
modelica_metatype _body = NULL;
modelica_metatype _ann = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inClass;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 7));
_body = tmpMeta2;
{
modelica_metatype tmp6_1;
tmp6_1 = _body;
{
int tmp6;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp6_1))) {
case 3: {
modelica_metatype tmpMeta7;
{
modelica_metatype __omcQ_24tmpVar11;
modelica_metatype* tmp8;
modelica_metatype tmpMeta9;
modelica_metatype __omcQ_24tmpVar10;
modelica_integer tmp10;
modelica_metatype _a_loopVar = 0;
modelica_metatype _a;
_a_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 5)));
tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar11 = tmpMeta9;
tmp8 = &__omcQ_24tmpVar11;
while(1) {
tmp10 = 1;
if (!listEmpty(_a_loopVar)) {
_a = MMC_CAR(_a_loopVar);
_a_loopVar = MMC_CDR(_a_loopVar);
tmp10--;
}
if (tmp10 == 0) {
__omcQ_24tmpVar10 = omc_AbsynUtil_annotationToElementArgs(threadData, _a);
*tmp8 = mmc_mk_cons(__omcQ_24tmpVar10,0);
tmp8 = &MMC_CDR(*tmp8);
} else if (tmp10 == 1) {
break;
} else {
goto goto_4;
}
}
*tmp8 = mmc_mk_nil();
tmpMeta7 = __omcQ_24tmpVar11;
}
tmpMeta3 = omc_List_flatten(threadData, tmpMeta7);
goto tmp5_done;
}
case 7: {
modelica_metatype tmpMeta11;
{
modelica_metatype __omcQ_24tmpVar13;
modelica_metatype* tmp12;
modelica_metatype tmpMeta13;
modelica_metatype __omcQ_24tmpVar12;
modelica_integer tmp14;
modelica_metatype _a_loopVar = 0;
modelica_metatype _a;
_a_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 6)));
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar13 = tmpMeta13;
tmp12 = &__omcQ_24tmpVar13;
while(1) {
tmp14 = 1;
if (!listEmpty(_a_loopVar)) {
_a = MMC_CAR(_a_loopVar);
_a_loopVar = MMC_CDR(_a_loopVar);
tmp14--;
}
if (tmp14 == 0) {
__omcQ_24tmpVar12 = omc_AbsynUtil_annotationToElementArgs(threadData, _a);
*tmp12 = mmc_mk_cons(__omcQ_24tmpVar12,0);
tmp12 = &MMC_CDR(*tmp12);
} else if (tmp14 == 1) {
break;
} else {
goto goto_4;
}
}
*tmp12 = mmc_mk_nil();
tmpMeta11 = __omcQ_24tmpVar13;
}
tmpMeta3 = omc_List_flatten(threadData, tmpMeta11);
goto tmp5_done;
}
case 4: {
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,1,4) == 0) goto tmp5_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 5));
if (optionNone(tmpMeta15)) goto tmp5_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 1));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
if (optionNone(tmpMeta17)) goto tmp5_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
_ann = tmpMeta19;
tmpMeta3 = _ann;
goto tmp5_done;
}
case 5: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,2,2) == 0) goto tmp5_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
if (optionNone(tmpMeta20)) goto tmp5_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 1));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
if (optionNone(tmpMeta22)) goto tmp5_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 1));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
_ann = tmpMeta24;
tmpMeta3 = _ann;
goto tmp5_done;
}
case 6: {
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,3,2) == 0) goto tmp5_end;
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 3));
if (optionNone(tmpMeta25)) goto tmp5_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 1));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 2));
if (optionNone(tmpMeta27)) goto tmp5_end;
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 1));
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta28), 2));
_ann = tmpMeta29;
tmpMeta3 = _ann;
goto tmp5_done;
}
case 8: {
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,5,3) == 0) goto tmp5_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 4));
if (optionNone(tmpMeta30)) goto tmp5_end;
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 1));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
if (optionNone(tmpMeta32)) goto tmp5_end;
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 1));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 2));
_ann = tmpMeta34;
tmpMeta3 = _ann;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
goto_4:;
MMC_THROW_INTERNAL();
goto tmp5_done;
tmp5_done:;
}
}
_ann = tmpMeta3;
_annotationStr = omc_InteractiveUtil_getAnnotationStr(threadData, _ann, _annotationType, _inClass, _inProgram, _inModelPath);
tmpMeta35 = stringAppend(_OMC_LIT9,_annotationStr);
tmpMeta36 = stringAppend(tmpMeta35,_OMC_LIT10);
_annotationStr = tmpMeta36;
_return: OMC_LABEL_UNUSED
return _annotationStr;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementItemLst;
{
modelica_integer _cl;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,3) == 0) goto tmp3_end;
_rest = tmpMeta7;
_cl = omc_InteractiveUtil_countBaseClassesFromElts(threadData, _rest);
tmp1 = ((modelica_integer) 1) + _cl;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_rest = tmpMeta11;
tmp1 = omc_InteractiveUtil_countBaseClassesFromElts(threadData, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countBaseClassesFromElts(threadData, _inAbsynElementItemLst);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_integer _c1;
modelica_integer _c2;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_elts = tmpMeta8;
_rest = tmpMeta7;
tmp4 += 1;
_c1 = omc_InteractiveUtil_countBaseClassesFromElts(threadData, _elts);
_c2 = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _rest);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,1) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_elts = tmpMeta11;
_rest = tmpMeta10;
_c1 = omc_InteractiveUtil_countBaseClassesFromElts(threadData, _elts);
_c2 = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _rest);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_rest = tmpMeta13;
tmp4 += 1;
tmp1 = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _rest);
goto tmp3_done;
}
case 3: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _inAbsynClassPartLst);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClasses(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_integer _res;
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
tmp4 += 2;
tmp1 = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _parts);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_parts = tmpMeta9;
tmp4 += 1;
_res = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _parts);
tmp1 = ((modelica_integer) 1) + _res;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,4) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 3: {
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClasses(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countBaseClasses(threadData, _inClass);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inEnv)
{
modelica_metatype _outAbsynComponentRefLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inEnv;
{
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _cl = NULL;
modelica_metatype _envpath = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _path = NULL;
modelica_string _tpname = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,6) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,3) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_e = tmpMeta9;
_path = tmpMeta11;
_rest = tmpMeta8;
_env = tmp4_2;
_cl = omc_InteractiveUtil_getBaseClassesFromElts(threadData, _rest, _env);
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 6)))) ,NULL ,&_env_1);
tmpMeta12 = omc_FGraph_getScopePath(threadData, _env_1);
if (optionNone(tmpMeta12)) goto goto_2;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 1));
_envpath = tmpMeta13;
_tpname = omc_AbsynUtil_pathLastIdent(threadData, _path);
tmpMeta14 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _tpname);
_p_1 = omc_AbsynUtil_joinPaths(threadData, _envpath, tmpMeta14);
_cref = omc_AbsynUtil_pathToCref(threadData, _p_1);
tmpMeta15 = mmc_mk_cons(_cref, _cl);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_1);
tmpMeta17 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,0,1) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,0,6) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,1,3) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
_e = tmpMeta18;
_path = tmpMeta20;
_rest = tmpMeta17;
_env = tmp4_2;
_cl = omc_InteractiveUtil_getBaseClassesFromElts(threadData, _rest, _env);
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 6)))) ,NULL ,&_env_1);
tmpMeta21 = omc_FGraph_getScopePath(threadData, _env_1);
if (!optionNone(tmpMeta21)) goto goto_2;
_cref = omc_AbsynUtil_pathToCref(threadData, _path);
tmpMeta22 = mmc_mk_cons(_cref, _cl);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta23 = MMC_CAR(tmp4_1);
tmpMeta24 = MMC_CDR(tmp4_1);
_rest = tmpMeta24;
_env = tmp4_2;
tmpMeta1 = omc_InteractiveUtil_getBaseClassesFromElts(threadData, _rest, _env);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynComponentRefLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynComponentRefLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inEnv)
{
modelica_metatype _outAbsynComponentRefLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inEnv;
{
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_elts = tmpMeta8;
_rest = tmpMeta7;
_env = tmp4_2;
tmp4 += 1;
_c1 = omc_InteractiveUtil_getBaseClassesFromElts(threadData, _elts, _env);
_c2 = omc_InteractiveUtil_getBaseClassesFromParts(threadData, _rest, _env);
tmpMeta1 = listAppend(_c1, _c2);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,1) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_elts = tmpMeta11;
_rest = tmpMeta10;
_env = tmp4_2;
_c1 = omc_InteractiveUtil_getBaseClassesFromElts(threadData, _elts, _env);
_c2 = omc_InteractiveUtil_getBaseClassesFromParts(threadData, _rest, _env);
tmpMeta1 = listAppend(_c1, _c2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_rest = tmpMeta13;
_env = tmp4_2;
tmp4 += 1;
tmpMeta1 = omc_InteractiveUtil_getBaseClassesFromParts(threadData, _rest, _env);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta14;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynComponentRefLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynComponentRefLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClasses(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEnv)
{
modelica_metatype _outAbsynComponentRefLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _env = NULL;
modelica_metatype _tp = NULL;
modelica_string _baseClassName = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _envpath = NULL;
modelica_metatype _p1 = NULL;
modelica_string _tpname = NULL;
modelica_metatype _cref = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
_env = tmp4_2;
tmp4 += 3;
tmpMeta1 = omc_InteractiveUtil_getBaseClassesFromParts(threadData, _parts, _env);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_baseClassName = tmpMeta9;
_parts = tmpMeta10;
_env = tmp4_2;
tmp4 += 2;
omc_Lookup_lookupClassIdent(threadData, omc_FCore_emptyCache(threadData), _env, _baseClassName, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inClass), 8)))) ,NULL ,&_cenv);
tmpMeta11 = omc_FGraph_getScopePath(threadData, _cenv);
if (optionNone(tmpMeta11)) goto goto_2;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
_envpath = tmpMeta12;
tmpMeta13 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _baseClassName);
_p1 = omc_AbsynUtil_joinPaths(threadData, _envpath, tmpMeta13);
_cref = omc_AbsynUtil_pathToCref(threadData, _p1);
_res = omc_InteractiveUtil_getBaseClassesFromParts(threadData, _parts, _env);
tmpMeta14 = mmc_mk_cons(_cref, _res);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,1,4) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,0,2) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
_tp = tmpMeta17;
_env = tmp4_2;
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _tp, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inClass), 8)))) ,NULL ,&_cenv);
tmpMeta18 = omc_FGraph_getScopePath(threadData, _cenv);
if (optionNone(tmpMeta18)) goto goto_2;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
_envpath = tmpMeta19;
_tpname = omc_AbsynUtil_pathLastIdent(threadData, _tp);
tmpMeta20 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _tpname);
_p1 = omc_AbsynUtil_joinPaths(threadData, _envpath, tmpMeta20);
_cref = omc_AbsynUtil_pathToCref(threadData, _p1);
tmpMeta21 = mmc_mk_cons(_cref, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta1 = tmpMeta21;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,1,4) == 0) goto tmp3_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta23,0,2) == 0) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
_tp = tmpMeta24;
_env = tmp4_2;
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _tp, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inClass), 8)))) ,NULL ,&_cenv);
tmpMeta25 = omc_FGraph_getScopePath(threadData, _cenv);
if (!optionNone(tmpMeta25)) goto goto_2;
_cref = omc_AbsynUtil_pathToCref(threadData, _tp);
tmpMeta26 = mmc_mk_cons(_cref, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta1 = tmpMeta26;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta27;
tmpMeta27 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta27;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynComponentRefLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynComponentRefLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassnamesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_boolean _includeConstants)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _delst = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_delst = omc_DoubleEnded_fromList(threadData, tmpMeta1);
{
modelica_metatype _elt;
for (tmpMeta2 = _inAbsynElementItemLst; !listEmpty(tmpMeta2); tmpMeta2=MMC_CDR(tmpMeta2))
{
_elt = MMC_CAR(tmpMeta2);
{
modelica_metatype tmp5_1;
tmp5_1 = _elt;
{
modelica_string _id = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp5;
int tmp6;
tmp5 = 0;
for (; tmp5 < 4; tmp5++) {
switch (MMC_SWITCH_CAST(tmp5)) {
case 0: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,1) == 0) goto tmp4_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,6) == 0) goto tmp4_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,2) == 0) goto tmp4_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,4,5) == 0) goto tmp4_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_id = tmpMeta11;
omc_DoubleEnded_push__back(threadData, _delst, _id);
goto tmp4_done;
}
case 1: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,1) == 0) goto tmp4_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,0,6) == 0) goto tmp4_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,2) == 0) goto tmp4_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
_id = tmpMeta15;
omc_DoubleEnded_push__back(threadData, _delst, _id);
goto tmp4_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,1) == 0) goto tmp4_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,0,6) == 0) goto tmp4_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,3,3) == 0) goto tmp4_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,3,0) == 0) goto tmp4_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 4));
_lst = tmpMeta20;
if (!_includeConstants) goto tmp4_end;
omc_DoubleEnded_push__list__back(threadData, _delst, omc_InteractiveUtil_getComponentItemsName(threadData, _lst, 0));
goto tmp4_done;
}
case 3: {
goto tmp4_done;
}
}
goto tmp4_end;
tmp4_end: ;
}
goto goto_3;
goto_3:;
MMC_THROW_INTERNAL();
goto tmp4_done;
tmp4_done:;
}
}
;
}
}
tmpMeta22 = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = omc_DoubleEnded_toListAndClear(threadData, _delst, tmpMeta22);
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
modelica_metatype boxptr_InteractiveUtil_getClassnamesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_includeConstants);
_outStringLst = omc_InteractiveUtil_getClassnamesInElts(threadData, _inAbsynElementItemLst, tmp1);
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassnamesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;volatile modelica_boolean tmp4_3;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inShowProtected;
tmp4_3 = _includeConstants;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elts = tmpMeta9;
_rest = tmpMeta8;
_b = tmp4_2;
_c = tmp4_3;
tmp4 += 1;
_l1 = omc_InteractiveUtil_getClassnamesInElts(threadData, _elts, _c);
_l2 = omc_InteractiveUtil_getClassnamesInParts(threadData, _rest, _b, _c);
tmpMeta1 = listAppend(_l1, _l2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (1 != tmp4_2) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,1) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_elts = tmpMeta12;
_rest = tmpMeta11;
_c = tmp4_3;
_l1 = omc_InteractiveUtil_getClassnamesInElts(threadData, _elts, _c);
_l2 = omc_InteractiveUtil_getClassnamesInParts(threadData, _rest, 1, _c);
tmpMeta1 = listAppend(_l1, _l2);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
_rest = tmpMeta14;
_b = tmp4_2;
_c = tmp4_3;
tmpMeta1 = omc_InteractiveUtil_getClassnamesInParts(threadData, _rest, _b, _c);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
modelica_metatype boxptr_InteractiveUtil_getClassnamesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_outStringLst = omc_InteractiveUtil_getClassnamesInParts(threadData, _inAbsynClassPartLst, tmp1, tmp2);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;modelica_boolean tmp4_3;
tmp4_1 = _inClass;
tmp4_2 = _inShowProtected;
tmp4_3 = _includeConstants;
{
modelica_metatype _strlist = NULL;
modelica_metatype _parts = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
_b = tmp4_2;
_c = tmp4_3;
_strlist = omc_InteractiveUtil_getClassnamesInParts(threadData, _parts, _b, _c);
tmpMeta1 = omc_List_map(threadData, _strlist, boxvar_AbsynUtil_makeIdentPathFromString);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_parts = tmpMeta9;
_b = tmp4_2;
_c = tmp4_3;
_strlist = omc_InteractiveUtil_getClassnamesInParts(threadData, _parts, _b, _c);
tmpMeta1 = omc_List_map(threadData, _strlist, boxvar_AbsynUtil_makeIdentPathFromString);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,4) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,2) == 0) goto tmp3_end;
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_paths = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _paths;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _paths = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_paths = omc_InteractiveUtil_getClassnamesInClass(threadData, _inPath, _inProgram, _inClass, tmp1, tmp2);
return _paths;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getTopQualifiedClassnames(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inProgram;
{
modelica_string _id = NULL;
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _w = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
tmp4 += 2;
tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta8)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmpMeta8);
tmpMeta10 = MMC_CDR(tmpMeta8);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta11;
_rest = tmpMeta10;
_w = tmpMeta12;
tmpMeta13 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_p = omc_AbsynUtil_joinWithinPath(threadData, _w, tmpMeta13);
tmpMeta14 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
_res = omc_InteractiveUtil_getTopQualifiedClassnames(threadData, tmpMeta14);
tmpMeta15 = mmc_mk_cons(_p, _res);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta16)) goto tmp3_end;
tmpMeta17 = MMC_CAR(tmpMeta16);
tmpMeta18 = MMC_CDR(tmpMeta16);
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_rest = tmpMeta18;
_w = tmpMeta19;
tmpMeta20 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
tmpMeta1 = omc_InteractiveUtil_getTopQualifiedClassnames(threadData, tmpMeta20);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getTopClassnamesInProgram(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inProgram;
{
modelica_metatype _res = NULL;
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _w = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
tmp4 += 2;
tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta8)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmpMeta8);
tmpMeta10 = MMC_CDR(tmpMeta8);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta11;
_rest = tmpMeta10;
_w = tmpMeta12;
tmpMeta13 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
_res = omc_InteractiveUtil_getTopClassnamesInProgram(threadData, tmpMeta13);
tmpMeta14 = mmc_mk_cons(_id, _res);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta15)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmpMeta15);
tmpMeta17 = MMC_CDR(tmpMeta15);
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_rest = tmpMeta17;
_w = tmpMeta18;
tmpMeta19 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
tmpMeta1 = omc_InteractiveUtil_getTopClassnamesInProgram(threadData, tmpMeta19);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getTopClassnames(threadData_t *threadData, modelica_metatype _p)
{
modelica_metatype _paths = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_paths = omc_List_map(threadData, omc_InteractiveUtil_getTopClassnamesInProgram(threadData, _p), boxvar_AbsynUtil_makeIdentPathFromString);
_return: OMC_LABEL_UNUSED
return _paths;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassnamesInPath(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
tmp4_3 = _inShowProtected;
tmp4_4 = _includeConstants;
{
modelica_metatype _cdef = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _p = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelpath = tmp4_1;
_p = tmp4_2;
_b = tmp4_3;
_c = tmp4_4;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta1 = omc_InteractiveUtil_getClassnamesInClass(threadData, _modelpath, _p, _cdef, _b, _c);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_paths = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _paths;
}
modelica_metatype boxptr_InteractiveUtil_getClassnamesInPath(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _paths = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_paths = omc_InteractiveUtil_getClassnamesInPath(threadData, _inPath, _inProgram, tmp1, tmp2);
return _paths;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementItemLst;
{
modelica_metatype _res = NULL;
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,6) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,2) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,8,0) == 0) goto tmp3_end;
_id = tmpMeta12;
_rest = tmpMeta8;
_res = omc_InteractiveUtil_getPackagesInElts(threadData, _rest);
tmpMeta14 = mmc_mk_cons(_id, _res);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta15 = MMC_CAR(tmp4_1);
tmpMeta16 = MMC_CDR(tmp4_1);
_rest = tmpMeta16;
tmpMeta1 = omc_InteractiveUtil_getPackagesInElts(threadData, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elts = tmpMeta9;
_rest = tmpMeta8;
tmp4 += 1;
_l1 = omc_InteractiveUtil_getPackagesInElts(threadData, _elts);
_l2 = omc_InteractiveUtil_getPackagesInParts(threadData, _rest);
tmpMeta1 = listAppend(_l1, _l2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,1) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_elts = tmpMeta12;
_rest = tmpMeta11;
_l1 = omc_InteractiveUtil_getPackagesInElts(threadData, _elts);
_l2 = omc_InteractiveUtil_getPackagesInParts(threadData, _rest);
tmpMeta1 = listAppend(_l1, _l2);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
_rest = tmpMeta14;
tmpMeta1 = omc_InteractiveUtil_getPackagesInParts(threadData, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _strlist = NULL;
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
_strlist = omc_InteractiveUtil_getPackagesInParts(threadData, _parts);
tmpMeta1 = omc_List_map(threadData, _strlist, boxvar_AbsynUtil_makeIdentPathFromString);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_parts = tmpMeta9;
_strlist = omc_InteractiveUtil_getPackagesInParts(threadData, _parts);
tmpMeta1 = omc_List_map(threadData, _strlist, boxvar_AbsynUtil_makeIdentPathFromString);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,4) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,2) == 0) goto tmp3_end;
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getTopPackagesInProgram(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inProgram;
{
modelica_metatype _res = NULL;
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _w = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
tmp4 += 2;
tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta8)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmpMeta8);
tmpMeta10 = MMC_CDR(tmpMeta8);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,8,0) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta11;
_rest = tmpMeta10;
_w = tmpMeta13;
tmpMeta14 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
_res = omc_InteractiveUtil_getTopPackagesInProgram(threadData, tmpMeta14);
tmpMeta15 = mmc_mk_cons(_id, _res);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta16)) goto tmp3_end;
tmpMeta17 = MMC_CAR(tmpMeta16);
tmpMeta18 = MMC_CDR(tmpMeta16);
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_rest = tmpMeta18;
_w = tmpMeta19;
tmpMeta20 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
tmpMeta1 = omc_InteractiveUtil_getTopPackagesInProgram(threadData, tmpMeta20);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getTopPackages(threadData_t *threadData, modelica_metatype _p)
{
modelica_metatype _paths = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_paths = omc_List_map(threadData, omc_InteractiveUtil_getTopPackagesInProgram(threadData, _p), boxvar_AbsynUtil_makeIdentPathFromString);
_return: OMC_LABEL_UNUSED
return _paths;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPackagesInPath(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram)
{
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelpath = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta1 = omc_InteractiveUtil_getPackagesInClass(threadData, _modelpath, _p, _cdef);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_paths = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _paths;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getIconAnnotation(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelpath = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp1 = omc_InteractiveUtil_getAnnotationInClass(threadData, _cdef, _OMC_LIT209, _p, _modelpath);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT30;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getUsesAnnotationString2(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_metatype _strs = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _xs = NULL;
modelica_string _name = NULL;
modelica_string _version = NULL;
modelica_metatype _ss = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
if (optionNone(tmpMeta11)) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
if (listEmpty(tmpMeta13)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmpMeta13);
tmpMeta15 = MMC_CDR(tmpMeta13);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,6) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,1,1) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
if (7 != MMC_STRLEN(tmpMeta17) || strcmp(MMC_STRINGDATA(_OMC_LIT215), MMC_STRINGDATA(tmpMeta17)) != 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
if (optionNone(tmpMeta18)) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 1));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,1,2) == 0) goto tmp3_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,3,1) == 0) goto tmp3_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
if (!listEmpty(tmpMeta15)) goto tmp3_end;
_name = tmpMeta10;
_version = tmpMeta22;
_xs = tmpMeta8;
_ss = omc_InteractiveUtil_getUsesAnnotationString2(threadData, _xs);
tmpMeta24 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta25 = mmc_mk_cons(_version, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta26 = mmc_mk_box3(0, tmpMeta24, tmpMeta25, mmc_mk_boolean(0));
tmpMeta23 = mmc_mk_cons(tmpMeta26, _ss);
tmpMeta1 = tmpMeta23;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta27 = MMC_CAR(tmp4_1);
tmpMeta28 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta27,0,6) == 0) goto tmp3_end;
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta29,1,1) == 0) goto tmp3_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta29), 2));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 7));
_name = tmpMeta30;
_info = tmpMeta31;
_xs = tmpMeta28;
tmpMeta32 = mmc_mk_cons(_name, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT212, tmpMeta32, _info);
_ss = omc_InteractiveUtil_getUsesAnnotationString2(threadData, _xs);
tmpMeta34 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta35 = mmc_mk_box3(0, tmpMeta34, _OMC_LIT214, mmc_mk_boolean(0));
tmpMeta33 = mmc_mk_cons(tmpMeta35, _ss);
tmpMeta1 = tmpMeta33;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta36 = MMC_CAR(tmp4_1);
tmpMeta37 = MMC_CDR(tmp4_1);
_xs = tmpMeta37;
_eltArgs = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_strs = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _strs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getUsesAnnotationString(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _usesStr = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _arglst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_arglst = tmpMeta7;
tmpMeta1 = omc_InteractiveUtil_getUsesAnnotationString2(threadData, _arglst);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_usesStr = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _usesStr;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getUsesAnnotationOrDefault(threadData_t *threadData, modelica_metatype _p, modelica_boolean _requireExactVersion)
{
modelica_metatype _usesStr = NULL;
modelica_metatype _paths = NULL;
modelica_metatype _strs = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_usesStr = omc_InteractiveUtil_getUsesAnnotation(threadData, _p);
_paths = omc_List_map(threadData, _usesStr, boxvar_Util_tuple31);
_strs = omc_List_map(threadData, _usesStr, boxvar_Util_tuple32);
if((!_requireExactVersion))
{
_strs = omc_List_map1(threadData, _strs, boxvar_listAppend, _OMC_LIT214);
}
{
modelica_metatype __omcQ_24tmpVar15;
modelica_metatype* tmp2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype __omcQ_24tmpVar14;
modelica_integer tmp5;
modelica_metatype _p_loopVar = 0;
modelica_metatype _p;
modelica_metatype _s_loopVar = 0;
modelica_metatype _s;
_p_loopVar = _paths;
_s_loopVar = _strs;
tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar15 = tmpMeta3;
tmp2 = &__omcQ_24tmpVar15;
while(1) {
tmp5 = 2;
if (!listEmpty(_p_loopVar)) {
_p = MMC_CAR(_p_loopVar);
_p_loopVar = MMC_CDR(_p_loopVar);
tmp5--;
}if (!listEmpty(_s_loopVar)) {
_s = MMC_CAR(_s_loopVar);
_s_loopVar = MMC_CDR(_s_loopVar);
tmp5--;
}
if (tmp5 == 0) {
tmpMeta4 = mmc_mk_box3(0, _p, _s, mmc_mk_boolean(0));
__omcQ_24tmpVar14 = tmpMeta4;
*tmp2 = mmc_mk_cons(__omcQ_24tmpVar14,0);
tmp2 = &MMC_CDR(*tmp2);
} else if (tmp5 == 2) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp2 = mmc_mk_nil();
tmpMeta1 = __omcQ_24tmpVar15;
}
_usesStr = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _usesStr;
}
modelica_metatype boxptr_InteractiveUtil_getUsesAnnotationOrDefault(threadData_t *threadData, modelica_metatype _p, modelica_metatype _requireExactVersion)
{
modelica_integer tmp1;
modelica_metatype _usesStr = NULL;
tmp1 = mmc_unbox_integer(_requireExactVersion);
_usesStr = omc_InteractiveUtil_getUsesAnnotationOrDefault(threadData, _p, tmp1);
return _usesStr;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getUsesAnnotation(threadData_t *threadData, modelica_metatype _p)
{
modelica_metatype _usesStr = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _p;
{
modelica_metatype _cdef = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta6)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmpMeta6);
tmpMeta8 = MMC_CDR(tmpMeta6);
if (!listEmpty(tmpMeta8)) goto tmp3_end;
_cdef = tmpMeta7;
tmpMeta9 = omc_AbsynUtil_getNamedAnnotationInClass(threadData, _cdef, _OMC_LIT217, boxvar_InteractiveUtil_getUsesAnnotationString);
if (optionNone(tmpMeta9)) goto goto_2;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
_usesStr = tmpMeta10;
tmpMeta1 = _usesStr;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_usesStr = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _usesStr;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getNamedAnnotation(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _id, modelica_metatype _default, modelica_fnptr _f)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
tmp4_3 = _default;
{
modelica_metatype _cdef = NULL;
modelica_metatype _str = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_modelpath = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta6 = omc_AbsynUtil_getNamedAnnotationInClass(threadData, _cdef, _id, ((modelica_fnptr) _f));
if (optionNone(tmpMeta6)) goto goto_2;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
_str = tmpMeta7;
tmpMeta1 = _str;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
if (optionNone(tmp4_3)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 1));
_str = tmpMeta8;
tmpMeta1 = _str;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDiagramAnnotation(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelpath = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp1 = omc_InteractiveUtil_getAnnotationInClass(threadData, _cdef, _OMC_LIT218, _p, _modelpath);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT30;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthConnectorIconAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inModelPath;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelpath = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, _cdef, _p, _n ,&_tp);
tmp1 = omc_InteractiveUtil_getIconAnnotation(threadData, _tp, _p);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnectorIconAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthConnectorIconAnnotation(threadData, _inModelPath, _inProgram, tmp1);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthConnector(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inModelPath;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _cdef = NULL;
modelica_string _str = NULL;
modelica_string _tpstr = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
_modelpath = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_str = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, _cdef, _p, _n ,&_tp);
_tpstr = omc_AbsynUtil_pathString(threadData, _tp, _OMC_LIT0, 1, 0);
tmpMeta6 = mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_tpstr, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta6);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnector(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthConnector(threadData, _inModelPath, _inProgram, tmp1);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getConnectorCount(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_integer _count;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_p = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_count = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, _cdef);
tmp1 = intString(_count);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthConnectionAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inModelPath;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _citem = NULL;
modelica_string _s1 = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
_modelpath = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_citem = listGet(omc_InteractiveUtil_getConnections(threadData, _cdef), _n);
_s1 = omc_InteractiveUtil_getConnectionAnnotationStr(threadData, _citem, _cdef, _p, _modelpath);
tmpMeta6 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta6);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT30;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnectionAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthConnectionAnnotation(threadData, _inModelPath, _inProgram, tmp1);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4)
{
modelica_metatype _outAbsynEquationItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_string tmp4_4;
tmp4_1 = _inAbsynEquationItemLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inString4;
{
modelica_metatype _eqcmt_1 = NULL;
modelica_metatype _eqcmt = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _es = NULL;
modelica_metatype _es_1 = NULL;
modelica_string _cmt = NULL;
modelica_metatype _e = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_boolean tmp13;
modelica_boolean tmp14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,3) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,3,2) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_c1 = tmpMeta9;
_c2 = tmpMeta10;
_eqcmt = tmpMeta11;
_info = tmpMeta12;
_es = tmpMeta7;
_cr1 = tmp4_2;
_cr2 = tmp4_3;
_cmt = tmp4_4;
tmp13 = omc_AbsynUtil_crefEqual(threadData, _cr1, _c1);
if (1 != tmp13) goto goto_2;
tmp14 = omc_AbsynUtil_crefEqual(threadData, _cr2, _c2);
if (1 != tmp14) goto goto_2;
_eqcmt_1 = omc_InteractiveUtil_setClassCommentInCommentOpt(threadData, _eqcmt, _cmt);
tmpMeta16 = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _c1, _c2);
tmpMeta17 = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta16, _eqcmt_1, _info);
tmpMeta15 = mmc_mk_cons(tmpMeta17, _es);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta18 = MMC_CAR(tmp4_1);
tmpMeta19 = MMC_CDR(tmp4_1);
_e = tmpMeta18;
_es = tmpMeta19;
_cr1 = tmp4_2;
_cr2 = tmp4_3;
_cmt = tmp4_4;
_es_1 = omc_InteractiveUtil_setConnectionCommentInEquations(threadData, _es, _cr1, _cr2, _cmt);
tmpMeta20 = mmc_mk_cons(_e, _es_1);
tmpMeta1 = tmpMeta20;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynEquationItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_string tmp4_4;
tmp4_1 = _inAbsynClassPartLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inString4;
{
modelica_metatype _e_1 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _xs_1 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_string _cmt = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_e = tmpMeta8;
_xs = tmpMeta7;
_cr1 = tmp4_2;
_cr2 = tmp4_3;
_cmt = tmp4_4;
_e_1 = omc_InteractiveUtil_setConnectionCommentInEquations(threadData, _e, _cr1, _cr2, _cmt);
tmpMeta10 = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _e_1);
tmpMeta9 = mmc_mk_cons(tmpMeta10, _xs);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_1);
tmpMeta12 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,3,1) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
_e = tmpMeta13;
_xs = tmpMeta12;
_cr1 = tmp4_2;
_cr2 = tmp4_3;
_cmt = tmp4_4;
_xs_1 = omc_InteractiveUtil_setConnectionCommentInParts(threadData, _xs, _cr1, _cr2, _cmt);
tmpMeta15 = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _e);
tmpMeta14 = mmc_mk_cons(tmpMeta15, _xs_1);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_1);
tmpMeta17 = MMC_CDR(tmp4_1);
_p = tmpMeta16;
_xs = tmpMeta17;
_cr1 = tmp4_2;
_cr2 = tmp4_3;
_cmt = tmp4_4;
_xs_1 = omc_InteractiveUtil_setConnectionCommentInParts(threadData, _xs, _cr1, _cr2, _cmt);
tmpMeta18 = mmc_mk_cons(_p, _xs_1);
tmpMeta1 = tmpMeta18;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_string tmp4_4;
tmp4_1 = _inClass1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inString4;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _name = NULL;
modelica_string _cmt = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _restr = NULL;
modelica_metatype _pcmt = NULL;
modelica_metatype _info = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_restr = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_pcmt = tmpMeta19;
_info = tmpMeta20;
_cr1 = tmp4_2;
_cr2 = tmp4_3;
_cmt = tmp4_4;
_parts_1 = omc_InteractiveUtil_setConnectionCommentInParts(threadData, _parts, _cr1, _cr2, _cmt);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _pcmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _restr, tmpMeta21, _info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_restr = tmpMeta30;
_bcname = tmpMeta32;
_modif = tmpMeta33;
_pcmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_info = tmpMeta37;
_cr1 = tmp4_2;
_cr2 = tmp4_3;
_cmt = tmp4_4;
_parts_1 = omc_InteractiveUtil_setConnectionCommentInParts(threadData, _parts, _cr1, _cr2, _cmt);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _pcmt, _parts_1, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _restr, tmpMeta38, _info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionComment(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4, modelica_metatype _inProgram5, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_string tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inString4;
tmp4_5 = _inProgram5;
{
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_string _cmt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_class_ = tmp4_1;
_cr1 = tmp4_2;
_cr2 = tmp4_3;
_cmt = tmp4_4;
_p = tmp4_5;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_cdef_1 = omc_InteractiveUtil_setConnectionCommentInClass(threadData, _cdef, _cr1, _cr2, _cmt);
tmpMeta6 = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta7, _p, 0);
tmpMeta[0+0] = _newp;
tmp1_c1 = _OMC_LIT31;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inProgram5;
tmp1_c1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inComponentRef, modelica_string _inString)
{
modelica_metatype _outAbsynComponentItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_string tmp4_3;
tmp4_1 = _inAbsynComponentItemLst;
tmp4_2 = _inComponentRef;
tmp4_3 = _inString;
{
modelica_metatype _compcmt_1 = NULL;
modelica_metatype _compcmt = NULL;
modelica_string _id = NULL;
modelica_string _cmt = NULL;
modelica_metatype _ad = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _cs = NULL;
modelica_metatype _cs_1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _c = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_boolean tmp16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_id = tmpMeta9;
_ad = tmpMeta10;
_mod = tmpMeta11;
_cond = tmpMeta12;
_compcmt = tmpMeta13;
_cs = tmpMeta7;
_cr = tmp4_2;
_cmt = tmp4_3;
tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta15 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, tmpMeta14);
tmp16 = omc_AbsynUtil_crefEqual(threadData, tmpMeta15, _cr);
if (1 != tmp16) goto goto_2;
_compcmt_1 = omc_InteractiveUtil_setClassCommentInCommentOpt(threadData, _compcmt, _cmt);
tmpMeta18 = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _id, _ad, _mod);
tmpMeta19 = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta18, _cond, _compcmt_1);
tmpMeta17 = mmc_mk_cons(tmpMeta19, _cs);
tmpMeta1 = tmpMeta17;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_1);
tmpMeta21 = MMC_CDR(tmp4_1);
_c = tmpMeta20;
_cs = tmpMeta21;
_cr = tmp4_2;
_cmt = tmp4_3;
_cs_1 = omc_InteractiveUtil_setComponentCommentInCompitems(threadData, _cs, _cr, _cmt);
tmpMeta22 = mmc_mk_cons(_c, _cs_1);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynComponentItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynComponentItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inComponentRef, modelica_string _inString)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_string tmp4_3;
tmp4_1 = _inElementSpec;
tmp4_2 = _inComponentRef;
tmp4_3 = _inString;
{
modelica_metatype _citems_1 = NULL;
modelica_metatype _citems = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _cr = NULL;
modelica_string _cmt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_attr = tmpMeta6;
_tp = tmpMeta7;
_citems = tmpMeta8;
_cr = tmp4_2;
_cmt = tmp4_3;
_citems_1 = omc_InteractiveUtil_setComponentCommentInCompitems(threadData, _citems, _cr, _cmt);
tmpMeta9 = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr, _tp, _citems_1);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElementSpec = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponentRef, modelica_string _inString)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_string tmp4_3;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inComponentRef;
tmp4_3 = _inString;
{
modelica_metatype _spec_1 = NULL;
modelica_metatype _spec = NULL;
modelica_boolean _f;
modelica_metatype _r = NULL;
modelica_metatype _inout = NULL;
modelica_string _cmt = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_metatype _es = NULL;
modelica_metatype _es_1 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 6));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 7));
_f = tmp10;
_r = tmpMeta11;
_inout = tmpMeta12;
_spec = tmpMeta13;
_info = tmpMeta14;
_constr = tmpMeta15;
_es = tmpMeta7;
_cr1 = tmp4_2;
_cmt = tmp4_3;
_spec_1 = omc_InteractiveUtil_setComponentCommentInElementspec(threadData, _spec, _cr1, _cmt);
tmpMeta17 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _inout, _spec_1, _info, _constr);
tmpMeta18 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta17);
tmpMeta16 = mmc_mk_cons(tmpMeta18, _es);
tmpMeta1 = tmpMeta16;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta19 = MMC_CAR(tmp4_1);
tmpMeta20 = MMC_CDR(tmp4_1);
_e = tmpMeta19;
_es = tmpMeta20;
_cr1 = tmp4_2;
_cmt = tmp4_3;
_es_1 = omc_InteractiveUtil_setComponentCommentInElementitems(threadData, _es, _cr1, _cmt);
tmpMeta21 = mmc_mk_cons(_e, _es_1);
tmpMeta1 = tmpMeta21;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponentRef, modelica_string _inString)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_string tmp4_3;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inComponentRef;
tmp4_3 = _inString;
{
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _e = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _xs_1 = NULL;
modelica_metatype _cr1 = NULL;
modelica_string _cmt = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_elts = tmpMeta8;
_xs = tmpMeta7;
_cr1 = tmp4_2;
_cmt = tmp4_3;
_elts_1 = omc_InteractiveUtil_setComponentCommentInElementitems(threadData, _elts, _cr1, _cmt);
tmpMeta10 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta9 = mmc_mk_cons(tmpMeta10, _xs);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_1);
tmpMeta12 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,1) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
_e = tmpMeta13;
_xs = tmpMeta12;
_cr1 = tmp4_2;
_cmt = tmp4_3;
tmp4 += 2;
_xs_1 = omc_InteractiveUtil_setComponentCommentInParts(threadData, _xs, _cr1, _cmt);
tmpMeta15 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _e);
tmpMeta14 = mmc_mk_cons(tmpMeta15, _xs_1);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_1);
tmpMeta17 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,1,1) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
_elts = tmpMeta18;
_xs = tmpMeta17;
_cr1 = tmp4_2;
_cmt = tmp4_3;
_elts_1 = omc_InteractiveUtil_setComponentCommentInElementitems(threadData, _elts, _cr1, _cmt);
tmpMeta20 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta19 = mmc_mk_cons(tmpMeta20, _xs);
tmpMeta1 = tmpMeta19;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta21 = MMC_CAR(tmp4_1);
tmpMeta22 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,1,1) == 0) goto tmp3_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
_e = tmpMeta23;
_xs = tmpMeta22;
_cr1 = tmp4_2;
_cmt = tmp4_3;
_xs_1 = omc_InteractiveUtil_setComponentCommentInParts(threadData, _xs, _cr1, _cmt);
tmpMeta25 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _e);
tmpMeta24 = mmc_mk_cons(tmpMeta25, _xs_1);
tmpMeta1 = tmpMeta24;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta26 = MMC_CAR(tmp4_1);
tmpMeta27 = MMC_CDR(tmp4_1);
_p = tmpMeta26;
_xs = tmpMeta27;
_cr1 = tmp4_2;
_cmt = tmp4_3;
_xs_1 = omc_InteractiveUtil_setComponentCommentInParts(threadData, _xs, _cr1, _cmt);
tmpMeta28 = mmc_mk_cons(_p, _xs_1);
tmpMeta1 = tmpMeta28;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentRef, modelica_string _inString)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_string tmp4_3;
tmp4_1 = _inClass;
tmp4_2 = _inComponentRef;
tmp4_3 = _inString;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _name = NULL;
modelica_string _cmt = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _restr = NULL;
modelica_metatype _pcmt = NULL;
modelica_metatype _info = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_restr = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_pcmt = tmpMeta19;
_info = tmpMeta20;
_cr1 = tmp4_2;
_cmt = tmp4_3;
_parts_1 = omc_InteractiveUtil_setComponentCommentInParts(threadData, _parts, _cr1, _cmt);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _pcmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _restr, tmpMeta21, _info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_restr = tmpMeta30;
_bcname = tmpMeta32;
_modif = tmpMeta33;
_pcmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_info = tmpMeta37;
_cr1 = tmp4_2;
_cmt = tmp4_3;
_parts_1 = omc_InteractiveUtil_setComponentCommentInParts(threadData, _parts, _cr1, _cmt);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _pcmt, _parts_1, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _restr, tmpMeta38, _info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_setComponentComment(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_string _inString3, modelica_metatype _inProgram4, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_string tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inString3;
tmp4_4 = _inProgram4;
{
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _cr1 = NULL;
modelica_string _cmt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_class_ = tmp4_1;
_cr1 = tmp4_2;
_cmt = tmp4_3;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_cdef_1 = omc_InteractiveUtil_setComponentCommentInClass(threadData, _cdef, _cr1, _cmt);
tmpMeta6 = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta7, _p, 0);
tmp1_c0 = _OMC_LIT31;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
tmp1_c0 = _OMC_LIT32;
tmpMeta[0+1] = _inProgram4;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getClassCommentInCommentOpt(threadData_t *threadData, modelica_metatype _inComment)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComment;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (optionNone(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
_outString = tmpMeta8;
tmp1 = _outString;
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inComponentRef)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inAbsynComponentItemLst;
tmp4_2 = _inComponentRef;
{
modelica_metatype _compcmt = NULL;
modelica_string _id = NULL;
modelica_metatype _ad = NULL;
modelica_metatype _cs = NULL;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_boolean tmp13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_id = tmpMeta9;
_ad = tmpMeta10;
_compcmt = tmpMeta11;
_cr = tmp4_2;
tmpMeta12 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, _ad);
tmp13 = omc_AbsynUtil_crefEqual(threadData, tmpMeta12, _cr);
if (1 != tmp13) goto goto_2;
tmp1 = omc_InteractiveUtil_getClassCommentInCommentOpt(threadData, _compcmt);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmp4_1);
tmpMeta15 = MMC_CDR(tmp4_1);
_cs = tmpMeta15;
_cr = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInCompitems(threadData, _cs, _cr);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inComponentRef)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inElementSpec;
tmp4_2 = _inComponentRef;
{
modelica_metatype _citems = NULL;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_citems = tmpMeta6;
_cr = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInCompitems(threadData, _citems, _cr);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponentRef)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inComponentRef;
{
modelica_metatype _spec = NULL;
modelica_metatype _es = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_spec = tmpMeta9;
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInElementspec(threadData, _spec, _cr1);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
_es = tmpMeta11;
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInElementitems(threadData, _es, _cr1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponentRef)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inComponentRef;
{
modelica_metatype _elts = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_elts = tmpMeta8;
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInElementitems(threadData, _elts, _cr1);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,1) == 0) goto tmp3_end;
_xs = tmpMeta10;
_cr1 = tmp4_2;
tmp4 += 2;
tmp1 = omc_InteractiveUtil_getComponentCommentInParts(threadData, _xs, _cr1);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_1);
tmpMeta12 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,1,1) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
_elts = tmpMeta13;
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInElementitems(threadData, _elts, _cr1);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmp4_1);
tmpMeta15 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,1,1) == 0) goto tmp3_end;
_xs = tmpMeta15;
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInParts(threadData, _xs, _cr1);
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_1);
tmpMeta17 = MMC_CDR(tmp4_1);
_xs = tmpMeta17;
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInParts(threadData, _xs, _cr1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentRef)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inComponentRef;
{
modelica_metatype _parts = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInParts(threadData, _parts, _cr1);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_parts = tmpMeta9;
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInParts(threadData, _parts, _cr1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentComment(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inProgram4)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inProgram4;
{
modelica_metatype _p_class = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_class_ = tmp4_1;
_cr1 = tmp4_2;
_p = tmp4_3;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
tmp1 = omc_InteractiveUtil_getComponentCommentInClass(threadData, _cdef, _cr1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_compareTransitionFuncArgs(threadData_t *threadData, modelica_metatype _args, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_string tmp4_3;volatile modelica_string tmp4_4;volatile modelica_boolean tmp4_5;volatile modelica_boolean tmp4_6;volatile modelica_boolean tmp4_7;volatile modelica_integer tmp4_8;
tmp4_1 = _args;
tmp4_2 = _from;
tmp4_3 = _to;
tmp4_4 = _condition;
tmp4_5 = _immediate;
tmp4_6 = _reset;
tmp4_7 = _synchronize;
tmp4_8 = _priority;
{
modelica_string _from1 = NULL;
modelica_string _to1 = NULL;
modelica_string _condition1 = NULL;
modelica_string _immediate1 = NULL;
modelica_string _reset1 = NULL;
modelica_string _synchronize1 = NULL;
modelica_string _priority1 = NULL;
modelica_string _from2 = NULL;
modelica_string _to2 = NULL;
modelica_string _condition2 = NULL;
modelica_boolean _immediate2;
modelica_boolean _reset2;
modelica_boolean _synchronize2;
modelica_integer _priority2;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_CAR(tmpMeta7);
tmpMeta9 = MMC_CDR(tmpMeta7);
if (listEmpty(tmpMeta9)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmpMeta9);
tmpMeta11 = MMC_CDR(tmpMeta9);
if (!listEmpty(tmpMeta11)) goto tmp3_end;
_from1 = tmpMeta6;
_to1 = tmpMeta8;
_condition1 = tmpMeta10;
_from2 = tmp4_2;
_to2 = tmp4_3;
_condition2 = tmp4_4;
tmp4 += 4;
if (!(((stringEqual(_from1, _from2)) && (stringEqual(_to1, _to2))) && (stringEqual(_condition1, _condition2)))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta13)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmpMeta13);
tmpMeta15 = MMC_CDR(tmpMeta13);
if (listEmpty(tmpMeta15)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmpMeta15);
tmpMeta17 = MMC_CDR(tmpMeta15);
if (listEmpty(tmpMeta17)) goto tmp3_end;
tmpMeta18 = MMC_CAR(tmpMeta17);
tmpMeta19 = MMC_CDR(tmpMeta17);
if (!listEmpty(tmpMeta19)) goto tmp3_end;
_from1 = tmpMeta12;
_to1 = tmpMeta14;
_condition1 = tmpMeta16;
_immediate1 = tmpMeta18;
_from2 = tmp4_2;
_to2 = tmp4_3;
_condition2 = tmp4_4;
_immediate2 = tmp4_5;
tmp4 += 3;
if (!((((stringEqual(_from1, _from2)) && (stringEqual(_to1, _to2))) && (stringEqual(_condition1, _condition2))) && (stringEqual(_immediate1, (_immediate2?_OMC_LIT102:_OMC_LIT103))))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_1);
tmpMeta21 = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta21)) goto tmp3_end;
tmpMeta22 = MMC_CAR(tmpMeta21);
tmpMeta23 = MMC_CDR(tmpMeta21);
if (listEmpty(tmpMeta23)) goto tmp3_end;
tmpMeta24 = MMC_CAR(tmpMeta23);
tmpMeta25 = MMC_CDR(tmpMeta23);
if (listEmpty(tmpMeta25)) goto tmp3_end;
tmpMeta26 = MMC_CAR(tmpMeta25);
tmpMeta27 = MMC_CDR(tmpMeta25);
if (listEmpty(tmpMeta27)) goto tmp3_end;
tmpMeta28 = MMC_CAR(tmpMeta27);
tmpMeta29 = MMC_CDR(tmpMeta27);
if (!listEmpty(tmpMeta29)) goto tmp3_end;
_from1 = tmpMeta20;
_to1 = tmpMeta22;
_condition1 = tmpMeta24;
_immediate1 = tmpMeta26;
_reset1 = tmpMeta28;
_from2 = tmp4_2;
_to2 = tmp4_3;
_condition2 = tmp4_4;
_immediate2 = tmp4_5;
_reset2 = tmp4_6;
tmp4 += 2;
if (!(((((stringEqual(_from1, _from2)) && (stringEqual(_to1, _to2))) && (stringEqual(_condition1, _condition2))) && (stringEqual(_immediate1, (_immediate2?_OMC_LIT102:_OMC_LIT103)))) && (stringEqual(_reset1, (_reset2?_OMC_LIT102:_OMC_LIT103))))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta30 = MMC_CAR(tmp4_1);
tmpMeta31 = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta31)) goto tmp3_end;
tmpMeta32 = MMC_CAR(tmpMeta31);
tmpMeta33 = MMC_CDR(tmpMeta31);
if (listEmpty(tmpMeta33)) goto tmp3_end;
tmpMeta34 = MMC_CAR(tmpMeta33);
tmpMeta35 = MMC_CDR(tmpMeta33);
if (listEmpty(tmpMeta35)) goto tmp3_end;
tmpMeta36 = MMC_CAR(tmpMeta35);
tmpMeta37 = MMC_CDR(tmpMeta35);
if (listEmpty(tmpMeta37)) goto tmp3_end;
tmpMeta38 = MMC_CAR(tmpMeta37);
tmpMeta39 = MMC_CDR(tmpMeta37);
if (listEmpty(tmpMeta39)) goto tmp3_end;
tmpMeta40 = MMC_CAR(tmpMeta39);
tmpMeta41 = MMC_CDR(tmpMeta39);
if (!listEmpty(tmpMeta41)) goto tmp3_end;
_from1 = tmpMeta30;
_to1 = tmpMeta32;
_condition1 = tmpMeta34;
_immediate1 = tmpMeta36;
_reset1 = tmpMeta38;
_synchronize1 = tmpMeta40;
_from2 = tmp4_2;
_to2 = tmp4_3;
_condition2 = tmp4_4;
_immediate2 = tmp4_5;
_reset2 = tmp4_6;
_synchronize2 = tmp4_7;
tmp4 += 1;
if (!((((((stringEqual(_from1, _from2)) && (stringEqual(_to1, _to2))) && (stringEqual(_condition1, _condition2))) && (stringEqual(_immediate1, (_immediate2?_OMC_LIT102:_OMC_LIT103)))) && (stringEqual(_reset1, (_reset2?_OMC_LIT102:_OMC_LIT103)))) && (stringEqual(_synchronize1, (_synchronize2?_OMC_LIT102:_OMC_LIT103))))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta42 = MMC_CAR(tmp4_1);
tmpMeta43 = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta43)) goto tmp3_end;
tmpMeta44 = MMC_CAR(tmpMeta43);
tmpMeta45 = MMC_CDR(tmpMeta43);
if (listEmpty(tmpMeta45)) goto tmp3_end;
tmpMeta46 = MMC_CAR(tmpMeta45);
tmpMeta47 = MMC_CDR(tmpMeta45);
if (listEmpty(tmpMeta47)) goto tmp3_end;
tmpMeta48 = MMC_CAR(tmpMeta47);
tmpMeta49 = MMC_CDR(tmpMeta47);
if (listEmpty(tmpMeta49)) goto tmp3_end;
tmpMeta50 = MMC_CAR(tmpMeta49);
tmpMeta51 = MMC_CDR(tmpMeta49);
if (listEmpty(tmpMeta51)) goto tmp3_end;
tmpMeta52 = MMC_CAR(tmpMeta51);
tmpMeta53 = MMC_CDR(tmpMeta51);
if (listEmpty(tmpMeta53)) goto tmp3_end;
tmpMeta54 = MMC_CAR(tmpMeta53);
tmpMeta55 = MMC_CDR(tmpMeta53);
if (!listEmpty(tmpMeta55)) goto tmp3_end;
_from1 = tmpMeta42;
_to1 = tmpMeta44;
_condition1 = tmpMeta46;
_immediate1 = tmpMeta48;
_reset1 = tmpMeta50;
_synchronize1 = tmpMeta52;
_priority1 = tmpMeta54;
_from2 = tmp4_2;
_to2 = tmp4_3;
_condition2 = tmp4_4;
_immediate2 = tmp4_5;
_reset2 = tmp4_6;
_synchronize2 = tmp4_7;
_priority2 = tmp4_8;
if (!(((((((stringEqual(_from1, _from2)) && (stringEqual(_to1, _to2))) && (stringEqual(_condition1, _condition2))) && (stringEqual(_immediate1, (_immediate2?_OMC_LIT102:_OMC_LIT103)))) && (stringEqual(_reset1, (_reset2?_OMC_LIT102:_OMC_LIT103)))) && (stringEqual(_synchronize1, (_synchronize2?_OMC_LIT102:_OMC_LIT103)))) && (stringEqual(_priority1, intString(_priority2))))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_compareTransitionFuncArgs(threadData_t *threadData, modelica_metatype _args, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_boolean _b;
modelica_metatype out_b;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_b = omc_InteractiveUtil_compareTransitionFuncArgs(threadData, _args, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_namedArgValueAsString(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_string _inNamedArg, modelica_string _inDefaultValue, modelica_boolean *out_outDefault)
{
modelica_string _outNamedArg = NULL;
modelica_boolean _outDefault;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynNamedArgLst;
{
modelica_metatype _namedArg = NULL;
modelica_metatype _al = NULL;
modelica_string _namedArgName = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1_c0 = _inDefaultValue;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_namedArg = tmpMeta6;
_namedArgName = tmpMeta8;
if (!(stringEqual(_namedArgName, _inNamedArg))) goto tmp3_end;
tmp1_c0 = omc_Dump_printNamedArgValueStr(threadData, _namedArg);
tmp1_c1 = 0;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
_al = tmpMeta10;
_inAbsynNamedArgLst = _al;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outNamedArg = tmp1_c0;
_outDefault = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outDefault) { *out_outDefault = _outDefault; }
return _outNamedArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_namedArgValueAsString(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inNamedArg, modelica_metatype _inDefaultValue, modelica_metatype *out_outDefault)
{
modelica_boolean _outDefault;
modelica_string _outNamedArg = NULL;
_outNamedArg = omc_InteractiveUtil_namedArgValueAsString(threadData, _inAbsynNamedArgLst, _inNamedArg, _inDefaultValue, &_outDefault);
if (out_outDefault) { *out_outDefault = mmc_mk_icon(_outDefault); }
return _outNamedArg;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addOrUpdateNamedArg(threadData_t *threadData, modelica_metatype _inNamedArgLst, modelica_string _namedArg, modelica_string _defaultValue, modelica_metatype _inTransition, modelica_integer _position)
{
modelica_metatype _outTransition = NULL;
modelica_string _namedArgValue = NULL;
modelica_boolean _isDefault;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_namedArgValue = omc_InteractiveUtil_namedArgValueAsString(threadData, _inNamedArgLst, _namedArg, _defaultValue ,&_isDefault);
if((listLength(_inTransition) < _position))
{
_outTransition = omc_List_insert(threadData, _inTransition, _position, _namedArgValue);
}
else
{
if(((listLength(_inTransition) >= _position) && (!_isDefault)))
{
_outTransition = omc_List_replaceAt(threadData, _namedArgValue, _position, _inTransition);
}
else
{
_outTransition = _inTransition;
}
}
_return: OMC_LABEL_UNUSED
return _outTransition;
}
modelica_metatype boxptr_InteractiveUtil_addOrUpdateNamedArg(threadData_t *threadData, modelica_metatype _inNamedArgLst, modelica_metatype _namedArg, modelica_metatype _defaultValue, modelica_metatype _inTransition, modelica_metatype _position)
{
modelica_integer tmp1;
modelica_metatype _outTransition = NULL;
tmp1 = mmc_unbox_integer(_position);
_outTransition = omc_InteractiveUtil_addOrUpdateNamedArg(threadData, _inNamedArgLst, _namedArg, _defaultValue, _inTransition, tmp1);
return _outTransition;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteTransitionInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority)
{
modelica_metatype _outAbsynEquationItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_string tmp4_3;volatile modelica_string tmp4_4;volatile modelica_boolean tmp4_5;volatile modelica_boolean tmp4_6;volatile modelica_boolean tmp4_7;volatile modelica_integer tmp4_8;
tmp4_1 = _inAbsynEquationItemLst;
tmp4_2 = _from;
tmp4_3 = _to;
tmp4_4 = _condition;
tmp4_5 = _immediate;
tmp4_6 = _reset;
tmp4_7 = _synchronize;
tmp4_8 = _priority;
{
modelica_metatype _res = NULL;
modelica_metatype _xs = NULL;
modelica_string _from_ = NULL;
modelica_string _to_ = NULL;
modelica_string _condition_ = NULL;
modelica_boolean _immediate_;
modelica_boolean _reset_;
modelica_boolean _synchronize_;
modelica_integer _priority_;
modelica_metatype _name = NULL;
modelica_metatype _expArgs = NULL;
modelica_metatype _namedArgs = NULL;
modelica_metatype _args = NULL;
modelica_metatype _conditionExp = NULL;
modelica_metatype _x = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_boolean tmp19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,3) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,6,2) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,2) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
_name = tmpMeta10;
_expArgs = tmpMeta12;
_namedArgs = tmpMeta13;
_xs = tmpMeta8;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
if (!omc_AbsynUtil_crefEqual(threadData, _name, _OMC_LIT226)) goto tmp3_end;
_args = omc_List_map(threadData, _expArgs, boxvar_Dump_printExpStr);
_args = omc_InteractiveUtil_addOrUpdateNamedArg(threadData, _namedArgs, _OMC_LIT219, _OMC_LIT102, _args, ((modelica_integer) 4));
_args = omc_InteractiveUtil_addOrUpdateNamedArg(threadData, _namedArgs, _OMC_LIT220, _OMC_LIT102, _args, ((modelica_integer) 5));
_args = omc_InteractiveUtil_addOrUpdateNamedArg(threadData, _namedArgs, _OMC_LIT221, _OMC_LIT103, _args, ((modelica_integer) 6));
_args = omc_InteractiveUtil_addOrUpdateNamedArg(threadData, _namedArgs, _OMC_LIT222, _OMC_LIT223, _args, ((modelica_integer) 7));
tmpMeta14 = omc_Parser_parsestringexp(threadData, _condition_, _OMC_LIT224);
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
if (listEmpty(tmpMeta15)) goto goto_2;
tmpMeta16 = MMC_CAR(tmpMeta15);
tmpMeta17 = MMC_CDR(tmpMeta15);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,1,2) == 0) goto goto_2;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
if (!listEmpty(tmpMeta17)) goto goto_2;
_conditionExp = tmpMeta18;
_condition_ = omc_Dump_printExpStr(threadData, _conditionExp);
tmp19 = omc_InteractiveUtil_compareTransitionFuncArgs(threadData, _args, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
if (1 != tmp19) goto goto_2;
tmpMeta1 = omc_InteractiveUtil_deleteTransitionInEqlist(threadData, _xs, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_1);
tmpMeta21 = MMC_CDR(tmp4_1);
_x = tmpMeta20;
_xs = tmpMeta21;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_res = omc_InteractiveUtil_deleteTransitionInEqlist(threadData, _xs, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
tmpMeta22 = mmc_mk_cons(_x, _res);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynEquationItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteTransitionInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_metatype _outAbsynEquationItemLst = NULL;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_outAbsynEquationItemLst = omc_InteractiveUtil_deleteTransitionInEqlist(threadData, _inAbsynEquationItemLst, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4);
return _outAbsynEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteTransitionInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;modelica_string tmp4_3;modelica_string tmp4_4;modelica_boolean tmp4_5;modelica_boolean tmp4_6;modelica_boolean tmp4_7;modelica_integer tmp4_8;
tmp4_1 = _inClass;
tmp4_2 = _from;
tmp4_3 = _to;
tmp4_4 = _condition;
tmp4_5 = _immediate;
tmp4_6 = _reset;
tmp4_7 = _synchronize;
tmp4_8 = _priority;
{
modelica_metatype _eqlst = NULL;
modelica_metatype _eqlst_1 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_string _from_ = NULL;
modelica_string _to_ = NULL;
modelica_string _condition_ = NULL;
modelica_boolean _immediate_;
modelica_boolean _reset_;
modelica_boolean _synchronize_;
modelica_integer _priority_;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_deleteTransitionInEqlist(threadData, _eqlst, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta21, _file_info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_r = tmpMeta30;
_bcname = tmpMeta32;
_modif = tmpMeta33;
_cmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_deleteTransitionInEqlist(threadData, _eqlst, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta38, _file_info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteTransitionInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_outClass = omc_InteractiveUtil_deleteTransitionInClass(threadData, _inClass, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4);
return _outClass;
}
DLLExport
modelica_boolean omc_InteractiveUtil_deleteTransition(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _b;
modelica_metatype _outProgram = NULL;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_string tmp4_3;volatile modelica_string tmp4_4;volatile modelica_boolean tmp4_5;volatile modelica_boolean tmp4_6;volatile modelica_boolean tmp4_7;volatile modelica_integer tmp4_8;volatile modelica_metatype tmp4_9;
tmp4_1 = _inComponentRef1;
tmp4_2 = _from;
tmp4_3 = _to;
tmp4_4 = _condition;
tmp4_5 = _immediate;
tmp4_6 = _reset;
tmp4_7 = _synchronize;
tmp4_8 = _priority;
tmp4_9 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _modelwithin = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _model_ = NULL;
modelica_string _from_ = NULL;
modelica_string _to_ = NULL;
modelica_string _condition_ = NULL;
modelica_boolean _immediate_;
modelica_boolean _reset_;
modelica_boolean _synchronize_;
modelica_integer _priority_;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_model_ = tmp4_1;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_p = tmp4_9;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_modelwithin = omc_AbsynUtil_stripLast(threadData, _modelpath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteTransitionInClass(threadData, _cdef, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
tmpMeta6 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _modelwithin);
tmpMeta8 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, tmpMeta7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta8, _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
_model_ = tmp4_1;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_p = tmp4_9;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteTransitionInClass(threadData, _cdef, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
tmpMeta9 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta10 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta9, _OMC_LIT7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta10, _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 2: {
_p = tmp4_9;
tmp1_c0 = 0;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_b = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _b;
}
modelica_metatype boxptr_InteractiveUtil_deleteTransition(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_boolean _b;
modelica_metatype out_b;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_b = omc_InteractiveUtil_deleteTransition(threadData, _inComponentRef1, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4, _inProgram, out_outProgram);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_InteractiveUtil_addTransitionWithAnnotation(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority, modelica_metatype _inAnnotation, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _b;
modelica_metatype _outProgram = NULL;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;modelica_string tmp4_3;modelica_string tmp4_4;modelica_boolean tmp4_5;modelica_boolean tmp4_6;modelica_boolean tmp4_7;modelica_integer tmp4_8;modelica_metatype tmp4_9;modelica_metatype tmp4_10;
tmp4_1 = _inComponentRef;
tmp4_2 = _from;
tmp4_3 = _to;
tmp4_4 = _condition;
tmp4_5 = _immediate;
tmp4_6 = _reset;
tmp4_7 = _synchronize;
tmp4_8 = _priority;
tmp4_9 = _inAnnotation;
tmp4_10 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _package_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _model_ = NULL;
modelica_string _from_ = NULL;
modelica_string _to_ = NULL;
modelica_string _condition_ = NULL;
modelica_boolean _immediate_;
modelica_boolean _reset_;
modelica_boolean _synchronize_;
modelica_integer _priority_;
modelica_metatype _ann = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _conditionExp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
_model_ = tmp4_1;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_ann = tmp4_9;
_p = tmp4_10;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta6 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(_ann), mmc_mk_none());
_cmt = mmc_mk_some(tmpMeta6);
tmpMeta7 = omc_Parser_parsestringexp(threadData, _condition_, _OMC_LIT224);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (listEmpty(tmpMeta8)) goto goto_2;
tmpMeta9 = MMC_CAR(tmpMeta8);
tmpMeta10 = MMC_CDR(tmpMeta8);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,2) == 0) goto goto_2;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
if (!listEmpty(tmpMeta10)) goto goto_2;
_conditionExp = tmpMeta11;
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta14 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _from_, tmpMeta13);
tmpMeta15 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, tmpMeta14);
tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta17 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _to_, tmpMeta16);
tmpMeta18 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, tmpMeta17);
tmpMeta12 = mmc_mk_cons(tmpMeta15, mmc_mk_cons(tmpMeta18, mmc_mk_cons(_conditionExp, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta20 = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_immediate_));
tmpMeta21 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT219, tmpMeta20);
tmpMeta22 = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_reset_));
tmpMeta23 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT220, tmpMeta22);
tmpMeta24 = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_synchronize_));
tmpMeta25 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT221, tmpMeta24);
tmpMeta26 = mmc_mk_box2(3, &Absyn_Exp_INTEGER__desc, mmc_mk_integer(_priority_));
tmpMeta27 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT222, tmpMeta26);
tmpMeta19 = mmc_mk_cons(tmpMeta21, mmc_mk_cons(tmpMeta23, mmc_mk_cons(tmpMeta25, mmc_mk_cons(tmpMeta27, MMC_REFSTRUCTLIT(mmc_nil)))));
tmpMeta28 = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, tmpMeta12, tmpMeta19);
tmpMeta29 = mmc_mk_box3(9, &Absyn_Equation_EQ__NORETCALL__desc, _OMC_LIT226, tmpMeta28);
tmpMeta30 = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta29, _cmt, _OMC_LIT18);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta30);
tmpMeta31 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta32 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta31, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 3))));
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta32, _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
_model_ = tmp4_1;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_ann = tmp4_9;
_p = tmp4_10;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_package_ = omc_AbsynUtil_stripLast(threadData, _modelpath);
tmpMeta33 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(_ann), mmc_mk_none());
_cmt = mmc_mk_some(tmpMeta33);
tmpMeta34 = omc_Parser_parsestringexp(threadData, _condition_, _OMC_LIT224);
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 2));
if (listEmpty(tmpMeta35)) goto goto_2;
tmpMeta36 = MMC_CAR(tmpMeta35);
tmpMeta37 = MMC_CDR(tmpMeta35);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta36,1,2) == 0) goto goto_2;
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta36), 2));
if (!listEmpty(tmpMeta37)) goto goto_2;
_conditionExp = tmpMeta38;
tmpMeta40 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta41 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _from_, tmpMeta40);
tmpMeta42 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, tmpMeta41);
tmpMeta43 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta44 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _to_, tmpMeta43);
tmpMeta45 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, tmpMeta44);
tmpMeta39 = mmc_mk_cons(tmpMeta42, mmc_mk_cons(tmpMeta45, mmc_mk_cons(_conditionExp, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta47 = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_immediate_));
tmpMeta48 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT219, tmpMeta47);
tmpMeta49 = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_reset_));
tmpMeta50 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT220, tmpMeta49);
tmpMeta51 = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_synchronize_));
tmpMeta52 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT221, tmpMeta51);
tmpMeta53 = mmc_mk_box2(3, &Absyn_Exp_INTEGER__desc, mmc_mk_integer(_priority_));
tmpMeta54 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT222, tmpMeta53);
tmpMeta46 = mmc_mk_cons(tmpMeta48, mmc_mk_cons(tmpMeta50, mmc_mk_cons(tmpMeta52, mmc_mk_cons(tmpMeta54, MMC_REFSTRUCTLIT(mmc_nil)))));
tmpMeta55 = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, tmpMeta39, tmpMeta46);
tmpMeta56 = mmc_mk_box3(9, &Absyn_Equation_EQ__NORETCALL__desc, _OMC_LIT226, tmpMeta55);
tmpMeta57 = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta56, _cmt, _OMC_LIT18);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta57);
tmpMeta58 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta59 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _package_);
tmpMeta60 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta58, tmpMeta59);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta60, _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _b;
}
modelica_metatype boxptr_InteractiveUtil_addTransitionWithAnnotation(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority, modelica_metatype _inAnnotation, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_boolean _b;
modelica_metatype out_b;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_b = omc_InteractiveUtil_addTransitionWithAnnotation(threadData, _inComponentRef, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4, _inAnnotation, _inProgram, out_outProgram);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_InteractiveUtil_addTransition(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _b;
modelica_metatype _outProgram = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = omc_InteractiveUtil_addTransitionWithAnnotation(threadData, _inComponentRef, _from, _to, _condition, _immediate, _reset, _synchronize, _priority, omc_InteractiveUtil_annotationListToAbsyn(threadData, _inAbsynNamedArgLst), _inProgram ,&_outProgram);
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _b;
}
modelica_metatype boxptr_InteractiveUtil_addTransition(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_boolean _b;
modelica_metatype out_b;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_b = omc_InteractiveUtil_addTransition(threadData, _inComponentRef, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4, _inAbsynNamedArgLst, _inProgram, out_outProgram);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteEquationInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynEquationItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inAbsynEquationItemLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _res = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _cn1 = NULL;
modelica_metatype _cn2 = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _x = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,3) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,3,2) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
_cn1 = tmpMeta10;
_cn2 = tmpMeta11;
_xs = tmpMeta8;
_c1 = tmp4_2;
_c2 = tmp4_3;
if (!(omc_AbsynUtil_crefEqual(threadData, _c1, _cn1) && omc_AbsynUtil_crefEqual(threadData, _c2, _cn2))) goto tmp3_end;
_inAbsynEquationItemLst1 = _xs;
_inComponentRef2 = _c1;
_inComponentRef3 = _c2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_x = tmpMeta12;
_xs = tmpMeta13;
_c1 = tmp4_2;
_c2 = tmp4_3;
_res = omc_InteractiveUtil_deleteEquationInEqlist(threadData, _xs, _c1, _c2);
tmpMeta14 = mmc_mk_cons(_x, _res);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynEquationItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteEquationInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inClass1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _eqlst = NULL;
modelica_metatype _eqlst_1 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_c1 = tmp4_2;
_c2 = tmp4_3;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_deleteEquationInEqlist(threadData, _eqlst, _c1, _c2);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta21, _file_info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_i = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_r = tmpMeta30;
_bcname = tmpMeta32;
_modif = tmpMeta33;
_cmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_c1 = tmp4_2;
_c2 = tmp4_3;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_deleteEquationInEqlist(threadData, _eqlst, _c1, _c2);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta38, _file_info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_deleteConnection(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inProgram4, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inProgram4;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _modelwithin = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_p = tmp4_4;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_modelwithin = omc_AbsynUtil_stripLast(threadData, _modelpath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteEquationInClass(threadData, _cdef, _c1, _c2);
tmpMeta6 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _modelwithin);
tmpMeta8 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, tmpMeta7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta8, _p, 0);
tmp1_c0 = _OMC_LIT31;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_p = tmp4_4;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteEquationInClass(threadData, _cdef, _c1, _c2);
tmpMeta9 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta10 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta9, _OMC_LIT7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta10, _p, 0);
tmp1_c0 = _OMC_LIT31;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 2: {
_p = tmp4_4;
tmp1_c0 = _OMC_LIT32;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_addConnection(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inAbsynNamedArgLst4, modelica_metatype _inProgram5, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inAbsynNamedArgLst4;
tmp4_5 = _inProgram5;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _package_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _nargs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
if (!listEmpty(tmp4_4)) goto tmp3_end;
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_p = tmp4_5;
tmp4 += 1;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta6 = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _c1, _c2);
tmpMeta7 = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta6, mmc_mk_none(), _OMC_LIT18);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta7);
tmpMeta8 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta9 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta8, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 3))));
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta9, _p, 0);
tmp1_c0 = _OMC_LIT31;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
if (!listEmpty(tmp4_4)) goto tmp3_end;
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_p = tmp4_5;
tmp4 += 1;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_package_ = omc_AbsynUtil_stripLast(threadData, _modelpath);
tmpMeta10 = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _c1, _c2);
tmpMeta11 = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta10, mmc_mk_none(), _OMC_LIT18);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta11);
tmpMeta12 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta13 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _package_);
tmpMeta14 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta12, tmpMeta13);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta14, _p, 0);
tmp1_c0 = _OMC_LIT31;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_nargs = tmp4_4;
_p = tmp4_5;
tmp4 += 1;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_cmt = omc_InteractiveUtil_annotationListToAbsynComment(threadData, _nargs, mmc_mk_none());
tmpMeta15 = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _c1, _c2);
tmpMeta16 = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta15, _cmt, _OMC_LIT18);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta16);
tmpMeta17 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta18 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta17, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 3))));
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta18, _p, 0);
tmp1_c0 = _OMC_LIT31;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_nargs = tmp4_4;
_p = tmp4_5;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_package_ = omc_AbsynUtil_stripLast(threadData, _modelpath);
_cmt = omc_InteractiveUtil_annotationListToAbsynComment(threadData, _nargs, mmc_mk_none());
tmpMeta19 = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _c1, _c2);
tmpMeta20 = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta19, _cmt, _OMC_LIT18);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta20);
tmpMeta21 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta22 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _package_);
tmpMeta23 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta21, tmpMeta22);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta23, _p, 0);
tmp1_c0 = _OMC_LIT31;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getStringComment(threadData_t *threadData, modelica_metatype _inAbsynCommentOption)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynCommentOption;
{
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (optionNone(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
_str = tmpMeta8;
tmp1 = _str;
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getNthConnection(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_metatype _outValue = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _eq = NULL;
modelica_metatype _cmt = NULL;
modelica_string _str = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
_model_ = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta6 = listGet(omc_InteractiveUtil_getConnections(threadData, _cdef), _n);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,3) == 0) goto goto_2;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
_eq = tmpMeta7;
_cmt = tmpMeta8;
_str = omc_InteractiveUtil_getStringComment(threadData, _cmt);
_s1 = omc_InteractiveUtil_getConnectionStr(threadData, _eq ,&_s2);
tmpMeta10 = mmc_mk_box2(5, &Values_Value_STRING__desc, _s1);
tmpMeta11 = mmc_mk_box2(5, &Values_Value_STRING__desc, _s2);
tmpMeta12 = mmc_mk_box2(5, &Values_Value_STRING__desc, _str);
tmpMeta9 = mmc_mk_cons(tmpMeta10, mmc_mk_cons(tmpMeta11, mmc_mk_cons(tmpMeta12, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta13;
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outValue = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outValue;
}
modelica_metatype boxptr_InteractiveUtil_getNthConnection(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_metatype _outValue = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outValue = omc_InteractiveUtil_getNthConnection(threadData, _inComponentRef, _inProgram, tmp1);
return _outValue;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsCondition(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynComponentItemLst;
{
modelica_metatype _cond = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (!listEmpty(tmpMeta7)) goto tmp3_end;
_cond = tmpMeta8;
tmp1 = omc_Dump_unparseComponentCondition(threadData, _cond);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCondition(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,3) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_lst = tmpMeta7;
tmp1 = omc_InteractiveUtil_getComponentitemsCondition(threadData, _lst);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getElementAnnotations(threadData_t *threadData, modelica_metatype _inClassPath, modelica_metatype _inProgram, modelica_integer _inAccess)
{
modelica_string _outString = NULL;
modelica_metatype _model_path = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _els1 = NULL;
modelica_metatype _els2 = NULL;
modelica_metatype _els = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
_model_path = omc_AbsynUtil_crefToPath(threadData, _inClassPath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _model_path, _inProgram, 0);
_els1 = omc_InteractiveUtil_getPublicElementsInClass(threadData, _cdef);
if((_inAccess >= ((modelica_integer) 4)))
{
_els2 = omc_InteractiveUtil_getProtectedElementsInClass(threadData, _cdef);
}
else
{
tmpMeta5 = MMC_REFSTRUCTLIT(mmc_nil);
_els2 = tmpMeta5;
}
_els = listAppend(_els1, _els2);
_outString = omc_InteractiveUtil_getElementAnnotationsFromElts(threadData, _els, _cdef, _inProgram, _model_path);
tmpMeta6 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_outString, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
_outString = stringAppendList(tmpMeta6);
goto tmp2_done;
}
case 1: {
_outString = _OMC_LIT32;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getElementAnnotations(threadData_t *threadData, modelica_metatype _inClassPath, modelica_metatype _inProgram, modelica_metatype _inAccess)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inAccess);
_outString = omc_InteractiveUtil_getElementAnnotations(threadData, _inClassPath, _inProgram, tmp1);
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_createEnvironment(threadData_t *threadData, modelica_metatype _p, modelica_metatype _os, modelica_metatype _modelPath)
{
modelica_metatype _genv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _s = NULL;
modelica_metatype _c = NULL;
modelica_string _id = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _cache = NULL;
modelica_boolean _b;
modelica_boolean _permissive;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta14;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(omc_Flags_isSet(threadData, _OMC_LIT113))
{
tmpMeta1 = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, _p, _modelPath, omc_FCore_emptyCache(threadData), _OMC_LIT196);
_genv = tmpMeta1;
}
else
{
_s = omc_Util_getOptionOrDefault(threadData, _os, omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p));
_cache = omc_Inst_makeEnvFromProgram(threadData, _s ,&_env);
tmpMeta7 = omc_Lookup_lookupClass(threadData, _cache, _env, _modelPath, mmc_mk_none(), &tmpMeta2, &tmpMeta6);
_cache = tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta2,2,8) == 0) MMC_THROW_INTERNAL();
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 6));
_c = tmpMeta2;
_id = tmpMeta3;
_encflag = tmpMeta4;
_restr = tmpMeta5;
_env_1 = tmpMeta6;
_env2 = omc_FGraph_openScope(threadData, _env_1, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
_permissive = omc_Flags_getConfigBool(threadData, _OMC_LIT230);
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT230, 1);
{
{
volatile mmc_switch_type tmp10;
int tmp11;
tmp10 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp9_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp10 < 2; tmp10++) {
switch (MMC_SWITCH_CAST(tmp10)) {
case 0: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, _cache, _env2, tmpMeta12, _OMC_LIT29, _OMC_LIT11, _ci_state, _c, _OMC_LIT33, tmpMeta13, ((modelica_integer) 0) ,&_env2 ,NULL ,NULL ,NULL);
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT230, _permissive);
goto tmp9_done;
}
case 1: {
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT230, _permissive);
goto goto_8;
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
tmp9_done:
(void)tmp10;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp9_done2;
goto_8:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp10 < 2) {
goto tmp9_top;
}
MMC_THROW_INTERNAL();
tmp9_done2:;
}
}
;
tmpMeta14 = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, omc_SymbolTable_getAbsyn(threadData), _modelPath, _cache, _env2);
_genv = tmpMeta14;
}
_return: OMC_LABEL_UNUSED
return _genv;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElements2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_boolean _inBoolean, modelica_integer _inAccess)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inComponentRef;
tmp4_2 = _inBoolean;
tmp4_3 = _inAccess;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_string _str = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _comps2 = NULL;
modelica_metatype _model_ = NULL;
modelica_boolean _b;
modelica_metatype _genv = NULL;
modelica_integer _access;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_model_ = tmp4_1;
_b = tmp4_2;
_access = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_genv = omc_InteractiveUtil_createEnvironment(threadData, omc_SymbolTable_getAbsyn(threadData), mmc_mk_some(omc_SymbolTable_getSCode(threadData)), _modelpath);
_comps1 = omc_InteractiveUtil_getPublicElementsInClass(threadData, _cdef);
_s1 = omc_InteractiveUtil_getElementsInfo(threadData, _comps1, _b, _OMC_LIT231, _genv);
if((_access >= ((modelica_integer) 4)))
{
_comps2 = omc_InteractiveUtil_getProtectedElementsInClass(threadData, _cdef);
_s2 = omc_InteractiveUtil_getElementsInfo(threadData, _comps2, _b, _OMC_LIT232, _genv);
}
else
{
_s2 = _OMC_LIT16;
}
tmpMeta6 = mmc_mk_cons(_s1, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil)));
_str = omc_Util_stringDelimitListNonEmptyElts(threadData, tmpMeta6, _OMC_LIT43);
tmpMeta7 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta7);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElements2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inBoolean, modelica_metatype _inAccess)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
tmp2 = mmc_unbox_integer(_inAccess);
_outString = omc_InteractiveUtil_getElements2(threadData, _inComponentRef, tmp1, tmp2);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getElements(threadData_t *threadData, modelica_metatype _cr, modelica_boolean _inBoolean, modelica_integer _inAccess)
{
modelica_string _outString = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outString = omc_InteractiveUtil_getElements2(threadData, _cr, _inBoolean, _inAccess);
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getElements(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _inBoolean, modelica_metatype _inAccess)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
tmp2 = mmc_unbox_integer(_inAccess);
_outString = omc_InteractiveUtil_getElements(threadData, _cr, tmp1, tmp2);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertQuotesToList(threadData_t *threadData, modelica_metatype _inStringList)
{
modelica_metatype _outStringList = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inStringList;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_string _str_1 = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
_str = tmpMeta7;
_rest = tmpMeta8;
tmpMeta9 = mmc_mk_cons(_OMC_LIT45, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT45, MMC_REFSTRUCTLIT(mmc_nil))));
_str_1 = stringAppendList(tmpMeta9);
_res = omc_InteractiveUtil_insertQuotesToList(threadData, _rest);
tmpMeta10 = mmc_mk_cons(_str_1, _res);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outStringList = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringList;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_useQuotes(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynNamedArgLst;
{
modelica_metatype _al = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_integer tmp11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (9 != MMC_STRLEN(tmpMeta8) || strcmp(MMC_STRINGDATA(_OMC_LIT233), MMC_STRINGDATA(tmpMeta8)) != 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,4,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmp11 = mmc_unbox_integer(tmpMeta10);
_b = tmp11;
tmp1 = _b;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_al = tmpMeta13;
_inAbsynNamedArgLst = _al;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_useQuotes(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_useQuotes(threadData, _inAbsynNamedArgLst);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClass2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_integer _inInteger3, modelica_metatype _inEnv4)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inClass1;
tmp4_2 = _inClass2;
tmp4_3 = _inInteger3;
tmp4_4 = _inEnv4;
{
modelica_metatype _lst = NULL;
modelica_integer _n;
modelica_metatype _cref = NULL;
modelica_metatype _path = NULL;
modelica_string _id = NULL;
modelica_metatype _c = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _env_2 = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
_cdef = tmp4_2;
_n = tmp4_3;
_env = tmp4_4;
_lst = omc_InteractiveUtil_getBaseClasses(threadData, _cdef, _env);
_cref = listGet(_lst, _n);
_path = omc_AbsynUtil_crefToPath(threadData, _cref);
tmp1 = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_c = tmp4_1;
_id = tmpMeta6;
_encflag = tmpMeta7;
_restr = tmpMeta8;
_cdef = tmp4_2;
_n = tmp4_3;
_env = tmp4_4;
_env2 = omc_FGraph_openScope(threadData, _env, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, omc_FCore_emptyCache(threadData), _env2, tmpMeta9, _OMC_LIT29, _OMC_LIT11, _ci_state, _c, _OMC_LIT33, tmpMeta10, ((modelica_integer) 0) ,&_env_2 ,NULL ,NULL ,NULL);
_lst = omc_InteractiveUtil_getBaseClasses(threadData, _cdef, _env_2);
_cref = listGet(_lst, _n);
_path = omc_AbsynUtil_crefToPath(threadData, _cref);
tmp1 = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClass2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _inInteger3, modelica_metatype _inEnv4)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger3);
_outString = omc_InteractiveUtil_getNthInheritedClass2(threadData, _inClass1, _inClass2, tmp1, _inEnv4);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementItemLst;
{
modelica_metatype _res = NULL;
modelica_metatype _e = NULL;
modelica_metatype _es = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,6) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,3) == 0) goto tmp3_end;
_e = tmpMeta10;
_es = tmpMeta8;
_res = omc_InteractiveUtil_getExtendsInElementitems(threadData, _es);
tmpMeta11 = mmc_mk_cons(_e, _res);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_es = tmpMeta13;
tmpMeta1 = omc_InteractiveUtil_getExtendsInElementitems(threadData, _es);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementSpecLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elts = tmpMeta9;
_parts = tmpMeta8;
tmp4 += 1;
_l1 = omc_InteractiveUtil_getExtendsInParts(threadData, _parts);
_l2 = omc_InteractiveUtil_getExtendsInElementitems(threadData, _elts);
tmpMeta1 = listAppend(_l1, _l2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,1) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_elts = tmpMeta12;
_parts = tmpMeta11;
_l1 = omc_InteractiveUtil_getExtendsInParts(threadData, _parts);
_l2 = omc_InteractiveUtil_getExtendsInElementitems(threadData, _elts);
tmpMeta1 = listAppend(_l1, _l2);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
_parts = tmpMeta14;
tmpMeta1 = omc_InteractiveUtil_getExtendsInParts(threadData, _parts);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementSpecLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
tmpMeta1 = omc_InteractiveUtil_getExtendsInParts(threadData, _parts);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_parts = tmpMeta9;
tmpMeta1 = omc_InteractiveUtil_getExtendsInParts(threadData, _parts);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynElementSpecLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClassMapAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_integer _inInteger, modelica_metatype _inProgram, modelica_string _inMapType)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_integer tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inModelPath;
tmp4_2 = _inInteger;
tmp4_3 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_string _s = NULL;
modelica_string _annStr = NULL;
modelica_integer _n;
modelica_metatype _p = NULL;
modelica_metatype _elArgs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_string tmp9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
_modelpath = tmp4_1;
_n = tmp4_2;
_p = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp9 = omc_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData, _modelpath, _n, _cdef, _p, &tmpMeta6);
_s = tmp9;
if (optionNone(tmpMeta6)) goto goto_2;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 1));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elArgs = tmpMeta8;
_annStr = omc_InteractiveUtil_getMapAnnotationStr(threadData, _elArgs, _inMapType, _cdef, _p, _modelpath);
tmpMeta10 = stringAppend(_OMC_LIT9,_s);
tmpMeta11 = stringAppend(tmpMeta10,_OMC_LIT8);
tmpMeta12 = stringAppend(tmpMeta11,_annStr);
tmpMeta13 = stringAppend(tmpMeta12,_OMC_LIT10);
tmp1 = tmpMeta13;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta14;
modelica_string tmp15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
_modelpath = tmp4_1;
_n = tmp4_2;
_p = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp15 = omc_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData, _modelpath, _n, _cdef, _p, &tmpMeta14);
_s = tmp15;
if (!optionNone(tmpMeta14)) goto goto_2;
tmpMeta16 = stringAppend(_OMC_LIT9,_s);
tmpMeta17 = stringAppend(tmpMeta16,_OMC_LIT234);
tmp1 = tmpMeta17;
goto tmp3_done;
}
case 2: {
tmp1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClassMapAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inInteger, modelica_metatype _inProgram, modelica_metatype _inMapType)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthInheritedClassMapAnnotation(threadData, _inModelPath, tmp1, _inProgram, _inMapType);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getMapAnnotationStr(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_string _inMapType, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementArgLst;
{
modelica_metatype _ann = NULL;
modelica_metatype _xs = NULL;
modelica_string _mapType = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = _OMC_LIT30;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_boolean tmp10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_ann = tmpMeta6;
_mapType = tmpMeta9;
tmp10 = (stringEqual(_mapType, _inMapType));
if (1 != tmp10) goto goto_2;
tmpMeta11 = mmc_mk_cons(_ann, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta12 = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, tmpMeta11);
tmp1 = omc_InteractiveUtil_getAnnotationString(threadData, tmpMeta12, _inClass, _inFullProgram, _inModelPath);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
_xs = tmpMeta14;
tmp1 = omc_InteractiveUtil_getMapAnnotationStr(threadData, _xs, _inMapType, _inClass, _inFullProgram, _inModelPath);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData_t *threadData, modelica_metatype _inModelPath, modelica_integer _inInteger, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype *out_annotationOpt)
{
modelica_string _outString = NULL;
modelica_metatype _annotationOpt = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_integer tmp4_1;
tmp4_1 = _inInteger;
{
modelica_metatype _path = NULL;
modelica_metatype _cdef = NULL;
modelica_string _s = NULL;
modelica_integer _n;
modelica_metatype _extends_ = NULL;
modelica_metatype _annOpt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_n = tmp4_1;
_cdef = _inClass;
_extends_ = omc_InteractiveUtil_getExtendsInClass(threadData, _cdef);
tmpMeta6 = listGet(_extends_, _n);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,3) == 0) goto goto_2;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_path = tmpMeta7;
_annOpt = tmpMeta8;
_s = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmp1_c0 = _s;
tmpMeta[0+1] = _annOpt;
goto tmp3_done;
}
case 1: {
tmp1_c0 = _OMC_LIT32;
tmpMeta[0+1] = mmc_mk_none();
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_annotationOpt = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_annotationOpt) { *out_annotationOpt = _annotationOpt; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inInteger, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype *out_annotationOpt)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData, _inModelPath, tmp1, _inClass, _inProgram, out_annotationOpt);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_integer tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _c = NULL;
modelica_metatype _model_ = NULL;
modelica_integer _n;
modelica_metatype _extends_ = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_model_ = tmp4_1;
_n = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_p_1 = omc_SymbolTable_getSCode(threadData);
_cache = omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
omc_Lookup_lookupClass(threadData, _cache, _env, _modelpath, mmc_mk_none(), &tmpMeta6, &tmpMeta7);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,8) == 0) goto goto_2;
_c = tmpMeta6;
_env_1 = tmpMeta7;
tmp1 = omc_InteractiveUtil_getNthInheritedClass2(threadData, _c, _cdef, _n, _env_1);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
_model_ = tmp4_1;
_n = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_extends_ = omc_InteractiveUtil_getExtendsInClass(threadData, _cdef);
tmpMeta8 = listGet(_extends_, _n);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,3) == 0) goto goto_2;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_path = tmpMeta9;
tmp1 = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
goto tmp3_done;
}
case 2: {
tmp1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthInheritedClass(threadData, _inComponentRef, tmp1);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_getInheritanceCount(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_p = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp1 = omc_InteractiveUtil_countBaseClasses(threadData, _cdef);
goto tmp3_done;
}
case 1: {
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getInheritanceCount(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_getInheritanceCount(threadData, _inComponentRef, _inProgram);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getInheritedClasses(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outPaths = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _c = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _extendsLst = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_boolean tmp8;
modelica_metatype tmpMeta10;
_modelpath = tmp4_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_p_1 = omc_SymbolTable_getSCode(threadData);
_cache = omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
omc_Lookup_lookupClass(threadData, _cache, _env, _modelpath, mmc_mk_none(), &tmpMeta6, &tmpMeta7);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,8) == 0) goto goto_2;
_c = tmpMeta6;
_env_1 = tmpMeta7;
_lst = omc_InteractiveUtil_getInheritedClassesHelper(threadData, _c, _cdef, _env_1);
tmp8 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmpMeta10 = _lst;
if (!listEmpty(tmpMeta10)) goto goto_9;
tmp8 = 1;
goto goto_9;
goto_9:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp8) {goto goto_2;}
tmpMeta1 = omc_List_map(threadData, _lst, boxvar_AbsynUtil_crefToPath);
goto tmp3_done;
}
case 1: {
_modelpath = tmp4_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_extendsLst = omc_InteractiveUtil_getExtendsInClass(threadData, _cdef);
tmpMeta1 = omc_List_map(threadData, _extendsLst, boxvar_AbsynUtil_elementSpecToPath);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta11;
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outPaths = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outPaths;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInheritedClassesHelper(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _inEnv4)
{
modelica_metatype _outAbsynComponentRefLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inClass1;
tmp4_2 = _inClass2;
tmp4_3 = _inEnv4;
{
modelica_metatype _lst = NULL;
modelica_string _id = NULL;
modelica_metatype _c = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _env_2 = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
_cdef = tmp4_2;
_env = tmp4_3;
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT235);
_lst = omc_InteractiveUtil_getBaseClasses(threadData, _cdef, _env);
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmpMeta8 = _lst;
if (!listEmpty(tmpMeta8)) goto goto_7;
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_2;}
omc_ErrorExt_rollBack(threadData, _OMC_LIT235);
tmpMeta1 = _lst;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
omc_ErrorExt_rollBack(threadData, _OMC_LIT235);
goto goto_2;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_c = tmp4_1;
_id = tmpMeta9;
_encflag = tmpMeta10;
_restr = tmpMeta11;
_cdef = tmp4_2;
_env = tmp4_3;
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT235);
_env2 = omc_FGraph_openScope(threadData, _env, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
tmpMeta12 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, omc_FCore_emptyCache(threadData), _env2, tmpMeta12, _OMC_LIT29, _OMC_LIT11, _ci_state, _c, _OMC_LIT33, tmpMeta13, ((modelica_integer) 0) ,&_env_2 ,NULL ,NULL ,NULL);
_lst = omc_InteractiveUtil_getBaseClasses(threadData, _cdef, _env_2);
omc_ErrorExt_rollBack(threadData, _OMC_LIT235);
tmpMeta1 = _lst;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
omc_ErrorExt_rollBack(threadData, _OMC_LIT235);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynComponentRefLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynComponentRefLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addClassAnnotationToClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inAnnotation)
{
modelica_metatype _outClass = NULL;
modelica_metatype _body = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inClass;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 7));
_body = tmpMeta2;
{
modelica_metatype tmp6_1;
tmp6_1 = _body;
{
int tmp6;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp6_1))) {
case 3: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta8 = mmc_mk_cons(omc_List_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 5))), boxvar_AbsynUtil_mergeAnnotations, _inAnnotation), MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = MMC_TAGPTR(mmc_alloc_words(7));
memcpy(MMC_UNTAGPTR(tmpMeta7), MMC_UNTAGPTR(_body), 7*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta7))[5] = tmpMeta8;
_body = tmpMeta7;
tmpMeta3 = _body;
goto tmp5_done;
}
case 4: {
modelica_metatype tmpMeta9;
tmpMeta9 = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta9), MMC_UNTAGPTR(_body), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta9))[5] = omc_AbsynUtil_mergeCommentAnnotation(threadData, _inAnnotation, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 5))));
_body = tmpMeta9;
tmpMeta3 = _body;
goto tmp5_done;
}
case 5: {
modelica_metatype tmpMeta10;
tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_body), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[3] = omc_AbsynUtil_mergeCommentAnnotation(threadData, _inAnnotation, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 3))));
_body = tmpMeta10;
tmpMeta3 = _body;
goto tmp5_done;
}
case 6: {
modelica_metatype tmpMeta11;
tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_body), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[3] = omc_AbsynUtil_mergeCommentAnnotation(threadData, _inAnnotation, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 3))));
_body = tmpMeta11;
tmpMeta3 = _body;
goto tmp5_done;
}
case 7: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
tmpMeta13 = mmc_mk_cons(omc_List_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 6))), boxvar_AbsynUtil_mergeAnnotations, _inAnnotation), MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta12 = MMC_TAGPTR(mmc_alloc_words(7));
memcpy(MMC_UNTAGPTR(tmpMeta12), MMC_UNTAGPTR(_body), 7*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta12))[6] = tmpMeta13;
_body = tmpMeta12;
tmpMeta3 = _body;
goto tmp5_done;
}
case 8: {
modelica_metatype tmpMeta14;
tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_body), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[4] = omc_AbsynUtil_mergeCommentAnnotation(threadData, _inAnnotation, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))));
_body = tmpMeta14;
tmpMeta3 = _body;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
goto_4:;
MMC_THROW_INTERNAL();
goto tmp5_done;
tmp5_done:;
}
}
_body = tmpMeta3;
_outClass = omc_AbsynUtil_setClassBody(threadData, _inClass, _body);
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addClassAnnotation(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inAnnotation, modelica_metatype _inProgram)
{
modelica_metatype _outProgram = NULL;
modelica_metatype _class_path = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _class_within = NULL;
modelica_metatype tmpMeta1;
modelica_boolean tmp2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_class_path = omc_AbsynUtil_crefToPath(threadData, _inClass);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _class_path, _inProgram, 0);
_cls = omc_InteractiveUtil_addClassAnnotationToClass(threadData, _cls, omc_InteractiveUtil_annotationListToAbsyn(threadData, _inAnnotation));
tmp2 = (modelica_boolean)omc_AbsynUtil_pathIsIdent(threadData, _class_path);
if(tmp2)
{
tmpMeta3 = _OMC_LIT7;
}
else
{
tmpMeta1 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, omc_AbsynUtil_stripLast(threadData, _class_path));
tmpMeta3 = tmpMeta1;
}
_class_within = tmpMeta3;
tmpMeta4 = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta5 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta4, _class_within);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta5, _inProgram, 0);
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateComponent(threadData_t *threadData, modelica_string _inString1, modelica_metatype _inTypeCref, modelica_metatype _inComponentRef3, modelica_metatype _inAbsynNamedArgLst4, modelica_metatype _inProgram5, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inString1;
tmp4_2 = _inComponentRef3;
tmp4_3 = _inAbsynNamedArgLst4;
tmp4_4 = _inProgram5;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _tppath2 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _publst = NULL;
modelica_metatype _protlst = NULL;
modelica_string _name = NULL;
modelica_metatype _items = NULL;
modelica_metatype _arrayDimensions = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _modification = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _ann = NULL;
modelica_metatype _annotation_ = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _nargs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
_name = tmp4_1;
_model_ = tmp4_2;
_nargs = tmp4_3;
_p = tmp4_4;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_tppath2 = omc_AbsynUtil_crefToPath(threadData, _inTypeCref);
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,5) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_parts = tmpMeta8;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta10 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _name, tmpMeta9);
tmpMeta11 = omc_InteractiveUtil_getElementContainsName(threadData, tmpMeta10, listAppend(_publst, _protlst));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,6) == 0) goto goto_2;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,3,3) == 0) goto goto_2;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,2) == 0) goto goto_2;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 4));
_items = tmpMeta14;
tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta16 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _name, tmpMeta15);
tmpMeta17 = omc_InteractiveUtil_getCompitemNamed(threadData, tmpMeta16, _items);
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 3));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 4));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 3));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 4));
_arrayDimensions = tmpMeta19;
_mod = tmpMeta20;
_cond = tmpMeta21;
_ann = tmpMeta22;
_annotation_ = omc_InteractiveUtil_annotationListToAbsynComment(threadData, _nargs, _ann);
_modification = omc_InteractiveUtil_modificationToAbsyn(threadData, _nargs, _mod);
tmpMeta23 = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _name, _arrayDimensions, _modification);
tmpMeta24 = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta23, _cond, _annotation_);
tmpMeta25 = mmc_mk_box2(0, _tppath2, tmpMeta24);
_newp = omc_InteractiveUtil_deleteOrUpdateComponent(threadData, _name, _model_, _p, mmc_mk_some(tmpMeta25));
tmpMeta[0+0] = _newp;
tmp1_c1 = _OMC_LIT102;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inProgram5;
tmp1_c1 = _OMC_LIT103;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentPrefixesModStr(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _docStr = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_e = tmpMeta8;
tmp1 = omc_Dump_printExpStr(threadData, _e);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_docStr = tmp1;
_return: OMC_LABEL_UNUSED
return _docStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultAttr(threadData_t *threadData, modelica_string _str)
{
modelica_metatype _attr = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_integer tmp8;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp8 = omc_System_stringFind(threadData, _str, _OMC_LIT236);
if (-1 != tmp8) goto goto_7;
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_2;}
tmpMeta1 = _OMC_LIT241;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp9;
modelica_integer tmp11;
tmp9 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp11 = omc_System_stringFind(threadData, _str, _OMC_LIT242);
if (-1 != tmp11) goto goto_10;
tmp9 = 1;
goto goto_10;
goto_10:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp9) {goto goto_2;}
tmpMeta1 = _OMC_LIT244;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp12;
modelica_integer tmp14;
tmp12 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp14 = omc_System_stringFind(threadData, _str, _OMC_LIT245);
if (-1 != tmp14) goto goto_13;
tmp12 = 1;
goto goto_13;
goto_13:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp12) {goto goto_2;}
tmpMeta1 = _OMC_LIT247;
goto tmp3_done;
}
case 3: {
tmpMeta1 = _OMC_LIT249;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_attr = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _attr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultReplaceable(threadData_t *threadData, modelica_string _str)
{
modelica_metatype _repl = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
tmp6 = omc_System_stringFind(threadData, _str, _OMC_LIT250);
if (-1 != tmp6) goto goto_2;
tmpMeta1 = mmc_mk_none();
goto tmp3_done;
}
case 1: {
modelica_boolean tmp7;
modelica_integer tmp9;
tmp7 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp9 = omc_System_stringFind(threadData, _str, _OMC_LIT250);
if (-1 != tmp9) goto goto_8;
tmp7 = 1;
goto goto_8;
goto_8:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp7) {goto goto_2;}
tmpMeta1 = _OMC_LIT252;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_repl = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _repl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultInnerOuter(threadData_t *threadData, modelica_string _str)
{
modelica_metatype _io = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
tmp6 = omc_System_stringFind(threadData, _str, _OMC_LIT253);
if (-1 != tmp6) goto goto_2;
tmp7 = omc_System_stringFind(threadData, _str, _OMC_LIT254);
if (-1 != tmp7) goto goto_2;
tmpMeta1 = _OMC_LIT77;
goto tmp3_done;
}
case 1: {
modelica_integer tmp8;
tmp8 = omc_System_stringFind(threadData, _str, _OMC_LIT254);
if (-1 != tmp8) goto goto_2;
tmpMeta1 = _OMC_LIT255;
goto tmp3_done;
}
case 2: {
modelica_integer tmp9;
tmp9 = omc_System_stringFind(threadData, _str, _OMC_LIT253);
if (-1 != tmp9) goto goto_2;
tmpMeta1 = _OMC_LIT256;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_io = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _io;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeReplaceableIfPartial(threadData_t *threadData, modelica_metatype _p, modelica_metatype _className, modelica_metatype _redecl)
{
modelica_metatype _new_redecl = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _redecl;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!optionNone(tmp4_1)) goto tmp3_end;
if (!omc_InteractiveUtil_isPartial(threadData, _className, _p)) goto tmp3_end;
tmpMeta1 = _OMC_LIT252;
goto tmp3_done;
}
case 1: {
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta1 = _redecl;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta6;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,0) == 0) goto tmp3_end;
tmpMeta1 = _redecl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_new_redecl = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _new_redecl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultPrefixes(threadData_t *threadData, modelica_metatype _p, modelica_metatype _className, modelica_metatype *out_redecl, modelica_metatype *out_attr)
{
modelica_metatype _io = NULL;
modelica_metatype _redecl = NULL;
modelica_metatype _attr = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_str = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT202, _OMC_LIT203, boxvar_InteractiveUtil_getDefaultComponentPrefixesModStr);
_io = omc_InteractiveUtil_getDefaultInnerOuter(threadData, _str);
_redecl = omc_InteractiveUtil_getDefaultReplaceable(threadData, _str);
_redecl = omc_InteractiveUtil_makeReplaceableIfPartial(threadData, _p, _className, _redecl);
_attr = omc_InteractiveUtil_getDefaultAttr(threadData, _str);
tmpMeta[0+0] = _io;
tmpMeta[0+1] = _redecl;
tmpMeta[0+2] = _attr;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_io = tmpMeta[0+0];
_redecl = tmpMeta[0+1];
_attr = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_redecl) { *out_redecl = _redecl; }
if (out_attr) { *out_attr = _attr; }
return _io;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addComponent(threadData_t *threadData, modelica_string _inString1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inAbsynNamedArgLst4, modelica_metatype _inProgram5, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inString1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inAbsynNamedArgLst4;
tmp4_5 = _inProgram5;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _tppath = NULL;
modelica_string _name = NULL;
modelica_string _filename = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _nargs = NULL;
modelica_metatype _p = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _annotation_ = NULL;
modelica_metatype _modification = NULL;
modelica_metatype _w = NULL;
modelica_metatype _io = NULL;
modelica_metatype _redecl = NULL;
modelica_metatype _attr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_model_ = tmp4_3;
_p = tmp4_5;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_2;}
tmpMeta[0+0] = _p;
tmp1_c1 = _OMC_LIT257;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
_name = tmp4_1;
_tp = tmp4_2;
_model_ = tmp4_3;
_nargs = tmp4_4;
_p = tmp4_5;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
{
modelica_metatype tmp11_1;
tmp11_1 = _modelpath;
{
volatile mmc_switch_type tmp11;
int tmp12;
tmp11 = 0;
for (; tmp11 < 2; tmp11++) {
switch (MMC_SWITCH_CAST(tmp11)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp11_1,1,1) == 0) goto tmp10_end;
tmpMeta8 = _OMC_LIT7;
goto tmp10_done;
}
case 1: {
modelica_metatype tmpMeta13;
tmpMeta13 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, omc_AbsynUtil_stripLast(threadData, _modelpath));
tmpMeta8 = tmpMeta13;
goto tmp10_done;
}
}
goto tmp10_end;
tmp10_end: ;
}
goto goto_9;
goto_9:;
goto goto_2;
goto tmp10_done;
tmp10_done:;
}
}
_w = tmpMeta8;
tmpMeta14 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 8));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
_cdef = tmpMeta14;
_filename = tmpMeta16;
_tppath = omc_AbsynUtil_crefToPath(threadData, _tp);
_annotation_ = omc_InteractiveUtil_annotationListToAbsynComment(threadData, _nargs, mmc_mk_none());
_modification = omc_InteractiveUtil_modificationToAbsyn(threadData, _nargs, mmc_mk_none());
_io = omc_InteractiveUtil_getDefaultPrefixes(threadData, _p, _tppath ,&_redecl ,&_attr);
tmpMeta17 = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, omc_AbsynUtil_pathStripSamePrefix(threadData, _tppath, _modelpath), mmc_mk_none());
tmpMeta19 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta20 = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _name, tmpMeta19, _modification);
tmpMeta21 = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta20, mmc_mk_none(), _annotation_);
tmpMeta18 = mmc_mk_cons(tmpMeta21, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta22 = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr, tmpMeta17, tmpMeta18);
tmpMeta23 = mmc_mk_box8(3, &SourceInfo_SOURCEINFO__desc, _filename, mmc_mk_boolean(0), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), _OMC_LIT17);
tmpMeta24 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(0), _redecl, _io, tmpMeta22, tmpMeta23, mmc_mk_none());
tmpMeta25 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta24);
_newcdef = omc_InteractiveUtil_addToPublic(threadData, _cdef, tmpMeta25);
tmpMeta26 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta27 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta26, _w);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta27, _p, 0);
tmpMeta[0+0] = _newp;
tmp1_c1 = _OMC_LIT258;
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _inProgram5;
tmp1_c1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData_t *threadData, modelica_string _inString, modelica_metatype _inAbsynElementItemLst, modelica_metatype _item, modelica_boolean *out_success)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_boolean _success;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inString;
tmp4_2 = _inAbsynElementItemLst;
{
modelica_string _name = NULL;
modelica_string _name2 = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _res = NULL;
modelica_metatype _x = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _eltold = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _compitem = NULL;
modelica_metatype _spec = NULL;
modelica_metatype _tppath = NULL;
modelica_metatype _typeSpec = NULL;
modelica_boolean _hasOtherComponents;
modelica_boolean _successResult;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta6;
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_boolean tmp13;
modelica_boolean tmp22_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta82;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_2);
tmpMeta8 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,6) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,3,3) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,2) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
_x = tmpMeta7;
_elt = tmpMeta9;
_spec = tmpMeta10;
_typeSpec = tmpMeta11;
_comps = tmpMeta12;
_xs = tmpMeta8;
_name = tmp4_1;
{
modelica_boolean __omcQ_24tmpVar17;
modelica_boolean tmp14 = 0;
modelica_boolean __omcQ_24tmpVar16;
modelica_integer tmp21;
modelica_metatype _c_loopVar = 0;
modelica_metatype _c;
_c_loopVar = _comps;
__omcQ_24tmpVar17 = 0;
while(1) {
tmp21 = 1;
if (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
tmp21--;
}
if (tmp21 == 0) {
{
modelica_metatype tmp17_1;
tmp17_1 = _c;
{
volatile mmc_switch_type tmp17;
int tmp18;
tmp17 = 0;
for (; tmp17 < 2; tmp17++) {
switch (MMC_SWITCH_CAST(tmp17)) {
case 0: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp17_1), 2));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
_name2 = tmpMeta20;
if (!(stringEqual(_name, _name2))) goto tmp16_end;
tmp14 = 1;
goto tmp16_done;
}
case 1: {
tmp14 = 0;
goto tmp16_done;
}
}
goto tmp16_end;
tmp16_end: ;
}
goto goto_15;
goto_15:;
goto goto_2;
goto tmp16_done;
tmp16_done:;
}
}__omcQ_24tmpVar16 = tmp14;
__omcQ_24tmpVar17 = (__omcQ_24tmpVar16 || __omcQ_24tmpVar17);
} else if (tmp21 == 1) {
break;
} else {
goto goto_2;
}
}
tmp13 = __omcQ_24tmpVar17;
}
if(tmp13)
{
{
modelica_metatype tmp25_1;
tmp25_1 = _item;
{
volatile mmc_switch_type tmp25;
int tmp26;
tmp25 = 0;
for (; tmp25 < 2; tmp25++) {
switch (MMC_SWITCH_CAST(tmp25)) {
case 0: {
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
modelica_metatype tmpMeta61;
modelica_metatype tmpMeta62;
modelica_metatype tmpMeta63;
modelica_metatype tmpMeta64;
modelica_metatype tmpMeta65;
modelica_metatype tmpMeta66;
if (optionNone(tmp25_1)) goto tmp24_end;
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp25_1), 1));
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 1));
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 2));
_tppath = tmpMeta28;
_compitem = tmpMeta29;
if(omc_AbsynUtil_pathEqual(threadData, _tppath, omc_AbsynUtil_typeSpecPath(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_spec), 3))))))
{
{
modelica_metatype __omcQ_24tmpVar19;
modelica_metatype* tmp32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype __omcQ_24tmpVar18;
modelica_integer tmp41;
modelica_metatype _c_loopVar = 0;
modelica_metatype _c;
_c_loopVar = _comps;
tmpMeta33 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar19 = tmpMeta33;
tmp32 = &__omcQ_24tmpVar19;
while(1) {
tmp41 = 1;
if (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
tmp41--;
}
if (tmp41 == 0) {
{
modelica_metatype tmp37_1;
tmp37_1 = _c;
{
volatile mmc_switch_type tmp37;
int tmp38;
tmp37 = 0;
for (; tmp37 < 2; tmp37++) {
switch (MMC_SWITCH_CAST(tmp37)) {
case 0: {
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp37_1), 2));
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta39), 2));
_name2 = tmpMeta40;
if (!(stringEqual(_name, _name2))) goto tmp36_end;
tmpMeta34 = _compitem;
goto tmp36_done;
}
case 1: {
tmpMeta34 = _c;
goto tmp36_done;
}
}
goto tmp36_end;
tmp36_end: ;
}
goto goto_35;
goto_35:;
goto goto_23;
goto tmp36_done;
tmp36_done:;
}
}__omcQ_24tmpVar18 = tmpMeta34;
*tmp32 = mmc_mk_cons(__omcQ_24tmpVar18,0);
tmp32 = &MMC_CDR(*tmp32);
} else if (tmp41 == 1) {
break;
} else {
goto goto_23;
}
}
*tmp32 = mmc_mk_nil();
tmpMeta31 = __omcQ_24tmpVar19;
}
tmpMeta30 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta30), MMC_UNTAGPTR(_spec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta30))[4] = tmpMeta31;
_spec = tmpMeta30;
tmpMeta42 = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta42), MMC_UNTAGPTR(_elt), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta42))[5] = _spec;
_elt = tmpMeta42;
tmpMeta44 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt);
tmpMeta43 = mmc_mk_cons(tmpMeta44, _xs);
_res = tmpMeta43;
_successResult = 1;
}
else
{
{
modelica_metatype __omcQ_24tmpVar21;
modelica_metatype* tmp47;
modelica_metatype tmpMeta48;
modelica_metatype __omcQ_24tmpVar20;
modelica_integer tmp49;
modelica_metatype _c_loopVar = 0;
modelica_boolean tmp50 = 0;
modelica_metatype _c;
_c_loopVar = _comps;
tmpMeta48 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar21 = tmpMeta48;
tmp47 = &__omcQ_24tmpVar21;
while(1) {
tmp49 = 1;
while (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
{
modelica_metatype tmp53_1;
tmp53_1 = _c;
{
volatile mmc_switch_type tmp53;
int tmp54;
tmp53 = 0;
for (; tmp53 < 2; tmp53++) {
switch (MMC_SWITCH_CAST(tmp53)) {
case 0: {
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp53_1), 2));
tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta55), 2));
_name2 = tmpMeta56;
tmp50 = (!(stringEqual(_name, _name2)));
goto tmp52_done;
}
case 1: {
tmp50 = 1;
goto tmp52_done;
}
}
goto tmp52_end;
tmp52_end: ;
}
goto goto_51;
goto_51:;
goto goto_23;
goto tmp52_done;
tmp52_done:;
}
}
if (tmp50) {
tmp49--;
break;
}
}
if (tmp49 == 0) {
__omcQ_24tmpVar20 = _c;
*tmp47 = mmc_mk_cons(__omcQ_24tmpVar20,0);
tmp47 = &MMC_CDR(*tmp47);
} else if (tmp49 == 1) {
break;
} else {
goto goto_23;
}
}
*tmp47 = mmc_mk_nil();
tmpMeta46 = __omcQ_24tmpVar21;
}
tmpMeta45 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta45), MMC_UNTAGPTR(_spec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta45))[4] = tmpMeta46;
_spec = tmpMeta45;
_hasOtherComponents = (!listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_spec), 4)))));
if(_hasOtherComponents)
{
tmpMeta57 = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta57), MMC_UNTAGPTR(_elt), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta57))[5] = _spec;
_elt = tmpMeta57;
_eltold = _elt;
}
tmpMeta59 = mmc_mk_cons(_compitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta58 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta58), MMC_UNTAGPTR(_spec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta58))[4] = tmpMeta59;
_spec = tmpMeta58;
tmpMeta60 = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta60), MMC_UNTAGPTR(_typeSpec), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta60))[2] = _tppath;
_typeSpec = tmpMeta60;
tmpMeta61 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta61), MMC_UNTAGPTR(_spec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta61))[3] = _typeSpec;
_spec = tmpMeta61;
tmpMeta62 = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta62), MMC_UNTAGPTR(_elt), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta62))[5] = _spec;
_elt = tmpMeta62;
tmpMeta64 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt);
tmpMeta63 = mmc_mk_cons(tmpMeta64, _xs);
_res = tmpMeta63;
if(_hasOtherComponents)
{
tmpMeta66 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _eltold);
tmpMeta65 = mmc_mk_cons(tmpMeta66, _res);
_res = tmpMeta65;
}
_successResult = 1;
}
tmpMeta[2+0] = _res;
tmp22_c1 = _successResult;
goto tmp24_done;
}
case 1: {
modelica_metatype tmpMeta67;
modelica_metatype tmpMeta68;
modelica_metatype tmpMeta79;
modelica_metatype tmpMeta80;
modelica_metatype tmpMeta81;
if((listLength(_comps) == ((modelica_integer) 1)))
{
_res = _xs;
_successResult = 1;
}
else
{
{
modelica_metatype __omcQ_24tmpVar23;
modelica_metatype* tmp69;
modelica_metatype tmpMeta70;
modelica_metatype __omcQ_24tmpVar22;
modelica_integer tmp71;
modelica_metatype _c_loopVar = 0;
modelica_boolean tmp72 = 0;
modelica_metatype _c;
_c_loopVar = _comps;
tmpMeta70 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar23 = tmpMeta70;
tmp69 = &__omcQ_24tmpVar23;
while(1) {
tmp71 = 1;
while (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
{
modelica_metatype tmp75_1;
tmp75_1 = _c;
{
volatile mmc_switch_type tmp75;
int tmp76;
tmp75 = 0;
for (; tmp75 < 2; tmp75++) {
switch (MMC_SWITCH_CAST(tmp75)) {
case 0: {
modelica_metatype tmpMeta77;
modelica_metatype tmpMeta78;
tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp75_1), 2));
tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta77), 2));
_name2 = tmpMeta78;
tmp72 = (!(stringEqual(_name, _name2)));
goto tmp74_done;
}
case 1: {
tmp72 = 1;
goto tmp74_done;
}
}
goto tmp74_end;
tmp74_end: ;
}
goto goto_73;
goto_73:;
goto goto_23;
goto tmp74_done;
tmp74_done:;
}
}
if (tmp72) {
tmp71--;
break;
}
}
if (tmp71 == 0) {
__omcQ_24tmpVar22 = _c;
*tmp69 = mmc_mk_cons(__omcQ_24tmpVar22,0);
tmp69 = &MMC_CDR(*tmp69);
} else if (tmp71 == 1) {
break;
} else {
goto goto_23;
}
}
*tmp69 = mmc_mk_nil();
tmpMeta68 = __omcQ_24tmpVar23;
}
tmpMeta67 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta67), MMC_UNTAGPTR(_spec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta67))[4] = tmpMeta68;
_spec = tmpMeta67;
tmpMeta79 = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta79), MMC_UNTAGPTR(_elt), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta79))[5] = _spec;
_elt = tmpMeta79;
tmpMeta81 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt);
tmpMeta80 = mmc_mk_cons(tmpMeta81, _xs);
_res = tmpMeta80;
_successResult = 1;
}
tmpMeta[2+0] = _res;
tmp22_c1 = _successResult;
goto tmp24_done;
}
}
goto tmp24_end;
tmp24_end: ;
}
goto goto_23;
goto_23:;
goto goto_2;
goto tmp24_done;
tmp24_done:;
}
}
_res = tmpMeta[2+0];
_successResult = tmp22_c1;
}
else
{
_res = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _xs, _item ,&_successResult);
tmpMeta82 = mmc_mk_cons(_x, _res);
_res = tmpMeta82;
}
tmpMeta[0+0] = _res;
tmp1_c1 = _successResult;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta83;
modelica_metatype tmpMeta84;
modelica_metatype tmpMeta85;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta83 = MMC_CAR(tmp4_2);
tmpMeta84 = MMC_CDR(tmp4_2);
_x = tmpMeta83;
_xs = tmpMeta84;
_name = tmp4_1;
_res = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _xs, _item ,&_successResult);
tmpMeta85 = mmc_mk_cons(_x, _res);
tmpMeta[0+0] = tmpMeta85;
tmp1_c1 = _successResult;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynElementItemLst = tmpMeta[0+0];
_success = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_success) { *out_success = _success; }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData_t *threadData, modelica_metatype _inString, modelica_metatype _inAbsynElementItemLst, modelica_metatype _item, modelica_metatype *out_success)
{
modelica_boolean _success;
modelica_metatype _outAbsynElementItemLst = NULL;
_outAbsynElementItemLst = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _inString, _inAbsynElementItemLst, _item, &_success);
if (out_success) { *out_success = mmc_mk_icon(_success); }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponentFromClass(threadData_t *threadData, modelica_string _inString, modelica_metatype _inClass, modelica_metatype _item)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inString;
tmp4_2 = _inClass;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst2 = NULL;
modelica_metatype _protlst = NULL;
modelica_metatype _protlst2 = NULL;
modelica_integer _l2;
modelica_integer _l1;
modelica_integer _l1_1;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _name = NULL;
modelica_string _i = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_boolean _success;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_string _bcpath = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_i = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_name = tmp4_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _publst, _item ,&_success);
_l2 = listLength(_publst2);
_l1 = listLength(_publst);
_l1_1 = ((modelica_integer) -1) + _l1;
if(((((_l1_1 == _l2) && (!isSome(_item))) && _success) || (((!(_l1_1 == _l2)) && isSome(_item)) && _success)))
{
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
}
else
{
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_protlst2 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _protlst, _item, NULL);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _protlst2);
}
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta21, _file_info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_i = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_r = tmpMeta30;
_bcpath = tmpMeta32;
_mod = tmpMeta33;
_cmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_name = tmp4_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _publst, _item ,&_success);
_l2 = listLength(_publst2);
_l1 = listLength(_publst);
_l1_1 = ((modelica_integer) -1) + _l1;
if(((((_l1_1 == _l2) && (!isSome(_item))) && _success) || (((!(_l1_1 == _l2)) && isSome(_item)) && _success)))
{
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
}
else
{
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_protlst2 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _protlst, _item, NULL);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _protlst2);
}
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcpath, _mod, _cmt, _parts2, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta38, _file_info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponent(threadData_t *threadData, modelica_string _inString, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype _item)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inString;
tmp4_2 = _inComponentRef;
tmp4_3 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _modelwithin = NULL;
modelica_string _name = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
_model_ = tmp4_2;
_name = tmp4_1;
_p = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_modelwithin = omc_AbsynUtil_stripLast(threadData, _modelpath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteOrUpdateComponentFromClass(threadData, _name, _cdef, _item);
tmpMeta6 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _modelwithin);
tmpMeta8 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, tmpMeta7);
tmpMeta1 = omc_InteractiveUtil_updateProgram(threadData, tmpMeta8, _p, 0);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
_model_ = tmp4_2;
_name = tmp4_1;
_p = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteOrUpdateComponentFromClass(threadData, _name, _cdef, _item);
tmpMeta9 = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta10 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta9, _OMC_LIT7);
tmpMeta1 = omc_InteractiveUtil_updateProgram(threadData, tmpMeta10, _p, 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outProgram = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_lookupClassdef(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2, modelica_metatype _inProgram3, modelica_metatype *out_outPath)
{
modelica_metatype _outClass = NULL;
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inPath1;
tmp4_2 = _inPath2;
tmp4_3 = _inProgram3;
{
modelica_metatype _inmodeldef = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newpath = NULL;
modelica_metatype _path = NULL;
modelica_metatype _inmodel = NULL;
modelica_metatype _innewpath = NULL;
modelica_metatype _p = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 9; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_path = tmp4_1;
_inmodel = tmp4_2;
_p = tmp4_3;
_path = omc_InstUtil_removeSelfReference(threadData, omc_AbsynUtil_pathLastIdent(threadData, _inmodel), _path);
_inmodeldef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _inmodel, _p, 0);
tmpMeta6 = mmc_mk_cons(_inmodeldef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, _OMC_LIT7);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, tmpMeta7, 0);
_newpath = omc_AbsynUtil_joinPaths(threadData, _inmodel, _path);
tmpMeta[0+0] = _cdef;
tmpMeta[0+1] = _newpath;
goto tmp3_done;
}
case 1: {
_path = tmp4_1;
_inmodel = tmp4_2;
_p = tmp4_3;
_innewpath = omc_AbsynUtil_stripLast(threadData, _inmodel);
tmpMeta[0+0] = omc_InteractiveUtil_lookupClassdef(threadData, _path, _innewpath, _p, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
_path = tmp4_1;
_p = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[0+0] = _cdef;
tmpMeta[0+1] = _path;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (4 != MMC_STRLEN(tmpMeta8) || strcmp(MMC_STRINGDATA(_OMC_LIT114), MMC_STRINGDATA(tmpMeta8)) != 0) goto tmp3_end;
tmp4 += 4;
tmpMeta[0+0] = _OMC_LIT261;
tmpMeta[0+1] = _OMC_LIT262;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta9) || strcmp(MMC_STRINGDATA(_OMC_LIT115), MMC_STRINGDATA(tmpMeta9)) != 0) goto tmp3_end;
tmp4 += 3;
tmpMeta[0+0] = _OMC_LIT264;
tmpMeta[0+1] = _OMC_LIT265;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta10) || strcmp(MMC_STRINGDATA(_OMC_LIT117), MMC_STRINGDATA(tmpMeta10)) != 0) goto tmp3_end;
tmp4 += 2;
tmpMeta[0+0] = _OMC_LIT267;
tmpMeta[0+1] = _OMC_LIT268;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta11) || strcmp(MMC_STRINGDATA(_OMC_LIT116), MMC_STRINGDATA(tmpMeta11)) != 0) goto tmp3_end;
tmp4 += 1;
tmpMeta[0+0] = _OMC_LIT270;
tmpMeta[0+1] = _OMC_LIT271;
goto tmp3_done;
}
case 7: {
modelica_metatype tmpMeta12;
modelica_boolean tmp13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (5 != MMC_STRLEN(tmpMeta12) || strcmp(MMC_STRINGDATA(_OMC_LIT272), MMC_STRINGDATA(tmpMeta12)) != 0) goto tmp3_end;
tmp13 = omc_Config_synchronousFeaturesAllowed(threadData);
if (1 != tmp13) goto goto_2;
tmpMeta[0+0] = _OMC_LIT274;
tmpMeta[0+1] = _OMC_LIT275;
goto tmp3_done;
}
case 8: {
modelica_metatype tmpMeta14;
_path = tmp4_1;
_inmodel = tmp4_2;
_s1 = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
_s2 = omc_AbsynUtil_pathString(threadData, _inmodel, _OMC_LIT0, 1, 0);
tmpMeta14 = mmc_mk_cons(_s1, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addMessage(threadData, _OMC_LIT5, tmpMeta14);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 9) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta[0+0];
_outPath = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outPath) { *out_outPath = _outPath; }
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getVariableValueLst(threadData_t *threadData, modelica_metatype _ids, modelica_metatype _vars)
{
modelica_metatype _val = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _ids;
tmp4_2 = _vars;
{
modelica_integer _ix;
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
modelica_string _id3 = NULL;
modelica_metatype _v = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _srest = NULL;
modelica_metatype _vals = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_boolean tmp11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta8 = MMC_CAR(tmp4_2);
tmpMeta9 = MMC_CDR(tmp4_2);
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_id1 = tmpMeta6;
_id2 = tmpMeta10;
_rest = tmpMeta9;
tmp11 = (stringEqual(_id1, _id2));
if (0 != tmp11) goto goto_2;
tmpMeta1 = omc_InteractiveUtil_getVariableValueLst(threadData, _ids, _rest);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_boolean tmp22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta13)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmpMeta13);
tmpMeta15 = MMC_CDR(tmpMeta13);
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta16 = MMC_CAR(tmp4_2);
tmpMeta17 = MMC_CDR(tmp4_2);
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,10,4) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 3));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 4));
_id1 = tmpMeta12;
_id2 = tmpMeta14;
_srest = tmpMeta15;
_id3 = tmpMeta18;
_vals = tmpMeta20;
_comp = tmpMeta21;
tmp4 += 1;
tmp22 = (stringEqual(_id1, _id3));
if (1 != tmp22) goto goto_2;
_ix = omc_List_position1OnTrue(threadData, _comp, boxvar_stringEq, _id2);
_v = listGet(_vals, _ix);
tmpMeta23 = mmc_mk_cons(_id2, _srest);
tmpMeta25 = mmc_mk_box4(3, &GlobalScript_Variable_IVAR__desc, _id2, _v, _OMC_LIT276);
tmpMeta24 = mmc_mk_cons(tmpMeta25, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta1 = omc_InteractiveUtil_getVariableValueLst(threadData, tmpMeta23, tmpMeta24);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_boolean tmp32;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta26 = MMC_CAR(tmp4_2);
tmpMeta27 = MMC_CDR(tmp4_2);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 2));
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 3));
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta30 = MMC_CAR(tmp4_1);
tmpMeta31 = MMC_CDR(tmp4_1);
if (!listEmpty(tmpMeta31)) goto tmp3_end;
_id2 = tmpMeta28;
_v = tmpMeta29;
_id1 = tmpMeta30;
tmp32 = (stringEqual(_id1, _id2));
if (1 != tmp32) goto goto_2;
tmpMeta1 = _v;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_val = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _val;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getVariableValue(threadData_t *threadData, modelica_string _inIdent, modelica_metatype _inVariableLst)
{
modelica_metatype _outValue = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inIdent;
tmp4_2 = _inVariableLst;
{
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
modelica_metatype _v = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_boolean tmp10;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_2);
tmpMeta7 = MMC_CDR(tmp4_2);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
_id2 = tmpMeta8;
_v = tmpMeta9;
_id1 = tmp4_1;
tmp10 = (stringEqual(_id1, _id2));
if (1 != tmp10) goto goto_2;
tmpMeta1 = _v;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_boolean tmp14;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_2);
tmpMeta12 = MMC_CDR(tmp4_2);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
_id2 = tmpMeta13;
_rest = tmpMeta12;
_id1 = tmp4_1;
tmp14 = (stringEqual(_id1, _id2));
if (0 != tmp14) goto goto_2;
tmpMeta1 = omc_InteractiveUtil_getVariableValue(threadData, _id1, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outValue = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outValue;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addScope(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inVariableLst)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inProgram;
tmp4_2 = _inVariableLst;
{
modelica_metatype _path = NULL;
modelica_metatype _newpath = NULL;
modelica_metatype _path2 = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _vars = NULL;
modelica_metatype _w = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,0) == 0) goto tmp3_end;
_cls = tmpMeta6;
_vars = tmp4_2;
tmpMeta8 = omc_InteractiveUtil_getVariableValue(threadData, _OMC_LIT277, _vars);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,12,1) == 0) goto goto_2;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,1) == 0) goto goto_2;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_path = tmpMeta10;
tmpMeta11 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _path);
tmpMeta12 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _cls, tmpMeta11);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_boolean tmp15;
modelica_metatype tmpMeta17;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cls = tmpMeta13;
_w = tmpMeta14;
_vars = tmp4_2;
tmp15 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_InteractiveUtil_getVariableValue(threadData, _OMC_LIT277, _vars);
tmp15 = 1;
goto goto_16;
goto_16:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp15) {goto goto_2;}
tmpMeta17 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _cls, _w);
tmpMeta1 = tmpMeta17;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,0,1) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
_cls = tmpMeta18;
_path2 = tmpMeta20;
_vars = tmp4_2;
tmpMeta21 = omc_InteractiveUtil_getVariableValue(threadData, _OMC_LIT277, _vars);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,12,1) == 0) goto goto_2;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,0,1) == 0) goto goto_2;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
_path = tmpMeta23;
_newpath = omc_AbsynUtil_joinPaths(threadData, _path, _path2);
tmpMeta24 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _newpath);
tmpMeta25 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _cls, tmpMeta24);
tmpMeta1 = tmpMeta25;
goto tmp3_done;
}
case 3: {
tmpMeta1 = _inProgram;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateProgram2(threadData_t *threadData, modelica_metatype _inNewClasses, modelica_metatype _w, modelica_metatype _inOldProgram, modelica_boolean _mergeAST)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inNewClasses;
tmp4_2 = _w;
tmp4_3 = _inOldProgram;
{
modelica_metatype _prg = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _c1 = NULL;
modelica_string _name = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _c3 = NULL;
modelica_metatype _w2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
_prg = tmp4_3;
tmpMeta1 = _prg;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,0) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
_c1 = tmpMeta6;
_name = tmpMeta8;
_c2 = tmpMeta7;
_p2 = tmp4_3;
_c3 = tmpMeta9;
_w2 = tmpMeta10;
if(omc_InteractiveUtil_classInProgram(threadData, _name, _p2))
{
_newp = omc_InteractiveUtil_replaceClassInProgram(threadData, _c1, _p2, _mergeAST);
}
else
{
tmpMeta11 = mmc_mk_cons(_c1, _c3);
tmpMeta12 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta11, _w2);
_newp = tmpMeta12;
}
_inNewClasses = _c2;
_inOldProgram = _newp;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
_c1 = tmpMeta13;
_c2 = tmpMeta14;
_p2 = tmp4_3;
_newp = omc_InteractiveUtil_insertClassInProgram(threadData, _c1, _w, _p2, _mergeAST);
_inNewClasses = _c2;
_inOldProgram = _newp;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outProgram = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_updateProgram2(threadData_t *threadData, modelica_metatype _inNewClasses, modelica_metatype _w, modelica_metatype _inOldProgram, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outProgram = omc_InteractiveUtil_updateProgram2(threadData, _inNewClasses, _w, _inOldProgram, tmp1);
return _outProgram;
}
DLLExport
modelica_metatype omc_InteractiveUtil_updateProgram(threadData_t *threadData, modelica_metatype _inNewProgram, modelica_metatype _inOldProgram, modelica_boolean _mergeAST)
{
modelica_metatype _outProgram = NULL;
modelica_metatype _cs = NULL;
modelica_metatype _w = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inNewProgram;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
_cs = tmpMeta2;
_w = tmpMeta3;
_outProgram = omc_InteractiveUtil_updateProgram2(threadData, listReverse(_cs), _w, _inOldProgram, _mergeAST);
_return: OMC_LABEL_UNUSED
return _outProgram;
}
modelica_metatype boxptr_InteractiveUtil_updateProgram(threadData_t *threadData, modelica_metatype _inNewProgram, modelica_metatype _inOldProgram, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, _inNewProgram, _inOldProgram, tmp1);
return _outProgram;
}
DLLExport
modelica_metatype omc_InteractiveUtil_mergeProgram(threadData_t *threadData, modelica_metatype _newProgram, modelica_metatype _oldProgram)
{
modelica_metatype _program = NULL;
modelica_metatype _cl1 = NULL;
modelica_metatype _cl2 = NULL;
modelica_metatype _w = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _newProgram;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
_cl1 = tmpMeta2;
_w = tmpMeta3;
tmpMeta4 = _oldProgram;
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta4), 2));
_cl2 = tmpMeta5;
tmpMeta6 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, listAppend(_cl1, _cl2), _w);
_program = tmpMeta6;
_return: OMC_LABEL_UNUSED
return _program;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isPrimitiveClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inProgram;
{
modelica_metatype _inmodel = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cdef = NULL;
modelica_string _cname = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,13,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,14,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta8;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,15,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta9;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,16,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta10;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,18,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta11;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,7,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,0) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,1,4) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,0,2) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
_cname = tmpMeta12;
_path = tmpMeta16;
_p = tmp4_2;
tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta18 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _cname, tmpMeta17);
_inmodel = omc_AbsynUtil_crefToPath(threadData, tmpMeta18);
_cdef = omc_InteractiveUtil_lookupClassdef(threadData, _path, _inmodel, _p, NULL);
_inClass = _cdef;
_inProgram = _p;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isPrimitiveClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isPrimitiveClass(threadData, _inClass, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_existClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _path = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cr = tmp4_1;
_p = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _cr);
omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_existClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_existClass(threadData, _inComponentRef, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getCompitemNamed(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynComponentItemLst)
{
modelica_metatype _outComponentItem = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inAbsynComponentItemLst;
{
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
modelica_metatype _x = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_boolean tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_2);
tmpMeta8 = MMC_CDR(tmp4_2);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_id1 = tmpMeta6;
_x = tmpMeta7;
_id2 = tmpMeta10;
tmp11 = (stringEqual(_id1, _id2));
if (1 != tmp11) goto goto_2;
tmpMeta1 = _x;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_2);
tmpMeta13 = MMC_CDR(tmp4_2);
_xs = tmpMeta13;
_cr = tmp4_1;
tmpMeta1 = omc_InteractiveUtil_getCompitemNamed(threadData, _cr, _xs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponentItem = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponentItem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inAbsynElementItemLst;
{
modelica_metatype _cr = NULL;
modelica_metatype _res = NULL;
modelica_metatype _ellst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_2);
tmpMeta7 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,3,3) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
_res = tmpMeta8;
_ellst = tmpMeta10;
_cr = tmp4_1;
omc_InteractiveUtil_getCompitemNamed(threadData, _cr, _ellst);
tmpMeta1 = _res;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_2);
tmpMeta12 = MMC_CDR(tmp4_2);
_xs = tmpMeta12;
_cr = tmp4_1;
tmpMeta1 = omc_InteractiveUtil_getElementContainsName(threadData, _cr, _xs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElement = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inAbsynElementItemLst;
{
modelica_metatype _cr = NULL;
modelica_metatype _res = NULL;
modelica_metatype _ellst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_2);
tmpMeta7 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,3,3) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
_res = tmpMeta9;
_ellst = tmpMeta10;
_cr = tmp4_1;
omc_InteractiveUtil_getCompitemNamed(threadData, _cr, _ellst);
tmpMeta1 = _res;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_2);
tmpMeta12 = MMC_CDR(tmp4_2);
_xs = tmpMeta12;
_cr = tmp4_1;
tmpMeta1 = omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _xs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElementSpec = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outElementItem = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inAbsynElementItemLst;
{
modelica_metatype _cr = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_2);
tmpMeta7 = MMC_CDR(tmp4_2);
_elt = tmpMeta6;
_cr = tmp4_1;
tmpMeta8 = mmc_mk_cons(_elt, MMC_REFSTRUCTLIT(mmc_nil));
omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, tmpMeta8);
tmpMeta1 = _elt;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_2);
tmpMeta10 = MMC_CDR(tmp4_2);
_rest = tmpMeta10;
_cr = tmp4_1;
tmpMeta1 = omc_InteractiveUtil_getElementitemContainsName(threadData, _cr, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElementItem = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementItem;
}
DLLExport
modelica_string omc_InteractiveUtil_getDerivedClassModifierValue(threadData_t *threadData, modelica_metatype _cls, modelica_metatype _path)
{
modelica_string _value = NULL;
modelica_metatype _args = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta5 = _cls;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,4) == 0) goto goto_1;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_args = tmpMeta7;
_value = omc_InteractiveUtil_getModificationValueStr(threadData, _args, _path);
goto tmp2_done;
}
case 1: {
_value = _OMC_LIT16;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _value;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getDerivedClassModifierNames(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _args = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,7,0) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,4) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_args = tmpMeta8;
tmpMeta1 = omc_InteractiveUtil_getModificationNames(threadData, _args, 0);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getEnumLiterals(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _literals = NULL;
modelica_string _str = NULL;
modelica_metatype _enumList = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,7,0) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,2,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_literals = tmpMeta9;
_enumList = omc_List_map(threadData, _literals, boxvar_InteractiveUtil_getEnumerationLiterals);
_str = stringDelimitList(_enumList, _OMC_LIT43);
tmpMeta10 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta10);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT30;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isProtectedClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inString)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inString;
{
modelica_string _str = NULL;
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_boolean tmp12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,2) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_id = tmpMeta11;
_str = tmp4_2;
tmp12 = (stringEqual(_id, _str));
if (1 != tmp12) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
_rest = tmpMeta14;
_str = tmp4_2;
tmp1 = omc_InteractiveUtil_isProtectedClassInElements(threadData, _rest, _str);
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isProtectedClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inString)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isProtectedClassInElements(threadData, _inAbsynElementItemLst, _inString);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isProtectedClass(threadData_t *threadData, modelica_metatype _path, modelica_string _inString, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inString;
tmp4_2 = _inProgram;
{
modelica_string _str = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _protected_elementitem_list = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_str = tmp4_1;
_p = tmp4_2;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,5) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_parts = tmpMeta8;
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isProtectedClassInElements(threadData, _protected_elementitem_list, _str);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
_str = tmp4_1;
_p = tmp4_2;
tmpMeta9 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,4,5) == 0) goto goto_2;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 5));
_parts = tmpMeta11;
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isProtectedClassInElements(threadData, _protected_elementitem_list, _str);
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isProtectedClass(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inString, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isProtectedClass(threadData, _path, _inString, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isReplaceableInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inString)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inString;
{
modelica_string _str = NULL;
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _r = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_boolean tmp13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,2) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
_r = tmpMeta9;
_id = tmpMeta12;
_str = tmp4_2;
tmp13 = (stringEqual(_id, _str));
if (1 != tmp13) goto goto_2;
tmp1 = omc_InteractiveUtil_keywordReplaceable(threadData, _r);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmp4_1);
tmpMeta15 = MMC_CDR(tmp4_1);
_rest = tmpMeta15;
_str = tmp4_2;
tmp1 = omc_InteractiveUtil_isReplaceableInElements(threadData, _rest, _str);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isReplaceableInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inString)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isReplaceableInElements(threadData, _inAbsynElementItemLst, _inString);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isReplaceable(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_string _inString, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inString;
tmp4_3 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_string _str = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _public_elementitem_list = NULL;
modelica_metatype _protected_elementitem_list = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_model_ = tmp4_1;
_str = tmp4_2;
_p = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,5) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_parts = tmpMeta8;
_public_elementitem_list = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isReplaceableInElements(threadData, _public_elementitem_list, _str);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
_model_ = tmp4_1;
_str = tmp4_2;
_p = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta9 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,5) == 0) goto goto_2;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
_parts = tmpMeta11;
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isReplaceableInElements(threadData, _protected_elementitem_list, _str);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
_model_ = tmp4_1;
_str = tmp4_2;
_p = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta12 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,4,5) == 0) goto goto_2;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 5));
_parts = tmpMeta14;
_public_elementitem_list = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isReplaceableInElements(threadData, _public_elementitem_list, _str);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
_model_ = tmp4_1;
_str = tmp4_2;
_p = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta15 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,4,5) == 0) goto goto_2;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 5));
_parts = tmpMeta17;
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isReplaceableInElements(threadData, _protected_elementitem_list, _str);
goto tmp3_done;
}
case 4: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isReplaceable(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inString, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isReplaceable(threadData, _inComponentRef1, _inString, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isEnumeration(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,7,0) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,2,2) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isEnumeration(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isEnumeration(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isConstant(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
{
modelica_metatype _path = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _publst = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _classname = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,5) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_parts = tmpMeta8;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta9 = omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,3,3) == 0) goto goto_2;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,3,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta12 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,4,5) == 0) goto goto_2;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 5));
_parts = tmpMeta14;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta15 = omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,3,3) == 0) goto goto_2;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,3,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isConstant(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isConstant(threadData, _inComponentRef1, _inComponentRef2, _p);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isProtected(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
{
modelica_metatype _path = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _publst = NULL;
modelica_metatype _protlst = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _classname = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,5) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_parts = tmpMeta8;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
tmp1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta9 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,5) == 0) goto goto_2;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
_parts = tmpMeta11;
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _protlst);
tmp1 = 1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta12 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,4,5) == 0) goto goto_2;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 5));
_parts = tmpMeta14;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
tmp1 = 0;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta15 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,4,5) == 0) goto goto_2;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 5));
_parts = tmpMeta17;
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _protlst);
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isProtected(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isProtected(threadData, _inComponentRef1, _inComponentRef2, _p);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isParameter(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
{
modelica_metatype _path = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _publst = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _classname = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,5) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_parts = tmpMeta8;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta9 = omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,3,3) == 0) goto goto_2;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,2,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta12 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,4,5) == 0) goto goto_2;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 5));
_parts = tmpMeta14;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta15 = omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,3,3) == 0) goto goto_2;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,2,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isParameter(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isParameter(threadData, _inComponentRef1, _inComponentRef2, _p);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isPartial(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
if (1 != tmp8) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isPartial(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isPartial(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isClass(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isClass(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isClass(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isPackage(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,8,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isPackage(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isPackage(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isFunction(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,9,1) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,1) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isFunction(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isFunction(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isOptimization(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isOptimization(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isOptimization(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isBlock(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,4,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isBlock(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isBlock(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isRecord(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,3,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isRecord(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isRecord(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isOperatorFunction(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,9,1) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,1,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isOperatorFunction(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isOperatorFunction(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isOperatorRecord(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,11,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isOperatorRecord(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isOperatorRecord(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isOperator(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,10,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isOperator(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isOperator(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isModel(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,2,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isModel(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isModel(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isConnector(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,5,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,6,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isConnector(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isConnector(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isType(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,7,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isType(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isType(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_string omc_InteractiveUtil_getClassRestriction(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_string _outRestriction = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inProgram;
{
modelica_metatype _p = NULL;
modelica_metatype _restr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_p = tmp4_1;
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
_restr = tmpMeta7;
tmp1 = omc_Dump_unparseRestrictionStr(threadData, _restr);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outRestriction = tmp1;
_return: OMC_LABEL_UNUSED
return _outRestriction;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getClassDimensions(threadData_t *threadData, modelica_metatype _cdef)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _cdef;
{
modelica_metatype _ad = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,2) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (optionNone(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
_ad = tmpMeta8;
tmpMeta9 = stringAppend(_OMC_LIT9,stringDelimitList(omc_List_map(threadData, _ad, boxvar_Dump_printSubscriptStr), _OMC_LIT43));
tmpMeta10 = stringAppend(tmpMeta9,_OMC_LIT10);
tmp1 = tmpMeta10;
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT30;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getExternalFunctionSpecification(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _p)
{
modelica_string _res_1 = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _path = NULL;
modelica_string _strLanguage = NULL;
modelica_string _strFuncName = NULL;
modelica_string _strOutput = NULL;
modelica_string _strArguments = NULL;
modelica_string _strAnn1 = NULL;
modelica_string _strAnn2 = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _funcName = NULL;
modelica_metatype _lang = NULL;
modelica_metatype _output_ = NULL;
modelica_metatype _args = NULL;
modelica_metatype _ann1 = NULL;
modelica_metatype _ann2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
_path = omc_AbsynUtil_crefToPath(threadData, _cr);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta6 = omc_AbsynUtil_getExternalDecl(threadData, _cls);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,7,2) == 0) goto goto_2;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 6));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
_funcName = tmpMeta8;
_lang = tmpMeta9;
_output_ = tmpMeta10;
_args = tmpMeta11;
_ann1 = tmpMeta12;
_ann2 = tmpMeta13;
tmpMeta14 = stringAppend(_OMC_LIT45,omc_Util_getOptionOrDefault(threadData, _lang, _OMC_LIT16));
tmpMeta15 = stringAppend(tmpMeta14,_OMC_LIT45);
_strLanguage = tmpMeta15;
tmpMeta16 = stringAppend(_OMC_LIT45,omc_AbsynUtil_printComponentRefStr(threadData, omc_Util_getOptionOrDefault(threadData, _output_, _OMC_LIT278)));
tmpMeta17 = stringAppend(tmpMeta16,_OMC_LIT45);
_strOutput = tmpMeta17;
tmpMeta18 = stringAppend(_OMC_LIT45,omc_Util_getOptionOrDefault(threadData, _funcName, _OMC_LIT16));
tmpMeta19 = stringAppend(tmpMeta18,_OMC_LIT45);
_strFuncName = tmpMeta19;
tmpMeta20 = stringAppend(_OMC_LIT45,omc_Dump_printExpLstStr(threadData, _args));
tmpMeta21 = stringAppend(tmpMeta20,_OMC_LIT45);
_strArguments = tmpMeta21;
tmpMeta22 = stringAppend(_OMC_LIT45,omc_Dump_unparseAnnotationOption(threadData, _ann1));
tmpMeta23 = stringAppend(tmpMeta22,_OMC_LIT45);
_strAnn1 = tmpMeta23;
tmpMeta24 = stringAppend(_OMC_LIT45,omc_Dump_unparseAnnotationOption(threadData, _ann2));
tmpMeta25 = stringAppend(tmpMeta24,_OMC_LIT45);
_strAnn2 = tmpMeta25;
tmpMeta26 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_strLanguage, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_strOutput, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_strFuncName, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_strArguments, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_strAnn1, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_strAnn2, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))))))))))))));
tmp1 = stringAppendList(tmpMeta26);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT30;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res_1 = tmp1;
_return: OMC_LABEL_UNUSED
return _res_1;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getShortDefinitionBaseClassInformation(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _p)
{
modelica_string _res_1 = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _path = NULL;
modelica_metatype _baseClassPath = NULL;
modelica_string _strFlow = NULL;
modelica_string _strStream = NULL;
modelica_string _strVariability = NULL;
modelica_string _strDirection = NULL;
modelica_string _dim_str = NULL;
modelica_string _strBaseClassPath = NULL;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_metatype _cdef = NULL;
modelica_metatype _attr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_integer tmp14;
modelica_metatype tmpMeta15;
_path = omc_AbsynUtil_crefToPath(threadData, _cr);
tmpMeta6 = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,4) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,2) == 0) goto goto_2;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
tmp14 = mmc_unbox_integer(tmpMeta13);
_cdef = tmpMeta7;
_baseClassPath = tmpMeta9;
_attr = tmpMeta10;
_flowPrefix = tmp12;
_streamPrefix = tmp14;
_dim_str = omc_InteractiveUtil_getClassDimensions(threadData, _cdef);
_strBaseClassPath = omc_AbsynUtil_pathString(threadData, _baseClassPath, _OMC_LIT0, 1, 0);
_strFlow = (_flowPrefix?_OMC_LIT279:_OMC_LIT280);
_strStream = (_streamPrefix?_OMC_LIT281:_OMC_LIT280);
_strVariability = omc_InteractiveUtil_attrVariabilityStr(threadData, _attr);
_strDirection = omc_InteractiveUtil_attrDirectionStr(threadData, _attr);
tmpMeta15 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_strBaseClassPath, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_strFlow, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_strStream, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_strVariability, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_strDirection, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_dim_str, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))))))))))))));
tmp1 = stringAppendList(tmpMeta15);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT30;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res_1 = tmp1;
_return: OMC_LABEL_UNUSED
return _res_1;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInCommentOpt(threadData_t *threadData, modelica_metatype _inAbsynCommentOption, modelica_string _inString)
{
modelica_metatype _outAbsynCommentOption = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;
tmp4_1 = _inAbsynCommentOption;
tmp4_2 = _inString;
{
modelica_metatype _ann = NULL;
modelica_string _cmt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (0 != MMC_STRLEN(tmp4_2) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_2)) != 0) goto tmp3_end;
_ann = tmpMeta7;
tmpMeta8 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, _ann, mmc_mk_none());
tmpMeta1 = mmc_mk_some(tmpMeta8);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_ann = tmpMeta10;
_cmt = tmp4_2;
tmpMeta11 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, _ann, mmc_mk_some(_cmt));
tmpMeta1 = mmc_mk_some(tmpMeta11);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
if (!optionNone(tmp4_1)) goto tmp3_end;
_cmt = tmp4_2;
tmpMeta12 = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_none(), mmc_mk_some(_cmt));
tmpMeta1 = mmc_mk_some(tmpMeta12);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynCommentOption = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynCommentOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInClassdef(threadData_t *threadData, modelica_metatype _inClassDef, modelica_string _inString)
{
modelica_metatype _outClassDef = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;
tmp4_1 = _inClassDef;
tmp4_2 = _inString;
{
modelica_metatype _p = NULL;
modelica_string _strcmt = NULL;
modelica_string _id = NULL;
modelica_metatype _cmt_1 = NULL;
modelica_metatype _ad = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _args = NULL;
modelica_metatype _edef = NULL;
modelica_metatype _plst = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 8; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (0 != MMC_STRLEN(tmp4_2) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_2)) != 0) goto tmp3_end;
_typeVars = tmpMeta6;
_classAttrs = tmpMeta7;
_p = tmpMeta8;
_ann = tmpMeta9;
tmpMeta10 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _p, _ann, mmc_mk_none());
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_typeVars = tmpMeta11;
_classAttrs = tmpMeta12;
_p = tmpMeta13;
_ann = tmpMeta14;
_strcmt = tmp4_2;
tmp4 += 5;
tmpMeta15 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _p, _ann, mmc_mk_some(_strcmt));
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,0,2) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 3));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_path = tmpMeta17;
_ad = tmpMeta18;
_attr = tmpMeta19;
_arg = tmpMeta20;
_cmt = tmpMeta21;
_strcmt = tmp4_2;
tmp4 += 4;
_cmt_1 = omc_InteractiveUtil_setClassCommentInCommentOpt(threadData, _cmt, _strcmt);
tmpMeta22 = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, _path, _ad);
tmpMeta23 = mmc_mk_box5(4, &Absyn_ClassDef_DERIVED__desc, tmpMeta22, _attr, _arg, _cmt_1);
tmpMeta1 = tmpMeta23;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_edef = tmpMeta24;
_cmt = tmpMeta25;
_strcmt = tmp4_2;
tmp4 += 3;
_cmt_1 = omc_InteractiveUtil_setClassCommentInCommentOpt(threadData, _cmt, _strcmt);
tmpMeta26 = mmc_mk_box3(5, &Absyn_ClassDef_ENUMERATION__desc, _edef, _cmt_1);
tmpMeta1 = tmpMeta26;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_plst = tmpMeta27;
_cmt = tmpMeta28;
_strcmt = tmp4_2;
tmp4 += 2;
_cmt_1 = omc_InteractiveUtil_setClassCommentInCommentOpt(threadData, _cmt, _strcmt);
tmpMeta29 = mmc_mk_box3(6, &Absyn_ClassDef_OVERLOAD__desc, _plst, _cmt_1);
tmpMeta1 = tmpMeta29;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,5) == 0) goto tmp3_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (0 != MMC_STRLEN(tmp4_2) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_2)) != 0) goto tmp3_end;
_id = tmpMeta30;
_args = tmpMeta31;
_p = tmpMeta32;
_ann = tmpMeta33;
tmpMeta34 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _id, _args, mmc_mk_none(), _p, _ann);
tmpMeta1 = tmpMeta34;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,5) == 0) goto tmp3_end;
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_id = tmpMeta35;
_args = tmpMeta36;
_p = tmpMeta37;
_ann = tmpMeta38;
_strcmt = tmp4_2;
tmpMeta39 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _id, _args, mmc_mk_some(_strcmt), _p, _ann);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
case 7: {
tmpMeta1 = _inClassDef;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 8) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClassDef = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClassDef;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inString)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inString;
{
modelica_metatype _cdef_1 = NULL;
modelica_metatype _cdef = NULL;
modelica_string _id = NULL;
modelica_string _cmt = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_cdef = tmpMeta14;
_info = tmpMeta15;
_cmt = tmp4_2;
_cdef_1 = omc_InteractiveUtil_setClassCommentInClassdef(threadData, _cdef, _cmt);
tmpMeta16 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, _cdef_1, _info);
tmpMeta1 = tmpMeta16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_setClassComment(threadData_t *threadData, modelica_metatype _path, modelica_string _inString, modelica_metatype _inProgram, modelica_boolean *out_success)
{
modelica_metatype _outProgram = NULL;
modelica_boolean _success;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _path;
tmp4_2 = _inString;
tmp4_3 = _inProgram;
{
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_p_class = tmp4_1;
_str = tmp4_2;
_p = tmp4_3;
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_cdef_1 = omc_InteractiveUtil_setClassCommentInClass(threadData, _cdef, _str);
tmpMeta6 = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta7, _p, 0);
tmpMeta[0+0] = _newp;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inProgram;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_success = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_success) { *out_success = _success; }
return _outProgram;
}
modelica_metatype boxptr_InteractiveUtil_setClassComment(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inString, modelica_metatype _inProgram, modelica_metatype *out_success)
{
modelica_boolean _success;
modelica_metatype _outProgram = NULL;
_outProgram = omc_InteractiveUtil_setClassComment(threadData, _path, _inString, _inProgram, &_success);
if (out_success) { *out_success = mmc_mk_icon(_success); }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteClassFromList(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inAbsynClassLst)
{
modelica_metatype _outAbsynClassLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inAbsynClassLst;
{
modelica_string _name1 = NULL;
modelica_string _name2 = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _res = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _x = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_2);
tmpMeta8 = MMC_CDR(tmp4_2);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name2 = tmpMeta9;
_xs = tmpMeta8;
_name1 = tmpMeta10;
if (!(stringEqual(_name1, _name2))) goto tmp3_end;
tmpMeta1 = _xs;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_2);
tmpMeta12 = MMC_CDR(tmp4_2);
_x = tmpMeta11;
_xs = tmpMeta12;
_cdef = tmp4_1;
_res = omc_InteractiveUtil_deleteClassFromList(threadData, _cdef, _xs);
tmpMeta13 = mmc_mk_cons(_x, _res);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynClassLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_deleteClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _cpath = NULL;
modelica_metatype _parentcpath = NULL;
modelica_metatype _parentparentcpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _parentcdef = NULL;
modelica_metatype _parentcdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_class_ = tmp4_1;
_p = tmp4_2;
_cpath = omc_AbsynUtil_crefToPath(threadData, _class_);
_parentcpath = omc_AbsynUtil_stripLast(threadData, _cpath);
_parentparentcpath = omc_AbsynUtil_stripLast(threadData, _parentcpath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cpath, _p, 0);
_parentcdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _parentcpath, _p, 0);
_parentcdef_1 = omc_InteractiveUtil_removeInnerClass(threadData, _cdef, _parentcdef);
tmpMeta6 = mmc_mk_cons(_parentcdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _parentparentcpath);
tmpMeta8 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, tmpMeta7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta8, _p, 0);
tmp1_c0 = _OMC_LIT102;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
_class_ = tmp4_1;
_p = tmp4_2;
_cpath = omc_AbsynUtil_crefToPath(threadData, _class_);
_parentcpath = omc_AbsynUtil_stripLast(threadData, _cpath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cpath, _p, 0);
_parentcdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _parentcpath, _p, 0);
_parentcdef_1 = omc_InteractiveUtil_removeInnerClass(threadData, _cdef, _parentcdef);
tmpMeta9 = mmc_mk_cons(_parentcdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta10 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta9, _OMC_LIT7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta10, _p, 0);
tmp1_c0 = _OMC_LIT102;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta11;
_class_ = tmp4_1;
_p = tmp4_2;
_cpath = omc_AbsynUtil_crefToPath(threadData, _class_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cpath, _p, 0);
tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_p), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[2] = omc_InteractiveUtil_deleteClassFromList(threadData, _cdef, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))));
_p = tmpMeta11;
tmp1_c0 = _OMC_LIT102;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
case 3: {
tmp1_c0 = _OMC_LIT103;
tmpMeta[0+1] = _inProgram;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_createModel(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_metatype _outProgram = NULL;
modelica_string _name = NULL;
modelica_metatype _w = NULL;
modelica_metatype _wp = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(omc_AbsynUtil_crefIsIdent(threadData, _inComponentRef))
{
_name = omc_AbsynUtil_crefFirstIdent(threadData, _inComponentRef);
_w = _OMC_LIT7;
}
else
{
_wp = omc_AbsynUtil_crefToPath(threadData, _inComponentRef);
tmpMeta3 = omc_AbsynUtil_splitQualAndIdentPath(threadData, _wp, &tmpMeta1);
_wp = tmpMeta3;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,1,1) == 0) MMC_THROW_INTERNAL();
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
_name = tmpMeta2;
tmpMeta4 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _wp);
_w = tmpMeta4;
}
tmpMeta6 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(0), mmc_mk_boolean(0), mmc_mk_boolean(0), _OMC_LIT282, _OMC_LIT260, _OMC_LIT18);
tmpMeta5 = mmc_mk_cons(tmpMeta6, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta5, _w);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta7, _inProgram, 0);
_return: OMC_LABEL_UNUSED
return _outProgram;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isPrimitive(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _path = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (4 != MMC_STRLEN(tmpMeta6) || strcmp(MMC_STRINGDATA(_OMC_LIT114), MMC_STRINGDATA(tmpMeta6)) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta7) || strcmp(MMC_STRINGDATA(_OMC_LIT115), MMC_STRINGDATA(tmpMeta7)) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta8) || strcmp(MMC_STRINGDATA(_OMC_LIT117), MMC_STRINGDATA(tmpMeta8)) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta9) || strcmp(MMC_STRINGDATA(_OMC_LIT116), MMC_STRINGDATA(tmpMeta9)) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
_cr = tmp4_1;
_p = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _cr);
_class_ = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmp1 = omc_InteractiveUtil_isPrimitiveClass(threadData, _class_, _p);
goto tmp3_done;
}
case 5: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isPrimitive(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isPrimitive(threadData, _inComponentRef, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_changeLastIdent(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inPath1;
tmp4_2 = _inPath2;
{
modelica_string _b = NULL;
modelica_string _b_1 = NULL;
modelica_metatype _a_1 = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_b = tmpMeta6;
tmpMeta7 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _b);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
_p2 = tmp4_2;
_b_1 = omc_AbsynUtil_pathLastIdent(threadData, _p2);
tmpMeta8 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _b_1);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
_p1 = tmp4_1;
_p2 = tmp4_2;
_a_1 = omc_AbsynUtil_stripLast(threadData, _p1);
tmpMeta1 = omc_AbsynUtil_joinPaths(threadData, _a_1, _p2);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
_p1 = tmp4_1;
_p2 = tmp4_2;
_a_1 = omc_AbsynUtil_stripLast(threadData, _p1);
_b_1 = omc_AbsynUtil_pathLastIdent(threadData, _p2);
tmpMeta9 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _b_1);
tmpMeta1 = omc_AbsynUtil_joinPaths(threadData, _a_1, tmpMeta9);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outPath = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInImport(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean)
{
modelica_metatype _outImport = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inImport1;
tmp4_2 = _inPath2;
tmp4_3 = _inPath3;
tmp4_4 = _inEnv4;
{
modelica_metatype _cenv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _path = NULL;
modelica_metatype _new_path = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_string _id = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_boolean tmp8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta6;
_path_1 = tmpMeta7;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_cache = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none() ,NULL ,&_cenv);
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp8 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp8) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path_1, _new_comp);
tmpMeta9 = mmc_mk_box3(3, &Absyn_Import_NAMED__IMPORT__desc, _id, _new_path);
tmpMeta[0+0] = tmpMeta9;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_boolean tmp11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path_1 = tmpMeta10;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_cache = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none() ,NULL ,&_cenv);
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp11 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp11) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path_1, _new_comp);
tmpMeta12 = mmc_mk_box2(4, &Absyn_Import_QUAL__IMPORT__desc, _new_path);
tmpMeta[0+0] = tmpMeta12;
tmp1_c1 = 1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_boolean tmp14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_path_1 = tmpMeta13;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_cache = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none() ,NULL ,&_cenv);
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp14 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp14) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path_1, _new_comp);
tmpMeta15 = mmc_mk_box2(5, &Absyn_Import_UNQUAL__IMPORT__desc, _new_path);
tmpMeta[0+0] = tmpMeta15;
tmp1_c1 = 1;
goto tmp3_done;
}
case 3: {
tmpMeta[0+0] = _inImport1;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outImport = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outImport;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInImport(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outImport = NULL;
_outImport = omc_InteractiveUtil_renameClassInImport(threadData, _inImport1, _inPath2, _inPath3, _inEnv4, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outImport;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean)
{
modelica_metatype _outElementSpec = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inElementSpec1;
tmp4_2 = _inPath2;
tmp4_3 = _inPath3;
tmp4_4 = _inEnv4;
{
modelica_string _id = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _new_path = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _a = NULL;
modelica_metatype _comp_items = NULL;
modelica_metatype _import_1 = NULL;
modelica_metatype _import_ = NULL;
modelica_boolean _changed;
modelica_metatype _x = NULL;
modelica_metatype _annOpt = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _elargs = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_boolean tmp16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_a = tmpMeta6;
_path_1 = tmpMeta8;
_x = tmpMeta9;
_comp_items = tmpMeta10;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 2;
tmpMeta14 = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none(), &tmpMeta11, &tmpMeta13);
_cache = tmpMeta14;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,2,8) == 0) goto goto_2;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
_id = tmpMeta12;
_cenv = tmpMeta13;
tmpMeta15 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta15;
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp16 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp16) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path, _new_comp);
tmpMeta17 = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, _new_path, _x);
tmpMeta18 = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _a, tmpMeta17, _comp_items);
tmpMeta[0+0] = tmpMeta18;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_boolean tmp22;
modelica_metatype tmpMeta23;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_path_1 = tmpMeta19;
_elargs = tmpMeta20;
_annOpt = tmpMeta21;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_cache = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none() ,NULL ,&_cenv);
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp22 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp22) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path_1, _new_comp);
tmpMeta23 = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _new_path, _elargs, _annOpt);
tmpMeta[0+0] = tmpMeta23;
tmp1_c1 = 1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_import_ = tmpMeta24;
_cmt = tmpMeta25;
_info = tmpMeta26;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_import_1 = omc_InteractiveUtil_renameClassInImport(threadData, _import_, _old_comp, _new_comp, _env ,&_changed);
tmpMeta27 = mmc_mk_box4(5, &Absyn_ElementSpec_IMPORT__desc, _import_1, _cmt, _info);
tmpMeta[0+0] = tmpMeta27;
tmp1_c1 = _changed;
goto tmp3_done;
}
case 3: {
tmpMeta[0+0] = _inElementSpec1;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElementSpec = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outElementSpec = NULL;
_outElementSpec = omc_InteractiveUtil_renameClassInElementSpec(threadData, _inElementSpec1, _inPath2, _inPath3, _inEnv4, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inAbsynElementItemLst1;
tmp4_2 = _inPath2;
tmp4_3 = _inPath3;
tmp4_4 = _inEnv4;
{
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_boolean _changed1;
modelica_boolean _changed2;
modelica_boolean _changed;
modelica_boolean _finalPrefix;
modelica_metatype _elementspec_1 = NULL;
modelica_metatype _elementspec = NULL;
modelica_metatype _element_1 = NULL;
modelica_metatype _element = NULL;
modelica_metatype _redeclare_ = NULL;
modelica_metatype _inner_outer = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constrainClass = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta6;
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_integer tmp11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,6) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmp11 = mmc_unbox_integer(tmpMeta10);
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 6));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 7));
_finalPrefix = tmp11;
_redeclare_ = tmpMeta12;
_inner_outer = tmpMeta13;
_elementspec = tmpMeta14;
_info = tmpMeta15;
_constrainClass = tmpMeta16;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_res_1 = omc_InteractiveUtil_renameClassInElements(threadData, _res, _old_comp, _new_comp, _env ,&_changed1);
_elementspec_1 = omc_InteractiveUtil_renameClassInElementSpec(threadData, _elementspec, _old_comp, _new_comp, _env ,&_changed2);
tmpMeta17 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_finalPrefix), _redeclare_, _inner_outer, _elementspec_1, _info, _constrainClass);
tmpMeta18 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta17);
_element_1 = tmpMeta18;
_changed = (_changed1 || _changed2);
tmpMeta19 = mmc_mk_cons(_element_1, _res_1);
tmpMeta[0+0] = tmpMeta19;
tmp1_c1 = _changed;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_1);
tmpMeta21 = MMC_CDR(tmp4_1);
_element = tmpMeta20;
_res = tmpMeta21;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_res_1 = omc_InteractiveUtil_renameClassInElements(threadData, _res, _old_comp, _new_comp, _env ,&_changed);
_element_1 = _element;
tmpMeta22 = mmc_mk_cons(_element_1, _res_1);
tmpMeta[0+0] = tmpMeta22;
tmp1_c1 = _changed;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementItemLst = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outAbsynElementItemLst = NULL;
_outAbsynElementItemLst = omc_InteractiveUtil_renameClassInElements(threadData, _inAbsynElementItemLst1, _inPath2, _inPath3, _inEnv4, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inAbsynClassPartLst1;
tmp4_2 = _inPath2;
tmp4_3 = _inPath3;
tmp4_4 = _inEnv4;
{
modelica_metatype _env = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_boolean _changed1;
modelica_boolean _changed2;
modelica_boolean _changed;
modelica_metatype _elements_1 = NULL;
modelica_metatype _elements = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _a = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta6;
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elements = tmpMeta9;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_res_1 = omc_InteractiveUtil_renameClassInParts(threadData, _res, _old_comp, _new_comp, _env ,&_changed1);
_elements_1 = omc_InteractiveUtil_renameClassInElements(threadData, _elements, _old_comp, _new_comp, _env ,&_changed2);
_changed = (_changed1 || _changed2);
tmpMeta11 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elements_1);
tmpMeta10 = mmc_mk_cons(tmpMeta11, _res_1);
tmpMeta[0+0] = tmpMeta10;
tmp1_c1 = _changed;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,1) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_elements = tmpMeta14;
_res = tmpMeta13;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_res_1 = omc_InteractiveUtil_renameClassInParts(threadData, _res, _old_comp, _new_comp, _env ,&_changed1);
_elements_1 = omc_InteractiveUtil_renameClassInElements(threadData, _elements, _old_comp, _new_comp, _env ,&_changed2);
_changed = (_changed1 || _changed2);
tmpMeta16 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elements_1);
tmpMeta15 = mmc_mk_cons(tmpMeta16, _res_1);
tmpMeta[0+0] = tmpMeta15;
tmp1_c1 = _changed;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta17 = MMC_CAR(tmp4_1);
tmpMeta18 = MMC_CDR(tmp4_1);
_a = tmpMeta17;
_res = tmpMeta18;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_res_1 = omc_InteractiveUtil_renameClassInParts(threadData, _res, _old_comp, _new_comp, _env ,&_changed);
tmpMeta19 = mmc_mk_cons(_a, _res_1);
tmpMeta[0+0] = tmpMeta19;
tmp1_c1 = _changed;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassPartLst = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outAbsynClassPartLst = NULL;
_outAbsynClassPartLst = omc_InteractiveUtil_renameClassInParts(threadData, _inAbsynClassPartLst1, _inPath2, _inPath3, _inEnv4, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean)
{
modelica_metatype _outClass = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inClass1;
tmp4_2 = _inPath2;
tmp4_3 = _inPath3;
tmp4_4 = _inEnv4;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_boolean _changed;
modelica_boolean _partialPrefix;
modelica_boolean _finalPrefix;
modelica_boolean _encapsulatedPrefix;
modelica_string _name = NULL;
modelica_string _baseClassName = NULL;
modelica_metatype _restriction = NULL;
modelica_metatype _comment = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _new_path = NULL;
modelica_metatype _env = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _elementarg = NULL;
modelica_metatype _co = NULL;
modelica_metatype _subscripts = NULL;
modelica_metatype _attrs = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta6;
_partialPrefix = tmp8;
_finalPrefix = tmp10;
_encapsulatedPrefix = tmp12;
_restriction = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_comment = tmpMeta19;
_file_info = tmpMeta20;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 2;
_parts_1 = omc_InteractiveUtil_renameClassInParts(threadData, _parts, _old_comp, _new_comp, _env ,&_changed);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _comment);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta21, _file_info);
tmpMeta[0+0] = tmpMeta22;
tmp1_c1 = _changed;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta23;
_partialPrefix = tmp25;
_finalPrefix = tmp27;
_encapsulatedPrefix = tmp29;
_restriction = tmpMeta30;
_baseClassName = tmpMeta32;
_modifications = tmpMeta33;
_comment = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_parts_1 = omc_InteractiveUtil_renameClassInParts(threadData, _parts, _old_comp, _new_comp, _env ,&_changed);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _comment, _parts_1, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta38, _file_info);
tmpMeta[0+0] = tmpMeta39;
tmp1_c1 = _changed;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_integer tmp42;
modelica_metatype tmpMeta43;
modelica_integer tmp44;
modelica_metatype tmpMeta45;
modelica_integer tmp46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
modelica_boolean tmp61;
modelica_metatype tmpMeta62;
modelica_metatype tmpMeta63;
modelica_metatype tmpMeta64;
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp42 = mmc_unbox_integer(tmpMeta41);
tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp44 = mmc_unbox_integer(tmpMeta43);
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp46 = mmc_unbox_integer(tmpMeta45);
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta48,1,4) == 0) goto tmp3_end;
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta49,0,2) == 0) goto tmp3_end;
tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 2));
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 3));
tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 3));
tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 4));
tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta48), 5));
tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta40;
_partialPrefix = tmp42;
_finalPrefix = tmp44;
_encapsulatedPrefix = tmp46;
_restriction = tmpMeta47;
_path_1 = tmpMeta50;
_subscripts = tmpMeta51;
_attrs = tmpMeta52;
_elementarg = tmpMeta53;
_co = tmpMeta54;
_file_info = tmpMeta55;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmpMeta59 = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none(), &tmpMeta56, &tmpMeta58);
_cache = tmpMeta59;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta56,2,8) == 0) goto goto_2;
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta56), 2));
_name = tmpMeta57;
_cenv = tmpMeta58;
tmpMeta60 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
_path_1 = tmpMeta60;
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp61 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp61) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path_1, _new_comp);
tmpMeta62 = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, _new_path, _subscripts);
tmpMeta63 = mmc_mk_box5(4, &Absyn_ClassDef_DERIVED__desc, tmpMeta62, _attrs, _elementarg, _co);
tmpMeta64 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta63, _file_info);
tmpMeta[0+0] = tmpMeta64;
tmp1_c1 = 1;
goto tmp3_done;
}
case 3: {
tmpMeta[0+0] = _inClass1;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outClass = NULL;
_outClass = omc_InteractiveUtil_renameClassInClass(threadData, _inClass1, _inPath2, _inPath3, _inEnv4, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv)
{
modelica_metatype _outTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv;
{
modelica_metatype _path_1 = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _old_class_path = NULL;
modelica_metatype _new_class_path = NULL;
modelica_string _new_name = NULL;
modelica_string _path_str = NULL;
modelica_string _id = NULL;
modelica_boolean _a;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _changed;
modelica_metatype _d = NULL;
modelica_metatype _e = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _p = NULL;
modelica_metatype _path_str_lst = NULL;
modelica_metatype _env = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _class_1 = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _args = NULL;
modelica_metatype _opath = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_boolean tmp10;
modelica_metatype tmpMeta11;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 8));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_class_ = tmpMeta6;
_file_info = tmpMeta7;
_opath = tmpMeta8;
_args = tmpMeta9;
tmp10 = omc_InteractiveUtil_isReadOnly(threadData, _file_info);
if (1 != tmp10) goto goto_2;
tmpMeta11 = mmc_mk_box3(0, _class_, _opath, _args);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_integer tmp15;
modelica_metatype tmpMeta16;
modelica_integer tmp17;
modelica_metatype tmpMeta18;
modelica_integer tmp19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_boolean tmp32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
tmp15 = mmc_unbox_integer(tmpMeta14);
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 4));
tmp17 = mmc_unbox_integer(tmpMeta16);
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 5));
tmp19 = mmc_unbox_integer(tmpMeta18);
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 6));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 7));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 8));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (optionNone(tmpMeta23)) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 1));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 1));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 2));
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 3));
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 4));
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 5));
_id = tmpMeta13;
_a = tmp15;
_b = tmp17;
_c = tmp19;
_d = tmpMeta20;
_e = tmpMeta21;
_file_info = tmpMeta22;
_pa = tmpMeta24;
_old_class_path = tmpMeta26;
_new_class_path = tmpMeta27;
_p = tmpMeta28;
_path_str_lst = tmpMeta29;
_env = tmpMeta30;
tmp4 += 1;
tmpMeta31 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = omc_AbsynUtil_joinPaths(threadData, _pa, tmpMeta31);
tmp32 = omc_AbsynUtil_pathEqual(threadData, _old_class_path, _path_1);
if (1 != tmp32) goto goto_2;
_new_name = omc_AbsynUtil_pathLastIdent(threadData, _new_class_path);
_path_str = omc_AbsynUtil_pathString(threadData, _new_class_path, _OMC_LIT0, 1, 0);
tmpMeta33 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _new_name, mmc_mk_boolean(_a), mmc_mk_boolean(_b), mmc_mk_boolean(_c), _d, _e, _file_info);
tmpMeta34 = mmc_mk_cons(_path_str, _path_str_lst);
tmpMeta35 = mmc_mk_box5(0, _old_class_path, _new_class_path, _p, tmpMeta34, _env);
tmpMeta36 = mmc_mk_box3(0, tmpMeta33, mmc_mk_some(_pa), tmpMeta35);
tmpMeta1 = tmpMeta36;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_integer tmp40;
modelica_metatype tmpMeta41;
modelica_integer tmp42;
modelica_metatype tmpMeta43;
modelica_integer tmp44;
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
modelica_boolean tmp56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 2));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 3));
tmp40 = mmc_unbox_integer(tmpMeta39);
tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 4));
tmp42 = mmc_unbox_integer(tmpMeta41);
tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 5));
tmp44 = mmc_unbox_integer(tmpMeta43);
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 6));
tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 7));
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 8));
tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!optionNone(tmpMeta48)) goto tmp3_end;
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 1));
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 2));
tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 3));
tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 4));
tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta49), 5));
_id = tmpMeta38;
_a = tmp40;
_b = tmp42;
_c = tmp44;
_d = tmpMeta45;
_e = tmpMeta46;
_file_info = tmpMeta47;
_old_class_path = tmpMeta50;
_new_class_path = tmpMeta51;
_p = tmpMeta52;
_path_str_lst = tmpMeta53;
_env = tmpMeta54;
tmp4 += 1;
tmpMeta55 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta55;
tmp56 = omc_AbsynUtil_pathEqual(threadData, _old_class_path, _path_1);
if (1 != tmp56) goto goto_2;
_new_name = omc_AbsynUtil_pathLastIdent(threadData, _new_class_path);
_path_str = omc_AbsynUtil_pathString(threadData, _new_class_path, _OMC_LIT0, 1, 0);
tmpMeta57 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _new_name, mmc_mk_boolean(_a), mmc_mk_boolean(_b), mmc_mk_boolean(_c), _d, _e, _file_info);
tmpMeta58 = mmc_mk_cons(_path_str, _path_str_lst);
tmpMeta59 = mmc_mk_box5(0, _old_class_path, _new_class_path, _p, tmpMeta58, _env);
tmpMeta60 = mmc_mk_box3(0, tmpMeta57, mmc_mk_none(), tmpMeta59);
tmpMeta1 = tmpMeta60;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta61;
modelica_metatype tmpMeta62;
modelica_metatype tmpMeta63;
modelica_metatype tmpMeta64;
modelica_metatype tmpMeta65;
modelica_metatype tmpMeta66;
modelica_metatype tmpMeta67;
modelica_metatype tmpMeta68;
modelica_metatype tmpMeta69;
modelica_metatype tmpMeta70;
modelica_metatype tmpMeta71;
modelica_metatype tmpMeta72;
modelica_metatype tmpMeta73;
modelica_metatype tmpMeta74;
tmpMeta61 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta62 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta61), 2));
tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (optionNone(tmpMeta63)) goto tmp3_end;
tmpMeta64 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta63), 1));
tmpMeta65 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 1));
tmpMeta67 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 2));
tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 3));
tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 4));
tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta65), 5));
_class_ = tmpMeta61;
_id = tmpMeta62;
_pa = tmpMeta64;
_old_class_path = tmpMeta66;
_new_class_path = tmpMeta67;
_p = tmpMeta68;
_path_str_lst = tmpMeta69;
_env = tmpMeta70;
tmp4 += 1;
tmpMeta71 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = omc_AbsynUtil_joinPaths(threadData, _pa, tmpMeta71);
_cenv = omc_InteractiveUtil_getClassEnvNoElaboration(threadData, _p, _path_1, _env);
_class_1 = omc_InteractiveUtil_renameClassInClass(threadData, _class_, _old_class_path, _new_class_path, _cenv ,&_changed);
_path_str = (_changed?omc_AbsynUtil_pathString(threadData, _path_1, _OMC_LIT0, 1, 0):_OMC_LIT16);
tmpMeta72 = mmc_mk_cons(_path_str, _path_str_lst);
tmpMeta73 = mmc_mk_box5(0, _old_class_path, _new_class_path, _p, tmpMeta72, _env);
tmpMeta74 = mmc_mk_box3(0, _class_1, mmc_mk_some(_pa), tmpMeta73);
tmpMeta1 = tmpMeta74;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta75;
modelica_metatype tmpMeta76;
modelica_metatype tmpMeta77;
modelica_metatype tmpMeta78;
modelica_metatype tmpMeta79;
modelica_metatype tmpMeta80;
modelica_metatype tmpMeta81;
modelica_metatype tmpMeta82;
modelica_metatype tmpMeta83;
modelica_metatype tmpMeta84;
modelica_metatype tmpMeta85;
modelica_metatype tmpMeta86;
modelica_metatype tmpMeta87;
tmpMeta75 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta76 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta75), 2));
tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!optionNone(tmpMeta77)) goto tmp3_end;
tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta79 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta78), 1));
tmpMeta80 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta78), 2));
tmpMeta81 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta78), 3));
tmpMeta82 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta78), 4));
tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta78), 5));
_class_ = tmpMeta75;
_id = tmpMeta76;
_old_class_path = tmpMeta79;
_new_class_path = tmpMeta80;
_p = tmpMeta81;
_path_str_lst = tmpMeta82;
_env = tmpMeta83;
tmpMeta84 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta84;
_cenv = omc_InteractiveUtil_getClassEnvNoElaboration(threadData, _p, _path_1, _env);
_class_1 = omc_InteractiveUtil_renameClassInClass(threadData, _class_, _old_class_path, _new_class_path, _cenv ,&_changed);
_path_str = (_changed?omc_AbsynUtil_pathString(threadData, _path_1, _OMC_LIT0, 1, 0):_OMC_LIT16);
tmpMeta85 = mmc_mk_cons(_path_str, _path_str_lst);
tmpMeta86 = mmc_mk_box5(0, _old_class_path, _new_class_path, _p, tmpMeta85, _env);
tmpMeta87 = mmc_mk_box3(0, _class_1, mmc_mk_none(), tmpMeta86);
tmpMeta1 = tmpMeta87;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta88;
modelica_metatype tmpMeta89;
modelica_metatype tmpMeta90;
modelica_metatype tmpMeta91;
tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta89 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta90 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_class_ = tmpMeta88;
_opath = tmpMeta89;
_args = tmpMeta90;
tmpMeta91 = mmc_mk_box3(0, _class_, _opath, _args);
tmpMeta1 = tmpMeta91;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_renameClass(threadData_t *threadData, modelica_metatype _inProgram1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inProgram1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _new_path = NULL;
modelica_metatype _old_path = NULL;
modelica_metatype _new_path_1 = NULL;
modelica_metatype _old_path_no_last = NULL;
modelica_string _tmp_str = NULL;
modelica_string _path_str_lst_no_empty = NULL;
modelica_string _res = NULL;
modelica_metatype _p = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _old_class = NULL;
modelica_metatype _new_name = NULL;
modelica_metatype _pa_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _path_str_lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,3) == 0) goto tmp3_end;
_new_name = tmp4_3;
_p = tmp4_1;
_new_path = omc_AbsynUtil_crefToPath(threadData, _new_name);
_tmp_str = omc_AbsynUtil_pathString(threadData, _new_path, _OMC_LIT0, 1, 0);
fputs(MMC_STRINGDATA(_tmp_str),stdout);
fputs(MMC_STRINGDATA(_OMC_LIT49),stdout);
tmp1_c0 = _OMC_LIT283;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
_old_class = tmp4_2;
_p = tmp4_1;
_new_name = tmp4_3;
tmp4 += 1;
_old_path = omc_AbsynUtil_crefToPath(threadData, _old_class);
_new_path = omc_AbsynUtil_crefToPath(threadData, _new_name);
_pa_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p);
omc_Inst_makeEnvFromProgram(threadData, _pa_1 ,&_env);
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta7 = mmc_mk_box5(0, _old_path, _new_path, _p, tmpMeta6, _env);
tmpMeta8 = omc_AbsynUtil_traverseClasses(threadData, _p, mmc_mk_none(), boxvar_InteractiveUtil_renameClassVisitor, tmpMeta7, 1);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
_p_1 = tmpMeta9;
_path_str_lst = tmpMeta11;
_path_str_lst_no_empty = omc_Util_stringDelimitListNonEmptyElts(threadData, _path_str_lst, _OMC_LIT43);
tmpMeta12 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_path_str_lst_no_empty, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
_res = stringAppendList(tmpMeta12);
tmp1_c0 = _res;
tmpMeta[0+1] = _p_1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
_old_class = tmp4_2;
_p = tmp4_1;
_new_name = tmp4_3;
_old_path = omc_AbsynUtil_crefToPath(threadData, _old_class);
_new_path_1 = omc_AbsynUtil_crefToPath(threadData, _new_name);
_old_path_no_last = omc_AbsynUtil_stripLast(threadData, _old_path);
_new_path = omc_AbsynUtil_joinPaths(threadData, _old_path_no_last, _new_path_1);
_pa_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p);
omc_Inst_makeEnvFromProgram(threadData, _pa_1 ,&_env);
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta14 = mmc_mk_box5(0, _old_path, _new_path, _p, tmpMeta13, _env);
tmpMeta15 = omc_AbsynUtil_traverseClasses(threadData, _p, mmc_mk_none(), boxvar_InteractiveUtil_renameClassVisitor, tmpMeta14, 1);
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 1));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 3));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 4));
_p_1 = tmpMeta16;
_path_str_lst = tmpMeta18;
_path_str_lst_no_empty = omc_Util_stringDelimitListNonEmptyElts(threadData, _path_str_lst, _OMC_LIT43);
tmpMeta19 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_path_str_lst_no_empty, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
_res = stringAppendList(tmpMeta19);
tmp1_c0 = _res;
tmpMeta[0+1] = _p_1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsInElement(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_metatype _outAbsynComponentItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _l = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,3) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_l = tmpMeta7;
tmpMeta1 = _l;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynComponentItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynComponentItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemName(threadData_t *threadData, modelica_metatype _inComponentItem)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentItem;
{
modelica_string _id = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_id = tmpMeta7;
tmp1 = _id;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_componentitemNamed(threadData_t *threadData, modelica_metatype _inComponentItem, modelica_string _inIdent)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;
tmp4_1 = _inComponentItem;
tmp4_2 = _inIdent;
{
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_id1 = tmpMeta7;
_id2 = tmp4_2;
if (!(stringEqual(_id1, _id2))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_componentitemNamed(threadData_t *threadData, modelica_metatype _inComponentItem, modelica_metatype _inIdent)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_componentitemNamed(threadData, _inComponentItem, _inIdent);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_metatype omc_InteractiveUtil_buildWithin(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outWithin = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_metatype _w_path = NULL;
modelica_metatype _path = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
tmpMeta1 = _OMC_LIT7;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta5;
_inPath = _path;
goto _tailrecursive;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
modelica_metatype tmpMeta6;
_path = tmp4_1;
_w_path = omc_AbsynUtil_stripLast(threadData, _path);
tmpMeta6 = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _w_path);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outWithin = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outWithin;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade)
{
modelica_metatype _outAbsynComponentItemLst = NULL;
modelica_boolean _outChangeMade;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inAbsynComponentItemLst;
tmp4_2 = _inIdent;
tmp4_3 = _inExp;
{
modelica_string _id = NULL;
modelica_string _id2 = NULL;
modelica_metatype _dim = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _res = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _item = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta6;
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
if (optionNone(tmpMeta12)) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 1));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_id = tmpMeta10;
_dim = tmpMeta11;
_arg = tmpMeta14;
_cond = tmpMeta15;
_cmt = tmpMeta16;
_rest = tmpMeta8;
_id2 = tmp4_2;
_exp = tmp4_3;
if (!(stringEqual(_id, _id2))) goto tmp3_end;
tmpMeta18 = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _exp, _OMC_LIT18);
tmpMeta19 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _arg, tmpMeta18);
tmpMeta20 = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _id, _dim, mmc_mk_some(tmpMeta19));
tmpMeta21 = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta20, _cond, _cmt);
tmpMeta17 = mmc_mk_cons(tmpMeta21, _rest);
tmpMeta[0+0] = tmpMeta17;
tmp1_c1 = 1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta22 = MMC_CAR(tmp4_1);
tmpMeta23 = MMC_CDR(tmp4_1);
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 2));
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 3));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 4));
if (!optionNone(tmpMeta27)) goto tmp3_end;
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 3));
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 4));
_id = tmpMeta25;
_dim = tmpMeta26;
_cond = tmpMeta28;
_cmt = tmpMeta29;
_rest = tmpMeta23;
_id2 = tmp4_2;
_exp = tmp4_3;
if (!(stringEqual(_id, _id2))) goto tmp3_end;
tmpMeta31 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta32 = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _exp, _OMC_LIT18);
tmpMeta33 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta31, tmpMeta32);
tmpMeta34 = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _id, _dim, mmc_mk_some(tmpMeta33));
tmpMeta35 = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta34, _cond, _cmt);
tmpMeta30 = mmc_mk_cons(tmpMeta35, _rest);
tmpMeta[0+0] = tmpMeta30;
tmp1_c1 = 1;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta36 = MMC_CAR(tmp4_1);
tmpMeta37 = MMC_CDR(tmp4_1);
_item = tmpMeta36;
_rest = tmpMeta37;
_id = tmp4_2;
_exp = tmp4_3;
_res = omc_InteractiveUtil_setVariableBindingInCompitems(threadData, _rest, _id, _exp ,&_b);
tmpMeta38 = mmc_mk_cons(_item, _res);
tmpMeta[0+0] = tmpMeta38;
tmp1_c1 = _b;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynComponentItemLst = tmpMeta[0+0];
_outChangeMade = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outChangeMade) { *out_outChangeMade = _outChangeMade; }
return _outAbsynComponentItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade)
{
modelica_boolean _outChangeMade;
modelica_metatype _outAbsynComponentItemLst = NULL;
_outAbsynComponentItemLst = omc_InteractiveUtil_setVariableBindingInCompitems(threadData, _inAbsynComponentItemLst, _inIdent, _inExp, &_outChangeMade);
if (out_outChangeMade) { *out_outChangeMade = mmc_mk_icon(_outChangeMade); }
return _outAbsynComponentItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade)
{
modelica_metatype _outElement = NULL;
modelica_boolean _outChangeMade;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inElement;
tmp4_2 = _inIdent;
tmp4_3 = _inExp;
{
modelica_metatype _compitems_1 = NULL;
modelica_metatype _compitems = NULL;
modelica_boolean _f;
modelica_boolean _b;
modelica_metatype _r = NULL;
modelica_metatype _i = NULL;
modelica_string _id = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta6);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,3,3) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_f = tmp7;
_r = tmpMeta8;
_i = tmpMeta9;
_attr = tmpMeta11;
_tp = tmpMeta12;
_compitems = tmpMeta13;
_info = tmpMeta14;
_constr = tmpMeta15;
_id = tmp4_2;
_exp = tmp4_3;
_compitems_1 = omc_InteractiveUtil_setVariableBindingInCompitems(threadData, _compitems, _id, _exp ,&_b);
tmpMeta16 = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr, _tp, _compitems_1);
tmpMeta17 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _i, tmpMeta16, _info, _constr);
tmpMeta[0+0] = tmpMeta17;
tmp1_c1 = _b;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inElement;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElement = tmpMeta[0+0];
_outChangeMade = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outChangeMade) { *out_outChangeMade = _outChangeMade; }
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade)
{
modelica_boolean _outChangeMade;
modelica_metatype _outElement = NULL;
_outElement = omc_InteractiveUtil_setVariableBindingInElement(threadData, _inElement, _inIdent, _inExp, &_outChangeMade);
if (out_outChangeMade) { *out_outChangeMade = mmc_mk_icon(_outChangeMade); }
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_boolean _outChangeMade;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inIdent;
tmp4_3 = _inExp;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elt_1 = NULL;
modelica_metatype _elt = NULL;
modelica_string _id = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _elitem = NULL;
modelica_boolean _b1;
modelica_boolean _b2;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta6;
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elt = tmpMeta9;
_rest = tmpMeta8;
_id = tmp4_2;
_exp = tmp4_3;
_res = omc_InteractiveUtil_setVariableBindingInElementitems(threadData, _rest, _id, _exp ,&_b1);
_elt_1 = omc_InteractiveUtil_setVariableBindingInElement(threadData, _elt, _id, _exp ,&_b2);
_b = (_b1 || _b2);
tmpMeta11 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta10 = mmc_mk_cons(tmpMeta11, _res);
tmpMeta[0+0] = tmpMeta10;
tmp1_c1 = _b;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_elitem = tmpMeta12;
_rest = tmpMeta13;
_id = tmp4_2;
_exp = tmp4_3;
_res = omc_InteractiveUtil_setVariableBindingInElementitems(threadData, _rest, _id, _exp ,&_b);
tmpMeta14 = mmc_mk_cons(_elitem, _res);
tmpMeta[0+0] = tmpMeta14;
tmp1_c1 = _b;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementItemLst = tmpMeta[0+0];
_outChangeMade = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outChangeMade) { *out_outChangeMade = _outChangeMade; }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade)
{
modelica_boolean _outChangeMade;
modelica_metatype _outAbsynElementItemLst = NULL;
_outAbsynElementItemLst = omc_InteractiveUtil_setVariableBindingInElementitems(threadData, _inAbsynElementItemLst, _inIdent, _inExp, &_outChangeMade);
if (out_outChangeMade) { *out_outChangeMade = mmc_mk_icon(_outChangeMade); }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_boolean _outChangeMade;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inIdent;
tmp4_3 = _inExp;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_string _id = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _elt = NULL;
modelica_boolean _b1;
modelica_boolean _b2;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta6;
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elts = tmpMeta9;
_rest = tmpMeta8;
_id = tmp4_2;
_exp = tmp4_3;
tmp4 += 1;
_res = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _rest, _id, _exp ,&_b1);
_elts_1 = omc_InteractiveUtil_setVariableBindingInElementitems(threadData, _elts, _id, _exp ,&_b2);
_b = (_b1 || _b2);
tmpMeta11 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta10 = mmc_mk_cons(tmpMeta11, _res);
tmpMeta[0+0] = tmpMeta10;
tmp1_c1 = _b;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,1) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_elts = tmpMeta14;
_rest = tmpMeta13;
_id = tmp4_2;
_exp = tmp4_3;
_res = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _rest, _id, _exp ,&_b1);
_elts_1 = omc_InteractiveUtil_setVariableBindingInElementitems(threadData, _elts, _id, _exp ,&_b2);
_b = (_b1 || _b2);
tmpMeta16 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta15 = mmc_mk_cons(tmpMeta16, _res);
tmpMeta[0+0] = tmpMeta15;
tmp1_c1 = _b;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta17 = MMC_CAR(tmp4_1);
tmpMeta18 = MMC_CDR(tmp4_1);
_elt = tmpMeta17;
_rest = tmpMeta18;
_id = tmp4_2;
_exp = tmp4_3;
_res = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _rest, _id, _exp ,&_b);
tmpMeta19 = mmc_mk_cons(_elt, _res);
tmpMeta[0+0] = tmpMeta19;
tmp1_c1 = _b;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassPartLst = tmpMeta[0+0];
_outChangeMade = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outChangeMade) { *out_outChangeMade = _outChangeMade; }
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade)
{
modelica_boolean _outChangeMade;
modelica_metatype _outAbsynClassPartLst = NULL;
_outAbsynClassPartLst = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _inAbsynClassPartLst, _inIdent, _inExp, &_outChangeMade);
if (out_outChangeMade) { *out_outChangeMade = mmc_mk_icon(_outChangeMade); }
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade)
{
modelica_metatype _outClass = NULL;
modelica_boolean _outChangeMade;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inClass;
tmp4_2 = _inIdent;
tmp4_3 = _inExp;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _id = NULL;
modelica_string _id2 = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_boolean _b;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_id2 = tmp4_2;
_exp = tmp4_3;
_parts_1 = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _parts, _id2, _exp ,&_b);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _cmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta21, _file_info);
tmpMeta[0+0] = tmpMeta22;
tmp1_c1 = _b;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_r = tmpMeta30;
_bcname = tmpMeta32;
_modif = tmpMeta33;
_cmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_id2 = tmp4_2;
_exp = tmp4_3;
_parts_1 = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _parts, _id2, _exp ,&_b);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts_1, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta38, _file_info);
tmpMeta[0+0] = tmpMeta39;
tmp1_c1 = _b;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta[0+0];
_outChangeMade = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outChangeMade) { *out_outChangeMade = _outChangeMade; }
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade)
{
modelica_boolean _outChangeMade;
modelica_metatype _outClass = NULL;
_outClass = omc_InteractiveUtil_setVariableBindingInClass(threadData, _inClass, _inIdent, _inExp, &_outChangeMade);
if (out_outChangeMade) { *out_outChangeMade = mmc_mk_icon(_outChangeMade); }
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setParameterValue(threadData_t *threadData, modelica_metatype _inComponentRefClass, modelica_metatype _inComponentRefComponentName, modelica_metatype _inBindingExp, modelica_metatype _inFullProgram, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRefClass;
tmp4_2 = _inComponentRefComponentName;
tmp4_3 = _inBindingExp;
tmp4_4 = _inFullProgram;
{
modelica_metatype _p_class = NULL;
modelica_string _varname = NULL;
modelica_string _str = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _name = NULL;
modelica_metatype _exp = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_boolean tmp14;
modelica_string tmp15;
_class_ = tmp4_1;
_name = tmp4_2;
_exp = tmp4_3;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta6 = omc_AbsynUtil_crefToPath(threadData, _name);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto goto_2;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_varname = tmpMeta7;
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_cdef_1 = omc_InteractiveUtil_setVariableBindingInClass(threadData, _cdef, _varname, _exp ,&_b);
tmpMeta8 = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta9 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta8, _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta9, _p, 0);
tmp14 = (modelica_boolean)_b;
if(tmp14)
{
tmp15 = _OMC_LIT31;
}
else
{
tmpMeta10 = stringAppend(_OMC_LIT284,_varname);
tmpMeta11 = stringAppend(tmpMeta10,_OMC_LIT285);
tmpMeta12 = stringAppend(tmpMeta11,omc_AbsynUtil_pathString(threadData, _p_class, _OMC_LIT0, 1, 0));
tmpMeta13 = stringAppend(tmpMeta12,_OMC_LIT286);
tmp15 = tmpMeta13;
}
_str = tmp15;
tmpMeta[0+0] = _newp;
tmp1_c1 = _str;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta16;
modelica_boolean tmp17;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
_class_ = tmp4_1;
_name = tmp4_2;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta16 = omc_AbsynUtil_crefToPath(threadData, _name);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta16,1,1) == 0) goto goto_2;
tmp17 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
tmp17 = 1;
goto goto_18;
goto_18:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp17) {goto goto_2;}
tmpMeta19 = stringAppend(_OMC_LIT287,omc_AbsynUtil_pathString(threadData, _p_class, _OMC_LIT0, 1, 0));
tmpMeta20 = stringAppend(tmpMeta19,_OMC_LIT286);
_str = tmpMeta20;
tmpMeta[0+0] = _p;
tmp1_c1 = _str;
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _inFullProgram;
tmp1_c1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getVariableBindingInComponentitem(threadData_t *threadData, modelica_metatype _inComponentItem)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentItem;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
if (optionNone(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,2) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_e = tmpMeta10;
tmpMeta1 = _e;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getComponentInClass(threadData_t *threadData, modelica_metatype _cls, modelica_string _componentName)
{
modelica_metatype _component = NULL;
modelica_metatype _body = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _elements = NULL;
modelica_metatype _components = NULL;
modelica_boolean _found;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_found = 0;
tmpMeta1 = _cls;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 7));
_body = tmpMeta2;
{
modelica_metatype tmp6_1;
tmp6_1 = _body;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
for (; tmp6 < 2; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,0,5) == 0) goto tmp5_end;
tmpMeta3 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4)));
goto tmp5_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,4,5) == 0) goto tmp5_end;
tmpMeta3 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 5)));
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
goto_4:;
MMC_THROW_INTERNAL();
goto tmp5_done;
tmp5_done:;
}
}
_parts = tmpMeta3;
{
modelica_metatype _part;
for (tmpMeta8 = _parts; !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
{
_part = MMC_CAR(tmpMeta8);
{
modelica_metatype tmp12_1;
tmp12_1 = _part;
{
int tmp12;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp12_1))) {
case 3: {
tmpMeta9 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 2)));
goto tmp11_done;
}
case 4: {
tmpMeta9 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 2)));
goto tmp11_done;
}
default:
tmp11_default: OMC_LABEL_UNUSED; {
modelica_metatype tmpMeta13;
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta9 = tmpMeta13;
goto tmp11_done;
}
}
goto tmp11_end;
tmp11_end: ;
}
goto goto_10;
goto_10:;
MMC_THROW_INTERNAL();
goto tmp11_done;
tmp11_done:;
}
}
_elements = tmpMeta9;
{
modelica_metatype _e;
for (tmpMeta14 = _elements; !listEmpty(tmpMeta14); tmpMeta14=MMC_CDR(tmpMeta14))
{
_e = MMC_CAR(tmpMeta14);
{
modelica_metatype tmp18_1;
tmp18_1 = _e;
{
volatile mmc_switch_type tmp18;
int tmp19;
tmp18 = 0;
for (; tmp18 < 2; tmp18++) {
switch (MMC_SWITCH_CAST(tmp18)) {
case 0: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
if (mmc__uniontype__metarecord__typedef__equal(tmp18_1,0,1) == 0) goto tmp17_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp18_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,0,6) == 0) goto tmp17_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta21,3,3) == 0) goto tmp17_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 4));
_components = tmpMeta22;
tmpMeta15 = _components;
goto tmp17_done;
}
case 1: {
modelica_metatype tmpMeta23;
tmpMeta23 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta15 = tmpMeta23;
goto tmp17_done;
}
}
goto tmp17_end;
tmp17_end: ;
}
goto goto_16;
goto_16:;
MMC_THROW_INTERNAL();
goto tmp17_done;
tmp17_done:;
}
}
_components = tmpMeta15;
{
modelica_metatype _c;
for (tmpMeta24 = _components; !listEmpty(tmpMeta24); tmpMeta24=MMC_CDR(tmpMeta24))
{
_c = MMC_CAR(tmpMeta24);
if((stringEqual(omc_AbsynUtil_componentName(threadData, _c), _componentName)))
{
_component = _c;
goto _return;
}
}
}
}
}
}
}
MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
return _component;
}
DLLExport
modelica_string omc_InteractiveUtil_getElementBinding(threadData_t *threadData, modelica_metatype _path, modelica_string _parameterName, modelica_metatype _program)
{
modelica_string _bindingStr = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _component = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _program, 0);
_component = omc_InteractiveUtil_getComponentInClass(threadData, _cls, _parameterName);
_bindingStr = omc_Dump_printExpStr(threadData, omc_InteractiveUtil_getVariableBindingInComponentitem(threadData, _component));
goto tmp2_done;
}
case 1: {
_bindingStr = _OMC_LIT16;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _bindingStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getModificationNames(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_boolean _includeRedeclares)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementArgLst;
{
modelica_metatype _names = NULL;
modelica_metatype _names2 = NULL;
modelica_metatype _res = NULL;
modelica_string _name = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _args = NULL;
modelica_metatype _elSpec = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 6;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
if (!optionNone(tmpMeta11)) goto tmp3_end;
_name = tmpMeta10;
_rest = tmpMeta8;
tmp4 += 4;
_names = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
tmpMeta12 = mmc_mk_cons(_name, _names);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,6) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 4));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 5));
if (optionNone(tmpMeta16)) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 1));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
if (!listEmpty(tmpMeta18)) goto tmp3_end;
_p = tmpMeta15;
_rest = tmpMeta14;
_name = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT0, 1, 0);
_names = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
tmpMeta19 = mmc_mk_cons(_name, _names);
tmpMeta1 = tmpMeta19;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta33;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_1);
tmpMeta21 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,0,6) == 0) goto tmp3_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 4));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 5));
if (optionNone(tmpMeta23)) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 1));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 2));
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta26,1,2) == 0) goto tmp3_end;
_p = tmpMeta22;
_args = tmpMeta25;
_rest = tmpMeta21;
_name = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT0, 1, 0);
{
modelica_metatype __omcQ_24tmpVar25;
modelica_metatype* tmp28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_string __omcQ_24tmpVar24;
modelica_integer tmp32;
modelica_metatype _n_loopVar = 0;
modelica_metatype _n;
_n_loopVar = omc_InteractiveUtil_getModificationNames(threadData, _args, _includeRedeclares);
tmpMeta29 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar25 = tmpMeta29;
tmp28 = &__omcQ_24tmpVar25;
while(1) {
tmp32 = 1;
if (!listEmpty(_n_loopVar)) {
_n = MMC_CAR(_n_loopVar);
_n_loopVar = MMC_CDR(_n_loopVar);
tmp32--;
}
if (tmp32 == 0) {
tmpMeta30 = stringAppend(_name,_OMC_LIT0);
tmpMeta31 = stringAppend(tmpMeta30,_n);
__omcQ_24tmpVar24 = tmpMeta31;
*tmp28 = mmc_mk_cons(__omcQ_24tmpVar24,0);
tmp28 = &MMC_CDR(*tmp28);
} else if (tmp32 == 1) {
break;
} else {
goto goto_2;
}
}
*tmp28 = mmc_mk_nil();
tmpMeta27 = __omcQ_24tmpVar25;
}
_names2 = tmpMeta27;
_names = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
_res = listAppend(_names2, _names);
tmpMeta33 = mmc_mk_cons(_name, _res);
tmpMeta1 = tmpMeta33;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta34 = MMC_CAR(tmp4_1);
tmpMeta35 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta34,0,6) == 0) goto tmp3_end;
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 4));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta34), 5));
if (optionNone(tmpMeta37)) goto tmp3_end;
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 1));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta38), 2));
_p = tmpMeta36;
_args = tmpMeta39;
_rest = tmpMeta35;
tmp4 += 1;
_name = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT0, 1, 0);
{
modelica_metatype __omcQ_24tmpVar27;
modelica_metatype* tmp41;
modelica_metatype tmpMeta42;
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_string __omcQ_24tmpVar26;
modelica_integer tmp45;
modelica_metatype _n_loopVar = 0;
modelica_metatype _n;
_n_loopVar = omc_InteractiveUtil_getModificationNames(threadData, _args, _includeRedeclares);
tmpMeta42 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar27 = tmpMeta42;
tmp41 = &__omcQ_24tmpVar27;
while(1) {
tmp45 = 1;
if (!listEmpty(_n_loopVar)) {
_n = MMC_CAR(_n_loopVar);
_n_loopVar = MMC_CDR(_n_loopVar);
tmp45--;
}
if (tmp45 == 0) {
tmpMeta43 = stringAppend(_name,_OMC_LIT0);
tmpMeta44 = stringAppend(tmpMeta43,_n);
__omcQ_24tmpVar26 = tmpMeta44;
*tmp41 = mmc_mk_cons(__omcQ_24tmpVar26,0);
tmp41 = &MMC_CDR(*tmp41);
} else if (tmp45 == 1) {
break;
} else {
goto goto_2;
}
}
*tmp41 = mmc_mk_nil();
tmpMeta40 = __omcQ_24tmpVar27;
}
_names2 = tmpMeta40;
_names = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
tmpMeta1 = listAppend(_names2, _names);
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta46 = MMC_CAR(tmp4_1);
tmpMeta47 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta46,1,6) == 0) goto tmp3_end;
tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 5));
_elSpec = tmpMeta48;
_rest = tmpMeta47;
if (!_includeRedeclares) goto tmp3_end;
_name = omc_AbsynUtil_elementSpecName(threadData, _elSpec);
_names = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
tmpMeta49 = mmc_mk_cons(_name, _names);
tmpMeta1 = tmpMeta49;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta50;
modelica_metatype tmpMeta51;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta50 = MMC_CAR(tmp4_1);
tmpMeta51 = MMC_CDR(tmp4_1);
_rest = tmpMeta51;
tmpMeta1 = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 7) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getModificationNames(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _includeRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_includeRedeclares);
_outStringLst = omc_InteractiveUtil_getModificationNames(threadData, _inAbsynElementArgLst, tmp1);
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getElementModifierNames(threadData_t *threadData, modelica_metatype _path, modelica_string _inElementName, modelica_metatype _inProgram3)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp6_1;
tmp6_1 = _inProgram3;
{
modelica_metatype _cdef = NULL;
modelica_metatype _elems = NULL;
modelica_string _name = NULL;
modelica_metatype _p = NULL;
modelica_metatype _mod = NULL;
modelica_metatype tmpMeta3;
modelica_metatype _args = NULL;
modelica_metatype tmpMeta4;
modelica_metatype _components = NULL;
modelica_boolean _found;
modelica_metatype _optMod = NULL;
volatile mmc_switch_type tmp6;
int tmp7;
tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
_mod = tmpMeta3;
tmpMeta4 = MMC_REFSTRUCTLIT(mmc_nil);
_args = tmpMeta4;
_found = 0;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp5_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp6 < 2; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta30;
_p = tmp6_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_elems = omc_InteractiveUtil_getElementsInClass(threadData, _cdef);
{
modelica_metatype _e;
for (tmpMeta8 = _elems; !listEmpty(tmpMeta8); tmpMeta8=MMC_CDR(tmpMeta8))
{
_e = MMC_CAR(tmpMeta8);
{
modelica_metatype tmp12_1;
tmp12_1 = _e;
{
volatile mmc_switch_type tmp12;
int tmp13;
tmp12 = 0;
for (; tmp12 < 3; tmp12++) {
switch (MMC_SWITCH_CAST(tmp12)) {
case 0: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,0,6) == 0) goto tmp11_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp12_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,2) == 0) goto tmp11_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,1,4) == 0) goto tmp11_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 4));
_name = tmpMeta16;
_args = tmpMeta18;
if (!(stringEqual(_name, _inElementName))) goto tmp11_end;
_found = 1;
tmpMeta9 = _args;
goto tmp11_done;
}
case 1: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,0,6) == 0) goto tmp11_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp12_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,3,3) == 0) goto tmp11_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 4));
_components = tmpMeta20;
{
modelica_metatype _c;
for (tmpMeta21 = _components; !listEmpty(tmpMeta21); tmpMeta21=MMC_CDR(tmpMeta21))
{
_c = MMC_CAR(tmpMeta21);
tmpMeta22 = _c;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 4));
_name = tmpMeta24;
_optMod = tmpMeta25;
if((stringEqual(_name, _inElementName)))
{
tmpMeta26 = omc_Util_getOptionOrDefault(threadData, _optMod, _OMC_LIT288);
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 2));
_mod = tmpMeta27;
_found = 1;
}
}
}
tmpMeta9 = _mod;
goto tmp11_done;
}
case 2: {
modelica_metatype tmpMeta29;
tmpMeta29 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta9 = tmpMeta29;
goto tmp11_done;
}
}
goto tmp11_end;
tmp11_end: ;
}
goto goto_10;
goto_10:;
goto goto_2;
goto tmp11_done;
tmp11_done:;
}
}
_mod = tmpMeta9;
if(_found)
{
break;
}
}
}
tmpMeta1 = omc_InteractiveUtil_getModificationNames(threadData, _mod, 1);
goto tmp5_done;
}
case 1: {
modelica_metatype tmpMeta31;
tmpMeta31 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta31;
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_2;
tmp5_done:
(void)tmp6;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp5_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp6 < 2) {
goto tmp5_top;
}
MMC_THROW_INTERNAL();
tmp5_done2:;
}
}
_outList = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getModificationValues(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath)
{
modelica_metatype _outModification = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynElementArgLst;
tmp4_2 = _inPath;
{
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _args = NULL;
modelica_string _name1 = NULL;
modelica_string _name2 = NULL;
modelica_metatype _elSpec = NULL;
modelica_metatype _elArg = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
if (optionNone(tmpMeta9)) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
_p1 = tmpMeta8;
_mod = tmpMeta10;
_p2 = tmp4_2;
if (!omc_AbsynUtil_pathEqual(threadData, _p1, _p2)) goto tmp3_end;
tmpMeta1 = _mod;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,6) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,1,1) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 5));
if (optionNone(tmpMeta17)) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 1));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
_name2 = tmpMeta11;
_p2 = tmpMeta12;
_name1 = tmpMeta16;
_args = tmpMeta19;
if (!(stringEqual(_name1, _name2))) goto tmp3_end;
_inAbsynElementArgLst = _args;
_inPath = _p2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_1);
tmpMeta21 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta20,1,6) == 0) goto tmp3_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 5));
_elArg = tmpMeta20;
_elSpec = tmpMeta22;
_p1 = tmp4_2;
if (!(stringEqual(omc_AbsynUtil_pathFirstIdent(threadData, _p1), omc_AbsynUtil_elementSpecName(threadData, _elSpec)))) goto tmp3_end;
tmpMeta23 = mmc_mk_cons(_elArg, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta24 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta23, _OMC_LIT13);
tmpMeta1 = tmpMeta24;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta25 = MMC_CAR(tmp4_1);
tmpMeta26 = MMC_CDR(tmp4_1);
_rest = tmpMeta26;
_inAbsynElementArgLst = _rest;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outModification = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outModification;
}
DLLExport
modelica_string omc_InteractiveUtil_unparseMods(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _s = NULL;
modelica_metatype _arg = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta6)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmpMeta6);
tmpMeta8 = MMC_CDR(tmpMeta6);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,6) == 0) goto tmp3_end;
_arg = tmpMeta7;
tmp1 = omc_System_escapedString(threadData, omc_Dump_unparseElementArgStr(threadData, _arg), 0);
goto tmp3_done;
}
case 1: {
tmp1 = omc_Dump_unparseModificationStr(threadData, _mod);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_s = tmp1;
_return: OMC_LABEL_UNUSED
return _s;
}
DLLExport
modelica_string omc_InteractiveUtil_getElementModifierValues(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inProgram4)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inProgram4;
{
modelica_metatype _p_class = NULL;
modelica_string _name = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _elems = NULL;
modelica_metatype _compelts = NULL;
modelica_metatype _compelts_1 = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _ident = NULL;
modelica_metatype _subident = NULL;
modelica_metatype _p = NULL;
modelica_metatype _elementArgLst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
_class_ = tmp4_1;
_ident = tmp4_2;
_subident = tmp4_3;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta6 = omc_AbsynUtil_crefToPath(threadData, _ident);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,1) == 0) goto goto_2;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_name = tmpMeta7;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_elems = omc_InteractiveUtil_getElementsInClass(threadData, _cdef);
_compelts = omc_List_map(threadData, _elems, boxvar_InteractiveUtil_getComponentitemsInElement);
_compelts_1 = omc_List_flatten(threadData, _compelts);
tmpMeta8 = omc_List_select1(threadData, _compelts_1, boxvar_InteractiveUtil_componentitemNamed, _name);
if (listEmpty(tmpMeta8)) goto goto_2;
tmpMeta9 = MMC_CAR(tmpMeta8);
tmpMeta10 = MMC_CDR(tmpMeta8);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 4));
if (optionNone(tmpMeta12)) goto goto_2;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 1));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
if (!listEmpty(tmpMeta10)) goto goto_2;
_elementArgLst = tmpMeta14;
_mod = omc_InteractiveUtil_getModificationValues(threadData, _elementArgLst, omc_AbsynUtil_crefToPath(threadData, _subident));
tmp1 = omc_InteractiveUtil_unparseMods(threadData, _mod);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getModificationValueStr(threadData_t *threadData, modelica_metatype _args, modelica_metatype _path)
{
modelica_string _value = NULL;
modelica_string _name = NULL;
modelica_metatype _rest_args = NULL;
modelica_metatype _arg = NULL;
modelica_boolean _found;
modelica_metatype _elSpec = NULL;
modelica_metatype _exp = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_boolean tmp4 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_value = _OMC_LIT16;
_rest_args = _args;
_found = 0;
while(1)
{
if(!(!_found)) break;
tmpMeta1 = _rest_args;
if (listEmpty(tmpMeta1)) MMC_THROW_INTERNAL();
tmpMeta2 = MMC_CAR(tmpMeta1);
tmpMeta3 = MMC_CDR(tmpMeta1);
_arg = tmpMeta2;
_rest_args = tmpMeta3;
{
modelica_metatype tmp7_1;
tmp7_1 = _arg;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 4; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,6) == 0) goto tmp6_end;
if (!omc_AbsynUtil_pathEqual(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arg), 4))), _path)) goto tmp6_end;
tmpMeta9 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arg), 5)));
if (optionNone(tmpMeta9)) goto goto_5;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,1,2) == 0) goto goto_5;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
_exp = tmpMeta12;
_value = omc_Dump_printExpStr(threadData, _exp);
tmp4 = 1;
goto tmp6_done;
}
case 1: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,6) == 0) goto tmp6_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,1,1) == 0) goto tmp6_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
_name = tmpMeta14;
if (!(stringEqual(_name, omc_AbsynUtil_pathFirstIdent(threadData, _path)))) goto tmp6_end;
tmpMeta15 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arg), 5)));
if (optionNone(tmpMeta15)) goto goto_5;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 1));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta16), 2));
_rest_args = tmpMeta17;
_value = omc_InteractiveUtil_getModificationValueStr(threadData, _rest_args, omc_AbsynUtil_pathRest(threadData, _path));
tmp4 = 1;
goto tmp6_done;
}
case 2: {
modelica_metatype tmpMeta18;
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,1,6) == 0) goto tmp6_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
_elSpec = tmpMeta18;
if (!(stringEqual(omc_AbsynUtil_pathFirstIdent(threadData, _path), omc_AbsynUtil_elementSpecName(threadData, _elSpec)))) goto tmp6_end;
_value = omc_System_escapedString(threadData, omc_Dump_unparseElementArgStr(threadData, _arg), 0);
tmp4 = 1;
goto tmp6_done;
}
case 3: {
tmp4 = 0;
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
MMC_THROW_INTERNAL();
goto tmp6_done;
tmp6_done:;
}
}
_found = tmp4;
}
_return: OMC_LABEL_UNUSED
return _value;
}
DLLExport
modelica_string omc_InteractiveUtil_getElementModifierValue(threadData_t *threadData, modelica_metatype _classRef, modelica_metatype _varRef, modelica_metatype _subModRef, modelica_metatype _program)
{
modelica_string _valueStr = NULL;
modelica_metatype _cls_path = NULL;
modelica_string _name = NULL;
modelica_string _elName = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _args = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _elems = NULL;
modelica_boolean _found;
modelica_metatype _components = NULL;
modelica_metatype _optMod = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_args = tmpMeta1;
_found = 0;
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta28;
_cls_path = omc_AbsynUtil_crefToPath(threadData, _classRef);
_elName = omc_AbsynUtil_crefIdent(threadData, _varRef);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cls_path, _program, 0);
_elems = omc_InteractiveUtil_getElementsInClass(threadData, _cls);
{
modelica_metatype _e;
for (tmpMeta6 = _elems; !listEmpty(tmpMeta6); tmpMeta6=MMC_CDR(tmpMeta6))
{
_e = MMC_CAR(tmpMeta6);
{
modelica_metatype tmp10_1;
tmp10_1 = _e;
{
volatile mmc_switch_type tmp10;
int tmp11;
tmp10 = 0;
for (; tmp10 < 3; tmp10++) {
switch (MMC_SWITCH_CAST(tmp10)) {
case 0: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,0,6) == 0) goto tmp9_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,0,2) == 0) goto tmp9_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 3));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,1,4) == 0) goto tmp9_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 4));
_name = tmpMeta14;
_args = tmpMeta16;
if (!(stringEqual(_name, _elName))) goto tmp9_end;
_found = 1;
tmpMeta7 = _args;
goto tmp9_done;
}
case 1: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,0,6) == 0) goto tmp9_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,3,3) == 0) goto tmp9_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 4));
_components = tmpMeta18;
{
modelica_metatype _c;
for (tmpMeta19 = _components; !listEmpty(tmpMeta19); tmpMeta19=MMC_CDR(tmpMeta19))
{
_c = MMC_CAR(tmpMeta19);
tmpMeta20 = _c;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 4));
_name = tmpMeta22;
_optMod = tmpMeta23;
if((stringEqual(_name, _elName)))
{
tmpMeta24 = omc_Util_getOptionOrDefault(threadData, _optMod, _OMC_LIT288);
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 2));
_args = tmpMeta25;
_found = 1;
}
}
}
tmpMeta7 = _args;
goto tmp9_done;
}
case 2: {
modelica_metatype tmpMeta27;
tmpMeta27 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta7 = tmpMeta27;
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
goto_8:;
goto goto_2;
goto tmp9_done;
tmp9_done:;
}
}
_args = tmpMeta7;
if(_found)
{
break;
}
}
}
if(_found)
{
_valueStr = omc_InteractiveUtil_getModificationValueStr(threadData, _args, omc_AbsynUtil_crefToPath(threadData, _subModRef));
}
else
{
_valueStr = _OMC_LIT16;
}
goto tmp3_done;
}
case 1: {
_valueStr = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _valueStr;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_findPathModification(threadData_t *threadData, modelica_metatype _path, modelica_metatype _lst)
{
modelica_boolean _found;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _lst;
{
modelica_metatype _p = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_p = tmpMeta8;
if (!omc_AbsynUtil_pathEqual(threadData, _path, _p)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_1);
tmpMeta10 = MMC_CDR(tmp4_1);
_rest = tmpMeta10;
_lst = _rest;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_found = tmp1;
_return: OMC_LABEL_UNUSED
return _found;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_findPathModification(threadData_t *threadData, modelica_metatype _path, modelica_metatype _lst)
{
modelica_boolean _found;
modelica_metatype out_found;
_found = omc_InteractiveUtil_findPathModification(threadData, _path, _lst);
out_found = mmc_mk_icon(_found);
return out_found;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElementargs(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath, modelica_metatype _inModification)
{
modelica_metatype _outAbsynElementArgLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynElementArgLst;
tmp4_2 = _inPath;
tmp4_3 = _inModification;
{
modelica_metatype _mod = NULL;
modelica_boolean _f;
modelica_metatype _each_ = NULL;
modelica_string _name = NULL;
modelica_string _submodident = NULL;
modelica_string _name1 = NULL;
modelica_string _name2 = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _args_1 = NULL;
modelica_metatype _args = NULL;
modelica_metatype _res = NULL;
modelica_metatype _submods = NULL;
modelica_metatype _m = NULL;
modelica_metatype _eqMod = NULL;
modelica_metatype _info = NULL;
modelica_metatype _p = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 14; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,0) == 0) goto tmp3_end;
tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (!listEmpty(tmp4_1)) goto tmp3_end;
_mod = tmp4_3;
tmp4 += 11;
tmpMeta10 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT70, _inPath, mmc_mk_some(_mod), mmc_mk_none(), _OMC_LIT18);
tmpMeta9 = mmc_mk_cons(tmpMeta10, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_integer tmp17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_boolean tmp28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (!listEmpty(tmpMeta12)) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,0,0) == 0) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmp4_1);
tmpMeta15 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,6) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmp17 = mmc_unbox_integer(tmpMeta16);
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,1,1) == 0) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
if (optionNone(tmpMeta21)) goto tmp3_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 1));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
if (listEmpty(tmpMeta23)) goto tmp3_end;
tmpMeta24 = MMC_CAR(tmpMeta23);
tmpMeta25 = MMC_CDR(tmpMeta23);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 7));
_submodident = tmpMeta11;
_f = tmp17;
_each_ = tmpMeta18;
_p = tmpMeta19;
_name = tmpMeta20;
_submods = tmpMeta23;
_cmt = tmpMeta26;
_info = tmpMeta27;
_rest = tmpMeta15;
tmp4 += 2;
tmp28 = (stringEqual(_name, _submodident));
if (1 != tmp28) goto goto_2;
tmpMeta30 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _submods, _OMC_LIT13);
tmpMeta31 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, _p, mmc_mk_some(tmpMeta30), _cmt, _info);
tmpMeta29 = mmc_mk_cons(tmpMeta31, _rest);
tmpMeta1 = tmpMeta29;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_boolean tmp42;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (!listEmpty(tmpMeta33)) goto tmp3_end;
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta34,0,0) == 0) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta35 = MMC_CAR(tmp4_1);
tmpMeta36 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta35,0,6) == 0) goto tmp3_end;
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta37,1,1) == 0) goto tmp3_end;
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 2));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta35), 5));
if (optionNone(tmpMeta39)) goto tmp3_end;
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta39), 1));
tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta40), 2));
if (!listEmpty(tmpMeta41)) goto tmp3_end;
_submodident = tmpMeta32;
_name = tmpMeta38;
_rest = tmpMeta36;
tmp4 += 1;
tmp42 = (stringEqual(_name, _submodident));
if (1 != tmp42) goto goto_2;
tmpMeta1 = _rest;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_integer tmp49;
modelica_metatype tmpMeta50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
modelica_metatype tmpMeta53;
modelica_metatype tmpMeta54;
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_boolean tmp58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
modelica_metatype tmpMeta61;
modelica_metatype tmpMeta62;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (!listEmpty(tmpMeta44)) goto tmp3_end;
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta45,1,2) == 0) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta46 = MMC_CAR(tmp4_1);
tmpMeta47 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta46,0,6) == 0) goto tmp3_end;
tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 2));
tmp49 = mmc_unbox_integer(tmpMeta48);
tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 3));
tmpMeta51 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta51,1,1) == 0) goto tmp3_end;
tmpMeta52 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta51), 2));
tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 5));
if (optionNone(tmpMeta53)) goto tmp3_end;
tmpMeta54 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta53), 1));
tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta54), 2));
tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 6));
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 7));
_submodident = tmpMeta43;
_eqMod = tmpMeta45;
_f = tmp49;
_each_ = tmpMeta50;
_name = tmpMeta52;
_submods = tmpMeta55;
_cmt = tmpMeta56;
_info = tmpMeta57;
_rest = tmpMeta47;
tmp58 = (stringEqual(_name, _submodident));
if (1 != tmp58) goto goto_2;
tmpMeta60 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta61 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _submods, _eqMod);
tmpMeta62 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, tmpMeta60, mmc_mk_some(tmpMeta61), _cmt, _info);
tmpMeta59 = mmc_mk_cons(tmpMeta62, _rest);
tmpMeta1 = tmpMeta59;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta63;
modelica_metatype tmpMeta64;
modelica_metatype tmpMeta65;
modelica_metatype tmpMeta66;
modelica_integer tmp67;
modelica_metatype tmpMeta68;
modelica_metatype tmpMeta69;
modelica_metatype tmpMeta70;
modelica_metatype tmpMeta71;
modelica_metatype tmpMeta72;
modelica_boolean tmp73;
modelica_metatype tmpMeta74;
modelica_metatype tmpMeta75;
modelica_metatype tmpMeta76;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta63 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta64 = MMC_CAR(tmp4_1);
tmpMeta65 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta64,0,6) == 0) goto tmp3_end;
tmpMeta66 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta64), 2));
tmp67 = mmc_unbox_integer(tmpMeta66);
tmpMeta68 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta64), 3));
tmpMeta69 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta64), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta69,1,1) == 0) goto tmp3_end;
tmpMeta70 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta69), 2));
tmpMeta71 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta64), 6));
tmpMeta72 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta64), 7));
_submodident = tmpMeta63;
_f = tmp67;
_each_ = tmpMeta68;
_name = tmpMeta70;
_cmt = tmpMeta71;
_info = tmpMeta72;
_rest = tmpMeta65;
_mod = tmp4_3;
tmp4 += 5;
tmp73 = (stringEqual(_name, _submodident));
if (1 != tmp73) goto goto_2;
tmpMeta75 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta76 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, tmpMeta75, mmc_mk_some(_mod), _cmt, _info);
tmpMeta74 = mmc_mk_cons(tmpMeta76, _rest);
tmpMeta1 = tmpMeta74;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta77;
modelica_metatype tmpMeta78;
modelica_metatype tmpMeta79;
modelica_metatype tmpMeta80;
modelica_metatype tmpMeta81;
modelica_boolean tmp82;
tmpMeta77 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (!listEmpty(tmpMeta77)) goto tmp3_end;
tmpMeta78 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta78,0,0) == 0) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta79 = MMC_CAR(tmp4_1);
tmpMeta80 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta79,0,6) == 0) goto tmp3_end;
tmpMeta81 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta79), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta81,0,2) == 0) goto tmp3_end;
_p1 = tmpMeta81;
_rest = tmpMeta80;
_p2 = tmp4_2;
tmp82 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp82) goto goto_2;
tmpMeta1 = _rest;
goto tmp3_done;
}
case 7: {
modelica_metatype tmpMeta83;
modelica_metatype tmpMeta84;
modelica_metatype tmpMeta85;
modelica_metatype tmpMeta86;
modelica_metatype tmpMeta87;
modelica_metatype tmpMeta88;
modelica_metatype tmpMeta89;
modelica_boolean tmp90;
modelica_boolean tmp91;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta83 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta84 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (!listEmpty(tmpMeta84)) goto tmp3_end;
tmpMeta85 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta85,0,0) == 0) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta86 = MMC_CAR(tmp4_1);
tmpMeta87 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta86,0,6) == 0) goto tmp3_end;
tmpMeta88 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta86), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta88,0,2) == 0) goto tmp3_end;
tmpMeta89 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta88), 2));
_p = tmp4_2;
_name2 = tmpMeta83;
_name1 = tmpMeta89;
_rest = tmpMeta87;
tmp4 += 3;
tmp90 = (stringEqual(_name1, _name2));
if (1 != tmp90) goto goto_2;
tmp91 = omc_InteractiveUtil_findPathModification(threadData, _p, _rest);
if (0 != tmp91) goto goto_2;
tmpMeta1 = _rest;
goto tmp3_done;
}
case 8: {
modelica_metatype tmpMeta92;
modelica_metatype tmpMeta93;
modelica_metatype tmpMeta94;
modelica_metatype tmpMeta95;
modelica_metatype tmpMeta96;
modelica_metatype tmpMeta97;
modelica_metatype tmpMeta98;
modelica_integer tmp99;
modelica_metatype tmpMeta100;
modelica_metatype tmpMeta101;
modelica_metatype tmpMeta102;
modelica_metatype tmpMeta103;
modelica_metatype tmpMeta104;
modelica_metatype tmpMeta105;
modelica_metatype tmpMeta106;
modelica_metatype tmpMeta107;
modelica_metatype tmpMeta108;
modelica_boolean tmp109;
modelica_metatype tmpMeta110;
modelica_metatype tmpMeta111;
modelica_metatype tmpMeta112;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta92 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta93 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta94 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (!listEmpty(tmpMeta94)) goto tmp3_end;
tmpMeta95 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta95,0,0) == 0) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta96 = MMC_CAR(tmp4_1);
tmpMeta97 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta96,0,6) == 0) goto tmp3_end;
tmpMeta98 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta96), 2));
tmp99 = mmc_unbox_integer(tmpMeta98);
tmpMeta100 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta96), 3));
tmpMeta101 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta96), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta101,1,1) == 0) goto tmp3_end;
tmpMeta102 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta101), 2));
tmpMeta103 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta96), 5));
if (optionNone(tmpMeta103)) goto tmp3_end;
tmpMeta104 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta103), 1));
tmpMeta105 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta104), 2));
tmpMeta106 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta104), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta106,0,0) == 0) goto tmp3_end;
tmpMeta107 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta96), 6));
tmpMeta108 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta96), 7));
_name1 = tmpMeta92;
_p1 = tmpMeta93;
_f = tmp99;
_each_ = tmpMeta100;
_p = tmpMeta101;
_name2 = tmpMeta102;
_args = tmpMeta105;
_cmt = tmpMeta107;
_info = tmpMeta108;
_rest = tmpMeta97;
tmp4 += 1;
tmp109 = (stringEqual(_name1, _name2));
if (1 != tmp109) goto goto_2;
tmpMeta110 = omc_InteractiveUtil_setSubmodifierInElementargs(threadData, _args, _p1, _OMC_LIT288);
if (!listEmpty(tmpMeta110)) goto goto_2;
tmpMeta112 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, _p, mmc_mk_none(), _cmt, _info);
tmpMeta111 = mmc_mk_cons(tmpMeta112, _rest);
tmpMeta1 = tmpMeta111;
goto tmp3_done;
}
case 9: {
modelica_metatype tmpMeta113;
modelica_metatype tmpMeta114;
modelica_metatype tmpMeta115;
modelica_metatype tmpMeta116;
modelica_metatype tmpMeta117;
modelica_metatype tmpMeta118;
modelica_metatype tmpMeta119;
modelica_integer tmp120;
modelica_metatype tmpMeta121;
modelica_metatype tmpMeta122;
modelica_metatype tmpMeta123;
modelica_metatype tmpMeta124;
modelica_metatype tmpMeta125;
modelica_metatype tmpMeta126;
modelica_metatype tmpMeta127;
modelica_metatype tmpMeta128;
modelica_metatype tmpMeta129;
modelica_boolean tmp130;
modelica_metatype tmpMeta131;
modelica_metatype tmpMeta132;
modelica_metatype tmpMeta133;
modelica_metatype tmpMeta134;
modelica_metatype tmpMeta135;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta113 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta114 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta115 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (!listEmpty(tmpMeta115)) goto tmp3_end;
tmpMeta116 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta116,0,0) == 0) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta117 = MMC_CAR(tmp4_1);
tmpMeta118 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta117,0,6) == 0) goto tmp3_end;
tmpMeta119 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta117), 2));
tmp120 = mmc_unbox_integer(tmpMeta119);
tmpMeta121 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta117), 3));
tmpMeta122 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta117), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta122,1,1) == 0) goto tmp3_end;
tmpMeta123 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta122), 2));
tmpMeta124 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta117), 5));
if (optionNone(tmpMeta124)) goto tmp3_end;
tmpMeta125 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta124), 1));
tmpMeta126 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta125), 2));
tmpMeta127 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta125), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta127,1,2) == 0) goto tmp3_end;
tmpMeta128 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta117), 6));
tmpMeta129 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta117), 7));
_name1 = tmpMeta113;
_p1 = tmpMeta114;
_f = tmp120;
_each_ = tmpMeta121;
_p = tmpMeta122;
_name2 = tmpMeta123;
_args = tmpMeta126;
_eqMod = tmpMeta127;
_cmt = tmpMeta128;
_info = tmpMeta129;
_rest = tmpMeta118;
tmp130 = (stringEqual(_name1, _name2));
if (1 != tmp130) goto goto_2;
tmpMeta131 = omc_InteractiveUtil_setSubmodifierInElementargs(threadData, _args, _p1, _OMC_LIT288);
if (!listEmpty(tmpMeta131)) goto goto_2;
tmpMeta133 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta134 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta133, _eqMod);
tmpMeta135 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, _p, mmc_mk_some(tmpMeta134), _cmt, _info);
tmpMeta132 = mmc_mk_cons(tmpMeta135, _rest);
tmpMeta1 = tmpMeta132;
goto tmp3_done;
}
case 10: {
modelica_metatype tmpMeta136;
modelica_metatype tmpMeta137;
modelica_metatype tmpMeta138;
modelica_metatype tmpMeta139;
modelica_metatype tmpMeta140;
modelica_integer tmp141;
modelica_metatype tmpMeta142;
modelica_metatype tmpMeta143;
modelica_metatype tmpMeta144;
modelica_metatype tmpMeta145;
modelica_metatype tmpMeta146;
modelica_metatype tmpMeta147;
modelica_metatype tmpMeta148;
modelica_metatype tmpMeta149;
modelica_metatype tmpMeta150;
modelica_boolean tmp151;
modelica_metatype tmpMeta152;
modelica_metatype tmpMeta153;
modelica_metatype tmpMeta154;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta136 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta137 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta138 = MMC_CAR(tmp4_1);
tmpMeta139 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta138,0,6) == 0) goto tmp3_end;
tmpMeta140 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta138), 2));
tmp141 = mmc_unbox_integer(tmpMeta140);
tmpMeta142 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta138), 3));
tmpMeta143 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta138), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta143,1,1) == 0) goto tmp3_end;
tmpMeta144 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta143), 2));
tmpMeta145 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta138), 5));
if (optionNone(tmpMeta145)) goto tmp3_end;
tmpMeta146 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta145), 1));
tmpMeta147 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta146), 2));
tmpMeta148 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta146), 3));
tmpMeta149 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta138), 6));
tmpMeta150 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta138), 7));
_name1 = tmpMeta136;
_p1 = tmpMeta137;
_f = tmp141;
_each_ = tmpMeta142;
_p = tmpMeta143;
_name2 = tmpMeta144;
_args = tmpMeta147;
_eqMod = tmpMeta148;
_cmt = tmpMeta149;
_info = tmpMeta150;
_rest = tmpMeta139;
_mod = tmp4_3;
tmp151 = (stringEqual(_name1, _name2));
if (1 != tmp151) goto goto_2;
_args_1 = omc_InteractiveUtil_setSubmodifierInElementargs(threadData, _args, _p1, _mod);
tmpMeta153 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _args_1, _eqMod);
tmpMeta154 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, _p, mmc_mk_some(tmpMeta153), _cmt, _info);
tmpMeta152 = mmc_mk_cons(tmpMeta154, _rest);
tmpMeta1 = tmpMeta152;
goto tmp3_done;
}
case 11: {
modelica_metatype tmpMeta155;
modelica_metatype tmpMeta156;
modelica_metatype tmpMeta157;
modelica_integer tmp158;
modelica_metatype tmpMeta159;
modelica_metatype tmpMeta160;
modelica_metatype tmpMeta161;
modelica_metatype tmpMeta162;
modelica_metatype tmpMeta163;
modelica_metatype tmpMeta164;
modelica_boolean tmp165;
modelica_metatype tmpMeta166;
modelica_metatype tmpMeta167;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta155 = MMC_CAR(tmp4_1);
tmpMeta156 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta155,0,6) == 0) goto tmp3_end;
tmpMeta157 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta155), 2));
tmp158 = mmc_unbox_integer(tmpMeta157);
tmpMeta159 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta155), 3));
tmpMeta160 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta155), 4));
tmpMeta161 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta155), 5));
if (optionNone(tmpMeta161)) goto tmp3_end;
tmpMeta162 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta161), 1));
tmpMeta163 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta155), 6));
tmpMeta164 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta155), 7));
_f = tmp158;
_each_ = tmpMeta159;
_p1 = tmpMeta160;
_cmt = tmpMeta163;
_info = tmpMeta164;
_rest = tmpMeta156;
_p2 = tmp4_2;
_mod = tmp4_3;
tmp165 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp165) goto goto_2;
tmpMeta167 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, _p1, mmc_mk_some(_mod), _cmt, _info);
tmpMeta166 = mmc_mk_cons(tmpMeta167, _rest);
tmpMeta1 = tmpMeta166;
goto tmp3_done;
}
case 12: {
modelica_metatype tmpMeta168;
modelica_metatype tmpMeta169;
modelica_metatype tmpMeta170;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta168 = MMC_CAR(tmp4_1);
tmpMeta169 = MMC_CDR(tmp4_1);
_m = tmpMeta168;
_rest = tmpMeta169;
_p = tmp4_2;
_mod = tmp4_3;
_res = omc_InteractiveUtil_setSubmodifierInElementargs(threadData, _rest, _p, _mod);
tmpMeta170 = mmc_mk_cons(_m, _res);
tmpMeta1 = tmpMeta170;
goto tmp3_done;
}
case 13: {
fputs(MMC_STRINGDATA(_OMC_LIT289),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 14) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementArgLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementArgLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInClass(threadData_t *threadData, modelica_metatype _inElementName, modelica_metatype _inClass, modelica_metatype _inMod)
{
modelica_metatype _outClass = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _optMod = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _body = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_cls = _inClass;
{
modelica_metatype tmp4_1;
tmp4_1 = _cls;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta20;
_body = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 7)));
{
modelica_metatype tmp9_1;
tmp9_1 = _body;
{
volatile mmc_switch_type tmp9;
int tmp10;
tmp9 = 0;
for (; tmp9 < 1; tmp9++) {
switch (MMC_SWITCH_CAST(tmp9)) {
case 0: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp9_1,1,4) == 0) goto tmp8_end;
tmpMeta11 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), _OMC_LIT13);
tmpMeta12 = omc_Interactive_propagateMod(threadData, omc_AbsynUtil_crefToPath(threadData, _inElementName), _inMod, mmc_mk_some(tmpMeta11));
if (optionNone(tmpMeta12)) goto goto_7;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 1));
_mod = tmpMeta13;
{
modelica_metatype tmp18_1;
tmp18_1 = _mod;
{
volatile mmc_switch_type tmp18;
int tmp19;
tmp18 = 0;
for (; tmp18 < 1; tmp18++) {
switch (MMC_SWITCH_CAST(tmp18)) {
case 0: {
tmpMeta15 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mod), 2)));
goto tmp17_done;
}
}
goto tmp17_end;
tmp17_end: ;
}
goto goto_16;
goto_16:;
goto goto_7;
goto tmp17_done;
tmp17_done:;
}
}
tmpMeta14 = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta14), MMC_UNTAGPTR(_body), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta14))[4] = tmpMeta15;
_body = tmpMeta14;
tmpMeta6 = _body;
goto tmp8_done;
}
}
goto tmp8_end;
tmp8_end: ;
}
goto goto_7;
goto_7:;
goto goto_2;
goto tmp8_done;
tmp8_done:;
}
}
_body = tmpMeta6;
tmpMeta20 = MMC_TAGPTR(mmc_alloc_words(9));
memcpy(MMC_UNTAGPTR(tmpMeta20), MMC_UNTAGPTR(_cls), 9*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta20))[7] = _body;
_cls = tmpMeta20;
tmpMeta1 = _cls;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElementSpec(threadData_t *threadData, modelica_metatype _inElementName, modelica_metatype _inElSpec, modelica_metatype _inMod)
{
modelica_metatype _outElSpec = NULL;
modelica_metatype _elSpec = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_elSpec = _inElSpec;
{
modelica_metatype tmp4_1;
tmp4_1 = _elSpec;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta6), MMC_UNTAGPTR(_elSpec), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta6))[3] = omc_InteractiveUtil_setSubmodifierInClass(threadData, _inElementName, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elSpec), 3))), _inMod);
_elSpec = tmpMeta6;
tmpMeta1 = _elSpec;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElSpec = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_boolean _inFound, modelica_metatype _inElementName, modelica_metatype _inMod, modelica_boolean *out_outFound, modelica_boolean *out_outContinue)
{
jmp_buf *old_mmc_jumper = threadData->mmc_jumper;
modelica_metatype _outElement = NULL;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _args_old = NULL;
modelica_metatype _args_new = NULL;
modelica_metatype _eqmod_old = NULL;
modelica_metatype _eqmod_new = NULL;
modelica_string _el_id = NULL;
modelica_string _id = NULL;
modelica_metatype _el = NULL;
modelica_metatype _elSpec = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outElement = _inElement;
_id = _OMC_LIT16;
_el = _inElement;
_el_id = omc_AbsynUtil_crefFirstIdent(threadData, _inElementName);
_elSpec = omc_AbsynUtil_elementSpec(threadData, _inElement);
if(omc_AbsynUtil_isClassOrComponentElementSpec(threadData, _elSpec))
{
_id = omc_AbsynUtil_elementSpecName(threadData, _elSpec);
}
else
{
_outFound = 0;
_outContinue = 1;
goto _return;
}
if((stringEqual(_el_id, _id)))
{
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
{
modelica_metatype tmp8_1;
tmp8_1 = _el;
{
volatile mmc_switch_type tmp8;
int tmp9;
tmp8 = 0;
for (; tmp8 < 1; tmp8++) {
switch (MMC_SWITCH_CAST(tmp8)) {
case 0: {
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,0,6) == 0) goto tmp7_end;
tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_el), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[5] = omc_InteractiveUtil_setSubmodifierInElementSpec(threadData, _inElementName, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 5))), _inMod);
_el = tmpMeta10;
tmpMeta5 = _el;
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
goto_6:;
goto goto_1;
goto tmp7_done;
tmp7_done:;
}
}
_outElement = tmpMeta5;
_outFound = 1;
_outContinue = 0;
goto tmp2_done;
}
case 1: {
_outFound = 0;
_outContinue = 1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
}
else
{
_outFound = 0;
_outContinue = 1;
}
_return: OMC_LABEL_UNUSED
if (out_outFound) { *out_outFound = _outFound; }
if (out_outContinue) { *out_outContinue = _outContinue; }
threadData->mmc_jumper = old_mmc_jumper;
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inFound, modelica_metatype _inElementName, modelica_metatype _inMod, modelica_metatype *out_outFound, modelica_metatype *out_outContinue)
{
modelica_integer tmp1;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _outElement = NULL;
tmp1 = mmc_unbox_integer(_inFound);
_outElement = omc_InteractiveUtil_setSubmodifierInElement(threadData, _inElement, tmp1, _inElementName, _inMod, &_outFound, &_outContinue);
if (out_outFound) { *out_outFound = mmc_mk_icon(_outFound); }
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outElement;
}
static modelica_metatype closure5_InteractiveUtil_setSubmodifierInElement(threadData_t *thData, modelica_metatype closure, modelica_metatype inElement, modelica_metatype inFound, modelica_metatype tmp7, modelica_metatype tmp8)
{
modelica_metatype inElementName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype inMod = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_setSubmodifierInElement(thData, inElement, inFound, inElementName, inMod, tmp7, tmp8);
}static modelica_metatype closure6_Interactive_setComponentSubmodifierInCompitems(threadData_t *thData, modelica_metatype closure, modelica_metatype inComponents, modelica_metatype inFound, modelica_metatype tmp13, modelica_metatype tmp14)
{
modelica_metatype inComponentName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype inMod = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_Interactive_setComponentSubmodifierInCompitems(thData, inComponents, inFound, inComponentName, inMod, tmp13, tmp14);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementSubmodifierInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementName, modelica_metatype _inMod)
{
modelica_metatype _outClass = NULL;
modelica_boolean _found;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
_found = 0;
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
modelica_integer tmp6;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
tmpMeta9 = mmc_mk_box2(0, _inElementName, _inMod);
tmpMeta10 = omc_AbsynUtil_traverseClassElements(threadData, _inClass, (modelica_fnptr) mmc_mk_box2(0,closure5_InteractiveUtil_setSubmodifierInElement,tmpMeta9), mmc_mk_boolean(0), &tmpMeta5);
_outClass = tmpMeta10;
tmp6 = mmc_unbox_integer(tmpMeta5);
_found = tmp6;
goto tmp2_done;
}
case 1: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
if((!_found))
{
tmpMeta15 = mmc_mk_box2(0, _inElementName, _inMod);
tmpMeta16 = omc_AbsynUtil_traverseClassComponents(threadData, _inClass, (modelica_fnptr) mmc_mk_box2(0,closure6_Interactive_setComponentSubmodifierInCompitems,tmpMeta15), mmc_mk_boolean(0), &tmpMeta11);
_outClass = tmpMeta16;
tmp12 = mmc_unbox_integer(tmpMeta11);
if (1 != tmp12) MMC_THROW_INTERNAL();
}
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_setElementModifier(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementName, modelica_metatype _inMod, modelica_metatype _inProgram, modelica_string *out_outResult)
{
modelica_metatype _outProgram = NULL;
modelica_string _outResult = NULL;
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cls = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
_p_class = omc_AbsynUtil_crefToPath(threadData, _inClass);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _inProgram, 0);
_cls = omc_InteractiveUtil_setElementSubmodifierInClass(threadData, _cls, _inElementName, _inMod);
tmpMeta5 = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta6 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta5, _within_);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta6, _inProgram, 0);
_outResult = _OMC_LIT31;
goto tmp2_done;
}
case 1: {
_outProgram = _inProgram;
_outResult = _OMC_LIT32;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outResult) { *out_outResult = _outResult; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_stripModifiersKeepRedeclares(threadData_t *threadData, modelica_metatype _inMod)
{
modelica_metatype _outMod = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inMod;
{
modelica_metatype _m = NULL;
modelica_metatype _ea = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta1 = mmc_mk_none();
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta17;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_ea = tmpMeta7;
{
modelica_metatype __omcQ_24tmpVar29;
modelica_metatype* tmp9;
modelica_metatype tmpMeta10;
modelica_metatype __omcQ_24tmpVar28;
modelica_integer tmp11;
modelica_metatype _e_loopVar = 0;
modelica_boolean tmp12 = 0;
modelica_metatype _e;
_e_loopVar = _ea;
tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar29 = tmpMeta10;
tmp9 = &__omcQ_24tmpVar29;
while(1) {
tmp11 = 1;
while (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
{
modelica_metatype tmp15_1;
tmp15_1 = _e;
{
volatile mmc_switch_type tmp15;
int tmp16;
tmp15 = 0;
for (; tmp15 < 2; tmp15++) {
switch (MMC_SWITCH_CAST(tmp15)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp15_1,1,6) == 0) goto tmp14_end;
tmp12 = 1;
goto tmp14_done;
}
case 1: {
tmp12 = 0;
goto tmp14_done;
}
}
goto tmp14_end;
tmp14_end: ;
}
goto goto_13;
goto_13:;
goto goto_2;
goto tmp14_done;
tmp14_done:;
}
}
if (tmp12) {
tmp11--;
break;
}
}
if (tmp11 == 0) {
__omcQ_24tmpVar28 = _e;
*tmp9 = mmc_mk_cons(__omcQ_24tmpVar28,0);
tmp9 = &MMC_CDR(*tmp9);
} else if (tmp11 == 1) {
break;
} else {
goto goto_2;
}
}
*tmp9 = mmc_mk_nil();
tmpMeta8 = __omcQ_24tmpVar29;
}
_ea = tmpMeta8;
tmpMeta17 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _ea, _OMC_LIT13);
_m = tmpMeta17;
tmpMeta1 = mmc_mk_some(_m);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outMod = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outMod;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_clearComponentModifiersInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inFound, modelica_string _inComponentName, modelica_boolean _keepRedeclares, modelica_boolean *out_outFound, modelica_boolean *out_outContinue)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _item = NULL;
modelica_metatype _rest_items = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _args_old = NULL;
modelica_metatype _args_new = NULL;
modelica_metatype _eqmod_old = NULL;
modelica_metatype _eqmod_new = NULL;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_outComponents = tmpMeta1;
_rest_items = _inComponents;
while(1)
{
if(!(!listEmpty(_rest_items))) break;
tmpMeta2 = _rest_items;
if (listEmpty(tmpMeta2)) MMC_THROW_INTERNAL();
tmpMeta3 = MMC_CAR(tmpMeta2);
tmpMeta4 = MMC_CDR(tmpMeta2);
_item = tmpMeta3;
_rest_items = tmpMeta4;
if((stringEqual(omc_AbsynUtil_componentName(threadData, _item), _inComponentName)))
{
{
modelica_metatype tmp7_1;
tmp7_1 = _item;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 1; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_comp = tmpMeta9;
tmpMeta10 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta10), MMC_UNTAGPTR(_comp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta10))[4] = ((!_keepRedeclares)?mmc_mk_none():omc_InteractiveUtil_stripModifiersKeepRedeclares(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 4)))));
_comp = tmpMeta10;
tmpMeta11 = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta11), MMC_UNTAGPTR(_item), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta11))[2] = _comp;
_item = tmpMeta11;
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
MMC_THROW_INTERNAL();
goto tmp6_done;
tmp6_done:;
}
}
;
tmpMeta12 = mmc_mk_cons(_item, _rest_items);
_outComponents = omc_List_append__reverse(threadData, _outComponents, tmpMeta12);
_outFound = 1;
_outContinue = 0;
goto _return;
}
tmpMeta13 = mmc_mk_cons(_item, _outComponents);
_outComponents = tmpMeta13;
}
_outComponents = _inComponents;
_outFound = 0;
_outContinue = 1;
_return: OMC_LABEL_UNUSED
if (out_outFound) { *out_outFound = _outFound; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_clearComponentModifiersInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inFound, modelica_metatype _inComponentName, modelica_metatype _keepRedeclares, modelica_metatype *out_outFound, modelica_metatype *out_outContinue)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta3;
tmp1 = mmc_unbox_integer(_inFound);
tmp2 = mmc_unbox_integer(_keepRedeclares);
_outComponents = omc_InteractiveUtil_clearComponentModifiersInCompitems(threadData, _inComponents, tmp1, _inComponentName, tmp2, &_outFound, &_outContinue);
if (out_outFound) { *out_outFound = mmc_mk_icon(_outFound); }
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outComponents;
}
static modelica_metatype closure7_InteractiveUtil_clearComponentModifiersInCompitems(threadData_t *thData, modelica_metatype closure, modelica_metatype inComponents, modelica_metatype inFound, modelica_metatype tmp3, modelica_metatype tmp4)
{
modelica_string inComponentName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype keepRedeclares = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_clearComponentModifiersInCompitems(thData, inComponents, inFound, inComponentName, keepRedeclares, tmp3, tmp4);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_clearComponentModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inComponentName, modelica_boolean _keepRedeclares)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
modelica_integer tmp2;
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
tmpMeta5 = mmc_mk_box2(0, _inComponentName, mmc_mk_boolean(_keepRedeclares));
tmpMeta6 = omc_AbsynUtil_traverseClassComponents(threadData, _inClass, (modelica_fnptr) mmc_mk_box2(0,closure7_InteractiveUtil_clearComponentModifiersInCompitems,tmpMeta5), mmc_mk_boolean(0), &tmpMeta1);
_outClass = tmpMeta6;
tmp2 = mmc_unbox_integer(tmpMeta1);
if (1 != tmp2) MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_clearComponentModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _keepRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outClass = omc_InteractiveUtil_clearComponentModifiersInClass(threadData, _inClass, _inComponentName, tmp1);
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_removeElementModifiers(threadData_t *threadData, modelica_metatype _path, modelica_string _inComponentName, modelica_metatype _inProgram, modelica_boolean _keepRedeclares, modelica_boolean *out_outResult)
{
modelica_metatype _outProgram = NULL;
modelica_boolean _outResult;
modelica_metatype _within_ = NULL;
modelica_metatype _cls = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
_within_ = omc_InteractiveUtil_buildWithin(threadData, _path);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
_cls = omc_InteractiveUtil_clearComponentModifiersInClass(threadData, _cls, _inComponentName, _keepRedeclares);
tmpMeta5 = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta6 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta5, _within_);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta6, _inProgram, 0);
_outResult = 1;
goto tmp2_done;
}
case 1: {
_outProgram = _inProgram;
_outResult = 0;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outResult) { *out_outResult = _outResult; }
return _outProgram;
}
modelica_metatype boxptr_InteractiveUtil_removeElementModifiers(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inComponentName, modelica_metatype _inProgram, modelica_metatype _keepRedeclares, modelica_metatype *out_outResult)
{
modelica_integer tmp1;
modelica_boolean _outResult;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outProgram = omc_InteractiveUtil_removeElementModifiers(threadData, _path, _inComponentName, _inProgram, tmp1, &_outResult);
if (out_outResult) { *out_outResult = mmc_mk_icon(_outResult); }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInElement(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _ext = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,3) == 0) goto tmp3_end;
_ext = tmpMeta6;
tmpMeta1 = _ext;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElementSpec = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementItemLst;
{
modelica_metatype _el = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_el = tmpMeta9;
_rest = tmpMeta8;
_elt = omc_InteractiveUtil_getExtendsElementspecInElement(threadData, _el);
_res = omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData, _rest);
tmpMeta10 = mmc_mk_cons(_elt, _res);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta11 = MMC_CAR(tmp4_1);
tmpMeta12 = MMC_CDR(tmp4_1);
_rest = tmpMeta12;
tmpMeta1 = omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementSpecLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _lst2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elts = tmpMeta9;
_rest = tmpMeta8;
tmp4 += 1;
_lst1 = omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData, _rest);
_lst2 = omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData, _elts);
tmpMeta1 = listAppend(_lst1, _lst2);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_1);
tmpMeta11 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,1) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_elts = tmpMeta12;
_rest = tmpMeta11;
_lst1 = omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData, _rest);
_lst2 = omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData, _elts);
tmpMeta1 = listAppend(_lst1, _lst2);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta13 = MMC_CAR(tmp4_1);
tmpMeta14 = MMC_CDR(tmp4_1);
_rest = tmpMeta14;
tmpMeta1 = omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementSpecLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _parts = NULL;
modelica_metatype _eltArg = NULL;
modelica_metatype _tp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,5) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
_parts = tmpMeta7;
tmp4 += 2;
tmpMeta1 = omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData, _parts);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_parts = tmpMeta9;
tmp4 += 1;
tmpMeta1 = omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData, _parts);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,4) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,0,2) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
_tp = tmpMeta12;
_eltArg = tmpMeta13;
tmpMeta15 = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _tp, _eltArg, mmc_mk_none());
tmpMeta14 = mmc_mk_cons(tmpMeta15, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta16;
tmpMeta16 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementSpecLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extendsName(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementSpec;
{
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta6;
tmpMeta1 = _path;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outPath = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_extendsElementspecNamed(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inElementSpec;
tmp4_2 = _inPath;
{
modelica_metatype _extpath = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_extpath = tmpMeta6;
_path = tmp4_2;
tmp1 = omc_AbsynUtil_pathEqual(threadData, _path, _extpath);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_extendsElementspecNamed(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_extendsElementspecNamed(threadData, _inElementSpec, _inPath);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeExtendsFullyQualified(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inEnv)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inElementSpec;
tmp4_2 = _inEnv;
{
modelica_metatype _path_1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _earg = NULL;
modelica_metatype _env = NULL;
modelica_metatype _annOpt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_path = tmpMeta6;
_earg = tmpMeta7;
_annOpt = tmpMeta8;
_env = tmp4_2;
omc_Inst_makeFullyQualified(threadData, omc_FCore_emptyCache(threadData), _env, _path ,&_path_1);
tmpMeta9 = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _path_1, _earg, _annOpt);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElementSpec = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isModifierfinal(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynElementArgLst;
tmp4_2 = _inPath;
{
modelica_boolean _f;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _args = NULL;
modelica_string _name1 = NULL;
modelica_string _name2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_integer tmp9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmp9 = mmc_unbox_integer(tmpMeta8);
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 4));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
if (optionNone(tmpMeta11)) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
_f = tmp9;
_p1 = tmpMeta10;
_p2 = tmp4_2;
if (!omc_AbsynUtil_pathEqual(threadData, _p1, _p2)) goto tmp3_end;
tmp1 = _f;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta15 = MMC_CAR(tmp4_1);
tmpMeta16 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,0,6) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,1,1) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 5));
if (optionNone(tmpMeta19)) goto tmp3_end;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 1));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
_name2 = tmpMeta13;
_p2 = tmpMeta14;
_name1 = tmpMeta18;
_args = tmpMeta21;
if (!(stringEqual(_name1, _name2))) goto tmp3_end;
_inAbsynElementArgLst = _args;
_inPath = _p2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta22 = MMC_CAR(tmp4_1);
tmpMeta23 = MMC_CDR(tmp4_1);
_rest = tmpMeta23;
_inAbsynElementArgLst = _rest;
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isModifierfinal(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isModifierfinal(threadData, _inAbsynElementArgLst, _inPath);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_isExtendsModifierFinal(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inProgram4)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inProgram4;
{
modelica_metatype _p_class = NULL;
modelica_metatype _name = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _env = NULL;
modelica_metatype _exts = NULL;
modelica_metatype _exts_1 = NULL;
modelica_metatype _extmod = NULL;
modelica_boolean _finalPrefix;
modelica_metatype _class_ = NULL;
modelica_metatype _inherit_name = NULL;
modelica_metatype _subident = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
_class_ = tmp4_1;
_inherit_name = tmp4_2;
_subident = tmp4_3;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_name = omc_AbsynUtil_crefToPath(threadData, _inherit_name);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_env = omc_InteractiveUtil_getClassEnv(threadData, _p, _p_class);
_exts = omc_InteractiveUtil_getExtendsElementspecInClass(threadData, _cdef);
_exts_1 = omc_List_map1(threadData, _exts, boxvar_InteractiveUtil_makeExtendsFullyQualified, _env);
tmpMeta6 = omc_List_select1(threadData, _exts_1, boxvar_InteractiveUtil_extendsElementspecNamed, _name);
if (listEmpty(tmpMeta6)) goto goto_2;
tmpMeta7 = MMC_CAR(tmpMeta6);
tmpMeta8 = MMC_CDR(tmpMeta6);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,1,3) == 0) goto goto_2;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
if (!listEmpty(tmpMeta8)) goto goto_2;
_extmod = tmpMeta9;
_finalPrefix = omc_InteractiveUtil_isModifierfinal(threadData, _extmod, omc_AbsynUtil_crefToPath(threadData, _subident));
tmp1 = (_finalPrefix?_OMC_LIT102:_OMC_LIT103);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getExtendsModifierValue(threadData_t *threadData, modelica_metatype _classRef, modelica_metatype _extendsRef, modelica_metatype _varRef, modelica_metatype _program)
{
modelica_string _valueStr = NULL;
modelica_metatype _cls_path = NULL;
modelica_metatype _name = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _args = NULL;
modelica_metatype _env = NULL;
modelica_metatype _exts = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
_cls_path = omc_AbsynUtil_crefToPath(threadData, _classRef);
_name = omc_AbsynUtil_crefToPath(threadData, _extendsRef);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cls_path, _program, 0);
_env = omc_InteractiveUtil_getClassEnv(threadData, _program, _cls_path);
{
modelica_metatype __omcQ_24tmpVar31;
modelica_metatype* tmp6;
modelica_metatype tmpMeta7;
modelica_metatype __omcQ_24tmpVar30;
modelica_integer tmp8;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = omc_InteractiveUtil_getExtendsElementspecInClass(threadData, _cls);
tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar31 = tmpMeta7;
tmp6 = &__omcQ_24tmpVar31;
while(1) {
tmp8 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp8--;
}
if (tmp8 == 0) {
__omcQ_24tmpVar30 = omc_InteractiveUtil_makeExtendsFullyQualified(threadData, _e, _env);
*tmp6 = mmc_mk_cons(__omcQ_24tmpVar30,0);
tmp6 = &MMC_CDR(*tmp6);
} else if (tmp8 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp6 = mmc_mk_nil();
tmpMeta5 = __omcQ_24tmpVar31;
}
_exts = tmpMeta5;
tmpMeta9 = omc_List_select1(threadData, _exts, boxvar_InteractiveUtil_extendsElementspecNamed, _name);
if (listEmpty(tmpMeta9)) goto goto_1;
tmpMeta10 = MMC_CAR(tmpMeta9);
tmpMeta11 = MMC_CDR(tmpMeta9);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,3) == 0) goto goto_1;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
if (!listEmpty(tmpMeta11)) goto goto_1;
_args = tmpMeta12;
_valueStr = omc_InteractiveUtil_getModificationValueStr(threadData, _args, omc_AbsynUtil_crefToPath(threadData, _varRef));
goto tmp2_done;
}
case 1: {
_valueStr = _OMC_LIT16;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _valueStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inElement;
tmp4_2 = _inPath;
tmp4_3 = _inComponentRef;
tmp4_4 = _inModification;
tmp4_5 = _inEnv;
{
modelica_boolean _f;
modelica_metatype _r = NULL;
modelica_metatype _i = NULL;
modelica_metatype _path = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _eargs = NULL;
modelica_metatype _eargs_1 = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_metatype _submod = NULL;
modelica_metatype _env = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _annOpt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_boolean tmp16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta6);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,3) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_f = tmp7;
_r = tmpMeta8;
_i = tmpMeta9;
_path = tmpMeta11;
_eargs = tmpMeta12;
_annOpt = tmpMeta13;
_info = tmpMeta14;
_constr = tmpMeta15;
_inherit = tmp4_2;
_submod = tmp4_3;
_mod = tmp4_4;
_env = tmp4_5;
omc_Inst_makeFullyQualified(threadData, omc_FCore_emptyCache(threadData), _env, _path ,&_path_1);
tmp16 = omc_AbsynUtil_pathEqual(threadData, _inherit, _path_1);
if (1 != tmp16) goto goto_2;
_eargs_1 = omc_InteractiveUtil_setSubmodifierInElementargs(threadData, _eargs, omc_AbsynUtil_crefToPath(threadData, _submod), _mod);
tmpMeta17 = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _path, _eargs_1, _annOpt);
tmpMeta18 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _i, tmpMeta17, _info, _constr);
tmpMeta1 = tmpMeta18;
goto tmp3_done;
}
case 1: {
tmpMeta1 = _inElement;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElement = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inPath;
tmp4_3 = _inComponentRef;
tmp4_4 = _inModification;
tmp4_5 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elt_1 = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _submod = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elitem = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elt = tmpMeta9;
_rest = tmpMeta8;
_inherit = tmp4_2;
_submod = tmp4_3;
_mod = tmp4_4;
_env = tmp4_5;
_res = omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData, _rest, _inherit, _submod, _mod, _env);
_elt_1 = omc_InteractiveUtil_setExtendsSubmodifierInElement(threadData, _elt, _inherit, _submod, _mod, _env);
tmpMeta11 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta10 = mmc_mk_cons(tmpMeta11, _res);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_elitem = tmpMeta12;
_rest = tmpMeta13;
_inherit = tmp4_2;
_submod = tmp4_3;
_mod = tmp4_4;
_env = tmp4_5;
_res = omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData, _rest, _inherit, _submod, _mod, _env);
tmpMeta14 = mmc_mk_cons(_elitem, _res);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inPath;
tmp4_3 = _inComponentRef;
tmp4_4 = _inModification;
tmp4_5 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _submod = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elts = tmpMeta9;
_rest = tmpMeta8;
_inherit = tmp4_2;
_submod = tmp4_3;
_mod = tmp4_4;
_env = tmp4_5;
tmp4 += 1;
_res = omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData, _rest, _inherit, _submod, _mod, _env);
_elts_1 = omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData, _elts, _inherit, _submod, _mod, _env);
tmpMeta11 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta10 = mmc_mk_cons(tmpMeta11, _res);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,1) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_elts = tmpMeta14;
_rest = tmpMeta13;
_inherit = tmp4_2;
_submod = tmp4_3;
_mod = tmp4_4;
_env = tmp4_5;
_res = omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData, _rest, _inherit, _submod, _mod, _env);
_elts_1 = omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData, _elts, _inherit, _submod, _mod, _env);
tmpMeta16 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta15 = mmc_mk_cons(tmpMeta16, _res);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta17 = MMC_CAR(tmp4_1);
tmpMeta18 = MMC_CDR(tmp4_1);
_elt = tmpMeta17;
_rest = tmpMeta18;
_inherit = tmp4_2;
_submod = tmp4_3;
_mod = tmp4_4;
_env = tmp4_5;
_res = omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData, _rest, _inherit, _submod, _mod, _env);
tmpMeta19 = mmc_mk_cons(_elt, _res);
tmpMeta1 = tmpMeta19;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_metatype tmp4_4;modelica_metatype tmp4_5;
tmp4_1 = _inClass;
tmp4_2 = _inPath;
tmp4_3 = _inComponentRef;
tmp4_4 = _inModification;
tmp4_5 = _inEnv;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _id = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _inherit_name = NULL;
modelica_metatype _submod = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _env = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_inherit_name = tmp4_2;
_submod = tmp4_3;
_mod = tmp4_4;
_env = tmp4_5;
_parts_1 = omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData, _parts, _inherit_name, _submod, _mod, _env);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _cmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta21, _file_info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_r = tmpMeta30;
_bcname = tmpMeta32;
_modif = tmpMeta33;
_cmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_inherit_name = tmp4_2;
_submod = tmp4_3;
_mod = tmp4_4;
_env = tmp4_5;
_parts_1 = omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData, _parts, _inherit_name, _submod, _mod, _env);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts_1, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta38, _file_info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsModifierValue(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inModification4, modelica_metatype _inProgram5, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inModification4;
tmp4_5 = _inProgram5;
{
modelica_metatype _p_class = NULL;
modelica_metatype _inherit_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _inheritclass = NULL;
modelica_metatype _subident = NULL;
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_class_ = tmp4_1;
_inheritclass = tmp4_2;
_subident = tmp4_3;
_mod = tmp4_4;
_p = tmp4_5;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_inherit_class = omc_AbsynUtil_crefToPath(threadData, _inheritclass);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_env = omc_InteractiveUtil_getClassEnv(threadData, _p, _p_class);
_cdef_1 = omc_InteractiveUtil_setExtendsSubmodifierInClass(threadData, _cdef, _inherit_class, _subident, _mod, _env);
tmpMeta6 = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta7, _p, 0);
tmpMeta[0+0] = _newp;
tmp1_c1 = _OMC_LIT31;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inProgram5;
tmp1_c1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inElement;
tmp4_2 = _inPath;
tmp4_3 = _inEnv;
{
modelica_boolean _f;
modelica_metatype _r = NULL;
modelica_metatype _i = NULL;
modelica_metatype _path = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _eargs = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_metatype _env = NULL;
modelica_metatype _annOpt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_boolean tmp16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_boolean tmp27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta6);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,3) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_f = tmp7;
_r = tmpMeta8;
_i = tmpMeta9;
_path = tmpMeta11;
_eargs = tmpMeta12;
_annOpt = tmpMeta13;
_info = tmpMeta14;
_constr = tmpMeta15;
_inherit = tmp4_2;
_env = tmp4_3;
omc_Inst_makeFullyQualified(threadData, omc_FCore_emptyCache(threadData), _env, _path ,&_path_1);
tmp16 = omc_AbsynUtil_pathEqual(threadData, _inherit, _path_1);
if (1 != tmp16) goto goto_2;
tmp27 = (modelica_boolean)(!_keepRedeclares);
if(tmp27)
{
tmpMeta17 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta28 = tmpMeta17;
}
else
{
{
modelica_metatype __omcQ_24tmpVar33;
modelica_metatype* tmp19;
modelica_metatype tmpMeta20;
modelica_metatype __omcQ_24tmpVar32;
modelica_integer tmp21;
modelica_metatype _e_loopVar = 0;
modelica_boolean tmp22 = 0;
modelica_metatype _e;
_e_loopVar = _eargs;
tmpMeta20 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar33 = tmpMeta20;
tmp19 = &__omcQ_24tmpVar33;
while(1) {
tmp21 = 1;
while (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
{
modelica_metatype tmp25_1;
tmp25_1 = _e;
{
volatile mmc_switch_type tmp25;
int tmp26;
tmp25 = 0;
for (; tmp25 < 2; tmp25++) {
switch (MMC_SWITCH_CAST(tmp25)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp25_1,1,6) == 0) goto tmp24_end;
tmp22 = 1;
goto tmp24_done;
}
case 1: {
tmp22 = 0;
goto tmp24_done;
}
}
goto tmp24_end;
tmp24_end: ;
}
goto goto_23;
goto_23:;
goto goto_2;
goto tmp24_done;
tmp24_done:;
}
}
if (tmp22) {
tmp21--;
break;
}
}
if (tmp21 == 0) {
__omcQ_24tmpVar32 = _e;
*tmp19 = mmc_mk_cons(__omcQ_24tmpVar32,0);
tmp19 = &MMC_CDR(*tmp19);
} else if (tmp21 == 1) {
break;
} else {
goto goto_2;
}
}
*tmp19 = mmc_mk_nil();
tmpMeta18 = __omcQ_24tmpVar33;
}
tmpMeta28 = tmpMeta18;
}
_eargs = tmpMeta28;
tmpMeta29 = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _path, _eargs, _annOpt);
tmpMeta30 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _i, tmpMeta29, _info, _constr);
tmpMeta1 = tmpMeta30;
goto tmp3_done;
}
case 1: {
tmpMeta1 = _inElement;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElement = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outElement = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outElement = omc_InteractiveUtil_removeExtendsModifiersInElement(threadData, _inElement, _inPath, _inEnv, tmp1);
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inPath;
tmp4_3 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elt_1 = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elitem = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elt = tmpMeta9;
_rest = tmpMeta8;
_inherit = tmp4_2;
_env = tmp4_3;
_res = omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData, _rest, _inherit, _env, _keepRedeclares);
_elt_1 = omc_InteractiveUtil_removeExtendsModifiersInElement(threadData, _elt, _inherit, _env, _keepRedeclares);
tmpMeta11 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta10 = mmc_mk_cons(tmpMeta11, _res);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_elitem = tmpMeta12;
_rest = tmpMeta13;
_inherit = tmp4_2;
_env = tmp4_3;
_res = omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData, _rest, _inherit, _env, _keepRedeclares);
tmpMeta14 = mmc_mk_cons(_elitem, _res);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outAbsynElementItemLst = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outAbsynElementItemLst = omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData, _inAbsynElementItemLst, _inPath, _inEnv, tmp1);
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inPath;
tmp4_3 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elts = tmpMeta9;
_rest = tmpMeta8;
_inherit = tmp4_2;
_env = tmp4_3;
tmp4 += 1;
_res = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _rest, _inherit, _env, _keepRedeclares);
_elts_1 = omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData, _elts, _inherit, _env, _keepRedeclares);
tmpMeta11 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta10 = mmc_mk_cons(tmpMeta11, _res);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,1) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_elts = tmpMeta14;
_rest = tmpMeta13;
_inherit = tmp4_2;
_env = tmp4_3;
_res = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _rest, _inherit, _env, _keepRedeclares);
_elts_1 = omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData, _elts, _inherit, _env, _keepRedeclares);
tmpMeta16 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta15 = mmc_mk_cons(tmpMeta16, _res);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta17 = MMC_CAR(tmp4_1);
tmpMeta18 = MMC_CDR(tmp4_1);
_elt = tmpMeta17;
_rest = tmpMeta18;
_inherit = tmp4_2;
_env = tmp4_3;
_res = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _rest, _inherit, _env, _keepRedeclares);
tmpMeta19 = mmc_mk_cons(_elt, _res);
tmpMeta1 = tmpMeta19;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outAbsynClassPartLst = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outAbsynClassPartLst = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _inAbsynClassPartLst, _inPath, _inEnv, tmp1);
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inClass;
tmp4_2 = _inPath;
tmp4_3 = _inEnv;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _id = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _inherit_name = NULL;
modelica_metatype _env = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_inherit_name = tmp4_2;
_env = tmp4_3;
_parts_1 = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _parts, _inherit_name, _env, _keepRedeclares);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _cmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta21, _file_info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_r = tmpMeta30;
_bcname = tmpMeta32;
_modif = tmpMeta33;
_cmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_inherit_name = tmp4_2;
_env = tmp4_3;
_parts_1 = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _parts, _inherit_name, _env, _keepRedeclares);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts_1, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta38, _file_info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outClass = omc_InteractiveUtil_removeExtendsModifiersInClass(threadData, _inClass, _inPath, _inEnv, tmp1);
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_removeExtendsModifiers(threadData_t *threadData, modelica_metatype _inClassPath, modelica_metatype _inBaseClassPath, modelica_metatype _inProgram, modelica_boolean _keepRedeclares, modelica_boolean *out_outResult)
{
modelica_metatype _outProgram = NULL;
modelica_boolean _outResult;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inClassPath;
tmp4_2 = _inBaseClassPath;
tmp4_3 = _inProgram;
{
modelica_metatype _p_class = NULL;
modelica_metatype _inherit_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_p_class = tmp4_1;
_inherit_class = tmp4_2;
_p = tmp4_3;
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_env = omc_InteractiveUtil_getClassEnv(threadData, _p, _p_class);
_cdef_1 = omc_InteractiveUtil_removeExtendsModifiersInClass(threadData, _cdef, _inherit_class, _env, _keepRedeclares);
tmpMeta6 = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta7, _p, 0);
tmpMeta[0+0] = _newp;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inProgram;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outResult = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outResult) { *out_outResult = _outResult; }
return _outProgram;
}
modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiers(threadData_t *threadData, modelica_metatype _inClassPath, modelica_metatype _inBaseClassPath, modelica_metatype _inProgram, modelica_metatype _keepRedeclares, modelica_metatype *out_outResult)
{
modelica_integer tmp1;
modelica_boolean _outResult;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outProgram = omc_InteractiveUtil_removeExtendsModifiers(threadData, _inClassPath, _inBaseClassPath, _inProgram, tmp1, &_outResult);
if (out_outResult) { *out_outResult = mmc_mk_icon(_outResult); }
return _outProgram;
}
DLLExport
modelica_boolean omc_InteractiveUtil_setSourceFile(threadData_t *threadData, modelica_metatype _path, modelica_string _inString, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _success;
modelica_metatype _outProgram = NULL;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inString;
tmp4_2 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_string _filename = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
_filename = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _path);
_cdef_1 = omc_AbsynUtil_setClassFilename(threadData, _cdef, _filename);
tmpMeta6 = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta7 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta6, _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta7, _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
tmp1_c0 = 0;
tmpMeta[0+1] = _inProgram;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_success = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _success;
}
modelica_metatype boxptr_InteractiveUtil_setSourceFile(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inString, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _success;
modelica_metatype out_success;
_success = omc_InteractiveUtil_setSourceFile(threadData, _path, _inString, _inProgram, out_outProgram);
out_success = mmc_mk_icon(_success);
return out_success;
}
DLLExport
modelica_string omc_InteractiveUtil_getSourceFile(threadData_t *threadData, modelica_metatype _p_class, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_p = tmp4_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
tmp1 = omc_AbsynUtil_classFilename(threadData, _cdef);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_appendNonEmptyStrings(threadData_t *threadData, modelica_string _inString1, modelica_string _inString2, modelica_string _inString3)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;modelica_string tmp4_2;modelica_string tmp4_3;
tmp4_1 = _inString1;
tmp4_2 = _inString2;
tmp4_3 = _inString3;
{
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_string _delimiter = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
if (0 != MMC_STRLEN(tmp4_2) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_2)) != 0) goto tmp3_end;
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
case 1: {
if (0 != MMC_STRLEN(tmp4_2) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_2)) != 0) goto tmp3_end;
_s1 = tmp4_1;
tmp1 = _s1;
goto tmp3_done;
}
case 2: {
if (0 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
_s2 = tmp4_2;
tmp1 = _s2;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta6;
_s1 = tmp4_1;
_s2 = tmp4_2;
_delimiter = tmp4_3;
tmpMeta6 = mmc_mk_cons(_s1, mmc_mk_cons(_delimiter, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta6);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getImportString(threadData_t *threadData, modelica_metatype _inImport)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inImport;
{
modelica_string _path_str = NULL;
modelica_string _id = NULL;
modelica_metatype _path = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta5;
_path = tmpMeta6;
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmpMeta7 = mmc_mk_cons(_OMC_LIT290, mmc_mk_cons(_id, mmc_mk_cons(_OMC_LIT291, mmc_mk_cons(_path_str, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp1 = stringAppendList(tmpMeta7);
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta8;
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmpMeta9 = stringAppend(_OMC_LIT292,_path_str);
tmp1 = tmpMeta9;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta10;
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmpMeta11 = stringAppend(_OMC_LIT293,_path_str);
tmp1 = tmpMeta11;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getCrefInfo(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _p_class = NULL;
modelica_metatype _cdef = NULL;
modelica_string _filename = NULL;
modelica_string _str_sline = NULL;
modelica_string _str_scol = NULL;
modelica_string _str_eline = NULL;
modelica_string _str_ecol = NULL;
modelica_string _str_readonly = NULL;
modelica_boolean _isReadOnly;
modelica_integer _sline;
modelica_integer _scol;
modelica_integer _eline;
modelica_integer _ecol;
modelica_metatype _class_ = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_integer tmp14;
modelica_metatype tmpMeta15;
modelica_integer tmp16;
modelica_metatype tmpMeta17;
modelica_integer tmp18;
modelica_metatype tmpMeta19;
_class_ = tmp4_1;
_p = tmp4_2;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
tmpMeta6 = _cdef;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 8));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
tmp14 = mmc_unbox_integer(tmpMeta13);
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 6));
tmp16 = mmc_unbox_integer(tmpMeta15);
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 7));
tmp18 = mmc_unbox_integer(tmpMeta17);
_filename = tmpMeta8;
_isReadOnly = tmp10;
_sline = tmp12;
_scol = tmp14;
_eline = tmp16;
_ecol = tmp18;
_filename = omc_Testsuite_friendly(threadData, _filename);
_str_sline = intString(_sline);
_str_scol = intString(_scol);
_str_eline = intString(_eline);
_str_ecol = intString(_ecol);
_str_readonly = omc_InteractiveUtil_selectString(threadData, _isReadOnly, _OMC_LIT294, _OMC_LIT295);
tmpMeta19 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_filename, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_str_readonly, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_str_sline, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_str_scol, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_str_eline, mmc_mk_cons(_OMC_LIT43, mmc_mk_cons(_str_ecol, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))))))))))))));
tmp1 = stringAppendList(tmpMeta19);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_selectString(threadData_t *threadData, modelica_boolean _inSelector, modelica_string _inString2, modelica_string _inString3)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_boolean tmp4_1;modelica_string tmp4_2;modelica_string tmp4_3;
tmp4_1 = _inSelector;
tmp4_2 = _inString2;
tmp4_3 = _inString3;
{
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (1 != tmp4_1) goto tmp3_end;
_s1 = tmp4_2;
tmp1 = _s1;
goto tmp3_done;
}
case 1: {
if (0 != tmp4_1) goto tmp3_end;
_s2 = tmp4_3;
tmp1 = _s2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_selectString(threadData_t *threadData, modelica_metatype _inSelector, modelica_metatype _inString2, modelica_metatype _inString3)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inSelector);
_outString = omc_InteractiveUtil_selectString(threadData, tmp1, _inString2, _inString3);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementIsField(threadData_t *threadData, modelica_string _inString)
{
modelica_metatype _outIsField = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;
tmp4_1 = _inString;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT240;
goto tmp3_done;
}
case 1: {
if (8 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT331), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT240;
goto tmp3_done;
}
case 2: {
if (5 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT332), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
if((!(omc_Flags_getConfigEnum(threadData, _OMC_LIT329) == ((modelica_integer) 5))))
{
omc_Error_addMessage(threadData, _OMC_LIT298, _OMC_LIT300);
goto goto_2;
}
tmpMeta1 = _OMC_LIT330;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsField = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outIsField;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementCausality(threadData_t *threadData, modelica_string _inString)
{
modelica_metatype _outDirection = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;
tmp4_1 = _inString;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT239;
goto tmp3_done;
}
case 1: {
if (5 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT335), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT333;
goto tmp3_done;
}
case 2: {
if (6 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT336), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT334;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outDirection = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outDirection;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementVariability(threadData_t *threadData, modelica_string _inString)
{
modelica_metatype _outVariability = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;
tmp4_1 = _inString;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT248;
goto tmp3_done;
}
case 1: {
if (8 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT245), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT246;
goto tmp3_done;
}
case 2: {
if (9 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT236), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT238;
goto tmp3_done;
}
case 3: {
if (8 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT242), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT243;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outVariability = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outVariability;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementParallelism(threadData_t *threadData, modelica_string _inString)
{
modelica_metatype _outParallelism = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;
tmp4_1 = _inString;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT16), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT237;
goto tmp3_done;
}
case 1: {
if (9 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT339), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT337;
goto tmp3_done;
}
case 2: {
if (8 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT340), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT338;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outParallelism = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outParallelism;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementAttributes(threadData_t *threadData, modelica_metatype _inElementAttributes1, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_string _inString2, modelica_string _inString3, modelica_string _inString4, modelica_string _inString5)
{
modelica_metatype _outElementAttributes = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;modelica_boolean tmp4_3;modelica_string tmp4_4;modelica_string tmp4_5;modelica_string tmp4_6;modelica_string tmp4_7;
tmp4_1 = _inElementAttributes1;
tmp4_2 = _inFlow;
tmp4_3 = _inStream;
tmp4_4 = _inString2;
tmp4_5 = _inString3;
tmp4_6 = _inString4;
tmp4_7 = _inString5;
{
modelica_metatype _pa_1 = NULL;
modelica_metatype _va_1 = NULL;
modelica_metatype _cau_1 = NULL;
modelica_metatype _fi_1 = NULL;
modelica_metatype _dim = NULL;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_string _va = NULL;
modelica_string _cau = NULL;
modelica_string _prl = NULL;
modelica_string _fi = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_dim = tmpMeta6;
_flowPrefix = tmp4_2;
_streamPrefix = tmp4_3;
_prl = tmp4_4;
_va = tmp4_5;
_cau = tmp4_6;
_fi = tmp4_7;
_pa_1 = omc_InteractiveUtil_setElementParallelism(threadData, _prl);
_va_1 = omc_InteractiveUtil_setElementVariability(threadData, _va);
_cau_1 = omc_InteractiveUtil_setElementCausality(threadData, _cau);
_fi_1 = omc_InteractiveUtil_setElementIsField(threadData, _fi);
tmpMeta7 = mmc_mk_box8(3, &Absyn_ElementAttributes_ATTR__desc, mmc_mk_boolean(_flowPrefix), mmc_mk_boolean(_streamPrefix), _pa_1, _va_1, _cau_1, _fi_1, _dim);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElementAttributes = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementAttributes;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setElementAttributes(threadData_t *threadData, modelica_metatype _inElementAttributes1, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inString2, modelica_metatype _inString3, modelica_metatype _inString4, modelica_metatype _inString5)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outElementAttributes = NULL;
tmp1 = mmc_unbox_integer(_inFlow);
tmp2 = mmc_unbox_integer(_inStream);
_outElementAttributes = omc_InteractiveUtil_setElementAttributes(threadData, _inElementAttributes1, tmp1, tmp2, _inString2, _inString3, _inString4, _inString5);
return _outElementAttributes;
}
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_itemsContainCompname(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_string _inIdent)
{
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_string tmp3_2;
tmp3_1 = _inAbsynComponentItemLst;
tmp3_2 = _inIdent;
{
modelica_string _cr1 = NULL;
modelica_string _cr2 = NULL;
modelica_string _cr = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_boolean tmp9;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta5 = MMC_CAR(tmp3_1);
tmpMeta6 = MMC_CDR(tmp3_1);
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_cr1 = tmpMeta8;
_cr2 = tmp3_2;
tmp9 = (stringEqual(_cr1, _cr2));
if (1 != tmp9) goto goto_1;
goto tmp2_done;
}
case 1: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta10 = MMC_CAR(tmp3_1);
tmpMeta11 = MMC_CDR(tmp3_1);
_rest = tmpMeta11;
_cr = tmp3_2;
omc_InteractiveUtil_itemsContainCompname(threadData, _rest, _cr);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_string _inIdent2, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_string _inString3, modelica_string _inString4, modelica_string _inString5, modelica_string _inString6)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;volatile modelica_string tmp4_5;volatile modelica_string tmp4_6;volatile modelica_string tmp4_7;volatile modelica_string tmp4_8;
tmp4_1 = _inElementSpec1;
tmp4_2 = _inIdent2;
tmp4_3 = _inFlow;
tmp4_4 = _inStream;
tmp4_5 = _inString3;
tmp4_6 = _inString4;
tmp4_7 = _inString5;
tmp4_8 = _inString6;
{
modelica_metatype _attr_1 = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _path = NULL;
modelica_metatype _items = NULL;
modelica_string _cr = NULL;
modelica_string _va = NULL;
modelica_string _cau = NULL;
modelica_string _prl = NULL;
modelica_string _isf = NULL;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_attr = tmpMeta6;
_path = tmpMeta7;
_items = tmpMeta8;
_cr = tmp4_2;
_flowPrefix = tmp4_3;
_streamPrefix = tmp4_4;
_prl = tmp4_5;
_va = tmp4_6;
_cau = tmp4_7;
_isf = tmp4_8;
omc_InteractiveUtil_itemsContainCompname(threadData, _items, _cr);
_attr_1 = omc_InteractiveUtil_setElementAttributes(threadData, _attr, _flowPrefix, _streamPrefix, _prl, _va, _cau, _isf);
tmpMeta9 = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr_1, _path, _items);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 1: {
tmpMeta1 = _inElementSpec1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElementSpec = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inIdent2, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inString3, modelica_metatype _inString4, modelica_metatype _inString5, modelica_metatype _inString6)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outElementSpec = NULL;
tmp1 = mmc_unbox_integer(_inFlow);
tmp2 = mmc_unbox_integer(_inStream);
_outElementSpec = omc_InteractiveUtil_setComponentPropertiesInElementspec(threadData, _inElementSpec1, _inIdent2, tmp1, tmp2, _inString3, _inString4, _inString5, _inString6);
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setInnerOuterAttributes(threadData_t *threadData, modelica_metatype _inBooleanLst)
{
modelica_metatype _outInnerOuter = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inBooleanLst;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_integer tmp11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_1);
tmpMeta7 = MMC_CDR(tmp4_1);
tmp8 = mmc_unbox_integer(tmpMeta6);
if (0 != tmp8) goto tmp3_end;
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmpMeta7);
tmpMeta10 = MMC_CDR(tmpMeta7);
tmp11 = mmc_unbox_integer(tmpMeta9);
if (0 != tmp11) goto tmp3_end;
if (!listEmpty(tmpMeta10)) goto tmp3_end;
tmpMeta1 = _OMC_LIT77;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_integer tmp14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_integer tmp17;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
tmp14 = mmc_unbox_integer(tmpMeta12);
if (1 != tmp14) goto tmp3_end;
if (listEmpty(tmpMeta13)) goto tmp3_end;
tmpMeta15 = MMC_CAR(tmpMeta13);
tmpMeta16 = MMC_CDR(tmpMeta13);
tmp17 = mmc_unbox_integer(tmpMeta15);
if (0 != tmp17) goto tmp3_end;
if (!listEmpty(tmpMeta16)) goto tmp3_end;
tmpMeta1 = _OMC_LIT255;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_integer tmp20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_integer tmp23;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta18 = MMC_CAR(tmp4_1);
tmpMeta19 = MMC_CDR(tmp4_1);
tmp20 = mmc_unbox_integer(tmpMeta18);
if (0 != tmp20) goto tmp3_end;
if (listEmpty(tmpMeta19)) goto tmp3_end;
tmpMeta21 = MMC_CAR(tmpMeta19);
tmpMeta22 = MMC_CDR(tmpMeta19);
tmp23 = mmc_unbox_integer(tmpMeta21);
if (1 != tmp23) goto tmp3_end;
if (!listEmpty(tmpMeta22)) goto tmp3_end;
tmpMeta1 = _OMC_LIT256;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_integer tmp26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta24 = MMC_CAR(tmp4_1);
tmpMeta25 = MMC_CDR(tmp4_1);
tmp26 = mmc_unbox_integer(tmpMeta24);
if (1 != tmp26) goto tmp3_end;
if (listEmpty(tmpMeta25)) goto tmp3_end;
tmpMeta27 = MMC_CAR(tmpMeta25);
tmpMeta28 = MMC_CDR(tmpMeta25);
tmp29 = mmc_unbox_integer(tmpMeta27);
if (1 != tmp29) goto tmp3_end;
if (!listEmpty(tmpMeta28)) goto tmp3_end;
tmpMeta1 = _OMC_LIT341;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outInnerOuter = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outInnerOuter;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setReplaceableKeywordAttributes(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption, modelica_boolean _inBoolean)
{
modelica_metatype _outAbsynRedeclareKeywordsOption = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;
tmp4_1 = _inAbsynRedeclareKeywordsOption;
tmp4_2 = _inBoolean;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 8; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != tmp4_2) goto tmp3_end;
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta1 = mmc_mk_none();
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
if (0 != tmp4_2) goto tmp3_end;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,0) == 0) goto tmp3_end;
tmpMeta1 = mmc_mk_none();
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta7;
if (0 != tmp4_2) goto tmp3_end;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,2,0) == 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT343;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta8;
if (0 != tmp4_2) goto tmp3_end;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,0) == 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT343;
goto tmp3_done;
}
case 4: {
if (1 != tmp4_2) goto tmp3_end;
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta1 = _OMC_LIT252;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta9;
if (1 != tmp4_2) goto tmp3_end;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,0) == 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT345;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta10;
if (1 != tmp4_2) goto tmp3_end;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,0) == 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT252;
goto tmp3_done;
}
case 7: {
modelica_metatype tmpMeta11;
if (1 != tmp4_2) goto tmp3_end;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,2,0) == 0) goto tmp3_end;
tmpMeta1 = _OMC_LIT345;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynRedeclareKeywordsOption = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynRedeclareKeywordsOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setReplaceableKeywordAttributes(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption, modelica_metatype _inBoolean)
{
modelica_integer tmp1;
modelica_metatype _outAbsynRedeclareKeywordsOption = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outAbsynRedeclareKeywordsOption = omc_InteractiveUtil_setReplaceableKeywordAttributes(threadData, _inAbsynRedeclareKeywordsOption, tmp1);
return _outAbsynRedeclareKeywordsOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElement(threadData_t *threadData, modelica_metatype _inElement1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inReplaceable, modelica_string _inString5, modelica_string _inString6, modelica_metatype _inBooleanLst7, modelica_string _inString8, modelica_string _inString9)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;volatile modelica_boolean tmp4_5;volatile modelica_boolean tmp4_6;volatile modelica_string tmp4_7;volatile modelica_string tmp4_8;volatile modelica_metatype tmp4_9;volatile modelica_string tmp4_10;volatile modelica_string tmp4_11;
tmp4_1 = _inElement1;
tmp4_2 = _inIdent2;
tmp4_3 = _inFinal;
tmp4_4 = _inFlow;
tmp4_5 = _inStream;
tmp4_6 = _inReplaceable;
tmp4_7 = _inString5;
tmp4_8 = _inString6;
tmp4_9 = _inBooleanLst7;
tmp4_10 = _inString8;
tmp4_11 = _inString9;
{
modelica_metatype _redeclkw_1 = NULL;
modelica_metatype _redeclkw = NULL;
modelica_metatype _inout_1 = NULL;
modelica_metatype _spec_1 = NULL;
modelica_metatype _spec = NULL;
modelica_string _cr = NULL;
modelica_string _va = NULL;
modelica_string _cau = NULL;
modelica_string _prl = NULL;
modelica_string _isf = NULL;
modelica_metatype _ellst = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_boolean _finalPrefix;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_boolean _repl;
modelica_metatype _dr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,3,3) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_redeclkw = tmpMeta6;
_spec = tmpMeta7;
_ellst = tmpMeta8;
_info = tmpMeta9;
_constr = tmpMeta10;
_cr = tmp4_2;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_repl = tmp4_6;
_prl = tmp4_7;
_va = tmp4_8;
_dr = tmp4_9;
_cau = tmp4_10;
_isf = tmp4_11;
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta12 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _cr, tmpMeta11);
omc_InteractiveUtil_getCompitemNamed(threadData, tmpMeta12, _ellst);
_redeclkw_1 = omc_InteractiveUtil_setReplaceableKeywordAttributes(threadData, _redeclkw, _repl);
_inout_1 = omc_InteractiveUtil_setInnerOuterAttributes(threadData, _dr);
_spec_1 = omc_InteractiveUtil_setComponentPropertiesInElementspec(threadData, _spec, _cr, _flowPrefix, _streamPrefix, _prl, _va, _cau, _isf);
tmpMeta13 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_finalPrefix), _redeclkw_1, _inout_1, _spec_1, _info, _constr);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
case 1: {
tmpMeta1 = _inElement1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElement = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElement(threadData_t *threadData, modelica_metatype _inElement1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inReplaceable, modelica_metatype _inString5, modelica_metatype _inString6, modelica_metatype _inBooleanLst7, modelica_metatype _inString8, modelica_metatype _inString9)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_metatype _outElement = NULL;
tmp1 = mmc_unbox_integer(_inFinal);
tmp2 = mmc_unbox_integer(_inFlow);
tmp3 = mmc_unbox_integer(_inStream);
tmp4 = mmc_unbox_integer(_inReplaceable);
_outElement = omc_InteractiveUtil_setComponentPropertiesInElement(threadData, _inElement1, _inIdent2, tmp1, tmp2, tmp3, tmp4, _inString5, _inString6, _inBooleanLst7, _inString8, _inString9);
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inReplaceable, modelica_string _inString5, modelica_string _inString6, modelica_metatype _inBooleanLst7, modelica_string _inString8, modelica_string _inString9)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;volatile modelica_boolean tmp4_5;volatile modelica_boolean tmp4_6;volatile modelica_string tmp4_7;volatile modelica_string tmp4_8;volatile modelica_metatype tmp4_9;volatile modelica_string tmp4_10;volatile modelica_string tmp4_11;
tmp4_1 = _inAbsynElementItemLst1;
tmp4_2 = _inIdent2;
tmp4_3 = _inFinal;
tmp4_4 = _inFlow;
tmp4_5 = _inStream;
tmp4_6 = _inReplaceable;
tmp4_7 = _inString5;
tmp4_8 = _inString6;
tmp4_9 = _inBooleanLst7;
tmp4_10 = _inString8;
tmp4_11 = _inString9;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elt_1 = NULL;
modelica_metatype _elt = NULL;
modelica_string _cr = NULL;
modelica_string _prl = NULL;
modelica_string _va = NULL;
modelica_string _cau = NULL;
modelica_string _isf = NULL;
modelica_boolean _finalPrefix;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_boolean _repl;
modelica_metatype _dr = NULL;
modelica_metatype _elitem = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elt = tmpMeta9;
_rest = tmpMeta8;
_cr = tmp4_2;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_repl = tmp4_6;
_prl = tmp4_7;
_va = tmp4_8;
_dr = tmp4_9;
_cau = tmp4_10;
_isf = tmp4_11;
_res = omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData, _rest, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _prl, _va, _dr, _cau, _isf);
_elt_1 = omc_InteractiveUtil_setComponentPropertiesInElement(threadData, _elt, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _prl, _va, _dr, _cau, _isf);
tmpMeta11 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta10 = mmc_mk_cons(tmpMeta11, _res);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
_elitem = tmpMeta12;
_rest = tmpMeta13;
_cr = tmp4_2;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_repl = tmp4_6;
_prl = tmp4_7;
_va = tmp4_8;
_dr = tmp4_9;
_cau = tmp4_10;
_isf = tmp4_11;
_res = omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData, _rest, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _prl, _va, _dr, _cau, _isf);
tmpMeta14 = mmc_mk_cons(_elitem, _res);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inReplaceable, modelica_metatype _inString5, modelica_metatype _inString6, modelica_metatype _inBooleanLst7, modelica_metatype _inString8, modelica_metatype _inString9)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_metatype _outAbsynElementItemLst = NULL;
tmp1 = mmc_unbox_integer(_inFinal);
tmp2 = mmc_unbox_integer(_inFlow);
tmp3 = mmc_unbox_integer(_inStream);
tmp4 = mmc_unbox_integer(_inReplaceable);
_outAbsynElementItemLst = omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData, _inAbsynElementItemLst1, _inIdent2, tmp1, tmp2, tmp3, tmp4, _inString5, _inString6, _inBooleanLst7, _inString8, _inString9);
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString6, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_string _inString10)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;volatile modelica_boolean tmp4_5;volatile modelica_boolean tmp4_6;volatile modelica_boolean tmp4_7;volatile modelica_string tmp4_8;volatile modelica_string tmp4_9;volatile modelica_metatype tmp4_10;volatile modelica_string tmp4_11;volatile modelica_string tmp4_12;
tmp4_1 = _inAbsynClassPartLst1;
tmp4_2 = _inIdent2;
tmp4_3 = _inFinal;
tmp4_4 = _inFlow;
tmp4_5 = _inStream;
tmp4_6 = _inProtected;
tmp4_7 = _inReplaceable;
tmp4_8 = _inString6;
tmp4_9 = _inString7;
tmp4_10 = _inBooleanLst8;
tmp4_11 = _inString9;
tmp4_12 = _inString10;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst_1 = NULL;
modelica_metatype _protlst = NULL;
modelica_metatype _protlst_1 = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _elt_1 = NULL;
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _rest_1 = NULL;
modelica_string _cr = NULL;
modelica_string _parallelism = NULL;
modelica_string _variability = NULL;
modelica_string _causality = NULL;
modelica_string _isField = NULL;
modelica_boolean _finalPrefix;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_boolean _repl;
modelica_boolean _prot;
modelica_metatype _dyn_ref = NULL;
modelica_metatype _part = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (1 != tmp4_6) goto tmp3_end;
_parts = tmp4_1;
_cr = tmp4_2;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_repl = tmp4_7;
_parallelism = tmp4_8;
_variability = tmp4_9;
_dyn_ref = tmp4_10;
_causality = tmp4_11;
_isField = tmp4_12;
tmp4 += 1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta8 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _cr, tmpMeta7);
tmpMeta9 = omc_InteractiveUtil_getElementitemContainsName(threadData, tmpMeta8, _publst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,1) == 0) goto goto_2;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_elt = tmpMeta10;
_elt_1 = omc_InteractiveUtil_setComponentPropertiesInElement(threadData, _elt, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
_publst_1 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _cr, _publst, mmc_mk_none(), NULL);
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta12 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta11 = mmc_mk_cons(tmpMeta12, MMC_REFSTRUCTLIT(mmc_nil));
_protlst_1 = listAppend(_protlst, tmpMeta11);
_parts_1 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _protlst_1);
tmpMeta1 = omc_InteractiveUtil_replacePublicList(threadData, _parts_1, _publst_1);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (0 != tmp4_6) goto tmp3_end;
_parts = tmp4_1;
_cr = tmp4_2;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_repl = tmp4_7;
_parallelism = tmp4_8;
_variability = tmp4_9;
_dyn_ref = tmp4_10;
_causality = tmp4_11;
_isField = tmp4_12;
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta13 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta14 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _cr, tmpMeta13);
tmpMeta15 = omc_InteractiveUtil_getElementitemContainsName(threadData, tmpMeta14, _protlst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,0,1) == 0) goto goto_2;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
_elt = tmpMeta16;
_elt_1 = omc_InteractiveUtil_setComponentPropertiesInElement(threadData, _elt, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
_protlst_1 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _cr, _protlst, mmc_mk_none(), NULL);
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta18 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta17 = mmc_mk_cons(tmpMeta18, MMC_REFSTRUCTLIT(mmc_nil));
_publst_1 = listAppend(_publst, tmpMeta17);
_parts_1 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst_1);
tmpMeta1 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts_1, _protlst_1);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta19 = MMC_CAR(tmp4_1);
tmpMeta20 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,0,1) == 0) goto tmp3_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
_elts = tmpMeta21;
_rest = tmpMeta20;
_cr = tmp4_2;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_prot = tmp4_6;
_repl = tmp4_7;
_parallelism = tmp4_8;
_variability = tmp4_9;
_dyn_ref = tmp4_10;
_causality = tmp4_11;
_isField = tmp4_12;
tmp4 += 1;
_rest = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _rest, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
_elts_1 = omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData, _elts, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
tmpMeta23 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta22 = mmc_mk_cons(tmpMeta23, _rest);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta24 = MMC_CAR(tmp4_1);
tmpMeta25 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta24,1,1) == 0) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 2));
_elts = tmpMeta26;
_rest = tmpMeta25;
_cr = tmp4_2;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_prot = tmp4_6;
_repl = tmp4_7;
_parallelism = tmp4_8;
_variability = tmp4_9;
_dyn_ref = tmp4_10;
_causality = tmp4_11;
_isField = tmp4_12;
_rest = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _rest, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
_elts_1 = omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData, _elts, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
tmpMeta28 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta27 = mmc_mk_cons(tmpMeta28, _rest);
tmpMeta1 = tmpMeta27;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta29 = MMC_CAR(tmp4_1);
tmpMeta30 = MMC_CDR(tmp4_1);
_part = tmpMeta29;
_rest = tmpMeta30;
_cr = tmp4_2;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_prot = tmp4_6;
_repl = tmp4_7;
_parallelism = tmp4_8;
_variability = tmp4_9;
_dyn_ref = tmp4_10;
_causality = tmp4_11;
_isField = tmp4_12;
_rest_1 = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _rest, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
tmpMeta31 = mmc_mk_cons(_part, _rest_1);
tmpMeta1 = tmpMeta31;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString6, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inString10)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_integer tmp5;
modelica_metatype _outAbsynClassPartLst = NULL;
tmp1 = mmc_unbox_integer(_inFinal);
tmp2 = mmc_unbox_integer(_inFlow);
tmp3 = mmc_unbox_integer(_inStream);
tmp4 = mmc_unbox_integer(_inProtected);
tmp5 = mmc_unbox_integer(_inReplaceable);
_outAbsynClassPartLst = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _inAbsynClassPartLst1, _inIdent2, tmp1, tmp2, tmp3, tmp4, tmp5, _inString6, _inString7, _inBooleanLst8, _inString9, _inString10);
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_string _inString2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString6, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_string _inString10)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;modelica_boolean tmp4_3;modelica_boolean tmp4_4;modelica_boolean tmp4_5;modelica_boolean tmp4_6;modelica_boolean tmp4_7;modelica_string tmp4_8;modelica_string tmp4_9;modelica_metatype tmp4_10;modelica_string tmp4_11;modelica_string tmp4_12;
tmp4_1 = _inClass1;
tmp4_2 = _inString2;
tmp4_3 = _inFinal;
tmp4_4 = _inFlow;
tmp4_5 = _inStream;
tmp4_6 = _inProtected;
tmp4_7 = _inReplaceable;
tmp4_8 = _inString6;
tmp4_9 = _inString7;
tmp4_10 = _inBooleanLst8;
tmp4_11 = _inString9;
tmp4_12 = _inString10;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _id = NULL;
modelica_string _varname = NULL;
modelica_string _parallelism = NULL;
modelica_string _variability = NULL;
modelica_string _causality = NULL;
modelica_string _bcname = NULL;
modelica_string _isField = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_boolean _finalPrefix;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_boolean _prot;
modelica_boolean _repl;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _dyn_ref = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta6;
_p = tmp8;
_f = tmp10;
_e = tmp12;
_r = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_cmt = tmpMeta19;
_file_info = tmpMeta20;
_varname = tmp4_2;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_prot = tmp4_6;
_repl = tmp4_7;
_parallelism = tmp4_8;
_variability = tmp4_9;
_dyn_ref = tmp4_10;
_causality = tmp4_11;
_isField = tmp4_12;
_parts_1 = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _parts, _varname, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _cmt);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta21, _file_info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta23;
_p = tmp25;
_f = tmp27;
_e = tmp29;
_r = tmpMeta30;
_bcname = tmpMeta32;
_mod = tmpMeta33;
_cmt = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_varname = tmp4_2;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_prot = tmp4_6;
_repl = tmp4_7;
_parallelism = tmp4_8;
_variability = tmp4_9;
_dyn_ref = tmp4_10;
_causality = tmp4_11;
_isField = tmp4_12;
_parts_1 = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _parts, _varname, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _mod, _cmt, _parts_1, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta38, _file_info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inString2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString6, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inString10)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_integer tmp5;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_inFinal);
tmp2 = mmc_unbox_integer(_inFlow);
tmp3 = mmc_unbox_integer(_inStream);
tmp4 = mmc_unbox_integer(_inProtected);
tmp5 = mmc_unbox_integer(_inReplaceable);
_outClass = omc_InteractiveUtil_setComponentPropertiesInClass(threadData, _inClass1, _inString2, tmp1, tmp2, tmp3, tmp4, tmp5, _inString6, _inString7, _inBooleanLst8, _inString9, _inString10);
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_setComponentProperties(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inComponentRef2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_metatype _inProgram10, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;volatile modelica_boolean tmp4_5;volatile modelica_boolean tmp4_6;volatile modelica_boolean tmp4_7;volatile modelica_string tmp4_8;volatile modelica_metatype tmp4_9;volatile modelica_string tmp4_10;volatile modelica_metatype tmp4_11;
tmp4_1 = _inPath1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inFinal;
tmp4_4 = _inFlow;
tmp4_5 = _inStream;
tmp4_6 = _inProtected;
tmp4_7 = _inReplaceable;
tmp4_8 = _inString7;
tmp4_9 = _inBooleanLst8;
tmp4_10 = _inString9;
tmp4_11 = _inProgram10;
{
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _p_class = NULL;
modelica_string _varname = NULL;
modelica_string _variability = NULL;
modelica_string _causality = NULL;
modelica_boolean _finalPrefix;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_boolean _prot;
modelica_boolean _repl;
modelica_metatype _dyn_ref = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_varname = tmpMeta6;
_p_class = tmp4_1;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_prot = tmp4_6;
_repl = tmp4_7;
_variability = tmp4_8;
_dyn_ref = tmp4_9;
_causality = tmp4_10;
_p = tmp4_11;
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_cdef_1 = omc_InteractiveUtil_setComponentPropertiesInClass(threadData, _cdef, _varname, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _OMC_LIT16, _variability, _dyn_ref, _causality, _OMC_LIT16);
tmpMeta7 = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta8 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta7, _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta8, _p, 0);
tmp1_c0 = _OMC_LIT31;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
tmp1_c0 = _OMC_LIT32;
tmpMeta[0+1] = _inProgram10;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentProperties(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inComponentRef2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inProgram10, modelica_metatype *out_outProgram)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_integer tmp5;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inFinal);
tmp2 = mmc_unbox_integer(_inFlow);
tmp3 = mmc_unbox_integer(_inStream);
tmp4 = mmc_unbox_integer(_inProtected);
tmp5 = mmc_unbox_integer(_inReplaceable);
_outString = omc_InteractiveUtil_setComponentProperties(threadData, _inPath1, _inComponentRef2, tmp1, tmp2, tmp3, tmp4, tmp5, _inString7, _inBooleanLst8, _inString9, _inProgram10, out_outProgram);
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassEnv__dispatch(threadData_t *threadData, modelica_metatype _p, modelica_metatype _p_class)
{
modelica_metatype _env_2 = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _cl = NULL;
modelica_string _id = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _cache = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_p_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p);
_cache = omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
_cache = omc_Lookup_lookupClass(threadData, _cache, _env, _p_class, mmc_mk_none() ,&_cl ,&_env_1);
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _cl;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,2,3) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,2) == 0) goto tmp3_end;
_id = tmpMeta6;
_encflag = tmpMeta7;
_restr = tmpMeta8;
tmpMeta1 = _env_1;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_id = tmpMeta11;
_encflag = tmpMeta12;
_restr = tmpMeta13;
_env2 = omc_FGraph_openScope(threadData, _env_1, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
tmpMeta14 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta15 = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, _cache, _env2, tmpMeta14, _OMC_LIT29, _OMC_LIT11, _ci_state, _cl, _OMC_LIT33, tmpMeta15, ((modelica_integer) 0) ,&_env_2 ,NULL ,NULL ,NULL);
tmpMeta1 = _env_2;
goto tmp3_done;
}
case 2: {
tmpMeta1 = omc_FGraph_empty(threadData);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_env_2 = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _env_2;
}
DLLExport
modelica_boolean omc_InteractiveUtil_matchPath(threadData_t *threadData, modelica_metatype _p, modelica_metatype _entry)
{
modelica_boolean _matches;
modelica_metatype _po = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _entry;
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
_po = tmpMeta2;
_matches = omc_AbsynUtil_pathEqual(threadData, _po, _p);
_return: OMC_LABEL_UNUSED
return _matches;
}
modelica_metatype boxptr_InteractiveUtil_matchPath(threadData_t *threadData, modelica_metatype _p, modelica_metatype _entry)
{
modelica_boolean _matches;
modelica_metatype out_matches;
_matches = omc_InteractiveUtil_matchPath(threadData, _p, _entry);
out_matches = mmc_mk_icon(_matches);
return out_matches;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassEnv(threadData_t *threadData, modelica_metatype _p, modelica_metatype _p_class)
{
modelica_metatype _env_2 = NULL;
modelica_metatype _ocache = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _lcache = NULL;
modelica_metatype tmpMeta1;
modelica_metatype _po = NULL;
modelica_metatype _patho = NULL;
modelica_metatype _envo = NULL;
modelica_boolean _invalidate;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = MMC_REFSTRUCTLIT(mmc_nil);
_lcache = tmpMeta1;
_invalidate = 0;
_ocache = getGlobalRoot(((modelica_integer) 26));
if(isSome(_ocache))
{
tmpMeta2 = _ocache;
if (optionNone(tmpMeta2)) MMC_THROW_INTERNAL();
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 1));
_cache = tmpMeta3;
{
modelica_metatype _x;
for (tmpMeta4 = _cache; !listEmpty(tmpMeta4); tmpMeta4=MMC_CDR(tmpMeta4))
{
_x = MMC_CAR(tmpMeta4);
tmpMeta5 = _x;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta5), 3));
_po = tmpMeta6;
_patho = tmpMeta7;
_envo = tmpMeta8;
if(omc_AbsynUtil_pathEqual(threadData, _patho, _p_class))
{
if(referenceEq(_po, _p))
{
_env_2 = _envo;
goto _return;
}
else
{
_invalidate = 1;
break;
}
}
}
}
if(_invalidate)
{
tmpMeta10 = _ocache;
if (optionNone(tmpMeta10)) MMC_THROW_INTERNAL();
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
_cache = tmpMeta11;
_cache = omc_List_deleteMemberOnTrue(threadData, _p_class, _cache, boxvar_InteractiveUtil_matchPath, NULL);
setGlobalRoot(((modelica_integer) 26), mmc_mk_some(_cache));
}
}
_env_2 = omc_InteractiveUtil_getClassEnv__dispatch(threadData, _p, _p_class);
_ocache = getGlobalRoot(((modelica_integer) 26));
if(isSome(_ocache))
{
tmpMeta12 = _ocache;
if (optionNone(tmpMeta12)) MMC_THROW_INTERNAL();
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 1));
_cache = tmpMeta13;
tmpMeta15 = mmc_mk_box3(0, _p, _p_class, _env_2);
tmpMeta14 = mmc_mk_cons(tmpMeta15, _cache);
setGlobalRoot(((modelica_integer) 26), mmc_mk_some(tmpMeta14));
}
else
{
tmpMeta17 = mmc_mk_box3(0, _p, _p_class, _env_2);
tmpMeta16 = mmc_mk_cons(tmpMeta17, MMC_REFSTRUCTLIT(mmc_nil));
setGlobalRoot(((modelica_integer) 26), mmc_mk_some(tmpMeta16));
}
_return: OMC_LABEL_UNUSED
return _env_2;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getParameterNames(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _compelts = NULL;
modelica_metatype _compelts_1 = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
_p = tmp4_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_comps = omc_InteractiveUtil_getElementsInClass(threadData, _cdef);
{
modelica_metatype __omcQ_24tmpVar35;
modelica_metatype* tmp7;
modelica_metatype tmpMeta8;
modelica_metatype __omcQ_24tmpVar34;
modelica_integer tmp9;
modelica_metatype _c_loopVar = 0;
modelica_metatype _c;
_c_loopVar = _comps;
tmpMeta8 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar35 = tmpMeta8;
tmp7 = &__omcQ_24tmpVar35;
while(1) {
tmp9 = 1;
while (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
if (omc_InteractiveUtil_isParameterElement(threadData, _c)) {
tmp9--;
break;
}
}
if (tmp9 == 0) {
__omcQ_24tmpVar34 = omc_InteractiveUtil_getComponentitemsInElement(threadData, _c);
*tmp7 = mmc_mk_cons(__omcQ_24tmpVar34,0);
tmp7 = &MMC_CDR(*tmp7);
} else if (tmp9 == 1) {
break;
} else {
goto goto_2;
}
}
*tmp7 = mmc_mk_nil();
tmpMeta6 = __omcQ_24tmpVar35;
}
_compelts = tmpMeta6;
_compelts_1 = omc_List_flatten(threadData, _compelts);
tmpMeta1 = omc_List_map(threadData, _compelts_1, boxvar_InteractiveUtil_getComponentitemName);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta10;
tmpMeta10 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outList = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isParameterElement(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,3,3) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,2,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isParameterElement(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isParameterElement(threadData, _inElement);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_dumpComponentsToString(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponents;
{
modelica_metatype _res = NULL;
modelica_metatype _comps = NULL;
modelica_string _s1 = NULL;
modelica_string _pa_str = NULL;
modelica_string _path_str = NULL;
modelica_string _cr_str = NULL;
modelica_metatype _cr_pa = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_CAR(tmpMeta7);
tmpMeta9 = MMC_CDR(tmpMeta7);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,3) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 3));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
_comps = tmp4_1;
_pa = tmpMeta10;
_path = tmpMeta11;
_cr = tmpMeta12;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_s1 = omc_InteractiveUtil_dumpComponentsToString(threadData, _res);
_pa_str = omc_AbsynUtil_pathString(threadData, _pa, _OMC_LIT0, 1, 0);
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
_cr_pa = omc_AbsynUtil_crefToPath(threadData, _cr);
_cr_str = omc_AbsynUtil_pathString(threadData, _cr_pa, _OMC_LIT0, 1, 0);
tmpMeta13 = mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT346, mmc_mk_cons(_pa_str, mmc_mk_cons(_OMC_LIT347, mmc_mk_cons(_path_str, mmc_mk_cons(_OMC_LIT348, mmc_mk_cons(_cr_str, mmc_mk_cons(_OMC_LIT49, MMC_REFSTRUCTLIT(mmc_nil)))))))));
tmp1 = stringAppendList(tmpMeta13);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta14)) goto tmp3_end;
tmpMeta15 = MMC_CAR(tmpMeta14);
tmpMeta16 = MMC_CDR(tmpMeta14);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta15,1,2) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 2));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 3));
_comps = tmp4_1;
_pa = tmpMeta17;
_path = tmpMeta18;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_s1 = omc_InteractiveUtil_dumpComponentsToString(threadData, _res);
_pa_str = omc_AbsynUtil_pathString(threadData, _pa, _OMC_LIT0, 1, 0);
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmpMeta19 = mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT349, mmc_mk_cons(_pa_str, mmc_mk_cons(_OMC_LIT350, mmc_mk_cons(_path_str, mmc_mk_cons(_OMC_LIT49, MMC_REFSTRUCTLIT(mmc_nil)))))));
tmp1 = stringAppendList(tmpMeta19);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_addComponentToComponents(threadData_t *threadData, modelica_metatype _inComponent, modelica_metatype _inComponents)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inComponent;
tmp4_2 = _inComponents;
{
modelica_integer _len_1;
modelica_integer _len;
modelica_metatype _comp = NULL;
modelica_metatype _comps = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
_comp = tmp4_1;
_comps = tmpMeta6;
_len = tmp8;
_len_1 = ((modelica_integer) 1) + _len;
tmpMeta9 = mmc_mk_cons(_comp, _comps);
tmpMeta10 = mmc_mk_box3(3, &GlobalScript_Components_COMPONENTS__desc, tmpMeta9, mmc_mk_integer(_len_1));
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_lengthComponents(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponents;
{
modelica_integer _len;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp7 = mmc_unbox_integer(tmpMeta6);
_len = tmp7;
tmp1 = _len;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_lengthComponents(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_lengthComponents(threadData, _inComponents);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_restComponents(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponents;
{
modelica_integer _len_1;
modelica_integer _len;
modelica_metatype _res = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
tmpMeta1 = _OMC_LIT351;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_integer tmp11;
modelica_metatype tmpMeta12;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_CAR(tmpMeta7);
tmpMeta9 = MMC_CDR(tmpMeta7);
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp11 = mmc_unbox_integer(tmpMeta10);
_res = tmpMeta9;
_len = tmp11;
_len_1 = ((modelica_integer) -1) + _len;
tmpMeta12 = mmc_mk_box3(3, &GlobalScript_Components_COMPONENTS__desc, _res, mmc_mk_integer(_len_1));
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_firstComponent(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_metatype _outComponent = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponents;
{
modelica_metatype _comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
fputs(MMC_STRINGDATA(_OMC_LIT352),stdout);
goto goto_2;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_CAR(tmpMeta7);
tmpMeta9 = MMC_CDR(tmpMeta7);
_comp = tmpMeta8;
tmpMeta1 = _comp;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outComponent = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponent;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_emptyComponents(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponents;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_emptyComponents(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_emptyComponents(threadData, _inComponents);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_existsComponentInComponents(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponent)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponents;
tmp4_2 = _inComponent;
{
modelica_metatype _comp = NULL;
modelica_metatype _a = NULL;
modelica_metatype _b = NULL;
modelica_metatype _ap = NULL;
modelica_metatype _bp = NULL;
modelica_metatype _c = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _comps = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_boolean tmp14;
modelica_boolean tmp15;
modelica_boolean tmp16;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,3) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_ap = tmpMeta7;
_bp = tmpMeta8;
_cr = tmpMeta9;
_comps = tmp4_1;
tmp4 += 1;
tmpMeta10 = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,0,3) == 0) goto goto_2;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
_a = tmpMeta11;
_b = tmpMeta12;
_c = tmpMeta13;
tmp14 = omc_AbsynUtil_pathEqual(threadData, _a, _ap);
if (1 != tmp14) goto goto_2;
tmp15 = omc_AbsynUtil_pathEqual(threadData, _b, _bp);
if (1 != tmp15) goto goto_2;
tmp16 = omc_AbsynUtil_crefEqual(threadData, _c, _cr);
if (1 != tmp16) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_boolean tmp22;
modelica_boolean tmp23;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,2) == 0) goto tmp3_end;
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_ap = tmpMeta17;
_bp = tmpMeta18;
_comps = tmp4_1;
tmpMeta19 = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta19,1,2) == 0) goto goto_2;
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 3));
_a = tmpMeta20;
_b = tmpMeta21;
tmp22 = omc_AbsynUtil_pathEqual(threadData, _a, _ap);
if (1 != tmp22) goto goto_2;
tmp23 = omc_AbsynUtil_pathEqual(threadData, _b, _bp);
if (1 != tmp23) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
_comps = tmp4_1;
_comp = tmp4_2;
tmp1 = omc_InteractiveUtil_existsComponentInComponents(threadData, _comps, _comp);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_existsComponentInComponents(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponent)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_existsComponentInComponents(threadData, _inComponents, _inComponent);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinComponents(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inComponents1;
tmp4_2 = _inComponents2;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _comps2 = NULL;
modelica_integer _len;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_comps1 = tmpMeta6;
_comps2 = tmpMeta7;
_comps = omc_List_union(threadData, _comps1, _comps2);
_len = listLength(_comps);
tmpMeta8 = mmc_mk_box3(3, &GlobalScript_Components_COMPONENTS__desc, _comps, mmc_mk_integer(_len));
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromModificationOption(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynModificationOption, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_metatype tmp4_4;
tmp4_1 = _inPath;
tmp4_2 = _inAbsynModificationOption;
tmp4_3 = _inComponents;
tmp4_4 = _inEnv;
{
modelica_metatype _pa = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elementargs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!optionNone(tmp4_2)) goto tmp3_end;
_comps = tmp4_3;
tmpMeta1 = _comps;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (optionNone(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_elementargs = tmpMeta7;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _elementargs, _comps, _env);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElementargs(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inPath;
tmp4_2 = _inAbsynElementArgLst;
tmp4_3 = _inComponents;
tmp4_4 = _inEnv;
{
modelica_metatype _pa = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comps_2 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elementspec = NULL;
modelica_metatype _elementspec2 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _mod_opt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_2)) goto tmp3_end;
_comps = tmp4_3;
tmp4 += 4;
tmpMeta1 = _comps;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_2);
tmpMeta7 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,1,6) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 5));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 6));
if (optionNone(tmpMeta9)) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_elementspec = tmpMeta8;
_elementspec2 = tmpMeta11;
_res = tmpMeta7;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
_comps_1 = omc_InteractiveUtil_extractComponentsFromElementspec(threadData, _pa, _elementspec, _comps, _env);
_comps_2 = omc_InteractiveUtil_extractComponentsFromElementspec(threadData, _pa, _elementspec2, _comps_1, _env);
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _res, _comps_2, _env);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_2);
tmpMeta13 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,6) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 5));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 6));
if (optionNone(tmpMeta15)) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta15), 1));
_elementspec = tmpMeta14;
_res = tmpMeta13;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_comps_1 = omc_InteractiveUtil_extractComponentsFromElementspec(threadData, _pa, _elementspec, _comps, _env);
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _res, _comps_1, _env);
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta17 = MMC_CAR(tmp4_2);
tmpMeta18 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,0,6) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 5));
_mod_opt = tmpMeta19;
_res = tmpMeta18;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
_comps_1 = omc_InteractiveUtil_extractComponentsFromModificationOption(threadData, _pa, _mod_opt, _comps, _env);
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _res, _comps_1, _env);
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_2);
tmpMeta21 = MMC_CDR(tmp4_2);
_res = tmpMeta21;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _res, _comps, _env);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromComponentitems(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2, modelica_metatype _inAbsynComponentItemLst3, modelica_metatype _inComponents4, modelica_metatype _inEnv5)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inPath1;
tmp4_2 = _inPath2;
tmp4_3 = _inAbsynComponentItemLst3;
tmp4_4 = _inComponents4;
tmp4_5 = _inEnv5;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comps_2 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _path = NULL;
modelica_string _id = NULL;
modelica_metatype _mod_opt = NULL;
modelica_metatype _res = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_3)) goto tmp3_end;
_comps = tmp4_4;
tmp4 += 1;
tmpMeta1 = _comps;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_3);
tmpMeta7 = MMC_CDR(tmp4_3);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 4));
_id = tmpMeta9;
_mod_opt = tmpMeta10;
_res = tmpMeta7;
_pa = tmp4_1;
_path = tmp4_2;
_comps = tmp4_4;
_env = tmp4_5;
_comps_1 = omc_InteractiveUtil_extractComponentsFromComponentitems(threadData, _pa, _path, _res, _comps, _env);
tmpMeta11 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta12 = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, tmpMeta11);
_comp = tmpMeta12;
tmpMeta13 = mmc_mk_box4(3, &GlobalScript_Component_COMPONENTITEM__desc, _pa, _path, _comp);
_comps_2 = omc_InteractiveUtil_addComponentToComponents(threadData, tmpMeta13, _comps_1);
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromModificationOption(threadData, _pa, _mod_opt, _comps_2, _env);
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT353),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElementspec(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inElementSpec, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inPath;
tmp4_2 = _inElementSpec;
tmp4_3 = _inComponents;
tmp4_4 = _inEnv;
{
modelica_string _id = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _comp_items = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _elementargs = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,2) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_path_1 = tmpMeta7;
_comp_items = tmpMeta8;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
tmpMeta12 = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none(), &tmpMeta9, &tmpMeta11);
_cache = tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,2,8) == 0) goto goto_2;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_id = tmpMeta10;
_cenv = tmpMeta11;
tmpMeta13 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta13;
_cache = omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromComponentitems(threadData, _pa, _path, _comp_items, _comps, _env);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_path_1 = tmpMeta14;
_elementargs = tmpMeta15;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
_cache = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none() ,NULL ,&_cenv);
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmpMeta16 = mmc_mk_box3(4, &GlobalScript_Component_EXTENDSITEM__desc, _pa, _path);
_comp = tmpMeta16;
_comps_1 = omc_InteractiveUtil_addComponentToComponents(threadData, _comp, _comps);
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _elementargs, _comps_1, _env);
goto tmp3_done;
}
case 2: {
tmpMeta1 = _inComponents;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElements(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inPath;
tmp4_2 = _inAbsynElementItemLst;
tmp4_3 = _inComponents;
tmp4_4 = _inEnv;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _elementspec = NULL;
modelica_metatype _res = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_2)) goto tmp3_end;
_comps = tmp4_3;
tmp4 += 2;
tmpMeta1 = _comps;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_2);
tmpMeta7 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta8,0,6) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 5));
_elementspec = tmpMeta9;
_res = tmpMeta7;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
_comps_1 = omc_InteractiveUtil_extractComponentsFromElements(threadData, _pa, _res, _comps, _env);
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElementspec(threadData, _pa, _elementspec, _comps_1, _env);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta10 = MMC_CAR(tmp4_2);
tmpMeta11 = MMC_CDR(tmp4_2);
_res = tmpMeta11;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElements(threadData, _pa, _res, _comps, _env);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClassparts(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inPath;
tmp4_2 = _inAbsynClassPartLst;
tmp4_3 = _inComponents;
tmp4_4 = _inEnv;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _elements = NULL;
modelica_metatype _res = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_2)) goto tmp3_end;
_comps = tmp4_3;
tmp4 += 2;
tmpMeta1 = _comps;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta6 = MMC_CAR(tmp4_2);
tmpMeta7 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,0,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
_elements = tmpMeta8;
_res = tmpMeta7;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_comps_1 = omc_InteractiveUtil_extractComponentsFromClassparts(threadData, _pa, _res, _comps, _env);
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElements(threadData, _pa, _elements, _comps_1, _env);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta9 = MMC_CAR(tmp4_2);
tmpMeta10 = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,1) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_elements = tmpMeta11;
_res = tmpMeta10;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
_comps_1 = omc_InteractiveUtil_extractComponentsFromClassparts(threadData, _pa, _res, _comps, _env);
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElements(threadData, _pa, _elements, _comps_1, _env);
goto tmp3_done;
}
case 3: {
tmpMeta1 = _inComponents;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClassdef(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClassDef, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inPath;
tmp4_2 = _inClassDef;
tmp4_3 = _inComponents;
tmp4_4 = _inEnv;
{
modelica_metatype _comps = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elementargs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,5) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_parts = tmpMeta6;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
tmp4 += 2;
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromClassparts(threadData, _pa, _parts, _comps, _env);
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,4) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_elementargs = tmpMeta8;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _elementargs, _comps, _env);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,4,5) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
_parts = tmpMeta9;
_pa = tmp4_1;
_comps = tmp4_3;
_env = tmp4_4;
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromClassparts(threadData, _pa, _parts, _comps, _env);
goto tmp3_done;
}
case 3: {
tmpMeta1 = _inComponents;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inClass;
tmp4_2 = _inPath;
tmp4_3 = _inComponents;
tmp4_4 = _inEnv;
{
modelica_metatype _comps = NULL;
modelica_metatype _classdef = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_classdef = tmpMeta6;
_pa = tmp4_2;
_comps = tmp4_3;
_env = tmp4_4;
tmpMeta1 = omc_InteractiveUtil_extractComponentsFromClassdef(threadData, _pa, _classdef, _comps, _env);
goto tmp3_done;
}
case 1: {
fputs(MMC_STRINGDATA(_OMC_LIT354),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isReadOnly(threadData_t *threadData, modelica_metatype _file_info)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _file_info;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp7 = mmc_unbox_integer(tmpMeta6);
_res = tmp7;
tmp1 = _res;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isReadOnly(threadData_t *threadData, modelica_metatype _file_info)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_InteractiveUtil_isReadOnly(threadData, _file_info);
out_res = mmc_mk_icon(_res);
return out_res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponentsVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv)
{
modelica_metatype _outTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv;
{
modelica_metatype _path_1 = NULL;
modelica_metatype _pa_1 = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _paOpt = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _class_ = NULL;
modelica_string _id = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_boolean tmp15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 8));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (optionNone(tmpMeta9)) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 1));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
_class_ = tmpMeta6;
_id = tmpMeta7;
_file_info = tmpMeta8;
_pa = tmpMeta10;
_comps = tmpMeta12;
_p = tmpMeta13;
_env = tmpMeta14;
tmp4 += 1;
tmp15 = omc_InteractiveUtil_isReadOnly(threadData, _file_info);
if (0 != tmp15) goto goto_2;
tmpMeta16 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = omc_AbsynUtil_joinPaths(threadData, _pa, tmpMeta16);
_cenv = omc_InteractiveUtil_getClassEnvNoElaboration(threadData, _p, _path_1, _env);
omc_Inst_makeFullyQualified(threadData, omc_FCore_emptyCache(threadData), _cenv, _path_1 ,&_pa_1);
_comps_1 = omc_InteractiveUtil_extractComponentsFromClass(threadData, _class_, _pa_1, _comps, _cenv);
tmpMeta17 = mmc_mk_box3(0, _comps_1, _p, _env);
tmpMeta18 = mmc_mk_box3(0, _class_, mmc_mk_some(_pa), tmpMeta17);
tmpMeta1 = tmpMeta18;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_boolean tmp27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 8));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!optionNone(tmpMeta22)) goto tmp3_end;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 1));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 2));
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta23), 3));
_class_ = tmpMeta19;
_id = tmpMeta20;
_file_info = tmpMeta21;
_comps = tmpMeta24;
_p = tmpMeta25;
_env = tmpMeta26;
tmp27 = omc_InteractiveUtil_isReadOnly(threadData, _file_info);
if (0 != tmp27) goto goto_2;
tmpMeta28 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta28;
_cenv = omc_InteractiveUtil_getClassEnvNoElaboration(threadData, _p, _path_1, _env);
omc_Inst_makeFullyQualified(threadData, omc_FCore_emptyCache(threadData), _cenv, _path_1 ,&_pa_1);
_comps_1 = omc_InteractiveUtil_extractComponentsFromClass(threadData, _class_, _pa_1, _comps, _cenv);
tmpMeta29 = mmc_mk_box3(0, _comps_1, _p, _env);
tmpMeta30 = mmc_mk_box3(0, _class_, mmc_mk_none(), tmpMeta29);
tmpMeta1 = tmpMeta30;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 1));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 2));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta33), 3));
_class_ = tmpMeta31;
_paOpt = tmpMeta32;
_comps = tmpMeta34;
_p = tmpMeta35;
_env = tmpMeta36;
tmpMeta37 = mmc_mk_box3(0, _comps, _p, _env);
tmpMeta38 = mmc_mk_box3(0, _class_, _paOpt, tmpMeta37);
tmpMeta1 = tmpMeta38;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponents(threadData_t *threadData, modelica_metatype _p, modelica_metatype _path)
{
modelica_metatype _comps = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
_p_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p);
omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
tmpMeta6 = mmc_mk_box3(0, _OMC_LIT351, _p, _env);
tmpMeta7 = omc_AbsynUtil_traverseClasses(threadData, _p, mmc_mk_none(), boxvar_InteractiveUtil_extractAllComponentsVisitor, tmpMeta6, 1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
_comps = tmpMeta9;
tmpMeta1 = _comps;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_comps = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _comps;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithType(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponents;
tmp4_2 = _inPath;
{
modelica_metatype _comps = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _comp_path = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_comps = tmp4_1;
tmp6 = omc_InteractiveUtil_emptyComponents(threadData, _comps);
if (1 != tmp6) goto goto_2;
tmpMeta1 = _OMC_LIT351;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_boolean tmp9;
_comps = tmp4_1;
_path = tmp4_2;
tmpMeta7 = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,3) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
_comp = tmpMeta7;
_comp_path = tmpMeta8;
tmp9 = omc_AbsynUtil_pathEqual(threadData, _comp_path, _path);
if (1 != tmp9) goto goto_2;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_getComponentsWithType(threadData, _res, _path);
tmpMeta1 = omc_InteractiveUtil_addComponentToComponents(threadData, _comp, _comps_1);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_boolean tmp12;
_comps = tmp4_1;
_path = tmp4_2;
tmpMeta10 = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,2) == 0) goto goto_2;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
_comp = tmpMeta10;
_comp_path = tmpMeta11;
tmp12 = omc_AbsynUtil_pathEqual(threadData, _comp_path, _path);
if (1 != tmp12) goto goto_2;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_getComponentsWithType(threadData, _res, _path);
tmpMeta1 = omc_InteractiveUtil_addComponentToComponents(threadData, _comp, _comps_1);
goto tmp3_done;
}
case 3: {
_comps = tmp4_1;
_path = tmp4_2;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
tmpMeta1 = omc_InteractiveUtil_getComponentsWithType(threadData, _res, _path);
goto tmp3_done;
}
case 4: {
fputs(MMC_STRINGDATA(_OMC_LIT355),stdout);
tmpMeta1 = _OMC_LIT351;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsFromClass(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponents;
tmp4_2 = _inPath;
{
modelica_metatype _comps = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _comp_path = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_comps = tmp4_1;
tmp6 = omc_InteractiveUtil_emptyComponents(threadData, _comps);
if (1 != tmp6) goto goto_2;
tmpMeta1 = _OMC_LIT351;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_boolean tmp9;
_comps = tmp4_1;
_path = tmp4_2;
tmpMeta7 = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,3) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_comp = tmpMeta7;
_comp_path = tmpMeta8;
tmp9 = omc_AbsynUtil_pathEqual(threadData, _comp_path, _path);
if (1 != tmp9) goto goto_2;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_getComponentsFromClass(threadData, _res, _path);
tmpMeta1 = omc_InteractiveUtil_addComponentToComponents(threadData, _comp, _comps_1);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_boolean tmp12;
_comps = tmp4_1;
_path = tmp4_2;
tmpMeta10 = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta10,1,2) == 0) goto goto_2;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
_comp = tmpMeta10;
_comp_path = tmpMeta11;
tmp12 = omc_AbsynUtil_pathEqual(threadData, _comp_path, _path);
if (1 != tmp12) goto goto_2;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_getComponentsFromClass(threadData, _res, _path);
tmpMeta1 = omc_InteractiveUtil_addComponentToComponents(threadData, _comp, _comps_1);
goto tmp3_done;
}
case 3: {
_comps = tmp4_1;
_path = tmp4_2;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
tmpMeta1 = omc_InteractiveUtil_getComponentsFromClass(threadData, _res, _path);
goto tmp3_done;
}
case 4: {
fputs(MMC_STRINGDATA(_OMC_LIT356),stdout);
tmpMeta1 = _OMC_LIT351;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithComponentsType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponents1;
tmp4_2 = _inComponents2;
{
modelica_metatype _comps = NULL;
modelica_metatype _in_comps = NULL;
modelica_metatype _in_comps_1 = NULL;
modelica_metatype _comp1 = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comp_path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_in_comps = tmp4_2;
tmp6 = omc_InteractiveUtil_emptyComponents(threadData, _in_comps);
if (1 != tmp6) goto goto_2;
tmpMeta1 = _OMC_LIT351;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_comps = tmp4_1;
_in_comps = tmp4_2;
tmpMeta7 = omc_InteractiveUtil_firstComponent(threadData, _in_comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,3) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
_comp_path = tmpMeta8;
_in_comps_1 = omc_InteractiveUtil_restComponents(threadData, _in_comps);
_comp1 = omc_InteractiveUtil_getComponentsWithType(threadData, _comps, _comp_path);
_comps_1 = omc_InteractiveUtil_getComponentsWithComponentsType(threadData, _comps, _in_comps_1);
tmpMeta1 = omc_InteractiveUtil_joinComponents(threadData, _comp1, _comps_1);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
_comps = tmp4_1;
_in_comps = tmp4_2;
tmpMeta9 = omc_InteractiveUtil_firstComponent(threadData, _in_comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,2) == 0) goto goto_2;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
_comp_path = tmpMeta10;
_in_comps_1 = omc_InteractiveUtil_restComponents(threadData, _in_comps);
_comp1 = omc_InteractiveUtil_getComponentsWithType(threadData, _comps, _comp_path);
_comps_1 = omc_InteractiveUtil_getComponentsWithComponentsType(threadData, _comps, _in_comps_1);
tmpMeta1 = omc_InteractiveUtil_joinComponents(threadData, _comp1, _comps_1);
goto tmp3_done;
}
case 3: {
fputs(MMC_STRINGDATA(_OMC_LIT357),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithComponentsClass(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponents1;
tmp4_2 = _inComponents2;
{
modelica_metatype _comps = NULL;
modelica_metatype _in_comps = NULL;
modelica_metatype _in_comps_1 = NULL;
modelica_metatype _comp1 = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comp_path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_in_comps = tmp4_2;
tmp6 = omc_InteractiveUtil_emptyComponents(threadData, _in_comps);
if (1 != tmp6) goto goto_2;
tmpMeta1 = _OMC_LIT351;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_comps = tmp4_1;
_in_comps = tmp4_2;
tmpMeta7 = omc_InteractiveUtil_firstComponent(threadData, _in_comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,3) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_comp_path = tmpMeta8;
_in_comps_1 = omc_InteractiveUtil_restComponents(threadData, _in_comps);
_comp1 = omc_InteractiveUtil_getComponentsWithType(threadData, _comps, _comp_path);
_comps_1 = omc_InteractiveUtil_getComponentsWithComponentsClass(threadData, _comps, _in_comps_1);
tmpMeta1 = omc_InteractiveUtil_joinComponents(threadData, _comp1, _comps_1);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
_comps = tmp4_1;
_in_comps = tmp4_2;
tmpMeta9 = omc_InteractiveUtil_firstComponent(threadData, _in_comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,1,2) == 0) goto goto_2;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
_comp_path = tmpMeta10;
_in_comps_1 = omc_InteractiveUtil_restComponents(threadData, _in_comps);
_comp1 = omc_InteractiveUtil_getComponentsWithType(threadData, _comps, _comp_path);
_comps_1 = omc_InteractiveUtil_getComponentsWithComponentsClass(threadData, _comps, _in_comps_1);
tmpMeta1 = omc_InteractiveUtil_joinComponents(threadData, _comp1, _comps_1);
goto tmp3_done;
}
case 3: {
fputs(MMC_STRINGDATA(_OMC_LIT358),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDependencyWithType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2, modelica_integer _inInteger3)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inComponents1;
tmp4_2 = _inComponents2;
tmp4_3 = _inInteger3;
{
modelica_integer _len;
modelica_integer _old_len;
modelica_metatype _comps = NULL;
modelica_metatype _in_comps = NULL;
modelica_metatype _in_comps_1 = NULL;
modelica_metatype _comps_1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_in_comps = tmp4_2;
_old_len = tmp4_3;
_len = omc_InteractiveUtil_lengthComponents(threadData, _in_comps);
if((!(_old_len == _len)))
{
goto goto_2;
}
tmpMeta1 = _in_comps;
goto tmp3_done;
}
case 1: {
_comps = tmp4_1;
_in_comps = tmp4_2;
_len = omc_InteractiveUtil_lengthComponents(threadData, _in_comps);
_in_comps_1 = omc_InteractiveUtil_getComponentsWithComponentsClass(threadData, _comps, _in_comps);
_comps_1 = omc_InteractiveUtil_joinComponents(threadData, _in_comps_1, _in_comps);
tmpMeta1 = omc_InteractiveUtil_getDependencyWithType(threadData, _comps, _comps_1, _len);
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT359),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDependencyWithType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2, modelica_metatype _inInteger3)
{
modelica_integer tmp1;
modelica_metatype _outComponents = NULL;
tmp1 = mmc_unbox_integer(_inInteger3);
_outComponents = omc_InteractiveUtil_getDependencyWithType(threadData, _inComponents1, _inComponents2, tmp1);
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDependencyOnClass(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponents;
tmp4_2 = _inPath;
{
modelica_metatype _comps_types = NULL;
modelica_metatype _comps_types2 = NULL;
modelica_metatype _comps = NULL;
modelica_string _str = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_comps = tmp4_1;
_path = tmp4_2;
_comps_types = omc_InteractiveUtil_getComponentsFromClass(threadData, _comps, _path);
_comps_types2 = omc_InteractiveUtil_getDependencyWithType(threadData, _comps, _comps_types, ((modelica_integer) 0));
_str = omc_InteractiveUtil_dumpComponentsToString(threadData, _comps_types);
fputs(MMC_STRINGDATA(_OMC_LIT360),stdout);
fputs(MMC_STRINGDATA(_str),stdout);
fputs(MMC_STRINGDATA(_OMC_LIT361),stdout);
_str = omc_InteractiveUtil_dumpComponentsToString(threadData, _comps_types2);
fputs(MMC_STRINGDATA(_OMC_LIT362),stdout);
fputs(MMC_STRINGDATA(_str),stdout);
fputs(MMC_STRINGDATA(_OMC_LIT361),stdout);
tmpMeta1 = omc_InteractiveUtil_joinComponents(threadData, _comps_types, _comps_types2);
goto tmp3_done;
}
case 1: {
fputs(MMC_STRINGDATA(_OMC_LIT363),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponents = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_restComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_metatype _outComponentReplacementRules = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentReplacementRules;
{
modelica_integer _len_1;
modelica_integer _len;
modelica_metatype _res = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
tmpMeta1 = _OMC_LIT364;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_integer tmp11;
modelica_metatype tmpMeta12;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_CAR(tmpMeta7);
tmpMeta9 = MMC_CDR(tmpMeta7);
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp11 = mmc_unbox_integer(tmpMeta10);
_res = tmpMeta9;
_len = tmp11;
_len_1 = ((modelica_integer) -1) + _len;
tmpMeta12 = mmc_mk_box3(3, &GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc, _res, mmc_mk_integer(_len_1));
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outComponentReplacementRules = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_firstComponentReplacement(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_metatype _outComponentReplacement = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentReplacementRules;
{
modelica_metatype _comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
fputs(MMC_STRINGDATA(_OMC_LIT365),stdout);
goto goto_2;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta7)) goto tmp3_end;
tmpMeta8 = MMC_CAR(tmpMeta7);
tmpMeta9 = MMC_CDR(tmpMeta7);
_comp = tmpMeta8;
tmpMeta1 = _comp;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outComponentReplacement = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponentReplacement;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_lengthComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentReplacementRules;
{
modelica_integer _len;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp7 = mmc_unbox_integer(tmpMeta6);
_len = tmp7;
tmp1 = _len;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_lengthComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_lengthComponentReplacementRules(threadData, _inComponentReplacementRules);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules1, modelica_metatype _inComponentReplacementRules2)
{
modelica_metatype _outComponentReplacementRules = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inComponentReplacementRules1;
tmp4_2 = _inComponentReplacementRules2;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _comps2 = NULL;
modelica_integer _len;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_comps1 = tmpMeta6;
_comps2 = tmpMeta7;
_comps = omc_List_union(threadData, _comps1, _comps2);
_len = listLength(_comps);
tmpMeta8 = mmc_mk_box3(3, &GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc, _comps, mmc_mk_integer(_len));
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outComponentReplacementRules = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_emptyComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentReplacementRules;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta6)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_emptyComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_emptyComponentReplacementRules(threadData, _inComponentReplacementRules);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeComponentsReplacementRulesFromComponents(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outComponentReplacementRules = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inComponents1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _comps = NULL;
modelica_metatype _res = NULL;
modelica_metatype _cr_from = NULL;
modelica_metatype _cr_to = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr_from_1 = NULL;
modelica_metatype _cr_to_1 = NULL;
modelica_metatype _path_class = NULL;
modelica_metatype _comp_rep = NULL;
modelica_metatype _comps_1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_comps = tmp4_1;
tmp6 = omc_InteractiveUtil_emptyComponents(threadData, _comps);
if (1 != tmp6) goto goto_2;
tmpMeta1 = _OMC_LIT364;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
_comps = tmp4_1;
_cr_from = tmp4_2;
_cr_to = tmp4_3;
tmpMeta7 = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,3) == 0) goto goto_2;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_path_class = tmpMeta8;
_cr = tmpMeta9;
_cr_from_1 = omc_AbsynUtil_joinCrefs(threadData, _cr, _cr_from);
_cr_to_1 = omc_AbsynUtil_joinCrefs(threadData, _cr, _cr_to);
tmpMeta10 = mmc_mk_box4(3, &GlobalScript_ComponentReplacement_COMPONENTREPLACEMENT__desc, _path_class, _cr_from_1, _cr_to_1);
_comp_rep = tmpMeta10;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_makeComponentsReplacementRulesFromComponents(threadData, _res, _cr_from, _cr_to);
tmpMeta11 = mmc_mk_cons(_comp_rep, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta12 = mmc_mk_box3(3, &GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc, tmpMeta11, mmc_mk_integer(((modelica_integer) 1)));
tmpMeta1 = omc_InteractiveUtil_joinComponentReplacementRules(threadData, _comps_1, tmpMeta12);
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
_comps = tmp4_1;
_cr_from = tmp4_2;
_cr_to = tmp4_3;
tmpMeta13 = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,1,2) == 0) goto goto_2;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
_path_class = tmpMeta14;
tmpMeta15 = mmc_mk_box4(3, &GlobalScript_ComponentReplacement_COMPONENTREPLACEMENT__desc, _path_class, _cr_from, _cr_to);
_comp_rep = tmpMeta15;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_makeComponentsReplacementRulesFromComponents(threadData, _res, _cr_from, _cr_to);
tmpMeta16 = mmc_mk_cons(_comp_rep, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta17 = mmc_mk_box3(3, &GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc, tmpMeta16, mmc_mk_integer(((modelica_integer) 1)));
tmpMeta1 = omc_InteractiveUtil_joinComponentReplacementRules(threadData, _comps_1, tmpMeta17);
goto tmp3_done;
}
case 3: {
fputs(MMC_STRINGDATA(_OMC_LIT366),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponentReplacementRules = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNewComponentreplacementsrulesForEachRule(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules)
{
modelica_metatype _outComponentReplacementRules = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponents;
tmp4_2 = _inComponentReplacementRules;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comp_reps = NULL;
modelica_metatype _comp_reps_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comp_reps_2 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_comp_reps = tmp4_2;
tmp6 = omc_InteractiveUtil_emptyComponentReplacementRules(threadData, _comp_reps);
if (1 != tmp6) goto goto_2;
tmpMeta1 = _comp_reps;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
_comps = tmp4_1;
_comp_reps = tmp4_2;
tmpMeta7 = omc_InteractiveUtil_firstComponentReplacement(threadData, _comp_reps);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_path = tmpMeta8;
_cr1 = tmpMeta9;
_cr2 = tmpMeta10;
_comps_1 = omc_InteractiveUtil_getComponentsWithType(threadData, _comps, _path);
_comp_reps_1 = omc_InteractiveUtil_makeComponentsReplacementRulesFromComponents(threadData, _comps_1, _cr1, _cr2);
_res = omc_InteractiveUtil_restComponentReplacementRules(threadData, _comp_reps);
_comp_reps_2 = omc_InteractiveUtil_getNewComponentreplacementsrulesForEachRule(threadData, _comps, _res);
tmpMeta1 = omc_InteractiveUtil_joinComponentReplacementRules(threadData, _comp_reps_1, _comp_reps_2);
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT367),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponentReplacementRules = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentreplacementsrules(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules, modelica_integer _inInteger)
{
modelica_metatype _outComponentReplacementRules = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inComponents;
tmp4_2 = _inComponentReplacementRules;
tmp4_3 = _inInteger;
{
modelica_integer _len;
modelica_integer _old_len;
modelica_metatype _comps = NULL;
modelica_metatype _comp_reps = NULL;
modelica_metatype _comp_reps_1 = NULL;
modelica_metatype _comp_reps_2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_comp_reps = tmp4_2;
_old_len = tmp4_3;
_len = omc_InteractiveUtil_lengthComponentReplacementRules(threadData, _comp_reps);
if((!(_len == _old_len)))
{
goto goto_2;
}
tmpMeta1 = _comp_reps;
goto tmp3_done;
}
case 1: {
_comps = tmp4_1;
_comp_reps = tmp4_2;
_old_len = omc_InteractiveUtil_lengthComponentReplacementRules(threadData, _comp_reps);
_comp_reps_1 = omc_InteractiveUtil_getNewComponentreplacementsrulesForEachRule(threadData, _comps, _comp_reps);
_comp_reps_2 = omc_InteractiveUtil_joinComponentReplacementRules(threadData, _comp_reps_1, _comp_reps);
tmpMeta1 = omc_InteractiveUtil_getComponentreplacementsrules(threadData, _comps, _comp_reps_2, _old_len);
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT368),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponentReplacementRules = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentreplacementsrules(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_metatype _outComponentReplacementRules = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outComponentReplacementRules = omc_InteractiveUtil_getComponentreplacementsrules(threadData, _inComponents, _inComponentReplacementRules, tmp1);
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceStartInComponentRef2(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_string _id = NULL;
modelica_string _id2 = NULL;
modelica_string _id3 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _cr3 = NULL;
modelica_metatype _a = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,2) == 0) goto tmp3_end;
_id = tmpMeta6;
_id2 = tmpMeta7;
_res = tmp4_3;
tmp4 += 2;
tmp8 = (stringEqual(_id, _id2));
if (1 != tmp8) goto goto_2;
tmpMeta1 = _res;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_boolean tmp14;
modelica_metatype tmpMeta15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,2) == 0) goto tmp3_end;
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
_id = tmpMeta9;
_a = tmpMeta10;
_cr1 = tmpMeta11;
_id2 = tmpMeta12;
_id3 = tmpMeta13;
tmp4 += 1;
tmp14 = (stringEqual(_id, _id2));
if (1 != tmp14) goto goto_2;
tmpMeta15 = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _id3, _a, _cr1);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_boolean tmp23;
modelica_metatype tmpMeta24;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,3) == 0) goto tmp3_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
_id = tmpMeta16;
_a = tmpMeta17;
_cr1 = tmpMeta18;
_id2 = tmpMeta19;
_cr2 = tmpMeta20;
_id3 = tmpMeta21;
_cr3 = tmpMeta22;
tmp23 = (stringEqual(_id, _id2));
if (1 != tmp23) goto goto_2;
_cr = omc_InteractiveUtil_replaceStartInComponentRef2(threadData, _cr1, _cr2, _cr3);
tmpMeta24 = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _id3, _a, _cr);
tmpMeta1 = tmpMeta24;
goto tmp3_done;
}
case 3: {
tmpMeta1 = _inComponentRef1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outComponentRef = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceStartInComponentRef(threadData_t *threadData, modelica_metatype _cr1, modelica_metatype _cr2, modelica_metatype _cr3)
{
modelica_metatype _res = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = omc_InteractiveUtil_replaceStartInComponentRef2(threadData, _cr1, _cr2, _cr3);
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExternalDecl(threadData_t *threadData, modelica_metatype _external_, modelica_metatype _old_comp, modelica_metatype _new_comp)
{
modelica_metatype _external_1 = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
fputs(MMC_STRINGDATA(_OMC_LIT369),stdout);
_external_1 = _external_;
_return: OMC_LABEL_UNUSED
return _external_1;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInNamedArgs(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynNamedArgLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynNamedArgLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_string _id = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 1;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
_id = tmpMeta9;
_exp = tmpMeta10;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInNamedArgs(threadData, _res, _old_comp, _new_comp);
tmpMeta12 = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _id, _exp_1);
tmpMeta11 = mmc_mk_cons(tmpMeta12, _res_1);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT370),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynNamedArgLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynNamedArgLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInIterators(threadData_t *threadData, modelica_metatype _iterators, modelica_metatype _oldComp, modelica_metatype _newComp)
{
modelica_metatype _iteratorsRenamed = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype __omcQ_24tmpVar37;
modelica_metatype* tmp2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype __omcQ_24tmpVar36;
modelica_integer tmp18;
modelica_metatype _it_loopVar = 0;
modelica_metatype _it;
_it_loopVar = _iterators;
tmpMeta3 = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar37 = tmpMeta3;
tmp2 = &__omcQ_24tmpVar37;
while(1) {
tmp18 = 1;
if (!listEmpty(_it_loopVar)) {
_it = MMC_CAR(_it_loopVar);
_it_loopVar = MMC_CDR(_it_loopVar);
tmp18--;
}
if (tmp18 == 0) {
{
modelica_metatype tmp7_1;
tmp7_1 = _it;
{
modelica_metatype _exp = NULL;
modelica_string _i = NULL;
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 3));
if (!optionNone(tmpMeta10)) goto tmp6_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 4));
if (optionNone(tmpMeta11)) goto tmp6_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 1));
_i = tmpMeta9;
_exp = tmpMeta12;
_exp = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _oldComp, _newComp);
tmpMeta13 = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _i, mmc_mk_none(), mmc_mk_some(_exp));
tmpMeta4 = tmpMeta13;
goto tmp6_done;
}
case 1: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 3));
if (!optionNone(tmpMeta15)) goto tmp6_end;
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 4));
if (!optionNone(tmpMeta16)) goto tmp6_end;
_i = tmpMeta14;
tmpMeta17 = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _i, mmc_mk_none(), mmc_mk_none());
tmpMeta4 = tmpMeta17;
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
MMC_THROW_INTERNAL();
goto tmp6_done;
tmp6_done:;
}
}__omcQ_24tmpVar36 = tmpMeta4;
*tmp2 = mmc_mk_cons(__omcQ_24tmpVar36,0);
tmp2 = &MMC_CDR(*tmp2);
} else if (tmp18 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp2 = mmc_mk_nil();
tmpMeta1 = __omcQ_24tmpVar37;
}
_iteratorsRenamed = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _iteratorsRenamed;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInFunctionArgs(threadData_t *threadData, modelica_metatype _inFunctionArgs1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outFunctionArgs = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inFunctionArgs1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _exps_1 = NULL;
modelica_metatype _exps = NULL;
modelica_metatype _namedArg_1 = NULL;
modelica_metatype _namedArg = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _iterators = NULL;
modelica_metatype _iteratorsRenamed = NULL;
modelica_metatype _iterType = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_exps = tmpMeta6;
_namedArg = tmpMeta7;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 1;
_exps_1 = omc_InteractiveUtil_renameComponentInExpList(threadData, _exps, _old_comp, _new_comp);
_namedArg_1 = omc_InteractiveUtil_renameComponentInNamedArgs(threadData, _namedArg, _old_comp, _new_comp);
tmpMeta8 = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _exps_1, _namedArg_1);
tmpMeta1 = tmpMeta8;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp = tmpMeta9;
_iterType = tmpMeta10;
_iterators = tmpMeta11;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_iteratorsRenamed = omc_InteractiveUtil_renameComponentInIterators(threadData, _iterators, _old_comp, _new_comp);
tmpMeta12 = mmc_mk_box4(4, &Absyn_FunctionArgs_FOR__ITER__FARG__desc, _exp1_1, _iterType, _iteratorsRenamed);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT371),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outFunctionArgs = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outFunctionArgs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpAlgoritmsList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynAlgorithmItemLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outTplAbsynExpAbsynAlgorithmItemLstLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inTplAbsynExpAbsynAlgorithmItemLstLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _algs_1 = NULL;
modelica_metatype _algs = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 1;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_exp = tmpMeta9;
_algs = tmpMeta10;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_algs_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInExpAlgoritmsList(threadData, _res, _old_comp, _new_comp);
tmpMeta12 = mmc_mk_box2(0, _exp_1, _algs_1);
tmpMeta11 = mmc_mk_cons(tmpMeta12, _res_1);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT372),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outTplAbsynExpAbsynAlgorithmItemLstLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outTplAbsynExpAbsynAlgorithmItemLstLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInAlgorithm(threadData_t *threadData, modelica_metatype _inAlgorithm1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAlgorithm = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inAlgorithm1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _cr_1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp2_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _algs1_1 = NULL;
modelica_metatype _algs2_1 = NULL;
modelica_metatype _algs1 = NULL;
modelica_metatype _algs2 = NULL;
modelica_metatype _algs_1 = NULL;
modelica_metatype _algs = NULL;
modelica_metatype _exp_algs_list_1 = NULL;
modelica_metatype _exp_algs_list = NULL;
modelica_string _id = NULL;
modelica_metatype _func_args_1 = NULL;
modelica_metatype _func_args = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,2,1) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr = tmpMeta7;
_exp = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_cr_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cr, _old_comp, _new_comp);
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
tmpMeta9 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr_1);
tmpMeta10 = mmc_mk_box3(3, &Absyn_Algorithm_ALG__ASSIGN__desc, tmpMeta9, _exp_1);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta11,16,1) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_exp1 = tmpMeta11;
_exp2 = tmpMeta12;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
tmpMeta13 = mmc_mk_box3(3, &Absyn_Algorithm_ALG__ASSIGN__desc, _exp1_1, _exp2_1);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_exp = tmpMeta14;
_algs1 = tmpMeta15;
_exp_algs_list = tmpMeta16;
_algs2 = tmpMeta17;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_algs1_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs1, _old_comp, _new_comp);
_exp_algs_list_1 = omc_InteractiveUtil_renameComponentInExpAlgoritmsList(threadData, _exp_algs_list, _old_comp, _new_comp);
_algs2_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs2, _old_comp, _new_comp);
tmpMeta18 = mmc_mk_box5(4, &Absyn_Algorithm_ALG__IF__desc, _exp_1, _algs1_1, _exp_algs_list_1, _algs2_1);
tmpMeta1 = tmpMeta18;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta19)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmpMeta19);
tmpMeta21 = MMC_CDR(tmpMeta19);
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 3));
if (!optionNone(tmpMeta23)) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta20), 4));
if (optionNone(tmpMeta24)) goto tmp3_end;
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta24), 1));
if (!listEmpty(tmpMeta21)) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta22;
_exp = tmpMeta25;
_algs = tmpMeta26;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_algs_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs, _old_comp, _new_comp);
tmpMeta28 = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _id, mmc_mk_none(), mmc_mk_some(_exp_1));
tmpMeta27 = mmc_mk_cons(tmpMeta28, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta29 = mmc_mk_box3(5, &Absyn_Algorithm_ALG__FOR__desc, tmpMeta27, _algs_1);
tmpMeta1 = tmpMeta29;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_exp = tmpMeta30;
_algs = tmpMeta31;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_algs_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs, _old_comp, _new_comp);
tmpMeta32 = mmc_mk_box3(7, &Absyn_Algorithm_ALG__WHILE__desc, _exp_1, _algs_1);
tmpMeta1 = tmpMeta32;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,3) == 0) goto tmp3_end;
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp = tmpMeta33;
_algs = tmpMeta34;
_exp_algs_list = tmpMeta35;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_algs_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs, _old_comp, _new_comp);
_exp_algs_list_1 = omc_InteractiveUtil_renameComponentInExpAlgoritmsList(threadData, _exp_algs_list, _old_comp, _new_comp);
tmpMeta36 = mmc_mk_box4(8, &Absyn_Algorithm_ALG__WHEN__A__desc, _exp_1, _algs_1, _exp_algs_list_1);
tmpMeta1 = tmpMeta36;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr = tmpMeta37;
_func_args = tmpMeta38;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_cr_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cr, _old_comp, _new_comp);
_func_args_1 = omc_InteractiveUtil_renameComponentInFunctionArgs(threadData, _func_args, _old_comp, _new_comp);
tmpMeta39 = mmc_mk_box3(9, &Absyn_Algorithm_ALG__NORETCALL__desc, _cr_1, _func_args_1);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAlgorithm = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAlgorithm;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInAlgorithms(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynAlgorithmItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inAbsynAlgorithmItemLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _algorithm_1 = NULL;
modelica_metatype _algorithm_ = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
_algorithm_ = tmpMeta7;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_res_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _res, _old_comp, _new_comp);
_algorithm_1 = _algorithm_;
tmpMeta9 = mmc_mk_cons(_algorithm_1, _res_1);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynAlgorithmItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynAlgorithmItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExp(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _oldPrefix, modelica_metatype _newPrefix)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inExp1;
tmp4_2 = _oldPrefix;
tmp4_3 = _newPrefix;
{
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp2_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _exp3_1 = NULL;
modelica_metatype _exp3 = NULL;
modelica_metatype _op = NULL;
modelica_metatype _exp_tuple_list_1 = NULL;
modelica_metatype _exp_tuple_list = NULL;
modelica_metatype _func_args = NULL;
modelica_metatype _exp_list_1 = NULL;
modelica_metatype _exp_list = NULL;
modelica_metatype _exp_list_list_1 = NULL;
modelica_metatype _exp_list_list = NULL;
modelica_metatype _code_1 = NULL;
modelica_metatype _code = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 20; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp4 += 18;
tmpMeta1 = _inExp1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp4 += 17;
tmpMeta1 = _inExp1;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta6;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 16;
_cr_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cr, _old_comp, _new_comp);
tmpMeta7 = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr_1);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp4 += 15;
tmpMeta1 = _inExp1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
tmp4 += 14;
tmpMeta1 = _inExp1;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,3) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp1 = tmpMeta8;
_op = tmpMeta9;
_exp2 = tmpMeta10;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 13;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
tmpMeta11 = mmc_mk_box4(8, &Absyn_Exp_BINARY__desc, _exp1_1, _op, _exp2_1);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta12;
_exp = tmpMeta13;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 12;
_exp = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
tmpMeta14 = mmc_mk_box3(9, &Absyn_Exp_UNARY__desc, _op, _exp);
tmpMeta1 = tmpMeta14;
goto tmp3_done;
}
case 7: {
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp1 = tmpMeta15;
_op = tmpMeta16;
_exp2 = tmpMeta17;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 11;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
tmpMeta18 = mmc_mk_box4(10, &Absyn_Exp_LBINARY__desc, _exp1_1, _op, _exp2_1);
tmpMeta1 = tmpMeta18;
goto tmp3_done;
}
case 8: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta19;
_exp = tmpMeta20;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 10;
_exp = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
tmpMeta21 = mmc_mk_box3(11, &Absyn_Exp_LUNARY__desc, _op, _exp);
tmpMeta1 = tmpMeta21;
goto tmp3_done;
}
case 9: {
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp1 = tmpMeta22;
_op = tmpMeta23;
_exp2 = tmpMeta24;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 9;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
tmpMeta25 = mmc_mk_box4(12, &Absyn_Exp_RELATION__desc, _exp1_1, _op, _exp2_1);
tmpMeta1 = tmpMeta25;
goto tmp3_done;
}
case 10: {
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_exp1 = tmpMeta26;
_exp2 = tmpMeta27;
_exp3 = tmpMeta28;
_exp_tuple_list = tmpMeta29;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 8;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
_exp3_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp3, _old_comp, _new_comp);
_exp_tuple_list_1 = omc_InteractiveUtil_renameComponentInExpTupleList(threadData, _exp_tuple_list, _old_comp, _new_comp);
tmpMeta30 = mmc_mk_box5(13, &Absyn_Exp_IFEXP__desc, _exp1_1, _exp2_1, _exp3_1, _exp_tuple_list_1);
tmpMeta1 = tmpMeta30;
goto tmp3_done;
}
case 11: {
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,3) == 0) goto tmp3_end;
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cref = tmpMeta31;
_func_args = tmpMeta32;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 7;
_cref = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cref, _old_comp, _new_comp);
_func_args = omc_InteractiveUtil_renameComponentInFunctionArgs(threadData, _func_args, _old_comp, _new_comp);
tmpMeta33 = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, _cref, _func_args, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4))));
tmpMeta1 = tmpMeta33;
goto tmp3_done;
}
case 12: {
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_exp_list = tmpMeta34;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 6;
_exp_list_1 = omc_InteractiveUtil_renameComponentInExpList(threadData, _exp_list, _old_comp, _new_comp);
tmpMeta35 = mmc_mk_box2(16, &Absyn_Exp_ARRAY__desc, _exp_list_1);
tmpMeta1 = tmpMeta35;
goto tmp3_done;
}
case 13: {
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,1) == 0) goto tmp3_end;
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_exp_list_list = tmpMeta36;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 5;
_exp_list_list_1 = omc_InteractiveUtil_renameComponentInExpListList(threadData, _exp_list_list, _old_comp, _new_comp);
tmpMeta37 = mmc_mk_box2(17, &Absyn_Exp_MATRIX__desc, _exp_list_list_1);
tmpMeta1 = tmpMeta37;
goto tmp3_done;
}
case 14: {
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,3) == 0) goto tmp3_end;
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta39)) goto tmp3_end;
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta39), 1));
tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp1 = tmpMeta38;
_exp2 = tmpMeta40;
_exp3 = tmpMeta41;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 4;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
_exp3_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp3, _old_comp, _new_comp);
tmpMeta42 = mmc_mk_box4(18, &Absyn_Exp_RANGE__desc, _exp1_1, mmc_mk_some(_exp2_1), _exp3_1);
tmpMeta1 = tmpMeta42;
goto tmp3_done;
}
case 15: {
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,3) == 0) goto tmp3_end;
tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!optionNone(tmpMeta44)) goto tmp3_end;
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp1 = tmpMeta43;
_exp3 = tmpMeta45;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 3;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp3_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp3, _old_comp, _new_comp);
tmpMeta46 = mmc_mk_box4(18, &Absyn_Exp_RANGE__desc, _exp1_1, mmc_mk_none(), _exp3_1);
tmpMeta1 = tmpMeta46;
goto tmp3_done;
}
case 16: {
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,1) == 0) goto tmp3_end;
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_exp_list = tmpMeta47;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 2;
_exp_list_1 = omc_InteractiveUtil_renameComponentInExpList(threadData, _exp_list, _old_comp, _new_comp);
tmpMeta48 = mmc_mk_box2(19, &Absyn_Exp_TUPLE__desc, _exp_list_1);
tmpMeta1 = tmpMeta48;
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,0) == 0) goto tmp3_end;
tmp4 += 1;
tmpMeta1 = _OMC_LIT373;
goto tmp3_done;
}
case 18: {
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,1) == 0) goto tmp3_end;
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_code = tmpMeta49;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_code_1 = omc_InteractiveUtil_renameComponentInCode(threadData, _code, _old_comp, _new_comp);
tmpMeta50 = mmc_mk_box2(21, &Absyn_Exp_CODE__desc, _code_1);
tmpMeta1 = tmpMeta50;
goto tmp3_done;
}
case 19: {
fputs(MMC_STRINGDATA(_OMC_LIT374),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 20) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInCode(threadData_t *threadData, modelica_metatype _inCode1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outCode = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inCode1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _path = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _eqn_items_1 = NULL;
modelica_metatype _eqn_items = NULL;
modelica_boolean _b;
modelica_boolean _finalPrefix;
modelica_metatype _algs_1 = NULL;
modelica_metatype _algs = NULL;
modelica_metatype _elementspec_1 = NULL;
modelica_metatype _elementspec = NULL;
modelica_metatype _redeclare_ = NULL;
modelica_metatype _inner_outer = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constrainClass = NULL;
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _element_args_1 = NULL;
modelica_metatype _element_args = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 8; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta6;
tmpMeta7 = mmc_mk_box2(3, &Absyn_CodeNode_C__TYPENAME__desc, _path);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_cr_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cr, _old_comp, _new_comp);
tmpMeta9 = mmc_mk_box2(4, &Absyn_CodeNode_C__VARIABLENAME__desc, _cr_1);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta10;
modelica_integer tmp11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp11 = mmc_unbox_integer(tmpMeta10);
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_b = tmp11;
_eqn_items = tmpMeta12;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_eqn_items_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _eqn_items, _old_comp, _new_comp);
tmpMeta13 = mmc_mk_box3(6, &Absyn_CodeNode_C__EQUATIONSECTION__desc, mmc_mk_boolean(_b), _eqn_items_1);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta14;
modelica_integer tmp15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp15 = mmc_unbox_integer(tmpMeta14);
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_b = tmp15;
_algs = tmpMeta16;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_algs_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs, _old_comp, _new_comp);
tmpMeta17 = mmc_mk_box3(7, &Absyn_CodeNode_C__ALGORITHMSECTION__desc, mmc_mk_boolean(_b), _algs_1);
tmpMeta1 = tmpMeta17;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_integer tmp20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta18,0,6) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
tmp20 = mmc_unbox_integer(tmpMeta19);
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 3));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 4));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 5));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 6));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 7));
_finalPrefix = tmp20;
_redeclare_ = tmpMeta21;
_inner_outer = tmpMeta22;
_elementspec = tmpMeta23;
_info = tmpMeta24;
_constrainClass = tmpMeta25;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_elementspec_1 = omc_InteractiveUtil_renameComponentInElementSpec(threadData, _elementspec, _old_comp, _new_comp);
tmpMeta26 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_finalPrefix), _redeclare_, _inner_outer, _elementspec_1, _info, _constrainClass);
tmpMeta27 = mmc_mk_box2(8, &Absyn_CodeNode_C__ELEMENT__desc, tmpMeta26);
tmpMeta1 = tmpMeta27;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,1) == 0) goto tmp3_end;
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_exp = tmpMeta28;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
tmpMeta29 = mmc_mk_box2(9, &Absyn_CodeNode_C__EXPRESSION__desc, _exp_1);
tmpMeta1 = tmpMeta29;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,1) == 0) goto tmp3_end;
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 2));
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta30), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,1,2) == 0) goto tmp3_end;
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 2));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 3));
_element_args = tmpMeta31;
_exp = tmpMeta33;
_info = tmpMeta34;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_element_args_1 = omc_InteractiveUtil_renameComponentInElementArgList(threadData, _element_args, _old_comp, _new_comp);
tmpMeta35 = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _exp_1, _info);
tmpMeta36 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _element_args_1, tmpMeta35);
tmpMeta37 = mmc_mk_box2(10, &Absyn_CodeNode_C__MODIFICATION__desc, tmpMeta36);
tmpMeta1 = tmpMeta37;
goto tmp3_done;
}
case 7: {
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,1) == 0) goto tmp3_end;
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta38), 2));
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta38), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta40,0,0) == 0) goto tmp3_end;
_element_args = tmpMeta39;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_element_args_1 = omc_InteractiveUtil_renameComponentInElementArgList(threadData, _element_args, _old_comp, _new_comp);
tmpMeta41 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _element_args_1, _OMC_LIT13);
tmpMeta42 = mmc_mk_box2(10, &Absyn_CodeNode_C__MODIFICATION__desc, tmpMeta41);
tmpMeta1 = tmpMeta42;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCode = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outCode;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementArg(threadData_t *threadData, modelica_metatype _inElementArg1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outElementArg = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inElementArg1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _element_args_1 = NULL;
modelica_metatype _element_args = NULL;
modelica_boolean _b;
modelica_metatype _each_ = NULL;
modelica_metatype _str = NULL;
modelica_metatype _element_spec_1 = NULL;
modelica_metatype _element_spec2_1 = NULL;
modelica_metatype _element_spec = NULL;
modelica_metatype _element_spec2 = NULL;
modelica_metatype _redecl = NULL;
modelica_metatype _c = NULL;
modelica_metatype _info = NULL;
modelica_metatype _mod_info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_integer tmp7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta6);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (optionNone(tmpMeta10)) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 1));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 2));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta11), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta13,1,2) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta13), 3));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_b = tmp7;
_each_ = tmpMeta8;
_p = tmpMeta9;
_element_args = tmpMeta12;
_exp = tmpMeta14;
_info = tmpMeta15;
_str = tmpMeta16;
_mod_info = tmpMeta17;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_p_1 = omc_AbsynUtil_crefToPath(threadData, omc_InteractiveUtil_replaceStartInComponentRef(threadData, omc_AbsynUtil_pathToCref(threadData, _p), _old_comp, _new_comp));
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_element_args_1 = omc_InteractiveUtil_renameComponentInElementArgList(threadData, _element_args, _old_comp, _new_comp);
tmpMeta18 = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _exp_1, _info);
tmpMeta19 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _element_args_1, tmpMeta18);
tmpMeta20 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_b), _each_, _p_1, mmc_mk_some(tmpMeta19), _str, _mod_info);
tmpMeta1 = tmpMeta20;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta21;
modelica_integer tmp22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp22 = mmc_unbox_integer(tmpMeta21);
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (optionNone(tmpMeta25)) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta25), 1));
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 2));
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta28,0,0) == 0) goto tmp3_end;
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_b = tmp22;
_each_ = tmpMeta23;
_p = tmpMeta24;
_element_args = tmpMeta27;
_str = tmpMeta29;
_mod_info = tmpMeta30;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_p_1 = omc_AbsynUtil_crefToPath(threadData, omc_InteractiveUtil_replaceStartInComponentRef(threadData, omc_AbsynUtil_pathToCref(threadData, _p), _old_comp, _new_comp));
_element_args_1 = omc_InteractiveUtil_renameComponentInElementArgList(threadData, _element_args, _old_comp, _new_comp);
tmpMeta31 = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _element_args_1, _OMC_LIT13);
tmpMeta32 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_b), _each_, _p_1, mmc_mk_some(tmpMeta31), _str, _mod_info);
tmpMeta1 = tmpMeta32;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta33;
modelica_integer tmp34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp34 = mmc_unbox_integer(tmpMeta33);
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (!optionNone(tmpMeta37)) goto tmp3_end;
tmpMeta38 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_b = tmp34;
_each_ = tmpMeta35;
_p = tmpMeta36;
_str = tmpMeta38;
_mod_info = tmpMeta39;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_p_1 = omc_AbsynUtil_crefToPath(threadData, omc_InteractiveUtil_replaceStartInComponentRef(threadData, omc_AbsynUtil_pathToCref(threadData, _p), _old_comp, _new_comp));
tmpMeta40 = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_b), _each_, _p_1, mmc_mk_none(), _str, _mod_info);
tmpMeta1 = tmpMeta40;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta41;
modelica_integer tmp42;
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
modelica_metatype tmpMeta46;
modelica_metatype tmpMeta47;
modelica_metatype tmpMeta48;
modelica_metatype tmpMeta49;
modelica_metatype tmpMeta50;
modelica_metatype tmpMeta51;
modelica_metatype tmpMeta52;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,6) == 0) goto tmp3_end;
tmpMeta41 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp42 = mmc_unbox_integer(tmpMeta41);
tmpMeta43 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta44 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta45 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta46 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (optionNone(tmpMeta46)) goto tmp3_end;
tmpMeta47 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta46), 1));
tmpMeta48 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta47), 2));
tmpMeta49 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta47), 3));
tmpMeta50 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_b = tmp42;
_redecl = tmpMeta43;
_each_ = tmpMeta44;
_element_spec = tmpMeta45;
_element_spec2 = tmpMeta48;
_c = tmpMeta49;
_info = tmpMeta50;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_element_spec_1 = omc_InteractiveUtil_renameComponentInElementSpec(threadData, _element_spec, _old_comp, _new_comp);
_element_spec2_1 = omc_InteractiveUtil_renameComponentInElementSpec(threadData, _element_spec2, _old_comp, _new_comp);
tmpMeta51 = mmc_mk_box3(3, &Absyn_ConstrainClass_CONSTRAINCLASS__desc, _element_spec2_1, _c);
tmpMeta52 = mmc_mk_box7(4, &Absyn_ElementArg_REDECLARATION__desc, mmc_mk_boolean(_b), _redecl, _each_, _element_spec_1, mmc_mk_some(tmpMeta51), _info);
tmpMeta1 = tmpMeta52;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta53;
modelica_integer tmp54;
modelica_metatype tmpMeta55;
modelica_metatype tmpMeta56;
modelica_metatype tmpMeta57;
modelica_metatype tmpMeta58;
modelica_metatype tmpMeta59;
modelica_metatype tmpMeta60;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,6) == 0) goto tmp3_end;
tmpMeta53 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp54 = mmc_unbox_integer(tmpMeta53);
tmpMeta55 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta56 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta57 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta58 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (!optionNone(tmpMeta58)) goto tmp3_end;
tmpMeta59 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_b = tmp54;
_redecl = tmpMeta55;
_each_ = tmpMeta56;
_element_spec = tmpMeta57;
_info = tmpMeta59;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_element_spec_1 = omc_InteractiveUtil_renameComponentInElementSpec(threadData, _element_spec, _old_comp, _new_comp);
tmpMeta60 = mmc_mk_box7(4, &Absyn_ElementArg_REDECLARATION__desc, mmc_mk_boolean(_b), _redecl, _each_, _element_spec_1, mmc_mk_none(), _info);
tmpMeta1 = tmpMeta60;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElementArg = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementArgList(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynElementArgLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynElementArgLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _element_arg_1 = NULL;
modelica_metatype _element_arg = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 1;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
_element_arg = tmpMeta7;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_element_arg_1 = omc_InteractiveUtil_renameComponentInElementArg(threadData, _element_arg, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInElementArgList(threadData, _res, _old_comp, _new_comp);
tmpMeta9 = mmc_mk_cons(_element_arg_1, _res_1);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT375),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementArgLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementArgLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpTupleList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynExpLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outTplAbsynExpAbsynExpLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inTplAbsynExpAbsynExpLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp2_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 1;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_exp1 = tmpMeta9;
_exp2 = tmpMeta10;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInExpTupleList(threadData, _res, _old_comp, _new_comp);
tmpMeta12 = mmc_mk_box2(0, _exp1_1, _exp2_1);
tmpMeta11 = mmc_mk_cons(tmpMeta12, _res_1);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT376),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outTplAbsynExpAbsynExpLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outTplAbsynExpAbsynExpLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpListList(threadData_t *threadData, modelica_metatype _inAbsynExpLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynExpLstLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynExpLstLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 1;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
_exp = tmpMeta7;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExpList(threadData, _exp, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInExpListList(threadData, _res, _old_comp, _new_comp);
tmpMeta9 = mmc_mk_cons(_exp_1, _res_1);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT377),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynExpLstLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynExpLstLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpList(threadData_t *threadData, modelica_metatype _inAbsynExpLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynExpLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynExpLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 1;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
_exp = tmpMeta7;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInExpList(threadData, _res, _old_comp, _new_comp);
tmpMeta9 = mmc_mk_cons(_exp_1, _res_1);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT378),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynExpLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynExpLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInEquation(threadData_t *threadData, modelica_metatype _inEquation1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outEquation = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inEquation1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp2_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _true_items_1 = NULL;
modelica_metatype _elses_1 = NULL;
modelica_metatype _true_items = NULL;
modelica_metatype _elses = NULL;
modelica_metatype _equations_1 = NULL;
modelica_metatype _equations = NULL;
modelica_metatype _exp_elseifs_1 = NULL;
modelica_metatype _exp_elseifs = NULL;
modelica_metatype _exp_equations_1 = NULL;
modelica_metatype _exp_equations = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _cref1_1 = NULL;
modelica_metatype _cref2_1 = NULL;
modelica_metatype _cref1 = NULL;
modelica_metatype _cref2 = NULL;
modelica_metatype _cref = NULL;
modelica_string _ident = NULL;
modelica_metatype _function_args = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 8; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_exp = tmpMeta6;
_true_items = tmpMeta7;
_exp_elseifs = tmpMeta8;
_elses = tmpMeta9;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 6;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_true_items_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _true_items, _old_comp, _new_comp);
_exp_elseifs_1 = omc_InteractiveUtil_renameComponentInExpEquationitemList(threadData, _exp_elseifs, _old_comp, _new_comp);
_elses_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _elses, _old_comp, _new_comp);
tmpMeta10 = mmc_mk_box5(3, &Absyn_Equation_EQ__IF__desc, _exp_1, _true_items_1, _exp_elseifs_1, _elses_1);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_exp1 = tmpMeta11;
_exp2 = tmpMeta12;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 5;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
tmpMeta13 = mmc_mk_box3(4, &Absyn_Equation_EQ__EQUALS__desc, _exp1_1, _exp2_1);
tmpMeta1 = tmpMeta13;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp1 = tmpMeta14;
_exp2 = tmpMeta15;
_cref1 = tmpMeta16;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 4;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
_cref1_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cref1, _old_comp, _new_comp);
tmpMeta17 = mmc_mk_box4(5, &Absyn_Equation_EQ__PDE__desc, _exp1_1, _exp2_1, _cref1_1);
tmpMeta1 = tmpMeta17;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cref1 = tmpMeta18;
_cref2 = tmpMeta19;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 3;
_cref1_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cref1, _old_comp, _new_comp);
_cref2_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cref2, _old_comp, _new_comp);
tmpMeta20 = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _cref1_1, _cref2_1);
tmpMeta1 = tmpMeta20;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta21)) goto tmp3_end;
tmpMeta22 = MMC_CAR(tmpMeta21);
tmpMeta23 = MMC_CDR(tmpMeta21);
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
tmpMeta25 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 3));
if (!optionNone(tmpMeta25)) goto tmp3_end;
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 4));
if (optionNone(tmpMeta26)) goto tmp3_end;
tmpMeta27 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta26), 1));
if (!listEmpty(tmpMeta23)) goto tmp3_end;
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_ident = tmpMeta24;
_exp = tmpMeta27;
_equations = tmpMeta28;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 2;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_equations_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _equations, _old_comp, _new_comp);
tmpMeta30 = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _ident, mmc_mk_none(), mmc_mk_some(_exp_1));
tmpMeta29 = mmc_mk_cons(tmpMeta30, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta31 = mmc_mk_box3(7, &Absyn_Equation_EQ__FOR__desc, tmpMeta29, _equations_1);
tmpMeta1 = tmpMeta31;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,3) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_exp = tmpMeta32;
_equations = tmpMeta33;
_exp_equations = tmpMeta34;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 1;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_equations_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _equations, _old_comp, _new_comp);
_exp_equations_1 = omc_InteractiveUtil_renameComponentInExpEquationitemList(threadData, _exp_equations, _old_comp, _new_comp);
tmpMeta35 = mmc_mk_box4(8, &Absyn_Equation_EQ__WHEN__E__desc, _exp_1, _equations_1, _exp_equations_1);
tmpMeta1 = tmpMeta35;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cref = tmpMeta36;
_function_args = tmpMeta37;
fputs(MMC_STRINGDATA(_OMC_LIT379),stdout);
tmpMeta38 = mmc_mk_box3(9, &Absyn_Equation_EQ__NORETCALL__desc, _cref, _function_args);
tmpMeta1 = tmpMeta38;
goto tmp3_done;
}
case 7: {
fputs(MMC_STRINGDATA(_OMC_LIT380),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 8) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outEquation = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outEquation;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpEquationitemList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynEquationItemLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outTplAbsynExpAbsynEquationItemLstLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inTplAbsynExpAbsynEquationItemLstLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _eqn_item_1 = NULL;
modelica_metatype _eqn_item = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 1;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_exp1 = tmpMeta9;
_eqn_item = tmpMeta10;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_eqn_item_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _eqn_item, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInExpEquationitemList(threadData, _res, _old_comp, _new_comp);
tmpMeta12 = mmc_mk_box2(0, _exp1_1, _eqn_item_1);
tmpMeta11 = mmc_mk_cons(tmpMeta12, _res_1);
tmpMeta1 = tmpMeta11;
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT381),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outTplAbsynExpAbsynEquationItemLstLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outTplAbsynExpAbsynEquationItemLstLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInEquationList(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynEquationItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynEquationItemLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _equation_1 = NULL;
modelica_metatype _equation_ = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _info = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _equation_item = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,3) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_equation_ = tmpMeta9;
_cmt = tmpMeta10;
_info = tmpMeta11;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_res_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _res, _old_comp, _new_comp);
_equation_1 = omc_InteractiveUtil_renameComponentInEquation(threadData, _equation_, _old_comp, _new_comp);
tmpMeta13 = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, _equation_1, _cmt, _info);
tmpMeta12 = mmc_mk_cons(tmpMeta13, _res_1);
tmpMeta1 = tmpMeta12;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta14 = MMC_CAR(tmp4_1);
tmpMeta15 = MMC_CDR(tmp4_1);
_equation_item = tmpMeta14;
_res = tmpMeta15;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_res_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _res, _old_comp, _new_comp);
tmpMeta16 = mmc_mk_cons(_equation_item, _res_1);
tmpMeta1 = tmpMeta16;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynEquationItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInComponentitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynComponentItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynComponentItemLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _old_comp_path = NULL;
modelica_metatype _new_comp_path = NULL;
modelica_string _old_comp_string = NULL;
modelica_string _new_comp_string = NULL;
modelica_string _name = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comp_1 = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _arrayDim = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _comment = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_boolean tmp15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 3));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 4));
_name = tmpMeta10;
_arrayDim = tmpMeta11;
_mod = tmpMeta12;
_cond = tmpMeta13;
_comment = tmpMeta14;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_old_comp_path = omc_AbsynUtil_crefToPath(threadData, _old_comp);
_old_comp_string = omc_AbsynUtil_pathString(threadData, _old_comp_path, _OMC_LIT0, 1, 0);
tmp15 = (stringEqual(_name, _old_comp_string));
if (1 != tmp15) goto goto_2;
_new_comp_path = omc_AbsynUtil_crefToPath(threadData, _new_comp);
_new_comp_string = omc_AbsynUtil_pathString(threadData, _new_comp_path, _OMC_LIT0, 1, 0);
_res_1 = omc_InteractiveUtil_renameComponentInComponentitems(threadData, _res, _old_comp, _new_comp);
tmpMeta16 = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _new_comp_string, _arrayDim, _mod);
tmpMeta17 = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta16, _cond, _comment);
_comp_1 = tmpMeta17;
tmpMeta18 = mmc_mk_cons(_comp_1, _res_1);
tmpMeta1 = tmpMeta18;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta19 = MMC_CAR(tmp4_1);
tmpMeta20 = MMC_CDR(tmp4_1);
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta19), 2));
_comp = tmpMeta19;
_res = tmpMeta20;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_res_1 = omc_InteractiveUtil_renameComponentInComponentitems(threadData, _res, _old_comp, _new_comp);
tmpMeta22 = mmc_mk_cons(_comp, _res_1);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 3: {
fputs(MMC_STRINGDATA(_OMC_LIT382),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynComponentItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynComponentItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inElementSpec1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _comps_1 = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _path = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_attr = tmpMeta6;
_path = tmpMeta7;
_comps = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_comps_1 = omc_InteractiveUtil_renameComponentInComponentitems(threadData, _comps, _old_comp, _new_comp);
tmpMeta9 = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr, _path, _comps_1);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
case 1: {
tmpMeta1 = _inElementSpec1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElementSpec = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynElementItemLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elementspec_1 = NULL;
modelica_metatype _elementspec = NULL;
modelica_metatype _element_1 = NULL;
modelica_metatype _element = NULL;
modelica_boolean _finalPrefix;
modelica_metatype _redeclare_ = NULL;
modelica_metatype _inner_outer = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constrainClass = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_integer tmp11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta9,0,6) == 0) goto tmp3_end;
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 2));
tmp11 = mmc_unbox_integer(tmpMeta10);
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 3));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 4));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 5));
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 6));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta9), 7));
_finalPrefix = tmp11;
_redeclare_ = tmpMeta12;
_inner_outer = tmpMeta13;
_elementspec = tmpMeta14;
_info = tmpMeta15;
_constrainClass = tmpMeta16;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_res_1 = omc_InteractiveUtil_renameComponentInElements(threadData, _res, _old_comp, _new_comp);
_elementspec_1 = omc_InteractiveUtil_renameComponentInElementSpec(threadData, _elementspec, _old_comp, _new_comp);
tmpMeta17 = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_finalPrefix), _redeclare_, _inner_outer, _elementspec_1, _info, _constrainClass);
tmpMeta18 = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta17);
_element_1 = tmpMeta18;
tmpMeta19 = mmc_mk_cons(_element_1, _res_1);
tmpMeta1 = tmpMeta19;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta20 = MMC_CAR(tmp4_1);
tmpMeta21 = MMC_CDR(tmp4_1);
_element = tmpMeta20;
_res = tmpMeta21;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_res_1 = omc_InteractiveUtil_renameComponentInElements(threadData, _res, _old_comp, _new_comp);
_element_1 = _element;
tmpMeta22 = mmc_mk_cons(_element_1, _res_1);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementItemLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynClassPartLst1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elements_1 = NULL;
modelica_metatype _elements = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _equations_1 = NULL;
modelica_metatype _equations = NULL;
modelica_metatype _algorithms_1 = NULL;
modelica_metatype _algorithms = NULL;
modelica_metatype _external_decl_1 = NULL;
modelica_metatype _external_decl = NULL;
modelica_metatype _ano = NULL;
modelica_metatype _a = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 9; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 8;
tmpMeta6 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta6;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta7 = MMC_CAR(tmp4_1);
tmpMeta8 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,1) == 0) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_elements = tmpMeta9;
_res = tmpMeta8;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 6;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_elements_1 = omc_InteractiveUtil_renameComponentInElements(threadData, _elements, _old_comp, _new_comp);
tmpMeta11 = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elements_1);
tmpMeta10 = mmc_mk_cons(tmpMeta11, _res_1);
tmpMeta1 = tmpMeta10;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta12 = MMC_CAR(tmp4_1);
tmpMeta13 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta12,1,1) == 0) goto tmp3_end;
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta12), 2));
_elements = tmpMeta14;
_res = tmpMeta13;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 5;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_elements_1 = omc_InteractiveUtil_renameComponentInElements(threadData, _elements, _old_comp, _new_comp);
tmpMeta16 = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elements_1);
tmpMeta15 = mmc_mk_cons(tmpMeta16, _res_1);
tmpMeta1 = tmpMeta15;
goto tmp3_done;
}
case 3: {
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta17 = MMC_CAR(tmp4_1);
tmpMeta18 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta17,3,1) == 0) goto tmp3_end;
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta17), 2));
_equations = tmpMeta19;
_res = tmpMeta18;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 4;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_equations_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _equations, _old_comp, _new_comp);
tmpMeta21 = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _equations_1);
tmpMeta20 = mmc_mk_cons(tmpMeta21, _res_1);
tmpMeta1 = tmpMeta20;
goto tmp3_done;
}
case 4: {
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_metatype tmpMeta26;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta22 = MMC_CAR(tmp4_1);
tmpMeta23 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta22,4,1) == 0) goto tmp3_end;
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta22), 2));
_equations = tmpMeta24;
_res = tmpMeta23;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 3;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_equations_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _equations, _old_comp, _new_comp);
tmpMeta26 = mmc_mk_box2(7, &Absyn_ClassPart_INITIALEQUATIONS__desc, _equations_1);
tmpMeta25 = mmc_mk_cons(tmpMeta26, _res_1);
tmpMeta1 = tmpMeta25;
goto tmp3_done;
}
case 5: {
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta27 = MMC_CAR(tmp4_1);
tmpMeta28 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta27,5,1) == 0) goto tmp3_end;
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta27), 2));
_algorithms = tmpMeta29;
_res = tmpMeta28;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 2;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_algorithms_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algorithms, _old_comp, _new_comp);
tmpMeta31 = mmc_mk_box2(8, &Absyn_ClassPart_ALGORITHMS__desc, _algorithms_1);
tmpMeta30 = mmc_mk_cons(tmpMeta31, _res_1);
tmpMeta1 = tmpMeta30;
goto tmp3_done;
}
case 6: {
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta32 = MMC_CAR(tmp4_1);
tmpMeta33 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta32,6,1) == 0) goto tmp3_end;
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta32), 2));
_algorithms = tmpMeta34;
_res = tmpMeta33;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 1;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_algorithms_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algorithms, _old_comp, _new_comp);
tmpMeta36 = mmc_mk_box2(9, &Absyn_ClassPart_INITIALALGORITHMS__desc, _algorithms_1);
tmpMeta35 = mmc_mk_cons(tmpMeta36, _res_1);
tmpMeta1 = tmpMeta35;
goto tmp3_done;
}
case 7: {
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
modelica_metatype tmpMeta40;
modelica_metatype tmpMeta41;
modelica_metatype tmpMeta42;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta37 = MMC_CAR(tmp4_1);
tmpMeta38 = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta37,7,2) == 0) goto tmp3_end;
tmpMeta39 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 2));
tmpMeta40 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta37), 3));
_external_decl = tmpMeta39;
_ano = tmpMeta40;
_res = tmpMeta38;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_external_decl_1 = omc_InteractiveUtil_renameComponentInExternalDecl(threadData, _external_decl, _old_comp, _new_comp);
tmpMeta42 = mmc_mk_box3(10, &Absyn_ClassPart_EXTERNAL__desc, _external_decl_1, _ano);
tmpMeta41 = mmc_mk_cons(tmpMeta42, _res_1);
tmpMeta1 = tmpMeta41;
goto tmp3_done;
}
case 8: {
modelica_metatype tmpMeta43;
modelica_metatype tmpMeta44;
modelica_metatype tmpMeta45;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta43 = MMC_CAR(tmp4_1);
tmpMeta44 = MMC_CDR(tmp4_1);
_a = tmpMeta43;
_res = tmpMeta44;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
tmpMeta45 = mmc_mk_cons(_a, _res_1);
tmpMeta1 = tmpMeta45;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 9) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassPartLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inClass1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _name = NULL;
modelica_string _baseClassName = NULL;
modelica_boolean _partialPrefix;
modelica_boolean _finalPrefix;
modelica_boolean _encapsulatedPrefix;
modelica_metatype _restriction = NULL;
modelica_metatype _a = NULL;
modelica_metatype _c = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _b = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
modelica_metatype tmpMeta9;
modelica_integer tmp10;
modelica_metatype tmpMeta11;
modelica_integer tmp12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_metatype tmpMeta15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta9);
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta11);
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta14 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta14,0,5) == 0) goto tmp3_end;
tmpMeta15 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 2));
tmpMeta16 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 3));
tmpMeta17 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 4));
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 5));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta14), 6));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta6;
_partialPrefix = tmp8;
_finalPrefix = tmp10;
_encapsulatedPrefix = tmp12;
_restriction = tmpMeta13;
_typeVars = tmpMeta15;
_classAttrs = tmpMeta16;
_parts = tmpMeta17;
_ann = tmpMeta18;
_a = tmpMeta19;
_file_info = tmpMeta20;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
tmp4 += 1;
_parts_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _parts, _old_comp, _new_comp);
tmpMeta21 = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _a);
tmpMeta22 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta21, _file_info);
tmpMeta1 = tmpMeta22;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_integer tmp25;
modelica_metatype tmpMeta26;
modelica_integer tmp27;
modelica_metatype tmpMeta28;
modelica_integer tmp29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
modelica_metatype tmpMeta33;
modelica_metatype tmpMeta34;
modelica_metatype tmpMeta35;
modelica_metatype tmpMeta36;
modelica_metatype tmpMeta37;
modelica_metatype tmpMeta38;
modelica_metatype tmpMeta39;
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp25 = mmc_unbox_integer(tmpMeta24);
tmpMeta26 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp27 = mmc_unbox_integer(tmpMeta26);
tmpMeta28 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp29 = mmc_unbox_integer(tmpMeta28);
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta31,4,5) == 0) goto tmp3_end;
tmpMeta32 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 2));
tmpMeta33 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 3));
tmpMeta34 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 4));
tmpMeta35 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 5));
tmpMeta36 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta31), 6));
tmpMeta37 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta23;
_partialPrefix = tmp25;
_finalPrefix = tmp27;
_encapsulatedPrefix = tmp29;
_restriction = tmpMeta30;
_baseClassName = tmpMeta32;
_b = tmpMeta33;
_c = tmpMeta34;
_parts = tmpMeta35;
_ann = tmpMeta36;
_file_info = tmpMeta37;
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_parts_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _parts, _old_comp, _new_comp);
tmpMeta38 = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _b, _c, _parts_1, _ann);
tmpMeta39 = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta38, _file_info);
tmpMeta1 = tmpMeta39;
goto tmp3_done;
}
case 2: {
tmpMeta1 = _inClass1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionComponentReplacement)
{
modelica_metatype _outTplAbsynClassAbsynPathOptionComponentReplacement = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inTplAbsynClassAbsynPathOptionComponentReplacement;
{
modelica_metatype _path_1 = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _class_id = NULL;
modelica_metatype _class_1 = NULL;
modelica_metatype _class_ = NULL;
modelica_string _id = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _args = NULL;
modelica_metatype _opath = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
modelica_metatype tmpMeta12;
modelica_metatype tmpMeta13;
modelica_metatype tmpMeta14;
modelica_boolean tmp15;
modelica_metatype tmpMeta16;
modelica_metatype tmpMeta17;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 2));
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (optionNone(tmpMeta8)) goto tmp3_end;
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 1));
tmpMeta10 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta11 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 2));
tmpMeta12 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 3));
tmpMeta13 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta10), 4));
_class_ = tmpMeta6;
_id = tmpMeta7;
_pa = tmpMeta9;
_class_id = tmpMeta11;
_old_comp = tmpMeta12;
_new_comp = tmpMeta13;
tmp4 += 1;
tmpMeta14 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = omc_AbsynUtil_joinPaths(threadData, _pa, tmpMeta14);
tmp15 = omc_AbsynUtil_pathEqual(threadData, _class_id, _path_1);
if (1 != tmp15) goto goto_2;
_class_1 = omc_InteractiveUtil_renameComponentInClass(threadData, _class_, _old_comp, _new_comp);
tmpMeta16 = mmc_mk_box4(3, &GlobalScript_ComponentReplacement_COMPONENTREPLACEMENT__desc, _class_id, _old_comp, _new_comp);
tmpMeta17 = mmc_mk_box3(0, _class_1, mmc_mk_some(_pa), tmpMeta16);
tmpMeta1 = tmpMeta17;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta18;
modelica_metatype tmpMeta19;
modelica_metatype tmpMeta20;
modelica_metatype tmpMeta21;
modelica_metatype tmpMeta22;
modelica_metatype tmpMeta23;
modelica_metatype tmpMeta24;
modelica_metatype tmpMeta25;
modelica_boolean tmp26;
modelica_metatype tmpMeta27;
modelica_metatype tmpMeta28;
tmpMeta18 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta19 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta18), 2));
tmpMeta20 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!optionNone(tmpMeta20)) goto tmp3_end;
tmpMeta21 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta22 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 2));
tmpMeta23 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 3));
tmpMeta24 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta21), 4));
_class_ = tmpMeta18;
_id = tmpMeta19;
_class_id = tmpMeta22;
_old_comp = tmpMeta23;
_new_comp = tmpMeta24;
tmpMeta25 = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta25;
tmp26 = omc_AbsynUtil_pathEqual(threadData, _class_id, _path_1);
if (1 != tmp26) goto goto_2;
_class_1 = omc_InteractiveUtil_renameComponentInClass(threadData, _class_, _old_comp, _new_comp);
tmpMeta27 = mmc_mk_box4(3, &GlobalScript_ComponentReplacement_COMPONENTREPLACEMENT__desc, _class_id, _old_comp, _new_comp);
tmpMeta28 = mmc_mk_box3(0, _class_1, mmc_mk_none(), tmpMeta27);
tmpMeta1 = tmpMeta28;
goto tmp3_done;
}
case 2: {
modelica_metatype tmpMeta29;
modelica_metatype tmpMeta30;
modelica_metatype tmpMeta31;
modelica_metatype tmpMeta32;
tmpMeta29 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta30 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta31 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_class_ = tmpMeta29;
_opath = tmpMeta30;
_args = tmpMeta31;
tmpMeta32 = mmc_mk_box3(0, _class_, _opath, _args);
tmpMeta1 = tmpMeta32;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outTplAbsynClassAbsynPathOptionComponentReplacement = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outTplAbsynClassAbsynPathOptionComponentReplacement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentFromComponentreplacements(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inComponentReplacementRules)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inProgram;
tmp4_2 = _inComponentReplacementRules;
{
modelica_metatype _p = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _comp_reps = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comp_rep = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_p = tmp4_1;
_comp_reps = tmp4_2;
tmp6 = omc_InteractiveUtil_emptyComponentReplacementRules(threadData, _comp_reps);
if (1 != tmp6) goto goto_2;
tmpMeta1 = _p;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_p = tmp4_1;
_comp_reps = tmp4_2;
_comp_rep = omc_InteractiveUtil_firstComponentReplacement(threadData, _comp_reps);
tmpMeta7 = omc_AbsynUtil_traverseClasses(threadData, _p, mmc_mk_none(), boxvar_InteractiveUtil_renameComponentVisitor, _comp_rep, 1);
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 1));
_p_1 = tmpMeta8;
_res = omc_InteractiveUtil_restComponentReplacementRules(threadData, _comp_reps);
tmpMeta1 = omc_InteractiveUtil_renameComponentFromComponentreplacements(threadData, _p_1, _res);
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT383),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractRenamedClassesAsStringList(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inComponentReplacementRules;
{
modelica_metatype _comp_reps = NULL;
modelica_metatype _res = NULL;
modelica_metatype _path = NULL;
modelica_string _path_str = NULL;
modelica_metatype _res_1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_metatype tmpMeta7;
_comp_reps = tmp4_1;
tmp6 = omc_InteractiveUtil_emptyComponentReplacementRules(threadData, _comp_reps);
if (1 != tmp6) goto goto_2;
tmpMeta7 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta7;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
_comp_reps = tmp4_1;
tmpMeta8 = omc_InteractiveUtil_firstComponentReplacement(threadData, _comp_reps);
tmpMeta9 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta8), 2));
_path = tmpMeta9;
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
_res = omc_InteractiveUtil_restComponentReplacementRules(threadData, _comp_reps);
_res_1 = omc_InteractiveUtil_extractRenamedClassesAsStringList(threadData, _res);
tmpMeta10 = mmc_mk_cons(_path_str, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta1 = omc_List_union(threadData, tmpMeta10, _res_1);
goto tmp3_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT384),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_renameComponentOnlyInClass(threadData_t *threadData, modelica_metatype _inProgram1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inComponentRef4, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inProgram1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inComponentRef4;
{
modelica_metatype _p = NULL;
modelica_string _paths_2 = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _cl = NULL;
modelica_metatype _model_path = NULL;
modelica_string _str = NULL;
modelica_metatype _w = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_p = tmp4_1;
_class_ = tmp4_2;
_model_path = omc_AbsynUtil_crefToPath(threadData, _class_);
tmp6 = omc_InteractiveUtil_isClassReadOnly(threadData, omc_InteractiveUtil_getPathedClassInProgram(threadData, _model_path, _p, 0));
if (1 != tmp6) goto goto_2;
_str = omc_AbsynUtil_pathString(threadData, _model_path, _OMC_LIT0, 1, 0);
tmpMeta7 = stringAppend(_OMC_LIT287,_str);
tmpMeta8 = stringAppend(tmpMeta7,_OMC_LIT385);
_str = tmpMeta8;
tmp1_c0 = _str;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
modelica_metatype tmpMeta10;
modelica_metatype tmpMeta11;
_p = tmp4_1;
_class_ = tmp4_2;
_old_comp = tmp4_3;
_new_comp = tmp4_4;
_model_path = omc_AbsynUtil_crefToPath(threadData, _class_);
_cl = omc_InteractiveUtil_getPathedClassInProgram(threadData, _model_path, _p, 0);
_cl = omc_InteractiveUtil_renameComponentInClass(threadData, _cl, _old_comp, _new_comp);
_w = omc_InteractiveUtil_buildWithin(threadData, omc_AbsynUtil_makeFullyQualified(threadData, _model_path));
tmpMeta9 = mmc_mk_cons(_cl, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta10 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta9, _w);
_p = omc_InteractiveUtil_updateProgram(threadData, tmpMeta10, _p, 0);
_str = omc_AbsynUtil_pathString(threadData, _model_path, _OMC_LIT0, 1, 0);
tmpMeta11 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
_paths_2 = stringAppendList(tmpMeta11);
tmp1_c0 = _paths_2;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
case 2: {
if(omc_Flags_isSet(threadData, _OMC_LIT390))
{
omc_Debug_trace(threadData, _OMC_LIT386);
}
tmp1_c0 = _OMC_LIT32;
tmpMeta[0+1] = _inProgram1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_renameComponent(threadData_t *threadData, modelica_metatype _inProgram1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inComponentRef4, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inProgram1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inComponentRef4;
{
modelica_metatype _comp_reps = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _p = NULL;
modelica_metatype _paths = NULL;
modelica_string _paths_1 = NULL;
modelica_string _paths_2 = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _model_path = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
_p = tmp4_1;
_class_ = tmp4_2;
_model_path = omc_AbsynUtil_crefToPath(threadData, _class_);
tmp6 = omc_InteractiveUtil_isClassReadOnly(threadData, omc_InteractiveUtil_getPathedClassInProgram(threadData, _model_path, _p, 0));
if (1 != tmp6) goto goto_2;
_str = omc_AbsynUtil_pathString(threadData, _model_path, _OMC_LIT0, 1, 0);
tmpMeta7 = stringAppend(_OMC_LIT287,_str);
tmpMeta8 = stringAppend(tmpMeta7,_OMC_LIT385);
_str = tmpMeta8;
tmp1_c0 = _str;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
_p = tmp4_1;
_class_ = tmp4_2;
_old_comp = tmp4_3;
_new_comp = tmp4_4;
_comp_reps = omc_InteractiveUtil_extractAllComponentreplacements(threadData, _p, _class_, _old_comp, _new_comp);
_p_1 = omc_InteractiveUtil_renameComponentFromComponentreplacements(threadData, _p, _comp_reps);
_paths = omc_InteractiveUtil_extractRenamedClassesAsStringList(threadData, _comp_reps);
_paths_1 = stringDelimitList(_paths, _OMC_LIT43);
tmpMeta9 = mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_paths_1, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil))));
_paths_2 = stringAppendList(tmpMeta9);
tmp1_c0 = _paths_2;
tmpMeta[0+1] = _p_1;
goto tmp3_done;
}
case 2: {
if(omc_Flags_isSet(threadData, _OMC_LIT390))
{
omc_Debug_trace(threadData, _OMC_LIT391);
}
tmp1_c0 = _OMC_LIT32;
tmpMeta[0+1] = _inProgram1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isClassReadOnly(threadData_t *threadData, modelica_metatype _cl)
{
modelica_boolean _readOnly;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _cl;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_integer tmp8;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
tmp8 = mmc_unbox_integer(tmpMeta7);
_readOnly = tmp8;
tmp1 = _readOnly;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_readOnly = tmp1;
_return: OMC_LABEL_UNUSED
return _readOnly;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isClassReadOnly(threadData_t *threadData, modelica_metatype _cl)
{
modelica_boolean _readOnly;
modelica_metatype out_readOnly;
_readOnly = omc_InteractiveUtil_isClassReadOnly(threadData, _cl);
out_readOnly = mmc_mk_icon(_readOnly);
return out_readOnly;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponentreplacements(threadData_t *threadData, modelica_metatype _p, modelica_metatype _class_, modelica_metatype _cref1, modelica_metatype _cref2)
{
modelica_metatype _comp_reps = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _comps = NULL;
modelica_metatype _class_path = NULL;
modelica_metatype _comp_repsrules = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
modelica_metatype tmpMeta9;
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT392);
_comps = omc_InteractiveUtil_extractAllComponents(threadData, _p, omc_AbsynUtil_crefToPath(threadData, _class_));
omc_ErrorExt_rollBack(threadData, _OMC_LIT392);
tmp6 = omc_InteractiveUtil_isClassReadOnly(threadData, omc_InteractiveUtil_getPathedClassInProgram(threadData, omc_AbsynUtil_crefToPath(threadData, _class_), _p, 0));
if (0 != tmp6) goto goto_2;
_class_path = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta8 = mmc_mk_box4(3, &GlobalScript_ComponentReplacement_COMPONENTREPLACEMENT__desc, _class_path, _cref1, _cref2);
tmpMeta7 = mmc_mk_cons(tmpMeta8, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta9 = mmc_mk_box3(3, &GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc, tmpMeta7, mmc_mk_integer(((modelica_integer) 1)));
_comp_repsrules = tmpMeta9;
tmpMeta1 = omc_InteractiveUtil_getComponentreplacementsrules(threadData, _comps, _comp_repsrules, ((modelica_integer) 0));
goto tmp3_done;
}
case 1: {
omc_ErrorExt_delCheckpoint(threadData, _OMC_LIT392);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_comp_reps = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _comp_reps;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_listClass(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _p)
{
modelica_string _classStr = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cl = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_path = omc_AbsynUtil_crefToPath(threadData, _cr);
_cl = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta1 = mmc_mk_cons(_cl, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta2 = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta1, _OMC_LIT7);
_classStr = omc_Dump_unparseStr(threadData, tmpMeta2, 0, _OMC_LIT393);
_return: OMC_LABEL_UNUSED
return _classStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getApiFunctionNamedArgs(threadData_t *threadData, modelica_metatype _inStmt)
{
modelica_metatype _outArgs = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inStmt;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,1,2) == 0) MMC_THROW_INTERNAL();
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta2,11,3) == 0) MMC_THROW_INTERNAL();
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta3,0,2) == 0) MMC_THROW_INTERNAL();
tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 3));
_outArgs = tmpMeta4;
_return: OMC_LABEL_UNUSED
return _outArgs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getApiFunctionArgs(threadData_t *threadData, modelica_metatype _inStmt)
{
modelica_metatype _outArgs = NULL;
modelica_metatype tmpMeta1;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inStmt;
{
modelica_metatype _args = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_metatype tmpMeta6;
modelica_metatype tmpMeta7;
modelica_metatype tmpMeta8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
tmpMeta6 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta6,11,3) == 0) goto tmp3_end;
tmpMeta7 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta6), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta7,0,2) == 0) goto tmp3_end;
tmpMeta8 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta7), 2));
_args = tmpMeta8;
tmpMeta1 = _args;
goto tmp3_done;
}
case 1: {
modelica_metatype tmpMeta9;
tmpMeta9 = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta1 = tmpMeta9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outArgs = tmpMeta1;
_return: OMC_LABEL_UNUSED
return _outArgs;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getApiFunctionNameInfo(threadData_t *threadData, modelica_metatype _inStmt, modelica_metatype *out_outInfo)
{
modelica_string _outName = NULL;
modelica_metatype _outInfo = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta1 = _inStmt;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta1,1,2) == 0) MMC_THROW_INTERNAL();
tmpMeta2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta2,11,3) == 0) MMC_THROW_INTERNAL();
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta3,2,2) == 0) MMC_THROW_INTERNAL();
tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta3), 2));
tmpMeta5 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta1), 3));
_outName = tmpMeta4;
_outInfo = tmpMeta5;
_return: OMC_LABEL_UNUSED
if (out_outInfo) { *out_outInfo = _outInfo; }
return _outName;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getTypeOfVariable(threadData_t *threadData, modelica_string _inIdent, modelica_metatype _inVariableLst)
{
modelica_metatype _outType = NULL;
modelica_string _id = NULL;
modelica_metatype _tp = NULL;
modelica_metatype tmpMeta1;
modelica_metatype tmpMeta2;
modelica_metatype tmpMeta3;
modelica_metatype tmpMeta4;
modelica_metatype tmpMeta5;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype _var;
for (tmpMeta1 = _inVariableLst; !listEmpty(tmpMeta1); tmpMeta1=MMC_CDR(tmpMeta1))
{
_var = MMC_CAR(tmpMeta1);
tmpMeta2 = _var;
tmpMeta3 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 2));
tmpMeta4 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta2), 4));
_id = tmpMeta3;
_tp = tmpMeta4;
if((stringEqual(_inIdent, _id)))
{
_outType = _tp;
goto _return;
}
}
}
MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
return _outType;
}
