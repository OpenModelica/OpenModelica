#ifdef OMC_BASE_FILE
#define OMC_FILE OMC_BASE_FILE
#else
#define OMC_FILE "/home/mahge/dev/OpenModelica/OMCompiler/Compiler/boot/build/tmp/InteractiveUtil.c"
#endif
#include "omc_simulation_settings.h"
#include "InteractiveUtil.h"
#define _OMC_LIT0_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,1,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT1,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT1 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT1)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT2,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT2 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT2)
#define _OMC_LIT3_data "Class %s not found in scope %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT3,31,_OMC_LIT3_data);
#define _OMC_LIT3 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT3)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT4,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT3}};
#define _OMC_LIT4 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT4)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT5,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(3)),_OMC_LIT1,_OMC_LIT2,_OMC_LIT4}};
#define _OMC_LIT5 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT5)
#define _OMC_LIT6_data "<TOP>"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT6,5,_OMC_LIT6_data);
#define _OMC_LIT6 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT7,1,4) {&Absyn_Within_TOP__desc,}};
#define _OMC_LIT7 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data "public"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,6,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,0,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
#define _OMC_LIT10_data ","
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT10,1,_OMC_LIT10_data);
#define _OMC_LIT10 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT10)
#define _OMC_LIT11_data "},{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT11,3,_OMC_LIT11_data);
#define _OMC_LIT11 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data "{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,1,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
#define _OMC_LIT13_data "}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT13,1,_OMC_LIT13_data);
#define _OMC_LIT13 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT13)
#define _OMC_LIT14_data "$Any"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT14,4,_OMC_LIT14_data);
#define _OMC_LIT14 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT14)
#define _OMC_LIT15_data "nfAPI"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT15,5,_OMC_LIT15_data);
#define _OMC_LIT15 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT15)
#define _OMC_LIT16_data "Enables experimental new instantiation use in the OMC API."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT16,58,_OMC_LIT16_data);
#define _OMC_LIT16 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT16)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT17,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT16}};
#define _OMC_LIT17 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT17)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT18,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(181)),_OMC_LIT15,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT17}};
#define _OMC_LIT18 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT18)
#define _OMC_LIT19_data "Real"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT19,4,_OMC_LIT19_data);
#define _OMC_LIT19 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT19)
#define _OMC_LIT20_data "Integer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT20,7,_OMC_LIT20_data);
#define _OMC_LIT20 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT20)
#define _OMC_LIT21_data "Boolean"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT21,7,_OMC_LIT21_data);
#define _OMC_LIT21 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT21)
#define _OMC_LIT22_data "String"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT22,6,_OMC_LIT22_data);
#define _OMC_LIT22 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT22)
#define _OMC_LIT23_data "true"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT23,4,_OMC_LIT23_data);
#define _OMC_LIT23 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT23)
#define _OMC_LIT24_data "false"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT24,5,_OMC_LIT24_data);
#define _OMC_LIT24 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT24)
#define _OMC_LIT25_data "\"-\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT25,3,_OMC_LIT25_data);
#define _OMC_LIT25 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT25)
#define _OMC_LIT26_data "\"co\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT26,4,_OMC_LIT26_data);
#define _OMC_LIT26 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT26)
#define _OMC_LIT27_data ", "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT27,2,_OMC_LIT27_data);
#define _OMC_LIT27 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT27)
#define _OMC_LIT28_data "\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT28,1,_OMC_LIT28_data);
#define _OMC_LIT28 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT28)
#define _OMC_LIT29_data "\", \""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT29,4,_OMC_LIT29_data);
#define _OMC_LIT29 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT29)
#define _OMC_LIT30_data ", \""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT30,3,_OMC_LIT30_data);
#define _OMC_LIT30 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT30)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT31,2,1) {_OMC_LIT9,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT31 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT31)
#define _OMC_LIT32_data "\"cl\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT32,4,_OMC_LIT32_data);
#define _OMC_LIT32 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT32)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT33,1,3) {&DAE_Prefix_NOPRE__desc,}};
#define _OMC_LIT33 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT33)
#define _OMC_LIT34_data "="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT34,1,_OMC_LIT34_data);
#define _OMC_LIT34 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT34)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT35,1,3) {&Absyn_EqMod_NOMOD__desc,}};
#define _OMC_LIT35 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT35)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT36,1,4) {&SCode_Final_NOT__FINAL__desc,}};
#define _OMC_LIT36 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT36)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT37,1,4) {&SCode_Each_NOT__EACH__desc,}};
#define _OMC_LIT37 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT37)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT38,0.0);
#define _OMC_LIT38 MMC_REFREALLIT(_OMC_LIT_STRUCT38)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT39,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT38}};
#define _OMC_LIT39 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT39)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT40,1,4) {&SCode_Partial_NOT__PARTIAL__desc,}};
#define _OMC_LIT40 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT40)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT41,1,4) {&UnitAbsyn_InstStore_NOSTORE__desc,}};
#define _OMC_LIT41 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT41)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT42,1,3) {&InstTypes_CallingScope_TOP__CALL__desc,}};
#define _OMC_LIT42 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT42)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT43,7,3) {&ConnectionGraph_ConnectionGraph_GRAPH__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT43 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT43)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT44,1,7) {&DAE_ComponentRef_WILD__desc,}};
#define _OMC_LIT44 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT44)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT45,5,3) {&DAE_Connect_SetTrieNode_SET__TRIE__NODE__desc,_OMC_LIT9,_OMC_LIT44,MMC_REFSTRUCTLIT(mmc_nil),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT45 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT45)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT46,5,3) {&DAE_Connect_Sets_SETS__desc,_OMC_LIT45,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT46 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,1,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
#define _OMC_LIT48_data ")"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT48,1,_OMC_LIT48_data);
#define _OMC_LIT48 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT48)
#define _OMC_LIT49_data "(error)"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT49,7,_OMC_LIT49_data);
#define _OMC_LIT49 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT49)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT50,1,5) {&DAE_Mod_NOMOD__desc,}};
#define _OMC_LIT50 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT50)
#define _OMC_LIT51_data "{}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT51,2,_OMC_LIT51_data);
#define _OMC_LIT51 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data "Error"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,5,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
#define _OMC_LIT53_data "permissive"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT53,10,_OMC_LIT53_data);
#define _OMC_LIT53 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT53)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT54,1,3) {&Flags_FlagVisibility_INTERNAL__desc,}};
#define _OMC_LIT54 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT54)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT55,2,4) {&Flags_FlagData_BOOL__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT55 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT55)
#define _OMC_LIT56_data "Disables some error checks to allow erroneous models to compile."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT56,64,_OMC_LIT56_data);
#define _OMC_LIT56 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT56)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT57,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT56}};
#define _OMC_LIT57 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT57)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT58,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(87)),_OMC_LIT53,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT54,_OMC_LIT55,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT57}};
#define _OMC_LIT58 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT58)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT59,1,3) {&SCode_Visibility_PUBLIC__desc,}};
#define _OMC_LIT59 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT59)
#define _OMC_LIT60_data "empty"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT60,5,_OMC_LIT60_data);
#define _OMC_LIT60 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT60)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT61,2,4) {&FCore_Graph_EG__desc,_OMC_LIT60}};
#define _OMC_LIT61 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT61)
#define _OMC_LIT62_data "\"public\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT62,8,_OMC_LIT62_data);
#define _OMC_LIT62 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data "\"protected\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,11,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT64,3,3) {&Absyn_Modification_CLASSMOD__desc,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT35}};
#define _OMC_LIT64 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT64)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT65,1,4) {&Absyn_Each_NON__EACH__desc,}};
#define _OMC_LIT65 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT65)
#define _OMC_LIT66_data "-set_submodifier_in_elementargs failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT66,39,_OMC_LIT66_data);
#define _OMC_LIT66 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT66)
#define _OMC_LIT67_data "Ok"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT67,2,_OMC_LIT67_data);
#define _OMC_LIT67 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT67)
#define _OMC_LIT68_data ".moc"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT68,4,_OMC_LIT68_data);
#define _OMC_LIT68 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT68)
#define _OMC_LIT69_data "Access"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT69,6,_OMC_LIT69_data);
#define _OMC_LIT69 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT69)
#define _OMC_LIT70_data "all"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT70,3,_OMC_LIT70_data);
#define _OMC_LIT70 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT70)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT71,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT70}};
#define _OMC_LIT71 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT71)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT72,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT69,_OMC_LIT71}};
#define _OMC_LIT72 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT72)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT73,2,5) {&Absyn_Path_FULLYQUALIFIED__desc,_OMC_LIT72}};
#define _OMC_LIT73 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT73)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT74,3,7) {&Values_Value_ENUM__LITERAL__desc,_OMC_LIT73,MMC_IMMEDIATE(MMC_TAGFIXNUM(9))}};
#define _OMC_LIT74 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT74)
#define _OMC_LIT75_data "documentation"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT75,13,_OMC_LIT75_data);
#define _OMC_LIT75 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT75)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT76,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT75}};
#define _OMC_LIT76 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT76)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT77,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT69,_OMC_LIT76}};
#define _OMC_LIT77 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT77)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT78,2,5) {&Absyn_Path_FULLYQUALIFIED__desc,_OMC_LIT77}};
#define _OMC_LIT78 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT78)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT79,3,7) {&Values_Value_ENUM__LITERAL__desc,_OMC_LIT78,MMC_IMMEDIATE(MMC_TAGFIXNUM(3))}};
#define _OMC_LIT79 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT79)
#define _OMC_LIT80_data "packageDuplicate"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT80,16,_OMC_LIT80_data);
#define _OMC_LIT80 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT80)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT81,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT80}};
#define _OMC_LIT81 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT81)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT82,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT69,_OMC_LIT81}};
#define _OMC_LIT82 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT82)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT83,2,5) {&Absyn_Path_FULLYQUALIFIED__desc,_OMC_LIT82}};
#define _OMC_LIT83 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT83)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT84,3,7) {&Values_Value_ENUM__LITERAL__desc,_OMC_LIT83,MMC_IMMEDIATE(MMC_TAGFIXNUM(8))}};
#define _OMC_LIT84 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT84)
#define _OMC_LIT85_data "Access.packageDuplicate"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT85,23,_OMC_LIT85_data);
#define _OMC_LIT85 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT85)
#define _OMC_LIT86_data "packageText"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT86,11,_OMC_LIT86_data);
#define _OMC_LIT86 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT86)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT87,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT86}};
#define _OMC_LIT87 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT87)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT88,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT69,_OMC_LIT87}};
#define _OMC_LIT88 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT88)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT89,2,5) {&Absyn_Path_FULLYQUALIFIED__desc,_OMC_LIT88}};
#define _OMC_LIT89 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT89)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT90,3,7) {&Values_Value_ENUM__LITERAL__desc,_OMC_LIT89,MMC_IMMEDIATE(MMC_TAGFIXNUM(7))}};
#define _OMC_LIT90 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT90)
#define _OMC_LIT91_data "Access.packageText"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT91,18,_OMC_LIT91_data);
#define _OMC_LIT91 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT91)
#define _OMC_LIT92_data "nonPackageDuplicate"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT92,19,_OMC_LIT92_data);
#define _OMC_LIT92 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT92)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT93,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT92}};
#define _OMC_LIT93 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT93)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT94,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT69,_OMC_LIT93}};
#define _OMC_LIT94 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT94)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT95,2,5) {&Absyn_Path_FULLYQUALIFIED__desc,_OMC_LIT94}};
#define _OMC_LIT95 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT95)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT96,3,7) {&Values_Value_ENUM__LITERAL__desc,_OMC_LIT95,MMC_IMMEDIATE(MMC_TAGFIXNUM(6))}};
#define _OMC_LIT96 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT96)
#define _OMC_LIT97_data "Access.nonPackageDuplicate"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT97,26,_OMC_LIT97_data);
#define _OMC_LIT97 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT97)
#define _OMC_LIT98_data "nonPackageText"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT98,14,_OMC_LIT98_data);
#define _OMC_LIT98 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT98)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT99,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT98}};
#define _OMC_LIT99 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT99)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT100,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT69,_OMC_LIT99}};
#define _OMC_LIT100 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT100)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT101,2,5) {&Absyn_Path_FULLYQUALIFIED__desc,_OMC_LIT100}};
#define _OMC_LIT101 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT101)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT102,3,7) {&Values_Value_ENUM__LITERAL__desc,_OMC_LIT101,MMC_IMMEDIATE(MMC_TAGFIXNUM(5))}};
#define _OMC_LIT102 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT102)
#define _OMC_LIT103_data "Access.nonPackageText"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT103,21,_OMC_LIT103_data);
#define _OMC_LIT103 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT103)
#define _OMC_LIT104_data "diagram"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT104,7,_OMC_LIT104_data);
#define _OMC_LIT104 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT104)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT105,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT104}};
#define _OMC_LIT105 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT105)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT106,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT69,_OMC_LIT105}};
#define _OMC_LIT106 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT106)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT107,2,5) {&Absyn_Path_FULLYQUALIFIED__desc,_OMC_LIT106}};
#define _OMC_LIT107 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT107)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT108,3,7) {&Values_Value_ENUM__LITERAL__desc,_OMC_LIT107,MMC_IMMEDIATE(MMC_TAGFIXNUM(4))}};
#define _OMC_LIT108 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT108)
#define _OMC_LIT109_data "Access.diagram"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT109,14,_OMC_LIT109_data);
#define _OMC_LIT109 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT109)
#define _OMC_LIT110_data "Access.documentation"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT110,20,_OMC_LIT110_data);
#define _OMC_LIT110 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT110)
#define _OMC_LIT111_data "icon"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT111,4,_OMC_LIT111_data);
#define _OMC_LIT111 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT111)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT112,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT111}};
#define _OMC_LIT112 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT112)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT113,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT69,_OMC_LIT112}};
#define _OMC_LIT113 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT113)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT114,2,5) {&Absyn_Path_FULLYQUALIFIED__desc,_OMC_LIT113}};
#define _OMC_LIT114 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT114)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT115,3,7) {&Values_Value_ENUM__LITERAL__desc,_OMC_LIT114,MMC_IMMEDIATE(MMC_TAGFIXNUM(2))}};
#define _OMC_LIT115 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT115)
#define _OMC_LIT116_data "Access.icon"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT116,11,_OMC_LIT116_data);
#define _OMC_LIT116 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT116)
#define _OMC_LIT117_data "hide"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT117,4,_OMC_LIT117_data);
#define _OMC_LIT117 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT117)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT118,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT117}};
#define _OMC_LIT118 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT118)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT119,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT69,_OMC_LIT118}};
#define _OMC_LIT119 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT119)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT120,2,5) {&Absyn_Path_FULLYQUALIFIED__desc,_OMC_LIT119}};
#define _OMC_LIT120 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT120)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT121,3,7) {&Values_Value_ENUM__LITERAL__desc,_OMC_LIT120,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT121 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT121)
#define _OMC_LIT122_data "Access.hide"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT122,11,_OMC_LIT122_data);
#define _OMC_LIT122 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT122)
#define _OMC_LIT123_data "features"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT123,8,_OMC_LIT123_data);
#define _OMC_LIT123 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT123)
#define _OMC_LIT124_data "Protection"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT124,10,_OMC_LIT124_data);
#define _OMC_LIT124 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT124)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT125,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT124}};
#define _OMC_LIT125 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT125)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT126,1,1) {MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT126 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT126)
#define _OMC_LIT127_data "licenseFile"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT127,11,_OMC_LIT127_data);
#define _OMC_LIT127 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT127)
#define _OMC_LIT128_data "libraryKey"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT128,10,_OMC_LIT128_data);
#define _OMC_LIT128 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT128)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT129,2,0) {_OMC_LIT9,_OMC_LIT9}};
#define _OMC_LIT129 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT129)
#define _OMC_LIT130_data "License"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT130,7,_OMC_LIT130_data);
#define _OMC_LIT130 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT130)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT131,1,1) {_OMC_LIT129}};
#define _OMC_LIT131 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT131)
#define _OMC_LIT132_data "access"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT132,6,_OMC_LIT132_data);
#define _OMC_LIT132 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT132)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT133,1,1) {_OMC_LIT9}};
#define _OMC_LIT133 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT133)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT134,1,4) {&InstTypes_CallingScope_INNER__CALL__desc,}};
#define _OMC_LIT134 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT134)
#define _OMC_LIT135_data "([A-Za-z0-9().]*),"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT135,18,_OMC_LIT135_data);
#define _OMC_LIT135 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT135)
#define _OMC_LIT136_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT136,1,_OMC_LIT136_data);
#define _OMC_LIT136 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT136)
#define _OMC_LIT137_data "SimpleVisual.Position"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT137,21,_OMC_LIT137_data);
#define _OMC_LIT137 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT137)
#define _OMC_LIT138_data "SimpleVisual.PositionSize"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT138,25,_OMC_LIT138_data);
#define _OMC_LIT138 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT138)
#define _OMC_LIT139_data "SimpleVisual.PositionRotation"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT139,29,_OMC_LIT139_data);
#define _OMC_LIT139 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT139)
#define _OMC_LIT140_data "SimpleVisual.PositionRotationSize"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT140,33,_OMC_LIT140_data);
#define _OMC_LIT140 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT140)
#define _OMC_LIT141_data "SimpleVisual.PositionRotationSizeOffset"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT141,39,_OMC_LIT141_data);
#define _OMC_LIT141 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT141)
#define _OMC_LIT142_data ":"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT142,1,_OMC_LIT142_data);
#define _OMC_LIT142 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT142)
#define _OMC_LIT143_data "package.moc"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT143,11,_OMC_LIT143_data);
#define _OMC_LIT143 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT143)
#define _OMC_LIT144_data "(replaceable type "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT144,18,_OMC_LIT144_data);
#define _OMC_LIT144 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT144)
#define _OMC_LIT145_data "["
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT145,1,_OMC_LIT145_data);
#define _OMC_LIT145 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT145)
#define _OMC_LIT146_data " "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT146,1,_OMC_LIT146_data);
#define _OMC_LIT146 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT146)
#define _OMC_LIT147_data "input "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT147,6,_OMC_LIT147_data);
#define _OMC_LIT147 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT147)
#define _OMC_LIT148_data "output "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT148,7,_OMC_LIT148_data);
#define _OMC_LIT148 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT148)
#define _OMC_LIT149_data "(extends "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT149,9,_OMC_LIT149_data);
#define _OMC_LIT149 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT149)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT150,2,1) {_OMC_LIT48,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT150 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT150)
#define _OMC_LIT151_data "<"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT151,1,_OMC_LIT151_data);
#define _OMC_LIT151 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT151)
#define _OMC_LIT152_data ">"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT152,1,_OMC_LIT152_data);
#define _OMC_LIT152 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT152)
#define _OMC_LIT153_data "polymorphic"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT153,11,_OMC_LIT153_data);
#define _OMC_LIT153 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT153)
#define _OMC_LIT154_data "Any"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT154,3,_OMC_LIT154_data);
#define _OMC_LIT154 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT154)
#define _OMC_LIT155_data "(package "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT155,9,_OMC_LIT155_data);
#define _OMC_LIT155 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT155)
#define _OMC_LIT156_data "(partial impure function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT156,24,_OMC_LIT156_data);
#define _OMC_LIT156 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT156)
#define _OMC_LIT157_data "(partial function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT157,17,_OMC_LIT157_data);
#define _OMC_LIT157 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT157)
#define _OMC_LIT158_data "(impure function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT158,16,_OMC_LIT158_data);
#define _OMC_LIT158 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT158)
#define _OMC_LIT159_data "(function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT159,9,_OMC_LIT159_data);
#define _OMC_LIT159 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT159)
#define _OMC_LIT160_data "(operator function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT160,18,_OMC_LIT160_data);
#define _OMC_LIT160 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT160)
#define _OMC_LIT161_data "(uniontype"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT161,10,_OMC_LIT161_data);
#define _OMC_LIT161 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT161)
#define _OMC_LIT162_data "(record"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT162,7,_OMC_LIT162_data);
#define _OMC_LIT162 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT162)
#define _OMC_LIT163_data "(metarecord"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT163,11,_OMC_LIT163_data);
#define _OMC_LIT163 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT163)
#define _OMC_LIT164_data "(type"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT164,5,_OMC_LIT164_data);
#define _OMC_LIT164 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT164)
#define _OMC_LIT165_data "\"(\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT165,3,_OMC_LIT165_data);
#define _OMC_LIT165 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT165)
#define _OMC_LIT166_data "SourceInfo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT166,10,_OMC_LIT166_data);
#define _OMC_LIT166 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT166)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT167,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT166}};
#define _OMC_LIT167 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT167)
#define _OMC_LIT168_data "\n)\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT168,3,_OMC_LIT168_data);
#define _OMC_LIT168 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT168)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT169,1,11) {&Absyn_Algorithm_ALG__BREAK__desc,}};
#define _OMC_LIT169 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT169)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT170,1,10) {&Absyn_Algorithm_ALG__RETURN__desc,}};
#define _OMC_LIT170 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT170)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT171,1,3) {&Absyn_Subscript_NOSUB__desc,}};
#define _OMC_LIT171 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT171)
#define _OMC_LIT172_data "Interactive.transformFlatPart failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT172,37,_OMC_LIT172_data);
#define _OMC_LIT172 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT172)
#define _OMC_LIT173_data "Interactive.transformFlatClassDef failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT173,41,_OMC_LIT173_data);
#define _OMC_LIT173 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT173)
#define _OMC_LIT174_data "Interactive.transformFlatClass failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT174,38,_OMC_LIT174_data);
#define _OMC_LIT174 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT174)
#define _OMC_LIT175_data "- Interactive.namedargToModification failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT175,44,_OMC_LIT175_data);
#define _OMC_LIT175 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT175)
#define _OMC_LIT176_data "Interactive.recordConstructorToModification failed, exp="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT176,56,_OMC_LIT176_data);
#define _OMC_LIT176 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT176)
#define _OMC_LIT177_data "annotate"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT177,8,_OMC_LIT177_data);
#define _OMC_LIT177 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT177)
#define _OMC_LIT178_data "comment"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT178,7,_OMC_LIT178_data);
#define _OMC_LIT178 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT178)
#define _OMC_LIT179_data "binding"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT179,7,_OMC_LIT179_data);
#define _OMC_LIT179 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT179)
#define _OMC_LIT180_data "modification"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT180,12,_OMC_LIT180_data);
#define _OMC_LIT180 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT180)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT181,1,6) {&Absyn_InnerOuter_NOT__INNER__OUTER__desc,}};
#define _OMC_LIT181 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT181)
#define _OMC_LIT182_data "Failed in replaceInnerClass\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT182,28,_OMC_LIT182_data);
#define _OMC_LIT182 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT182)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT183,1,8) {&ErrorTypes_MessageType_SCRIPTING__desc,}};
#define _OMC_LIT183 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT183)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT184,1,5) {&ErrorTypes_Severity_WARNING__desc,}};
#define _OMC_LIT184 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT184)
#define _OMC_LIT185_data "Class %s not found inside class %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT185,35,_OMC_LIT185_data);
#define _OMC_LIT185 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT185)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT186,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT185}};
#define _OMC_LIT186 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT186)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT187,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(555)),_OMC_LIT183,_OMC_LIT184,_OMC_LIT186}};
#define _OMC_LIT187 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT187)
#define _OMC_LIT188_data "\n  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT188,3,_OMC_LIT188_data);
#define _OMC_LIT188 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT188)
#define _OMC_LIT189_data "Failed to insert class %s %s the available classes were:%s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT189,58,_OMC_LIT189_data);
#define _OMC_LIT189 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT189)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT190,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT189}};
#define _OMC_LIT190 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT190)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT191,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(213)),_OMC_LIT183,_OMC_LIT2,_OMC_LIT190}};
#define _OMC_LIT191 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT191)
#define _OMC_LIT192_data "OpenModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT192,12,_OMC_LIT192_data);
#define _OMC_LIT192 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT192)
#define _OMC_LIT193_data ", \"{"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT193,4,_OMC_LIT193_data);
#define _OMC_LIT193 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT193)
#define _OMC_LIT194_data "}\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT194,2,_OMC_LIT194_data);
#define _OMC_LIT194 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT194)
#define _OMC_LIT195_data ", {"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT195,3,_OMC_LIT195_data);
#define _OMC_LIT195 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT195)
#define _OMC_LIT196_data "\"input\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT196,7,_OMC_LIT196_data);
#define _OMC_LIT196 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT196)
#define _OMC_LIT197_data "\"output\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT197,8,_OMC_LIT197_data);
#define _OMC_LIT197 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT197)
#define _OMC_LIT198_data "\"unspecified\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT198,13,_OMC_LIT198_data);
#define _OMC_LIT198 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT198)
#define _OMC_LIT199_data "\"discrete\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT199,10,_OMC_LIT199_data);
#define _OMC_LIT199 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT199)
#define _OMC_LIT200_data "\"parameter\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT200,11,_OMC_LIT200_data);
#define _OMC_LIT200 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT200)
#define _OMC_LIT201_data "\"constant\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT201,10,_OMC_LIT201_data);
#define _OMC_LIT201 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT201)
#define _OMC_LIT202_data "\"parglobal\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT202,11,_OMC_LIT202_data);
#define _OMC_LIT202 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT202)
#define _OMC_LIT203_data "\"parlocal\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT203,10,_OMC_LIT203_data);
#define _OMC_LIT203 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT203)
#define _OMC_LIT204_data "\"inner\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT204,7,_OMC_LIT204_data);
#define _OMC_LIT204 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT204)
#define _OMC_LIT205_data "\"outer\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT205,7,_OMC_LIT205_data);
#define _OMC_LIT205 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT205)
#define _OMC_LIT206_data "\"none\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT206,6,_OMC_LIT206_data);
#define _OMC_LIT206 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT206)
#define _OMC_LIT207_data "\"innerouter\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT207,12,_OMC_LIT207_data);
#define _OMC_LIT207 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT207)
#define _OMC_LIT208_data "Interactive.getComponentInfoOld failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT208,39,_OMC_LIT208_data);
#define _OMC_LIT208 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT208)
#define _OMC_LIT209_data "Icon"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT209,4,_OMC_LIT209_data);
#define _OMC_LIT209 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT209)
#define _OMC_LIT210_data "Diagram"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT210,7,_OMC_LIT210_data);
#define _OMC_LIT210 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT210)
#define _OMC_LIT211_data "buildEnvForGraphicProgram"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT211,25,_OMC_LIT211_data);
#define _OMC_LIT211 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT211)
#define _OMC_LIT212_data "getAnnotationString: Icon"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT212,25,_OMC_LIT212_data);
#define _OMC_LIT212 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT212)
#define _OMC_LIT213_data "checkModel"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT213,10,_OMC_LIT213_data);
#define _OMC_LIT213 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT213)
#define _OMC_LIT214_data "Set when checkModel is used to turn on specific features for checking."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT214,70,_OMC_LIT214_data);
#define _OMC_LIT214 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT214)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT215,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT214}};
#define _OMC_LIT215 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT215)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT216,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(31)),_OMC_LIT213,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT54,_OMC_LIT55,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT215}};
#define _OMC_LIT216 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT216)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT217,3,3) {&Absyn_Program_PROGRAM__desc,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT7}};
#define _OMC_LIT217 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT217)
#define _OMC_LIT218_data "$Code(),"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT218,8,_OMC_LIT218_data);
#define _OMC_LIT218 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT218)
#define _OMC_LIT219_data "$Code()"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT219,7,_OMC_LIT219_data);
#define _OMC_LIT219 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT219)
#define _OMC_LIT220_data "},"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT220,2,_OMC_LIT220_data);
#define _OMC_LIT220 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT220)
#define _OMC_LIT221_data "{nada},"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT221,7,_OMC_LIT221_data);
#define _OMC_LIT221 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT221)
#define _OMC_LIT222_data "{},"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT222,3,_OMC_LIT222_data);
#define _OMC_LIT222 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT222)
#define _OMC_LIT223_data "Placement"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT223,9,_OMC_LIT223_data);
#define _OMC_LIT223 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT223)
#define _OMC_LIT224_data "\n\npackage GraphicalAnnotationsProgram____ end GraphicalAnnotationsProgram____;\n\n// Not implemented yet!\n  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT224,106,_OMC_LIT224_data);
#define _OMC_LIT224 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT224)
#define _OMC_LIT225_data "<1.x annotations>"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT225,17,_OMC_LIT225_data);
#define _OMC_LIT225 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT225)
#define _OMC_LIT226_data "\n\npackage GraphicalAnnotationsProgram____  end GraphicalAnnotationsProgram____;\n\n// Constants.diagramProgram:\nrecord GraphicItem\n  Boolean visible=true;\nend GraphicItem;\n\nrecord CoordinateSystem\n  Real extent[2,2];\nend CoordinateSystem;\n\nrecord Diagram\n  CoordinateSystem coordinateSystem(extent={{-100.0,-100.0},{100.0,100.0}});\nend Diagram;\n\ntype LinePattern= enumeration(None, Solid, Dash, Dot, DashDot, DashDotDot );\ntype Arrow= enumeration(None, Open, Filled , Half );\ntype FillPattern= enumeration(None, Solid, Horizontal, Vertical, Cross, Forward, Backward, CrossDiag, HorizontalCylinder, VerticalCylinder, Sphere );\ntype BorderPattern= enumeration(None, Raised, Sunken, Engraved );\ntype TextStyle= enumeration(Bold, Italic, Underline );\n\nrecord Line\n  Boolean visible=true;\n  Real points[:,2];\n  Integer color[3]={0,0,0};\n  LinePattern pattern=LinePattern.Solid;\n  Real thickness=0.25;\n  Arrow arrow[2]={Arrow.None,Arrow.None};\n  Real arrowSize=3.0;\n  Boolean smooth=false;\nend Line;\n\nrecord Polygon\n  Boolean visible=true;\n  Integer lineColor[3]={0,0,0};\n  Integer fillColor[3]={0,0,0};\n  LinePattern pattern=LinePattern.Solid;\n  FillPattern fillPattern=FillPattern.None;\n  Real lineThickness=0.25;\n  Real points[:,2];\n  Boolean smooth=false;\nend Polygon;\n\nrecord Rectangle\n  Boolean visible=true;\n  Integer lineColor[3]={0,0,0};\n  Integer fillColor[3]={0,0,0};\n  LinePattern pattern=LinePattern.Solid;\n  FillPattern fillPattern=FillPattern.None;\n  Real lineThickness=0.25;\n  BorderPattern borderPattern=BorderPattern.None;\n  Real extent[2,2];\n  Real radius=0.0;\nend Rectangle;\n\nrecord Ellipse\n  Boolean visible=true;\n  Integer lineColor[3]={0,0,0};\n  Integer fillColor[3]={0,0,0};\n  LinePattern pattern=LinePattern.Solid;\n  FillPattern fillPattern=FillPattern.None;\n  Real lineThickness=0.25;\n  Real extent[2,2];\nend Ellipse;\n\nrecord Text\n  Boolean visible=true;\n  Integer lineColor[3]={0,0,0};\n  Integer fillColor[3]={0,0,0};\n  LinePattern pattern=LinePattern.Solid;\n  FillPattern fillPattern=FillPattern.None;\n  Real lineThickness=0.25;\n  Real extent[2,2];\n  String textString;\n  Real fontSize=0.0;\n  String fontName=\"\";\n  TextStyle textStyle[:];\nend Text;\n\nrecord Bitmap\n  Boolean visible=true;\n  Real extent[2,2];\n  String fileName=\"\";\n  String imageSource=\"\";\nend Bitmap;\n\n// Constants.iconProgram:\nrecord Icon\n  CoordinateSystem coordinateSystem(extent={{-10.0,-10.0},{10.0,10.0}});\nend Icon;\n\n// Constants.graphicsProgram\n// ...\n// Constants.lineProgram\n// ...\n\n// Constants.placementProgram:\nrecord Transformation\n  Real x=0.0;\n  Real y=0.0;\n  Real scale=1.0;\n  Real aspectRatio=1.0;\n  Boolean flipHorizontal=false;\n  Boolean flipVertical=false;\n  Real rotation=0.0;\nend Transformation;\n\nrecord Placement\n  Boolean visible=true;\n  Transformation transformation;\n  Transformation iconTransformation;\nend Placement;\n\n  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT226,2835,_OMC_LIT226_data);
#define _OMC_LIT226 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT226)
#define _OMC_LIT227_data "<2.x annotations>"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT227,17,_OMC_LIT227_data);
#define _OMC_LIT227 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT227)
#define _OMC_LIT228_data "\n\npackage GraphicalAnnotationsProgram____ end     GraphicalAnnotationsProgram____;\n\n// type DrawingUnit = Real/*(final unit=\"mm\")*/;\n// type Point = DrawingUnit[2] \"{x, y}\";\n// type Extent = Point[2] \"Defines a rectangular area {{x1, y1}, {x2, y2}}\";\n\n//partial\nrecord GraphicItem\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation(quantity=\"angle\", unit=\"deg\")=0;\nend GraphicItem;\n\nrecord CoordinateSystem\n  Real extent[2,2]/*(each final unit=\"mm\")*/;\n  Boolean preserveAspectRatio;\n  Real initialScale;\n  Real grid[2]/*(each final unit=\"mm\")*/;\nend CoordinateSystem;\n\n// example\n// CoordinateSystem(extent = {{-10, -10}, {10, 10}});\n// i.e. a coordinate system with width 20 units and height 20 units.\n\nrecord Icon \"Representation of the icon layer\"\n  CoordinateSystem coordinateSystem;\n  //GraphicItem[:] graphics;\nend Icon;\n\nrecord Diagram \"Representation of the diagram layer\"\n  CoordinateSystem coordinateSystem;\n  //GraphicItem[:] graphics;\nend Diagram;\n\ntype Color = Integer[3](each min=0, each max=255) \"RGB representation\";\n// constant Color Black = {0, 0, 0}; // zeros(3);\ntype LinePattern = enumeration(None, Solid, Dash, Dot, DashDot, DashDotDot);\ntype FillPattern = enumeration(None, Solid, Horizontal, Vertical, Cross, Forward, Backward, CrossDiag, HorizontalCylinder, VerticalCylinder, Sphere);\ntype BorderPattern = enumeration(None, Raised, Sunken, Engraved);\ntype Smooth = enumeration(None, Bezier);\n\ntype Arrow = enumeration(None, Open, Filled, Half);\ntype TextStyle = enumeration(Bold, Italic, UnderLine);\ntype TextAlignment = enumeration(Left, Center, Right);\n\n// Filled shapes have the following attributes for the border and interior.\nrecord FilledShape \"Style attributes for filled shapes\"\n  Integer lineColor[3] = {0, 0, 0} \"Color of border line\";\n  Integer fillColor[3] = {0, 0, 0} \"Interior fill color\";\n  LinePattern pattern = LinePattern.Solid \"Border line pattern\";\n  FillPattern fillPattern = FillPattern.None \"Interior fill pattern\";\n  Real lineThickness = 0.25 \"Line thickness\";\nend FilledShape;\n\nrecord Transformation\n  Real origin[2]/*(each final unit=\"mm\")*/;\n  Real extent[2,2]/*(each final unit=\"mm\")*/;\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/;\nend Transformation;\n\nrecord Placement\n  Boolean visible = true;\n  Transformation transformation \"Placement in the dagram layer\";\n  Transformation iconTransformation \"Placement in the icon layer\";\nend Placement;\n\nrecord IconMap\n  Real extent[2,2]/*(each final unit=\"mm\")*/ = {{0, 0}, {0, 0}};\n  Boolean primitivesVisible = true;\nend IconMap;\n\nrecord DiagramMap\n  Real extent[2,2]/*(each final unit=\"mm\")*/ = {{0, 0}, {0, 0}};\n  Boolean primitivesVisible = true;\nend DiagramMap;\n\nrecord Line\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/ = 0;\n  // end GraphicItem\n\n  Real points[:, 2]/*(each final unit=\"mm\")*/;\n  Integer color[3] = {0, 0, 0};\n  LinePattern pattern = LinePattern.Solid;\n  Real thickness/*(final unit=\"mm\")*/ = 0.25;\n  Arrow arrow[2] = {Arrow.None, Arrow.None} \"{start arrow, end arrow}\";\n  Real arrowSize/*(final unit=\"mm\")*/ = 3;\n  Smooth smooth = Smooth.None \"Spline\";\nend Line;\n\nrecord Polygon\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/ = 0;\n  // end GraphicItem\n\n  //extends FilledShape;\n  Integer lineColor[3] = {0, 0, 0} \"Color of border line\";\n  Integer fillColor[3] = {0, 0, 0} \"Interior fill color\";\n  LinePattern pattern = LinePattern.Solid \"Border line pattern\";\n  FillPattern fillPattern = FillPattern.None \"Interior fill pattern\";\n  Real lineThickness = 0.25 \"Line thickness\";\n  // end FilledShape\n\n  Real points[:,2]/*(each final unit=\"mm\")*/;\n  Smooth smooth = Smooth.None \"Spline outline\";\nend Polygon;\n\nrecord Rectangle\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/ = 0;\n  // end GraphicItem\n\n  //extends FilledShape;\n  Integer lineColor[3] = {0, 0, 0} \"Color of border line\";\n  Integer fillColor[3] = {0, 0, 0} \"Interior fill color\";\n  LinePattern pattern = LinePattern.Solid \"Border line pattern\";\n  FillPattern fillPattern = FillPattern.None \"Interior fill pattern\";\n  Real lineThickness = 0.25 \"Line thickness\";\n  // end FilledShape\n\n  BorderPattern borderPattern = BorderPattern.None;\n  Real extent[2,2]/*(each final unit=\"mm\")*/;\n  Real radius/*(final unit=\"mm\")*/ = 0 \"Corner radius\";\nend Rectangle;\n\nrecord Ellipse\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/=0;\n  // end GraphicItem\n\n  //extends FilledShape;\n  Integer lineColor[3] = {0, 0, 0} \"Color of border line\";\n  Integer fillColor[3] = {0, 0, 0} \"Interior fill color\";\n  LinePattern pattern = LinePattern.Solid \"Border line pattern\";\n  FillPattern fillPattern = FillPattern.None \"Interior fill pattern\";\n  Real lineThickness = 0.25 \"Line thickness\";\n  // end FilledShape\n\n  Real extent[2,2]/*(each final unit=\"mm\")*/;\n  Real startAngle/*(quantity=\"angle\", unit=\"deg\")*/ = 0;\n  Real endAngle/*(quantity=\"angle\", unit=\"deg\")*/ = 360;\nend Ellipse;\n\nrecord Text\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/ = 0;\n  // end GraphicItem\n\n  //extends FilledShape;\n  Integer lineColor[3] = {0, 0, 0} \"Color of border line\";\n  Integer fillColor[3] = {0, 0, 0} \"Interior fill color\";\n  LinePattern pattern = LinePattern.Solid \"Border line pattern\";\n  FillPattern fillPattern = FillPattern.None \"Interior fill pattern\";\n  Real lineThickness = 0.25 \"Line thickness\";\n  // end FilledShape\n\n  Real extent[2,2]/*(each final unit=\"mm\")*/ = {{-10, -10}, {10, 10}};\n  String textString = \"\";\n  Real fontSize = 0 \"unit pt\";\n  Integer textColor[3] = {-1, -1, -1} \"defaults to fillColor\";\n  String fontName = \"\";\n  TextStyle textStyle[:] = fill(TextStyle.Bold, 0);\n  TextAlignment horizontalAlignment = TextAlignment.Center;\nend Text;\n\nrecord Bitmap\n  //extends GraphicItem;\n  Boolean visible = true;\n  Real origin[2]/*(each final unit=\"mm\")*/ = {0.0, 0.0};\n  Real rotation/*(quantity=\"angle\", unit=\"deg\")*/=0;\n  // end GraphicItem\n\n  Real extent[2,2]/*(each final unit=\"mm\")*/;\n  String fileName = \"\" \"Name of bitmap file\";\n  String imageSource =  \"\" \"Base64 representation of bitmap\";\nend Bitmap;\n\n// dynamic annotations\n// annotation (\n//   Icon(graphics={Rectangle(\n//     extent=DynamicSelect({{0,0},{20,20}},{{0,0},{20,level}}),\n//     fillColor=DynamicSelect({0,0,255},\n//     if overflow then {255,0,0} else {0,0,255}))}\n//   );\n\n// events & interaction\nrecord OnMouseDownSetBoolean\n   Boolean variable \"Name of variable to change when mouse button pressed\";\n   Boolean value \"Assigned value\";\nend OnMouseDownSetBoolean;\n\n// interaction={OnMouseDown(on, true), OnMouseUp(on, false)};\nrecord OnMouseMoveXSetReal\n   Real xVariable \"Name of variable to change when cursor moved in x direction\";\n   Real minValue;\n   Real maxValue;\nend OnMouseMoveXSetReal;\n\n//\nrecord OnMouseMoveYSetReal\n   Real yVariable \"Name of variable to change when cursor moved in y direction\";\n   Real minValue;\n   Real maxValue;\nend OnMouseMoveYSetReal;\n\nrecord OnMouseDownEditInteger\n   Integer variable \"Name of variable to change\";\nend OnMouseDownEditInteger;\n\nrecord OnMouseDownEditReal\n   Real variable \"Name of variable to change\";\nend OnMouseDownEditReal;\n\n//\nrecord OnMouseDownEditString\n   String variable \"Name of variable to change\";\nend OnMouseDownEditString;\n\n//\n// annotation(defaultComponentName = \"name\")\n// annotation(missingInnerMessage = \"message\")\n//\n// model World\n//   annotation(defaultComponentName = \"world\",\n//   defaultComponentPrefixes = \"inner replaceable\",\n//   missingInnerMessage = \"The World object is missing\");\n// ...\n// end World;\n//\n// inner replaceable World world;\n//\n// annotation(unassignedMessage = \"message\");\n//\n// annotation(Dialog(enable = parameter-expression, tab = \"tab\", group = \"group\"));\n//\nrecord Dialog\n   parameter String tab = \"General\";\n   parameter String group = \"Parameters\";\n   parameter Boolean enable = true;\n   parameter Boolean showStartAttribute = false;\n   parameter Boolean colorSelector = false;\n   parameter Selector loadSelector;\n   parameter Selector saveSelector;\n   parameter String groupImage = \"\";\n   parameter Boolean connectorSizing = false;\nend Dialog;\n\nrecord Selector\n  parameter String filter;\n  parameter String caption;\nend Selector;\n\nrecord choices\n  Boolean checkBox = false;\n  Boolean __Dymola_checkBox = false;\nend choices;\n\n//\n// connector Frame \"Frame of a mechanical system\"\n//   ...\n//   flow Modelica.SIunits.Force f[3] annotation(unassignedMessage =\n//    \"All Forces cannot be uniquely calculated. The reason could be that the\n//      mechanism contains a planar loop or that joints constrain the same motion.\n//      For planar loops, use in one revolute joint per loop the option\n//      PlanarCutJoint=true in the Advanced menu.\");\n// end Frame;\n//\n// model BodyShape\n//   ...\n//   parameter Boolean animation = true;\n//   parameter SI.Length length \"Length of shape\"\n//   annotation(Dialog(enable = animation, tab = \"Animation\",\n//   group = \"Shape definition\"));\n//   ...\n// end BodyShape;\n  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT228,9453,_OMC_LIT228_data);
#define _OMC_LIT228 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT228)
#define _OMC_LIT229_data "<3.x annotations>"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT229,17,_OMC_LIT229_data);
#define _OMC_LIT229 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT229)
#define _OMC_LIT230_data "1.x"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT230,3,_OMC_LIT230_data);
#define _OMC_LIT230 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT230)
#define _OMC_LIT231_data "2.x"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT231,3,_OMC_LIT231_data);
#define _OMC_LIT231 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT231)
#define _OMC_LIT232_data "3.x"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT232,3,_OMC_LIT232_data);
#define _OMC_LIT232 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT232)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT233,3,3) {&Absyn_FunctionArgs_FUNCTIONARGS__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT233 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT233)
#define _OMC_LIT234_data "__OpenModelica_infoHeader"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT234,25,_OMC_LIT234_data);
#define _OMC_LIT234 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT234)
#define _OMC_LIT235_data "revisions"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT235,9,_OMC_LIT235_data);
#define _OMC_LIT235 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT235)
#define _OMC_LIT236_data "info"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT236,4,_OMC_LIT236_data);
#define _OMC_LIT236 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT236)
#define _OMC_LIT237_data "defaultComponentPrefixes"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT237,24,_OMC_LIT237_data);
#define _OMC_LIT237 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT237)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT238,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT237}};
#define _OMC_LIT238 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT238)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT239,1,1) {_OMC_LIT51}};
#define _OMC_LIT239 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT239)
#define _OMC_LIT240_data "defaultComponentName"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT240,20,_OMC_LIT240_data);
#define _OMC_LIT240 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT240)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT241,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT240}};
#define _OMC_LIT241 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT241)
#define _OMC_LIT242_data "DocumentationClass"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT242,18,_OMC_LIT242_data);
#define _OMC_LIT242 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT242)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT243,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT242}};
#define _OMC_LIT243 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT243)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT244,1,1) {_OMC_LIT24}};
#define _OMC_LIT244 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT244)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT245,1,3) {&Interactive_AnnotationType_ICON__ANNOTATION__desc,}};
#define _OMC_LIT245 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT245)
#define _OMC_LIT246_data "version"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT246,7,_OMC_LIT246_data);
#define _OMC_LIT246 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT246)
#define _OMC_LIT247_data "Conversion-annotation is missing version for from-conversion: %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT247,65,_OMC_LIT247_data);
#define _OMC_LIT247 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT247)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT248,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT247}};
#define _OMC_LIT248 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT248)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT249,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(5048)),_OMC_LIT183,_OMC_LIT184,_OMC_LIT248}};
#define _OMC_LIT249 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT249)
#define _OMC_LIT250_data "Conversion-annotation contains unknown element: %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT250,51,_OMC_LIT250_data);
#define _OMC_LIT250 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT250)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT251,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT250}};
#define _OMC_LIT251 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT251)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT252,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(5049)),_OMC_LIT183,_OMC_LIT184,_OMC_LIT251}};
#define _OMC_LIT252 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT252)
#define _OMC_LIT253_data "__"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT253,2,_OMC_LIT253_data);
#define _OMC_LIT253 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT253)
#define _OMC_LIT254_data "noneFromVersion"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT254,15,_OMC_LIT254_data);
#define _OMC_LIT254 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT254)
#define _OMC_LIT255_data "from"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT255,4,_OMC_LIT255_data);
#define _OMC_LIT255 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT255)
#define _OMC_LIT256_data "conversion"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT256,10,_OMC_LIT256_data);
#define _OMC_LIT256 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT256)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT257,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT256}};
#define _OMC_LIT257 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT257)
#define _OMC_LIT258_data "Uses-annotation is missing version for library %s. Assuming the tool-specific version=\"default\"."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT258,96,_OMC_LIT258_data);
#define _OMC_LIT258 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT258)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT259,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT258}};
#define _OMC_LIT259 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT259)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT260,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(558)),_OMC_LIT183,_OMC_LIT184,_OMC_LIT259}};
#define _OMC_LIT260 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT260)
#define _OMC_LIT261_data "default"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT261,7,_OMC_LIT261_data);
#define _OMC_LIT261 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT261)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT262,2,1) {_OMC_LIT261,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT262 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT262)
#define _OMC_LIT263_data "uses"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT263,4,_OMC_LIT263_data);
#define _OMC_LIT263 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT263)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT264,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT263}};
#define _OMC_LIT264 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT264)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT265,1,4) {&Interactive_AnnotationType_DIAGRAM__ANNOTATION__desc,}};
#define _OMC_LIT265 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT265)
#define _OMC_LIT266_data "immediate"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT266,9,_OMC_LIT266_data);
#define _OMC_LIT266 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT266)
#define _OMC_LIT267_data "reset"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT267,5,_OMC_LIT267_data);
#define _OMC_LIT267 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT267)
#define _OMC_LIT268_data "synchronize"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT268,11,_OMC_LIT268_data);
#define _OMC_LIT268 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT268)
#define _OMC_LIT269_data "priority"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT269,8,_OMC_LIT269_data);
#define _OMC_LIT269 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT269)
#define _OMC_LIT270_data "1"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT270,1,_OMC_LIT270_data);
#define _OMC_LIT270 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT270)
#define _OMC_LIT271_data "<interactive>"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT271,13,_OMC_LIT271_data);
#define _OMC_LIT271 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT271)
#define _OMC_LIT272_data "transition"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT272,10,_OMC_LIT272_data);
#define _OMC_LIT272 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT272)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT273,3,5) {&Absyn_ComponentRef_CREF__IDENT__desc,_OMC_LIT272,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT273 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT273)
#define _OMC_LIT274_data "useQuotes"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT274,9,_OMC_LIT274_data);
#define _OMC_LIT274 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT274)
#define _OMC_LIT275_data "Interactive.getNthComponent2 failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT275,36,_OMC_LIT275_data);
#define _OMC_LIT275 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT275)
#define _OMC_LIT276_data ",{}}"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT276,4,_OMC_LIT276_data);
#define _OMC_LIT276 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT276)
#define _OMC_LIT277_data "getInheritedClasses"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT277,19,_OMC_LIT277_data);
#define _OMC_LIT277 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT277)
#define _OMC_LIT278_data "nfAPINoise"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT278,10,_OMC_LIT278_data);
#define _OMC_LIT278 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT278)
#define _OMC_LIT279_data "Enables error display for the experimental new instantiation use in the OMC API."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT279,80,_OMC_LIT279_data);
#define _OMC_LIT279 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT279)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT280,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT279}};
#define _OMC_LIT280 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT280)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT281,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(183)),_OMC_LIT278,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT280}};
#define _OMC_LIT281 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT281)
#define _OMC_LIT282_data "getInheritedClassesHelper"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT282,25,_OMC_LIT282_data);
#define _OMC_LIT282 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT282)
#define _OMC_LIT283_data "parameter"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT283,9,_OMC_LIT283_data);
#define _OMC_LIT283 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT283)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT284,1,5) {&Absyn_Parallelism_NON__PARALLEL__desc,}};
#define _OMC_LIT284 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT284)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT285,1,5) {&Absyn_Variability_PARAM__desc,}};
#define _OMC_LIT285 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT285)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT286,1,5) {&Absyn_Direction_BIDIR__desc,}};
#define _OMC_LIT286 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT286)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT287,1,3) {&Absyn_IsField_NONFIELD__desc,}};
#define _OMC_LIT287 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT287)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT288,8,3) {&Absyn_ElementAttributes_ATTR__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT284,_OMC_LIT285,_OMC_LIT286,_OMC_LIT287,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT288 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT288)
#define _OMC_LIT289_data "constant"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT289,8,_OMC_LIT289_data);
#define _OMC_LIT289 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT289)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT290,1,6) {&Absyn_Variability_CONST__desc,}};
#define _OMC_LIT290 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT290)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT291,8,3) {&Absyn_ElementAttributes_ATTR__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT284,_OMC_LIT290,_OMC_LIT286,_OMC_LIT287,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT291 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT291)
#define _OMC_LIT292_data "discrete"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT292,8,_OMC_LIT292_data);
#define _OMC_LIT292 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT292)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT293,1,4) {&Absyn_Variability_DISCRETE__desc,}};
#define _OMC_LIT293 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT293)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT294,8,3) {&Absyn_ElementAttributes_ATTR__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT284,_OMC_LIT293,_OMC_LIT286,_OMC_LIT287,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT294 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT294)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT295,1,3) {&Absyn_Variability_VAR__desc,}};
#define _OMC_LIT295 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT295)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT296,8,3) {&Absyn_ElementAttributes_ATTR__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT284,_OMC_LIT295,_OMC_LIT286,_OMC_LIT287,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT296 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT296)
#define _OMC_LIT297_data "replaceable"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT297,11,_OMC_LIT297_data);
#define _OMC_LIT297 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT297)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT298,1,4) {&Absyn_RedeclareKeywords_REPLACEABLE__desc,}};
#define _OMC_LIT298 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT298)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT299,1,1) {_OMC_LIT298}};
#define _OMC_LIT299 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT299)
#define _OMC_LIT300_data "inner"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT300,5,_OMC_LIT300_data);
#define _OMC_LIT300 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT300)
#define _OMC_LIT301_data "outer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT301,5,_OMC_LIT301_data);
#define _OMC_LIT301 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT301)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT302,1,3) {&Absyn_InnerOuter_INNER__desc,}};
#define _OMC_LIT302 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT302)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT303,1,4) {&Absyn_InnerOuter_OUTER__desc,}};
#define _OMC_LIT303 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT303)
#define _OMC_LIT304_data "false\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT304,6,_OMC_LIT304_data);
#define _OMC_LIT304 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT304)
#define _OMC_LIT305_data "Ok\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT305,3,_OMC_LIT305_data);
#define _OMC_LIT305 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT305)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT306,1,17) {&Absyn_Restriction_R__PREDEFINED__REAL__desc,}};
#define _OMC_LIT306 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT306)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT307,6,3) {&Absyn_ClassDef_PARTS__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT307 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT307)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT308,8,3) {&Absyn_Class_CLASS__desc,_OMC_LIT19,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT306,_OMC_LIT307,_OMC_LIT39}};
#define _OMC_LIT308 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT308)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT309,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT19}};
#define _OMC_LIT309 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT309)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT310,1,16) {&Absyn_Restriction_R__PREDEFINED__INTEGER__desc,}};
#define _OMC_LIT310 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT310)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT311,8,3) {&Absyn_Class_CLASS__desc,_OMC_LIT20,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT310,_OMC_LIT307,_OMC_LIT39}};
#define _OMC_LIT311 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT311)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT312,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT20}};
#define _OMC_LIT312 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT312)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT313,1,18) {&Absyn_Restriction_R__PREDEFINED__STRING__desc,}};
#define _OMC_LIT313 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT313)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT314,8,3) {&Absyn_Class_CLASS__desc,_OMC_LIT22,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT313,_OMC_LIT307,_OMC_LIT39}};
#define _OMC_LIT314 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT314)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT315,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT22}};
#define _OMC_LIT315 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT315)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT316,1,19) {&Absyn_Restriction_R__PREDEFINED__BOOLEAN__desc,}};
#define _OMC_LIT316 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT316)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT317,8,3) {&Absyn_Class_CLASS__desc,_OMC_LIT21,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT316,_OMC_LIT307,_OMC_LIT39}};
#define _OMC_LIT317 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT317)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT318,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT21}};
#define _OMC_LIT318 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT318)
#define _OMC_LIT319_data "Clock"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT319,5,_OMC_LIT319_data);
#define _OMC_LIT319 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT319)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT320,1,21) {&Absyn_Restriction_R__PREDEFINED__CLOCK__desc,}};
#define _OMC_LIT320 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT320)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT321,8,3) {&Absyn_Class_CLASS__desc,_OMC_LIT319,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT320,_OMC_LIT307,_OMC_LIT39}};
#define _OMC_LIT321 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT321)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT322,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT319}};
#define _OMC_LIT322 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT322)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT323,1,11) {&DAE_Type_T__UNKNOWN__desc,}};
#define _OMC_LIT323 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT323)
#define _OMC_LIT324_data "scope"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT324,5,_OMC_LIT324_data);
#define _OMC_LIT324 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT324)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT325,3,5) {&Absyn_ComponentRef_CREF__IDENT__desc,_OMC_LIT9,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT325 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT325)
#define _OMC_LIT326_data "\"flow\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT326,6,_OMC_LIT326_data);
#define _OMC_LIT326 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT326)
#define _OMC_LIT327_data "\"\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT327,2,_OMC_LIT327_data);
#define _OMC_LIT327 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT327)
#define _OMC_LIT328_data "\"stream\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT328,8,_OMC_LIT328_data);
#define _OMC_LIT328 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT328)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT329,1,5) {&Absyn_Restriction_R__MODEL__desc,}};
#define _OMC_LIT329 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT329)
#define _OMC_LIT330_data "error"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT330,5,_OMC_LIT330_data);
#define _OMC_LIT330 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT330)
#define _OMC_LIT331_data "Error: component with name: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT331,28,_OMC_LIT331_data);
#define _OMC_LIT331 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT331)
#define _OMC_LIT332_data " in class: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT332,11,_OMC_LIT332_data);
#define _OMC_LIT332 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT332)
#define _OMC_LIT333_data " not found."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT333,11,_OMC_LIT333_data);
#define _OMC_LIT333 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT333)
#define _OMC_LIT334_data "Error: class: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT334,14,_OMC_LIT334_data);
#define _OMC_LIT334 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT334)
#define _OMC_LIT335_data "protected"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT335,9,_OMC_LIT335_data);
#define _OMC_LIT335 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT335)
#define _OMC_LIT336_data "{ "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT336,2,_OMC_LIT336_data);
#define _OMC_LIT336 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT336)
#define _OMC_LIT337_data " }"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT337,2,_OMC_LIT337_data);
#define _OMC_LIT337 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT337)
#define _OMC_LIT338_data "{ }"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT338,3,_OMC_LIT338_data);
#define _OMC_LIT338 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT338)
#define _OMC_LIT339_data "{ rec(elementvisibility="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT339,24,_OMC_LIT339_data);
#define _OMC_LIT339 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT339)
#define _OMC_LIT340_data ") }"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT340,3,_OMC_LIT340_data);
#define _OMC_LIT340 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT340)
#define _OMC_LIT341_data ",\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT341,2,_OMC_LIT341_data);
#define _OMC_LIT341 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT341)
#define _OMC_LIT342_data "elementtype=classdef, classname="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT342,32,_OMC_LIT342_data);
#define _OMC_LIT342 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT342)
#define _OMC_LIT343_data ", classrestriction="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT343,19,_OMC_LIT343_data);
#define _OMC_LIT343 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT343)
#define _OMC_LIT344_data "readonly"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT344,8,_OMC_LIT344_data);
#define _OMC_LIT344 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT344)
#define _OMC_LIT345_data "writable"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT345,8,_OMC_LIT345_data);
#define _OMC_LIT345 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT345)
#define _OMC_LIT346_data "elementfile=\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT346,13,_OMC_LIT346_data);
#define _OMC_LIT346 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT346)
#define _OMC_LIT347_data "\", elementreadonly=\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT347,20,_OMC_LIT347_data);
#define _OMC_LIT347 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT347)
#define _OMC_LIT348_data "\", elementStartLine="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT348,20,_OMC_LIT348_data);
#define _OMC_LIT348 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT348)
#define _OMC_LIT349_data ", elementStartColumn="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT349,21,_OMC_LIT349_data);
#define _OMC_LIT349 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT349)
#define _OMC_LIT350_data ", elementEndLine="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT350,17,_OMC_LIT350_data);
#define _OMC_LIT350 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT350)
#define _OMC_LIT351_data ", elementEndColumn="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT351,19,_OMC_LIT351_data);
#define _OMC_LIT351 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT351)
#define _OMC_LIT352_data ", final="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT352,8,_OMC_LIT352_data);
#define _OMC_LIT352 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT352)
#define _OMC_LIT353_data ", replaceable="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT353,14,_OMC_LIT353_data);
#define _OMC_LIT353 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT353)
#define _OMC_LIT354_data ", inout="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT354,8,_OMC_LIT354_data);
#define _OMC_LIT354 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT354)
#define _OMC_LIT355_data "elementtype=comment"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT355,19,_OMC_LIT355_data);
#define _OMC_LIT355 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT355)
#define _OMC_LIT356_data "elementtype=annotation"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT356,22,_OMC_LIT356_data);
#define _OMC_LIT356 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT356)
#define _OMC_LIT357_data "elementtype=extends, path="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT357,26,_OMC_LIT357_data);
#define _OMC_LIT357 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT357)
#define _OMC_LIT358_data "elementtype=import, "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT358,20,_OMC_LIT358_data);
#define _OMC_LIT358 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT358)
#define _OMC_LIT359_data "elementtype=component, typename="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT359,32,_OMC_LIT359_data);
#define _OMC_LIT359 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT359)
#define _OMC_LIT360_data ", names={"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT360,9,_OMC_LIT360_data);
#define _OMC_LIT360 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT360)
#define _OMC_LIT361_data "}, flow="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT361,8,_OMC_LIT361_data);
#define _OMC_LIT361 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT361)
#define _OMC_LIT362_data ", stream="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT362,9,_OMC_LIT362_data);
#define _OMC_LIT362 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT362)
#define _OMC_LIT363_data ", variability="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT363,14,_OMC_LIT363_data);
#define _OMC_LIT363 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT363)
#define _OMC_LIT364_data ", direction="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT364,12,_OMC_LIT364_data);
#define _OMC_LIT364 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT364)
#define _OMC_LIT365_data "kind=named, id="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT365,15,_OMC_LIT365_data);
#define _OMC_LIT365 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT365)
#define _OMC_LIT366_data ", path="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT366,7,_OMC_LIT366_data);
#define _OMC_LIT366 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT366)
#define _OMC_LIT367_data "kind=qualified, path="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT367,21,_OMC_LIT367_data);
#define _OMC_LIT367 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT367)
#define _OMC_LIT368_data "kind=unqualified, path="
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT368,23,_OMC_LIT368_data);
#define _OMC_LIT368 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT368)
#define _OMC_LIT369_data "PDEModelica: %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT369,15,_OMC_LIT369_data);
#define _OMC_LIT369 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT369)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT370,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT369}};
#define _OMC_LIT370 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT370)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT371,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(7013)),_OMC_LIT1,_OMC_LIT2,_OMC_LIT370}};
#define _OMC_LIT371 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT371)
#define _OMC_LIT372_data "Fields not supported in standard modelica. Enable PDEModelica usign flag --grammar=\"PDEModelica\"."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT372,97,_OMC_LIT372_data);
#define _OMC_LIT372 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT372)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT373,2,1) {_OMC_LIT372,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT373 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT373)
#define _OMC_LIT374_data "grammar"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT374,7,_OMC_LIT374_data);
#define _OMC_LIT374 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT374)
#define _OMC_LIT375_data "g"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT375,1,_OMC_LIT375_data);
#define _OMC_LIT375 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT375)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT376,1,1) {_OMC_LIT375}};
#define _OMC_LIT376 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT376)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT377,1,4) {&Flags_FlagVisibility_EXTERNAL__desc,}};
#define _OMC_LIT377 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT377)
#define _OMC_LIT378_data "Modelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT378,8,_OMC_LIT378_data);
#define _OMC_LIT378 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT378)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT379,2,0) {_OMC_LIT378,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT379 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT379)
#define _OMC_LIT380_data "MetaModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT380,12,_OMC_LIT380_data);
#define _OMC_LIT380 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT380)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT381,2,0) {_OMC_LIT380,MMC_IMMEDIATE(MMC_TAGFIXNUM(2))}};
#define _OMC_LIT381 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT381)
#define _OMC_LIT382_data "ParModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT382,11,_OMC_LIT382_data);
#define _OMC_LIT382 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT382)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT383,2,0) {_OMC_LIT382,MMC_IMMEDIATE(MMC_TAGFIXNUM(3))}};
#define _OMC_LIT383 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT383)
#define _OMC_LIT384_data "Optimica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT384,8,_OMC_LIT384_data);
#define _OMC_LIT384 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT384)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT385,2,0) {_OMC_LIT384,MMC_IMMEDIATE(MMC_TAGFIXNUM(4))}};
#define _OMC_LIT385 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT385)
#define _OMC_LIT386_data "PDEModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT386,11,_OMC_LIT386_data);
#define _OMC_LIT386 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT386)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT387,2,0) {_OMC_LIT386,MMC_IMMEDIATE(MMC_TAGFIXNUM(5))}};
#define _OMC_LIT387 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT387)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT388,2,1) {_OMC_LIT387,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT388 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT388)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT389,2,1) {_OMC_LIT385,_OMC_LIT388}};
#define _OMC_LIT389 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT389)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT390,2,1) {_OMC_LIT383,_OMC_LIT389}};
#define _OMC_LIT390 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT390)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT391,2,1) {_OMC_LIT381,_OMC_LIT390}};
#define _OMC_LIT391 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT391)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT392,2,1) {_OMC_LIT379,_OMC_LIT391}};
#define _OMC_LIT392 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT392)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT393,3,10) {&Flags_FlagData_ENUM__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT392}};
#define _OMC_LIT393 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT393)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT394,2,1) {_OMC_LIT386,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT394 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT394)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT395,2,1) {_OMC_LIT384,_OMC_LIT394}};
#define _OMC_LIT395 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT395)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT396,2,1) {_OMC_LIT382,_OMC_LIT395}};
#define _OMC_LIT396 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT396)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT397,2,1) {_OMC_LIT380,_OMC_LIT396}};
#define _OMC_LIT397 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT397)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT398,2,1) {_OMC_LIT378,_OMC_LIT397}};
#define _OMC_LIT398 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT398)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT399,2,3) {&Flags_ValidOptions_STRING__OPTION__desc,_OMC_LIT398}};
#define _OMC_LIT399 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT399)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT400,1,1) {_OMC_LIT399}};
#define _OMC_LIT400 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT400)
#define _OMC_LIT401_data "Sets the grammar and semantics to accept."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT401,41,_OMC_LIT401_data);
#define _OMC_LIT401 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT401)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT402,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT401}};
#define _OMC_LIT402 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT402)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT403,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(6)),_OMC_LIT374,_OMC_LIT376,_OMC_LIT377,_OMC_LIT393,_OMC_LIT400,_OMC_LIT402}};
#define _OMC_LIT403 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT403)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT404,1,4) {&Absyn_IsField_FIELD__desc,}};
#define _OMC_LIT404 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT404)
#define _OMC_LIT405_data "nonfield"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT405,8,_OMC_LIT405_data);
#define _OMC_LIT405 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT405)
#define _OMC_LIT406_data "field"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT406,5,_OMC_LIT406_data);
#define _OMC_LIT406 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT406)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT407,1,3) {&Absyn_Direction_INPUT__desc,}};
#define _OMC_LIT407 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT407)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT408,1,4) {&Absyn_Direction_OUTPUT__desc,}};
#define _OMC_LIT408 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT408)
#define _OMC_LIT409_data "input"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT409,5,_OMC_LIT409_data);
#define _OMC_LIT409 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT409)
#define _OMC_LIT410_data "output"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT410,6,_OMC_LIT410_data);
#define _OMC_LIT410 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT410)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT411,1,3) {&Absyn_Parallelism_PARGLOBAL__desc,}};
#define _OMC_LIT411 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT411)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT412,1,4) {&Absyn_Parallelism_PARLOCAL__desc,}};
#define _OMC_LIT412 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT412)
#define _OMC_LIT413_data "parglobal"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT413,9,_OMC_LIT413_data);
#define _OMC_LIT413 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT413)
#define _OMC_LIT414_data "parlocal"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT414,8,_OMC_LIT414_data);
#define _OMC_LIT414 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT414)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT415,1,5) {&Absyn_InnerOuter_INNER__OUTER__desc,}};
#define _OMC_LIT415 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT415)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT416,1,3) {&Absyn_RedeclareKeywords_REDECLARE__desc,}};
#define _OMC_LIT416 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT416)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT417,1,1) {_OMC_LIT416}};
#define _OMC_LIT417 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT417)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT418,1,5) {&Absyn_RedeclareKeywords_REDECLARE__REPLACEABLE__desc,}};
#define _OMC_LIT418 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT418)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT419,1,1) {_OMC_LIT418}};
#define _OMC_LIT419 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT419)
#define _OMC_LIT420_data "cl: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT420,4,_OMC_LIT420_data);
#define _OMC_LIT420 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT420)
#define _OMC_LIT421_data "	 type: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT421,8,_OMC_LIT421_data);
#define _OMC_LIT421 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT421)
#define _OMC_LIT422_data "		 name: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT422,9,_OMC_LIT422_data);
#define _OMC_LIT422 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT422)
#define _OMC_LIT423_data "ex: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT423,4,_OMC_LIT423_data);
#define _OMC_LIT423 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT423)
#define _OMC_LIT424_data "	 exte: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT424,8,_OMC_LIT424_data);
#define _OMC_LIT424 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT424)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT425,3,3) {&GlobalScript_Components_COMPONENTS__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT425 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT425)
#define _OMC_LIT426_data "-first_component failed: no components\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT426,39,_OMC_LIT426_data);
#define _OMC_LIT426 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT426)
#define _OMC_LIT427_data "-extract_components_from_componentitems failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT427,47,_OMC_LIT427_data);
#define _OMC_LIT427 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT427)
#define _OMC_LIT428_data "-extract_components_from_class failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT428,38,_OMC_LIT428_data);
#define _OMC_LIT428 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT428)
#define _OMC_LIT429_data "-get_components_with_type failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT429,33,_OMC_LIT429_data);
#define _OMC_LIT429 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT429)
#define _OMC_LIT430_data "-get_components_from_class failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT430,34,_OMC_LIT430_data);
#define _OMC_LIT430 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT430)
#define _OMC_LIT431_data "-get_components_with_components_type failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT431,44,_OMC_LIT431_data);
#define _OMC_LIT431 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT431)
#define _OMC_LIT432_data "-get_components_with_components_class failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT432,45,_OMC_LIT432_data);
#define _OMC_LIT432 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT432)
#define _OMC_LIT433_data "-get_dependency_with_type failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT433,33,_OMC_LIT433_data);
#define _OMC_LIT433 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT433)
#define _OMC_LIT434_data "---------comps_types----------\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT434,31,_OMC_LIT434_data);
#define _OMC_LIT434 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT434)
#define _OMC_LIT435_data "===================\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT435,20,_OMC_LIT435_data);
#define _OMC_LIT435 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT435)
#define _OMC_LIT436_data "---------DEPENDENCIES----------\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT436,32,_OMC_LIT436_data);
#define _OMC_LIT436 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT436)
#define _OMC_LIT437_data "-get_dependency_on_class failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT437,32,_OMC_LIT437_data);
#define _OMC_LIT437 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT437)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT438,3,3) {&GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc,MMC_REFSTRUCTLIT(mmc_nil),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT438 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT438)
#define _OMC_LIT439_data "-first_componentReplacement failed: no componentReplacementReplacementRules\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT439,76,_OMC_LIT439_data);
#define _OMC_LIT439 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT439)
#define _OMC_LIT440_data "-make_componentsReplacementRules_from_components failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT440,56,_OMC_LIT440_data);
#define _OMC_LIT440 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT440)
#define _OMC_LIT441_data "-get_new_componentreplacementsrules_for_each_rule failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT441,57,_OMC_LIT441_data);
#define _OMC_LIT441 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT441)
#define _OMC_LIT442_data "-get_componentreplacementsrules failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT442,39,_OMC_LIT442_data);
#define _OMC_LIT442 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT442)
#define _OMC_LIT443_data "-rename_component_in_external_decl not implemented yet\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT443,55,_OMC_LIT443_data);
#define _OMC_LIT443 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT443)
#define _OMC_LIT444_data "-rename_component_in_namedArgs failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT444,38,_OMC_LIT444_data);
#define _OMC_LIT444 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT444)
#define _OMC_LIT445_data "-rename_component_in_function_args failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT445,42,_OMC_LIT445_data);
#define _OMC_LIT445 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT445)
#define _OMC_LIT446_data "-rename_component_in_exp_algoritms_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT446,47,_OMC_LIT446_data);
#define _OMC_LIT446 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT446)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT447,1,20) {&Absyn_Exp_END__desc,}};
#define _OMC_LIT447 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT447)
#define _OMC_LIT448_data "-rename_component_in_exp failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT448,32,_OMC_LIT448_data);
#define _OMC_LIT448 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT448)
#define _OMC_LIT449_data "-rename_component_in_element_arg_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT449,45,_OMC_LIT449_data);
#define _OMC_LIT449 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT449)
#define _OMC_LIT450_data "-rename_component_in_exp_tuple_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT450,43,_OMC_LIT450_data);
#define _OMC_LIT450 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT450)
#define _OMC_LIT451_data "-rename_component_in_exp_list_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT451,42,_OMC_LIT451_data);
#define _OMC_LIT451 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT451)
#define _OMC_LIT452_data "-rename_component_in_exp_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT452,37,_OMC_LIT452_data);
#define _OMC_LIT452 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT452)
#define _OMC_LIT453_data "-rename_component_in_equation EQ_NORETCALL not implemented yet\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT453,63,_OMC_LIT453_data);
#define _OMC_LIT453 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT453)
#define _OMC_LIT454_data "-rename_component_in_equation failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT454,37,_OMC_LIT454_data);
#define _OMC_LIT454 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT454)
#define _OMC_LIT455_data "-rename_component_in_exp_equationitem_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT455,50,_OMC_LIT455_data);
#define _OMC_LIT455 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT455)
#define _OMC_LIT456_data "-Interactive.renameComponentInComponentitems failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT456,52,_OMC_LIT456_data);
#define _OMC_LIT456 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT456)
#define _OMC_LIT457_data "-rename_component_from_componentreplacements failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT457,52,_OMC_LIT457_data);
#define _OMC_LIT457 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT457)
#define _OMC_LIT458_data "-extract_renamed_classes_as_string_list failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT458,47,_OMC_LIT458_data);
#define _OMC_LIT458 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT458)
#define _OMC_LIT459_data " is in a read only file!"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT459,24,_OMC_LIT459_data);
#define _OMC_LIT459 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT459)
#define _OMC_LIT460_data "renameComponentOnlyInClass failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT460,34,_OMC_LIT460_data);
#define _OMC_LIT460 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT460)
#define _OMC_LIT461_data "failtrace"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT461,9,_OMC_LIT461_data);
#define _OMC_LIT461 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT461)
#define _OMC_LIT462_data "Sets whether to print a failtrace or not."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT462,41,_OMC_LIT462_data);
#define _OMC_LIT462 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT462)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT463,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT462}};
#define _OMC_LIT463 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT463)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT464,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT461,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT463}};
#define _OMC_LIT464 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT464)
#define _OMC_LIT465_data "rename_component failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT465,24,_OMC_LIT465_data);
#define _OMC_LIT465 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT465)
#define _OMC_LIT466_data "Interactive.extractAllComponentreplacements"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT466,43,_OMC_LIT466_data);
#define _OMC_LIT466 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT466)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT467,2,3) {&Dump_DumpOptions_DUMPOPTIONS__desc,_OMC_LIT9}};
#define _OMC_LIT467 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT467)
#include "util/modelica.h"
#include "InteractiveUtil_includes.h"
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClassListNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClassListNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClassListNoPartial,2,0) {(void*) boxptr_InteractiveUtil_getClassnamesInClassListNoPartial,0}};
#define boxvar_InteractiveUtil_getClassnamesInClassListNoPartial MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClassListNoPartial)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateConnectionNamesInEqList(threadData_t *threadData, modelica_metatype _equations, modelica_string _from, modelica_string _to, modelica_string _fromNew, modelica_string _toNew);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateConnectionNamesInEqList,2,0) {(void*) boxptr_InteractiveUtil_updateConnectionNamesInEqList,0}};
#define boxvar_InteractiveUtil_updateConnectionNamesInEqList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateConnectionNamesInEqList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateConnectionAnnotationInEqList(threadData_t *threadData, modelica_metatype _equations, modelica_string _from, modelica_string _to, modelica_metatype _ann);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateConnectionAnnotationInEqList,2,0) {(void*) boxptr_InteractiveUtil_updateConnectionAnnotationInEqList,0}};
#define boxvar_InteractiveUtil_updateConnectionAnnotationInEqList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateConnectionAnnotationInEqList)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItem, modelica_boolean _inBoolean, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItem, modelica_metatype _inBoolean, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInAlgorithmItem,2,0) {(void*) boxptr_InteractiveUtil_getLocalVariablesInAlgorithmItem,0}};
#define boxvar_InteractiveUtil_getLocalVariablesInAlgorithmItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInAlgorithmItem)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst, modelica_boolean _inBoolean, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst, modelica_metatype _inBoolean, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInAlgorithmsItems,2,0) {(void*) boxptr_InteractiveUtil_getLocalVariablesInAlgorithmsItems,0}};
#define boxvar_InteractiveUtil_getLocalVariablesInAlgorithmsItems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInAlgorithmsItems)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInClassParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_boolean _inBoolean, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInClassParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inBoolean, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInClassParts,2,0) {(void*) boxptr_InteractiveUtil_getLocalVariablesInClassParts,0}};
#define boxvar_InteractiveUtil_getLocalVariablesInClassParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLocalVariablesInClassParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementsString2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv, modelica_metatype _acc);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementsString2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv, modelica_metatype _acc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsString2,2,0) {(void*) boxptr_InteractiveUtil_getElementsString2,0}};
#define boxvar_InteractiveUtil_getElementsString2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsString2)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementsString(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementsString(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsString,2,0) {(void*) boxptr_InteractiveUtil_getElementsString,0}};
#define boxvar_InteractiveUtil_getElementsString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_boolean _inQuoteNames, modelica_string _inVisibility, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inQuoteNames, modelica_metatype _inVisibility, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementInfo,2,0) {(void*) boxptr_InteractiveUtil_getElementInfo,0}};
#define boxvar_InteractiveUtil_getElementInfo MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementInfo)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementsInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsInElementitems,2,0) {(void*) boxptr_InteractiveUtil_getElementsInElementitems,0}};
#define boxvar_InteractiveUtil_getElementsInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementsInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsFromItems(threadData_t *threadData, modelica_metatype _inComponentItems, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsFromItems,2,0) {(void*) boxptr_InteractiveUtil_getElementitemsAnnotationsFromItems,0}};
#define boxvar_InteractiveUtil_getElementitemsAnnotationsFromItems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsFromItems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsElArgs(threadData_t *threadData, modelica_metatype _inElementArgs, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsElArgs,2,0) {(void*) boxptr_InteractiveUtil_getElementitemsAnnotationsElArgs,0}};
#define boxvar_InteractiveUtil_getElementitemsAnnotationsElArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsElArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAnnotationsFromConstraintClass(threadData_t *threadData, modelica_metatype _inCC);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationsFromConstraintClass,2,0) {(void*) boxptr_InteractiveUtil_getAnnotationsFromConstraintClass,0}};
#define boxvar_InteractiveUtil_getAnnotationsFromConstraintClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationsFromConstraintClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsFromElArgs(threadData_t *threadData, modelica_metatype _inAnnotations, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsFromElArgs,2,0) {(void*) boxptr_InteractiveUtil_getElementitemsAnnotationsFromElArgs,0}};
#define boxvar_InteractiveUtil_getElementitemsAnnotationsFromElArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotationsFromElArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotations(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotations,2,0) {(void*) boxptr_InteractiveUtil_getElementitemsAnnotations,0}};
#define boxvar_InteractiveUtil_getElementitemsAnnotations MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemsAnnotations)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementAnnotationsFromElts(threadData_t *threadData, modelica_metatype _comps, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementAnnotationsFromElts,2,0) {(void*) boxptr_InteractiveUtil_getElementAnnotationsFromElts,0}};
#define boxvar_InteractiveUtil_getElementAnnotationsFromElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementAnnotationsFromElts)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElements2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_boolean _inBoolean, modelica_integer _inAccess);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElements2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inBoolean, modelica_metatype _inAccess);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElements2,2,0) {(void*) boxptr_InteractiveUtil_getElements2,0}};
#define boxvar_InteractiveUtil_getElements2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElements2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getModificationNames(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_boolean _includeRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getModificationNames(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _includeRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getModificationNames,2,0) {(void*) boxptr_InteractiveUtil_getModificationNames,0}};
#define boxvar_InteractiveUtil_getModificationNames MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getModificationNames)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_findPathModification(threadData_t *threadData, modelica_metatype _path, modelica_metatype _lst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_findPathModification(threadData_t *threadData, modelica_metatype _path, modelica_metatype _lst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_findPathModification,2,0) {(void*) boxptr_InteractiveUtil_findPathModification,0}};
#define boxvar_InteractiveUtil_findPathModification MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_findPathModification)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElementargs(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath, modelica_metatype _inModification);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElementargs,2,0) {(void*) boxptr_InteractiveUtil_setSubmodifierInElementargs,0}};
#define boxvar_InteractiveUtil_setSubmodifierInElementargs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElementargs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInClass(threadData_t *threadData, modelica_metatype _inElementName, modelica_metatype _inClass, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInClass,2,0) {(void*) boxptr_InteractiveUtil_setSubmodifierInClass,0}};
#define boxvar_InteractiveUtil_setSubmodifierInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElementSpec(threadData_t *threadData, modelica_metatype _inElementName, modelica_metatype _inElSpec, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElementSpec,2,0) {(void*) boxptr_InteractiveUtil_setSubmodifierInElementSpec,0}};
#define boxvar_InteractiveUtil_setSubmodifierInElementSpec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElementSpec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_boolean _inFound, modelica_metatype _inElementName, modelica_metatype _inMod, modelica_boolean *out_outFound, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inFound, modelica_metatype _inElementName, modelica_metatype _inMod, modelica_metatype *out_outFound, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElement,2,0) {(void*) boxptr_InteractiveUtil_setSubmodifierInElement,0}};
#define boxvar_InteractiveUtil_setSubmodifierInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setSubmodifierInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementSubmodifierInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementName, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementSubmodifierInClass,2,0) {(void*) boxptr_InteractiveUtil_setElementSubmodifierInClass,0}};
#define boxvar_InteractiveUtil_setElementSubmodifierInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementSubmodifierInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_expToString(threadData_t *threadData, modelica_metatype _inExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_expToString,2,0) {(void*) boxptr_InteractiveUtil_expToString,0}};
#define boxvar_InteractiveUtil_expToString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_expToString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getFeaturesAnnotationList2(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFeaturesAnnotationList2,2,0) {(void*) boxptr_InteractiveUtil_getFeaturesAnnotationList2,0}};
#define boxvar_InteractiveUtil_getFeaturesAnnotationList2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFeaturesAnnotationList2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getFeaturesAnnotationList(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFeaturesAnnotationList,2,0) {(void*) boxptr_InteractiveUtil_getFeaturesAnnotationList,0}};
#define boxvar_InteractiveUtil_getFeaturesAnnotationList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFeaturesAnnotationList)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLicenseAnnotationLicenseFile(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLicenseAnnotationLicenseFile,2,0) {(void*) boxptr_InteractiveUtil_getLicenseAnnotationLicenseFile,0}};
#define boxvar_InteractiveUtil_getLicenseAnnotationLicenseFile MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLicenseAnnotationLicenseFile)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLicenseAnnotationLibraryKey(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLicenseAnnotationLibraryKey,2,0) {(void*) boxptr_InteractiveUtil_getLicenseAnnotationLibraryKey,0}};
#define boxvar_InteractiveUtil_getLicenseAnnotationLibraryKey MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLicenseAnnotationLibraryKey)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getLicenseAnnotationTuple(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLicenseAnnotationTuple,2,0) {(void*) boxptr_InteractiveUtil_getLicenseAnnotationTuple,0}};
#define boxvar_InteractiveUtil_getLicenseAnnotationTuple MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLicenseAnnotationTuple)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getLicenseAnnotationWork2(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLicenseAnnotationWork2,2,0) {(void*) boxptr_InteractiveUtil_getLicenseAnnotationWork2,0}};
#define boxvar_InteractiveUtil_getLicenseAnnotationWork2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLicenseAnnotationWork2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getLicenseAnnotationWork1(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLicenseAnnotationWork1,2,0) {(void*) boxptr_InteractiveUtil_getLicenseAnnotationWork1,0}};
#define boxvar_InteractiveUtil_getLicenseAnnotationWork1 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getLicenseAnnotationWork1)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAccessAnnotationString2(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAccessAnnotationString2,2,0) {(void*) boxptr_InteractiveUtil_getAccessAnnotationString2,0}};
#define boxvar_InteractiveUtil_getAccessAnnotationString2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAccessAnnotationString2)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAccessAnnotationString(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAccessAnnotationString,2,0) {(void*) boxptr_InteractiveUtil_getAccessAnnotationString,0}};
#define boxvar_InteractiveUtil_getAccessAnnotationString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAccessAnnotationString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_excludeElementsFromFile(threadData_t *threadData, modelica_string _inFile, modelica_metatype _inEls);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_excludeElementsFromFile,2,0) {(void*) boxptr_InteractiveUtil_excludeElementsFromFile,0}};
#define boxvar_InteractiveUtil_excludeElementsFromFile MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_excludeElementsFromFile)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeElements(threadData_t *threadData, modelica_metatype _inEls1, modelica_metatype _inEls2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeElements,2,0) {(void*) boxptr_InteractiveUtil_mergeElements,0}};
#define boxvar_InteractiveUtil_mergeElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeElement(threadData_t *threadData, modelica_metatype _inEls, modelica_metatype _inEl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeElement,2,0) {(void*) boxptr_InteractiveUtil_mergeElement,0}};
#define boxvar_InteractiveUtil_mergeElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeClasses(threadData_t *threadData, modelica_metatype _cNew, modelica_metatype _cOld);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeClasses,2,0) {(void*) boxptr_InteractiveUtil_mergeClasses,0}};
#define boxvar_InteractiveUtil_mergeClasses MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentDimensionsInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inFound, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_boolean *out_outFound, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentDimensionsInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inFound, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_metatype *out_outFound, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentDimensionsInCompitems,2,0) {(void*) boxptr_InteractiveUtil_setComponentDimensionsInCompitems,0}};
#define boxvar_InteractiveUtil_setComponentDimensionsInCompitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentDimensionsInCompitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentDimensionsInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _inDimensions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentDimensionsInClass,2,0) {(void*) boxptr_InteractiveUtil_setComponentDimensionsInClass,0}};
#define boxvar_InteractiveUtil_setComponentDimensionsInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentDimensionsInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassEnvNoElaboration(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inClassPath, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassEnvNoElaboration,2,0) {(void*) boxptr_InteractiveUtil_getClassEnvNoElaboration,0}};
#define boxvar_InteractiveUtil_getClassEnvNoElaboration MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassEnvNoElaboration)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassNameFromExtends(threadData_t *threadData, modelica_metatype _inElementSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassNameFromExtends,2,0) {(void*) boxptr_InteractiveUtil_getBaseClassNameFromExtends,0}};
#define boxvar_InteractiveUtil_getBaseClassNameFromExtends MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassNameFromExtends)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAllClassesInClass(threadData_t *threadData, modelica_metatype _class_);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAllClassesInClass,2,0) {(void*) boxptr_InteractiveUtil_getAllClassesInClass,0}};
#define boxvar_InteractiveUtil_getAllClassesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAllClassesInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getFunctionsInClasses(threadData_t *threadData, modelica_metatype _classes, modelica_metatype _acc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFunctionsInClasses,2,0) {(void*) boxptr_InteractiveUtil_getFunctionsInClasses,0}};
#define boxvar_InteractiveUtil_getFunctionsInClasses MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFunctionsInClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentElementInClass(threadData_t *threadData, modelica_metatype _cl, modelica_string _compName);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentElementInClass,2,0) {(void*) boxptr_InteractiveUtil_getComponentElementInClass,0}};
#define boxvar_InteractiveUtil_getComponentElementInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentElementInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getSCodeClassNamesRecursiveWork(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inAcc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getSCodeClassNamesRecursiveWork,2,0) {(void*) boxptr_InteractiveUtil_getSCodeClassNamesRecursiveWork,0}};
#define boxvar_InteractiveUtil_getSCodeClassNamesRecursiveWork MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getSCodeClassNamesRecursiveWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinPaths(threadData_t *threadData, modelica_string _child, modelica_metatype _parent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinPaths,2,0) {(void*) boxptr_InteractiveUtil_joinPaths,0}};
#define boxvar_InteractiveUtil_joinPaths MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinPaths)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClassList(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClassList(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClassList,2,0) {(void*) boxptr_InteractiveUtil_getClassnamesInClassList,0}};
#define boxvar_InteractiveUtil_getClassnamesInClassList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClassList)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentBindingMapable(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inProgram3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentBindingMapable,2,0) {(void*) boxptr_InteractiveUtil_getComponentBindingMapable,0}};
#define boxvar_InteractiveUtil_getComponentBindingMapable MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentBindingMapable)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getVisElementNameFromStr(threadData_t *threadData, modelica_string _str);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVisElementNameFromStr,2,0) {(void*) boxptr_InteractiveUtil_getVisElementNameFromStr,0}};
#define boxvar_InteractiveUtil_getVisElementNameFromStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVisElementNameFromStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_constructVisTypesList(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_constructVisTypesList,2,0) {(void*) boxptr_InteractiveUtil_constructVisTypesList,0}};
#define boxvar_InteractiveUtil_constructVisTypesList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_constructVisTypesList)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNameFromElementIfVisType(threadData_t *threadData, modelica_metatype _inElementItem, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNameFromElementIfVisType,2,0) {(void*) boxptr_InteractiveUtil_getNameFromElementIfVisType,0}};
#define boxvar_InteractiveUtil_getNameFromElementIfVisType MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNameFromElementIfVisType)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDescIfVis(threadData_t *threadData, modelica_string _in_type, modelica_metatype _inElement, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDescIfVis,2,0) {(void*) boxptr_InteractiveUtil_getDescIfVis,0}};
#define boxvar_InteractiveUtil_getDescIfVis MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDescIfVis)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementTypeName(threadData_t *threadData, modelica_metatype _inElementSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementTypeName,2,0) {(void*) boxptr_InteractiveUtil_getElementTypeName,0}};
#define boxvar_InteractiveUtil_getElementTypeName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementTypeName)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementName(threadData_t *threadData, modelica_metatype _inElementSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementName,2,0) {(void*) boxptr_InteractiveUtil_getElementName,0}};
#define boxvar_InteractiveUtil_getElementName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionTypeVars(threadData_t *threadData, modelica_metatype _inTypeVars, modelica_metatype _inDefinitions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionTypeVars,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionTypeVars,0}};
#define boxvar_InteractiveUtil_getDefinitionTypeVars MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionTypeVars)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionComponents(threadData_t *threadData, modelica_string _typeStr, modelica_string _dirStr, modelica_integer _numDim, modelica_metatype _components);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionComponents(threadData_t *threadData, modelica_metatype _typeStr, modelica_metatype _dirStr, modelica_metatype _numDim, modelica_metatype _components);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionComponents,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionComponents,0}};
#define boxvar_InteractiveUtil_getDefinitionComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionComponents)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionDirString(threadData_t *threadData, modelica_metatype _dir, modelica_metatype _variability, modelica_boolean _isFunction);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionDirString(threadData_t *threadData, modelica_metatype _dir, modelica_metatype _variability, modelica_metatype _isFunction);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionDirString,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionDirString,0}};
#define boxvar_InteractiveUtil_getDefinitionDirString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionDirString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionContent(threadData_t *threadData, modelica_metatype _contents, modelica_boolean _addFunctions, modelica_boolean _isPublic);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionContent(threadData_t *threadData, modelica_metatype _contents, modelica_metatype _addFunctions, modelica_metatype _isPublic);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionContent,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionContent,0}};
#define boxvar_InteractiveUtil_getDefinitionContent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionContent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionParts(threadData_t *threadData, modelica_metatype _parts, modelica_metatype _inTypeVars, modelica_boolean _isFunction);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionParts(threadData_t *threadData, modelica_metatype _parts, modelica_metatype _inTypeVars, modelica_metatype _isFunction);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionParts,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionParts,0}};
#define boxvar_InteractiveUtil_getDefinitionParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionParts)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_getDefinitionDimensions(threadData_t *threadData, modelica_metatype _ts, modelica_metatype _attr);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionDimensions(threadData_t *threadData, modelica_metatype _ts, modelica_metatype _attr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionDimensions,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionDimensions,0}};
#define boxvar_InteractiveUtil_getDefinitionDimensions MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionDimensions)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionPathString(threadData_t *threadData, modelica_metatype _path);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionPathString,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionPathString,0}};
#define boxvar_InteractiveUtil_getDefinitionPathString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionPathString)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getEnumerationLiterals(threadData_t *threadData, modelica_metatype _el);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getEnumerationLiterals,2,0) {(void*) boxptr_InteractiveUtil_getEnumerationLiterals,0}};
#define boxvar_InteractiveUtil_getEnumerationLiterals MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getEnumerationLiterals)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionsReplaceableClass(threadData_t *threadData, modelica_metatype _class_);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionsReplaceableClass,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionsReplaceableClass,0}};
#define boxvar_InteractiveUtil_getDefinitionsReplaceableClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionsReplaceableClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionsClass(threadData_t *threadData, modelica_metatype _class_, modelica_boolean _addFunctions);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionsClass(threadData_t *threadData, modelica_metatype _class_, modelica_metatype _addFunctions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionsClass,2,0) {(void*) boxptr_InteractiveUtil_getDefinitionsClass,0}};
#define boxvar_InteractiveUtil_getDefinitionsClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitionsClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitions2(threadData_t *threadData, modelica_metatype _classes, modelica_boolean _addFunctions);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitions2(threadData_t *threadData, modelica_metatype _classes, modelica_metatype _addFunctions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitions2,2,0) {(void*) boxptr_InteractiveUtil_getDefinitions2,0}};
#define boxvar_InteractiveUtil_getDefinitions2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefinitions2)
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_printWithNewline(threadData_t *threadData, modelica_string _s);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_printWithNewline,2,0) {(void*) boxptr_InteractiveUtil_printWithNewline,0}};
#define boxvar_InteractiveUtil_printWithNewline MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_printWithNewline)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElseIfAlgorithm(threadData_t *threadData, modelica_metatype _elseIfbranch);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElseIfAlgorithm,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElseIfAlgorithm,0}};
#define boxvar_InteractiveUtil_transformFlatElseIfAlgorithm MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElseIfAlgorithm)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatAlgorithm(threadData_t *threadData, modelica_metatype _alg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatAlgorithm,2,0) {(void*) boxptr_InteractiveUtil_transformFlatAlgorithm,0}};
#define boxvar_InteractiveUtil_transformFlatAlgorithm MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatAlgorithm)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatAlgorithmItem(threadData_t *threadData, modelica_metatype _algitem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatAlgorithmItem,2,0) {(void*) boxptr_InteractiveUtil_transformFlatAlgorithmItem,0}};
#define boxvar_InteractiveUtil_transformFlatAlgorithmItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatAlgorithmItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatExp(threadData_t *threadData, modelica_metatype _inExp, modelica_integer _inDummy, modelica_integer *out_outDummy);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformFlatExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDummy, modelica_metatype *out_outDummy);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatExp,2,0) {(void*) boxptr_InteractiveUtil_transformFlatExp,0}};
#define boxvar_InteractiveUtil_transformFlatExp MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatNamedArg(threadData_t *threadData, modelica_metatype _namedArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatNamedArg,2,0) {(void*) boxptr_InteractiveUtil_transformFlatNamedArg,0}};
#define boxvar_InteractiveUtil_transformFlatNamedArg MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatNamedArg)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatFunctionArgs(threadData_t *threadData, modelica_metatype _fargs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatFunctionArgs,2,0) {(void*) boxptr_InteractiveUtil_transformFlatFunctionArgs,0}};
#define boxvar_InteractiveUtil_transformFlatFunctionArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatFunctionArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElseIfPart(threadData_t *threadData, modelica_metatype _elseIfPart);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElseIfPart,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElseIfPart,0}};
#define boxvar_InteractiveUtil_transformFlatElseIfPart MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElseIfPart)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatEquation(threadData_t *threadData, modelica_metatype _eqn);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatEquation,2,0) {(void*) boxptr_InteractiveUtil_transformFlatEquation,0}};
#define boxvar_InteractiveUtil_transformFlatEquation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatEquationItem(threadData_t *threadData, modelica_metatype _eqnitem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatEquationItem,2,0) {(void*) boxptr_InteractiveUtil_transformFlatEquationItem,0}};
#define boxvar_InteractiveUtil_transformFlatEquationItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatEquationItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponentRef(threadData_t *threadData, modelica_metatype _cr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponentRef,2,0) {(void*) boxptr_InteractiveUtil_transformFlatComponentRef,0}};
#define boxvar_InteractiveUtil_transformFlatComponentRef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponentRef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatModificationOption(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatModificationOption,2,0) {(void*) boxptr_InteractiveUtil_transformFlatModificationOption,0}};
#define boxvar_InteractiveUtil_transformFlatModificationOption MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatModificationOption)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementArg(threadData_t *threadData, modelica_metatype _eltArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementArg,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElementArg,0}};
#define boxvar_InteractiveUtil_transformFlatElementArg MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementArg)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatSubscript(threadData_t *threadData, modelica_metatype _s);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatSubscript,2,0) {(void*) boxptr_InteractiveUtil_transformFlatSubscript,0}};
#define boxvar_InteractiveUtil_transformFlatSubscript MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatSubscript)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatArrayDim(threadData_t *threadData, modelica_metatype _ad);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatArrayDim,2,0) {(void*) boxptr_InteractiveUtil_transformFlatArrayDim,0}};
#define boxvar_InteractiveUtil_transformFlatArrayDim MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatArrayDim)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponent(threadData_t *threadData, modelica_metatype _comp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponent,2,0) {(void*) boxptr_InteractiveUtil_transformFlatComponent,0}};
#define boxvar_InteractiveUtil_transformFlatComponent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponentItem(threadData_t *threadData, modelica_metatype _compitem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponentItem,2,0) {(void*) boxptr_InteractiveUtil_transformFlatComponentItem,0}};
#define boxvar_InteractiveUtil_transformFlatComponentItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatComponentItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementSpec(threadData_t *threadData, modelica_metatype _eltSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementSpec,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElementSpec,0}};
#define boxvar_InteractiveUtil_transformFlatElementSpec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementSpec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElement(threadData_t *threadData, modelica_metatype _elt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElement,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElement,0}};
#define boxvar_InteractiveUtil_transformFlatElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementItem(threadData_t *threadData, modelica_metatype _eitem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementItem,2,0) {(void*) boxptr_InteractiveUtil_transformFlatElementItem,0}};
#define boxvar_InteractiveUtil_transformFlatElementItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatElementItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatClassDef(threadData_t *threadData, modelica_metatype _cdef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatClassDef,2,0) {(void*) boxptr_InteractiveUtil_transformFlatClassDef,0}};
#define boxvar_InteractiveUtil_transformFlatClassDef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatClassDef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatClass(threadData_t *threadData, modelica_metatype _inTuple);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatClass,2,0) {(void*) boxptr_InteractiveUtil_transformFlatClass,0}};
#define boxvar_InteractiveUtil_transformFlatClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformFlatClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getSurroundingPackage(threadData_t *threadData, modelica_metatype _classpath, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getSurroundingPackage,2,0) {(void*) boxptr_InteractiveUtil_getSurroundingPackage,0}};
#define boxvar_InteractiveUtil_getSurroundingPackage MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getSurroundingPackage)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeClassDiffFiledInElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_string _inFilename);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeClassDiffFiledInElementitemlist,2,0) {(void*) boxptr_InteractiveUtil_removeClassDiffFiledInElementitemlist,0}};
#define boxvar_InteractiveUtil_removeClassDiffFiledInElementitemlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeClassDiffFiledInElementitemlist)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classIsInFile(threadData_t *threadData, modelica_string _inFilename, modelica_metatype _inElement);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classIsInFile(threadData_t *threadData, modelica_metatype _inFilename, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_classIsInFile,2,0) {(void*) boxptr_InteractiveUtil_classIsInFile,0}};
#define boxvar_InteractiveUtil_classIsInFile MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_classIsInFile)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerDiffFiledClass(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerDiffFiledClass,2,0) {(void*) boxptr_InteractiveUtil_removeInnerDiffFiledClass,0}};
#define boxvar_InteractiveUtil_removeInnerDiffFiledClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerDiffFiledClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerDiffFiledClasses(threadData_t *threadData, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerDiffFiledClasses,2,0) {(void*) boxptr_InteractiveUtil_removeInnerDiffFiledClasses,0}};
#define boxvar_InteractiveUtil_removeInnerDiffFiledClasses MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerDiffFiledClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_namedargToModification(threadData_t *threadData, modelica_metatype _inNamedArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_namedargToModification,2,0) {(void*) boxptr_InteractiveUtil_namedargToModification,0}};
#define boxvar_InteractiveUtil_namedargToModification MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_namedargToModification)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_recordConstructorToModification(threadData_t *threadData, modelica_metatype _inExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_recordConstructorToModification,2,0) {(void*) boxptr_InteractiveUtil_recordConstructorToModification,0}};
#define boxvar_InteractiveUtil_recordConstructorToModification MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_recordConstructorToModification)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_commentToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_commentToAbsyn,2,0) {(void*) boxptr_InteractiveUtil_commentToAbsyn,0}};
#define boxvar_InteractiveUtil_commentToAbsyn MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_commentToAbsyn)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_annotationListToAbsynComment2(threadData_t *threadData, modelica_metatype _inNamedArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_annotationListToAbsynComment2,2,0) {(void*) boxptr_InteractiveUtil_annotationListToAbsynComment2,0}};
#define boxvar_InteractiveUtil_annotationListToAbsynComment2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_annotationListToAbsynComment2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_annotationListToAbsynComment(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inAbsynCommentOption);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_annotationListToAbsynComment,2,0) {(void*) boxptr_InteractiveUtil_annotationListToAbsynComment,0}};
#define boxvar_InteractiveUtil_annotationListToAbsynComment MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_annotationListToAbsynComment)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_selectAnnotation(threadData_t *threadData, modelica_metatype _newAnn, modelica_metatype _oldAnn);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_selectAnnotation,2,0) {(void*) boxptr_InteractiveUtil_selectAnnotation,0}};
#define boxvar_InteractiveUtil_selectAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_selectAnnotation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_modificationToAbsyn2(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_modificationToAbsyn2,2,0) {(void*) boxptr_InteractiveUtil_modificationToAbsyn2,0}};
#define boxvar_InteractiveUtil_modificationToAbsyn2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_modificationToAbsyn2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_modificationToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inAbsynModificationOption);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_modificationToAbsyn,2,0) {(void*) boxptr_InteractiveUtil_modificationToAbsyn,0}};
#define boxvar_InteractiveUtil_modificationToAbsyn MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_modificationToAbsyn)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformClassInElementSpec(threadData_t *threadData, modelica_string _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fspec, modelica_boolean *out_found);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformClassInElementSpec(threadData_t *threadData, modelica_metatype _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fspec, modelica_metatype *out_found);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformClassInElementSpec,2,0) {(void*) boxptr_InteractiveUtil_transformClassInElementSpec,0}};
#define boxvar_InteractiveUtil_transformClassInElementSpec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformClassInElementSpec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformClassInElement(threadData_t *threadData, modelica_string _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Felement, modelica_boolean *out_found);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformClassInElement(threadData_t *threadData, modelica_metatype _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Felement, modelica_metatype *out_found);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformClassInElement,2,0) {(void*) boxptr_InteractiveUtil_transformClassInElement,0}};
#define boxvar_InteractiveUtil_transformClassInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformClassInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformClassInElementItem(threadData_t *threadData, modelica_string _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fitem, modelica_boolean *out_found);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformClassInElementItem(threadData_t *threadData, modelica_metatype _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fitem, modelica_metatype *out_found);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformClassInElementItem,2,0) {(void*) boxptr_InteractiveUtil_transformClassInElementItem,0}};
#define boxvar_InteractiveUtil_transformClassInElementItem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformClassInElementItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformClassInClassPart(threadData_t *threadData, modelica_string _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fpart, modelica_boolean *out_found);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformClassInClassPart(threadData_t *threadData, modelica_metatype _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fpart, modelica_metatype *out_found);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformClassInClassPart,2,0) {(void*) boxptr_InteractiveUtil_transformClassInClassPart,0}};
#define boxvar_InteractiveUtil_transformClassInClassPart MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformClassInClassPart)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformClassInClass(threadData_t *threadData, modelica_string _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fcls);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformClassInClass,2,0) {(void*) boxptr_InteractiveUtil_transformClassInClass,0}};
#define boxvar_InteractiveUtil_transformClassInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformClassInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformPathedClassInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_fnptr _inFunc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformPathedClassInClass,2,0) {(void*) boxptr_InteractiveUtil_transformPathedClassInClass,0}};
#define boxvar_InteractiveUtil_transformPathedClassInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_transformPathedClassInClass)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_compareClassName(threadData_t *threadData, modelica_metatype _cl, modelica_string _str);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_compareClassName(threadData_t *threadData, modelica_metatype _cl, modelica_metatype _str);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_compareClassName,2,0) {(void*) boxptr_InteractiveUtil_compareClassName,0}};
#define boxvar_InteractiveUtil_compareClassName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_compareClassName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassInProgram(threadData_t *threadData, modelica_string _inString, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassInProgram,2,0) {(void*) boxptr_InteractiveUtil_getClassInProgram,0}};
#define boxvar_InteractiveUtil_getClassInProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassInProgram)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInElts,2,0) {(void*) boxptr_InteractiveUtil_getClassesInElts,0}};
#define boxvar_InteractiveUtil_getClassesInElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInElts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInParts,2,0) {(void*) boxptr_InteractiveUtil_getClassesInParts,0}};
#define boxvar_InteractiveUtil_getClassesInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInClass(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInClass,2,0) {(void*) boxptr_InteractiveUtil_getClassesInClass,0}};
#define boxvar_InteractiveUtil_getClassesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassesInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassInClass(threadData_t *threadData, modelica_string _inString, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassInClass,2,0) {(void*) boxptr_InteractiveUtil_getClassInClass,0}};
#define boxvar_InteractiveUtil_getClassInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWorkNoThrow(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWorkNoThrow,2,0) {(void*) boxptr_InteractiveUtil_getPathedClassInProgramWorkNoThrow,0}};
#define boxvar_InteractiveUtil_getPathedClassInProgramWorkNoThrow MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWorkNoThrow)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWorkThrow(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWorkThrow,2,0) {(void*) boxptr_InteractiveUtil_getPathedClassInProgramWorkThrow,0}};
#define boxvar_InteractiveUtil_getPathedClassInProgramWorkThrow MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWorkThrow)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWork(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _enclOnErr);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getPathedClassInProgramWork(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _enclOnErr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWork,2,0) {(void*) boxptr_InteractiveUtil_getPathedClassInProgramWork,0}};
#define boxvar_InteractiveUtil_getPathedClassInProgramWork MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPathedClassInProgramWork)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classInProgram(threadData_t *threadData, modelica_string _name, modelica_metatype _p);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classInProgram(threadData_t *threadData, modelica_metatype _name, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_classInProgram,2,0) {(void*) boxptr_InteractiveUtil_classInProgram,0}};
#define boxvar_InteractiveUtil_classInProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_classInProgram)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassFromElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_string _inIdent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassFromElementitemlist,2,0) {(void*) boxptr_InteractiveUtil_getClassFromElementitemlist,0}};
#define boxvar_InteractiveUtil_getClassFromElementitemlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassFromElementitemlist)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInitialAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInitialAlgorithmList,2,0) {(void*) boxptr_InteractiveUtil_getInitialAlgorithmList,0}};
#define boxvar_InteractiveUtil_getInitialAlgorithmList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInitialAlgorithmList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAlgorithmList,2,0) {(void*) boxptr_InteractiveUtil_getAlgorithmList,0}};
#define boxvar_InteractiveUtil_getAlgorithmList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAlgorithmList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInitialEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInitialEquationList,2,0) {(void*) boxptr_InteractiveUtil_getInitialEquationList,0}};
#define boxvar_InteractiveUtil_getInitialEquationList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInitialEquationList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteProtectedList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteProtectedList,2,0) {(void*) boxptr_InteractiveUtil_deleteProtectedList,0}};
#define boxvar_InteractiveUtil_deleteProtectedList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteProtectedList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deletePublicList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deletePublicList,2,0) {(void*) boxptr_InteractiveUtil_deletePublicList,0}};
#define boxvar_InteractiveUtil_deletePublicList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deletePublicList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInitialAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynAlgorithmItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInitialAlgorithmList,2,0) {(void*) boxptr_InteractiveUtil_replaceInitialAlgorithmList,0}};
#define boxvar_InteractiveUtil_replaceInitialAlgorithmList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInitialAlgorithmList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynAlgorithmItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceAlgorithmList,2,0) {(void*) boxptr_InteractiveUtil_replaceAlgorithmList,0}};
#define boxvar_InteractiveUtil_replaceAlgorithmList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceAlgorithmList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInitialEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynEquationItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInitialEquationList,2,0) {(void*) boxptr_InteractiveUtil_replaceInitialEquationList,0}};
#define boxvar_InteractiveUtil_replaceInitialEquationList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInitialEquationList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceProtectedList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceProtectedList,2,0) {(void*) boxptr_InteractiveUtil_replaceProtectedList,0}};
#define boxvar_InteractiveUtil_replaceProtectedList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceProtectedList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replacePublicList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replacePublicList,2,0) {(void*) boxptr_InteractiveUtil_replacePublicList,0}};
#define boxvar_InteractiveUtil_replacePublicList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replacePublicList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInnerClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inIdent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInnerClass,2,0) {(void*) boxptr_InteractiveUtil_getInnerClass,0}};
#define boxvar_InteractiveUtil_getInnerClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInnerClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_addClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_addClassInElementitemlist,2,0) {(void*) boxptr_InteractiveUtil_addClassInElementitemlist,0}};
#define boxvar_InteractiveUtil_addClassInElementitemlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_addClassInElementitemlist)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass, modelica_boolean _mergeAST, modelica_boolean *out_replaced);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass, modelica_metatype _mergeAST, modelica_metatype *out_replaced);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInElementitemlist,2,0) {(void*) boxptr_InteractiveUtil_replaceClassInElementitemlist,0}};
#define boxvar_InteractiveUtil_replaceClassInElementitemlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInElementitemlist)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_boolean _mergeAST);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _mergeAST);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInnerClass,2,0) {(void*) boxptr_InteractiveUtil_replaceInnerClass,0}};
#define boxvar_InteractiveUtil_replaceInnerClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceInnerClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeClassInElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeClassInElementitemlist,2,0) {(void*) boxptr_InteractiveUtil_removeClassInElementitemlist,0}};
#define boxvar_InteractiveUtil_removeClassInElementitemlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeClassInElementitemlist)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classElementItemIsNamed(threadData_t *threadData, modelica_string _inClassName, modelica_metatype _inElement);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classElementItemIsNamed(threadData_t *threadData, modelica_metatype _inClassName, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_classElementItemIsNamed,2,0) {(void*) boxptr_InteractiveUtil_classElementItemIsNamed,0}};
#define boxvar_InteractiveUtil_classElementItemIsNamed MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_classElementItemIsNamed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerClass,2,0) {(void*) boxptr_InteractiveUtil_removeInnerClass,0}};
#define boxvar_InteractiveUtil_removeInnerClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeInnerClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getFirstIdentFromPath(threadData_t *threadData, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFirstIdentFromPath,2,0) {(void*) boxptr_InteractiveUtil_getFirstIdentFromPath,0}};
#define boxvar_InteractiveUtil_getFirstIdentFromPath MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getFirstIdentFromPath)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inWithin2, modelica_metatype _inClass3, modelica_boolean _mergeAST);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_insertClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inWithin2, modelica_metatype _inClass3, modelica_metatype _mergeAST);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertClassInClass,2,0) {(void*) boxptr_InteractiveUtil_insertClassInClass,0}};
#define boxvar_InteractiveUtil_insertClassInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertClassInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inWithin, modelica_metatype _inProgram, modelica_boolean _mergeAST);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_insertClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inWithin, modelica_metatype _inProgram, modelica_metatype _mergeAST);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertClassInProgram,2,0) {(void*) boxptr_InteractiveUtil_insertClassInProgram,0}};
#define boxvar_InteractiveUtil_insertClassInProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertClassInProgram)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_boolean _mergeAST);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _mergeAST);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInProgram,2,0) {(void*) boxptr_InteractiveUtil_replaceClassInProgram,0}};
#define boxvar_InteractiveUtil_replaceClassInProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInProgram)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_replaceClassInProgram2(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inClassName);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInProgram2(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inClassName);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInProgram2,2,0) {(void*) boxptr_InteractiveUtil_replaceClassInProgram2,0}};
#define boxvar_InteractiveUtil_replaceClassInProgram2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceClassInProgram2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildPath(threadData_t *threadData, modelica_metatype _inWithin, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildPath,2,0) {(void*) boxptr_InteractiveUtil_buildPath,0}};
#define boxvar_InteractiveUtil_buildPath MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildPath)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentItemsName(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inQuoteNames);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentItemsName(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inQuoteNames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentItemsName,2,0) {(void*) boxptr_InteractiveUtil_getComponentItemsName,0}};
#define boxvar_InteractiveUtil_getComponentItemsName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentItemsName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentItemsNameAndComment(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inQuoteNames);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentItemsNameAndComment(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inQuoteNames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentItemsNameAndComment,2,0) {(void*) boxptr_InteractiveUtil_getComponentItemsNameAndComment,0}};
#define boxvar_InteractiveUtil_getComponentItemsNameAndComment MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentItemsNameAndComment)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_prefixTypename(threadData_t *threadData, modelica_string _inType, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_prefixTypename,2,0) {(void*) boxptr_InteractiveUtil_prefixTypename,0}};
#define boxvar_InteractiveUtil_prefixTypename MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_prefixTypename)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_suffixInfos(threadData_t *threadData, modelica_metatype _eltInfo, modelica_metatype _idims, modelica_string _typeAd, modelica_string _suffix, modelica_boolean _inQuoteNames);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_suffixInfos(threadData_t *threadData, modelica_metatype _eltInfo, modelica_metatype _idims, modelica_metatype _typeAd, modelica_metatype _suffix, modelica_metatype _inQuoteNames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_suffixInfos,2,0) {(void*) boxptr_InteractiveUtil_suffixInfos,0}};
#define boxvar_InteractiveUtil_suffixInfos MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_suffixInfos)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsDimension(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsDimension,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsDimension,0}};
#define boxvar_InteractiveUtil_getComponentitemsDimension MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsDimension)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrDirectionStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrDirectionStr,2,0) {(void*) boxptr_InteractiveUtil_attrDirectionStr,0}};
#define boxvar_InteractiveUtil_attrDirectionStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrDirectionStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrDimensionStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrDimensionStr,2,0) {(void*) boxptr_InteractiveUtil_attrDimensionStr,0}};
#define boxvar_InteractiveUtil_attrDimensionStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrDimensionStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrVariabilityStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrVariabilityStr,2,0) {(void*) boxptr_InteractiveUtil_attrVariabilityStr,0}};
#define boxvar_InteractiveUtil_attrVariabilityStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrVariabilityStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrParallelismStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrParallelismStr,2,0) {(void*) boxptr_InteractiveUtil_attrParallelismStr,0}};
#define boxvar_InteractiveUtil_attrParallelismStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrParallelismStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrStreamStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrStreamStr,2,0) {(void*) boxptr_InteractiveUtil_attrStreamStr,0}};
#define boxvar_InteractiveUtil_attrStreamStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrStreamStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrFlowStr(threadData_t *threadData, modelica_metatype _inElementAttributes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrFlowStr,2,0) {(void*) boxptr_InteractiveUtil_attrFlowStr,0}};
#define boxvar_InteractiveUtil_attrFlowStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_attrFlowStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_innerOuterStr(threadData_t *threadData, modelica_metatype _inInnerOuter);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_innerOuterStr,2,0) {(void*) boxptr_InteractiveUtil_innerOuterStr,0}};
#define boxvar_InteractiveUtil_innerOuterStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_innerOuterStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentInfoOld(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentInfoOld,2,0) {(void*) boxptr_InteractiveUtil_getComponentInfoOld,0}};
#define boxvar_InteractiveUtil_getComponentInfoOld MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentInfoOld)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsInfo2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv, modelica_metatype _acc);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentsInfo2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv, modelica_metatype _acc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsInfo2,2,0) {(void*) boxptr_InteractiveUtil_getComponentsInfo2,0}};
#define boxvar_InteractiveUtil_getComponentsInfo2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsInfo2)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_arrayDimensionStr(threadData_t *threadData, modelica_metatype _ad);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_arrayDimensionStr,2,0) {(void*) boxptr_InteractiveUtil_arrayDimensionStr,0}};
#define boxvar_InteractiveUtil_arrayDimensionStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_arrayDimensionStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_boolean _inQuoteNames, modelica_string _inVisibility, modelica_metatype _inEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inQuoteNames, modelica_metatype _inVisibility, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentInfo,2,0) {(void*) boxptr_InteractiveUtil_getComponentInfo,0}};
#define boxvar_InteractiveUtil_getComponentInfo MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentInfo)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNthComponentInElementitems(threadData_t *threadData, modelica_metatype _inElements, modelica_integer _inInteger);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthComponentInElementitems(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inInteger);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthComponentInElementitems,2,0) {(void*) boxptr_InteractiveUtil_getNthComponentInElementitems,0}};
#define boxvar_InteractiveUtil_getNthComponentInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthComponentInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildEnvForGraphicProgramFull(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inModelPath, modelica_metatype *out_outEnv, modelica_metatype *out_outProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildEnvForGraphicProgramFull,2,0) {(void*) boxptr_InteractiveUtil_buildEnvForGraphicProgramFull,0}};
#define boxvar_InteractiveUtil_buildEnvForGraphicProgramFull MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildEnvForGraphicProgramFull)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildEnvForGraphicProgram(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inAnnotationMod, modelica_metatype *out_outEnv, modelica_metatype *out_outGraphicProgram, modelica_metatype *out_outGraphicEnvCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildEnvForGraphicProgram,2,0) {(void*) boxptr_InteractiveUtil_buildEnvForGraphicProgram,0}};
#define boxvar_InteractiveUtil_buildEnvForGraphicProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_buildEnvForGraphicProgram)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_cacheFromGraphicEnvCache(threadData_t *threadData, modelica_metatype _inEnvCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_cacheFromGraphicEnvCache,2,0) {(void*) boxptr_InteractiveUtil_cacheFromGraphicEnvCache,0}};
#define boxvar_InteractiveUtil_cacheFromGraphicEnvCache MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_cacheFromGraphicEnvCache)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_cacheProgramAndPath(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype *out_outPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_cacheProgramAndPath,2,0) {(void*) boxptr_InteractiveUtil_cacheProgramAndPath,0}};
#define boxvar_InteractiveUtil_cacheProgramAndPath MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_cacheProgramAndPath)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsModification(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsModification,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsModification,0}};
#define boxvar_InteractiveUtil_getComponentitemsModification MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsModification)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsAnnotation(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsAnnotation,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsAnnotation,0}};
#define boxvar_InteractiveUtil_getComponentitemsAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsAnnotation)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentAnnotation(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentAnnotation,2,0) {(void*) boxptr_InteractiveUtil_getComponentAnnotation,0}};
#define boxvar_InteractiveUtil_getComponentAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentAnnotation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsAnnotationsFromItems(threadData_t *threadData, modelica_metatype _inComponentItems, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsAnnotationsFromItems,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsAnnotationsFromItems,0}};
#define boxvar_InteractiveUtil_getComponentitemsAnnotationsFromItems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsAnnotationsFromItems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsAnnotationsElArgs(threadData_t *threadData, modelica_metatype _inElementArgs, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsAnnotationsElArgs,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsAnnotationsElArgs,0}};
#define boxvar_InteractiveUtil_getComponentitemsAnnotationsElArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsAnnotationsElArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsAnnotations(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsAnnotations,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsAnnotations,0}};
#define boxvar_InteractiveUtil_getComponentitemsAnnotations MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsAnnotations)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentAnnotationsFromElts(threadData_t *threadData, modelica_metatype _comps, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentAnnotationsFromElts,2,0) {(void*) boxptr_InteractiveUtil_getComponentAnnotationsFromElts,0}};
#define boxvar_InteractiveUtil_getComponentAnnotationsFromElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentAnnotationsFromElts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionsInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionsInEquations,2,0) {(void*) boxptr_InteractiveUtil_getConnectionsInEquations,0}};
#define boxvar_InteractiveUtil_getConnectionsInEquations MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionsInEquations)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionsInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionsInClassparts,2,0) {(void*) boxptr_InteractiveUtil_getConnectionsInClassparts,0}};
#define boxvar_InteractiveUtil_getConnectionsInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionsInClassparts)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getConnectionStr(threadData_t *threadData, modelica_metatype _inEquation, modelica_string *out_outToString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionStr,2,0) {(void*) boxptr_InteractiveUtil_getConnectionStr,0}};
#define boxvar_InteractiveUtil_getConnectionStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getConnectionAnnotationStr(threadData_t *threadData, modelica_metatype _inEquationItem, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionAnnotationStr,2,0) {(void*) boxptr_InteractiveUtil_getConnectionAnnotationStr,0}};
#define boxvar_InteractiveUtil_getConnectionAnnotationStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionAnnotationStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionAnnotationStrElArgs(threadData_t *threadData, modelica_metatype _inElArgLst, modelica_metatype _info, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionAnnotationStrElArgs,2,0) {(void*) boxptr_InteractiveUtil_getConnectionAnnotationStrElArgs,0}};
#define boxvar_InteractiveUtil_getConnectionAnnotationStrElArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConnectionAnnotationStrElArgs)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inAbsynElementItemLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countConnectors,2,0) {(void*) boxptr_InteractiveUtil_countConnectors,0}};
#define boxvar_InteractiveUtil_countConnectors MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countConnectors)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countPublicConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countPublicConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countPublicConnectors,2,0) {(void*) boxptr_InteractiveUtil_countPublicConnectors,0}};
#define boxvar_InteractiveUtil_countPublicConnectors MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countPublicConnectors)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthConnectorStr(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_integer _inInteger, modelica_metatype *out_outPath);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnectorStr(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inInteger, modelica_metatype *out_outPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnectorStr,2,0) {(void*) boxptr_InteractiveUtil_getNthConnectorStr,0}};
#define boxvar_InteractiveUtil_getNthConnectorStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthConnectorStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthPublicConnectorStr(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_integer _inInteger, modelica_metatype *out_outPath);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthPublicConnectorStr(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _inInteger, modelica_metatype *out_outPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthPublicConnectorStr,2,0) {(void*) boxptr_InteractiveUtil_getNthPublicConnectorStr,0}};
#define boxvar_InteractiveUtil_getNthPublicConnectorStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthPublicConnectorStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationInfoHeader(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationInfoHeader,2,0) {(void*) boxptr_InteractiveUtil_getDocumentationAnnotationInfoHeader,0}};
#define boxvar_InteractiveUtil_getDocumentationAnnotationInfoHeader MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationInfoHeader)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationRevision(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationRevision,2,0) {(void*) boxptr_InteractiveUtil_getDocumentationAnnotationRevision,0}};
#define boxvar_InteractiveUtil_getDocumentationAnnotationRevision MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationRevision)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationInfo(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationInfo,2,0) {(void*) boxptr_InteractiveUtil_getDocumentationAnnotationInfo,0}};
#define boxvar_InteractiveUtil_getDocumentationAnnotationInfo MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationAnnotationInfo)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExperimentAnnotationString2(threadData_t *threadData, modelica_metatype _eltArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExperimentAnnotationString2,2,0) {(void*) boxptr_InteractiveUtil_getExperimentAnnotationString2,0}};
#define boxvar_InteractiveUtil_getExperimentAnnotationString2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExperimentAnnotationString2)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentNameModStr(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentNameModStr,2,0) {(void*) boxptr_InteractiveUtil_getDefaultComponentNameModStr,0}};
#define boxvar_InteractiveUtil_getDefaultComponentNameModStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentNameModStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationClassAnnotationModStr(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationClassAnnotationModStr,2,0) {(void*) boxptr_InteractiveUtil_getDocumentationClassAnnotationModStr,0}};
#define boxvar_InteractiveUtil_getDocumentationClassAnnotationModStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDocumentationClassAnnotationModStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAnnotationStr(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _annotationType, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationStr,2,0) {(void*) boxptr_InteractiveUtil_getAnnotationStr,0}};
#define boxvar_InteractiveUtil_getAnnotationStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getAnnotationStr)
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_containAnnotation(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _annotationType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_containAnnotation,2,0) {(void*) boxptr_InteractiveUtil_containAnnotation,0}};
#define boxvar_InteractiveUtil_containAnnotation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_containAnnotation)
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_isAnnotationType(threadData_t *threadData, modelica_string _annotationStr, modelica_metatype _annotationType);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isAnnotationType,2,0) {(void*) boxptr_InteractiveUtil_isAnnotationType,0}};
#define boxvar_InteractiveUtil_isAnnotationType MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isAnnotationType)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClassesFromElts,2,0) {(void*) boxptr_InteractiveUtil_countBaseClassesFromElts,0}};
#define boxvar_InteractiveUtil_countBaseClassesFromElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClassesFromElts)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClassesFromParts,2,0) {(void*) boxptr_InteractiveUtil_countBaseClassesFromParts,0}};
#define boxvar_InteractiveUtil_countBaseClassesFromParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClassesFromParts)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClasses(threadData_t *threadData, modelica_metatype _inClass);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClasses(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClasses,2,0) {(void*) boxptr_InteractiveUtil_countBaseClasses,0}};
#define boxvar_InteractiveUtil_countBaseClasses MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countBaseClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassesFromElts,2,0) {(void*) boxptr_InteractiveUtil_getBaseClassesFromElts,0}};
#define boxvar_InteractiveUtil_getBaseClassesFromElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassesFromElts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassesFromParts,2,0) {(void*) boxptr_InteractiveUtil_getBaseClassesFromParts,0}};
#define boxvar_InteractiveUtil_getBaseClassesFromParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClassesFromParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClasses(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClasses,2,0) {(void*) boxptr_InteractiveUtil_getBaseClasses,0}};
#define boxvar_InteractiveUtil_getBaseClasses MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getBaseClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClass,2,0) {(void*) boxptr_InteractiveUtil_getClassnamesInClass,0}};
#define boxvar_InteractiveUtil_getClassnamesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassnamesInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getTopQualifiedClassnames(threadData_t *threadData, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getTopQualifiedClassnames,2,0) {(void*) boxptr_InteractiveUtil_getTopQualifiedClassnames,0}};
#define boxvar_InteractiveUtil_getTopQualifiedClassnames MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getTopQualifiedClassnames)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInElts,2,0) {(void*) boxptr_InteractiveUtil_getPackagesInElts,0}};
#define boxvar_InteractiveUtil_getPackagesInElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInElts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInParts,2,0) {(void*) boxptr_InteractiveUtil_getPackagesInParts,0}};
#define boxvar_InteractiveUtil_getPackagesInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInClass,2,0) {(void*) boxptr_InteractiveUtil_getPackagesInClass,0}};
#define boxvar_InteractiveUtil_getPackagesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getPackagesInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getTopPackagesInProgram(threadData_t *threadData, modelica_metatype _inProgram);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getTopPackagesInProgram,2,0) {(void*) boxptr_InteractiveUtil_getTopPackagesInProgram,0}};
#define boxvar_InteractiveUtil_getTopPackagesInProgram MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getTopPackagesInProgram)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_filterIsVersionElement(threadData_t *threadData, modelica_metatype _eltArg);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_filterIsVersionElement(threadData_t *threadData, modelica_metatype _eltArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_filterIsVersionElement,2,0) {(void*) boxptr_InteractiveUtil_filterIsVersionElement,0}};
#define boxvar_InteractiveUtil_filterIsVersionElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_filterIsVersionElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConversionAnnotationString(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConversionAnnotationString,2,0) {(void*) boxptr_InteractiveUtil_getConversionAnnotationString,0}};
#define boxvar_InteractiveUtil_getConversionAnnotationString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getConversionAnnotationString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getUsesAnnotationString2(threadData_t *threadData, modelica_metatype _eltArgs, modelica_string _classOrigin);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getUsesAnnotationString2,2,0) {(void*) boxptr_InteractiveUtil_getUsesAnnotationString2,0}};
#define boxvar_InteractiveUtil_getUsesAnnotationString2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getUsesAnnotationString2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getUsesAnnotationString(threadData_t *threadData, modelica_metatype _mod, modelica_string _classOrigin);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getUsesAnnotationString,2,0) {(void*) boxptr_InteractiveUtil_getUsesAnnotationString,0}};
#define boxvar_InteractiveUtil_getUsesAnnotationString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getUsesAnnotationString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInEquations,2,0) {(void*) boxptr_InteractiveUtil_setConnectionCommentInEquations,0}};
#define boxvar_InteractiveUtil_setConnectionCommentInEquations MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInEquations)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInParts,2,0) {(void*) boxptr_InteractiveUtil_setConnectionCommentInParts,0}};
#define boxvar_InteractiveUtil_setConnectionCommentInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInClass,2,0) {(void*) boxptr_InteractiveUtil_setConnectionCommentInClass,0}};
#define boxvar_InteractiveUtil_setConnectionCommentInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setConnectionCommentInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inComponentRef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInCompitems,2,0) {(void*) boxptr_InteractiveUtil_setComponentCommentInCompitems,0}};
#define boxvar_InteractiveUtil_setComponentCommentInCompitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInCompitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inComponentRef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInElementspec,2,0) {(void*) boxptr_InteractiveUtil_setComponentCommentInElementspec,0}};
#define boxvar_InteractiveUtil_setComponentCommentInElementspec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInElementspec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponentRef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInElementitems,2,0) {(void*) boxptr_InteractiveUtil_setComponentCommentInElementitems,0}};
#define boxvar_InteractiveUtil_setComponentCommentInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponentRef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInParts,2,0) {(void*) boxptr_InteractiveUtil_setComponentCommentInParts,0}};
#define boxvar_InteractiveUtil_setComponentCommentInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentRef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInClass,2,0) {(void*) boxptr_InteractiveUtil_setComponentCommentInClass,0}};
#define boxvar_InteractiveUtil_setComponentCommentInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentCommentInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getClassCommentInCommentOpt(threadData_t *threadData, modelica_metatype _inComment);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassCommentInCommentOpt,2,0) {(void*) boxptr_InteractiveUtil_getClassCommentInCommentOpt,0}};
#define boxvar_InteractiveUtil_getClassCommentInCommentOpt MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassCommentInCommentOpt)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInCompitems,2,0) {(void*) boxptr_InteractiveUtil_getComponentCommentInCompitems,0}};
#define boxvar_InteractiveUtil_getComponentCommentInCompitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInCompitems)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInElementspec,2,0) {(void*) boxptr_InteractiveUtil_getComponentCommentInElementspec,0}};
#define boxvar_InteractiveUtil_getComponentCommentInElementspec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInElementspec)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInElementitems,2,0) {(void*) boxptr_InteractiveUtil_getComponentCommentInElementitems,0}};
#define boxvar_InteractiveUtil_getComponentCommentInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInElementitems)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInParts,2,0) {(void*) boxptr_InteractiveUtil_getComponentCommentInParts,0}};
#define boxvar_InteractiveUtil_getComponentCommentInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInParts)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInClass,2,0) {(void*) boxptr_InteractiveUtil_getComponentCommentInClass,0}};
#define boxvar_InteractiveUtil_getComponentCommentInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCommentInClass)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_compareTransitionFuncArgs(threadData_t *threadData, modelica_metatype _args, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_compareTransitionFuncArgs(threadData_t *threadData, modelica_metatype _args, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_compareTransitionFuncArgs,2,0) {(void*) boxptr_InteractiveUtil_compareTransitionFuncArgs,0}};
#define boxvar_InteractiveUtil_compareTransitionFuncArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_compareTransitionFuncArgs)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_namedArgValueAsString(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_string _inNamedArg, modelica_string _inDefaultValue, modelica_boolean *out_outDefault);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_namedArgValueAsString(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inNamedArg, modelica_metatype _inDefaultValue, modelica_metatype *out_outDefault);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_namedArgValueAsString,2,0) {(void*) boxptr_InteractiveUtil_namedArgValueAsString,0}};
#define boxvar_InteractiveUtil_namedArgValueAsString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_namedArgValueAsString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteTransitionInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteTransitionInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteTransitionInEqlist,2,0) {(void*) boxptr_InteractiveUtil_deleteTransitionInEqlist,0}};
#define boxvar_InteractiveUtil_deleteTransitionInEqlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteTransitionInEqlist)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteTransitionInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteTransitionInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteTransitionInClass,2,0) {(void*) boxptr_InteractiveUtil_deleteTransitionInClass,0}};
#define boxvar_InteractiveUtil_deleteTransitionInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteTransitionInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteEquationInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteEquationInEqlist,2,0) {(void*) boxptr_InteractiveUtil_deleteEquationInEqlist,0}};
#define boxvar_InteractiveUtil_deleteEquationInEqlist MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteEquationInEqlist)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteEquationInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteEquationInClass,2,0) {(void*) boxptr_InteractiveUtil_deleteEquationInClass,0}};
#define boxvar_InteractiveUtil_deleteEquationInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteEquationInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsCondition(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsCondition,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsCondition,0}};
#define boxvar_InteractiveUtil_getComponentitemsCondition MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsCondition)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCondition(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCondition,2,0) {(void*) boxptr_InteractiveUtil_getComponentCondition,0}};
#define boxvar_InteractiveUtil_getComponentCondition MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentCondition)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponents2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_boolean _inBoolean, modelica_integer _inAccess);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponents2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inBoolean, modelica_metatype _inAccess);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponents2,2,0) {(void*) boxptr_InteractiveUtil_getComponents2,0}};
#define boxvar_InteractiveUtil_getComponents2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponents2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertQuotesToList(threadData_t *threadData, modelica_metatype _inStringList);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertQuotesToList,2,0) {(void*) boxptr_InteractiveUtil_insertQuotesToList,0}};
#define boxvar_InteractiveUtil_insertQuotesToList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_insertQuotesToList)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthComponent2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_integer _inInteger3, modelica_metatype _inEnv4);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthComponent2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _inInteger3, modelica_metatype _inEnv4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthComponent2,2,0) {(void*) boxptr_InteractiveUtil_getNthComponent2,0}};
#define boxvar_InteractiveUtil_getNthComponent2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthComponent2)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countComponentsInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_integer _inInteger);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countComponentsInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inInteger);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countComponentsInElts,2,0) {(void*) boxptr_InteractiveUtil_countComponentsInElts,0}};
#define boxvar_InteractiveUtil_countComponentsInElts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countComponentsInElts)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countComponents(threadData_t *threadData, modelica_metatype _inClass);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countComponents(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_countComponents,2,0) {(void*) boxptr_InteractiveUtil_countComponents,0}};
#define boxvar_InteractiveUtil_countComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_countComponents)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClass2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_integer _inInteger3, modelica_metatype _inEnv4);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClass2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _inInteger3, modelica_metatype _inEnv4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClass2,2,0) {(void*) boxptr_InteractiveUtil_getNthInheritedClass2,0}};
#define boxvar_InteractiveUtil_getNthInheritedClass2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClass2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInElementitems,2,0) {(void*) boxptr_InteractiveUtil_getExtendsInElementitems,0}};
#define boxvar_InteractiveUtil_getExtendsInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInParts,2,0) {(void*) boxptr_InteractiveUtil_getExtendsInParts,0}};
#define boxvar_InteractiveUtil_getExtendsInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInClass(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInClass,2,0) {(void*) boxptr_InteractiveUtil_getExtendsInClass,0}};
#define boxvar_InteractiveUtil_getExtendsInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getMapAnnotationStr(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_string _inMapType, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getMapAnnotationStr,2,0) {(void*) boxptr_InteractiveUtil_getMapAnnotationStr,0}};
#define boxvar_InteractiveUtil_getMapAnnotationStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getMapAnnotationStr)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData_t *threadData, modelica_metatype _inModelPath, modelica_integer _inInteger, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype *out_annotationOpt);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inInteger, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype *out_annotationOpt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClassAnnotationOpt,2,0) {(void*) boxptr_InteractiveUtil_getNthInheritedClassAnnotationOpt,0}};
#define boxvar_InteractiveUtil_getNthInheritedClassAnnotationOpt MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNthInheritedClassAnnotationOpt)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInheritedClassesHelper(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _inEnv4);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInheritedClassesHelper,2,0) {(void*) boxptr_InteractiveUtil_getInheritedClassesHelper,0}};
#define boxvar_InteractiveUtil_getInheritedClassesHelper MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getInheritedClassesHelper)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentPrefixesModStr(threadData_t *threadData, modelica_metatype _mod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentPrefixesModStr,2,0) {(void*) boxptr_InteractiveUtil_getDefaultComponentPrefixesModStr,0}};
#define boxvar_InteractiveUtil_getDefaultComponentPrefixesModStr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultComponentPrefixesModStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultAttr(threadData_t *threadData, modelica_string _str);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultAttr,2,0) {(void*) boxptr_InteractiveUtil_getDefaultAttr,0}};
#define boxvar_InteractiveUtil_getDefaultAttr MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultAttr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultReplaceable(threadData_t *threadData, modelica_string _str);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultReplaceable,2,0) {(void*) boxptr_InteractiveUtil_getDefaultReplaceable,0}};
#define boxvar_InteractiveUtil_getDefaultReplaceable MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultReplaceable)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultInnerOuter(threadData_t *threadData, modelica_string _str);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultInnerOuter,2,0) {(void*) boxptr_InteractiveUtil_getDefaultInnerOuter,0}};
#define boxvar_InteractiveUtil_getDefaultInnerOuter MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultInnerOuter)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeReplaceableIfPartial(threadData_t *threadData, modelica_metatype _p, modelica_metatype _className, modelica_metatype _redecl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeReplaceableIfPartial,2,0) {(void*) boxptr_InteractiveUtil_makeReplaceableIfPartial,0}};
#define boxvar_InteractiveUtil_makeReplaceableIfPartial MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeReplaceableIfPartial)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultPrefixes(threadData_t *threadData, modelica_metatype _p, modelica_metatype _className, modelica_metatype *out_redecl, modelica_metatype *out_attr);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultPrefixes,2,0) {(void*) boxptr_InteractiveUtil_getDefaultPrefixes,0}};
#define boxvar_InteractiveUtil_getDefaultPrefixes MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDefaultPrefixes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData_t *threadData, modelica_string _inString, modelica_metatype _inAbsynElementItemLst, modelica_metatype _item, modelica_boolean *out_success);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData_t *threadData, modelica_metatype _inString, modelica_metatype _inAbsynElementItemLst, modelica_metatype _item, modelica_metatype *out_success);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteOrUpdateComponentFromElementitems,2,0) {(void*) boxptr_InteractiveUtil_deleteOrUpdateComponentFromElementitems,0}};
#define boxvar_InteractiveUtil_deleteOrUpdateComponentFromElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteOrUpdateComponentFromElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponentFromClass(threadData_t *threadData, modelica_string _inString, modelica_metatype _inClass, modelica_metatype _item);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteOrUpdateComponentFromClass,2,0) {(void*) boxptr_InteractiveUtil_deleteOrUpdateComponentFromClass,0}};
#define boxvar_InteractiveUtil_deleteOrUpdateComponentFromClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteOrUpdateComponentFromClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_lookupClassdef(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2, modelica_metatype _inProgram3, modelica_metatype *out_outPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_lookupClassdef,2,0) {(void*) boxptr_InteractiveUtil_lookupClassdef,0}};
#define boxvar_InteractiveUtil_lookupClassdef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_lookupClassdef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getVariableValue(threadData_t *threadData, modelica_string _inIdent, modelica_metatype _inVariableLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVariableValue,2,0) {(void*) boxptr_InteractiveUtil_getVariableValue,0}};
#define boxvar_InteractiveUtil_getVariableValue MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVariableValue)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateProgram2(threadData_t *threadData, modelica_metatype _inNewClasses, modelica_metatype _w, modelica_metatype _inOldProgram, modelica_boolean _mergeAST);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_updateProgram2(threadData_t *threadData, modelica_metatype _inNewClasses, modelica_metatype _w, modelica_metatype _inOldProgram, modelica_metatype _mergeAST);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateProgram2,2,0) {(void*) boxptr_InteractiveUtil_updateProgram2,0}};
#define boxvar_InteractiveUtil_updateProgram2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_updateProgram2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getCompitemNamed(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynComponentItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getCompitemNamed,2,0) {(void*) boxptr_InteractiveUtil_getCompitemNamed,0}};
#define boxvar_InteractiveUtil_getCompitemNamed MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getCompitemNamed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementContainsName,2,0) {(void*) boxptr_InteractiveUtil_getElementContainsName,0}};
#define boxvar_InteractiveUtil_getElementContainsName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementContainsName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsContainsName,2,0) {(void*) boxptr_InteractiveUtil_getComponentsContainsName,0}};
#define boxvar_InteractiveUtil_getComponentsContainsName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsContainsName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemContainsName,2,0) {(void*) boxptr_InteractiveUtil_getElementitemContainsName,0}};
#define boxvar_InteractiveUtil_getElementitemContainsName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementitemContainsName)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isProtectedClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inString);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isProtectedClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isProtectedClassInElements,2,0) {(void*) boxptr_InteractiveUtil_isProtectedClassInElements,0}};
#define boxvar_InteractiveUtil_isProtectedClassInElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isProtectedClassInElements)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isReplaceableInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inString);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isReplaceableInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isReplaceableInElements,2,0) {(void*) boxptr_InteractiveUtil_isReplaceableInElements,0}};
#define boxvar_InteractiveUtil_isReplaceableInElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isReplaceableInElements)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getClassDimensions(threadData_t *threadData, modelica_metatype _cdef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassDimensions,2,0) {(void*) boxptr_InteractiveUtil_getClassDimensions,0}};
#define boxvar_InteractiveUtil_getClassDimensions MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getClassDimensions)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInCommentOpt(threadData_t *threadData, modelica_metatype _inAbsynCommentOption, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInCommentOpt,2,0) {(void*) boxptr_InteractiveUtil_setClassCommentInCommentOpt,0}};
#define boxvar_InteractiveUtil_setClassCommentInCommentOpt MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInCommentOpt)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInClassdef(threadData_t *threadData, modelica_metatype _inClassDef, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInClassdef,2,0) {(void*) boxptr_InteractiveUtil_setClassCommentInClassdef,0}};
#define boxvar_InteractiveUtil_setClassCommentInClassdef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInClassdef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInClass,2,0) {(void*) boxptr_InteractiveUtil_setClassCommentInClass,0}};
#define boxvar_InteractiveUtil_setClassCommentInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setClassCommentInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteClassFromList(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inAbsynClassLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteClassFromList,2,0) {(void*) boxptr_InteractiveUtil_deleteClassFromList,0}};
#define boxvar_InteractiveUtil_deleteClassFromList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_deleteClassFromList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_changeLastIdent(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_changeLastIdent,2,0) {(void*) boxptr_InteractiveUtil_changeLastIdent,0}};
#define boxvar_InteractiveUtil_changeLastIdent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_changeLastIdent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInImport(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInImport(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInImport,2,0) {(void*) boxptr_InteractiveUtil_renameClassInImport,0}};
#define boxvar_InteractiveUtil_renameClassInImport MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInImport)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInElementSpec,2,0) {(void*) boxptr_InteractiveUtil_renameClassInElementSpec,0}};
#define boxvar_InteractiveUtil_renameClassInElementSpec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInElementSpec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInElements,2,0) {(void*) boxptr_InteractiveUtil_renameClassInElements,0}};
#define boxvar_InteractiveUtil_renameClassInElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInParts,2,0) {(void*) boxptr_InteractiveUtil_renameClassInParts,0}};
#define boxvar_InteractiveUtil_renameClassInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInClass,2,0) {(void*) boxptr_InteractiveUtil_renameClassInClass,0}};
#define boxvar_InteractiveUtil_renameClassInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassVisitor,2,0) {(void*) boxptr_InteractiveUtil_renameClassVisitor,0}};
#define boxvar_InteractiveUtil_renameClassVisitor MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameClassVisitor)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsInElement(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsInElement,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemsInElement,0}};
#define boxvar_InteractiveUtil_getComponentitemsInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemsInElement)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemName(threadData_t *threadData, modelica_metatype _inComponentItem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemName,2,0) {(void*) boxptr_InteractiveUtil_getComponentitemName,0}};
#define boxvar_InteractiveUtil_getComponentitemName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentitemName)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_componentitemNamed(threadData_t *threadData, modelica_metatype _inComponentItem, modelica_string _inIdent);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_componentitemNamed(threadData_t *threadData, modelica_metatype _inComponentItem, modelica_metatype _inIdent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_componentitemNamed,2,0) {(void*) boxptr_InteractiveUtil_componentitemNamed,0}};
#define boxvar_InteractiveUtil_componentitemNamed MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_componentitemNamed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInCompitems,2,0) {(void*) boxptr_InteractiveUtil_setVariableBindingInCompitems,0}};
#define boxvar_InteractiveUtil_setVariableBindingInCompitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInCompitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInElement,2,0) {(void*) boxptr_InteractiveUtil_setVariableBindingInElement,0}};
#define boxvar_InteractiveUtil_setVariableBindingInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInElementitems,2,0) {(void*) boxptr_InteractiveUtil_setVariableBindingInElementitems,0}};
#define boxvar_InteractiveUtil_setVariableBindingInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInClassparts,2,0) {(void*) boxptr_InteractiveUtil_setVariableBindingInClassparts,0}};
#define boxvar_InteractiveUtil_setVariableBindingInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInClass,2,0) {(void*) boxptr_InteractiveUtil_setVariableBindingInClass,0}};
#define boxvar_InteractiveUtil_setVariableBindingInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setVariableBindingInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getVariableBindingInComponentitem(threadData_t *threadData, modelica_metatype _inComponentItem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVariableBindingInComponentitem,2,0) {(void*) boxptr_InteractiveUtil_getVariableBindingInComponentitem,0}};
#define boxvar_InteractiveUtil_getVariableBindingInComponentitem MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getVariableBindingInComponentitem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getModificationValues(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getModificationValues,2,0) {(void*) boxptr_InteractiveUtil_getModificationValues,0}};
#define boxvar_InteractiveUtil_getModificationValues MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getModificationValues)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_createNestedSubMod(threadData_t *threadData, modelica_metatype _inComponentName, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_createNestedSubMod,2,0) {(void*) boxptr_InteractiveUtil_createNestedSubMod,0}};
#define boxvar_InteractiveUtil_createNestedSubMod MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_createNestedSubMod)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_propagateMod2(threadData_t *threadData, modelica_metatype _inComponentName, modelica_metatype _inSubMods, modelica_metatype _inNewMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_propagateMod2,2,0) {(void*) boxptr_InteractiveUtil_propagateMod2,0}};
#define boxvar_InteractiveUtil_propagateMod2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_propagateMod2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeElementArgs(threadData_t *threadData, modelica_metatype _inOldArgs, modelica_metatype _inNewArgs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeElementArgs,2,0) {(void*) boxptr_InteractiveUtil_mergeElementArgs,0}};
#define boxvar_InteractiveUtil_mergeElementArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_mergeElementArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentSubmodifierInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentSubmodifierInClass,2,0) {(void*) boxptr_InteractiveUtil_setComponentSubmodifierInClass,0}};
#define boxvar_InteractiveUtil_setComponentSubmodifierInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentSubmodifierInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_stripModifiersKeepRedeclares(threadData_t *threadData, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_stripModifiersKeepRedeclares,2,0) {(void*) boxptr_InteractiveUtil_stripModifiersKeepRedeclares,0}};
#define boxvar_InteractiveUtil_stripModifiersKeepRedeclares MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_stripModifiersKeepRedeclares)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_clearComponentModifiersInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inFound, modelica_string _inComponentName, modelica_boolean _keepRedeclares, modelica_boolean *out_outFound, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_clearComponentModifiersInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inFound, modelica_metatype _inComponentName, modelica_metatype _keepRedeclares, modelica_metatype *out_outFound, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_clearComponentModifiersInCompitems,2,0) {(void*) boxptr_InteractiveUtil_clearComponentModifiersInCompitems,0}};
#define boxvar_InteractiveUtil_clearComponentModifiersInCompitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_clearComponentModifiersInCompitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_clearComponentModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inComponentName, modelica_boolean _keepRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_clearComponentModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _keepRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_clearComponentModifiersInClass,2,0) {(void*) boxptr_InteractiveUtil_clearComponentModifiersInClass,0}};
#define boxvar_InteractiveUtil_clearComponentModifiersInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_clearComponentModifiersInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInElement(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInElement,2,0) {(void*) boxptr_InteractiveUtil_getExtendsElementspecInElement,0}};
#define boxvar_InteractiveUtil_getExtendsElementspecInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInElementitems,2,0) {(void*) boxptr_InteractiveUtil_getExtendsElementspecInElementitems,0}};
#define boxvar_InteractiveUtil_getExtendsElementspecInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInClassparts,2,0) {(void*) boxptr_InteractiveUtil_getExtendsElementspecInClassparts,0}};
#define boxvar_InteractiveUtil_getExtendsElementspecInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInClass(threadData_t *threadData, modelica_metatype _inClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInClass,2,0) {(void*) boxptr_InteractiveUtil_getExtendsElementspecInClass,0}};
#define boxvar_InteractiveUtil_getExtendsElementspecInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getExtendsElementspecInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extendsName(threadData_t *threadData, modelica_metatype _inElementSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extendsName,2,0) {(void*) boxptr_InteractiveUtil_extendsName,0}};
#define boxvar_InteractiveUtil_extendsName MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extendsName)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_extendsElementspecNamed(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_extendsElementspecNamed(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extendsElementspecNamed,2,0) {(void*) boxptr_InteractiveUtil_extendsElementspecNamed,0}};
#define boxvar_InteractiveUtil_extendsElementspecNamed MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extendsElementspecNamed)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeExtendsFullyQualified(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeExtendsFullyQualified,2,0) {(void*) boxptr_InteractiveUtil_makeExtendsFullyQualified,0}};
#define boxvar_InteractiveUtil_makeExtendsFullyQualified MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeExtendsFullyQualified)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInElement,2,0) {(void*) boxptr_InteractiveUtil_setExtendsSubmodifierInElement,0}};
#define boxvar_InteractiveUtil_setExtendsSubmodifierInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInElementitems,2,0) {(void*) boxptr_InteractiveUtil_setExtendsSubmodifierInElementitems,0}};
#define boxvar_InteractiveUtil_setExtendsSubmodifierInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInClassparts,2,0) {(void*) boxptr_InteractiveUtil_setExtendsSubmodifierInClassparts,0}};
#define boxvar_InteractiveUtil_setExtendsSubmodifierInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInClass,2,0) {(void*) boxptr_InteractiveUtil_setExtendsSubmodifierInClass,0}};
#define boxvar_InteractiveUtil_setExtendsSubmodifierInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setExtendsSubmodifierInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInElement,2,0) {(void*) boxptr_InteractiveUtil_removeExtendsModifiersInElement,0}};
#define boxvar_InteractiveUtil_removeExtendsModifiersInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInElementitems,2,0) {(void*) boxptr_InteractiveUtil_removeExtendsModifiersInElementitems,0}};
#define boxvar_InteractiveUtil_removeExtendsModifiersInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInClassparts,2,0) {(void*) boxptr_InteractiveUtil_removeExtendsModifiersInClassparts,0}};
#define boxvar_InteractiveUtil_removeExtendsModifiersInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInClass,2,0) {(void*) boxptr_InteractiveUtil_removeExtendsModifiersInClass,0}};
#define boxvar_InteractiveUtil_removeExtendsModifiersInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_removeExtendsModifiersInClass)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_appendNonEmptyStrings(threadData_t *threadData, modelica_string _inString1, modelica_string _inString2, modelica_string _inString3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_appendNonEmptyStrings,2,0) {(void*) boxptr_InteractiveUtil_appendNonEmptyStrings,0}};
#define boxvar_InteractiveUtil_appendNonEmptyStrings MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_appendNonEmptyStrings)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_constructElementsInfo(threadData_t *threadData, modelica_string _inString, modelica_metatype _inAbsynElementItemLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_constructElementsInfo,2,0) {(void*) boxptr_InteractiveUtil_constructElementsInfo,0}};
#define boxvar_InteractiveUtil_constructElementsInfo MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_constructElementsInfo)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementItemInfo(threadData_t *threadData, modelica_metatype _inElementItem);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementItemInfo,2,0) {(void*) boxptr_InteractiveUtil_getElementItemInfo,0}};
#define boxvar_InteractiveUtil_getElementItemInfo MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementItemInfo)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementType(threadData_t *threadData, modelica_metatype _inElementSpec);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementType,2,0) {(void*) boxptr_InteractiveUtil_getElementType,0}};
#define boxvar_InteractiveUtil_getElementType MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getElementType)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getImportString(threadData_t *threadData, modelica_metatype _inImport);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getImportString,2,0) {(void*) boxptr_InteractiveUtil_getImportString,0}};
#define boxvar_InteractiveUtil_getImportString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getImportString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementIsField(threadData_t *threadData, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementIsField,2,0) {(void*) boxptr_InteractiveUtil_setElementIsField,0}};
#define boxvar_InteractiveUtil_setElementIsField MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementIsField)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementCausality(threadData_t *threadData, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementCausality,2,0) {(void*) boxptr_InteractiveUtil_setElementCausality,0}};
#define boxvar_InteractiveUtil_setElementCausality MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementCausality)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementVariability(threadData_t *threadData, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementVariability,2,0) {(void*) boxptr_InteractiveUtil_setElementVariability,0}};
#define boxvar_InteractiveUtil_setElementVariability MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementVariability)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementParallelism(threadData_t *threadData, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementParallelism,2,0) {(void*) boxptr_InteractiveUtil_setElementParallelism,0}};
#define boxvar_InteractiveUtil_setElementParallelism MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementParallelism)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementAttributes(threadData_t *threadData, modelica_metatype _inElementAttributes1, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_string _inString2, modelica_string _inString3, modelica_string _inString4, modelica_string _inString5);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setElementAttributes(threadData_t *threadData, modelica_metatype _inElementAttributes1, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inString2, modelica_metatype _inString3, modelica_metatype _inString4, modelica_metatype _inString5);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementAttributes,2,0) {(void*) boxptr_InteractiveUtil_setElementAttributes,0}};
#define boxvar_InteractiveUtil_setElementAttributes MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setElementAttributes)
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_itemsContainCompname(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_string _inIdent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_itemsContainCompname,2,0) {(void*) boxptr_InteractiveUtil_itemsContainCompname,0}};
#define boxvar_InteractiveUtil_itemsContainCompname MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_itemsContainCompname)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_string _inIdent2, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_string _inString3, modelica_string _inString4, modelica_string _inString5, modelica_string _inString6);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inIdent2, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inString3, modelica_metatype _inString4, modelica_metatype _inString5, modelica_metatype _inString6);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElementspec,2,0) {(void*) boxptr_InteractiveUtil_setComponentPropertiesInElementspec,0}};
#define boxvar_InteractiveUtil_setComponentPropertiesInElementspec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElementspec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setInnerOuterAttributes(threadData_t *threadData, modelica_metatype _inBooleanLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setInnerOuterAttributes,2,0) {(void*) boxptr_InteractiveUtil_setInnerOuterAttributes,0}};
#define boxvar_InteractiveUtil_setInnerOuterAttributes MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setInnerOuterAttributes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setReplaceableKeywordAttributes(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption, modelica_boolean _inBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setReplaceableKeywordAttributes(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption, modelica_metatype _inBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setReplaceableKeywordAttributes,2,0) {(void*) boxptr_InteractiveUtil_setReplaceableKeywordAttributes,0}};
#define boxvar_InteractiveUtil_setReplaceableKeywordAttributes MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setReplaceableKeywordAttributes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElement(threadData_t *threadData, modelica_metatype _inElement1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inReplaceable, modelica_string _inString5, modelica_string _inString6, modelica_metatype _inBooleanLst7, modelica_string _inString8, modelica_string _inString9);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElement(threadData_t *threadData, modelica_metatype _inElement1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inReplaceable, modelica_metatype _inString5, modelica_metatype _inString6, modelica_metatype _inBooleanLst7, modelica_metatype _inString8, modelica_metatype _inString9);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElement,2,0) {(void*) boxptr_InteractiveUtil_setComponentPropertiesInElement,0}};
#define boxvar_InteractiveUtil_setComponentPropertiesInElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inReplaceable, modelica_string _inString5, modelica_string _inString6, modelica_metatype _inBooleanLst7, modelica_string _inString8, modelica_string _inString9);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inReplaceable, modelica_metatype _inString5, modelica_metatype _inString6, modelica_metatype _inBooleanLst7, modelica_metatype _inString8, modelica_metatype _inString9);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElementitems,2,0) {(void*) boxptr_InteractiveUtil_setComponentPropertiesInElementitems,0}};
#define boxvar_InteractiveUtil_setComponentPropertiesInElementitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInElementitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString6, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_string _inString10);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString6, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inString10);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInClassparts,2,0) {(void*) boxptr_InteractiveUtil_setComponentPropertiesInClassparts,0}};
#define boxvar_InteractiveUtil_setComponentPropertiesInClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_string _inString2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString6, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_string _inString10);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inString2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString6, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inString10);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInClass,2,0) {(void*) boxptr_InteractiveUtil_setComponentPropertiesInClass,0}};
#define boxvar_InteractiveUtil_setComponentPropertiesInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_setComponentPropertiesInClass)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isParameterElement(threadData_t *threadData, modelica_metatype _inElement);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isParameterElement(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isParameterElement,2,0) {(void*) boxptr_InteractiveUtil_isParameterElement,0}};
#define boxvar_InteractiveUtil_isParameterElement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isParameterElement)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_dumpComponentsToString(threadData_t *threadData, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_dumpComponentsToString,2,0) {(void*) boxptr_InteractiveUtil_dumpComponentsToString,0}};
#define boxvar_InteractiveUtil_dumpComponentsToString MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_dumpComponentsToString)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_lengthComponents(threadData_t *threadData, modelica_metatype _inComponents);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_lengthComponents(threadData_t *threadData, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_lengthComponents,2,0) {(void*) boxptr_InteractiveUtil_lengthComponents,0}};
#define boxvar_InteractiveUtil_lengthComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_lengthComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_restComponents(threadData_t *threadData, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_restComponents,2,0) {(void*) boxptr_InteractiveUtil_restComponents,0}};
#define boxvar_InteractiveUtil_restComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_restComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_firstComponent(threadData_t *threadData, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_firstComponent,2,0) {(void*) boxptr_InteractiveUtil_firstComponent,0}};
#define boxvar_InteractiveUtil_firstComponent MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_firstComponent)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_emptyComponents(threadData_t *threadData, modelica_metatype _inComponents);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_emptyComponents(threadData_t *threadData, modelica_metatype _inComponents);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_emptyComponents,2,0) {(void*) boxptr_InteractiveUtil_emptyComponents,0}};
#define boxvar_InteractiveUtil_emptyComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_emptyComponents)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_existsComponentInComponents(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponent);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_existsComponentInComponents(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_existsComponentInComponents,2,0) {(void*) boxptr_InteractiveUtil_existsComponentInComponents,0}};
#define boxvar_InteractiveUtil_existsComponentInComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_existsComponentInComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinComponents(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinComponents,2,0) {(void*) boxptr_InteractiveUtil_joinComponents,0}};
#define boxvar_InteractiveUtil_joinComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromModificationOption(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynModificationOption, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromModificationOption,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromModificationOption,0}};
#define boxvar_InteractiveUtil_extractComponentsFromModificationOption MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromModificationOption)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElementargs(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElementargs,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromElementargs,0}};
#define boxvar_InteractiveUtil_extractComponentsFromElementargs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElementargs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromComponentitems(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2, modelica_metatype _inAbsynComponentItemLst3, modelica_metatype _inComponents4, modelica_metatype _inEnv5);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromComponentitems,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromComponentitems,0}};
#define boxvar_InteractiveUtil_extractComponentsFromComponentitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromComponentitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElementspec(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inElementSpec, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElementspec,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromElementspec,0}};
#define boxvar_InteractiveUtil_extractComponentsFromElementspec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElementspec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElements(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElements,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromElements,0}};
#define boxvar_InteractiveUtil_extractComponentsFromElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClassparts(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClassparts,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromClassparts,0}};
#define boxvar_InteractiveUtil_extractComponentsFromClassparts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClassparts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClassdef(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClassDef, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClassdef,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromClassdef,0}};
#define boxvar_InteractiveUtil_extractComponentsFromClassdef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClassdef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inComponents, modelica_metatype _inEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClass,2,0) {(void*) boxptr_InteractiveUtil_extractComponentsFromClass,0}};
#define boxvar_InteractiveUtil_extractComponentsFromClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractComponentsFromClass)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isReadOnly(threadData_t *threadData, modelica_metatype _file_info);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isReadOnly(threadData_t *threadData, modelica_metatype _file_info);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isReadOnly,2,0) {(void*) boxptr_InteractiveUtil_isReadOnly,0}};
#define boxvar_InteractiveUtil_isReadOnly MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isReadOnly)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponentsVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponentsVisitor,2,0) {(void*) boxptr_InteractiveUtil_extractAllComponentsVisitor,0}};
#define boxvar_InteractiveUtil_extractAllComponentsVisitor MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponentsVisitor)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponents(threadData_t *threadData, modelica_metatype _p, modelica_metatype _path);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponents,2,0) {(void*) boxptr_InteractiveUtil_extractAllComponents,0}};
#define boxvar_InteractiveUtil_extractAllComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithType(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithType,2,0) {(void*) boxptr_InteractiveUtil_getComponentsWithType,0}};
#define boxvar_InteractiveUtil_getComponentsWithType MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsFromClass(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsFromClass,2,0) {(void*) boxptr_InteractiveUtil_getComponentsFromClass,0}};
#define boxvar_InteractiveUtil_getComponentsFromClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsFromClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithComponentsType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithComponentsType,2,0) {(void*) boxptr_InteractiveUtil_getComponentsWithComponentsType,0}};
#define boxvar_InteractiveUtil_getComponentsWithComponentsType MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithComponentsType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithComponentsClass(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithComponentsClass,2,0) {(void*) boxptr_InteractiveUtil_getComponentsWithComponentsClass,0}};
#define boxvar_InteractiveUtil_getComponentsWithComponentsClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentsWithComponentsClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDependencyWithType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2, modelica_integer _inInteger3);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDependencyWithType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2, modelica_metatype _inInteger3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDependencyWithType,2,0) {(void*) boxptr_InteractiveUtil_getDependencyWithType,0}};
#define boxvar_InteractiveUtil_getDependencyWithType MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDependencyWithType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDependencyOnClass(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDependencyOnClass,2,0) {(void*) boxptr_InteractiveUtil_getDependencyOnClass,0}};
#define boxvar_InteractiveUtil_getDependencyOnClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getDependencyOnClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_restComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_restComponentReplacementRules,2,0) {(void*) boxptr_InteractiveUtil_restComponentReplacementRules,0}};
#define boxvar_InteractiveUtil_restComponentReplacementRules MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_restComponentReplacementRules)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_firstComponentReplacement(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_firstComponentReplacement,2,0) {(void*) boxptr_InteractiveUtil_firstComponentReplacement,0}};
#define boxvar_InteractiveUtil_firstComponentReplacement MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_firstComponentReplacement)
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_lengthComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_lengthComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_lengthComponentReplacementRules,2,0) {(void*) boxptr_InteractiveUtil_lengthComponentReplacementRules,0}};
#define boxvar_InteractiveUtil_lengthComponentReplacementRules MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_lengthComponentReplacementRules)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules1, modelica_metatype _inComponentReplacementRules2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinComponentReplacementRules,2,0) {(void*) boxptr_InteractiveUtil_joinComponentReplacementRules,0}};
#define boxvar_InteractiveUtil_joinComponentReplacementRules MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_joinComponentReplacementRules)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_emptyComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_emptyComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_emptyComponentReplacementRules,2,0) {(void*) boxptr_InteractiveUtil_emptyComponentReplacementRules,0}};
#define boxvar_InteractiveUtil_emptyComponentReplacementRules MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_emptyComponentReplacementRules)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeComponentsReplacementRulesFromComponents(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeComponentsReplacementRulesFromComponents,2,0) {(void*) boxptr_InteractiveUtil_makeComponentsReplacementRulesFromComponents,0}};
#define boxvar_InteractiveUtil_makeComponentsReplacementRulesFromComponents MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_makeComponentsReplacementRulesFromComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNewComponentreplacementsrulesForEachRule(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNewComponentreplacementsrulesForEachRule,2,0) {(void*) boxptr_InteractiveUtil_getNewComponentreplacementsrulesForEachRule,0}};
#define boxvar_InteractiveUtil_getNewComponentreplacementsrulesForEachRule MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getNewComponentreplacementsrulesForEachRule)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentreplacementsrules(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules, modelica_integer _inInteger);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentreplacementsrules(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules, modelica_metatype _inInteger);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentreplacementsrules,2,0) {(void*) boxptr_InteractiveUtil_getComponentreplacementsrules,0}};
#define boxvar_InteractiveUtil_getComponentreplacementsrules MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_getComponentreplacementsrules)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceStartInComponentRef2(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceStartInComponentRef2,2,0) {(void*) boxptr_InteractiveUtil_replaceStartInComponentRef2,0}};
#define boxvar_InteractiveUtil_replaceStartInComponentRef2 MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceStartInComponentRef2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceStartInComponentRef(threadData_t *threadData, modelica_metatype _cr1, modelica_metatype _cr2, modelica_metatype _cr3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceStartInComponentRef,2,0) {(void*) boxptr_InteractiveUtil_replaceStartInComponentRef,0}};
#define boxvar_InteractiveUtil_replaceStartInComponentRef MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_replaceStartInComponentRef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExternalDecl(threadData_t *threadData, modelica_metatype _external_, modelica_metatype _old_comp, modelica_metatype _new_comp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExternalDecl,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExternalDecl,0}};
#define boxvar_InteractiveUtil_renameComponentInExternalDecl MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExternalDecl)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInNamedArgs(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInNamedArgs,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInNamedArgs,0}};
#define boxvar_InteractiveUtil_renameComponentInNamedArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInNamedArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInIterators(threadData_t *threadData, modelica_metatype _iterators, modelica_metatype _oldComp, modelica_metatype _newComp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInIterators,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInIterators,0}};
#define boxvar_InteractiveUtil_renameComponentInIterators MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInIterators)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInFunctionArgs(threadData_t *threadData, modelica_metatype _inFunctionArgs1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInFunctionArgs,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInFunctionArgs,0}};
#define boxvar_InteractiveUtil_renameComponentInFunctionArgs MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInFunctionArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpAlgoritmsList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynAlgorithmItemLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpAlgoritmsList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExpAlgoritmsList,0}};
#define boxvar_InteractiveUtil_renameComponentInExpAlgoritmsList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpAlgoritmsList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInAlgorithm(threadData_t *threadData, modelica_metatype _inAlgorithm1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInAlgorithm,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInAlgorithm,0}};
#define boxvar_InteractiveUtil_renameComponentInAlgorithm MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInAlgorithm)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInAlgorithms(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInAlgorithms,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInAlgorithms,0}};
#define boxvar_InteractiveUtil_renameComponentInAlgorithms MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInAlgorithms)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExp(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _oldPrefix, modelica_metatype _newPrefix);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExp,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExp,0}};
#define boxvar_InteractiveUtil_renameComponentInExp MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInCode(threadData_t *threadData, modelica_metatype _inCode1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInCode,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInCode,0}};
#define boxvar_InteractiveUtil_renameComponentInCode MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInCode)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementArg(threadData_t *threadData, modelica_metatype _inElementArg1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementArg,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInElementArg,0}};
#define boxvar_InteractiveUtil_renameComponentInElementArg MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementArg)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementArgList(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementArgList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInElementArgList,0}};
#define boxvar_InteractiveUtil_renameComponentInElementArgList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementArgList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpTupleList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynExpLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpTupleList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExpTupleList,0}};
#define boxvar_InteractiveUtil_renameComponentInExpTupleList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpTupleList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpListList(threadData_t *threadData, modelica_metatype _inAbsynExpLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpListList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExpListList,0}};
#define boxvar_InteractiveUtil_renameComponentInExpListList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpListList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpList(threadData_t *threadData, modelica_metatype _inAbsynExpLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExpList,0}};
#define boxvar_InteractiveUtil_renameComponentInExpList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInEquation(threadData_t *threadData, modelica_metatype _inEquation1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInEquation,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInEquation,0}};
#define boxvar_InteractiveUtil_renameComponentInEquation MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpEquationitemList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynEquationItemLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpEquationitemList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInExpEquationitemList,0}};
#define boxvar_InteractiveUtil_renameComponentInExpEquationitemList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInExpEquationitemList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInEquationList(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInEquationList,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInEquationList,0}};
#define boxvar_InteractiveUtil_renameComponentInEquationList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInEquationList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInComponentitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInComponentitems,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInComponentitems,0}};
#define boxvar_InteractiveUtil_renameComponentInComponentitems MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInComponentitems)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementSpec,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInElementSpec,0}};
#define boxvar_InteractiveUtil_renameComponentInElementSpec MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElementSpec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElements,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInElements,0}};
#define boxvar_InteractiveUtil_renameComponentInElements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInParts,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInParts,0}};
#define boxvar_InteractiveUtil_renameComponentInParts MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInClass,2,0) {(void*) boxptr_InteractiveUtil_renameComponentInClass,0}};
#define boxvar_InteractiveUtil_renameComponentInClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentInClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionComponentReplacement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentVisitor,2,0) {(void*) boxptr_InteractiveUtil_renameComponentVisitor,0}};
#define boxvar_InteractiveUtil_renameComponentVisitor MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentVisitor)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentFromComponentreplacements(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentFromComponentreplacements,2,0) {(void*) boxptr_InteractiveUtil_renameComponentFromComponentreplacements,0}};
#define boxvar_InteractiveUtil_renameComponentFromComponentreplacements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_renameComponentFromComponentreplacements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractRenamedClassesAsStringList(threadData_t *threadData, modelica_metatype _inComponentReplacementRules);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractRenamedClassesAsStringList,2,0) {(void*) boxptr_InteractiveUtil_extractRenamedClassesAsStringList,0}};
#define boxvar_InteractiveUtil_extractRenamedClassesAsStringList MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractRenamedClassesAsStringList)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isClassReadOnly(threadData_t *threadData, modelica_metatype _cl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isClassReadOnly(threadData_t *threadData, modelica_metatype _cl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_isClassReadOnly,2,0) {(void*) boxptr_InteractiveUtil_isClassReadOnly,0}};
#define boxvar_InteractiveUtil_isClassReadOnly MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_isClassReadOnly)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponentreplacements(threadData_t *threadData, modelica_metatype _p, modelica_metatype _class_, modelica_metatype _cref1, modelica_metatype _cref2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponentreplacements,2,0) {(void*) boxptr_InteractiveUtil_extractAllComponentreplacements,0}};
#define boxvar_InteractiveUtil_extractAllComponentreplacements MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_extractAllComponentreplacements)
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_listClass(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _p);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InteractiveUtil_listClass,2,0) {(void*) boxptr_InteractiveUtil_listClass,0}};
#define boxvar_InteractiveUtil_listClass MMC_REFSTRUCTLIT(boxvar_lit_InteractiveUtil_listClass)
DLLExport
modelica_metatype omc_InteractiveUtil_getClassnamesInEltsNoPartial(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_boolean _includeConstants)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _delst = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_delst = omc_DoubleEnded_fromList(threadData, tmpMeta[0]);
{
modelica_metatype _elt;
for (tmpMeta[0] = _inAbsynElementItemLst; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_elt = MMC_CAR(tmpMeta[0]);
{
modelica_metatype tmp3_1;
tmp3_1 = _elt;
{
modelica_string _id = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmp5 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp5) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,5) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_id = tmpMeta[6];
omc_DoubleEnded_push__back(threadData, _delst, _id);
goto tmp2_done;
}
case 1: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmp6 = mmc_unbox_integer(tmpMeta[5]);
if (0 != tmp6) goto tmp2_end;
_id = tmpMeta[4];
omc_DoubleEnded_push__back(threadData, _delst, _id);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,0) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_lst = tmpMeta[5];
if (!_includeConstants) goto tmp2_end;
omc_DoubleEnded_push__list__back(threadData, _delst, omc_InteractiveUtil_getComponentItemsName(threadData, _lst, 0));
goto tmp2_done;
}
case 3: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
}
}
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = omc_DoubleEnded_toListAndClear(threadData, _delst, tmpMeta[0]);
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
modelica_metatype boxptr_InteractiveUtil_getClassnamesInEltsNoPartial(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_includeConstants);
_outStringLst = omc_InteractiveUtil_getClassnamesInEltsNoPartial(threadData, _inAbsynElementItemLst, tmp1);
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_boolean tmp3_2;volatile modelica_boolean tmp3_3;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inShowProtected;
tmp3_3 = _includeConstants;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_b = tmp3_2;
_c = tmp3_3;
tmp3 += 1;
_l1 = omc_InteractiveUtil_getClassnamesInEltsNoPartial(threadData, _elts, _c);
_l2 = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _rest, _b, _c);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 2: {
if (1 != tmp3_2) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_c = tmp3_3;
_l1 = omc_InteractiveUtil_getClassnamesInEltsNoPartial(threadData, _elts, _c);
_l2 = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _rest, 1, _c);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
_b = tmp3_2;
_c = tmp3_3;
tmpMeta[0] = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _rest, _b, _c);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
modelica_metatype boxptr_InteractiveUtil_getClassnamesInPartsNoPartial(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_outStringLst = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _inAbsynClassPartLst, tmp1, tmp2);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClassListNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(omc_AbsynUtil_isPartial(threadData, _inClass))
{
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outString = tmpMeta[0];
goto _return;
}
{
modelica_metatype tmp3_1;modelica_boolean tmp3_2;modelica_boolean tmp3_3;
tmp3_1 = _inClass;
tmp3_2 = _inShowProtected;
tmp3_3 = _includeConstants;
{
modelica_metatype _parts = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_b = tmp3_2;
_c = tmp3_3;
tmpMeta[0] = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _parts, _b, _c);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_b = tmp3_2;
_c = tmp3_3;
tmpMeta[0] = omc_InteractiveUtil_getClassnamesInPartsNoPartial(threadData, _parts, _b, _c);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outString = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClassListNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outString = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_outString = omc_InteractiveUtil_getClassnamesInClassListNoPartial(threadData, _inPath, _inProgram, _inClass, tmp1, tmp2);
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassNamesRecursiveNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _inShowProtected, modelica_boolean _includeConstants, modelica_metatype _inAcc, modelica_metatype *out_paths)
{
modelica_metatype _opath = NULL;
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
tmp4_3 = _inShowProtected;
tmp4_4 = _includeConstants;
tmp4_5 = _inAcc;
{
modelica_metatype _cdef = NULL;
modelica_string _s1 = NULL;
modelica_metatype _strlst = NULL;
modelica_metatype _pp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _classes = NULL;
modelica_metatype _result_path_lst = NULL;
modelica_metatype _acc = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_pp = tmpMeta[2];
_p = tmp4_2;
_b = tmp4_3;
_c = tmp4_4;
_acc = tmp4_5;
tmp4 += 1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _pp, _p, 0);
if(omc_AbsynUtil_isNotPartial(threadData, _cdef))
{
tmpMeta[2] = mmc_mk_cons(_pp, _acc);
_acc = tmpMeta[2];
_strlst = omc_InteractiveUtil_getClassnamesInClassListNoPartial(threadData, _pp, _p, _cdef, _b, _c);
_result_path_lst = omc_List_map(threadData, omc_List_map1(threadData, _strlst, boxvar_InteractiveUtil_joinPaths, _pp), boxvar_Util_makeOption);
omc_List_map3Fold(threadData, _result_path_lst, boxvar_InteractiveUtil_getClassNamesRecursiveNoPartial, _p, mmc_mk_boolean(_b), mmc_mk_boolean(_c), _acc ,&_acc);
}
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = _acc;
goto tmp3_done;
}
case 1: {
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p = tmp4_2;
_classes = tmpMeta[2];
_b = tmp4_3;
_c = tmp4_4;
_acc = tmp4_5;
tmp4 += 1;
_strlst = omc_List_map(threadData, omc_List_filterOnTrue(threadData, _classes, boxvar_AbsynUtil_isNotPartial), boxvar_AbsynUtil_getClassName);
_result_path_lst = omc_List_mapMap(threadData, _strlst, boxvar_AbsynUtil_makeIdentPathFromString, boxvar_Util_makeOption);
omc_List_map3Fold(threadData, _result_path_lst, boxvar_InteractiveUtil_getClassNamesRecursiveNoPartial, _p, mmc_mk_boolean(_b), mmc_mk_boolean(_c), _acc ,&_acc);
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = _acc;
goto tmp3_done;
}
case 2: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_pp = tmpMeta[2];
_s1 = omc_AbsynUtil_pathString(threadData, _pp, _OMC_LIT0, 1, 0);
tmpMeta[2] = mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT6, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addMessage(threadData, _OMC_LIT5, tmpMeta[2]);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_opath = tmpMeta[0+0];
_paths = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_paths) { *out_paths = _paths; }
return _opath;
}
modelica_metatype boxptr_InteractiveUtil_getClassNamesRecursiveNoPartial(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inShowProtected, modelica_metatype _includeConstants, modelica_metatype _inAcc, modelica_metatype *out_paths)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _opath = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_opath = omc_InteractiveUtil_getClassNamesRecursiveNoPartial(threadData, _inPath, _inProgram, tmp1, tmp2, _inAcc, out_paths);
return _opath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateConnectionNamesInEqList(threadData_t *threadData, modelica_metatype _equations, modelica_string _from, modelica_string _to, modelica_string _fromNew, modelica_string _toNew)
{
modelica_metatype _outEquations = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_string _c1_str = NULL;
modelica_string _c2_str = NULL;
modelica_boolean _found;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outEquations = tmpMeta[0];
_found = 0;
{
modelica_metatype _eq;
for (tmpMeta[1] = _equations; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_eq = MMC_CAR(tmpMeta[1]);
if((!_found))
{
{
modelica_metatype tmp3_1;
tmp3_1 = _eq;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_c1 = tmpMeta[4];
_c2 = tmpMeta[5];
_c1_str = omc_AbsynUtil_crefString(threadData, _c1);
_c2_str = omc_AbsynUtil_crefString(threadData, _c2);
_found = (((stringEqual(_c1_str, _from)) && (stringEqual(_c2_str, _to)))?1:((stringEqual(_c1_str, _to)) && (stringEqual(_c2_str, _from))));
if(_found)
{
tmpMeta[4] = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, omc_Parser_stringCref(threadData, _fromNew), omc_Parser_stringCref(threadData, _toNew));
tmpMeta[3] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[3]), MMC_UNTAGPTR(_eq), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[3]))[2] = tmpMeta[4];
_eq = tmpMeta[3];
}
tmpMeta[2] = _eq;
goto tmp2_done;
}
case 1: {
tmpMeta[2] = _eq;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_eq = tmpMeta[2];
}
tmpMeta[2] = mmc_mk_cons(_eq, _outEquations);
_outEquations = tmpMeta[2];
}
}
_outEquations = listReverseInPlace(_outEquations);
_return: OMC_LABEL_UNUSED
return _outEquations;
}
DLLExport
modelica_metatype omc_InteractiveUtil_updateConnectionNamesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_string _inFrom, modelica_string _inTo, modelica_string _inFromNew, modelica_string _inToNew)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_string tmp3_2;modelica_string tmp3_3;modelica_string tmp3_4;modelica_string tmp3_5;
tmp3_1 = _inClass1;
tmp3_2 = _inFrom;
tmp3_3 = _inTo;
tmp3_4 = _inFromNew;
tmp3_5 = _inToNew;
{
modelica_metatype _eqlst = NULL;
modelica_metatype _eqlst_1 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
modelica_string _from = NULL;
modelica_string _to = NULL;
modelica_string _fromNew = NULL;
modelica_string _toNew = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_from = tmp3_2;
_to = tmp3_3;
_fromNew = tmp3_4;
_toNew = tmp3_5;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_updateConnectionNamesInEqList(threadData, _eqlst, _from, _to, _fromNew, _toNew);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_from = tmp3_2;
_to = tmp3_3;
_fromNew = tmp3_4;
_toNew = tmp3_5;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_updateConnectionNamesInEqList(threadData, _eqlst, _from, _to, _fromNew, _toNew);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_boolean omc_InteractiveUtil_updateConnectionNames(threadData_t *threadData, modelica_metatype _inPath, modelica_string _inFrom, modelica_string _inTo, modelica_string _inFromNew, modelica_string _inToNew, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _outResult;
modelica_metatype _outProgram = NULL;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_string tmp4_3;volatile modelica_string tmp4_4;volatile modelica_string tmp4_5;volatile modelica_metatype tmp4_6;
tmp4_1 = _inPath;
tmp4_2 = _inFrom;
tmp4_3 = _inTo;
tmp4_4 = _inFromNew;
tmp4_5 = _inToNew;
tmp4_6 = _inProgram;
{
modelica_metatype _path = NULL;
modelica_metatype _modelwithin = NULL;
modelica_string _from = NULL;
modelica_string _to = NULL;
modelica_string _fromNew = NULL;
modelica_string _toNew = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_path = tmp4_1;
_from = tmp4_2;
_to = tmp4_3;
_fromNew = tmp4_4;
_toNew = tmp4_5;
_p = tmp4_6;
_modelwithin = omc_AbsynUtil_stripLast(threadData, _path);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_newcdef = omc_InteractiveUtil_updateConnectionNamesInClass(threadData, _cdef, _from, _to, _fromNew, _toNew);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _modelwithin);
tmpMeta[4] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], tmpMeta[3]);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[4], _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
_path = tmp4_1;
_from = tmp4_2;
_to = tmp4_3;
_fromNew = tmp4_4;
_toNew = tmp4_5;
_p = tmp4_6;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_newcdef = omc_InteractiveUtil_updateConnectionNamesInClass(threadData, _cdef, _from, _to, _fromNew, _toNew);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _OMC_LIT7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 2: {
_p = tmp4_6;
tmp1_c0 = 0;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outResult = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outResult;
}
modelica_metatype boxptr_InteractiveUtil_updateConnectionNames(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inFrom, modelica_metatype _inTo, modelica_metatype _inFromNew, modelica_metatype _inToNew, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _outResult;
modelica_metatype out_outResult;
_outResult = omc_InteractiveUtil_updateConnectionNames(threadData, _inPath, _inFrom, _inTo, _inFromNew, _inToNew, _inProgram, out_outProgram);
out_outResult = mmc_mk_icon(_outResult);
return out_outResult;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateConnectionAnnotationInEqList(threadData_t *threadData, modelica_metatype _equations, modelica_string _from, modelica_string _to, modelica_metatype _ann)
{
modelica_metatype _outEquations = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_string _c1_str = NULL;
modelica_string _c2_str = NULL;
modelica_boolean _found;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outEquations = tmpMeta[0];
_found = 0;
{
modelica_metatype _eq;
for (tmpMeta[1] = _equations; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_eq = MMC_CAR(tmpMeta[1]);
if((!_found))
{
{
modelica_metatype tmp3_1;
tmp3_1 = _eq;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_c1 = tmpMeta[4];
_c2 = tmpMeta[5];
_c1_str = omc_AbsynUtil_crefString(threadData, _c1);
_c2_str = omc_AbsynUtil_crefString(threadData, _c2);
if(((stringEqual(_c1_str, _from)) && (stringEqual(_c2_str, _to))))
{
_found = 1;
}
if((!_found))
{
_found = ((stringEqual(_c1_str, _to)) && (stringEqual(_c2_str, _from)));
}
if(_found)
{
tmpMeta[4] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(_ann), mmc_mk_none());
tmpMeta[3] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[3]), MMC_UNTAGPTR(_eq), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[3]))[3] = mmc_mk_some(tmpMeta[4]);
_eq = tmpMeta[3];
}
tmpMeta[2] = _eq;
goto tmp2_done;
}
case 1: {
tmpMeta[2] = _eq;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_eq = tmpMeta[2];
}
tmpMeta[2] = mmc_mk_cons(_eq, _outEquations);
_outEquations = tmpMeta[2];
}
}
_outEquations = listReverseInPlace(_outEquations);
_return: OMC_LABEL_UNUSED
return _outEquations;
}
DLLExport
modelica_metatype omc_InteractiveUtil_updateConnectionAnnotationInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_string _inFrom, modelica_string _inTo, modelica_metatype _inAnnotation)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_string tmp3_2;modelica_string tmp3_3;modelica_metatype tmp3_4;
tmp3_1 = _inClass1;
tmp3_2 = _inFrom;
tmp3_3 = _inTo;
tmp3_4 = _inAnnotation;
{
modelica_metatype _eqlst = NULL;
modelica_metatype _eqlst_1 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
modelica_string _from = NULL;
modelica_string _to = NULL;
modelica_metatype _annotation_ = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_from = tmp3_2;
_to = tmp3_3;
_annotation_ = tmp3_4;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_updateConnectionAnnotationInEqList(threadData, _eqlst, _from, _to, _annotation_);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_from = tmp3_2;
_to = tmp3_3;
_annotation_ = tmp3_4;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_updateConnectionAnnotationInEqList(threadData, _eqlst, _from, _to, _annotation_);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_updateConnectionAnnotation(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inFrom, modelica_string _inTo, modelica_metatype _inAnnotation, modelica_metatype _inProgram)
{
modelica_metatype _outProgram = NULL;
modelica_metatype _class_path = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _class_within = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_class_path = omc_AbsynUtil_crefToPath(threadData, _inClass);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _class_path, _inProgram, 0);
_cls = omc_InteractiveUtil_updateConnectionAnnotationInClass(threadData, _cls, _inFrom, _inTo, omc_InteractiveUtil_annotationListToAbsyn(threadData, _inAnnotation));
tmp1 = (modelica_boolean)omc_AbsynUtil_pathIsIdent(threadData, _class_path);
if(tmp1)
{
tmpMeta[1] = _OMC_LIT7;
}
else
{
tmpMeta[0] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, omc_AbsynUtil_stripLast(threadData, _class_path));
tmpMeta[1] = tmpMeta[0];
}
_class_within = tmpMeta[1];
tmpMeta[0] = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[0], _class_within);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[1], _inProgram, 0);
_return: OMC_LABEL_UNUSED
return _outProgram;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getAllSubtypeOf(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inParentClass, modelica_metatype _inProgram, modelica_boolean _qualified, modelica_boolean _includePartial)
{
modelica_metatype _paths = NULL;
modelica_metatype _cdef = NULL;
modelica_string _s1 = NULL;
modelica_metatype _strlst = NULL;
modelica_metatype _pp = NULL;
modelica_metatype _fqpath = NULL;
modelica_metatype _p = NULL;
modelica_metatype _classes = NULL;
modelica_metatype _result_path_lst = NULL;
modelica_metatype _acc = NULL;
modelica_metatype _extendPaths = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_metatype _genv = NULL;
modelica_boolean tmp5;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inProgram;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_classes = tmpMeta[1];
_strlst = omc_List_map(threadData, omc_List_filterOnTrue(threadData, _classes, boxvar_AbsynUtil_isNotPartial), boxvar_AbsynUtil_getClassName);
_result_path_lst = omc_List_mapMap(threadData, _strlst, boxvar_AbsynUtil_makeIdentPathFromString, boxvar_Util_makeOption);
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
omc_List_map3Fold(threadData, _result_path_lst, boxvar_InteractiveUtil_getClassNamesRecursiveNoPartial, _inProgram, mmc_mk_boolean(1), mmc_mk_boolean(0), tmpMeta[0] ,&_acc);
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_genv = omc_InteractiveUtil_createEnvironment(threadData, _inProgram, mmc_mk_none(), _inParentClass);
_fqpath = omc_InteractiveUtil_qualifyPath(threadData, _genv, _inClass);
goto tmp2_done;
}
case 1: {
_fqpath = _inClass;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_paths = tmpMeta[0];
{
modelica_metatype _pt;
for (tmpMeta[0] = _acc; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_pt = MMC_CAR(tmpMeta[0]);
_extendPaths = omc_InteractiveUtil_getAllInheritedClasses(threadData, _pt, _inProgram);
_b = mmc_unbox_boolean(omc_List_applyAndFold1(threadData, _extendPaths, boxvar_boolOr, boxvar_AbsynUtil_pathSuffixOfr, _fqpath, mmc_mk_boolean(0)));
tmp5 = (modelica_boolean)_b;
if(tmp5)
{
tmpMeta[1] = mmc_mk_cons(_pt, _paths);
tmpMeta[2] = tmpMeta[1];
}
else
{
tmpMeta[2] = _paths;
}
_paths = tmpMeta[2];
}
}
_paths = omc_List_unique(threadData, _paths);
_return: OMC_LABEL_UNUSED
return _paths;
}
modelica_metatype boxptr_InteractiveUtil_getAllSubtypeOf(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inParentClass, modelica_metatype _inProgram, modelica_metatype _qualified, modelica_metatype _includePartial)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _paths = NULL;
tmp1 = mmc_unbox_integer(_qualified);
tmp2 = mmc_unbox_integer(_includePartial);
_paths = omc_InteractiveUtil_getAllSubtypeOf(threadData, _inClass, _inParentClass, _inProgram, tmp1, tmp2);
return _paths;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItem, modelica_boolean _inBoolean, modelica_metatype _inEnv)
{
modelica_string _outList = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inAbsynAlgorithmItem;
tmp4_2 = _inBoolean;
tmp4_3 = _inEnv;
{
modelica_metatype _env = NULL;
modelica_boolean _b;
modelica_metatype _elsItems = NULL;
modelica_metatype _els = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],21,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_elsItems = tmpMeta[1];
_b = tmp4_2;
_env = tmp4_3;
_els = omc_InteractiveUtil_getComponentsInElementitems(threadData, _elsItems);
tmp1 = omc_InteractiveUtil_getComponentsInfo(threadData, _els, _b, _OMC_LIT8, _env);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outList = tmp1;
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItem, modelica_metatype _inBoolean, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outList = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outList = omc_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData, _inAbsynAlgorithmItem, tmp1, _inEnv);
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst, modelica_boolean _inBoolean, modelica_metatype _inEnv)
{
modelica_string _outList = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynAlgorithmItemLst;
tmp4_2 = _inBoolean;
tmp4_3 = _inEnv;
{
modelica_metatype _env = NULL;
modelica_boolean _b;
modelica_metatype _xs = NULL;
modelica_metatype _alg = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_alg = tmpMeta[2];
_b = tmp4_2;
_env = tmp4_3;
tmp1 = omc_InteractiveUtil_getLocalVariablesInAlgorithmItem(threadData, _alg, _b, _env);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
_b = tmp4_2;
_env = tmp4_3;
tmp4 += 1;
tmp1 = omc_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData, _xs, _b, _env);
goto tmp3_done;
}
case 2: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outList = tmp1;
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst, modelica_metatype _inBoolean, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outList = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outList = omc_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData, _inAbsynAlgorithmItemLst, tmp1, _inEnv);
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLocalVariablesInClassParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_boolean _inBoolean, modelica_metatype _inEnv)
{
modelica_string _outList = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inBoolean;
tmp4_3 = _inEnv;
{
modelica_metatype _env = NULL;
modelica_boolean _b;
modelica_metatype _algs = NULL;
modelica_metatype _xs = NULL;
modelica_string _strList = NULL;
modelica_string _strList1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_string tmp7;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],5,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_algs = tmpMeta[2];
_xs = tmpMeta[1];
_b = tmp4_2;
_env = tmp4_3;
_strList1 = omc_InteractiveUtil_getLocalVariablesInAlgorithmsItems(threadData, _algs, _b, _env);
_strList = omc_InteractiveUtil_getLocalVariablesInClassParts(threadData, _xs, _b, _env);
tmp6 = (modelica_boolean)(stringEqual(_strList, _OMC_LIT9));
if(tmp6)
{
tmp7 = _strList1;
}
else
{
tmpMeta[0] = mmc_mk_cons(_strList1, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_strList, MMC_REFSTRUCTLIT(mmc_nil))));
tmp7 = stringAppendList(tmpMeta[0]);
}
tmp1 = tmp7;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
_b = tmp4_2;
_env = tmp4_3;
tmp4 += 1;
tmp1 = omc_InteractiveUtil_getLocalVariablesInClassParts(threadData, _xs, _b, _env);
goto tmp3_done;
}
case 2: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outList = tmp1;
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getLocalVariablesInClassParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inBoolean, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outList = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outList = omc_InteractiveUtil_getLocalVariablesInClassParts(threadData, _inAbsynClassPartLst, tmp1, _inEnv);
return _outList;
}
DLLExport
modelica_string omc_InteractiveUtil_getLocalVariables(threadData_t *threadData, modelica_metatype _inClass, modelica_boolean _inBoolean, modelica_metatype _inEnv)
{
modelica_string _outList = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inClass;
tmp4_2 = _inBoolean;
tmp4_3 = _inEnv;
{
modelica_metatype _env = NULL;
modelica_boolean _b;
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_parts = tmpMeta[1];
_b = tmp4_2;
_env = tmp4_3;
tmp1 = omc_InteractiveUtil_getLocalVariablesInClassParts(threadData, _parts, _b, _env);
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_parts = tmpMeta[1];
_b = tmp4_2;
_env = tmp4_3;
tmp1 = omc_InteractiveUtil_getLocalVariablesInClassParts(threadData, _parts, _b, _env);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outList = tmp1;
_return: OMC_LABEL_UNUSED
return _outList;
}
modelica_metatype boxptr_InteractiveUtil_getLocalVariables(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inBoolean, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outList = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outList = omc_InteractiveUtil_getLocalVariables(threadData, _inClass, tmp1, _inEnv);
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementsString2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv, modelica_metatype _acc)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_boolean tmp3_2;modelica_string tmp3_3;modelica_metatype tmp3_4;
tmp3_1 = _inAbsynElementLst;
tmp3_2 = _inBoolean;
tmp3_3 = _inString;
tmp3_4 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _rest = NULL;
modelica_string _access = NULL;
modelica_metatype _env = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = listReverse(_acc);
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_elt = tmpMeta[1];
_rest = tmpMeta[2];
_b = tmp3_2;
_access = tmp3_3;
_env = tmp3_4;
_res = omc_InteractiveUtil_getElementInfo(threadData, _elt, _b, _access, _env);
_inAbsynElementLst = _rest;
_inBoolean = _b;
_inString = _access;
_inEnv = _env;
_acc = omc_List_append__reverse(threadData, _res, _acc);
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementsString2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv, modelica_metatype _acc)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outStringLst = omc_InteractiveUtil_getElementsString2(threadData, _inAbsynElementLst, tmp1, _inString, _inEnv, _acc);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementsString(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynElementLst;
tmp4_2 = _inString;
tmp4_3 = _inEnv;
{
modelica_metatype _lst = NULL;
modelica_string _lst_1 = NULL;
modelica_string _access = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_elts = tmp4_1;
_access = tmp4_2;
_env = tmp4_3;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = omc_InteractiveUtil_getElementsString2(threadData, _elts, _inBoolean, _access, _env, tmpMeta[0]);
if (listEmpty(tmpMeta[1])) goto goto_2;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_lst = tmpMeta[1];
_lst_1 = stringDelimitList(_lst, _OMC_LIT11);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_lst_1, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementsString(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outString = omc_InteractiveUtil_getElementsString(threadData, _inAbsynElementLst, tmp1, _inString, _inEnv);
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_qualifyType(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _p)
{
jmp_buf *old_mmc_jumper = threadData->mmc_jumper;
modelica_metatype _fqp = NULL;
modelica_metatype _oenv_path = NULL;
modelica_metatype _env_path = NULL;
modelica_metatype _tp_path = NULL;
modelica_metatype _pkg_path = NULL;
modelica_string _tp_name = NULL;
modelica_metatype _env = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_fqp = _p;
if(omc_AbsynUtil_pathIsFullyQualified(threadData, _p))
{
goto _return;
}
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _inEnv, _p, mmc_mk_none() ,NULL ,&_env);
_oenv_path = omc_FGraph_getScopePath(threadData, _env);
if(isSome(_oenv_path))
{
tmpMeta[1] = _oenv_path;
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_env_path = tmpMeta[2];
_tp_name = omc_AbsynUtil_pathLastIdent(threadData, _p);
_tp_path = omc_AbsynUtil_suffixPath(threadData, _env_path, _tp_name);
}
else
{
_tp_path = _p;
}
tmpMeta[0] = _tp_path;
goto tmp2_done;
}
case 1: {
_pkg_path = omc_AbsynUtil_pathFirstPath(threadData, _p);
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _inEnv, _pkg_path, mmc_mk_none() ,NULL ,&_env);
_oenv_path = omc_FGraph_getScopePath(threadData, _env);
if(isSome(_oenv_path))
{
tmpMeta[1] = _oenv_path;
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_env_path = tmpMeta[2];
_tp_path = omc_AbsynUtil_joinPaths(threadData, _env_path, _p);
}
else
{
_tp_path = _p;
}
tmpMeta[0] = _tp_path;
goto tmp2_done;
}
case 2: {
tmpMeta[0] = _p;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_fqp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
threadData->mmc_jumper = old_mmc_jumper;
return _fqp;
}
DLLExport
modelica_string omc_InteractiveUtil_getConstrainClassStr(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _occ)
{
modelica_string _s = NULL;
modelica_metatype _p = NULL;
modelica_metatype _qpath = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _occ;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_p = tmpMeta[2];
tmp1 = omc_AbsynUtil_pathString(threadData, omc_InteractiveUtil_qualifyPath(threadData, _inEnv, _p), _OMC_LIT0, 1, 0);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT14;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_s = tmp1;
_return: OMC_LABEL_UNUSED
return _s;
}
DLLExport
modelica_metatype omc_InteractiveUtil_qualifyPath(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_string _n = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[0] = _inPath;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (4 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT19), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp2_end;
tmpMeta[0] = _inPath;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (7 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp2_end;
tmpMeta[0] = _inPath;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (7 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT21), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp2_end;
tmpMeta[0] = _inPath;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (6 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT22), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp2_end;
tmpMeta[0] = _inPath;
goto tmp2_done;
}
case 5: {
{
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp6_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if(omc_Flags_isSet(threadData, _OMC_LIT18))
{
omc_InteractiveUtil_mkFullyQual(threadData, _inEnv, _inPath ,&_outPath);
}
else
{
_outPath = omc_InteractiveUtil_qualifyType(threadData, omc_InteractiveUtil_envFromGraphicEnvCache(threadData, _inEnv), _inPath);
}
goto tmp6_done;
}
case 1: {
_outPath = _inPath;
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
tmp6_done:
(void)tmp7;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp6_done2;
goto_5:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp7 < 2) {
goto tmp6_top;
}
goto goto_1;
tmp6_done2:;
}
}
;
tmpMeta[0] = _outPath;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_boolean _inQuoteNames, modelica_string _inVisibility, modelica_metatype _inEnv)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inElement;
{
modelica_metatype _attr = NULL;
modelica_metatype _p = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _names = NULL;
modelica_metatype _dims = NULL;
modelica_string _typename = NULL;
modelica_string _final_str = NULL;
modelica_string _repl_str = NULL;
modelica_string _io_str = NULL;
modelica_string _flow_str = NULL;
modelica_string _stream_str = NULL;
modelica_string _var_str = NULL;
modelica_string _dir_str = NULL;
modelica_string _dim_str = NULL;
modelica_string _str = NULL;
modelica_string _cc_str = NULL;
modelica_string _name = NULL;
modelica_string _cmt_str = NULL;
modelica_metatype _ocmt = NULL;
modelica_metatype _oadim = NULL;
modelica_metatype _ad = NULL;
modelica_metatype _occ = NULL;
modelica_metatype _restriction = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_attr = tmpMeta[2];
_p = tmpMeta[4];
_comps = tmpMeta[5];
_occ = tmpMeta[6];
_typename = omc_AbsynUtil_pathString(threadData, omc_InteractiveUtil_qualifyPath(threadData, _inEnv, _p), _OMC_LIT0, 1, 0);
_names = omc_InteractiveUtil_getComponentItemsNameAndComment(threadData, _comps, _inQuoteNames);
_dims = omc_InteractiveUtil_getComponentitemsDimension(threadData, _comps);
_final_str = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 2))))?_OMC_LIT23:_OMC_LIT24);
_repl_str = (omc_InteractiveUtil_keywordReplaceable(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 3))))?_OMC_LIT23:_OMC_LIT24);
_io_str = omc_InteractiveUtil_innerOuterStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 4))));
_flow_str = omc_InteractiveUtil_attrFlowStr(threadData, _attr);
_stream_str = omc_InteractiveUtil_attrStreamStr(threadData, _attr);
_var_str = omc_InteractiveUtil_attrVariabilityStr(threadData, _attr);
_dir_str = omc_InteractiveUtil_attrDirectionStr(threadData, _attr);
_dim_str = omc_InteractiveUtil_attrDimensionStr(threadData, _attr);
_cc_str = omc_InteractiveUtil_getConstrainClassStr(threadData, _inEnv, _occ);
if(_inQuoteNames)
{
_typename = omc_StringUtil_quote(threadData, _typename);
_final_str = omc_StringUtil_quote(threadData, _final_str);
_repl_str = omc_StringUtil_quote(threadData, _repl_str);
_flow_str = omc_StringUtil_quote(threadData, _flow_str);
_stream_str = omc_StringUtil_quote(threadData, _stream_str);
_cc_str = omc_StringUtil_quote(threadData, _cc_str);
}
_names = omc_InteractiveUtil_prefixTypename(threadData, _typename, _names);
_names = omc_InteractiveUtil_prefixTypename(threadData, _OMC_LIT25, _names);
_names = omc_InteractiveUtil_prefixTypename(threadData, _OMC_LIT26, _names);
tmpMeta[1] = mmc_mk_cons(_inVisibility, mmc_mk_cons(_final_str, mmc_mk_cons(_flow_str, mmc_mk_cons(_stream_str, mmc_mk_cons(_repl_str, mmc_mk_cons(_var_str, mmc_mk_cons(_io_str, mmc_mk_cons(_dir_str, mmc_mk_cons(_cc_str, MMC_REFSTRUCTLIT(mmc_nil))))))))));
_str = stringDelimitList(tmpMeta[1], _OMC_LIT27);
tmpMeta[0] = omc_InteractiveUtil_suffixInfos(threadData, _names, _dims, _dim_str, _str, _inQuoteNames);
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
modelica_string tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,4) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,2) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_name = tmpMeta[3];
_restriction = tmpMeta[4];
_p = tmpMeta[7];
_oadim = tmpMeta[8];
_attr = tmpMeta[9];
_ocmt = tmpMeta[10];
_occ = tmpMeta[11];
_typename = omc_AbsynUtil_pathString(threadData, omc_InteractiveUtil_qualifyPath(threadData, _inEnv, _p), _OMC_LIT0, 1, 0);
_cmt_str = omc_InteractiveUtil_getClassCommentInCommentOpt(threadData, _ocmt);
tmp5 = (modelica_boolean)_inQuoteNames;
if(tmp5)
{
tmpMeta[2] = mmc_mk_cons(_OMC_LIT28, mmc_mk_cons(_name, mmc_mk_cons(_OMC_LIT29, mmc_mk_cons(_cmt_str, mmc_mk_cons(_OMC_LIT28, MMC_REFSTRUCTLIT(mmc_nil))))));
tmp6 = stringAppendList(tmpMeta[2]);
}
else
{
tmpMeta[3] = mmc_mk_cons(_name, mmc_mk_cons(_OMC_LIT30, mmc_mk_cons(_cmt_str, mmc_mk_cons(_OMC_LIT28, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp6 = stringAppendList(tmpMeta[3]);
}
tmpMeta[1] = mmc_mk_cons(tmp6, MMC_REFSTRUCTLIT(mmc_nil));
_names = tmpMeta[1];
{
modelica_metatype tmp9_1;
tmp9_1 = _oadim;
{
volatile mmc_switch_type tmp9;
int tmp10;
tmp9 = 0;
for (; tmp9 < 2; tmp9++) {
switch (MMC_SWITCH_CAST(tmp9)) {
case 0: {
if (optionNone(tmp9_1)) goto tmp8_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp9_1), 1));
_ad = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(stringDelimitList(omc_List_map(threadData, _ad, boxvar_Dump_printSubscriptStr), _OMC_LIT10), MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = tmpMeta[2];
goto tmp8_done;
}
case 1: {
tmpMeta[1] = _OMC_LIT31;
goto tmp8_done;
}
}
goto tmp8_end;
tmp8_end: ;
}
goto goto_7;
goto_7:;
goto goto_1;
goto tmp8_done;
tmp8_done:;
}
}
_dims = tmpMeta[1];
_final_str = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 2))))?_OMC_LIT23:_OMC_LIT24);
_repl_str = (omc_InteractiveUtil_keywordReplaceable(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 3))))?_OMC_LIT23:_OMC_LIT24);
_io_str = omc_InteractiveUtil_innerOuterStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 4))));
_flow_str = omc_InteractiveUtil_attrFlowStr(threadData, _attr);
_stream_str = omc_InteractiveUtil_attrStreamStr(threadData, _attr);
_var_str = omc_InteractiveUtil_attrVariabilityStr(threadData, _attr);
_dir_str = omc_InteractiveUtil_attrDirectionStr(threadData, _attr);
_dim_str = omc_InteractiveUtil_attrDimensionStr(threadData, _attr);
_cc_str = omc_InteractiveUtil_getConstrainClassStr(threadData, _inEnv, _occ);
if(_inQuoteNames)
{
_typename = omc_StringUtil_quote(threadData, _typename);
_final_str = omc_StringUtil_quote(threadData, _final_str);
_repl_str = omc_StringUtil_quote(threadData, _repl_str);
_flow_str = omc_StringUtil_quote(threadData, _flow_str);
_stream_str = omc_StringUtil_quote(threadData, _stream_str);
_cc_str = omc_StringUtil_quote(threadData, _cc_str);
}
_names = omc_InteractiveUtil_prefixTypename(threadData, _typename, _names);
tmpMeta[1] = stringAppend(_OMC_LIT28,omc_Dump_unparseRestrictionStr(threadData, _restriction));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT28);
_names = omc_InteractiveUtil_prefixTypename(threadData, tmpMeta[2], _names);
_names = omc_InteractiveUtil_prefixTypename(threadData, _OMC_LIT32, _names);
tmpMeta[1] = mmc_mk_cons(_inVisibility, mmc_mk_cons(_final_str, mmc_mk_cons(_flow_str, mmc_mk_cons(_stream_str, mmc_mk_cons(_repl_str, mmc_mk_cons(_var_str, mmc_mk_cons(_io_str, mmc_mk_cons(_dir_str, mmc_mk_cons(_cc_str, MMC_REFSTRUCTLIT(mmc_nil))))))))));
_str = stringDelimitList(tmpMeta[1], _OMC_LIT27);
tmpMeta[0] = omc_InteractiveUtil_suffixInfos(threadData, _names, _dims, _dim_str, _str, _inQuoteNames);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElementInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inQuoteNames, modelica_metatype _inVisibility, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inQuoteNames);
_outStringLst = omc_InteractiveUtil_getElementInfo(threadData, _inElement, tmp1, _inVisibility, _inEnv);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementsInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outAbsynElementLst = tmpMeta[0];
{
modelica_metatype _el;
for (tmpMeta[1] = _inAbsynElementItemLst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_el = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _el;
{
modelica_metatype _elt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_elt = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_elt, _outAbsynElementLst);
_outAbsynElementLst = tmpMeta[2];
goto tmp2_done;
}
case 1: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
}
}
_outAbsynElementLst = listReverseInPlace(_outAbsynElementLst);
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getProtectedElementsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp7_1;
tmp7_1 = _elt;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,1,1) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp6_done;
}
case 1: {
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp11_1;
tmp11_1 = _elt;
{
volatile mmc_switch_type tmp11;
int tmp12;
tmp11 = 0;
for (; tmp11 < 2; tmp11++) {
switch (MMC_SWITCH_CAST(tmp11)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp11_1,1,1) == 0) goto tmp10_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp11_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp10_done;
}
case 1: {
goto tmp10_done;
}
}
goto tmp10_end;
tmp10_end: ;
}
goto goto_9;
goto_9:;
goto goto_1;
goto tmp10_done;
tmp10_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynElementLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPublicElementsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp7_1;
tmp7_1 = _elt;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,1) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp6_done;
}
case 1: {
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp11_1;
tmp11_1 = _elt;
{
volatile mmc_switch_type tmp11;
int tmp12;
tmp11 = 0;
for (; tmp11 < 2; tmp11++) {
switch (MMC_SWITCH_CAST(tmp11)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp11_1,0,1) == 0) goto tmp10_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp11_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp10_done;
}
case 1: {
goto tmp10_done;
}
}
goto tmp10_end;
tmp10_end: ;
}
goto goto_9;
goto_9:;
goto goto_1;
goto tmp10_done;
tmp10_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynElementLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getElementsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp7_1;
tmp7_1 = _elt;
{
int tmp7;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp7_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,1) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp6_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,1,1) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp6_done;
}
default:
tmp6_default: OMC_LABEL_UNUSED; {
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp10_1;
tmp10_1 = _elt;
{
int tmp10;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp10_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,0,1) == 0) goto tmp9_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp9_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,1,1) == 0) goto tmp9_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getElementsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp9_done;
}
default:
tmp9_default: OMC_LABEL_UNUSED; {
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
goto_8:;
goto goto_1;
goto tmp9_done;
tmp9_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynElementLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsFromItems(threadData_t *threadData, modelica_metatype _inComponentItems, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _outCache = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _res = NULL;
modelica_string _str = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta[0];
_outCache = _inCache;
{
modelica_metatype _comp;
for (tmpMeta[1] = listReverse(_inComponentItems); !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_comp = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _comp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_annotations = tmpMeta[7];
tmpMeta[2] = listAppend(_annotations, _ccAnnotations);
goto tmp2_done;
}
case 1: {
tmpMeta[2] = _ccAnnotations;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_annotations = tmpMeta[2];
_res = omc_InteractiveUtil_getElementitemsAnnotationsElArgs(threadData, _annotations, _inEnv, _inClass, _outCache ,&_outCache);
_str = stringDelimitList(_res, _OMC_LIT27);
tmpMeta[3] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta[2] = mmc_mk_cons(stringAppendList(tmpMeta[3]), _outStringLst);
_outStringLst = tmpMeta[2];
}
}
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsElArgs(threadData_t *threadData, modelica_metatype _inElementArgs, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _outCache = NULL;
modelica_string _str = NULL;
modelica_string _ann_name = NULL;
modelica_metatype _eq_aexp = NULL;
modelica_metatype _eq_dexp = NULL;
modelica_metatype _prop = NULL;
modelica_metatype _info = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _c = NULL;
modelica_metatype _smod = NULL;
modelica_metatype _dmod = NULL;
modelica_metatype _dae = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta[0];
_outCache = _inCache;
{
modelica_metatype _e;
for (tmpMeta[1] = listReverse(_inElementArgs); !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_e = MMC_CAR(tmpMeta[1]);
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _e;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (!listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,2) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_ann_name = tmpMeta[3];
_eq_aexp = tmpMeta[8];
_info = tmpMeta[9];
tmp4 += 3;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, tmpMeta[2] ,&_env ,NULL ,&_outCache);
omc_StaticScript_elabGraphicsExp(threadData, _cache, _env, _eq_aexp, 0, _OMC_LIT33, _info ,&_eq_dexp ,&_prop);
_cache = omc_Ceval_cevalIfConstant(threadData, _cache, _env, _eq_dexp, _prop, 0, _info ,&_eq_dexp ,&_prop);
_eq_dexp = omc_ExpressionSimplify_simplify1(threadData, _eq_dexp, NULL);
omc_Print_clearErrorBuf(threadData);
_str = omc_ExpressionDump_printExpStr(threadData, _eq_dexp);
tmpMeta[2] = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT34, mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[2]);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,0) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_ann_name = tmpMeta[3];
_mod = tmpMeta[6];
_info = tmpMeta[8];
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, _mod ,&_env ,NULL ,&_outCache);
_cache = omc_Lookup_lookupClassIdent(threadData, _cache, _inEnv, _ann_name, mmc_mk_none() ,&_c ,&_env2);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _mod, _OMC_LIT35);
_smod = omc_AbsynToSCode_translateMod(threadData, mmc_mk_some(tmpMeta[2]), _OMC_LIT36, _OMC_LIT37, _info);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box2(3, &Mod_ModScope_COMPONENT__desc, _ann_name);
_cache = omc_Mod_elabMod(threadData, _cache, _env, tmpMeta[2], _OMC_LIT33, _smod, 0, tmpMeta[3], _OMC_LIT39 ,&_dmod);
_c = omc_SCodeUtil_classSetPartial(threadData, _c, _OMC_LIT40);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_instClass(threadData, _cache, _env2, tmpMeta[2], _OMC_LIT41, _dmod, _OMC_LIT33, _c, tmpMeta[3], 0, _OMC_LIT42, _OMC_LIT43, _OMC_LIT46 ,NULL ,NULL ,NULL ,&_dae, NULL, NULL, NULL, NULL, NULL);
_str = omc_DAEUtil_getVariableBindingsStr(threadData, omc_DAEUtil_daeElements(threadData, _dae));
tmpMeta[2] = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT47, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT48, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp1 = stringAppendList(tmpMeta[2]);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,0) == 0) goto tmp3_end;
_ann_name = tmpMeta[3];
tmp4 += 1;
tmpMeta[2] = stringAppend(_ann_name,_OMC_LIT49);
tmp1 = tmpMeta[2];
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (!optionNone(tmpMeta[4])) goto tmp3_end;
_ann_name = tmpMeta[3];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, tmpMeta[2] ,NULL ,NULL ,&_outCache);
_cache = omc_Lookup_lookupClassIdent(threadData, _cache, _inEnv, _ann_name, mmc_mk_none() ,&_c ,&_env);
_c = omc_SCodeUtil_classSetPartial(threadData, _c, _OMC_LIT40);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_instClass(threadData, _cache, _env, tmpMeta[2], _OMC_LIT41, _OMC_LIT50, _OMC_LIT33, _c, tmpMeta[3], 0, _OMC_LIT42, _OMC_LIT43, _OMC_LIT46 ,NULL ,NULL ,NULL ,&_dae, NULL, NULL, NULL, NULL, NULL);
_str = omc_DAEUtil_getVariableBindingsStr(threadData, omc_DAEUtil_daeElements(threadData, _dae));
tmpMeta[2] = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT47, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT48, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp1 = stringAppendList(tmpMeta[2]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
tmpMeta[2] = mmc_mk_cons(_str, _outStringLst);
_outStringLst = tmpMeta[2];
}
}
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAnnotationsFromConstraintClass(threadData_t *threadData, modelica_metatype _inCC)
{
modelica_metatype _outElArgLst = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inCC;
{
modelica_metatype _elementArgs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_elementArgs = tmpMeta[6];
tmpMeta[0] = _elementArgs;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElArgLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElArgLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotationsFromElArgs(threadData_t *threadData, modelica_metatype _inAnnotations, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _outCache = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _res = NULL;
modelica_string _str = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta[0];
_outCache = _inCache;
_annotations = listAppend(_inAnnotations, _ccAnnotations);
_res = omc_InteractiveUtil_getElementitemsAnnotationsElArgs(threadData, _annotations, _inEnv, _inClass, _outCache ,&_outCache);
_str = stringDelimitList(_res, _OMC_LIT27);
tmpMeta[2] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta[1] = mmc_mk_cons(stringAppendList(tmpMeta[2]), _outStringLst);
_outStringLst = tmpMeta[1];
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemsAnnotations(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _res = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _items = NULL;
modelica_metatype _cc = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta[0];
_cache = _inCache;
{
modelica_metatype _e;
for (tmpMeta[1] = listReverse(_inElements); !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_e = MMC_CAR(tmpMeta[1]);
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _e;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,3) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_items = tmpMeta[4];
_cc = tmpMeta[5];
tmp3 += 1;
_res = omc_InteractiveUtil_getElementitemsAnnotationsFromItems(threadData, _items, omc_InteractiveUtil_getAnnotationsFromConstraintClass(threadData, _cc), _inEnv, _inClass, _cache ,&_cache);
tmpMeta[2] = listAppend(_res, _outStringLst);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,4) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_cmt = tmpMeta[6];
_cc = tmpMeta[7];
tmp3 += 1;
{
modelica_metatype tmp7_1;
tmp7_1 = _cmt;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (optionNone(tmp7_1)) goto tmp6_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (optionNone(tmpMeta[5])) goto tmp6_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_annotations = tmpMeta[7];
tmpMeta[3] = _annotations;
goto tmp6_done;
}
case 1: {
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = tmpMeta[4];
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
_annotations = tmpMeta[3];
_res = omc_InteractiveUtil_getElementitemsAnnotationsFromElArgs(threadData, _annotations, omc_InteractiveUtil_getAnnotationsFromConstraintClass(threadData, _cc), _inEnv, _inClass, _cache ,&_cache);
tmpMeta[2] = listAppend(_res, _outStringLst);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,3) == 0) goto tmp2_end;
tmp3 += 1;
tmpMeta[3] = mmc_mk_cons(_OMC_LIT51, _outStringLst);
tmpMeta[2] = tmpMeta[3];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,4) == 0) goto tmp2_end;
tmpMeta[3] = mmc_mk_cons(_OMC_LIT51, _outStringLst);
tmpMeta[2] = tmpMeta[3];
goto tmp2_done;
}
case 4: {
tmpMeta[2] = _outStringLst;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[2];
}
}
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementAnnotationsFromElts(threadData_t *threadData, modelica_metatype _comps, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _resStr = NULL;
modelica_metatype _graphicProgramSCode = NULL;
modelica_metatype _env = NULL;
modelica_metatype _res = NULL;
modelica_metatype _placementProgram = NULL;
modelica_metatype _cache = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_placementProgram = omc_InteractiveUtil_modelicaAnnotationProgram(threadData, omc_Config_getAnnotationVersion(threadData));
_graphicProgramSCode = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _placementProgram);
omc_Inst_makeEnvFromProgram(threadData, _graphicProgramSCode ,&_env);
tmpMeta[0] = mmc_mk_box3(3, &Interactive_GraphicEnvCache_GRAPHIC__ENV__NO__CACHE__desc, _inFullProgram, _inModelPath);
_cache = tmpMeta[0];
_res = omc_InteractiveUtil_getElementitemsAnnotations(threadData, _comps, _env, _inClass, _cache);
_resStr = stringDelimitList(_res, _OMC_LIT10);
_return: OMC_LABEL_UNUSED
return _resStr;
}
DLLExport
modelica_string omc_InteractiveUtil_getElementAnnotations(threadData_t *threadData, modelica_metatype _inClassPath, modelica_metatype _inProgram, modelica_integer _inAccess)
{
modelica_string _outString = NULL;
modelica_metatype _model_path = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _comps2 = NULL;
modelica_metatype _comps = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_model_path = omc_AbsynUtil_crefToPath(threadData, _inClassPath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _model_path, _inProgram, 0);
_comps1 = omc_InteractiveUtil_getPublicElementsInClass(threadData, _cdef);
if((_inAccess >= ((modelica_integer) 4)))
{
_comps2 = omc_InteractiveUtil_getProtectedElementsInClass(threadData, _cdef);
}
else
{
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_comps2 = tmpMeta[0];
}
_comps = listAppend(_comps1, _comps2);
_outString = omc_InteractiveUtil_getElementAnnotationsFromElts(threadData, _comps, _cdef, _inProgram, _model_path);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_outString, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
_outString = stringAppendList(tmpMeta[0]);
goto tmp2_done;
}
case 1: {
_outString = _OMC_LIT52;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getElementAnnotations(threadData_t *threadData, modelica_metatype _inClassPath, modelica_metatype _inProgram, modelica_metatype _inAccess)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inAccess);
_outString = omc_InteractiveUtil_getElementAnnotations(threadData, _inClassPath, _inProgram, tmp1);
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_createEnvironment(threadData_t *threadData, modelica_metatype _p, modelica_metatype _os, modelica_metatype _modelPath)
{
modelica_metatype _genv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _s = NULL;
modelica_metatype _c = NULL;
modelica_string _id = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _cache = NULL;
modelica_boolean _b;
modelica_boolean _permissive;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(omc_Flags_isSet(threadData, _OMC_LIT18))
{
tmpMeta[0] = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, _p, _modelPath, omc_FCore_emptyCache(threadData), _OMC_LIT61);
_genv = tmpMeta[0];
}
else
{
_s = omc_Util_getOptionOrDefault(threadData, _os, omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p));
_cache = omc_Inst_makeEnvFromProgram(threadData, _s ,&_env);
tmpMeta[5] = omc_Lookup_lookupClass(threadData, _cache, _env, _modelPath, mmc_mk_none(), &tmpMeta[0], &tmpMeta[4]);
_cache = tmpMeta[5];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,8) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
_c = tmpMeta[0];
_id = tmpMeta[1];
_encflag = tmpMeta[2];
_restr = tmpMeta[3];
_env_1 = tmpMeta[4];
_env2 = omc_FGraph_openScope(threadData, _env_1, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
_permissive = omc_Flags_getConfigBool(threadData, _OMC_LIT58);
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT58, 1);
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, _cache, _env2, tmpMeta[0], _OMC_LIT50, _OMC_LIT33, _ci_state, _c, _OMC_LIT59, tmpMeta[1], ((modelica_integer) 0) ,&_env2 ,NULL ,NULL ,NULL);
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT58, _permissive);
goto tmp2_done;
}
case 1: {
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT58, _permissive);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
tmpMeta[0] = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, omc_SymbolTable_getAbsyn(threadData), _modelPath, _cache, _env2);
_genv = tmpMeta[0];
}
_return: OMC_LABEL_UNUSED
return _genv;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElements2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_boolean _inBoolean, modelica_integer _inAccess)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inComponentRef;
tmp4_2 = _inBoolean;
tmp4_3 = _inAccess;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_string _str = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _comps2 = NULL;
modelica_metatype _model_ = NULL;
modelica_boolean _b;
modelica_metatype _genv = NULL;
modelica_integer _access;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_b = tmp4_2;
_access = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_genv = omc_InteractiveUtil_createEnvironment(threadData, omc_SymbolTable_getAbsyn(threadData), mmc_mk_some(omc_SymbolTable_getSCode(threadData)), _modelpath);
_comps1 = omc_InteractiveUtil_getPublicElementsInClass(threadData, _cdef);
_s1 = omc_InteractiveUtil_getElementsString(threadData, _comps1, _b, _OMC_LIT62, _genv);
if((_access >= ((modelica_integer) 4)))
{
_comps2 = omc_InteractiveUtil_getProtectedElementsInClass(threadData, _cdef);
_s2 = omc_InteractiveUtil_getElementsString(threadData, _comps2, _b, _OMC_LIT63, _genv);
}
else
{
_s2 = _OMC_LIT9;
}
tmpMeta[0] = mmc_mk_cons(_s1, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil)));
_str = omc_Util_stringDelimitListNonEmptyElts(threadData, tmpMeta[0], _OMC_LIT10);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getElements2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inBoolean, modelica_metatype _inAccess)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
tmp2 = mmc_unbox_integer(_inAccess);
_outString = omc_InteractiveUtil_getElements2(threadData, _inComponentRef, tmp1, tmp2);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getElements(threadData_t *threadData, modelica_metatype _cr, modelica_boolean _inBoolean, modelica_integer _inAccess)
{
modelica_string _outString = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outString = omc_InteractiveUtil_getElements2(threadData, _cr, _inBoolean, _inAccess);
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getElements(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _inBoolean, modelica_metatype _inAccess)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
tmp2 = mmc_unbox_integer(_inAccess);
_outString = omc_InteractiveUtil_getElements(threadData, _cr, tmp1, tmp2);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getElementBinding(threadData_t *threadData, modelica_metatype _path, modelica_string _parameterName, modelica_metatype _program)
{
modelica_string _bindingStr = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _component = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _program, 0);
_component = omc_InteractiveUtil_getComponentInClass(threadData, _cls, _parameterName);
_bindingStr = omc_Dump_printExpStr(threadData, omc_InteractiveUtil_getVariableBindingInComponentitem(threadData, _component));
goto tmp2_done;
}
case 1: {
_bindingStr = _OMC_LIT9;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _bindingStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getModificationNames(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_boolean _includeRedeclares)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynElementArgLst;
{
modelica_metatype _names = NULL;
modelica_metatype _names2 = NULL;
modelica_metatype _res = NULL;
modelica_string _name = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _args = NULL;
modelica_metatype _elSpec = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 7; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 6;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (!optionNone(tmpMeta[5])) goto tmp2_end;
_name = tmpMeta[4];
_rest = tmpMeta[2];
tmp3 += 4;
_names = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
tmpMeta[1] = mmc_mk_cons(_name, _names);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (!listEmpty(tmpMeta[6])) goto tmp2_end;
_p = tmpMeta[3];
_rest = tmpMeta[2];
_name = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT0, 1, 0);
_names = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
tmpMeta[1] = mmc_mk_cons(_name, _names);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,2) == 0) goto tmp2_end;
_p = tmpMeta[3];
_args = tmpMeta[6];
_rest = tmpMeta[2];
_name = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT0, 1, 0);
{
modelica_metatype __omcQ_24tmpVar3;
modelica_metatype* tmp5;
modelica_string __omcQ_24tmpVar2;
int tmp6;
modelica_metatype _n_loopVar = 0;
modelica_metatype _n;
_n_loopVar = omc_InteractiveUtil_getModificationNames(threadData, _args, _includeRedeclares);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar3 = tmpMeta[2];
tmp5 = &__omcQ_24tmpVar3;
while(1) {
tmp6 = 1;
if (!listEmpty(_n_loopVar)) {
_n = MMC_CAR(_n_loopVar);
_n_loopVar = MMC_CDR(_n_loopVar);
tmp6--;
}
if (tmp6 == 0) {
tmpMeta[3] = stringAppend(_name,_OMC_LIT0);
tmpMeta[4] = stringAppend(tmpMeta[3],_n);
__omcQ_24tmpVar2 = tmpMeta[4];
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar2,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar3;
}
_names2 = tmpMeta[1];
_names = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
_res = listAppend(_names2, _names);
tmpMeta[1] = mmc_mk_cons(_name, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_p = tmpMeta[3];
_args = tmpMeta[6];
_rest = tmpMeta[2];
tmp3 += 1;
_name = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT0, 1, 0);
{
modelica_metatype __omcQ_24tmpVar5;
modelica_metatype* tmp7;
modelica_string __omcQ_24tmpVar4;
int tmp8;
modelica_metatype _n_loopVar = 0;
modelica_metatype _n;
_n_loopVar = omc_InteractiveUtil_getModificationNames(threadData, _args, _includeRedeclares);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar5 = tmpMeta[2];
tmp7 = &__omcQ_24tmpVar5;
while(1) {
tmp8 = 1;
if (!listEmpty(_n_loopVar)) {
_n = MMC_CAR(_n_loopVar);
_n_loopVar = MMC_CDR(_n_loopVar);
tmp8--;
}
if (tmp8 == 0) {
tmpMeta[3] = stringAppend(_name,_OMC_LIT0);
tmpMeta[4] = stringAppend(tmpMeta[3],_n);
__omcQ_24tmpVar4 = tmpMeta[4];
*tmp7 = mmc_mk_cons(__omcQ_24tmpVar4,0);
tmp7 = &MMC_CDR(*tmp7);
} else if (tmp8 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp7 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar5;
}
_names2 = tmpMeta[1];
_names = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
tmpMeta[0] = listAppend(_names2, _names);
goto tmp2_done;
}
case 5: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_elSpec = tmpMeta[3];
_rest = tmpMeta[2];
if (!_includeRedeclares) goto tmp2_end;
_name = omc_AbsynUtil_elementSpecName(threadData, _elSpec);
_names = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
tmpMeta[1] = mmc_mk_cons(_name, _names);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getModificationNames(threadData, _rest, _includeRedeclares);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 7) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getModificationNames(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _includeRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_includeRedeclares);
_outStringLst = omc_InteractiveUtil_getModificationNames(threadData, _inAbsynElementArgLst, tmp1);
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getElementModifierNames(threadData_t *threadData, modelica_metatype _path, modelica_string _inElementName, modelica_metatype _inProgram3)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inProgram3;
{
modelica_metatype _cdef = NULL;
modelica_metatype _elems = NULL;
modelica_string _name = NULL;
modelica_metatype _p = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _args = NULL;
modelica_metatype _components = NULL;
modelica_boolean _found;
modelica_metatype _optMod = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_mod = tmpMeta[1];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_args = tmpMeta[2];
_found = 0;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_p = tmp3_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_elems = omc_InteractiveUtil_getElementsInClass(threadData, _cdef);
{
modelica_metatype _e;
for (tmpMeta[3] = _elems; !listEmpty(tmpMeta[3]); tmpMeta[3]=MMC_CDR(tmpMeta[3]))
{
_e = MMC_CAR(tmpMeta[3]);
{
modelica_metatype tmp7_1;
tmp7_1 = _e;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 3; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,6) == 0) goto tmp6_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,2) == 0) goto tmp6_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],1,4) == 0) goto tmp6_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 4));
_name = tmpMeta[7];
_args = tmpMeta[9];
if (!(stringEqual(_name, _inElementName))) goto tmp6_end;
_found = 1;
tmpMeta[4] = _args;
goto tmp6_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,6) == 0) goto tmp6_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,3) == 0) goto tmp6_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
_components = tmpMeta[6];
{
modelica_metatype _c;
for (tmpMeta[5] = _components; !listEmpty(tmpMeta[5]); tmpMeta[5]=MMC_CDR(tmpMeta[5]))
{
_c = MMC_CAR(tmpMeta[5]);
tmpMeta[6] = _c;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
_name = tmpMeta[8];
_optMod = tmpMeta[9];
if((stringEqual(_name, _inElementName)))
{
tmpMeta[6] = omc_Util_getOptionOrDefault(threadData, _optMod, _OMC_LIT64);
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_mod = tmpMeta[7];
_found = 1;
}
}
}
tmpMeta[4] = _mod;
goto tmp6_done;
}
case 2: {
tmpMeta[5] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = tmpMeta[5];
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
_mod = tmpMeta[4];
if(_found)
{
break;
}
}
}
tmpMeta[0] = omc_InteractiveUtil_getModificationNames(threadData, _mod, 1);
goto tmp2_done;
}
case 1: {
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outList = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outList;
}
DLLExport
modelica_string omc_InteractiveUtil_getElementModifierValues(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inProgram4)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inProgram4;
{
modelica_metatype _p_class = NULL;
modelica_string _name = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _elems = NULL;
modelica_metatype _compelts = NULL;
modelica_metatype _compelts_1 = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _ident = NULL;
modelica_metatype _subident = NULL;
modelica_metatype _p = NULL;
modelica_metatype _elementArgLst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_class_ = tmp4_1;
_ident = tmp4_2;
_subident = tmp4_3;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta[0] = omc_AbsynUtil_crefToPath(threadData, _ident);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_elems = omc_InteractiveUtil_getElementsInClass(threadData, _cdef);
_compelts = omc_List_map(threadData, _elems, boxvar_InteractiveUtil_getComponentitemsInElement);
_compelts_1 = omc_List_flatten(threadData, _compelts);
tmpMeta[0] = omc_List_select1(threadData, _compelts_1, boxvar_InteractiveUtil_componentitemNamed, _name);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
if (optionNone(tmpMeta[4])) goto goto_2;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (!listEmpty(tmpMeta[2])) goto goto_2;
_elementArgLst = tmpMeta[6];
_mod = omc_InteractiveUtil_getModificationValues(threadData, _elementArgLst, omc_AbsynUtil_crefToPath(threadData, _subident));
tmp1 = omc_Dump_unparseModificationStr(threadData, _mod);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getModificationValueStr(threadData_t *threadData, modelica_metatype _args, modelica_metatype _path)
{
modelica_string _value = NULL;
modelica_string _name = NULL;
modelica_metatype _rest_args = NULL;
modelica_metatype _arg = NULL;
modelica_boolean _found;
modelica_metatype _elSpec = NULL;
modelica_metatype _exp = NULL;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_value = _OMC_LIT9;
_rest_args = _args;
_found = 0;
while(1)
{
if(!(!_found)) break;
tmpMeta[0] = _rest_args;
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_arg = tmpMeta[1];
_rest_args = tmpMeta[2];
{
modelica_metatype tmp4_1;
tmp4_1 = _arg;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
if (!omc_AbsynUtil_pathEqual(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arg), 4))), _path)) goto tmp3_end;
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arg), 5)));
if (optionNone(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,2) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_exp = tmpMeta[3];
_value = omc_Dump_printExpStr(threadData, _exp);
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
if (!(stringEqual(_name, omc_AbsynUtil_pathFirstIdent(threadData, _path)))) goto tmp3_end;
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arg), 5)));
if (optionNone(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_rest_args = tmpMeta[2];
_value = omc_InteractiveUtil_getModificationValueStr(threadData, _rest_args, omc_AbsynUtil_pathRest(threadData, _path));
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_elSpec = tmpMeta[0];
if (!(stringEqual(omc_AbsynUtil_pathFirstIdent(threadData, _path), omc_AbsynUtil_elementSpecName(threadData, _elSpec)))) goto tmp3_end;
_value = omc_System_escapedString(threadData, omc_Dump_unparseElementArgStr(threadData, _arg), 0);
tmp1 = 1;
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_found = tmp1;
}
_return: OMC_LABEL_UNUSED
return _value;
}
DLLExport
modelica_string omc_InteractiveUtil_getElementModifierValue(threadData_t *threadData, modelica_metatype _classRef, modelica_metatype _varRef, modelica_metatype _subModRef, modelica_metatype _program)
{
modelica_string _valueStr = NULL;
modelica_metatype _cls_path = NULL;
modelica_string _name = NULL;
modelica_string _elName = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _args = NULL;
modelica_metatype _elems = NULL;
modelica_boolean _found;
modelica_metatype _components = NULL;
modelica_metatype _optMod = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_args = tmpMeta[0];
_found = 0;
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_cls_path = omc_AbsynUtil_crefToPath(threadData, _classRef);
_elName = omc_AbsynUtil_crefIdent(threadData, _varRef);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cls_path, _program, 0);
_elems = omc_InteractiveUtil_getElementsInClass(threadData, _cls);
{
modelica_metatype _e;
for (tmpMeta[1] = _elems; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_e = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp7_1;
tmp7_1 = _e;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 3; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,6) == 0) goto tmp6_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp6_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,4) == 0) goto tmp6_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
_name = tmpMeta[5];
_args = tmpMeta[7];
if (!(stringEqual(_name, _elName))) goto tmp6_end;
_found = 1;
tmpMeta[2] = _args;
goto tmp6_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,6) == 0) goto tmp6_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,3) == 0) goto tmp6_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
_components = tmpMeta[4];
{
modelica_metatype _c;
for (tmpMeta[3] = _components; !listEmpty(tmpMeta[3]); tmpMeta[3]=MMC_CDR(tmpMeta[3]))
{
_c = MMC_CAR(tmpMeta[3]);
tmpMeta[4] = _c;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
_name = tmpMeta[6];
_optMod = tmpMeta[7];
if((stringEqual(_name, _elName)))
{
tmpMeta[4] = omc_Util_getOptionOrDefault(threadData, _optMod, _OMC_LIT64);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_args = tmpMeta[5];
_found = 1;
}
}
}
tmpMeta[2] = _args;
goto tmp6_done;
}
case 2: {
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = tmpMeta[3];
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
_args = tmpMeta[2];
if(_found)
{
break;
}
}
}
if(_found)
{
_valueStr = omc_InteractiveUtil_getModificationValueStr(threadData, _args, omc_AbsynUtil_crefToPath(threadData, _subModRef));
}
else
{
_valueStr = _OMC_LIT9;
}
goto tmp2_done;
}
case 1: {
_valueStr = _OMC_LIT9;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _valueStr;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_findPathModification(threadData_t *threadData, modelica_metatype _path, modelica_metatype _lst)
{
modelica_boolean _found;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _lst;
{
modelica_metatype _p = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_p = tmpMeta[2];
if (!omc_AbsynUtil_pathEqual(threadData, _path, _p)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_rest = tmpMeta[1];
_lst = _rest;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_found = tmp1;
_return: OMC_LABEL_UNUSED
return _found;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_findPathModification(threadData_t *threadData, modelica_metatype _path, modelica_metatype _lst)
{
modelica_boolean _found;
modelica_metatype out_found;
_found = omc_InteractiveUtil_findPathModification(threadData, _path, _lst);
out_found = mmc_mk_icon(_found);
return out_found;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElementargs(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath, modelica_metatype _inModification)
{
modelica_metatype _outAbsynElementArgLst = NULL;
modelica_metatype tmpMeta[17] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynElementArgLst;
tmp3_2 = _inPath;
tmp3_3 = _inModification;
{
modelica_metatype _mod = NULL;
modelica_boolean _f;
modelica_metatype _each_ = NULL;
modelica_string _name = NULL;
modelica_string _submodident = NULL;
modelica_string _name1 = NULL;
modelica_string _name2 = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _args_1 = NULL;
modelica_metatype _args = NULL;
modelica_metatype _res = NULL;
modelica_metatype _submods = NULL;
modelica_metatype _m = NULL;
modelica_metatype _eqMod = NULL;
modelica_metatype _info = NULL;
modelica_metatype _p = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 14; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,0) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_mod = tmp3_3;
tmp3 += 11;
tmpMeta[2] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT65, _inPath, mmc_mk_some(_mod), mmc_mk_none(), _OMC_LIT39);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
modelica_integer tmp5;
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,0) == 0) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmp3_1);
tmpMeta[5] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[6]);
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],1,1) == 0) goto tmp2_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (optionNone(tmpMeta[10])) goto tmp2_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 1));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 2));
if (listEmpty(tmpMeta[12])) goto tmp2_end;
tmpMeta[13] = MMC_CAR(tmpMeta[12]);
tmpMeta[14] = MMC_CDR(tmpMeta[12]);
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 6));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
_submodident = tmpMeta[1];
_f = tmp5;
_each_ = tmpMeta[7];
_p = tmpMeta[8];
_name = tmpMeta[9];
_submods = tmpMeta[12];
_cmt = tmpMeta[15];
_info = tmpMeta[16];
_rest = tmpMeta[5];
tmp3 += 2;
tmp6 = (stringEqual(_name, _submodident));
if (1 != tmp6) goto goto_1;
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _submods, _OMC_LIT35);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, _p, mmc_mk_some(tmpMeta[2]), _cmt, _info);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,0) == 0) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmp3_1);
tmpMeta[5] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,1) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (optionNone(tmpMeta[8])) goto tmp2_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 1));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
if (!listEmpty(tmpMeta[10])) goto tmp2_end;
_submodident = tmpMeta[1];
_name = tmpMeta[7];
_rest = tmpMeta[5];
tmp3 += 1;
tmp7 = (stringEqual(_name, _submodident));
if (1 != tmp7) goto goto_1;
tmpMeta[0] = _rest;
goto tmp2_done;
}
case 4: {
modelica_integer tmp8;
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,2) == 0) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmp3_1);
tmpMeta[5] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp8 = mmc_unbox_integer(tmpMeta[6]);
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],1,1) == 0) goto tmp2_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (optionNone(tmpMeta[10])) goto tmp2_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 1));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 2));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 6));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
_submodident = tmpMeta[1];
_eqMod = tmpMeta[3];
_f = tmp8;
_each_ = tmpMeta[7];
_name = tmpMeta[9];
_submods = tmpMeta[12];
_cmt = tmpMeta[13];
_info = tmpMeta[14];
_rest = tmpMeta[5];
tmp9 = (stringEqual(_name, _submodident));
if (1 != tmp9) goto goto_1;
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _submods, _eqMod);
tmpMeta[4] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, tmpMeta[2], mmc_mk_some(tmpMeta[3]), _cmt, _info);
tmpMeta[1] = mmc_mk_cons(tmpMeta[4], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
modelica_integer tmp10;
modelica_boolean tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmp3_1);
tmpMeta[3] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,1) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
_submodident = tmpMeta[1];
_f = tmp10;
_each_ = tmpMeta[5];
_name = tmpMeta[7];
_cmt = tmpMeta[8];
_info = tmpMeta[9];
_rest = tmpMeta[3];
_mod = tmp3_3;
tmp3 += 5;
tmp11 = (stringEqual(_name, _submodident));
if (1 != tmp11) goto goto_1;
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, tmpMeta[2], mmc_mk_some(_mod), _cmt, _info);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
modelica_boolean tmp12;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,0) == 0) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_1);
tmpMeta[4] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,2) == 0) goto tmp2_end;
_p1 = tmpMeta[5];
_rest = tmpMeta[4];
_p2 = tmp3_2;
tmp12 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp12) goto goto_1;
tmpMeta[0] = _rest;
goto tmp2_done;
}
case 7: {
modelica_boolean tmp13;
modelica_boolean tmp14;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,0) == 0) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmp3_1);
tmpMeta[5] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,2) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_p = tmp3_2;
_name2 = tmpMeta[1];
_name1 = tmpMeta[7];
_rest = tmpMeta[5];
tmp3 += 3;
tmp13 = (stringEqual(_name1, _name2));
if (1 != tmp13) goto goto_1;
tmp14 = omc_InteractiveUtil_findPathModification(threadData, _p, _rest);
if (0 != tmp14) goto goto_1;
tmpMeta[0] = _rest;
goto tmp2_done;
}
case 8: {
modelica_integer tmp15;
modelica_boolean tmp16;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
if (!listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,0) == 0) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmp3_1);
tmpMeta[6] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,6) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmp15 = mmc_unbox_integer(tmpMeta[7]);
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],1,1) == 0) goto tmp2_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
if (optionNone(tmpMeta[11])) goto tmp2_end;
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 1));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[14],0,0) == 0) goto tmp2_end;
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 7));
_name1 = tmpMeta[1];
_p1 = tmpMeta[2];
_f = tmp15;
_each_ = tmpMeta[8];
_p = tmpMeta[9];
_name2 = tmpMeta[10];
_args = tmpMeta[13];
_cmt = tmpMeta[15];
_info = tmpMeta[16];
_rest = tmpMeta[6];
tmp3 += 1;
tmp16 = (stringEqual(_name1, _name2));
if (1 != tmp16) goto goto_1;
tmpMeta[1] = omc_InteractiveUtil_setSubmodifierInElementargs(threadData, _args, _p1, _OMC_LIT64);
if (!listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, _p, mmc_mk_none(), _cmt, _info);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 9: {
modelica_integer tmp17;
modelica_boolean tmp18;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
if (!listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,0) == 0) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmp3_1);
tmpMeta[6] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,6) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmp17 = mmc_unbox_integer(tmpMeta[7]);
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],1,1) == 0) goto tmp2_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
if (optionNone(tmpMeta[11])) goto tmp2_end;
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 1));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[14],1,2) == 0) goto tmp2_end;
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 7));
_name1 = tmpMeta[1];
_p1 = tmpMeta[2];
_f = tmp17;
_each_ = tmpMeta[8];
_p = tmpMeta[9];
_name2 = tmpMeta[10];
_args = tmpMeta[13];
_eqMod = tmpMeta[14];
_cmt = tmpMeta[15];
_info = tmpMeta[16];
_rest = tmpMeta[6];
tmp18 = (stringEqual(_name1, _name2));
if (1 != tmp18) goto goto_1;
tmpMeta[1] = omc_InteractiveUtil_setSubmodifierInElementargs(threadData, _args, _p1, _OMC_LIT64);
if (!listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta[2], _eqMod);
tmpMeta[4] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, _p, mmc_mk_some(tmpMeta[3]), _cmt, _info);
tmpMeta[1] = mmc_mk_cons(tmpMeta[4], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 10: {
modelica_integer tmp19;
modelica_boolean tmp20;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_1);
tmpMeta[4] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp19 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,1) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (optionNone(tmpMeta[9])) goto tmp2_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 1));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 2));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 3));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 6));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 7));
_name1 = tmpMeta[1];
_p1 = tmpMeta[2];
_f = tmp19;
_each_ = tmpMeta[6];
_p = tmpMeta[7];
_name2 = tmpMeta[8];
_args = tmpMeta[11];
_eqMod = tmpMeta[12];
_cmt = tmpMeta[13];
_info = tmpMeta[14];
_rest = tmpMeta[4];
_mod = tmp3_3;
tmp20 = (stringEqual(_name1, _name2));
if (1 != tmp20) goto goto_1;
_args_1 = omc_InteractiveUtil_setSubmodifierInElementargs(threadData, _args, _p1, _mod);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _args_1, _eqMod);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, _p, mmc_mk_some(tmpMeta[2]), _cmt, _info);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 11: {
modelica_integer tmp21;
modelica_boolean tmp22;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp21 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[6])) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 1));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
_f = tmp21;
_each_ = tmpMeta[4];
_p1 = tmpMeta[5];
_cmt = tmpMeta[8];
_info = tmpMeta[9];
_rest = tmpMeta[2];
_p2 = tmp3_2;
_mod = tmp3_3;
tmp22 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp22) goto goto_1;
tmpMeta[2] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _each_, _p1, mmc_mk_some(_mod), _cmt, _info);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 12: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_m = tmpMeta[1];
_rest = tmpMeta[2];
_p = tmp3_2;
_mod = tmp3_3;
_res = omc_InteractiveUtil_setSubmodifierInElementargs(threadData, _rest, _p, _mod);
tmpMeta[1] = mmc_mk_cons(_m, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 13: {
fputs(MMC_STRINGDATA(_OMC_LIT66),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 14) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementArgLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementArgLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInClass(threadData_t *threadData, modelica_metatype _inElementName, modelica_metatype _inClass, modelica_metatype _inMod)
{
modelica_metatype _outClass = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _optMod = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _body = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_cls = _inClass;
{
modelica_metatype tmp3_1;
tmp3_1 = _cls;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_body = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 7)));
{
modelica_metatype tmp7_1;
tmp7_1 = _body;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 1; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,1,4) == 0) goto tmp6_end;
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), _OMC_LIT35);
tmpMeta[3] = omc_InteractiveUtil_propagateMod(threadData, omc_AbsynUtil_crefToPath(threadData, _inElementName), _inMod, mmc_mk_some(tmpMeta[2]));
if (optionNone(tmpMeta[3])) goto goto_5;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
_mod = tmpMeta[4];
{
modelica_metatype tmp11_1;
tmp11_1 = _mod;
{
volatile mmc_switch_type tmp11;
int tmp12;
tmp11 = 0;
for (; tmp11 < 1; tmp11++) {
switch (MMC_SWITCH_CAST(tmp11)) {
case 0: {
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_mod), 2)));
goto tmp10_done;
}
}
goto tmp10_end;
tmp10_end: ;
}
goto goto_9;
goto_9:;
goto goto_5;
goto tmp10_done;
tmp10_done:;
}
}
tmpMeta[2] = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta[2]), MMC_UNTAGPTR(_body), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[2]))[4] = tmpMeta[3];
_body = tmpMeta[2];
tmpMeta[1] = _body;
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
_body = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(9));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_cls), 9*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[7] = _body;
_cls = tmpMeta[1];
tmpMeta[0] = _cls;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElementSpec(threadData_t *threadData, modelica_metatype _inElementName, modelica_metatype _inElSpec, modelica_metatype _inMod)
{
modelica_metatype _outElSpec = NULL;
modelica_metatype _elSpec = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_elSpec = _inElSpec;
{
modelica_metatype tmp3_1;
tmp3_1 = _elSpec;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_elSpec), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[3] = omc_InteractiveUtil_setSubmodifierInClass(threadData, _inElementName, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elSpec), 3))), _inMod);
_elSpec = tmpMeta[1];
tmpMeta[0] = _elSpec;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_boolean _inFound, modelica_metatype _inElementName, modelica_metatype _inMod, modelica_boolean *out_outFound, modelica_boolean *out_outContinue)
{
jmp_buf *old_mmc_jumper = threadData->mmc_jumper;
modelica_metatype _outElement = NULL;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _args_old = NULL;
modelica_metatype _args_new = NULL;
modelica_metatype _eqmod_old = NULL;
modelica_metatype _eqmod_new = NULL;
modelica_string _el_id = NULL;
modelica_string _id = NULL;
modelica_metatype _el = NULL;
modelica_metatype _elSpec = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outElement = _inElement;
_id = _OMC_LIT9;
_el = _inElement;
_el_id = omc_AbsynUtil_crefFirstIdent(threadData, _inElementName);
_elSpec = omc_AbsynUtil_elementSpec(threadData, _inElement);
if(omc_AbsynUtil_isClassOrComponentElementSpec(threadData, _elSpec))
{
_id = omc_AbsynUtil_elementSpecName(threadData, _elSpec);
}
else
{
_outFound = 0;
_outContinue = 1;
goto _return;
}
if((stringEqual(_el_id, _id)))
{
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
{
modelica_metatype tmp7_1;
tmp7_1 = _el;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 1; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,6) == 0) goto tmp6_end;
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_el), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[5] = omc_InteractiveUtil_setSubmodifierInElementSpec(threadData, _inElementName, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 5))), _inMod);
_el = tmpMeta[1];
tmpMeta[0] = _el;
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
_outElement = tmpMeta[0];
_outFound = 1;
_outContinue = 0;
goto tmp2_done;
}
case 1: {
_outFound = 0;
_outContinue = 1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
}
else
{
_outFound = 0;
_outContinue = 1;
}
_return: OMC_LABEL_UNUSED
if (out_outFound) { *out_outFound = _outFound; }
if (out_outContinue) { *out_outContinue = _outContinue; }
threadData->mmc_jumper = old_mmc_jumper;
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inFound, modelica_metatype _inElementName, modelica_metatype _inMod, modelica_metatype *out_outFound, modelica_metatype *out_outContinue)
{
modelica_integer tmp1;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _outElement = NULL;
tmp1 = mmc_unbox_integer(_inFound);
_outElement = omc_InteractiveUtil_setSubmodifierInElement(threadData, _inElement, tmp1, _inElementName, _inMod, &_outFound, &_outContinue);
if (out_outFound) { *out_outFound = mmc_mk_icon(_outFound); }
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outElement;
}
static modelica_metatype closure0_InteractiveUtil_setSubmodifierInElement(threadData_t *thData, modelica_metatype closure, modelica_metatype inElement, modelica_metatype inFound, modelica_metatype tmp6, modelica_metatype tmp7)
{
modelica_metatype inElementName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype inMod = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_setSubmodifierInElement(thData, inElement, inFound, inElementName, inMod, tmp6, tmp7);
}static modelica_metatype closure1_InteractiveUtil_setComponentSubmodifierInCompitems(threadData_t *thData, modelica_metatype closure, modelica_metatype inComponents, modelica_metatype inFound, modelica_metatype tmp9, modelica_metatype tmp10)
{
modelica_metatype inComponentName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype inMod = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_setComponentSubmodifierInCompitems(thData, inComponents, inFound, inComponentName, inMod, tmp9, tmp10);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementSubmodifierInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementName, modelica_metatype _inMod)
{
modelica_metatype _outClass = NULL;
modelica_boolean _found;
modelica_integer tmp8;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
_found = 0;
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
tmpMeta[1] = mmc_mk_box2(0, _inElementName, _inMod);
tmpMeta[2] = omc_AbsynUtil_traverseClassElements(threadData, _inClass, (modelica_fnptr) mmc_mk_box2(0,closure0_InteractiveUtil_setSubmodifierInElement,tmpMeta[1]), mmc_mk_boolean(0), &tmpMeta[0]);
_outClass = tmpMeta[2];
tmp5 = mmc_unbox_integer(tmpMeta[0]);
_found = tmp5;
goto tmp2_done;
}
case 1: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
if((!_found))
{
tmpMeta[1] = mmc_mk_box2(0, _inElementName, _inMod);
tmpMeta[2] = omc_AbsynUtil_traverseClassComponents(threadData, _inClass, (modelica_fnptr) mmc_mk_box2(0,closure1_InteractiveUtil_setComponentSubmodifierInCompitems,tmpMeta[1]), mmc_mk_boolean(0), &tmpMeta[0]);
_outClass = tmpMeta[2];
tmp8 = mmc_unbox_integer(tmpMeta[0]);
if (1 != tmp8) MMC_THROW_INTERNAL();
}
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_setElementModifier(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementName, modelica_metatype _inMod, modelica_metatype _inProgram, modelica_string *out_outResult)
{
modelica_metatype _outProgram = NULL;
modelica_string _outResult = NULL;
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cls = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_p_class = omc_AbsynUtil_crefToPath(threadData, _inClass);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _inProgram, 0);
_cls = omc_InteractiveUtil_setElementSubmodifierInClass(threadData, _cls, _inElementName, _inMod);
tmpMeta[0] = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[0], _within_);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[1], _inProgram, 0);
_outResult = _OMC_LIT67;
goto tmp2_done;
}
case 1: {
_outProgram = _inProgram;
_outResult = _OMC_LIT52;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outResult) { *out_outResult = _outResult; }
return _outProgram;
}
DLLExport
modelica_metatype omc_InteractiveUtil_removeElementModifiers(threadData_t *threadData, modelica_metatype _path, modelica_string _inComponentName, modelica_metatype _inProgram, modelica_boolean _keepRedeclares, modelica_boolean *out_outResult)
{
modelica_metatype _outProgram = NULL;
modelica_boolean _outResult;
modelica_metatype _within_ = NULL;
modelica_metatype _cls = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_within_ = omc_InteractiveUtil_buildWithin(threadData, _path);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
_cls = omc_InteractiveUtil_clearComponentModifiersInClass(threadData, _cls, _inComponentName, _keepRedeclares);
tmpMeta[0] = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[0], _within_);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[1], _inProgram, 0);
_outResult = 1;
goto tmp2_done;
}
case 1: {
_outProgram = _inProgram;
_outResult = 0;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outResult) { *out_outResult = _outResult; }
return _outProgram;
}
modelica_metatype boxptr_InteractiveUtil_removeElementModifiers(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inComponentName, modelica_metatype _inProgram, modelica_metatype _keepRedeclares, modelica_metatype *out_outResult)
{
modelica_integer tmp1;
modelica_boolean _outResult;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outProgram = omc_InteractiveUtil_removeElementModifiers(threadData, _path, _inComponentName, _inProgram, tmp1, &_outResult);
if (out_outResult) { *out_outResult = mmc_mk_icon(_outResult); }
return _outProgram;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getApiFunctionNamedArgs(threadData_t *threadData, modelica_metatype _inStmt)
{
modelica_metatype _outArgs = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inStmt;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],11,3) == 0) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
_outArgs = tmpMeta[3];
_return: OMC_LABEL_UNUSED
return _outArgs;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getTypeOfVariable(threadData_t *threadData, modelica_string _inIdent, modelica_metatype _inVariableLst)
{
modelica_metatype _outType = NULL;
modelica_string _id = NULL;
modelica_metatype _tp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype _var;
for (tmpMeta[0] = _inVariableLst; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_var = MMC_CAR(tmpMeta[0]);
tmpMeta[1] = _var;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_id = tmpMeta[2];
_tp = tmpMeta[3];
if((stringEqual(_inIdent, _id)))
{
_outType = _tp;
goto _return;
}
}
}
MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
return _outType;
}
DLLExport
modelica_boolean omc_InteractiveUtil_astContainsEncryptedClass(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_boolean _containsEncryptedClass;
modelica_metatype _classes = NULL;
modelica_metatype _p = NULL;
modelica_string _fileName = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_containsEncryptedClass = 0;
{
modelica_metatype tmp3_1;
tmp3_1 = _inProgram;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_p = tmp3_1;
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2)));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_classes = tmpMeta[0];
{
modelica_metatype _c;
for (tmpMeta[0] = _classes; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_c = MMC_CAR(tmpMeta[0]);
tmpMeta[1] = _c;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 8));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_fileName = tmpMeta[3];
_containsEncryptedClass = (_containsEncryptedClass || omc_Util_endsWith(threadData, _fileName, _OMC_LIT68));
if(_containsEncryptedClass)
{
break;
}
}
}
_return: OMC_LABEL_UNUSED
return _containsEncryptedClass;
}
modelica_metatype boxptr_InteractiveUtil_astContainsEncryptedClass(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_boolean _containsEncryptedClass;
modelica_metatype out_containsEncryptedClass;
_containsEncryptedClass = omc_InteractiveUtil_astContainsEncryptedClass(threadData, _inProgram);
out_containsEncryptedClass = mmc_mk_icon(_containsEncryptedClass);
return out_containsEncryptedClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_checkAccessAnnotationAndEncryption(threadData_t *threadData, modelica_metatype _path, modelica_metatype _p)
{
modelica_metatype _val = NULL;
modelica_string _access = NULL;
modelica_string _fileName = NULL;
modelica_boolean _encryptedClass;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 8));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_fileName = tmpMeta[2];
_encryptedClass = omc_Util_endsWith(threadData, _fileName, _OMC_LIT68);
if(_encryptedClass)
{
_access = omc_InteractiveUtil_getAccessAnnotation(threadData, _path, _p);
if((stringEqual(_access, _OMC_LIT122)))
{
_val = _OMC_LIT121;
}
else
{
if((stringEqual(_access, _OMC_LIT116)))
{
_val = _OMC_LIT115;
}
else
{
if((stringEqual(_access, _OMC_LIT110)))
{
_val = _OMC_LIT79;
}
else
{
if((stringEqual(_access, _OMC_LIT109)))
{
_val = _OMC_LIT108;
}
else
{
if((stringEqual(_access, _OMC_LIT103)))
{
_val = _OMC_LIT102;
}
else
{
if((stringEqual(_access, _OMC_LIT97)))
{
_val = _OMC_LIT96;
}
else
{
if((stringEqual(_access, _OMC_LIT91)))
{
_val = _OMC_LIT90;
}
else
{
if((stringEqual(_access, _OMC_LIT85)))
{
_val = _OMC_LIT84;
}
else
{
if((!omc_AbsynUtil_pathIsIdent(threadData, _path)))
{
_val = omc_InteractiveUtil_checkAccessAnnotationAndEncryption(threadData, omc_AbsynUtil_stripLast(threadData, _path), _p);
}
else
{
_val = _OMC_LIT79;
}
}
}
}
}
}
}
}
}
}
else
{
_val = _OMC_LIT74;
}
goto tmp2_done;
}
case 1: {
_val = _OMC_LIT74;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _val;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_expToString(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_string _outExp = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_str = tmpMeta[0];
tmp1 = _str;
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmp1;
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getFeaturesAnnotationList2(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_metatype _features = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _eltArgs;
{
modelica_metatype _expList = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (8 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT123), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,2) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],13,1) == 0) goto tmp2_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
_expList = tmpMeta[9];
tmpMeta[0] = omc_List_map(threadData, _expList, boxvar_InteractiveUtil_expToString);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
_eltArgs = _xs;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_features = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _features;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getFeaturesAnnotationList(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _features = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _mod;
{
modelica_metatype _arglst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_arglst = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getFeaturesAnnotationList2(threadData, _arglst);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_features = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _features;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getFeaturesAnnotation(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_metatype _features = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT125, _OMC_LIT126, boxvar_InteractiveUtil_getFeaturesAnnotationList);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_features = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _features;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLicenseAnnotationLicenseFile(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_string _licenseFile = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _xs = NULL;
modelica_string _s = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (11 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT127), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],3,1) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
_s = tmpMeta[8];
tmp1 = _s;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
_eltArgs = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_licenseFile = tmp1;
_return: OMC_LABEL_UNUSED
return _licenseFile;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getLicenseAnnotationLibraryKey(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_string _libraryKey = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _xs = NULL;
modelica_string _s = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (10 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT128), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],3,1) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
_s = tmpMeta[8];
tmp1 = _s;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
_eltArgs = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_libraryKey = tmp1;
_return: OMC_LABEL_UNUSED
return _libraryKey;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getLicenseAnnotationTuple(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _license = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _mod;
{
modelica_metatype _arglst = NULL;
modelica_string _libraryKey = NULL;
modelica_string _licenseFile = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_arglst = tmpMeta[2];
_libraryKey = omc_InteractiveUtil_getLicenseAnnotationLibraryKey(threadData, _arglst);
_licenseFile = omc_InteractiveUtil_getLicenseAnnotationLicenseFile(threadData, _arglst);
tmpMeta[1] = mmc_mk_box2(0, _libraryKey, _licenseFile);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_license = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _license;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getLicenseAnnotationWork2(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_metatype _license = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _eltArgs;
{
modelica_metatype _mod = NULL;
modelica_metatype _xs = NULL;
modelica_string _libraryKey = NULL;
modelica_string _licenseFile = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _OMC_LIT129;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (7 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT130), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_mod = tmpMeta[5];
tmpMeta[1] = omc_InteractiveUtil_getLicenseAnnotationTuple(threadData, _mod);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_libraryKey = tmpMeta[2];
_licenseFile = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _libraryKey, _licenseFile);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
tmpMeta[1] = omc_InteractiveUtil_getLicenseAnnotationWork2(threadData, _xs);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_libraryKey = tmpMeta[2];
_licenseFile = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _libraryKey, _licenseFile);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_license = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _license;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getLicenseAnnotationWork1(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _license = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _mod;
{
modelica_metatype _arglst = NULL;
modelica_string _libraryKey = NULL;
modelica_string _licenseFile = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_arglst = tmpMeta[2];
tmpMeta[1] = omc_InteractiveUtil_getLicenseAnnotationWork2(threadData, _arglst);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_libraryKey = tmpMeta[2];
_licenseFile = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _libraryKey, _licenseFile);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_license = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _license;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getLicenseAnnotation(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_metatype _license = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT125, _OMC_LIT131, boxvar_InteractiveUtil_getLicenseAnnotationWork1);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _OMC_LIT129;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_license = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _license;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAccessAnnotationString2(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_string _access = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _xs = NULL;
modelica_metatype _cref = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (6 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT132), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],2,1) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
_cref = tmpMeta[8];
tmp1 = omc_Dump_printComponentRefStr(threadData, _cref);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
_eltArgs = _xs;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_access = tmp1;
_return: OMC_LABEL_UNUSED
return _access;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAccessAnnotationString(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _access = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _arglst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_arglst = tmpMeta[1];
tmp1 = omc_InteractiveUtil_getAccessAnnotationString2(threadData, _arglst);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_access = tmp1;
_return: OMC_LABEL_UNUSED
return _access;
}
DLLExport
modelica_string omc_InteractiveUtil_getAccessAnnotation(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_string _access = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmp1 = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT125, _OMC_LIT133, boxvar_InteractiveUtil_getAccessAnnotationString);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_access = tmp1;
_return: OMC_LABEL_UNUSED
return _access;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getInstantiatedParametersAndValues(threadData_t *threadData, modelica_metatype _odae)
{
modelica_metatype _parametersAndValues = NULL;
modelica_metatype _els = NULL;
modelica_metatype _params = NULL;
modelica_metatype _strs = NULL;
modelica_string _s = NULL;
modelica_metatype _oe = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_parametersAndValues = tmpMeta[0];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_strs = tmpMeta[1];
{
modelica_metatype tmp3_1;
tmp3_1 = _odae;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_els = tmpMeta[4];
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_params = omc_DAEUtil_getParameters(threadData, _els, tmpMeta[3]);
{
modelica_metatype _p;
for (tmpMeta[3] = _params; !listEmpty(tmpMeta[3]); tmpMeta[3]=MMC_CDR(tmpMeta[3]))
{
_p = MMC_CAR(tmpMeta[3]);
tmpMeta[4] = _p;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,13) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 8));
_oe = tmpMeta[5];
tmpMeta[4] = stringAppend(omc_DAEUtil_varName(threadData, _p),omc_DAEDump_dumpVarBindingStr(threadData, _oe));
_s = tmpMeta[4];
tmpMeta[4] = mmc_mk_cons(_s, _strs);
_strs = tmpMeta[4];
}
}
tmpMeta[2] = listReverse(_strs);
goto tmp2_done;
}
case 1: {
tmpMeta[2] = _strs;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_parametersAndValues = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _parametersAndValues;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_excludeElementsFromFile(threadData_t *threadData, modelica_string _inFile, modelica_metatype _inEls)
{
modelica_metatype _outEls = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inFile;
tmp3_2 = _inEls;
{
modelica_metatype _e = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _filtered = NULL;
modelica_string _f = NULL;
modelica_string _file = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp3;
int tmp4;
_b = 0;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_e = tmpMeta[1];
_f = tmpMeta[5];
_rest = tmpMeta[2];
_file = tmp3_1;
_b = (stringEqual(_file, _f));
_filtered = omc_InteractiveUtil_excludeElementsFromFile(threadData, _file, _rest);
tmp5 = (modelica_boolean)(!_b);
if(tmp5)
{
tmpMeta[1] = mmc_mk_cons(_e, _filtered);
tmpMeta[2] = tmpMeta[1];
}
else
{
tmpMeta[2] = _filtered;
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
_rest = tmpMeta[2];
_file = tmp3_1;
_inFile = _file;
_inEls = _rest;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outEls = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEls;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeElements(threadData_t *threadData, modelica_metatype _inEls1, modelica_metatype _inEls2)
{
modelica_metatype _outEls = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inEls1;
tmp3_2 = _inEls2;
{
modelica_metatype _rest = NULL;
modelica_metatype _merged = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _inEls2;
goto tmp2_done;
}
case 1: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmp3 += 1;
tmpMeta[0] = _inEls1;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
_e2 = tmpMeta[1];
_rest = tmpMeta[2];
_merged = omc_InteractiveUtil_mergeElement(threadData, _inEls1, _e2);
tmpMeta[0] = omc_InteractiveUtil_mergeElements(threadData, _merged, _rest);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outEls = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEls;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeElement(threadData_t *threadData, modelica_metatype _inEls, modelica_metatype _inEl)
{
modelica_metatype _outEls = NULL;
modelica_metatype tmpMeta[17] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inEls;
tmp3_2 = _inEl;
{
modelica_string _n1 = NULL;
modelica_string _n2 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _filtered = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_boolean _r;
modelica_boolean _f;
modelica_metatype _redecl = NULL;
modelica_metatype _innout = NULL;
modelica_metatype _i = NULL;
modelica_metatype _cc = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = mmc_mk_cons(_inEl, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmp3_1);
tmpMeta[6] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,1) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,6) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[8]);
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[11],0,2) == 0) goto tmp2_end;
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[12]);
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 3));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[13]), 2));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 7));
_c2 = tmpMeta[3];
_n2 = tmpMeta[4];
_f = tmp5;
_redecl = tmpMeta[9];
_innout = tmpMeta[10];
_r = tmp6;
_c1 = tmpMeta[13];
_n1 = tmpMeta[14];
_i = tmpMeta[15];
_cc = tmpMeta[16];
_rest = tmpMeta[6];
tmp7 = (stringEqual(_n1, _n2));
if (1 != tmp7) goto goto_1;
_c1 = omc_InteractiveUtil_mergeClasses(threadData, _c1, _c2);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(_r), _c1);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _redecl, _innout, tmpMeta[2], _i, _cc);
tmpMeta[4] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta[3]);
tmpMeta[1] = mmc_mk_cons(tmpMeta[4], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_e1 = tmpMeta[1];
_rest = tmpMeta[2];
_e2 = tmp3_2;
_filtered = omc_InteractiveUtil_mergeElement(threadData, _rest, _e2);
tmpMeta[1] = mmc_mk_cons(_e1, _filtered);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outEls = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEls;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeClasses(threadData_t *threadData, modelica_metatype _cNew, modelica_metatype _cOld)
{
modelica_metatype _c = NULL;
modelica_metatype tmpMeta[17] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _cNew;
tmp3_2 = _cOld;
{
modelica_metatype _partsC1 = NULL;
modelica_metatype _partsC2 = NULL;
modelica_metatype _pubElementsC1 = NULL;
modelica_metatype _pubElementsC2 = NULL;
modelica_string _file = NULL;
modelica_string _n = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _i = NULL;
modelica_metatype _typeVars1 = NULL;
modelica_metatype _classAttrs1 = NULL;
modelica_metatype _ann1 = NULL;
modelica_metatype _cmt1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmp3 += 1;
tmpMeta[0] = _cNew;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmp3 += 1;
tmpMeta[0] = _cNew;
goto tmp2_done;
}
case 2: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[13],0,5) == 0) goto tmp2_end;
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[13]), 4));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[15]), 2));
_n = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars1 = tmpMeta[7];
_classAttrs1 = tmpMeta[8];
_partsC1 = tmpMeta[9];
_ann1 = tmpMeta[10];
_cmt1 = tmpMeta[11];
_i = tmpMeta[12];
_partsC2 = tmpMeta[14];
_file = tmpMeta[16];
_pubElementsC2 = omc_InteractiveUtil_getPublicList(threadData, _partsC2);
_pubElementsC2 = omc_InteractiveUtil_excludeElementsFromFile(threadData, _file, _pubElementsC2);
_pubElementsC1 = omc_InteractiveUtil_getPublicList(threadData, _partsC1);
_pubElementsC1 = omc_InteractiveUtil_mergeElements(threadData, _pubElementsC1, _pubElementsC2);
_partsC1 = omc_InteractiveUtil_replacePublicList(threadData, _partsC1, _pubElementsC1);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars1, _classAttrs1, _partsC1, _ann1, _cmt1);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _n, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _i);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _cNew;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_c = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _c;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentDimensionsInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inFound, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_boolean *out_outFound, modelica_boolean *out_outContinue)
{
modelica_metatype _outComponents = NULL;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _item = NULL;
modelica_metatype _rest_items = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _args_old = NULL;
modelica_metatype _args_new = NULL;
modelica_metatype _eqmod_old = NULL;
modelica_metatype _eqmod_new = NULL;
modelica_string _comp_id = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outComponents = tmpMeta[0];
_rest_items = _inComponents;
_comp_id = omc_AbsynUtil_crefFirstIdent(threadData, _inComponentName);
while(1)
{
if(!(!listEmpty(_rest_items))) break;
tmpMeta[1] = _rest_items;
if (listEmpty(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_item = tmpMeta[2];
_rest_items = tmpMeta[3];
if((stringEqual(omc_AbsynUtil_componentName(threadData, _item), _comp_id)))
{
{
modelica_metatype tmp3_1;
tmp3_1 = _item;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_comp = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_comp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[3] = omc_List_map(threadData, _inDimensions, boxvar_AbsynUtil_makeSubscript);
_comp = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_item), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = _comp;
_item = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
tmpMeta[1] = mmc_mk_cons(_item, _rest_items);
_outComponents = omc_List_append__reverse(threadData, _outComponents, tmpMeta[1]);
_outFound = 1;
_outContinue = 0;
goto _return;
}
tmpMeta[1] = mmc_mk_cons(_item, _outComponents);
_outComponents = tmpMeta[1];
}
_outComponents = _inComponents;
_outFound = 0;
_outContinue = 1;
_return: OMC_LABEL_UNUSED
if (out_outFound) { *out_outFound = _outFound; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentDimensionsInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inFound, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_metatype *out_outFound, modelica_metatype *out_outContinue)
{
modelica_integer tmp1;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
tmp1 = mmc_unbox_integer(_inFound);
_outComponents = omc_InteractiveUtil_setComponentDimensionsInCompitems(threadData, _inComponents, tmp1, _inComponentName, _inDimensions, &_outFound, &_outContinue);
if (out_outFound) { *out_outFound = mmc_mk_icon(_outFound); }
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outComponents;
}
static modelica_metatype closure2_InteractiveUtil_setComponentDimensionsInCompitems(threadData_t *thData, modelica_metatype closure, modelica_metatype inComponents, modelica_metatype inFound, modelica_metatype tmp2, modelica_metatype tmp3)
{
modelica_metatype inComponentName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype inDimensions = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_setComponentDimensionsInCompitems(thData, inComponents, inFound, inComponentName, inDimensions, tmp2, tmp3);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentDimensionsInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _inDimensions)
{
modelica_metatype _outClass = NULL;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
tmpMeta[1] = mmc_mk_box2(0, _inComponentName, _inDimensions);
tmpMeta[2] = omc_AbsynUtil_traverseClassComponents(threadData, _inClass, (modelica_fnptr) mmc_mk_box2(0,closure2_InteractiveUtil_setComponentDimensionsInCompitems,tmpMeta[1]), mmc_mk_boolean(0), &tmpMeta[0]);
_outClass = tmpMeta[2];
tmp1 = mmc_unbox_integer(tmpMeta[0]);
if (1 != tmp1) MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_setComponentDimensions(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _inDimensions, modelica_metatype _inProgram, modelica_string *out_outResult)
{
modelica_metatype _outProgram = NULL;
modelica_string _outResult = NULL;
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cls = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_p_class = omc_AbsynUtil_crefToPath(threadData, _inClass);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _inProgram, 0);
_cls = omc_InteractiveUtil_setComponentDimensionsInClass(threadData, _cls, _inComponentName, _inDimensions);
tmpMeta[0] = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[0], _within_);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[1], _inProgram, 0);
_outResult = _OMC_LIT67;
goto tmp2_done;
}
case 1: {
_outProgram = _inProgram;
_outResult = _OMC_LIT52;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outResult) { *out_outResult = _outResult; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassEnvNoElaboration(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inClassPath, modelica_metatype _inEnv)
{
modelica_metatype _outEnv = NULL;
modelica_metatype _cl = NULL;
modelica_string _id = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _env = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _cache = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[5] = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _inEnv, _inClassPath, mmc_mk_none(), &tmpMeta[0], &tmpMeta[4]);
_cache = tmpMeta[5];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,8) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
_cl = tmpMeta[0];
_id = tmpMeta[1];
_encflag = tmpMeta[2];
_restr = tmpMeta[3];
_env = tmpMeta[4];
_env = omc_FGraph_openScope(threadData, _env, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env));
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, _cache, _env, tmpMeta[0], _OMC_LIT50, _OMC_LIT33, _ci_state, _cl, _OMC_LIT59, tmpMeta[1], ((modelica_integer) 0) ,&_outEnv, NULL, NULL, NULL);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_instClassIn(threadData, _cache, _env, tmpMeta[0], _OMC_LIT41, _OMC_LIT50, _OMC_LIT33, _ci_state, _cl, _OMC_LIT59, tmpMeta[1], 0, _OMC_LIT134, _OMC_LIT43, _OMC_LIT46, mmc_mk_none() ,&_outEnv, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outEnv;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassNameFromExtends(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_metatype _outBaseClassPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inElementSpec;
{
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
tmpMeta[0] = _path;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outBaseClassPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outBaseClassPath;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getAllInheritedClasses(threadData_t *threadData, modelica_metatype _inClassName, modelica_metatype _inProgram)
{
modelica_metatype _outBaseClassNames = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inClassName;
tmp3_2 = _inProgram;
{
modelica_metatype _p_class = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _exts = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_p_class = tmp3_1;
_p = tmp3_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_exts = omc_InteractiveUtil_getExtendsElementspecInClass(threadData, _cdef);
tmpMeta[0] = omc_List_map(threadData, _exts, boxvar_InteractiveUtil_getBaseClassNameFromExtends);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outBaseClassNames = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outBaseClassNames;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAllClassesInClass(threadData_t *threadData, modelica_metatype _class_)
{
modelica_metatype _outClasses = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _class_;
{
modelica_metatype _classParts = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_classParts = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getClassesInParts(threadData, _classParts);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outClasses = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClasses;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getFunctionsInClasses(threadData_t *threadData, modelica_metatype _classes, modelica_metatype _acc)
{
modelica_metatype _funcs = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _classes;
{
modelica_metatype _cl = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _acc;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],9,1) == 0) goto tmp2_end;
_cl = tmpMeta[1];
_rest = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_cl, _acc);
_classes = _rest;
_acc = tmpMeta[1];
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
_classes = _rest;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_funcs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _funcs;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getFunctionsInProgram(threadData_t *threadData, modelica_metatype _prog)
{
modelica_metatype _funcs = NULL;
modelica_metatype _classes = NULL;
modelica_metatype _classesList = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _prog;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_classes = tmpMeta[1];
_classesList = omc_List_map(threadData, _classes, boxvar_InteractiveUtil_getAllClassesInClass);
tmpMeta[0] = mmc_mk_cons(_classes, _classesList);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_funcs = omc_List_fold(threadData, tmpMeta[0], boxvar_InteractiveUtil_getFunctionsInClasses, tmpMeta[1]);
_return: OMC_LABEL_UNUSED
return _funcs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentElementInClass(threadData_t *threadData, modelica_metatype _cl, modelica_string _compName)
{
modelica_metatype _comp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _cl;
{
modelica_metatype _parts = NULL;
modelica_metatype _publst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _compName, tmpMeta[1]);
tmpMeta[0] = omc_InteractiveUtil_getComponentsContainsName(threadData, tmpMeta[2], _publst);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _compName, tmpMeta[1]);
tmpMeta[0] = omc_InteractiveUtil_getComponentsContainsName(threadData, tmpMeta[2], _publst);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_comp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _comp;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPathedComponentElementInProgram(threadData_t *threadData, modelica_metatype _path, modelica_metatype _prg)
{
modelica_metatype _comp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _cl = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_cl = omc_InteractiveUtil_getPathedClassInProgram(threadData, omc_AbsynUtil_stripLast(threadData, _path), _prg, 0);
tmpMeta[0] = omc_InteractiveUtil_getComponentElementInClass(threadData, _cl, omc_AbsynUtil_pathLastIdent(threadData, _path));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_comp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _comp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getSCodeClassNamesRecursiveWork(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inAcc)
{
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inElement;
tmp3_2 = _inPath;
tmp3_3 = _inAcc;
{
modelica_metatype _classes = NULL;
modelica_metatype _acc = NULL;
modelica_metatype _path = NULL;
modelica_string _name = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!optionNone(tmp3_2)) goto tmp2_end;
_name = tmpMeta[1];
_acc = tmp3_3;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
_path = tmpMeta[1];
tmpMeta[1] = mmc_mk_cons(_path, _acc);
_acc = tmpMeta[1];
_classes = omc_SCodeUtil_getClassElements(threadData, _inElement);
tmpMeta[0] = omc_List_fold1(threadData, _classes, boxvar_InteractiveUtil_getSCodeClassNamesRecursiveWork, mmc_mk_some(_path), _acc);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
_name = tmpMeta[1];
_path = tmpMeta[2];
_acc = tmp3_3;
_path = omc_AbsynUtil_suffixPath(threadData, _path, _name);
tmpMeta[1] = mmc_mk_cons(_path, _acc);
_acc = tmpMeta[1];
_classes = omc_SCodeUtil_getClassElements(threadData, _inElement);
tmpMeta[0] = omc_List_fold1(threadData, _classes, boxvar_InteractiveUtil_getSCodeClassNamesRecursiveWork, mmc_mk_some(_path), _acc);
goto tmp2_done;
}
case 2: {
tmpMeta[0] = _inAcc;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_paths = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _paths;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getSCodeClassNamesRecursive(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_paths = omc_List_fold1(threadData, _inProgram, boxvar_InteractiveUtil_getSCodeClassNamesRecursiveWork, mmc_mk_none(), tmpMeta[0]);
_return: OMC_LABEL_UNUSED
return _paths;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassNamesRecursive(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _inShowProtected, modelica_boolean _includeConstants, modelica_metatype _inAcc, modelica_metatype *out_paths)
{
modelica_metatype _opath = NULL;
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
tmp4_3 = _inShowProtected;
tmp4_4 = _includeConstants;
tmp4_5 = _inAcc;
{
modelica_metatype _cdef = NULL;
modelica_string _s1 = NULL;
modelica_metatype _strlst = NULL;
modelica_metatype _pp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _classes = NULL;
modelica_metatype _result_path_lst = NULL;
modelica_metatype _acc = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_pp = tmpMeta[2];
_p = tmp4_2;
_b = tmp4_3;
_c = tmp4_4;
_acc = tmp4_5;
tmp4 += 1;
tmpMeta[2] = mmc_mk_cons(_pp, _acc);
_acc = tmpMeta[2];
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _pp, _p, 0);
_strlst = omc_InteractiveUtil_getClassnamesInClassList(threadData, _pp, _p, _cdef, _b, _c);
_result_path_lst = omc_List_map(threadData, omc_List_map1(threadData, _strlst, boxvar_InteractiveUtil_joinPaths, _pp), boxvar_Util_makeOption);
omc_List_map3Fold(threadData, _result_path_lst, boxvar_InteractiveUtil_getClassNamesRecursive, _p, mmc_mk_boolean(_b), mmc_mk_boolean(_c), _acc ,&_acc);
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = _acc;
goto tmp3_done;
}
case 1: {
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p = tmp4_2;
_classes = tmpMeta[2];
_b = tmp4_3;
_c = tmp4_4;
_acc = tmp4_5;
tmp4 += 1;
_strlst = omc_List_map(threadData, _classes, boxvar_AbsynUtil_getClassName);
_result_path_lst = omc_List_mapMap(threadData, _strlst, boxvar_AbsynUtil_makeIdentPathFromString, boxvar_Util_makeOption);
omc_List_map3Fold(threadData, _result_path_lst, boxvar_InteractiveUtil_getClassNamesRecursive, _p, mmc_mk_boolean(_b), mmc_mk_boolean(_c), _acc ,&_acc);
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = _acc;
goto tmp3_done;
}
case 2: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_pp = tmpMeta[2];
_s1 = omc_AbsynUtil_pathString(threadData, _pp, _OMC_LIT0, 1, 0);
tmpMeta[2] = mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT6, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addMessage(threadData, _OMC_LIT5, tmpMeta[2]);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _inPath;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_opath = tmpMeta[0+0];
_paths = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_paths) { *out_paths = _paths; }
return _opath;
}
modelica_metatype boxptr_InteractiveUtil_getClassNamesRecursive(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inShowProtected, modelica_metatype _includeConstants, modelica_metatype _inAcc, modelica_metatype *out_paths)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _opath = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_opath = omc_InteractiveUtil_getClassNamesRecursive(threadData, _inPath, _inProgram, tmp1, tmp2, _inAcc, out_paths);
return _opath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinPaths(threadData_t *threadData, modelica_string _child, modelica_metatype _parent)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _child;
tmp3_2 = _parent;
{
modelica_metatype _r = NULL;
modelica_string _c = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_c = tmp3_1;
_r = tmp3_2;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _c);
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _r, tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClassList(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_boolean tmp3_2;modelica_boolean tmp3_3;
tmp3_1 = _inClass;
tmp3_2 = _inShowProtected;
tmp3_3 = _includeConstants;
{
modelica_metatype _parts = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_b = tmp3_2;
_c = tmp3_3;
tmpMeta[0] = omc_InteractiveUtil_getClassnamesInParts(threadData, _parts, _b, _c);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_b = tmp3_2;
_c = tmp3_3;
tmpMeta[0] = omc_InteractiveUtil_getClassnamesInParts(threadData, _parts, _b, _c);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outString = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClassList(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outString = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_outString = omc_InteractiveUtil_getClassnamesInClassList(threadData, _inPath, _inProgram, _inClass, tmp1, tmp2);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentBindingMapable(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inProgram3)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inProgram3;
{
modelica_metatype _p_class = NULL;
modelica_string _name = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _compelts = NULL;
modelica_metatype _compelts_1 = NULL;
modelica_metatype _compitem = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cr = tmp4_1;
_class_ = tmp4_2;
_p = tmp4_3;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta[0] = omc_AbsynUtil_crefToPath(threadData, _cr);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_comps = omc_InteractiveUtil_getComponentsInClass(threadData, _cdef);
_compelts = omc_List_map(threadData, _comps, boxvar_InteractiveUtil_getComponentitemsInElement);
_compelts_1 = omc_List_flatten(threadData, _compelts);
tmpMeta[0] = omc_List_select1(threadData, _compelts_1, boxvar_InteractiveUtil_componentitemNamed, _name);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (!listEmpty(tmpMeta[2])) goto goto_2;
_compitem = tmpMeta[1];
_exp = omc_InteractiveUtil_getVariableBindingInComponentitem(threadData, _compitem);
tmp1 = omc_Dump_printExpStr(threadData, _exp);
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
_cr = tmp4_1;
_class_ = tmp4_2;
_p = tmp4_3;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta[0] = omc_AbsynUtil_crefToPath(threadData, _cr);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_comps = omc_InteractiveUtil_getComponentsInClass(threadData, _cdef);
_compelts = omc_List_map(threadData, _comps, boxvar_InteractiveUtil_getComponentitemsInElement);
_compelts_1 = omc_List_flatten(threadData, _compelts);
tmpMeta[0] = omc_List_select1(threadData, _compelts_1, boxvar_InteractiveUtil_componentitemNamed, _name);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (!listEmpty(tmpMeta[2])) goto goto_2;
_compitem = tmpMeta[1];
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_InteractiveUtil_getVariableBindingInComponentitem(threadData, _compitem);
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_2;}
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 2: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getVisElementNameFromStr(threadData_t *threadData, modelica_string _str)
{
modelica_string _outStr = NULL;
modelica_metatype _strs = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
omc_System_regex(threadData, _str, _OMC_LIT135, ((modelica_integer) 3), 1, 0, &tmpMeta[0]);
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (listEmpty(tmpMeta[2])) MMC_THROW_INTERNAL();
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_strs = tmpMeta[0];
_outStr = tmpMeta[3];
_return: OMC_LABEL_UNUSED
return _outStr;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getElementsOfVisType(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_string *out_res)
{
modelica_metatype _names = NULL;
modelica_string _res = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
{
modelica_metatype _parts = NULL;
modelica_metatype _public_elementitem_list = NULL;
modelica_metatype _protected_elementitem_list = NULL;
modelica_metatype _modelPath_ = NULL;
modelica_metatype _public_list = NULL;
modelica_metatype _protected_list = NULL;
modelica_metatype _all_list = NULL;
modelica_metatype _prog = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelPath_ = tmp4_1;
_prog = tmp4_2;
tmpMeta[2] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelPath_, _prog, 0);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,5) == 0) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
_parts = tmpMeta[4];
_public_elementitem_list = omc_InteractiveUtil_getPublicList(threadData, _parts);
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_public_list = omc_InteractiveUtil_constructVisTypesList(threadData, _public_elementitem_list, _prog);
_protected_list = omc_InteractiveUtil_constructVisTypesList(threadData, _protected_elementitem_list, _prog);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_all_list = omc_List_union(threadData, listAppend(_public_list, _protected_list), tmpMeta[2]);
tmpMeta[0+0] = omc_List_map(threadData, _all_list, boxvar_InteractiveUtil_getVisElementNameFromStr);
tmp1_c1 = stringDelimitList(_all_list, _OMC_LIT136);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_names = tmpMeta[0+0];
_res = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_res) { *out_res = _res; }
return _names;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_constructVisTypesList(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inProgram)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inAbsynElementItemLst;
tmp3_2 = _inProgram;
{
modelica_string _s1 = NULL;
modelica_metatype _res_list = NULL;
modelica_metatype _list2 = NULL;
modelica_metatype _current = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_current = tmpMeta[1];
_p = tmp3_2;
_s1 = omc_InteractiveUtil_getNameFromElementIfVisType(threadData, _current, _p);
tmpMeta[0] = omc_List_create(threadData, _s1);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_current = tmpMeta[1];
_rest = tmpMeta[2];
_p = tmp3_2;
_s1 = omc_InteractiveUtil_getNameFromElementIfVisType(threadData, _current, _p);
_res_list = omc_List_create(threadData, _s1);
_list2 = omc_InteractiveUtil_constructVisTypesList(threadData, _rest, _p);
tmpMeta[0] = omc_List_union(threadData, _list2, _res_list);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outList = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNameFromElementIfVisType(threadData_t *threadData, modelica_metatype _inElementItem, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inElementItem;
tmp4_2 = _inProgram;
{
modelica_string _typename_str = NULL;
modelica_string _varname_str = NULL;
modelica_metatype _elementSpec = NULL;
modelica_metatype _prog = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_elementSpec = tmpMeta[1];
_prog = tmp4_2;
_typename_str = omc_InteractiveUtil_getElementTypeName(threadData, _elementSpec);
_varname_str = omc_InteractiveUtil_getElementName(threadData, _elementSpec);
tmpMeta[0] = omc_Util_stringSplitAtChar(threadData, _varname_str, _OMC_LIT10);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
tmp1 = omc_InteractiveUtil_getDescIfVis(threadData, _typename_str, _inElementItem, _prog);
goto tmp3_done;
}
case 2: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDescIfVis(threadData_t *threadData, modelica_string _in_type, modelica_metatype _inElement, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _in_type;
tmp4_2 = _inElement;
tmp4_3 = _inProgram;
{
modelica_metatype _tmp = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (21 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT137), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
_tmp = tmp4_2;
_p = tmp4_3;
tmp1 = omc_InteractiveUtil_getElementVisString(threadData, _tmp, _p);
goto tmp3_done;
}
case 1: {
if (25 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT138), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
_tmp = tmp4_2;
_p = tmp4_3;
tmp1 = omc_InteractiveUtil_getElementVisString(threadData, _tmp, _p);
goto tmp3_done;
}
case 2: {
if (29 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT139), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
_tmp = tmp4_2;
_p = tmp4_3;
tmp1 = omc_InteractiveUtil_getElementVisString(threadData, _tmp, _p);
goto tmp3_done;
}
case 3: {
if (33 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT140), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
_tmp = tmp4_2;
_p = tmp4_3;
tmp1 = omc_InteractiveUtil_getElementVisString(threadData, _tmp, _p);
goto tmp3_done;
}
case 4: {
if (39 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT141), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
_tmp = tmp4_2;
_p = tmp4_3;
tmp1 = omc_InteractiveUtil_getElementVisString(threadData, _tmp, _p);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getElementVisString(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_string _desc = NULL;
modelica_metatype _el = NULL;
modelica_metatype _elementSpec = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_el = tmpMeta[0];
tmpMeta[0] = _el;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_elementSpec = tmpMeta[1];
tmpMeta[0] = _elementSpec;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,3) == 0) goto goto_2;
_desc = omc_InteractiveUtil_getElementName(threadData, _elementSpec);
tmpMeta[0] = stringAppend(_desc,_OMC_LIT142);
tmpMeta[1] = stringAppend(tmpMeta[0],omc_InteractiveUtil_getElementTypeName(threadData, _elementSpec));
tmp1 = tmpMeta[1];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementTypeName(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementSpec;
{
modelica_metatype _typeSpec = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_typeSpec = tmpMeta[0];
tmp1 = omc_Dump_unparseTypeSpec(threadData, _typeSpec);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementName(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementSpec;
{
modelica_metatype _names = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_lst = tmpMeta[0];
_names = omc_InteractiveUtil_getComponentItemsNameAndComment(threadData, _lst, 0);
tmp1 = stringDelimitList(_names, _OMC_LIT27);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_parseFile(threadData_t *threadData, modelica_string _fileName, modelica_string _encoding, modelica_boolean _updateProgramCache)
{
modelica_metatype _topClassNamesQualified = NULL;
modelica_metatype _parsed = NULL;
modelica_string _dir = NULL;
modelica_string _filename = NULL;
modelica_boolean _lveStarted;
modelica_metatype _lveInstance = NULL;
modelica_metatype _features = NULL;
modelica_string _libraryKey = NULL;
modelica_string _licenseFile = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_lveStarted = 0;
_lveInstance = mmc_mk_none();
if((!omc_System_regularFileExists(threadData, _fileName)))
{
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_topClassNamesQualified = tmpMeta[0];
goto _return;
}
_dir = omc_Util_getAbsoluteDirectoryAndFile(threadData, _fileName ,&_filename);
if((stringEqual(_filename, _OMC_LIT143)))
{
_lveStarted = omc_Parser_startLibraryVendorExecutable(threadData, _dir ,&_lveInstance);
if((!_lveStarted))
{
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_topClassNamesQualified = tmpMeta[0];
goto _return;
}
}
_parsed = omc_Parser_parse(threadData, _fileName, _encoding, _dir, _lveInstance);
_parsed = omc_MetaUtil_createMetaClassesInProgram(threadData, _parsed);
_topClassNamesQualified = omc_InteractiveUtil_getTopQualifiedClassnames(threadData, _parsed);
if(_lveStarted)
{
{
modelica_metatype _topClassNameQualified;
for (tmpMeta[0] = _topClassNamesQualified; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_topClassNameQualified = MMC_CAR(tmpMeta[0]);
_features = omc_InteractiveUtil_getFeaturesAnnotation(threadData, _topClassNameQualified, _parsed);
{
modelica_metatype _feature;
for (tmpMeta[1] = _features; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_feature = MMC_CAR(tmpMeta[1]);
omc_Parser_checkLVEToolFeature(threadData, _lveInstance, _feature);
}
}
}
}
omc_Parser_stopLibraryVendorExecutable(threadData, _lveInstance);
}
if(_updateProgramCache)
{
omc_SymbolTable_setAbsyn(threadData, omc_InteractiveUtil_updateProgram(threadData, _parsed, omc_SymbolTable_getAbsyn(threadData), 0));
}
_return: OMC_LABEL_UNUSED
return _topClassNamesQualified;
}
modelica_metatype boxptr_InteractiveUtil_parseFile(threadData_t *threadData, modelica_metatype _fileName, modelica_metatype _encoding, modelica_metatype _updateProgramCache)
{
modelica_integer tmp1;
modelica_metatype _topClassNamesQualified = NULL;
tmp1 = mmc_unbox_integer(_updateProgramCache);
_topClassNamesQualified = omc_InteractiveUtil_parseFile(threadData, _fileName, _encoding, tmp1);
return _topClassNamesQualified;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionTypeVars(threadData_t *threadData, modelica_metatype _inTypeVars, modelica_metatype _inDefinitions)
{
modelica_metatype _outDefinitions = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outDefinitions = _inDefinitions;
{
modelica_metatype _ty_var;
for (tmpMeta[0] = listReverse(_inTypeVars); !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_ty_var = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = stringAppend(_OMC_LIT144,_ty_var);
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT48);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _outDefinitions);
_outDefinitions = tmpMeta[1];
}
}
_return: OMC_LABEL_UNUSED
return _outDefinitions;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionComponents(threadData_t *threadData, modelica_string _typeStr, modelica_string _dirStr, modelica_integer _numDim, modelica_metatype _components)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _components;
{
modelica_metatype _rest = NULL;
modelica_string _ident = NULL;
modelica_metatype _l = NULL;
modelica_integer _sumDim;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
modelica_string tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_ident = tmpMeta[4];
_l = tmpMeta[5];
_rest = tmpMeta[2];
_sumDim = _numDim + listLength(_l);
tmp5 = (modelica_boolean)(_numDim == ((modelica_integer) 0));
if(tmp5)
{
tmp6 = _OMC_LIT9;
}
else
{
tmpMeta[1] = stringAppend(_OMC_LIT145,intString(_sumDim));
tmp6 = tmpMeta[1];
}
tmpMeta[2] = stringAppend(_dirStr,tmp6);
tmpMeta[3] = stringAppend(tmpMeta[2],_typeStr);
tmpMeta[4] = stringAppend(tmpMeta[3],_OMC_LIT146);
tmpMeta[5] = stringAppend(tmpMeta[4],_ident);
_ident = tmpMeta[5];
tmpMeta[1] = stringAppend(_OMC_LIT47,_ident);
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT48);
_ident = tmpMeta[2];
_res = omc_InteractiveUtil_getDefinitionComponents(threadData, _typeStr, _dirStr, _numDim, _rest);
tmpMeta[1] = mmc_mk_cons(_ident, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getDefinitionComponents(threadData, _typeStr, _dirStr, _numDim, _rest);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_res = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionComponents(threadData_t *threadData, modelica_metatype _typeStr, modelica_metatype _dirStr, modelica_metatype _numDim, modelica_metatype _components)
{
modelica_integer tmp1;
modelica_metatype _res = NULL;
tmp1 = mmc_unbox_integer(_numDim);
_res = omc_InteractiveUtil_getDefinitionComponents(threadData, _typeStr, _dirStr, tmp1, _components);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionDirString(threadData_t *threadData, modelica_metatype _dir, modelica_metatype _variability, modelica_boolean _isFunction)
{
modelica_string _res = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;
tmp4_1 = _dir;
tmp4_2 = _isFunction;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (1 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT147;
goto tmp3_done;
}
case 1: {
if (1 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT148;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp6;
if (0 != tmp4_2) goto tmp3_end;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmpMeta[0] = _variability;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,0) == 0) goto goto_7;
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_2;}
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionDirString(threadData_t *threadData, modelica_metatype _dir, modelica_metatype _variability, modelica_metatype _isFunction)
{
modelica_integer tmp1;
modelica_string _res = NULL;
tmp1 = mmc_unbox_integer(_isFunction);
_res = omc_InteractiveUtil_getDefinitionDirString(threadData, _dir, _variability, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionContent(threadData_t *threadData, modelica_metatype _contents, modelica_boolean _addFunctions, modelica_boolean _isPublic)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_boolean tmp3_2;volatile modelica_boolean tmp3_3;
tmp3_1 = _contents;
tmp3_2 = _addFunctions;
tmp3_3 = _isPublic;
{
modelica_metatype _rest = NULL;
modelica_string _ident = NULL;
modelica_string _typeStr = NULL;
modelica_string _dirStr = NULL;
modelica_string _str = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _path = NULL;
modelica_metatype _components = NULL;
modelica_metatype _direction = NULL;
modelica_metatype _ts = NULL;
modelica_metatype _variability = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _res2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 5;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_integer tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,2) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[5]);
if (0 != tmp5) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
_class_ = tmpMeta[6];
_rest = tmpMeta[2];
tmp3 += 3;
_res = omc_InteractiveUtil_getDefinitionContent(threadData, _rest, _addFunctions, _isPublic);
_str = omc_InteractiveUtil_getDefinitionsClass(threadData, _class_, _addFunctions);
tmpMeta[1] = mmc_mk_cons(_str, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
modelica_integer tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,2) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[5]);
if (1 != tmp6) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
_class_ = tmpMeta[6];
_rest = tmpMeta[2];
tmp3 += 2;
_res = omc_InteractiveUtil_getDefinitionContent(threadData, _rest, _addFunctions, _isPublic);
_ident = omc_InteractiveUtil_getDefinitionsReplaceableClass(threadData, _class_);
tmpMeta[1] = mmc_mk_cons(_ident, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (1 != tmp3_3) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_attr = tmpMeta[5];
_variability = tmpMeta[6];
_direction = tmpMeta[7];
_ts = tmpMeta[8];
_components = tmpMeta[9];
_rest = tmpMeta[2];
tmp3 += 1;
_typeStr = omc_InteractiveUtil_getDefinitionTypeSpecPathString(threadData, _ts);
_dirStr = omc_InteractiveUtil_getDefinitionDirString(threadData, _direction, _variability, _addFunctions);
_res = omc_InteractiveUtil_getDefinitionComponents(threadData, _typeStr, _dirStr, omc_InteractiveUtil_getDefinitionDimensions(threadData, _ts, _attr), _components);
_res2 = omc_InteractiveUtil_getDefinitionContent(threadData, _rest, _addFunctions, _isPublic);
tmpMeta[0] = listAppend(_res, _res2);
goto tmp2_done;
}
case 4: {
if (0 != tmp3_2) goto tmp2_end;
if (1 != tmp3_3) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_path = tmpMeta[5];
_rest = tmpMeta[2];
tmpMeta[1] = stringAppend(_OMC_LIT149,omc_InteractiveUtil_getDefinitionPathString(threadData, _path));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT48);
_typeStr = tmpMeta[2];
_res = omc_InteractiveUtil_getDefinitionContent(threadData, _rest, _addFunctions, _isPublic);
tmpMeta[1] = mmc_mk_cons(_typeStr, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getDefinitionContent(threadData, _rest, _addFunctions, _isPublic);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 6) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_res = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionContent(threadData_t *threadData, modelica_metatype _contents, modelica_metatype _addFunctions, modelica_metatype _isPublic)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _res = NULL;
tmp1 = mmc_unbox_integer(_addFunctions);
tmp2 = mmc_unbox_integer(_isPublic);
_res = omc_InteractiveUtil_getDefinitionContent(threadData, _contents, tmp1, tmp2);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitionParts(threadData_t *threadData, modelica_metatype _parts, modelica_metatype _inTypeVars, modelica_boolean _isFunction)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _parts;
{
modelica_metatype _rest = NULL;
modelica_metatype _contents = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[0] = omc_InteractiveUtil_getDefinitionTypeVars(threadData, _inTypeVars, _OMC_LIT150);
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_contents = tmpMeta[3];
_rest = tmpMeta[2];
tmp3 += 1;
tmpMeta[0] = listAppend(omc_InteractiveUtil_getDefinitionContent(threadData, _contents, _isFunction, 1), omc_InteractiveUtil_getDefinitionParts(threadData, _rest, _inTypeVars, _isFunction));
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_contents = tmpMeta[3];
_rest = tmpMeta[2];
tmpMeta[0] = listAppend(omc_InteractiveUtil_getDefinitionContent(threadData, _contents, _isFunction, 0), omc_InteractiveUtil_getDefinitionParts(threadData, _rest, _inTypeVars, _isFunction));
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getDefinitionParts(threadData, _rest, _inTypeVars, _isFunction);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_res = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionParts(threadData_t *threadData, modelica_metatype _parts, modelica_metatype _inTypeVars, modelica_metatype _isFunction)
{
modelica_integer tmp1;
modelica_metatype _res = NULL;
tmp1 = mmc_unbox_integer(_isFunction);
_res = omc_InteractiveUtil_getDefinitionParts(threadData, _parts, _inTypeVars, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_getDefinitionDimensions(threadData_t *threadData, modelica_metatype _ts, modelica_metatype _attr)
{
modelica_integer _out;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _ts;
tmp4_2 = _attr;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_l1 = tmpMeta[1];
_l2 = tmpMeta[2];
tmp1 = listLength(_l1) + listLength(_l2);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_l1 = tmpMeta[1];
_l2 = tmpMeta[2];
tmp1 = listLength(_l1) + listLength(_l2);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_l2 = tmpMeta[1];
tmp1 = listLength(_l2);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_l2 = tmpMeta[1];
tmp1 = listLength(_l2);
goto tmp3_done;
}
case 4: {
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_out = tmp1;
_return: OMC_LABEL_UNUSED
return _out;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionDimensions(threadData_t *threadData, modelica_metatype _ts, modelica_metatype _attr)
{
modelica_integer _out;
modelica_metatype out_out;
_out = omc_InteractiveUtil_getDefinitionDimensions(threadData, _ts, _attr);
out_out = mmc_mk_icon(_out);
return out_out;
}
DLLExport
modelica_string omc_InteractiveUtil_getDefinitionTypeSpecPathString(threadData_t *threadData, modelica_metatype _tp)
{
modelica_string _s = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _tp;
{
modelica_metatype _p = NULL;
modelica_metatype _tspecs = NULL;
modelica_metatype _tspecsStr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
_p = tmpMeta[0];
tmp1 = omc_InteractiveUtil_getDefinitionPathString(threadData, _p);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_p = tmpMeta[0];
_tspecs = tmpMeta[1];
tmp4 += 1;
_tspecsStr = omc_List_map(threadData, _tspecs, boxvar_InteractiveUtil_getDefinitionTypeSpecPathString);
tmpMeta[0] = stringAppend(omc_InteractiveUtil_getDefinitionPathString(threadData, _p),_OMC_LIT151);
tmpMeta[1] = stringAppend(tmpMeta[0],stringDelimitList(_tspecsStr, _OMC_LIT10));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT152);
tmp1 = tmpMeta[2];
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta[0];
tmp1 = omc_InteractiveUtil_getDefinitionPathString(threadData, _p);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_s = tmp1;
_return: OMC_LABEL_UNUSED
return _s;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionPathString(threadData_t *threadData, modelica_metatype _path)
{
modelica_string _out = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_out = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
_return: OMC_LABEL_UNUSED
return _out;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getEnumerationLiterals(threadData_t *threadData, modelica_metatype _el)
{
modelica_string _out = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _el;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_out = tmpMeta[0];
tmpMeta[0] = mmc_mk_cons(_OMC_LIT28, mmc_mk_cons(_out, mmc_mk_cons(_OMC_LIT28, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_out = tmp1;
_return: OMC_LABEL_UNUSED
return _out;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionsReplaceableClass(threadData_t *threadData, modelica_metatype _class_)
{
modelica_string _res = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _class_;
{
modelica_string _ident = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,0) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,4) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (11 != MMC_STRLEN(tmpMeta[5]) || strcmp(MMC_STRINGDATA(_OMC_LIT153), MMC_STRINGDATA(tmpMeta[5])) != 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],1,1) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
if (3 != MMC_STRLEN(tmpMeta[10]) || strcmp(MMC_STRINGDATA(_OMC_LIT154), MMC_STRINGDATA(tmpMeta[10])) != 0) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
if (!optionNone(tmpMeta[11])) goto tmp3_end;
if (!listEmpty(tmpMeta[8])) goto tmp3_end;
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
if (!optionNone(tmpMeta[12])) goto tmp3_end;
_ident = tmpMeta[0];
tmpMeta[0] = stringAppend(_OMC_LIT144,_ident);
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT48);
tmp1 = tmpMeta[1];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefinitionsClass(threadData_t *threadData, modelica_metatype _class_, modelica_boolean _addFunctions)
{
modelica_string _res = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;
tmp4_1 = _class_;
tmp4_2 = _addFunctions;
{
modelica_string _ident = NULL;
modelica_string _tyStr = NULL;
modelica_metatype _strs = NULL;
modelica_metatype _ts = NULL;
modelica_metatype _attr = NULL;
modelica_integer _numDim;
modelica_integer _index;
modelica_metatype _path = NULL;
modelica_string _indexArg = NULL;
modelica_string _pathArg = NULL;
modelica_metatype _body = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 11; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,0) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,5) == 0) goto tmp3_end;
_ident = tmpMeta[0];
_body = tmpMeta[2];
tmp4 += 9;
tmpMeta[0] = stringAppend(_OMC_LIT155,_ident);
_ident = tmpMeta[0];
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), _addFunctions);
tmpMeta[0] = mmc_mk_cons(_ident, _strs);
_strs = tmpMeta[0];
tmp1 = stringDelimitList(_strs, _OMC_LIT136);
goto tmp3_done;
}
case 1: {
modelica_integer tmp6;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp6) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],9,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,0) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,5) == 0) goto tmp3_end;
_ident = tmpMeta[0];
tmpMeta[0] = mmc_mk_cons(_OMC_LIT156, mmc_mk_cons(_ident, mmc_mk_cons(_OMC_LIT48, MMC_REFSTRUCTLIT(mmc_nil))));
_strs = tmpMeta[0];
tmp1 = stringDelimitList(_strs, _OMC_LIT146);
goto tmp3_done;
}
case 2: {
modelica_integer tmp7;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp7) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],9,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,5) == 0) goto tmp3_end;
_ident = tmpMeta[0];
tmp4 += 7;
tmpMeta[0] = mmc_mk_cons(_OMC_LIT157, mmc_mk_cons(_ident, mmc_mk_cons(_OMC_LIT48, MMC_REFSTRUCTLIT(mmc_nil))));
_strs = tmpMeta[0];
tmp1 = stringDelimitList(_strs, _OMC_LIT146);
goto tmp3_done;
}
case 3: {
modelica_integer tmp8;
if (1 != tmp4_2) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp8) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],9,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,0) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,5) == 0) goto tmp3_end;
_ident = tmpMeta[0];
_body = tmpMeta[5];
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), 1);
tmpMeta[1] = mmc_mk_cons(_ident, _strs);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT158, tmpMeta[1]);
_strs = tmpMeta[0];
tmp1 = stringDelimitList(_strs, _OMC_LIT146);
goto tmp3_done;
}
case 4: {
modelica_integer tmp9;
if (1 != tmp4_2) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp9 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp9) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],9,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,5) == 0) goto tmp3_end;
_ident = tmpMeta[0];
_body = tmpMeta[4];
tmp4 += 5;
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), 1);
tmpMeta[1] = mmc_mk_cons(_ident, _strs);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT159, tmpMeta[1]);
_strs = tmpMeta[0];
tmp1 = stringDelimitList(_strs, _OMC_LIT146);
goto tmp3_done;
}
case 5: {
modelica_integer tmp10;
if (1 != tmp4_2) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp10 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp10) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],9,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,0) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,5) == 0) goto tmp3_end;
_ident = tmpMeta[0];
_body = tmpMeta[4];
tmp4 += 4;
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), 1);
tmpMeta[1] = mmc_mk_cons(_ident, _strs);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT160, tmpMeta[1]);
_strs = tmpMeta[0];
tmp1 = stringDelimitList(_strs, _OMC_LIT146);
goto tmp3_done;
}
case 6: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],19,0) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,5) == 0) goto tmp3_end;
_ident = tmpMeta[0];
tmp4 += 3;
tmpMeta[0] = mmc_mk_cons(_OMC_LIT161, mmc_mk_cons(_ident, mmc_mk_cons(_OMC_LIT48, MMC_REFSTRUCTLIT(mmc_nil))));
_strs = tmpMeta[0];
tmp1 = stringDelimitList(_strs, _OMC_LIT146);
goto tmp3_done;
}
case 7: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,0) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,5) == 0) goto tmp3_end;
_ident = tmpMeta[0];
_body = tmpMeta[2];
tmp4 += 2;
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), 0);
tmpMeta[1] = mmc_mk_cons(_ident, _strs);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT162, tmpMeta[1]);
_strs = tmpMeta[0];
tmp1 = stringDelimitList(_strs, _OMC_LIT146);
goto tmp3_done;
}
case 8: {
modelica_integer tmp11;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],20,5) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmp11 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,5) == 0) goto tmp3_end;
_ident = tmpMeta[0];
_path = tmpMeta[2];
_index = tmp11;
_body = tmpMeta[4];
tmp4 += 1;
_indexArg = intString(_index);
_pathArg = omc_AbsynUtil_pathLastIdent(threadData, _path);
_strs = omc_InteractiveUtil_getDefinitionParts(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 2))), 0);
tmpMeta[3] = mmc_mk_cons(_pathArg, _strs);
tmpMeta[2] = mmc_mk_cons(_indexArg, tmpMeta[3]);
tmpMeta[1] = mmc_mk_cons(_ident, tmpMeta[2]);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT163, tmpMeta[1]);
_strs = tmpMeta[0];
tmp1 = stringDelimitList(_strs, _OMC_LIT146);
goto tmp3_done;
}
case 9: {
modelica_boolean tmp12;
modelica_string tmp13;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_ident = tmpMeta[0];
_ts = tmpMeta[2];
_attr = tmpMeta[3];
_numDim = omc_InteractiveUtil_getDefinitionDimensions(threadData, _ts, _attr);
tmp12 = (modelica_boolean)(_numDim == ((modelica_integer) 0));
if(tmp12)
{
tmp13 = _OMC_LIT9;
}
else
{
tmpMeta[0] = stringAppend(_OMC_LIT145,intString(_numDim));
tmp13 = tmpMeta[0];
}
tmpMeta[1] = stringAppend(tmp13,omc_InteractiveUtil_getDefinitionTypeSpecPathString(threadData, _ts));
_tyStr = tmpMeta[1];
tmpMeta[0] = mmc_mk_cons(_OMC_LIT164, mmc_mk_cons(_ident, mmc_mk_cons(_tyStr, mmc_mk_cons(_OMC_LIT48, MMC_REFSTRUCTLIT(mmc_nil)))));
_strs = tmpMeta[0];
tmp1 = stringDelimitList(_strs, _OMC_LIT146);
goto tmp3_done;
}
case 10: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 11) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitionsClass(threadData_t *threadData, modelica_metatype _class_, modelica_metatype _addFunctions)
{
modelica_integer tmp1;
modelica_string _res = NULL;
tmp1 = mmc_unbox_integer(_addFunctions);
_res = omc_InteractiveUtil_getDefinitionsClass(threadData, _class_, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefinitions2(threadData_t *threadData, modelica_metatype _classes, modelica_boolean _addFunctions)
{
modelica_metatype _res = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _classes;
{
modelica_metatype _rest = NULL;
modelica_metatype _class_ = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_class_ = tmpMeta[1];
_rest = tmpMeta[2];
_str = omc_InteractiveUtil_getDefinitionsClass(threadData, _class_, _addFunctions);
_res = omc_InteractiveUtil_getDefinitions2(threadData, _rest, _addFunctions);
tmpMeta[1] = mmc_mk_cons(_str, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_res = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDefinitions2(threadData_t *threadData, modelica_metatype _classes, modelica_metatype _addFunctions)
{
modelica_integer tmp1;
modelica_metatype _res = NULL;
tmp1 = mmc_unbox_integer(_addFunctions);
_res = omc_InteractiveUtil_getDefinitions2(threadData, _classes, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_printWithNewline(threadData_t *threadData, modelica_string _s)
{
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
omc_Print_printBuf(threadData, _s);
omc_Print_printBuf(threadData, _OMC_LIT136);
_return: OMC_LABEL_UNUSED
return;
}
DLLExport
modelica_string omc_InteractiveUtil_getDefinitions(threadData_t *threadData, modelica_metatype _ast, modelica_boolean _addFunctions)
{
modelica_string _res = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _classes = NULL;
modelica_metatype _toPrint = NULL;
modelica_integer _handle;
modelica_metatype _cl = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_MetaUtil_createMetaClassesInProgram(threadData, _ast);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_classes = tmpMeta[1];
_handle = omc_Print_saveAndClearBuf(threadData);
omc_Print_printBuf(threadData, _OMC_LIT165);
_toPrint = omc_InteractiveUtil_getDefinitions2(threadData, _classes, _addFunctions);
omc_List_map__0(threadData, _toPrint, boxvar_InteractiveUtil_printWithNewline);
_cl = omc_InteractiveUtil_getPathedClassInProgram(threadData, _OMC_LIT167, _ast, 0);
tmpMeta[0] = mmc_mk_cons(_cl, MMC_REFSTRUCTLIT(mmc_nil));
_toPrint = omc_InteractiveUtil_getDefinitions2(threadData, tmpMeta[0], 0);
omc_List_map__0(threadData, _toPrint, boxvar_InteractiveUtil_printWithNewline);
omc_Print_printBuf(threadData, _OMC_LIT168);
_res = omc_Print_getString(threadData);
omc_Print_restoreBuf(threadData, _handle);
tmp1 = _res;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_InteractiveUtil_getDefinitions(threadData_t *threadData, modelica_metatype _ast, modelica_metatype _addFunctions)
{
modelica_integer tmp1;
modelica_string _res = NULL;
tmp1 = mmc_unbox_integer(_addFunctions);
_res = omc_InteractiveUtil_getDefinitions(threadData, _ast, tmp1);
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElseIfAlgorithm(threadData_t *threadData, modelica_metatype _elseIfbranch)
{
modelica_metatype _outElseIfbranch = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _elseIfbranch;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e11 = NULL;
modelica_metatype _algitems = NULL;
modelica_metatype _algitems1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e1 = tmpMeta[1];
_algitems = tmpMeta[2];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_algitems1 = omc_List_map(threadData, _algitems, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
tmpMeta[1] = mmc_mk_box2(0, _e11, _algitems1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElseIfbranch = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElseIfbranch;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatAlgorithm(threadData_t *threadData, modelica_metatype _alg)
{
modelica_metatype _outAlg = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _alg;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e11 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e21 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _body = NULL;
modelica_metatype _body1 = NULL;
modelica_metatype _thenPart = NULL;
modelica_metatype _thenPart1 = NULL;
modelica_metatype _elsePart = NULL;
modelica_metatype _elsePart1 = NULL;
modelica_metatype _elseIfPart = NULL;
modelica_metatype _elseIfPart1 = NULL;
modelica_metatype _whenBranch = NULL;
modelica_metatype _whenBranch1 = NULL;
modelica_string _id = NULL;
modelica_metatype _fargs = NULL;
modelica_metatype _fargs1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 9; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr = tmpMeta[2];
_e1 = tmpMeta[3];
omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_cr1 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr1);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Algorithm_ALG__ASSIGN__desc, tmpMeta[1], _e1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],16,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_e21 = omc_AbsynUtil_traverseExp(threadData, _e2, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Algorithm_ALG__ASSIGN__desc, _e11, _e21);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_e1 = tmpMeta[1];
_thenPart = tmpMeta[2];
_elseIfPart = tmpMeta[3];
_elsePart = tmpMeta[4];
_thenPart1 = omc_List_map(threadData, _thenPart, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
_elseIfPart1 = omc_List_map(threadData, _elseIfPart, boxvar_InteractiveUtil_transformFlatElseIfAlgorithm);
_elsePart1 = omc_List_map(threadData, _elsePart, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta[1] = mmc_mk_box5(4, &Absyn_Algorithm_ALG__IF__desc, _e11, _thenPart1, _elseIfPart1, _elsePart1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (!optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (optionNone(tmpMeta[6])) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 1));
if (!listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[4];
_e1 = tmpMeta[7];
_body = tmpMeta[8];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_body1 = omc_List_map(threadData, _body, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
tmpMeta[2] = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _id, mmc_mk_none(), mmc_mk_some(_e11));
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(5, &Absyn_Algorithm_ALG__FOR__desc, tmpMeta[1], _body1);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[1];
_body = tmpMeta[2];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_body1 = omc_List_map(threadData, _body, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
tmpMeta[1] = mmc_mk_box3(7, &Absyn_Algorithm_ALG__WHILE__desc, _e11, _body1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_body = tmpMeta[2];
_whenBranch = tmpMeta[3];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_body1 = omc_List_map(threadData, _body, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
_whenBranch1 = omc_List_map(threadData, _whenBranch, boxvar_InteractiveUtil_transformFlatElseIfAlgorithm);
tmpMeta[1] = mmc_mk_box4(8, &Absyn_Algorithm_ALG__WHEN__A__desc, _e11, _body1, _whenBranch1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr = tmpMeta[1];
_fargs = tmpMeta[2];
_cr1 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr);
_fargs1 = omc_InteractiveUtil_transformFlatFunctionArgs(threadData, _fargs);
tmpMeta[1] = mmc_mk_box3(9, &Absyn_Algorithm_ALG__NORETCALL__desc, _cr1, _fargs1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT169;
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT170;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAlg = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAlg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatAlgorithmItem(threadData_t *threadData, modelica_metatype _algitem)
{
modelica_metatype _outAlgitem = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _algitem;
{
modelica_metatype _cmt = NULL;
modelica_metatype _alg = NULL;
modelica_metatype _alg1 = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_alg = tmpMeta[1];
_cmt = tmpMeta[2];
_info = tmpMeta[3];
_alg1 = omc_InteractiveUtil_transformFlatAlgorithm(threadData, _alg);
tmpMeta[1] = mmc_mk_box4(3, &Absyn_AlgorithmItem_ALGORITHMITEM__desc, _alg1, _cmt, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAlgitem = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAlgitem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatExp(threadData_t *threadData, modelica_metatype _inExp, modelica_integer _inDummy, modelica_integer *out_outDummy)
{
modelica_metatype _outExp = NULL;
modelica_integer _outDummy;
modelica_integer tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_integer tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inDummy;
{
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
modelica_integer _i;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[2];
_i = tmp4_2;
_cr1 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr);
tmpMeta[2] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr1);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _i;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = _inDummy;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_outDummy = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outDummy) { *out_outDummy = _outDummy; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformFlatExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inDummy, modelica_metatype *out_outDummy)
{
modelica_integer tmp1;
modelica_integer _outDummy;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inDummy);
_outExp = omc_InteractiveUtil_transformFlatExp(threadData, _inExp, tmp1, &_outDummy);
if (out_outDummy) { *out_outDummy = mmc_mk_icon(_outDummy); }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatNamedArg(threadData_t *threadData, modelica_metatype _namedArg)
{
modelica_metatype _outNamedArg = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _namedArg;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e11 = NULL;
modelica_string _id = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[1];
_e1 = tmpMeta[2];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _id, _e11);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outNamedArg = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outNamedArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatFunctionArgs(threadData_t *threadData, modelica_metatype _fargs)
{
modelica_metatype _outFargs = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _fargs;
{
modelica_metatype _expl = NULL;
modelica_metatype _expl1 = NULL;
modelica_metatype _namedArgs = NULL;
modelica_metatype _namedArgs1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_expl = tmpMeta[1];
_namedArgs = tmpMeta[2];
{
modelica_metatype __omcQ_24tmpVar7;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar6;
int tmp6;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _expl;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar7 = tmpMeta[2];
tmp5 = &__omcQ_24tmpVar7;
while(1) {
tmp6 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp6--;
}
if (tmp6 == 0) {
__omcQ_24tmpVar6 = omc_AbsynUtil_traverseExp(threadData, _e, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar6,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar7;
}
_expl1 = tmpMeta[1];
_namedArgs1 = omc_List_map(threadData, _namedArgs, boxvar_InteractiveUtil_transformFlatNamedArg);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _expl1, _namedArgs1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[0] = _fargs;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outFargs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outFargs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElseIfPart(threadData_t *threadData, modelica_metatype _elseIfPart)
{
modelica_metatype _outElseIfPart = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _elseIfPart;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e11 = NULL;
modelica_metatype _eqnitems = NULL;
modelica_metatype _eqnitems1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e1 = tmpMeta[1];
_eqnitems = tmpMeta[2];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_eqnitems1 = omc_List_map(threadData, _eqnitems, boxvar_InteractiveUtil_transformFlatEquationItem);
tmpMeta[1] = mmc_mk_box2(0, _e11, _eqnitems1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElseIfPart = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElseIfPart;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatEquation(threadData_t *threadData, modelica_metatype _eqn)
{
modelica_metatype _outEqn = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _eqn;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e11 = NULL;
modelica_metatype _e21 = NULL;
modelica_string _id = NULL;
modelica_metatype _name = NULL;
modelica_metatype _thenpart = NULL;
modelica_metatype _thenpart1 = NULL;
modelica_metatype _elsepart = NULL;
modelica_metatype _elsepart1 = NULL;
modelica_metatype _forEqns = NULL;
modelica_metatype _forEqns1 = NULL;
modelica_metatype _whenEqns = NULL;
modelica_metatype _whenEqns1 = NULL;
modelica_metatype _elseifpart = NULL;
modelica_metatype _elseifpart1 = NULL;
modelica_metatype _elseWhenEqns = NULL;
modelica_metatype _elseWhenEqns1 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _cr11 = NULL;
modelica_metatype _cr21 = NULL;
modelica_metatype _fargs = NULL;
modelica_metatype _fargs1 = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_e1 = tmpMeta[1];
_thenpart = tmpMeta[2];
_elseifpart = tmpMeta[3];
_elsepart = tmpMeta[4];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_thenpart1 = omc_List_map(threadData, _thenpart, boxvar_InteractiveUtil_transformFlatEquationItem);
_elsepart1 = omc_List_map(threadData, _elsepart, boxvar_InteractiveUtil_transformFlatEquationItem);
_elseifpart1 = omc_List_map(threadData, _elseifpart, boxvar_InteractiveUtil_transformFlatElseIfPart);
tmpMeta[1] = mmc_mk_box5(3, &Absyn_Equation_EQ__IF__desc, _e11, _thenpart1, _elseifpart1, _elsepart1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_e21 = omc_AbsynUtil_traverseExp(threadData, _e2, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta[1] = mmc_mk_box3(4, &Absyn_Equation_EQ__EQUALS__desc, _e11, _e21);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_cr1 = tmpMeta[3];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_e21 = omc_AbsynUtil_traverseExp(threadData, _e2, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_cr11 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr1);
tmpMeta[1] = mmc_mk_box4(5, &Absyn_Equation_EQ__PDE__desc, _e11, _e21, _cr11);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr1 = tmpMeta[1];
_cr2 = tmpMeta[2];
_cr11 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr1);
_cr21 = omc_InteractiveUtil_transformFlatComponentRef(threadData, _cr2);
tmpMeta[1] = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _cr11, _cr21);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (!optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (optionNone(tmpMeta[6])) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 1));
if (!listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[4];
_e1 = tmpMeta[7];
_forEqns = tmpMeta[8];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_forEqns1 = omc_List_map(threadData, _forEqns, boxvar_InteractiveUtil_transformFlatEquationItem);
tmpMeta[2] = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _id, mmc_mk_none(), mmc_mk_some(_e11));
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(7, &Absyn_Equation_EQ__FOR__desc, tmpMeta[1], _forEqns1);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_whenEqns = tmpMeta[2];
_elseWhenEqns = tmpMeta[3];
_e11 = omc_AbsynUtil_traverseExp(threadData, _e1, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
_elseWhenEqns1 = omc_List_map(threadData, _elseWhenEqns, boxvar_InteractiveUtil_transformFlatElseIfPart);
_whenEqns1 = omc_List_map(threadData, _whenEqns, boxvar_InteractiveUtil_transformFlatEquationItem);
tmpMeta[1] = mmc_mk_box4(8, &Absyn_Equation_EQ__WHEN__E__desc, _e11, _whenEqns1, _elseWhenEqns1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_name = tmpMeta[1];
_fargs = tmpMeta[2];
_fargs1 = omc_InteractiveUtil_transformFlatFunctionArgs(threadData, _fargs);
tmpMeta[1] = mmc_mk_box3(9, &Absyn_Equation_EQ__NORETCALL__desc, _name, _fargs1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outEqn = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEqn;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatEquationItem(threadData_t *threadData, modelica_metatype _eqnitem)
{
modelica_metatype _outEqnitem = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _eqnitem;
{
modelica_metatype _cmt = NULL;
modelica_metatype _eqn = NULL;
modelica_metatype _eqn1 = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_eqn = tmpMeta[1];
_cmt = tmpMeta[2];
_info = tmpMeta[3];
_eqn1 = omc_InteractiveUtil_transformFlatEquation(threadData, _eqn);
tmpMeta[1] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, _eqn1, _cmt, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outEqnitem = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEqnitem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponentRef(threadData_t *threadData, modelica_metatype _cr)
{
modelica_metatype _outCr = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _cr1 = NULL;
modelica_metatype _ss = NULL;
modelica_string _s = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_ss = omc_AbsynUtil_crefLastSubs(threadData, _cr);
_cr1 = omc_AbsynUtil_crefStripLastSubs(threadData, _cr);
_s = omc_Dump_printComponentRefStr(threadData, _cr1);
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _s, _ss);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCr = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatModificationOption(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _outMod = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _mod;
{
modelica_metatype _info = NULL;
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _eltArgs = NULL;
modelica_metatype _eltArgs1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_eltArgs = tmpMeta[2];
_e = tmpMeta[4];
_info = tmpMeta[5];
_eltArgs1 = omc_List_map(threadData, _eltArgs, boxvar_InteractiveUtil_transformFlatElementArg);
_e1 = omc_AbsynUtil_traverseExp(threadData, _e, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta[1] = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _e1, _info);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _eltArgs1, tmpMeta[1]);
tmpMeta[0] = mmc_mk_some(tmpMeta[2]);
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,0) == 0) goto tmp2_end;
_eltArgs = tmpMeta[2];
_eltArgs1 = omc_List_map(threadData, _eltArgs, boxvar_InteractiveUtil_transformFlatElementArg);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _eltArgs1, _OMC_LIT35);
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
case 2: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outMod = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outMod;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementArg(threadData_t *threadData, modelica_metatype _eltArg)
{
modelica_metatype _outEltArg = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _eltArg;
{
modelica_boolean _f;
modelica_metatype _e = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _mod1 = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _info = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_f = tmp5;
_e = tmpMeta[2];
_p = tmpMeta[3];
_mod = tmpMeta[4];
_cmt = tmpMeta[5];
_info = tmpMeta[6];
_mod1 = omc_InteractiveUtil_transformFlatModificationOption(threadData, _mod);
tmpMeta[1] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_f), _e, _p, _mod1, _cmt, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,6) == 0) goto tmp2_end;
tmpMeta[0] = _eltArg;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outEltArg = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEltArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatSubscript(threadData_t *threadData, modelica_metatype _s)
{
modelica_metatype _outS = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _s;
{
modelica_metatype _e = NULL;
modelica_metatype _e1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT171;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
_e1 = omc_AbsynUtil_traverseExp(threadData, _e, boxvar_InteractiveUtil_transformFlatExp, mmc_mk_integer(((modelica_integer) 0)), NULL);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Subscript_SUBSCRIPT__desc, _e1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outS = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outS;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatArrayDim(threadData_t *threadData, modelica_metatype _ad)
{
modelica_metatype _outAd = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outAd = omc_List_map(threadData, _ad, boxvar_InteractiveUtil_transformFlatSubscript);
_return: OMC_LABEL_UNUSED
return _outAd;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponent(threadData_t *threadData, modelica_metatype _comp)
{
modelica_metatype _outComp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _comp;
{
modelica_metatype _arraydim = NULL;
modelica_metatype _arraydimTransformed = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _modTransformed = NULL;
modelica_string _id = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_id = tmpMeta[1];
_arraydim = tmpMeta[2];
_mod = tmpMeta[3];
_modTransformed = omc_InteractiveUtil_transformFlatModificationOption(threadData, _mod);
_arraydimTransformed = omc_InteractiveUtil_transformFlatArrayDim(threadData, _arraydim);
tmpMeta[1] = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _id, _arraydimTransformed, _modTransformed);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatComponentItem(threadData_t *threadData, modelica_metatype _compitem)
{
modelica_metatype _outCompitem = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _compitem;
{
modelica_metatype _cond = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _compTransformed = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_comp = tmpMeta[1];
_cond = tmpMeta[2];
_cmt = tmpMeta[3];
_compTransformed = omc_InteractiveUtil_transformFlatComponent(threadData, _comp);
tmpMeta[1] = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, _compTransformed, _cond, _cmt);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCompitem = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCompitem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementSpec(threadData_t *threadData, modelica_metatype _eltSpec)
{
modelica_metatype _outEltSpec = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _eltSpec;
{
modelica_boolean _r;
modelica_metatype _cl = NULL;
modelica_metatype _cl1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _eargs = NULL;
modelica_metatype _eargs1 = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _annOpt = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
modelica_integer tmp4;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp4 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_r = tmp4;
_cl = tmpMeta[2];
tmpMeta[1] = mmc_mk_box3(0, _cl, mmc_mk_none(), mmc_mk_integer(((modelica_integer) 0)));
tmpMeta[2] = omc_InteractiveUtil_transformFlatClass(threadData, tmpMeta[1]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
_cl1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(_r), _cl1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_path = tmpMeta[1];
_eargs = tmpMeta[2];
_annOpt = tmpMeta[3];
_eargs1 = omc_List_map(threadData, _eargs, boxvar_InteractiveUtil_transformFlatElementArg);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _path, _eargs1, _annOpt);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
tmpMeta[0] = _eltSpec;
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_attr = tmpMeta[1];
_tp = tmpMeta[2];
_comps = tmpMeta[3];
_comps1 = omc_List_map(threadData, _comps, boxvar_InteractiveUtil_transformFlatComponentItem);
tmpMeta[1] = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr, _tp, _comps1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outEltSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEltSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElement(threadData_t *threadData, modelica_metatype _elt)
{
modelica_metatype _outElt = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _elt;
{
modelica_boolean _f;
modelica_metatype _r = NULL;
modelica_metatype _io = NULL;
modelica_metatype _spec = NULL;
modelica_metatype _spec1 = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
tmpMeta[0] = _elt;
goto tmp2_done;
}
case 1: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_f = tmp5;
_r = tmpMeta[2];
_io = tmpMeta[3];
_spec = tmpMeta[4];
_info = tmpMeta[5];
_constr = tmpMeta[6];
_spec1 = omc_InteractiveUtil_transformFlatElementSpec(threadData, _spec);
tmpMeta[1] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _io, _spec1, _info, _constr);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElt = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElt;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatElementItem(threadData_t *threadData, modelica_metatype _eitem)
{
modelica_metatype _outEitem = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _eitem;
{
modelica_metatype _elt = NULL;
modelica_metatype _elt1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_elt = tmpMeta[1];
_elt1 = omc_InteractiveUtil_transformFlatElement(threadData, _elt);
tmpMeta[1] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outEitem = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEitem;
}
DLLExport
modelica_metatype omc_InteractiveUtil_transformFlatPart(threadData_t *threadData, modelica_metatype _part)
{
modelica_metatype _outPart = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _part;
{
modelica_metatype _eitems = NULL;
modelica_metatype _eitems1 = NULL;
modelica_metatype _eqnitems = NULL;
modelica_metatype _eqnitems1 = NULL;
modelica_metatype _algitems = NULL;
modelica_metatype _algitems1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 8; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_eitems = tmpMeta[1];
tmp3 += 6;
_eitems1 = omc_List_map(threadData, _eitems, boxvar_InteractiveUtil_transformFlatElementItem);
tmpMeta[1] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _eitems1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_eitems = tmpMeta[1];
tmp3 += 5;
_eitems1 = omc_List_map(threadData, _eitems, boxvar_InteractiveUtil_transformFlatElementItem);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _eitems1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_eqnitems = tmpMeta[1];
tmp3 += 4;
_eqnitems1 = omc_List_map(threadData, _eqnitems, boxvar_InteractiveUtil_transformFlatEquationItem);
tmpMeta[1] = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _eqnitems1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_eqnitems = tmpMeta[1];
tmp3 += 3;
_eqnitems1 = omc_List_map(threadData, _eqnitems, boxvar_InteractiveUtil_transformFlatEquationItem);
tmpMeta[1] = mmc_mk_box2(7, &Absyn_ClassPart_INITIALEQUATIONS__desc, _eqnitems1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_algitems = tmpMeta[1];
tmp3 += 2;
_algitems1 = omc_List_map(threadData, _algitems, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
tmpMeta[1] = mmc_mk_box2(8, &Absyn_ClassPart_ALGORITHMS__desc, _algitems1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_algitems = tmpMeta[1];
tmp3 += 1;
_algitems1 = omc_List_map(threadData, _algitems, boxvar_InteractiveUtil_transformFlatAlgorithmItem);
tmpMeta[1] = mmc_mk_box2(9, &Absyn_ClassPart_INITIALALGORITHMS__desc, _algitems1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,2) == 0) goto tmp2_end;
tmpMeta[0] = _part;
goto tmp2_done;
}
case 7: {
fputs(MMC_STRINGDATA(_OMC_LIT172),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 8) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outPart = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPart;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatClassDef(threadData_t *threadData, modelica_metatype _cdef)
{
modelica_metatype _outCdef = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _cdef;
{
modelica_metatype _parts = NULL;
modelica_metatype _partsTransformed = NULL;
modelica_string _baseClassName = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 7; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmp3 += 5;
tmpMeta[0] = _cdef;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmp3 += 4;
tmpMeta[0] = _cdef;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
tmp3 += 3;
tmpMeta[0] = _cdef;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmp3 += 2;
tmpMeta[0] = _cdef;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_typeVars = tmpMeta[1];
_classAttrs = tmpMeta[2];
_parts = tmpMeta[3];
_ann = tmpMeta[4];
_cmt = tmpMeta[5];
tmp3 += 1;
_partsTransformed = omc_List_map(threadData, _parts, boxvar_InteractiveUtil_transformFlatPart);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _partsTransformed, _ann, _cmt);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_baseClassName = tmpMeta[1];
_modifications = tmpMeta[2];
_cmt = tmpMeta[3];
_parts = tmpMeta[4];
_ann = tmpMeta[5];
_partsTransformed = omc_List_map(threadData, _parts, boxvar_InteractiveUtil_transformFlatPart);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _partsTransformed, _ann);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
fputs(MMC_STRINGDATA(_OMC_LIT173),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 7) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outCdef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCdef;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformFlatClass(threadData_t *threadData, modelica_metatype _inTuple)
{
modelica_metatype _outTuple = NULL;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inTuple;
{
modelica_string _id = NULL;
modelica_metatype _pa = NULL;
modelica_boolean _a;
modelica_boolean _b;
modelica_boolean _c;
modelica_metatype _d = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef1 = NULL;
modelica_integer _i;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmp5 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmp7 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 8));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[10]);
_id = tmpMeta[2];
_a = tmp5;
_b = tmp6;
_c = tmp7;
_d = tmpMeta[6];
_cdef = tmpMeta[7];
_file_info = tmpMeta[8];
_pa = tmpMeta[9];
_i = tmp8;
_cdef1 = omc_InteractiveUtil_transformFlatClassDef(threadData, _cdef);
tmpMeta[1] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_a), mmc_mk_boolean(_b), mmc_mk_boolean(_c), _d, _cdef1, _file_info);
tmpMeta[2] = mmc_mk_box3(0, tmpMeta[1], _pa, mmc_mk_integer(_i));
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
fputs(MMC_STRINGDATA(_OMC_LIT174),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTuple = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTuple;
}
DLLExport
modelica_metatype omc_InteractiveUtil_transformFlatProgram(threadData_t *threadData, modelica_metatype _p)
{
modelica_metatype _newP = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = omc_AbsynUtil_traverseClasses(threadData, _p, mmc_mk_none(), boxvar_InteractiveUtil_transformFlatClass, mmc_mk_integer(((modelica_integer) 0)), 1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_newP = tmpMeta[2];
tmpMeta[0] = _newP;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_newP = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _newP;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getSurroundingPackage(threadData_t *threadData, modelica_metatype _classpath, modelica_metatype _inProgram)
{
modelica_metatype _p = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_p = _inProgram;
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _p;
{
modelica_metatype _cdef = NULL;
modelica_metatype _pdef = NULL;
modelica_string _filename1 = NULL;
modelica_string _filename2 = NULL;
modelica_metatype _ppath = NULL;
modelica_metatype _within_ = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _classpath, _p, 0);
_filename1 = omc_AbsynUtil_classFilename(threadData, _cdef);
_ppath = omc_AbsynUtil_stripLast(threadData, _classpath);
_pdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _ppath, _p, 0);
_filename2 = omc_AbsynUtil_classFilename(threadData, _pdef);
tmp5 = (stringEqual(_filename1, _filename2));
if (1 != tmp5) goto goto_1;
tmpMeta[0] = omc_InteractiveUtil_getSurroundingPackage(threadData, _ppath, _p);
goto tmp2_done;
}
case 1: {
tmpMeta[2] = mmc_mk_cons(omc_InteractiveUtil_getPathedClassInProgram(threadData, _classpath, _p, 0), MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_p), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = tmpMeta[2];
_p = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_p), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[3] = omc_InteractiveUtil_buildWithin(threadData, _classpath);
_p = tmpMeta[1];
tmpMeta[0] = _p;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_p = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _p;
}
static modelica_metatype closure3_InteractiveUtil_classIsInFile(threadData_t *thData, modelica_metatype closure, modelica_metatype inElement)
{
modelica_string inFilename = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_InteractiveUtil_classIsInFile(thData, inFilename, inElement);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeClassDiffFiledInElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_string _inFilename)
{
modelica_metatype _outElements = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box1(0, _inFilename);
_outElements = omc_List_filterOnTrue(threadData, _inElements, (modelica_fnptr) mmc_mk_box2(0,closure3_InteractiveUtil_classIsInFile,tmpMeta[0]));
_return: OMC_LABEL_UNUSED
return _outElements;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classIsInFile(threadData_t *threadData, modelica_string _inFilename, modelica_metatype _inElement)
{
modelica_boolean _outInFile;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_string _filename = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_filename = tmpMeta[4];
tmp1 = (stringEqual(_inFilename, _filename));
goto tmp3_done;
}
case 1: {
tmp1 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outInFile = tmp1;
_return: OMC_LABEL_UNUSED
return _outInFile;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classIsInFile(threadData_t *threadData, modelica_metatype _inFilename, modelica_metatype _inElement)
{
modelica_boolean _outInFile;
modelica_metatype out_outInFile;
_outInFile = omc_InteractiveUtil_classIsInFile(threadData, _inFilename, _inElement);
out_outInFile = mmc_mk_icon(_outInFile);
return out_outInFile;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerDiffFiledClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[14] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _a = NULL;
modelica_string _file = NULL;
modelica_string _baseClassName = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
_a = tmpMeta[1];
_b = tmp5;
_c = tmp6;
_d = tmp7;
_e = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_file = tmpMeta[13];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_removeClassDiffFiledInElementitemlist(threadData, _publst, _file);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
_a = tmpMeta[1];
_b = tmp8;
_c = tmp9;
_d = tmp10;
_e = tmpMeta[5];
_baseClassName = tmpMeta[7];
_modifications = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_file = tmpMeta[13];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_removeClassDiffFiledInElementitemlist(threadData, _publst, _file);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
tmpMeta[0] = _inClass;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerDiffFiledClasses(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _p = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_p = _inProgram;
{
modelica_metatype tmp3_1;
tmp3_1 = _p;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_p), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = omc_List_map(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))), boxvar_InteractiveUtil_removeInnerDiffFiledClass);
_p = tmpMeta[1];
tmpMeta[0] = _p;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_p = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _p;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getContainedClassAndFile(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_string _filename = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _p_2 = NULL;
modelica_metatype _p = NULL;
modelica_metatype _classname = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_classname = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _classname, _p, 0);
_filename = omc_AbsynUtil_classFilename(threadData, _cdef);
_p_1 = omc_InteractiveUtil_getSurroundingPackage(threadData, _classname, _p);
_p_2 = omc_InteractiveUtil_removeInnerDiffFiledClasses(threadData, _p_1);
tmpMeta[0+0] = _p_2;
tmp1_c1 = _filename;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_namedargToModification(threadData_t *threadData, modelica_metatype _inNamedArg)
{
modelica_metatype _outElementArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inNamedArg;
{
modelica_metatype _elts = NULL;
modelica_string _id = NULL;
modelica_metatype _c = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],11,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
_id = tmpMeta[1];
_c = tmpMeta[2];
tmpMeta[1] = omc_InteractiveUtil_recordConstructorToModification(threadData, _c);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[2])) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
if (!optionNone(tmpMeta[5])) goto goto_1;
_elts = tmpMeta[4];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _elts, _OMC_LIT35);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT65, tmpMeta[1], mmc_mk_some(tmpMeta[2]), mmc_mk_none(), _OMC_LIT39);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[1];
_e = tmpMeta[2];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _e, _OMC_LIT39);
tmpMeta[4] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta[2], tmpMeta[3]);
tmpMeta[5] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT65, tmpMeta[1], mmc_mk_some(tmpMeta[4]), mmc_mk_none(), _OMC_LIT39);
tmpMeta[0] = tmpMeta[5];
goto tmp2_done;
}
case 2: {
omc_Print_printBuf(threadData, _OMC_LIT175);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElementArg = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_recordConstructorToModification(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outElementArg = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _eltarglst = NULL;
modelica_metatype _emod = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _nargs = NULL;
modelica_metatype _e = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (!listEmpty(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (!listEmpty(tmpMeta[6])) goto tmp2_end;
_cr = tmpMeta[1];
_e = tmpMeta[4];
tmp3 += 1;
_p = omc_AbsynUtil_crefToPath(threadData, _cr);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _e, _OMC_LIT39);
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta[1], tmpMeta[2]);
tmpMeta[4] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT65, _p, mmc_mk_some(tmpMeta[3]), mmc_mk_none(), _OMC_LIT39);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (!listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
_cr = tmpMeta[1];
_nargs = tmpMeta[4];
tmp3 += 1;
_eltarglst = omc_List_map(threadData, _nargs, boxvar_InteractiveUtil_namedargToModification);
_p = omc_AbsynUtil_crefToPath(threadData, _cr);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _eltarglst, _OMC_LIT35);
tmpMeta[2] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT65, _p, mmc_mk_some(tmpMeta[1]), mmc_mk_none(), _OMC_LIT39);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],11,3) == 0) goto tmp2_end;
if (!listEmpty(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
_cr = tmpMeta[1];
_e = tmpMeta[4];
_nargs = tmpMeta[6];
_eltarglst = omc_List_map(threadData, _nargs, boxvar_InteractiveUtil_namedargToModification);
_emod = omc_InteractiveUtil_recordConstructorToModification(threadData, _e);
_p = omc_AbsynUtil_crefToPath(threadData, _cr);
tmpMeta[1] = mmc_mk_cons(_emod, _eltarglst);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta[1], _OMC_LIT35);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT65, _p, mmc_mk_some(tmpMeta[2]), mmc_mk_none(), _OMC_LIT39);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 3: {
omc_Print_printBuf(threadData, _OMC_LIT176);
omc_Dump_printExp(threadData, _inExp);
omc_Print_printBuf(threadData, _OMC_LIT136);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElementArg = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementArg;
}
DLLExport
modelica_metatype omc_InteractiveUtil_annotationListToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst)
{
modelica_metatype _outAnnotation = NULL;
modelica_metatype _args = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_args = tmpMeta[0];
{
modelica_metatype _arg;
for (tmpMeta[1] = _inAbsynNamedArgLst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_arg = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _arg;
{
modelica_metatype _eltarg = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (8 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT177), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e = tmpMeta[4];
_eltarg = omc_InteractiveUtil_recordConstructorToModification(threadData, _e);
tmpMeta[3] = mmc_mk_cons(_eltarg, _args);
tmpMeta[2] = tmpMeta[3];
goto tmp2_done;
}
case 1: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (7 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT178), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp2_end;
tmpMeta[2] = _args;
goto tmp2_done;
}
case 2: {
tmpMeta[2] = _args;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_args = tmpMeta[2];
}
}
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, listReverseInPlace(_args));
_outAnnotation = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _outAnnotation;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_commentToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst)
{
modelica_metatype _outStringOption = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynNamedArgLst;
{
modelica_string _str = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (7 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT178), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_str = tmpMeta[5];
if (!(!(stringEqual(_str, _OMC_LIT9)))) goto tmp2_end;
tmpMeta[0] = mmc_mk_some(_str);
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
_inAbsynNamedArgLst = _rest;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outStringOption = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_annotationListToAbsynComment2(threadData_t *threadData, modelica_metatype _inNamedArgs)
{
modelica_metatype _outComment = NULL;
modelica_metatype _annargs = NULL;
modelica_metatype _ostrcmt = NULL;
modelica_metatype _ann = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = omc_InteractiveUtil_annotationListToAbsyn(threadData, _inNamedArgs);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_ann = tmpMeta[0];
_annargs = tmpMeta[1];
_ostrcmt = omc_InteractiveUtil_commentToAbsyn(threadData, _inNamedArgs);
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _ostrcmt;
tmp3_2 = _annargs;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (0 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_none(), _ostrcmt);
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
case 2: {
if (!optionNone(tmp3_1)) goto tmp2_end;
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
case 3: {
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(_ann), _ostrcmt);
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComment = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComment;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_annotationListToAbsynComment(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inAbsynCommentOption)
{
modelica_metatype _outAbsynCommentOption = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inAbsynNamedArgLst;
tmp3_2 = _inAbsynCommentOption;
{
modelica_metatype _ann = NULL;
modelica_metatype _nargs = NULL;
modelica_string _oldcmt = NULL;
modelica_string _newcmt = NULL;
modelica_metatype _cmtOpt = NULL;
modelica_metatype _annOptOld = NULL;
modelica_metatype _annOptNew = NULL;
modelica_metatype _annOpt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_2)) goto tmp2_end;
_nargs = tmp3_1;
tmp3 += 3;
tmpMeta[1] = omc_InteractiveUtil_annotationListToAbsynComment2(threadData, _nargs);
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_ann = tmpMeta[2];
tmpMeta[0] = mmc_mk_some(_ann);
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (!optionNone(tmpMeta[3])) goto tmp2_end;
_annOptOld = tmpMeta[2];
_nargs = tmp3_1;
tmp3 += 2;
tmpMeta[1] = omc_InteractiveUtil_annotationListToAbsynComment2(threadData, _nargs);
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
_annOptNew = tmpMeta[3];
_cmtOpt = tmpMeta[4];
_annOpt = omc_InteractiveUtil_selectAnnotation(threadData, _annOptNew, _annOptOld);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, _annOpt, _cmtOpt);
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
case 2: {
if (optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
_annOptOld = tmpMeta[2];
_oldcmt = tmpMeta[4];
_nargs = tmp3_1;
tmpMeta[1] = omc_InteractiveUtil_annotationListToAbsynComment2(threadData, _nargs);
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (!optionNone(tmpMeta[4])) goto goto_1;
_annOptNew = tmpMeta[3];
_annOpt = omc_InteractiveUtil_selectAnnotation(threadData, _annOptNew, _annOptOld);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, _annOpt, mmc_mk_some(_oldcmt));
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
case 3: {
if (optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
_annOptOld = tmpMeta[2];
_nargs = tmp3_1;
tmpMeta[1] = omc_InteractiveUtil_annotationListToAbsynComment2(threadData, _nargs);
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (optionNone(tmpMeta[4])) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
_annOptNew = tmpMeta[3];
_newcmt = tmpMeta[5];
_annOpt = omc_InteractiveUtil_selectAnnotation(threadData, _annOptNew, _annOptOld);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, _annOpt, mmc_mk_some(_newcmt));
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _inAbsynCommentOption;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynCommentOption = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynCommentOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_selectAnnotation(threadData_t *threadData, modelica_metatype _newAnn, modelica_metatype _oldAnn)
{
modelica_metatype _outAnn = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _newAnn;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[0] = _newAnn;
goto tmp2_done;
}
case 1: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _oldAnn;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAnn = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAnn;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_modificationToAbsyn2(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst)
{
modelica_metatype _outAbsynModificationOption = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynNamedArgLst;
{
modelica_metatype _exp = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (7 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT179), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_exp = tmpMeta[4];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _exp, _OMC_LIT39);
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta[1], tmpMeta[2]);
tmpMeta[0] = mmc_mk_some(tmpMeta[3]);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (12 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT180), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],18,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],7,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_mod = tmpMeta[6];
tmpMeta[0] = mmc_mk_some(_mod);
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
_inAbsynNamedArgLst = _xs;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynModificationOption = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynModificationOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_modificationToAbsyn(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inAbsynModificationOption)
{
modelica_metatype _outAbsynModificationOption = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynNamedArgLst;
{
modelica_metatype _mod = NULL;
modelica_metatype _nargs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_nargs = tmp3_1;
tmpMeta[1] = omc_InteractiveUtil_modificationToAbsyn2(threadData, _nargs);
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_mod = tmpMeta[2];
tmpMeta[0] = mmc_mk_some(_mod);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inAbsynModificationOption;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynModificationOption = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynModificationOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformClassInElementSpec(threadData_t *threadData, modelica_string _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fspec, modelica_boolean *out_found)
{
modelica_metatype _spec = NULL;
modelica_boolean _found;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_spec = __omcQ_24in_5Fspec;
{
modelica_metatype tmp4_1;
tmp4_1 = _spec;
{
modelica_metatype _cls = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cls = tmpMeta[0];
if (!(stringEqual((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 2))), _name))) goto tmp3_end;
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_spec), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 2))), _cls) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_func), 1)))) (threadData, _cls);
_spec = tmpMeta[0];
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_found = tmp1;
_return: OMC_LABEL_UNUSED
if (out_found) { *out_found = _found; }
return _spec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformClassInElementSpec(threadData_t *threadData, modelica_metatype _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fspec, modelica_metatype *out_found)
{
modelica_boolean _found;
modelica_metatype _spec = NULL;
_spec = omc_InteractiveUtil_transformClassInElementSpec(threadData, _name, _func, __omcQ_24in_5Fspec, &_found);
if (out_found) { *out_found = mmc_mk_icon(_found); }
return _spec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformClassInElement(threadData_t *threadData, modelica_string _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Felement, modelica_boolean *out_found)
{
modelica_metatype _element = NULL;
modelica_boolean _found;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_element = __omcQ_24in_5Felement;
{
modelica_metatype tmp4_1;
tmp4_1 = _element;
{
modelica_metatype _spec = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
_spec = omc_InteractiveUtil_transformClassInElementSpec(threadData, _name, ((modelica_fnptr) _func), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_element), 5))) ,&_found);
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_element), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[5] = _spec;
_element = tmpMeta[0];
tmp1 = _found;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_found = tmp1;
_return: OMC_LABEL_UNUSED
if (out_found) { *out_found = _found; }
return _element;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformClassInElement(threadData_t *threadData, modelica_metatype _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Felement, modelica_metatype *out_found)
{
modelica_boolean _found;
modelica_metatype _element = NULL;
_element = omc_InteractiveUtil_transformClassInElement(threadData, _name, _func, __omcQ_24in_5Felement, &_found);
if (out_found) { *out_found = mmc_mk_icon(_found); }
return _element;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformClassInElementItem(threadData_t *threadData, modelica_string _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fitem, modelica_boolean *out_found)
{
modelica_metatype _item = NULL;
modelica_boolean _found;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_item = __omcQ_24in_5Fitem;
{
modelica_metatype tmp4_1;
tmp4_1 = _item;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
_e = omc_InteractiveUtil_transformClassInElement(threadData, _name, ((modelica_fnptr) _func), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_item), 2))) ,&_found);
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_item), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = _e;
_item = tmpMeta[0];
tmp1 = _found;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_found = tmp1;
_return: OMC_LABEL_UNUSED
if (out_found) { *out_found = _found; }
return _item;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformClassInElementItem(threadData_t *threadData, modelica_metatype _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fitem, modelica_metatype *out_found)
{
modelica_boolean _found;
modelica_metatype _item = NULL;
_item = omc_InteractiveUtil_transformClassInElementItem(threadData, _name, _func, __omcQ_24in_5Fitem, &_found);
if (out_found) { *out_found = mmc_mk_icon(_found); }
return _item;
}
static modelica_metatype closure4_InteractiveUtil_transformClassInElementItem(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_item, modelica_metatype tmp5)
{
modelica_string name = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_transformClassInElementItem(thData, name, func, $in_item, tmp5);
}static modelica_metatype closure5_InteractiveUtil_transformClassInElementItem(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_item, modelica_metatype tmp6)
{
modelica_string name = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_transformClassInElementItem(thData, name, func, $in_item, tmp6);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformClassInClassPart(threadData_t *threadData, modelica_string _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fpart, modelica_boolean *out_found)
{
modelica_metatype _part = NULL;
modelica_boolean _found;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_part = __omcQ_24in_5Fpart;
{
modelica_metatype tmp4_1;
tmp4_1 = _part;
{
modelica_metatype _items = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmpMeta[0] = mmc_mk_box2(0, _name, ((modelica_fnptr) _func));
_items = omc_List_findMap(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 2))), (modelica_fnptr) mmc_mk_box2(0,closure4_InteractiveUtil_transformClassInElementItem,tmpMeta[0]) ,&_found);
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_part), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = _items;
_part = tmpMeta[0];
tmp1 = _found;
goto tmp3_done;
}
case 4: {
tmpMeta[0] = mmc_mk_box2(0, _name, ((modelica_fnptr) _func));
_items = omc_List_findMap(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 2))), (modelica_fnptr) mmc_mk_box2(0,closure5_InteractiveUtil_transformClassInElementItem,tmpMeta[0]) ,&_found);
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_part), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = _items;
_part = tmpMeta[0];
tmp1 = _found;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_found = tmp1;
_return: OMC_LABEL_UNUSED
if (out_found) { *out_found = _found; }
return _part;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_transformClassInClassPart(threadData_t *threadData, modelica_metatype _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fpart, modelica_metatype *out_found)
{
modelica_boolean _found;
modelica_metatype _part = NULL;
_part = omc_InteractiveUtil_transformClassInClassPart(threadData, _name, _func, __omcQ_24in_5Fpart, &_found);
if (out_found) { *out_found = mmc_mk_icon(_found); }
return _part;
}
static modelica_metatype closure6_InteractiveUtil_transformClassInClassPart(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_part, modelica_metatype tmp4)
{
modelica_string name = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_transformClassInClassPart(thData, name, func, $in_part, tmp4);
}static modelica_metatype closure7_InteractiveUtil_transformClassInClassPart(threadData_t *thData, modelica_metatype closure, modelica_metatype $in_part, modelica_metatype tmp5)
{
modelica_string name = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_transformClassInClassPart(thData, name, func, $in_part, tmp5);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformClassInClass(threadData_t *threadData, modelica_string _name, modelica_fnptr _func, modelica_metatype __omcQ_24in_5Fcls)
{
modelica_metatype _cls = NULL;
modelica_metatype _body = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_cls = __omcQ_24in_5Fcls;
_body = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 7)));
{
modelica_metatype tmp3_1;
tmp3_1 = _body;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
tmpMeta[1] = mmc_mk_box2(0, _name, ((modelica_fnptr) _func));
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(7));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_body), 7*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[4] = omc_List_findMap(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))), (modelica_fnptr) mmc_mk_box2(0,closure6_InteractiveUtil_transformClassInClassPart,tmpMeta[1]), NULL);
_body = tmpMeta[0];
goto tmp2_done;
}
case 7: {
tmpMeta[1] = mmc_mk_box2(0, _name, ((modelica_fnptr) _func));
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(7));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_body), 7*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[5] = omc_List_findMap(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 5))), (modelica_fnptr) mmc_mk_box2(0,closure7_InteractiveUtil_transformClassInClassPart,tmpMeta[1]), NULL);
_body = tmpMeta[0];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(9));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_cls), 9*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[7] = _body;
_cls = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _cls;
}
static modelica_metatype closure8_InteractiveUtil_transformPathedClassInClass(threadData_t *thData, modelica_metatype closure, modelica_metatype inClass)
{
modelica_metatype inPath = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_fnptr inFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_transformPathedClassInClass(thData, inPath, inClass, inFunc);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_transformPathedClassInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_fnptr _inFunc)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
tmpMeta[0] = omc_InteractiveUtil_transformClassInClass(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 2))), ((modelica_fnptr) _inFunc), _inClass);
goto tmp2_done;
}
case 3: {
tmpMeta[1] = mmc_mk_box2(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 3))), ((modelica_fnptr) _inFunc));
tmpMeta[0] = omc_InteractiveUtil_transformClassInClass(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 2))), (modelica_fnptr) mmc_mk_box2(0,closure8_InteractiveUtil_transformPathedClassInClass,tmpMeta[1]), _inClass);
goto tmp2_done;
}
case 5: {
_inPath = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 2)));
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_transformClassInProgram(threadData_t *threadData, modelica_string _inName, modelica_metatype _inProgram, modelica_fnptr _inFunc)
{
modelica_metatype _outProgram = NULL;
modelica_metatype _classes = NULL;
modelica_metatype _acc = NULL;
modelica_metatype _wi = NULL;
modelica_metatype _cls = NULL;
modelica_string _name = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_acc = tmpMeta[0];
tmpMeta[1] = _inProgram;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_classes = tmpMeta[2];
_wi = tmpMeta[3];
while(1)
{
if(!1) break;
tmpMeta[1] = _classes;
if (listEmpty(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_cls = tmpMeta[2];
_classes = tmpMeta[3];
tmpMeta[1] = _cls;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_name = tmpMeta[2];
if((stringEqual(_name, _inName)))
{
_cls = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _cls) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _cls);
tmpMeta[1] = mmc_mk_cons(_cls, _classes);
_classes = omc_List_append__reverse(threadData, _acc, tmpMeta[1]);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _classes, _wi);
_outProgram = tmpMeta[1];
break;
}
tmpMeta[1] = mmc_mk_cons(_cls, _acc);
_acc = tmpMeta[1];
}
_return: OMC_LABEL_UNUSED
return _outProgram;
}
static modelica_metatype closure9_InteractiveUtil_transformPathedClassInClass(threadData_t *thData, modelica_metatype closure, modelica_metatype inClass)
{
modelica_metatype inPath = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_fnptr inFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_transformPathedClassInClass(thData, inPath, inClass, inFunc);
}
DLLExport
modelica_metatype omc_InteractiveUtil_transformPathedClassInProgram(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_fnptr _inFunc)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
tmpMeta[0] = omc_InteractiveUtil_transformClassInProgram(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 2))), _inProgram, ((modelica_fnptr) _inFunc));
goto tmp2_done;
}
case 5: {
_inPath = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 2)));
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
tmpMeta[1] = mmc_mk_box2(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 3))), ((modelica_fnptr) _inFunc));
tmpMeta[0] = omc_InteractiveUtil_transformClassInProgram(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 2))), _inProgram, (modelica_fnptr) mmc_mk_box2(0,closure9_InteractiveUtil_transformPathedClassInClass,tmpMeta[1]));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outProgram = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_compareClassName(threadData_t *threadData, modelica_metatype _cl, modelica_string _str)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _cl;
{
modelica_string _c1name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_c1name = tmpMeta[1];
tmp1 = (stringEqual(_str, _c1name));
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_c1name = tmpMeta[0];
tmp1 = (stringEqual(_str, _c1name));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_compareClassName(threadData_t *threadData, modelica_metatype _cl, modelica_metatype _str)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_InteractiveUtil_compareClassName(threadData, _cl, _str);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassInProgram(threadData_t *threadData, modelica_string _inString, modelica_metatype _inProgram)
{
modelica_metatype _cl = NULL;
modelica_metatype _classes = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inProgram;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_classes = tmpMeta[1];
_cl = omc_List_find1(threadData, _classes, boxvar_InteractiveUtil_compareClassName, _inString);
_return: OMC_LABEL_UNUSED
return _cl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynClassLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynElementItemLst;
{
modelica_metatype _res = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,2) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
_class_ = tmpMeta[5];
_rest = tmpMeta[2];
_res = omc_InteractiveUtil_getClassesInElts(threadData, _rest);
tmpMeta[1] = mmc_mk_cons(_class_, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
_inAbsynElementItemLst = _rest;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynClassLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
tmp3 += 1;
_l1 = omc_InteractiveUtil_getClassesInParts(threadData, _rest);
_l2 = omc_InteractiveUtil_getClassesInElts(threadData, _elts);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_l1 = omc_InteractiveUtil_getClassesInParts(threadData, _rest);
_l2 = omc_InteractiveUtil_getClassesInElts(threadData, _elts);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getClassesInParts(threadData, _rest);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynClassLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassesInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynClassLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getClassesInParts(threadData, _parts);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getClassesInParts(threadData, _parts);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassInClass(threadData_t *threadData, modelica_string _inString, modelica_metatype _inClass)
{
modelica_metatype _outClass = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = omc_List_find1(threadData, omc_InteractiveUtil_getClassesInClass(threadData, _inClass), boxvar_InteractiveUtil_compareClassName, _inString);
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWorkNoThrow(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
{
modelica_metatype tmp7_1;
tmp7_1 = _inPath;
{
modelica_metatype _c = NULL;
modelica_string _str = NULL;
modelica_metatype _path = NULL;
int tmp7;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp7_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,1,1) == 0) goto tmp6_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_str = tmpMeta[1];
tmpMeta[0] = omc_InteractiveUtil_getClassInClass(threadData, _str, _inClass);
goto tmp6_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,2,1) == 0) goto tmp6_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_path = tmpMeta[1];
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgramWorkNoThrow(threadData, _path, _inClass);
goto tmp6_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,2) == 0) goto tmp6_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 3));
_str = tmpMeta[1];
_path = tmpMeta[2];
_c = omc_InteractiveUtil_getClassInClass(threadData, _str, _inClass);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgramWorkNoThrow(threadData, _path, _c);
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
_outClass = tmpMeta[0];
goto tmp2_done;
}
case 1: {
_outClass = _inClass;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWorkThrow(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_metatype _c = NULL;
modelica_string _str = NULL;
modelica_metatype _path = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_str = tmpMeta[1];
tmpMeta[0] = omc_InteractiveUtil_getClassInClass(threadData, _str, _inClass);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
_inPath = _path;
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_str = tmpMeta[1];
_path = tmpMeta[2];
_c = omc_InteractiveUtil_getClassInClass(threadData, _str, _inClass);
_inPath = _path;
_inClass = _c;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPathedClassInProgramWork(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _enclOnErr)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_metatype _c = NULL;
modelica_string _str = NULL;
modelica_metatype _path = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_str = tmpMeta[1];
tmpMeta[0] = omc_InteractiveUtil_getClassInProgram(threadData, _str, _inProgram);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, _enclOnErr);
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_str = tmpMeta[1];
_path = tmpMeta[2];
_c = omc_InteractiveUtil_getClassInProgram(threadData, _str, _inProgram);
tmpMeta[0] = (_enclOnErr?omc_InteractiveUtil_getPathedClassInProgramWorkNoThrow(threadData, _path, _c):omc_InteractiveUtil_getPathedClassInProgramWorkThrow(threadData, _path, _c));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getPathedClassInProgramWork(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _enclOnErr)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_enclOnErr);
_outClass = omc_InteractiveUtil_getPathedClassInProgramWork(threadData, _inPath, _inProgram, tmp1);
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPathedClassInProgram(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _enclOnErr)
{
modelica_metatype _outClass = NULL;
modelica_metatype _p = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_outClass = omc_InteractiveUtil_getPathedClassInProgramWork(threadData, _inPath, _inProgram, _enclOnErr);
goto tmp2_done;
}
case 1: {
_p = omc_FBuiltin_getInitialFunctions(threadData, NULL);
_outClass = omc_InteractiveUtil_getPathedClassInProgramWork(threadData, _inPath, _p, _enclOnErr);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outClass;
}
modelica_metatype boxptr_InteractiveUtil_getPathedClassInProgram(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _enclOnErr)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_enclOnErr);
_outClass = omc_InteractiveUtil_getPathedClassInProgram(threadData, _inPath, _inProgram, tmp1);
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classInProgram(threadData_t *threadData, modelica_string _name, modelica_metatype _p)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _p;
{
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
{
modelica_metatype _cl;
for (tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))); !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_cl = MMC_CAR(tmpMeta[0]);
tmpMeta[1] = _cl;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_str = tmpMeta[2];
if((stringEqual(_str, _name)))
{
_b = 1;
goto _return;
}
}
}
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classInProgram(threadData_t *threadData, modelica_metatype _name, modelica_metatype _p)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_InteractiveUtil_classInProgram(threadData, _name, _p);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassFromElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_string _inIdent)
{
modelica_metatype _outClass = NULL;
modelica_metatype _elem = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_elem = omc_List_getMemberOnTrue(threadData, _inIdent, _inElements, boxvar_InteractiveUtil_classElementItemIsNamed);
tmpMeta[0] = _elem;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
_outClass = tmpMeta[3];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInitialAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynInitialAlgorithmItemLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _lst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_lst = tmpMeta[3];
tmpMeta[0] = _lst;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynInitialAlgorithmItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynInitialAlgorithmItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynAlgorithmItemLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _lst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_lst = tmpMeta[3];
tmpMeta[0] = _lst;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynAlgorithmItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynAlgorithmItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInitialEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynInitialEquationItemLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _lst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_lst = tmpMeta[3];
tmpMeta[0] = _lst;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynInitialEquationItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynInitialEquationItemLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynEquationItemLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _lst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_lst = tmpMeta[3];
tmpMeta[0] = _lst;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynEquationItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynEquationItemLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getProtectedList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _res2 = NULL;
modelica_metatype _res1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_res1 = tmpMeta[3];
_rest = tmpMeta[2];
_res2 = omc_InteractiveUtil_getProtectedList(threadData, _rest);
tmpMeta[0] = listAppend(_res1, _res2);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynElementItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPublicList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _res2 = NULL;
modelica_metatype _res1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_res1 = tmpMeta[3];
_rest = tmpMeta[2];
_res2 = omc_InteractiveUtil_getPublicList(threadData, _rest);
tmpMeta[0] = listAppend(_res1, _res2);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynElementItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteProtectedList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _res = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _x = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
_xs = tmpMeta[2];
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_res = omc_InteractiveUtil_deleteProtectedList(threadData, _xs);
tmpMeta[1] = mmc_mk_cons(_x, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deletePublicList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _res = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _x = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
_xs = tmpMeta[2];
_inAbsynClassPartLst = _xs;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_res = omc_InteractiveUtil_deletePublicList(threadData, _xs);
tmpMeta[1] = mmc_mk_cons(_x, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInitialAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynAlgorithmItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inAbsynAlgorithmItemLst;
{
modelica_metatype _x = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _newalgorithmlst = NULL;
modelica_metatype _new = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
_rest = tmpMeta[2];
_newalgorithmlst = tmp3_2;
tmpMeta[2] = mmc_mk_box2(9, &Absyn_ClassPart_INITIALALGORITHMS__desc, _newalgorithmlst);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_new = tmp3_2;
_ys = omc_InteractiveUtil_replaceInitialAlgorithmList(threadData, _xs, _new);
tmpMeta[1] = mmc_mk_cons(_x, _ys);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceAlgorithmList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynAlgorithmItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inAbsynAlgorithmItemLst;
{
modelica_metatype _x = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _newalgorithmlst = NULL;
modelica_metatype _new = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
_rest = tmpMeta[2];
_newalgorithmlst = tmp3_2;
tmpMeta[2] = mmc_mk_box2(8, &Absyn_ClassPart_ALGORITHMS__desc, _newalgorithmlst);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_new = tmp3_2;
_ys = omc_InteractiveUtil_replaceAlgorithmList(threadData, _xs, _new);
tmpMeta[1] = mmc_mk_cons(_x, _ys);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInitialEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynEquationItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inAbsynEquationItemLst;
{
modelica_metatype _x = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _newequationlst = NULL;
modelica_metatype _new = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,1) == 0) goto tmp2_end;
_rest = tmpMeta[2];
_newequationlst = tmp3_2;
tmpMeta[2] = mmc_mk_box2(7, &Absyn_ClassPart_INITIALEQUATIONS__desc, _newequationlst);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_new = tmp3_2;
_ys = omc_InteractiveUtil_replaceInitialEquationList(threadData, _xs, _new);
tmpMeta[1] = mmc_mk_cons(_x, _ys);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_replaceEquationList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynEquationItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inAbsynEquationItemLst;
{
modelica_metatype _x = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _newequationlst = NULL;
modelica_metatype _new = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) goto tmp2_end;
_rest = tmpMeta[2];
_newequationlst = tmp3_2;
tmpMeta[2] = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _newequationlst);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_new = tmp3_2;
_ys = omc_InteractiveUtil_replaceEquationList(threadData, _xs, _new);
tmpMeta[1] = mmc_mk_cons(_x, _ys);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceProtectedList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inAbsynElementItemLst;
{
modelica_metatype _rest_1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _x = NULL;
modelica_metatype _newprotlist = NULL;
modelica_metatype _new = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
_rest = tmpMeta[2];
_newprotlist = tmp3_2;
_rest_1 = omc_InteractiveUtil_deleteProtectedList(threadData, _rest);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _newprotlist);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _rest_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_new = tmp3_2;
_ys = omc_InteractiveUtil_replaceProtectedList(threadData, _xs, _new);
tmpMeta[1] = mmc_mk_cons(_x, _ys);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_newprotlist = tmp3_2;
tmpMeta[2] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _newprotlist);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replacePublicList(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inAbsynElementItemLst;
{
modelica_metatype _rest_1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _x = NULL;
modelica_metatype _newpublst = NULL;
modelica_metatype _new = NULL;
modelica_metatype _newpublist = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
_rest = tmpMeta[2];
_newpublst = tmp3_2;
_rest_1 = omc_InteractiveUtil_deletePublicList(threadData, _rest);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _newpublst);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _rest_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_new = tmp3_2;
_ys = omc_InteractiveUtil_replacePublicList(threadData, _xs, _new);
tmpMeta[1] = mmc_mk_cons(_x, _ys);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_newpublist = tmp3_2;
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _newpublist);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInnerClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inIdent)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_string tmp3_2;
tmp3_1 = _inClass;
tmp3_2 = _inIdent;
{
modelica_metatype _publst = NULL;
modelica_metatype _prolst = NULL;
modelica_metatype _parts = NULL;
modelica_string _name = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_name = tmp3_2;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[0] = omc_InteractiveUtil_getClassFromElementitemlist(threadData, _publst, _name);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_name = tmp3_2;
tmp3 += 2;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta[0] = omc_InteractiveUtil_getClassFromElementitemlist(threadData, _prolst, _name);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_name = tmp3_2;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[0] = omc_InteractiveUtil_getClassFromElementitemlist(threadData, _publst, _name);
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_name = tmp3_2;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta[0] = omc_InteractiveUtil_getClassFromElementitemlist(threadData, _prolst, _name);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_addClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype _info = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inClass;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 8));
_info = tmpMeta[1];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(0), _inClass);
tmpMeta[2] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(0), mmc_mk_none(), _OMC_LIT181, tmpMeta[1], _info, mmc_mk_none());
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta[2]);
tmpMeta[0] = mmc_mk_cons(tmpMeta[3], MMC_REFSTRUCTLIT(mmc_nil));
_outAbsynElementItemLst = listAppend(_inAbsynElementItemLst, tmpMeta[0]);
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass, modelica_boolean _mergeAST, modelica_boolean *out_replaced)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_boolean _replaced;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[14] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inClass;
{
modelica_metatype _res = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _c = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_string _name1 = NULL;
modelica_string _name = NULL;
modelica_boolean _a;
modelica_boolean _e;
modelica_metatype _b = NULL;
modelica_metatype _info = NULL;
modelica_metatype _h = NULL;
modelica_metatype _io = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmp7 = mmc_unbox_integer(tmpMeta[9]);
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 3));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 2));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_a = tmp6;
_b = tmpMeta[6];
_io = tmpMeta[7];
_e = tmp7;
_c1 = tmpMeta[10];
_name1 = tmpMeta[11];
_h = tmpMeta[12];
_xs = tmpMeta[3];
_c2 = tmp4_2;
_name = tmpMeta[13];
if (!(stringEqual(_name1, _name))) goto tmp3_end;
_c = (_mergeAST?omc_InteractiveUtil_mergeClasses(threadData, _c2, _c1):_c2);
tmpMeta[2] = _c;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
_info = tmpMeta[3];
tmpMeta[3] = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(_e), _c);
tmpMeta[4] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_a), _b, _io, tmpMeta[3], _info, _h);
tmpMeta[5] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta[4]);
tmpMeta[2] = mmc_mk_cons(tmpMeta[5], _xs);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_e1 = tmpMeta[2];
_xs = tmpMeta[3];
_c = tmp4_2;
_res = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _xs, _c, _mergeAST ,&_replaced);
tmpMeta[2] = mmc_mk_cons(_e1, _res);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _replaced;
goto tmp3_done;
}
case 2: {
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynElementItemLst = tmpMeta[0+0];
_replaced = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_replaced) { *out_replaced = _replaced; }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInElementitemlist(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inClass, modelica_metatype _mergeAST, modelica_metatype *out_replaced)
{
modelica_integer tmp1;
modelica_boolean _replaced;
modelica_metatype _outAbsynElementItemLst = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outAbsynElementItemLst = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _inAbsynElementItemLst, _inClass, tmp1, &_replaced);
if (out_replaced) { *out_replaced = mmc_mk_icon(_replaced); }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_boolean _mergeAST)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inClass1;
tmp3_2 = _inClass2;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst2 = NULL;
modelica_metatype _prolst = NULL;
modelica_metatype _prolst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _c1 = NULL;
modelica_string _a = NULL;
modelica_string _bcname = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 7; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
modelica_boolean tmp8;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_a = tmpMeta[1];
_b = tmp5;
_c = tmp6;
_d = tmp7;
_e = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[1] = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _publst, _c1, _mergeAST, &tmp8);
_publst2 = tmpMeta[1];
if (1 != tmp8) goto goto_1;
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp9;
modelica_integer tmp10;
modelica_integer tmp11;
modelica_boolean tmp12;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp9 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp10 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp11 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_a = tmpMeta[1];
_b = tmp9;
_c = tmp10;
_d = tmp11;
_e = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_1;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta[1] = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _prolst, _c1, _mergeAST, &tmp12);
_prolst2 = tmpMeta[1];
if (1 != tmp12) goto goto_1;
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _prolst2);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
modelica_integer tmp13;
modelica_integer tmp14;
modelica_integer tmp15;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp13 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp14 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp15 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_a = tmpMeta[1];
_b = tmp13;
_c = tmp14;
_d = tmp15;
_e = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_1;
tmp3 += 3;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst = omc_InteractiveUtil_addClassInElementitemlist(threadData, _publst, _c1);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
modelica_integer tmp16;
modelica_integer tmp17;
modelica_integer tmp18;
modelica_boolean tmp19;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp16 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp17 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp18 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_a = tmpMeta[1];
_b = tmp16;
_c = tmp17;
_d = tmp18;
_e = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[1] = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _publst, _c1, _mergeAST, &tmp19);
_publst2 = tmpMeta[1];
if (1 != tmp19) goto goto_1;
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 4: {
modelica_integer tmp20;
modelica_integer tmp21;
modelica_integer tmp22;
modelica_boolean tmp23;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp20 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp21 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp22 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_a = tmpMeta[1];
_b = tmp20;
_c = tmp21;
_d = tmp22;
_e = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_1;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta[1] = omc_InteractiveUtil_replaceClassInElementitemlist(threadData, _prolst, _c1, _mergeAST, &tmp23);
_prolst2 = tmpMeta[1];
if (1 != tmp23) goto goto_1;
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _prolst2);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 5: {
modelica_integer tmp24;
modelica_integer tmp25;
modelica_integer tmp26;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp24 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp25 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp26 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_a = tmpMeta[1];
_b = tmp24;
_c = tmp25;
_d = tmp26;
_e = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst = omc_InteractiveUtil_addClassInElementitemlist(threadData, _publst, _c1);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 6: {
omc_Print_printBuf(threadData, _OMC_LIT182);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 7) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outClass = omc_InteractiveUtil_replaceInnerClass(threadData, _inClass1, _inClass2, tmp1);
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeClassInElementitemlist(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inClass)
{
modelica_metatype _outElements = NULL;
modelica_string _name = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inClass;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
_outElements = omc_List_deleteMemberOnTrue(threadData, _name, _inElements, boxvar_InteractiveUtil_classElementItemIsNamed, NULL);
_return: OMC_LABEL_UNUSED
return _outElements;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_classElementItemIsNamed(threadData_t *threadData, modelica_string _inClassName, modelica_metatype _inElement)
{
modelica_boolean _outIsNamed;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_string _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_name = tmpMeta[3];
tmp1 = (stringEqual(_inClassName, _name));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsNamed = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsNamed;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_classElementItemIsNamed(threadData_t *threadData, modelica_metatype _inClassName, modelica_metatype _inElement)
{
modelica_boolean _outIsNamed;
modelica_metatype out_outIsNamed;
_outIsNamed = omc_InteractiveUtil_classElementItemIsNamed(threadData, _inClassName, _inElement);
out_outIsNamed = mmc_mk_icon(_outIsNamed);
return out_outIsNamed;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeInnerClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inClass1;
tmp3_2 = _inClass2;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst2 = NULL;
modelica_metatype _prolst = NULL;
modelica_metatype _prolst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _c1 = NULL;
modelica_string _a = NULL;
modelica_string _bcname = NULL;
modelica_string _n = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_a = tmpMeta[1];
_b = tmp5;
_c = tmp6;
_d = tmp7;
_e = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_removeClassInElementitemlist(threadData, _publst, _c1);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_a = tmpMeta[1];
_b = tmp8;
_c = tmp9;
_d = tmp10;
_e = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_1;
tmp3 += 2;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_prolst2 = omc_InteractiveUtil_removeClassInElementitemlist(threadData, _prolst, _c1);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _prolst2);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
modelica_integer tmp11;
modelica_integer tmp12;
modelica_integer tmp13;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp11 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp12 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp13 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_a = tmpMeta[1];
_b = tmp11;
_c = tmp12;
_d = tmp13;
_e = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_removeClassInElementitemlist(threadData, _publst, _c1);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
modelica_integer tmp14;
modelica_integer tmp15;
modelica_integer tmp16;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp14 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp15 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp16 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_a = tmpMeta[1];
_b = tmp14;
_c = tmp15;
_d = tmp16;
_e = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_1;
_prolst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_prolst2 = omc_InteractiveUtil_removeClassInElementitemlist(threadData, _prolst, _c1);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _prolst2);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_n = tmpMeta[1];
_a = tmpMeta[2];
_file_info = tmpMeta[3];
tmpMeta[1] = mmc_mk_cons(_n, mmc_mk_cons(_a, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addSourceMessage(threadData, _OMC_LIT187, tmpMeta[1], _file_info);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getFirstIdentFromPath(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_string _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta[0];
tmp1 = _name;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta[0];
tmp1 = _name;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inWithin2, modelica_metatype _inClass3, modelica_boolean _mergeAST)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inClass1;
tmp3_2 = _inWithin2;
tmp3_3 = _inClass3;
{
modelica_metatype _cnew = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _cinner = NULL;
modelica_string _name2 = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
_c1 = tmp3_1;
_c2 = tmp3_3;
tmpMeta[0] = omc_InteractiveUtil_replaceInnerClass(threadData, _c1, _c2, _mergeAST);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_path = tmpMeta[2];
_c1 = tmp3_1;
_c2 = tmp3_3;
_name2 = omc_InteractiveUtil_getFirstIdentFromPath(threadData, _path);
_cinner = omc_InteractiveUtil_getInnerClass(threadData, _c2, _name2);
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _path);
_cnew = omc_InteractiveUtil_insertClassInClass(threadData, _c1, tmpMeta[1], _cinner, _mergeAST);
tmpMeta[0] = omc_InteractiveUtil_replaceInnerClass(threadData, _cnew, _c2, _mergeAST);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_insertClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inWithin2, modelica_metatype _inClass3, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outClass = omc_InteractiveUtil_insertClassInClass(threadData, _inClass1, _inWithin2, _inClass3, tmp1);
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inWithin, modelica_metatype _inProgram, modelica_boolean _mergeAST)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inClass;
tmp3_2 = _inWithin;
tmp3_3 = _inProgram;
{
modelica_metatype _c2 = NULL;
modelica_metatype _c3 = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _p = NULL;
modelica_metatype _w = NULL;
modelica_string _n1 = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_string _name = NULL;
modelica_metatype _paths = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_w = tmp3_2;
_n1 = tmpMeta[2];
_c1 = tmp3_1;
_p = tmp3_3;
tmp3 += 1;
_c2 = omc_InteractiveUtil_getClassInProgram(threadData, _n1, _p);
_c3 = omc_InteractiveUtil_insertClassInClass(threadData, _c1, _w, _c2, _mergeAST);
tmpMeta[1] = mmc_mk_cons(_c3, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[1], _OMC_LIT7);
tmpMeta[0] = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[2], _p, _mergeAST);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_w = tmp3_2;
_n1 = tmpMeta[2];
_c1 = tmp3_1;
_p = tmp3_3;
tmp3 += 1;
_c2 = omc_InteractiveUtil_getClassInProgram(threadData, _n1, _p);
_c3 = omc_InteractiveUtil_insertClassInClass(threadData, _c1, _w, _c2, _mergeAST);
tmpMeta[1] = mmc_mk_cons(_c3, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[1], _OMC_LIT7);
tmpMeta[0] = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[2], _p, _mergeAST);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (12 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT192), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp2_end;
_p = tmp3_3;
tmpMeta[0] = _p;
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_name = tmpMeta[1];
_w = tmp3_2;
_p = tmp3_3;
_s1 = omc_Dump_unparseWithin(threadData, _w);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
omc_InteractiveUtil_getClassNamesRecursive(threadData, mmc_mk_none(), _p, 0, 0, tmpMeta[1] ,&_paths);
{
modelica_metatype __omcQ_24tmpVar9;
modelica_metatype* tmp5;
modelica_string __omcQ_24tmpVar8;
int tmp6;
modelica_metatype _p_loopVar = 0;
modelica_metatype _p;
_p_loopVar = _paths;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar9 = tmpMeta[2];
tmp5 = &__omcQ_24tmpVar9;
while(1) {
tmp6 = 1;
if (!listEmpty(_p_loopVar)) {
_p = MMC_CAR(_p_loopVar);
_p_loopVar = MMC_CDR(_p_loopVar);
tmp6--;
}
if (tmp6 == 0) {
__omcQ_24tmpVar8 = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT0, 1, 0);
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar8,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar9;
}
_s2 = stringAppendList(omc_List_map1r(threadData, tmpMeta[1], boxvar_stringAppend, _OMC_LIT188));
tmpMeta[1] = mmc_mk_cons(_name, mmc_mk_cons(_s1, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil))));
omc_Error_addMessage(threadData, _OMC_LIT191, tmpMeta[1]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outProgram = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_insertClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inWithin, modelica_metatype _inProgram, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outProgram = omc_InteractiveUtil_insertClassInProgram(threadData, _inClass, _inWithin, _inProgram, tmp1);
return _outProgram;
}
static modelica_metatype closure10_InteractiveUtil_replaceClassInProgram2(threadData_t *thData, modelica_metatype closure, modelica_metatype inClass)
{
modelica_string inClassName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_InteractiveUtil_replaceClassInProgram2(thData, inClass, inClassName);
}static modelica_metatype closure11_InteractiveUtil_replaceClassInProgram2(threadData_t *thData, modelica_metatype closure, modelica_metatype inClass)
{
modelica_string inClassName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_InteractiveUtil_replaceClassInProgram2(thData, inClass, inClassName);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_boolean _mergeAST)
{
modelica_metatype _outProgram = NULL;
modelica_string _cls_name1 = NULL;
modelica_string _cls_name2 = NULL;
modelica_metatype _clst = NULL;
modelica_metatype _clsFilter = NULL;
modelica_metatype _w = NULL;
modelica_boolean _replaced;
modelica_metatype _cls = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inClass;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_cls_name1 = tmpMeta[1];
tmpMeta[0] = _inProgram;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_clst = tmpMeta[1];
_w = tmpMeta[2];
if(_mergeAST)
{
tmpMeta[0] = mmc_mk_box1(0, _cls_name1);
_clsFilter = omc_List_filterOnTrue(threadData, _clst, (modelica_fnptr) mmc_mk_box2(0,closure10_InteractiveUtil_replaceClassInProgram2,tmpMeta[0]));
if(listEmpty(_clsFilter))
{
_cls = _inClass;
}
else
{
tmpMeta[0] = _clsFilter;
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_cls = tmpMeta[1];
_cls = omc_InteractiveUtil_mergeClasses(threadData, _inClass, _cls);
}
}
else
{
_cls = _inClass;
}
tmpMeta[0] = mmc_mk_box1(0, _cls_name1);
_clst = omc_List_replaceOnTrue(threadData, _cls, _clst, (modelica_fnptr) mmc_mk_box2(0,closure11_InteractiveUtil_replaceClassInProgram2,tmpMeta[0]) ,&_replaced);
if((!_replaced))
{
_clst = omc_List_appendElt(threadData, _inClass, _clst);
}
tmpMeta[0] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _clst, _w);
_outProgram = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInProgram(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outProgram = omc_InteractiveUtil_replaceClassInProgram(threadData, _inClass, _inProgram, tmp1);
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_replaceClassInProgram2(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inClassName)
{
modelica_boolean _outReplace;
modelica_string _cls_name = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inClass;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_cls_name = tmpMeta[1];
_outReplace = (stringEqual(_cls_name, _inClassName));
_return: OMC_LABEL_UNUSED
return _outReplace;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_replaceClassInProgram2(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inClassName)
{
modelica_boolean _outReplace;
modelica_metatype out_outReplace;
_outReplace = omc_InteractiveUtil_replaceClassInProgram2(threadData, _inClass, _inClassName);
out_outReplace = mmc_mk_icon(_outReplace);
return out_outReplace;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildPath(threadData_t *threadData, modelica_metatype _inWithin, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inWithin;
tmp3_2 = _inPath;
{
modelica_metatype _p = NULL;
modelica_metatype _p1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,0) == 0) goto tmp2_end;
_p = tmp3_2;
tmpMeta[0] = _p;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_p1 = tmp3_2;
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _p, _p1);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addToEquation(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEquationItem)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inClass;
tmp3_2 = _inEquationItem;
{
modelica_metatype _eqlst = NULL;
modelica_metatype _eqlst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _newparts = NULL;
modelica_string _i = NULL;
modelica_string _baseClassName = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _eitem = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
tmpMeta[1] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
_eqlst2 = listAppend(_eqlst, tmpMeta[1]);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst2);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
tmp3 += 2;
tmpMeta[2] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, tmpMeta[2]);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], MMC_REFSTRUCTLIT(mmc_nil));
_newparts = listAppend(_parts, tmpMeta[1]);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _newparts, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
modelica_integer tmp11;
modelica_integer tmp12;
modelica_integer tmp13;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp11 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp12 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp13 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp11;
_f = tmp12;
_e = tmp13;
_r = tmpMeta[5];
_baseClassName = tmpMeta[7];
_modifications = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
tmpMeta[1] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
_eqlst2 = listAppend(_eqlst, tmpMeta[1]);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst2);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
modelica_integer tmp14;
modelica_integer tmp15;
modelica_integer tmp16;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp14 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp15 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp16 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp14;
_f = tmp15;
_e = tmp16;
_r = tmpMeta[5];
_baseClassName = tmpMeta[7];
_modifications = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
tmpMeta[2] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, tmpMeta[2]);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], MMC_REFSTRUCTLIT(mmc_nil));
_newparts = listAppend(_parts, tmpMeta[1]);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _newparts, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addToProtected(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementItem)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inClass;
tmp3_2 = _inElementItem;
{
modelica_metatype _protlst = NULL;
modelica_metatype _protlst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _baseClassName = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _eitem = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta[1] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
_protlst2 = listAppend(_protlst, tmpMeta[1]);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _protlst2);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
tmp3 += 2;
tmpMeta[2] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, tmpMeta[2]);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _parts);
tmpMeta[4] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, tmpMeta[1], _ann, _cmt);
tmpMeta[5] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[4], _file_info);
tmpMeta[0] = tmpMeta[5];
goto tmp2_done;
}
case 2: {
modelica_integer tmp11;
modelica_integer tmp12;
modelica_integer tmp13;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp11 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp12 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp13 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp11;
_f = tmp12;
_e = tmp13;
_r = tmpMeta[5];
_baseClassName = tmpMeta[7];
_modifications = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta[1] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
_protlst2 = listAppend(_protlst, tmpMeta[1]);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _protlst2);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
modelica_integer tmp14;
modelica_integer tmp15;
modelica_integer tmp16;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp14 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp15 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp16 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp14;
_f = tmp15;
_e = tmp16;
_r = tmpMeta[5];
_baseClassName = tmpMeta[7];
_modifications = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
tmpMeta[2] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, tmpMeta[2]);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _parts);
tmpMeta[4] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, tmpMeta[1], _ann);
tmpMeta[5] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[4], _file_info);
tmpMeta[0] = tmpMeta[5];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addToPublic(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inElementItem)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inClass;
tmp3_2 = _inElementItem;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst2 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _baseClassName = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _eitem = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[1] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
_publst2 = listAppend(_publst, tmpMeta[1]);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
tmp3 += 2;
tmpMeta[2] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, tmpMeta[2]);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _parts);
tmpMeta[4] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, tmpMeta[1], _ann, _cmt);
tmpMeta[5] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[4], _file_info);
tmpMeta[0] = tmpMeta[5];
goto tmp2_done;
}
case 2: {
modelica_integer tmp11;
modelica_integer tmp12;
modelica_integer tmp13;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp11 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp12 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp13 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp11;
_f = tmp12;
_e = tmp13;
_r = tmpMeta[5];
_baseClassName = tmpMeta[7];
_modifications = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[1] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
_publst2 = listAppend(_publst, tmpMeta[1]);
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
modelica_integer tmp14;
modelica_integer tmp15;
modelica_integer tmp16;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp14 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp15 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp16 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp14;
_f = tmp15;
_e = tmp16;
_r = tmpMeta[5];
_baseClassName = tmpMeta[7];
_modifications = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_eitem = tmp3_2;
tmpMeta[2] = mmc_mk_cons(_eitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, tmpMeta[2]);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _parts);
tmpMeta[4] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _cmt, tmpMeta[1], _ann);
tmpMeta[5] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[4], _file_info);
tmpMeta[0] = tmpMeta[5];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentItemsName(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inQuoteNames)
{
modelica_metatype _outStrings = NULL;
modelica_string _name = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStrings = tmpMeta[0];
{
modelica_metatype _comp;
for (tmpMeta[1] = listReverse(_inComponents); !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_comp = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _comp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
modelica_string tmp6;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_name = tmpMeta[3];
tmp5 = (modelica_boolean)_inQuoteNames;
if(tmp5)
{
tmpMeta[3] = mmc_mk_cons(_OMC_LIT28, mmc_mk_cons(_name, mmc_mk_cons(_OMC_LIT28, MMC_REFSTRUCTLIT(mmc_nil))));
tmp6 = stringAppendList(tmpMeta[3]);
}
else
{
tmp6 = _name;
}
tmpMeta[2] = mmc_mk_cons(tmp6, _outStrings);
_outStrings = tmpMeta[2];
goto tmp2_done;
}
case 1: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
}
}
_return: OMC_LABEL_UNUSED
return _outStrings;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentItemsName(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inQuoteNames)
{
modelica_integer tmp1;
modelica_metatype _outStrings = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
tmp1 = mmc_unbox_integer(_inQuoteNames);
_outStrings = omc_InteractiveUtil_getComponentItemsName(threadData, _inComponents, tmp1);
return _outStrings;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentItemsNameAndComment(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inQuoteNames)
{
modelica_metatype _outStrings = NULL;
modelica_string _name = NULL;
modelica_string _cmt_str = NULL;
modelica_string _str = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStrings = tmpMeta[0];
{
modelica_metatype _comp;
for (tmpMeta[1] = listReverse(_inComponents); !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_comp = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _comp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
modelica_string tmp6;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_name = tmpMeta[3];
_cmt_str = omc_InteractiveUtil_getClassCommentInCommentOpt(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 4))));
tmp5 = (modelica_boolean)_inQuoteNames;
if(tmp5)
{
tmpMeta[3] = mmc_mk_cons(_OMC_LIT28, mmc_mk_cons(_name, mmc_mk_cons(_OMC_LIT29, mmc_mk_cons(_cmt_str, mmc_mk_cons(_OMC_LIT28, MMC_REFSTRUCTLIT(mmc_nil))))));
tmp6 = stringAppendList(tmpMeta[3]);
}
else
{
tmpMeta[4] = mmc_mk_cons(_name, mmc_mk_cons(_OMC_LIT30, mmc_mk_cons(_cmt_str, mmc_mk_cons(_OMC_LIT28, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp6 = stringAppendList(tmpMeta[4]);
}
tmpMeta[2] = mmc_mk_cons(tmp6, _outStrings);
_outStrings = tmpMeta[2];
goto tmp2_done;
}
case 1: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
}
}
_return: OMC_LABEL_UNUSED
return _outStrings;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentItemsNameAndComment(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inQuoteNames)
{
modelica_integer tmp1;
modelica_metatype _outStrings = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
tmp1 = mmc_unbox_integer(_inQuoteNames);
_outStrings = omc_InteractiveUtil_getComponentItemsNameAndComment(threadData, _inComponents, tmp1);
return _outStrings;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_prefixTypename(threadData_t *threadData, modelica_string _inType, modelica_metatype _inComponents)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype __omcQ_24tmpVar11;
modelica_metatype* tmp1;
modelica_string __omcQ_24tmpVar10;
int tmp2;
modelica_metatype _c_loopVar = 0;
modelica_metatype _c;
_c_loopVar = _inComponents;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar11 = tmpMeta[1];
tmp1 = &__omcQ_24tmpVar11;
while(1) {
tmp2 = 1;
if (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
tmp2--;
}
if (tmp2 == 0) {
tmpMeta[2] = mmc_mk_cons(_inType, mmc_mk_cons(_OMC_LIT27, mmc_mk_cons(_c, MMC_REFSTRUCTLIT(mmc_nil))));
__omcQ_24tmpVar10 = stringAppendList(tmpMeta[2]);
*tmp1 = mmc_mk_cons(__omcQ_24tmpVar10,0);
tmp1 = &MMC_CDR(*tmp1);
} else if (tmp2 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp1 = mmc_mk_nil();
tmpMeta[0] = __omcQ_24tmpVar11;
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_suffixInfos(threadData_t *threadData, modelica_metatype _eltInfo, modelica_metatype _idims, modelica_string _typeAd, modelica_string _suffix, modelica_boolean _inQuoteNames)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_boolean tmp3_3;
tmp3_1 = _eltInfo;
tmp3_2 = _idims;
tmp3_3 = _inQuoteNames;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _dims = NULL;
modelica_string _str_1 = NULL;
modelica_string _str = NULL;
modelica_string _dim = NULL;
modelica_string _s1 = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
modelica_string tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_2);
tmpMeta[4] = MMC_CDR(tmp3_2);
_str = tmpMeta[1];
_rest = tmpMeta[2];
_dim = tmpMeta[3];
_dims = tmpMeta[4];
_b = tmp3_3;
_res = omc_InteractiveUtil_suffixInfos(threadData, _rest, _dims, _typeAd, _suffix, _b);
tmpMeta[1] = mmc_mk_cons(_dim, mmc_mk_cons(_typeAd, MMC_REFSTRUCTLIT(mmc_nil)));
_s1 = omc_Util_stringDelimitListNonEmptyElts(threadData, tmpMeta[1], _OMC_LIT10);
tmp5 = (modelica_boolean)_b;
if(tmp5)
{
tmpMeta[1] = mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT27, mmc_mk_cons(_suffix, mmc_mk_cons(_OMC_LIT193, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT194, MMC_REFSTRUCTLIT(mmc_nil)))))));
tmp6 = stringAppendList(tmpMeta[1]);
}
else
{
tmpMeta[2] = mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT27, mmc_mk_cons(_suffix, mmc_mk_cons(_OMC_LIT195, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil)))))));
tmp6 = stringAppendList(tmpMeta[2]);
}
_str_1 = tmp6;
tmpMeta[1] = mmc_mk_cons(_str_1, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_suffixInfos(threadData_t *threadData, modelica_metatype _eltInfo, modelica_metatype _idims, modelica_metatype _typeAd, modelica_metatype _suffix, modelica_metatype _inQuoteNames)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inQuoteNames);
_outStringLst = omc_InteractiveUtil_suffixInfos(threadData, _eltInfo, _idims, _typeAd, _suffix, tmp1);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsDimension(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynComponentItemLst;
{
modelica_string _str = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ad = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmpMeta[2]);
tmpMeta[6] = MMC_CDR(tmpMeta[2]);
_ad = tmpMeta[4];
_c2 = tmpMeta[5];
_rest = tmpMeta[6];
tmpMeta[1] = mmc_mk_cons(_c2, _rest);
_lst = omc_InteractiveUtil_getComponentitemsDimension(threadData, tmpMeta[1]);
_str = stringDelimitList(omc_List_map(threadData, _ad, boxvar_Dump_printSubscriptStr), _OMC_LIT10);
tmpMeta[1] = mmc_mk_cons(_str, _lst);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getComponentitemsDimension(threadData, _rest);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_ad = tmpMeta[4];
_str = stringDelimitList(omc_List_map(threadData, _ad, boxvar_Dump_printSubscriptStr), _OMC_LIT10);
tmpMeta[1] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrDirectionStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT196;
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT197;
goto tmp3_done;
}
case 2: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT198;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrDimensionStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
modelica_metatype _ad = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_ad = tmpMeta[0];
tmp1 = omc_InteractiveUtil_arrayDimensionStr(threadData, mmc_mk_some(_ad));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrVariabilityStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT198;
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT199;
goto tmp3_done;
}
case 2: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT200;
goto tmp3_done;
}
case 3: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT201;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrParallelismStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT202;
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT203;
goto tmp3_done;
}
case 2: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrStreamStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
modelica_boolean _s;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_s = tmp6;
tmp1 = (_s?_OMC_LIT23:_OMC_LIT24);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_attrFlowStr(threadData_t *threadData, modelica_metatype _inElementAttributes)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementAttributes;
{
modelica_boolean _f;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_f = tmp6;
tmp1 = (_f?_OMC_LIT23:_OMC_LIT24);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_innerOuterStr(threadData_t *threadData, modelica_metatype _inInnerOuter)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inInnerOuter;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = _OMC_LIT204;
goto tmp3_done;
}
case 4: {
tmp1 = _OMC_LIT205;
goto tmp3_done;
}
case 6: {
tmp1 = _OMC_LIT206;
goto tmp3_done;
}
case 5: {
tmp1 = _OMC_LIT207;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentInfoOld(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inEnv)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inElement;
tmp3_2 = _inEnv;
{
modelica_metatype _env_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _envpath = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _p = NULL;
modelica_string _tpname = NULL;
modelica_string _typename = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _names = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_p = tmpMeta[3];
_lst = tmpMeta[4];
_env = tmp3_2;
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _p, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 6)))) ,NULL ,&_env_1);
tmpMeta[1] = omc_FGraph_getScopePath(threadData, _env_1);
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_envpath = tmpMeta[2];
_tpname = omc_AbsynUtil_pathLastIdent(threadData, _p);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _tpname);
_p_1 = omc_AbsynUtil_joinPaths(threadData, _envpath, tmpMeta[1]);
_typename = omc_AbsynUtil_pathString(threadData, _p_1, _OMC_LIT0, 1, 0);
_names = omc_InteractiveUtil_getComponentItemsNameAndComment(threadData, _lst, 0);
tmpMeta[0] = omc_InteractiveUtil_prefixTypename(threadData, _typename, _names);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_p = tmpMeta[3];
_lst = tmpMeta[4];
_typename = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT0, 1, 0);
_names = omc_InteractiveUtil_getComponentItemsNameAndComment(threadData, _lst, 0);
tmpMeta[0] = omc_InteractiveUtil_prefixTypename(threadData, _typename, _names);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
fputs(MMC_STRINGDATA(_OMC_LIT208),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
DLLExport
modelica_boolean omc_InteractiveUtil_keywordReplaceable(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynRedeclareKeywordsOption;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_keywordReplaceable(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_keywordReplaceable(threadData, _inAbsynRedeclareKeywordsOption);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsInfo2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv, modelica_metatype _acc)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_boolean tmp3_2;modelica_string tmp3_3;modelica_metatype tmp3_4;
tmp3_1 = _inAbsynElementLst;
tmp3_2 = _inBoolean;
tmp3_3 = _inString;
tmp3_4 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _rest = NULL;
modelica_string _access = NULL;
modelica_metatype _env = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = listReverse(_acc);
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_elt = tmpMeta[1];
_rest = tmpMeta[2];
_b = tmp3_2;
_access = tmp3_3;
_env = tmp3_4;
_res = omc_InteractiveUtil_getComponentInfo(threadData, _elt, _b, _access, _env);
_inAbsynElementLst = _rest;
_inBoolean = _b;
_inString = _access;
_inEnv = _env;
_acc = omc_List_append__reverse(threadData, _res, _acc);
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentsInfo2(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv, modelica_metatype _acc)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outStringLst = omc_InteractiveUtil_getComponentsInfo2(threadData, _inAbsynElementLst, tmp1, _inString, _inEnv, _acc);
return _outStringLst;
}
DLLExport
modelica_string omc_InteractiveUtil_getComponentsInfo(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_boolean _inBoolean, modelica_string _inString, modelica_metatype _inEnv)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynElementLst;
tmp4_2 = _inString;
tmp4_3 = _inEnv;
{
modelica_metatype _lst = NULL;
modelica_string _lst_1 = NULL;
modelica_string _access = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_elts = tmp4_1;
_access = tmp4_2;
_env = tmp4_3;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = omc_InteractiveUtil_getComponentsInfo2(threadData, _elts, _inBoolean, _access, _env, tmpMeta[0]);
if (listEmpty(tmpMeta[1])) goto goto_2;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_lst = tmpMeta[1];
_lst_1 = stringDelimitList(_lst, _OMC_LIT11);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_lst_1, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getComponentsInfo(threadData_t *threadData, modelica_metatype _inAbsynElementLst, modelica_metatype _inBoolean, modelica_metatype _inString, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outString = omc_InteractiveUtil_getComponentsInfo(threadData, _inAbsynElementLst, tmp1, _inString, _inEnv);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_arrayDimensionStr(threadData_t *threadData, modelica_metatype _ad)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _ad;
{
modelica_metatype _adim = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_adim = tmpMeta[0];
tmp1 = stringDelimitList(omc_List_map(threadData, _adim, boxvar_Dump_printSubscriptStr), _OMC_LIT10);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_boolean _inQuoteNames, modelica_string _inVisibility, modelica_metatype _inEnv)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inElement;
{
modelica_metatype _attr = NULL;
modelica_metatype _p = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _names = NULL;
modelica_metatype _dims = NULL;
modelica_string _typename = NULL;
modelica_string _final_str = NULL;
modelica_string _repl_str = NULL;
modelica_string _io_str = NULL;
modelica_string _flow_str = NULL;
modelica_string _stream_str = NULL;
modelica_string _var_str = NULL;
modelica_string _dir_str = NULL;
modelica_string _dim_str = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_attr = tmpMeta[2];
_p = tmpMeta[4];
_comps = tmpMeta[5];
_typename = omc_AbsynUtil_pathString(threadData, omc_InteractiveUtil_qualifyPath(threadData, _inEnv, _p), _OMC_LIT0, 1, 0);
_names = omc_InteractiveUtil_getComponentItemsNameAndComment(threadData, _comps, _inQuoteNames);
_dims = omc_InteractiveUtil_getComponentitemsDimension(threadData, _comps);
_final_str = (mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 2))))?_OMC_LIT23:_OMC_LIT24);
_repl_str = (omc_InteractiveUtil_keywordReplaceable(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 3))))?_OMC_LIT23:_OMC_LIT24);
_io_str = omc_InteractiveUtil_innerOuterStr(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElement), 4))));
_flow_str = omc_InteractiveUtil_attrFlowStr(threadData, _attr);
_stream_str = omc_InteractiveUtil_attrStreamStr(threadData, _attr);
_var_str = omc_InteractiveUtil_attrVariabilityStr(threadData, _attr);
_dir_str = omc_InteractiveUtil_attrDirectionStr(threadData, _attr);
_dim_str = omc_InteractiveUtil_attrDimensionStr(threadData, _attr);
if(_inQuoteNames)
{
_typename = omc_StringUtil_quote(threadData, _typename);
_final_str = omc_StringUtil_quote(threadData, _final_str);
_repl_str = omc_StringUtil_quote(threadData, _repl_str);
_flow_str = omc_StringUtil_quote(threadData, _flow_str);
_stream_str = omc_StringUtil_quote(threadData, _stream_str);
}
_names = omc_InteractiveUtil_prefixTypename(threadData, _typename, _names);
tmpMeta[1] = mmc_mk_cons(_inVisibility, mmc_mk_cons(_final_str, mmc_mk_cons(_flow_str, mmc_mk_cons(_stream_str, mmc_mk_cons(_repl_str, mmc_mk_cons(_var_str, mmc_mk_cons(_io_str, mmc_mk_cons(_dir_str, MMC_REFSTRUCTLIT(mmc_nil)))))))));
_str = stringDelimitList(tmpMeta[1], _OMC_LIT27);
tmpMeta[0] = omc_InteractiveUtil_suffixInfos(threadData, _names, _dims, _dim_str, _str, _inQuoteNames);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentInfo(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inQuoteNames, modelica_metatype _inVisibility, modelica_metatype _inEnv)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inQuoteNames);
_outStringLst = omc_InteractiveUtil_getComponentInfo(threadData, _inElement, tmp1, _inVisibility, _inEnv);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNthComponentInElementitems(threadData_t *threadData, modelica_metatype _inElements, modelica_integer _inInteger)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta[15] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_integer tmp3_2;
tmp3_1 = _inElements;
tmp3_2 = _inInteger;
{
modelica_boolean _a;
modelica_metatype _b = NULL;
modelica_metatype _c = NULL;
modelica_metatype _e = NULL;
modelica_metatype _f = NULL;
modelica_metatype _item = NULL;
modelica_metatype _info = NULL;
modelica_metatype _i = NULL;
modelica_integer _numcomps;
modelica_integer _newn;
modelica_integer _n;
modelica_metatype _res = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (1 != tmp3_2) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],3,3) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
if (listEmpty(tmpMeta[10])) goto tmp2_end;
tmpMeta[11] = MMC_CAR(tmpMeta[10]);
tmpMeta[12] = MMC_CDR(tmpMeta[10]);
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 6));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 7));
_a = tmp5;
_b = tmpMeta[5];
_c = tmpMeta[6];
_e = tmpMeta[8];
_f = tmpMeta[9];
_item = tmpMeta[11];
_info = tmpMeta[13];
_i = tmpMeta[14];
tmpMeta[1] = mmc_mk_cons(_item, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _e, _f, tmpMeta[1]);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_a), _b, _c, tmpMeta[2], _info, _i);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 1: {
modelica_integer tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],3,3) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 7));
_a = tmp6;
_b = tmpMeta[5];
_c = tmpMeta[6];
_e = tmpMeta[8];
_f = tmpMeta[9];
_lst = tmpMeta[10];
_info = tmpMeta[11];
_i = tmpMeta[12];
_rest = tmpMeta[2];
_n = tmp3_2;
_numcomps = listLength(_lst);
if((_n > _numcomps))
{
_newn = _n - _numcomps;
_res = omc_InteractiveUtil_getNthComponentInElementitems(threadData, _rest, _newn);
}
else
{
_item = listGet(_lst, _n);
tmpMeta[1] = mmc_mk_cons(_item, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _e, _f, tmpMeta[1]);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_a), _b, _c, tmpMeta[2], _info, _i);
_res = tmpMeta[3];
}
tmpMeta[0] = _res;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
_n = tmp3_2;
_inElements = _rest;
_inInteger = _n;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElement = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthComponentInElementitems(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_metatype _outElement = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outElement = omc_InteractiveUtil_getNthComponentInElementitems(threadData, _inElements, tmp1);
return _outElement;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getNthComponentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_integer _inInteger)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta[14] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_integer tmp3_2;
tmp3_1 = _inClass;
tmp3_2 = _inInteger;
{
modelica_integer _count;
modelica_integer _n;
modelica_integer _c1;
modelica_integer _newn;
modelica_string _a = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 10; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_elt = tmpMeta[5];
_n = tmp3_2;
_count = omc_InteractiveUtil_countComponentsInElts(threadData, _elt, ((modelica_integer) 0));
tmp5 = (_n <= _count);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = omc_InteractiveUtil_getNthComponentInElementitems(threadData, _elt, _n);
goto tmp2_done;
}
case 1: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
modelica_boolean tmp9;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp7 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp8 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
if (listEmpty(tmpMeta[7])) goto tmp2_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],0,1) == 0) goto tmp2_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_a = tmpMeta[1];
_b = tmp6;
_c = tmp7;
_d = tmp8;
_e = tmpMeta[5];
_elt = tmpMeta[10];
_rest = tmpMeta[9];
_ann = tmpMeta[11];
_cmt = tmpMeta[12];
_file_info = tmpMeta[13];
_n = tmp3_2;
tmp3 += 2;
_c1 = omc_InteractiveUtil_countComponentsInElts(threadData, _elt, ((modelica_integer) 0));
_newn = _n - _c1;
tmp9 = (_newn > ((modelica_integer) 0));
if (1 != tmp9) goto goto_1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[1], tmpMeta[2], _rest, _ann, _cmt);
tmpMeta[4] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[3], _file_info);
tmpMeta[0] = omc_InteractiveUtil_getNthComponentInClass(threadData, tmpMeta[4], _newn);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_elt = tmpMeta[5];
_n = tmp3_2;
tmpMeta[0] = omc_InteractiveUtil_getNthComponentInElementitems(threadData, _elt, _n);
goto tmp2_done;
}
case 3: {
modelica_integer tmp10;
modelica_integer tmp11;
modelica_integer tmp12;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp10 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp11 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp12 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
if (listEmpty(tmpMeta[7])) goto tmp2_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],1,1) == 0) goto tmp2_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_a = tmpMeta[1];
_b = tmp10;
_c = tmp11;
_d = tmp12;
_e = tmpMeta[5];
_elt = tmpMeta[10];
_rest = tmpMeta[9];
_ann = tmpMeta[11];
_cmt = tmpMeta[12];
_file_info = tmpMeta[13];
_n = tmp3_2;
_c1 = omc_InteractiveUtil_countComponentsInElts(threadData, _elt, ((modelica_integer) 0));
_newn = _n - _c1;
if((!(_newn > ((modelica_integer) 0))))
{
goto goto_1;
}
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[1], tmpMeta[2], _rest, _ann, _cmt);
tmpMeta[4] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[3], _file_info);
tmpMeta[0] = omc_InteractiveUtil_getNthComponentInClass(threadData, tmpMeta[4], _newn);
goto tmp2_done;
}
case 4: {
modelica_integer tmp13;
modelica_integer tmp14;
modelica_integer tmp15;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp13 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp14 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp15 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
if (listEmpty(tmpMeta[7])) goto tmp2_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_a = tmpMeta[1];
_b = tmp13;
_c = tmp14;
_d = tmp15;
_e = tmpMeta[5];
_lst = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_n = tmp3_2;
tmp3 += 5;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[1], tmpMeta[2], _lst, _ann, _cmt);
tmpMeta[4] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[3], _file_info);
tmpMeta[0] = omc_InteractiveUtil_getNthComponentInClass(threadData, tmpMeta[4], _n);
goto tmp2_done;
}
case 5: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_elt = tmpMeta[5];
_n = tmp3_2;
_count = omc_InteractiveUtil_countComponentsInElts(threadData, _elt, ((modelica_integer) 0));
if((!(_n <= _count)))
{
goto goto_1;
}
tmpMeta[0] = omc_InteractiveUtil_getNthComponentInElementitems(threadData, _elt, _n);
goto tmp2_done;
}
case 6: {
modelica_integer tmp16;
modelica_integer tmp17;
modelica_integer tmp18;
modelica_boolean tmp19;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp16 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp17 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp18 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
if (listEmpty(tmpMeta[8])) goto tmp2_end;
tmpMeta[9] = MMC_CAR(tmpMeta[8]);
tmpMeta[10] = MMC_CDR(tmpMeta[8]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],0,1) == 0) goto tmp2_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_a = tmpMeta[1];
_b = tmp16;
_c = tmp17;
_d = tmp18;
_e = tmpMeta[5];
_cmt = tmpMeta[7];
_elt = tmpMeta[11];
_rest = tmpMeta[10];
_ann = tmpMeta[12];
_file_info = tmpMeta[13];
_n = tmp3_2;
tmp3 += 2;
_c1 = omc_InteractiveUtil_countComponentsInElts(threadData, _elt, ((modelica_integer) 0));
_newn = _n - _c1;
tmp19 = (_newn > ((modelica_integer) 0));
if (1 != tmp19) goto goto_1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[1], tmpMeta[2], _rest, _ann, _cmt);
tmpMeta[4] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[3], _file_info);
tmpMeta[0] = omc_InteractiveUtil_getNthComponentInClass(threadData, tmpMeta[4], _newn);
goto tmp2_done;
}
case 7: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_elt = tmpMeta[5];
_n = tmp3_2;
tmpMeta[0] = omc_InteractiveUtil_getNthComponentInElementitems(threadData, _elt, _n);
goto tmp2_done;
}
case 8: {
modelica_integer tmp20;
modelica_integer tmp21;
modelica_integer tmp22;
modelica_boolean tmp23;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp20 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp21 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp22 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
if (listEmpty(tmpMeta[8])) goto tmp2_end;
tmpMeta[9] = MMC_CAR(tmpMeta[8]);
tmpMeta[10] = MMC_CDR(tmpMeta[8]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],1,1) == 0) goto tmp2_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_a = tmpMeta[1];
_b = tmp20;
_c = tmp21;
_d = tmp22;
_e = tmpMeta[5];
_cmt = tmpMeta[7];
_elt = tmpMeta[11];
_rest = tmpMeta[10];
_ann = tmpMeta[12];
_file_info = tmpMeta[13];
_n = tmp3_2;
_c1 = omc_InteractiveUtil_countComponentsInElts(threadData, _elt, ((modelica_integer) 0));
_newn = _n - _c1;
tmp23 = (_newn > ((modelica_integer) 0));
if (1 != tmp23) goto goto_1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[1], tmpMeta[2], _rest, _ann, _cmt);
tmpMeta[4] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[3], _file_info);
tmpMeta[0] = omc_InteractiveUtil_getNthComponentInClass(threadData, tmpMeta[4], _newn);
goto tmp2_done;
}
case 9: {
modelica_integer tmp24;
modelica_integer tmp25;
modelica_integer tmp26;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp24 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp25 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp26 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
if (listEmpty(tmpMeta[8])) goto tmp2_end;
tmpMeta[9] = MMC_CAR(tmpMeta[8]);
tmpMeta[10] = MMC_CDR(tmpMeta[8]);
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_a = tmpMeta[1];
_b = tmp24;
_c = tmp25;
_d = tmp26;
_e = tmpMeta[5];
_cmt = tmpMeta[7];
_lst = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_n = tmp3_2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[1], tmpMeta[2], _lst, _ann, _cmt);
tmpMeta[4] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[3], _file_info);
tmpMeta[0] = omc_InteractiveUtil_getNthComponentInClass(threadData, tmpMeta[4], _n);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 10) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElement = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElement;
}
modelica_metatype boxptr_InteractiveUtil_getNthComponentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_metatype _outElement = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outElement = omc_InteractiveUtil_getNthComponentInClass(threadData, _inClass, tmp1);
return _outElement;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getComponentsInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outAbsynElementLst = tmpMeta[0];
{
modelica_metatype _el;
for (tmpMeta[1] = _inAbsynElementItemLst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_el = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _el;
{
modelica_metatype _elt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_elt = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_elt, _outAbsynElementLst);
_outAbsynElementLst = tmpMeta[2];
goto tmp2_done;
}
case 1: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
}
}
_outAbsynElementLst = listReverseInPlace(_outAbsynElementLst);
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getProtectedComponentsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp7_1;
tmp7_1 = _elt;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,1,1) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getComponentsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp6_done;
}
case 1: {
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp11_1;
tmp11_1 = _elt;
{
volatile mmc_switch_type tmp11;
int tmp12;
tmp11 = 0;
for (; tmp11 < 2; tmp11++) {
switch (MMC_SWITCH_CAST(tmp11)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp11_1,1,1) == 0) goto tmp10_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp11_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getComponentsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp10_done;
}
case 1: {
goto tmp10_done;
}
}
goto tmp10_end;
tmp10_end: ;
}
goto goto_9;
goto_9:;
goto goto_1;
goto tmp10_done;
tmp10_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynElementLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPublicComponentsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp7_1;
tmp7_1 = _elt;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,1) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getComponentsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp6_done;
}
case 1: {
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp11_1;
tmp11_1 = _elt;
{
volatile mmc_switch_type tmp11;
int tmp12;
tmp11 = 0;
for (; tmp11 < 2; tmp11++) {
switch (MMC_SWITCH_CAST(tmp11)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp11_1,0,1) == 0) goto tmp10_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp11_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getComponentsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp10_done;
}
case 1: {
goto tmp10_done;
}
}
goto tmp10_end;
tmp10_end: ;
}
goto goto_9;
goto_9:;
goto goto_1;
goto tmp10_done;
tmp10_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynElementLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getComponentsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp7_1;
tmp7_1 = _elt;
{
int tmp7;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp7_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,1) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getComponentsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp6_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,1,1) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getComponentsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp6_done;
}
default:
tmp6_default: OMC_LABEL_UNUSED; {
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_lst = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _elt;
for (tmpMeta[1] = _lst; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_elt = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp10_1;
tmp10_1 = _elt;
{
int tmp10;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp10_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,0,1) == 0) goto tmp9_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getComponentsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp9_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,1,1) == 0) goto tmp9_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 2));
_elts = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getComponentsInElementitems(threadData, _elts);
_res = omc_List_append__reverse(threadData, _lst1, _res);
goto tmp9_done;
}
default:
tmp9_default: OMC_LABEL_UNUSED; {
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
goto_8:;
goto goto_1;
goto tmp9_done;
tmp9_done:;
}
}
;
}
}
tmpMeta[0] = listReverseInPlace(_res);
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynElementLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementLst;
}
DLLExport
modelica_string omc_InteractiveUtil_getAnnotationString(threadData_t *threadData, modelica_metatype _inAnnotation, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
jmp_buf *old_mmc_jumper = threadData->mmc_jumper;
modelica_string _outString = NULL;
modelica_string tmp5 = 0;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(omc_Flags_isSet(threadData, _OMC_LIT18))
{
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_outString = omc_NFApi_evaluateAnnotation(threadData, _inFullProgram, _inModelPath, _inAnnotation);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = stringAppend(omc_Dump_unparseAnnotation(threadData, _inAnnotation),_OMC_LIT146);
_outString = tmpMeta[0];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
goto _return;
}
{
volatile modelica_metatype tmp8_1;
tmp8_1 = _inAnnotation;
{
modelica_string _ann_name = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _stripped_mod = NULL;
modelica_metatype _graphic_mod = NULL;
modelica_metatype _info = NULL;
modelica_boolean _is_icon;
modelica_boolean _is_diagram;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _graphic_prog = NULL;
modelica_metatype _placement_cls = NULL;
modelica_metatype _smod = NULL;
modelica_metatype _dmod = NULL;
modelica_metatype _graphic_exp = NULL;
modelica_metatype _graphic_dexp = NULL;
modelica_metatype _prop = NULL;
modelica_metatype _dae = NULL;
volatile mmc_switch_type tmp8;
int tmp9;
tmp8 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp7_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp8 < 2; tmp8++) {
switch (MMC_SWITCH_CAST(tmp8)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
if (listEmpty(tmpMeta[0])) goto tmp7_end;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp7_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp7_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[5])) goto tmp7_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
if (!listEmpty(tmpMeta[2])) goto tmp7_end;
_ann_name = tmpMeta[4];
_mod = tmpMeta[7];
_info = tmpMeta[8];
_is_icon = (stringEqual(_ann_name, _OMC_LIT209));
_is_diagram = (stringEqual(_ann_name, _OMC_LIT210));
_stripped_mod = omc_AbsynUtil_stripGraphicsAndInteractionModification(threadData, _mod ,&_graphic_mod);
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT211);
{
{
volatile mmc_switch_type tmp12;
int tmp13;
tmp12 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp11_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp12 < 2; tmp12++) {
switch (MMC_SWITCH_CAST(tmp12)) {
case 0: {
tmpMeta[0] = mmc_mk_box3(3, &Interactive_GraphicEnvCache_GRAPHIC__ENV__NO__CACHE__desc, _inFullProgram, _inModelPath);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, tmpMeta[0], _mod ,&_env ,&_graphic_prog, NULL);
omc_ErrorExt_rollBack(threadData, _OMC_LIT211);
goto tmp11_done;
}
case 1: {
omc_ErrorExt_delCheckpoint(threadData, _OMC_LIT211);
tmpMeta[0] = mmc_mk_box3(3, &Interactive_GraphicEnvCache_GRAPHIC__ENV__NO__CACHE__desc, _inFullProgram, _inModelPath);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, tmpMeta[0], tmpMeta[1] ,&_env ,&_graphic_prog, NULL);
goto tmp11_done;
}
}
goto tmp11_end;
tmp11_end: ;
}
goto goto_10;
tmp11_done:
(void)tmp12;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp11_done2;
goto_10:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp12 < 2) {
goto tmp11_top;
}
goto goto_6;
tmp11_done2:;
}
}
;
tmpMeta[0] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _stripped_mod, _OMC_LIT35);
_smod = omc_AbsynToSCode_translateMod(threadData, mmc_mk_some(tmpMeta[0]), _OMC_LIT36, _OMC_LIT37, _info);
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = mmc_mk_box2(3, &Mod_ModScope_COMPONENT__desc, _ann_name);
_cache = omc_Mod_elabMod(threadData, _cache, _env, tmpMeta[0], _OMC_LIT33, _smod, 0, tmpMeta[1], _info ,&_dmod);
_placement_cls = omc_AbsynToSCode_translateClass(threadData, omc_InteractiveUtil_getClassInProgram(threadData, _ann_name, _graphic_prog));
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_instClass(threadData, _cache, _env, tmpMeta[0], _OMC_LIT41, _dmod, _OMC_LIT33, _placement_cls, tmpMeta[1], 0, _OMC_LIT42, _OMC_LIT43, _OMC_LIT46 ,NULL ,NULL ,NULL ,&_dae, NULL, NULL, NULL, NULL, NULL);
_outString = omc_DAEUtil_getVariableBindingsStr(threadData, omc_DAEUtil_daeElements(threadData, _dae));
if((_is_icon || _is_diagram))
{
{
{
volatile mmc_switch_type tmp16;
int tmp17;
tmp16 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp15_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp16 < 2; tmp16++) {
switch (MMC_SWITCH_CAST(tmp16)) {
case 0: {
tmpMeta[0] = _graphic_mod;
if (listEmpty(tmpMeta[0])) goto goto_14;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto goto_14;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[3])) goto goto_14;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,2) == 0) goto goto_14;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (!listEmpty(tmpMeta[2])) goto goto_14;
_graphic_exp = tmpMeta[6];
omc_StaticScript_elabGraphicsExp(threadData, _cache, _env, _graphic_exp, 0, _OMC_LIT33, _info ,&_graphic_dexp ,&_prop);
if(_is_icon)
{
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT212);
_cache = omc_Ceval_cevalIfConstant(threadData, _cache, _env, _graphic_dexp, _prop, 0, _info ,&_graphic_dexp, NULL);
_graphic_dexp = omc_ExpressionSimplify_simplify1(threadData, _graphic_dexp, NULL);
omc_ErrorExt_rollBack(threadData, _OMC_LIT212);
}
tmpMeta[0] = stringAppend(_outString,_OMC_LIT10);
tmpMeta[1] = stringAppend(tmpMeta[0],omc_ExpressionDump_printExpStr(threadData, _graphic_dexp));
_outString = tmpMeta[1];
goto tmp15_done;
}
case 1: {
goto tmp15_done;
}
}
goto tmp15_end;
tmp15_end: ;
}
goto goto_14;
tmp15_done:
(void)tmp16;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp15_done2;
goto_14:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp16 < 2) {
goto tmp15_top;
}
goto goto_6;
tmp15_done2:;
}
}
;
}
omc_Print_clearErrorBuf(threadData);
tmp5 = _outString;
goto tmp7_done;
}
case 1: {
tmpMeta[0] = stringAppend(omc_Dump_unparseAnnotation(threadData, _inAnnotation),_OMC_LIT146);
tmp5 = tmpMeta[0];
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
tmp7_done:
(void)tmp8;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp7_done2;
goto_6:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp8 < 2) {
goto tmp7_top;
}
MMC_THROW_INTERNAL();
tmp7_done2:;
}
}
_outString = tmp5;
_return: OMC_LABEL_UNUSED
threadData->mmc_jumper = old_mmc_jumper;
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildEnvForGraphicProgramFull(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inModelPath, modelica_metatype *out_outEnv, modelica_metatype *out_outProgram)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outProgram = NULL;
modelica_boolean _check_model;
modelica_boolean _eval_param;
modelica_boolean _failed;
modelica_boolean _graphics_mode;
modelica_metatype _graphic_program = NULL;
modelica_metatype _scode_program = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_failed = 0;
_graphic_program = omc_InteractiveUtil_modelicaAnnotationProgram(threadData, omc_Config_getAnnotationVersion(threadData));
_outProgram = omc_InteractiveUtil_updateProgram(threadData, _graphic_program, _inProgram, 0);
_scode_program = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _outProgram);
_check_model = omc_Flags_getConfigBool(threadData, _OMC_LIT216);
_eval_param = omc_Config_getEvaluateParametersInAnnotations(threadData);
_graphics_mode = omc_Config_getGraphicsExpMode(threadData);
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT216, 1);
omc_Config_setEvaluateParametersInAnnotations(threadData, 1);
omc_Config_setGraphicsExpMode(threadData, 1);
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outCache = omc_Inst_instantiateClass(threadData, omc_FCore_emptyCache(threadData), tmpMeta[0], _scode_program, _inModelPath, 1 ,&_outEnv, NULL, NULL);
goto tmp2_done;
}
case 1: {
_failed = 1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
omc_Config_setEvaluateParametersInAnnotations(threadData, _eval_param);
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT216, _check_model);
omc_Config_setGraphicsExpMode(threadData, _graphics_mode);
if(_failed)
{
MMC_THROW_INTERNAL();
}
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_buildEnvForGraphicProgram(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inAnnotationMod, modelica_metatype *out_outEnv, modelica_metatype *out_outGraphicProgram, modelica_metatype *out_outGraphicEnvCache)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outGraphicProgram = NULL;
modelica_metatype _outGraphicEnvCache = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inCache;
{
modelica_metatype _scode_program = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 4)));
tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 5)));
tmpMeta[0+2] = _OMC_LIT217;
tmpMeta[0+3] = _inCache;
goto tmp3_done;
}
case 4: {
if(omc_AbsynUtil_onlyLiteralsInAnnotationMod(threadData, _inAnnotationMod))
{
_outCache = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 4)));
_outEnv = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 5)));
_outGraphicEnvCache = _inCache;
_outGraphicProgram = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2)));
}
else
{
_outCache = omc_InteractiveUtil_buildEnvForGraphicProgramFull(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3))) ,&_outEnv ,&_outGraphicProgram);
tmpMeta[4] = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3))), _outCache, _outEnv);
_outGraphicEnvCache = tmpMeta[4];
}
tmpMeta[0+0] = _outCache;
tmpMeta[0+1] = _outEnv;
tmpMeta[0+2] = _outGraphicProgram;
tmpMeta[0+3] = _outGraphicEnvCache;
goto tmp3_done;
}
case 3: {
if(omc_AbsynUtil_onlyLiteralsInAnnotationMod(threadData, _inAnnotationMod))
{
_outGraphicProgram = omc_InteractiveUtil_modelicaAnnotationProgram(threadData, omc_Config_getAnnotationVersion(threadData));
_scode_program = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _outGraphicProgram);
_outCache = omc_Inst_makeEnvFromProgram(threadData, _scode_program ,&_outEnv);
tmpMeta[4] = mmc_mk_box5(4, &Interactive_GraphicEnvCache_GRAPHIC__ENV__PARTIAL__CACHE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3))), _outCache, _outEnv);
_outGraphicEnvCache = tmpMeta[4];
}
else
{
_outCache = omc_InteractiveUtil_buildEnvForGraphicProgramFull(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3))) ,&_outEnv ,&_outGraphicProgram);
tmpMeta[4] = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3))), _outCache, _outEnv);
_outGraphicEnvCache = tmpMeta[4];
}
tmpMeta[0+0] = _outCache;
tmpMeta[0+1] = _outEnv;
tmpMeta[0+2] = _outGraphicProgram;
tmpMeta[0+3] = _outGraphicEnvCache;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outEnv = tmpMeta[0+1];
_outGraphicProgram = tmpMeta[0+2];
_outGraphicEnvCache = tmpMeta[0+3];
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outGraphicProgram) { *out_outGraphicProgram = _outGraphicProgram; }
if (out_outGraphicEnvCache) { *out_outGraphicEnvCache = _outGraphicEnvCache; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_cacheFromGraphicEnvCache(threadData_t *threadData, modelica_metatype _inEnvCache)
{
modelica_metatype _cache = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inEnvCache;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,4) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_cache = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _cache;
}
DLLExport
modelica_metatype omc_InteractiveUtil_envFromGraphicEnvCache(threadData_t *threadData, modelica_metatype _inEnvCache)
{
modelica_metatype _env = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inEnvCache;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,4) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_env = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _env;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_cacheProgramAndPath(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype *out_outPath)
{
modelica_metatype _outProgram = NULL;
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inCache;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2)));
tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3)));
goto tmp3_done;
}
case 4: {
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2)));
tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3)));
goto tmp3_done;
}
case 3: {
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 2)));
tmpMeta[0+1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCache), 3)));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outProgram = tmpMeta[0+0];
_outPath = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outPath) { *out_outPath = _outPath; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsModification(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynComponentItemLst;
{
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_string _str = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (optionNone(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[1]);
tmpMeta[6] = MMC_CDR(tmpMeta[1]);
_mod = tmpMeta[4];
_rest = tmpMeta[1];
tmp4 += 4;
tmpMeta[0] = mmc_mk_box2(10, &Absyn_CodeNode_C__MODIFICATION__desc, _mod);
tmpMeta[1] = mmc_mk_box2(21, &Absyn_Exp_CODE__desc, tmpMeta[0]);
_s1 = omc_Dump_printExpStr(threadData, tmpMeta[1]);
_s2 = omc_InteractiveUtil_getComponentitemsModification(threadData, _rest);
tmpMeta[0] = mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (optionNone(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
_mod = tmpMeta[4];
tmp4 += 2;
tmpMeta[0] = mmc_mk_box2(10, &Absyn_CodeNode_C__MODIFICATION__desc, _mod);
tmpMeta[1] = mmc_mk_box2(21, &Absyn_Exp_CODE__desc, tmpMeta[0]);
tmp1 = omc_Dump_printExpStr(threadData, tmpMeta[1]);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (!optionNone(tmpMeta[3])) goto tmp3_end;
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[1]);
tmpMeta[5] = MMC_CDR(tmpMeta[1]);
_rest = tmpMeta[1];
_str = omc_InteractiveUtil_getComponentitemsModification(threadData, _rest);
tmpMeta[0] = stringAppend(_OMC_LIT218,_str);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (!optionNone(tmpMeta[3])) goto tmp3_end;
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[1]);
tmpMeta[5] = MMC_CDR(tmpMeta[1]);
_rest = tmpMeta[1];
tmp4 += 1;
_str = omc_InteractiveUtil_getComponentitemsModification(threadData, _rest);
tmpMeta[0] = stringAppend(_OMC_LIT218,_str);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
case 4: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (!optionNone(tmpMeta[2])) goto tmp3_end;
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
tmp1 = _OMC_LIT219;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getComponentModification(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,3) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_lst = tmpMeta[1];
tmp1 = omc_InteractiveUtil_getComponentitemsModification(threadData, _lst);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsAnnotation(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynComponentItemLst;
{
modelica_string _s1 = NULL;
modelica_string _str = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,6) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],1,1) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
if (9 != MMC_STRLEN(tmpMeta[10]) || strcmp(MMC_STRINGDATA(_OMC_LIT223), MMC_STRINGDATA(tmpMeta[10])) != 0) goto tmp3_end;
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[11] = MMC_CAR(tmpMeta[1]);
tmpMeta[12] = MMC_CDR(tmpMeta[1]);
_mod = tmpMeta[6];
_rest = tmpMeta[1];
tmpMeta[0] = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, _mod);
_s1 = omc_InteractiveUtil_getAnnotationString(threadData, tmpMeta[0], _inClass, _inFullProgram, _inModelPath);
_str = omc_InteractiveUtil_getComponentitemsAnnotation(threadData, _rest, _inClass, _inFullProgram, _inModelPath);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT220, mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,6) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],1,1) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
if (9 != MMC_STRLEN(tmpMeta[10]) || strcmp(MMC_STRINGDATA(_OMC_LIT223), MMC_STRINGDATA(tmpMeta[10])) != 0) goto tmp3_end;
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
_mod = tmpMeta[6];
tmpMeta[0] = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, _mod);
_s1 = omc_InteractiveUtil_getAnnotationString(threadData, tmpMeta[0], _inClass, _inFullProgram, _inModelPath);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (!optionNone(tmpMeta[4])) goto tmp3_end;
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[1]);
tmpMeta[6] = MMC_CDR(tmpMeta[1]);
_rest = tmpMeta[1];
_str = omc_InteractiveUtil_getComponentitemsAnnotation(threadData, _rest, _inClass, _inFullProgram, _inModelPath);
tmpMeta[0] = stringAppend(_OMC_LIT221,_str);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (!optionNone(tmpMeta[2])) goto tmp3_end;
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmpMeta[1]);
tmpMeta[4] = MMC_CDR(tmpMeta[1]);
_rest = tmpMeta[1];
_str = omc_InteractiveUtil_getComponentitemsAnnotation(threadData, _rest, _inClass, _inFullProgram, _inModelPath);
tmpMeta[0] = stringAppend(_OMC_LIT222,_str);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
case 4: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (!optionNone(tmpMeta[2])) goto tmp3_end;
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_modelicaAnnotationProgram(threadData_t *threadData, modelica_string _annotationVersion)
{
modelica_metatype _annotationProgram = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;
tmp3_1 = _annotationVersion;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (3 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT230), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = omc_Parser_parsestring(threadData, _OMC_LIT224, _OMC_LIT225);
goto tmp2_done;
}
case 1: {
if (3 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT231), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = omc_Parser_parsestring(threadData, _OMC_LIT226, _OMC_LIT227);
goto tmp2_done;
}
case 2: {
if (3 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT232), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = omc_Parser_parsestring(threadData, _OMC_LIT228, _OMC_LIT229);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_annotationProgram = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _annotationProgram;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentAnnotation(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,3) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_lst = tmpMeta[1];
tmp1 = omc_InteractiveUtil_getComponentitemsAnnotation(threadData, _lst, _inClass, _inFullProgram, _inModelPath);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsAnnotationsFromItems(threadData_t *threadData, modelica_metatype _inComponentItems, modelica_metatype _ccAnnotations, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _outCache = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _res = NULL;
modelica_string _str = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta[0];
_outCache = _inCache;
{
modelica_metatype _comp;
for (tmpMeta[1] = listReverse(_inComponentItems); !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_comp = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _comp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_annotations = tmpMeta[7];
tmpMeta[2] = listAppend(_annotations, _ccAnnotations);
goto tmp2_done;
}
case 1: {
tmpMeta[2] = _ccAnnotations;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_annotations = tmpMeta[2];
_res = omc_InteractiveUtil_getComponentitemsAnnotationsElArgs(threadData, _annotations, _inEnv, _inClass, _outCache ,&_outCache);
_str = stringDelimitList(_res, _OMC_LIT27);
tmpMeta[3] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta[2] = mmc_mk_cons(stringAppendList(tmpMeta[3]), _outStringLst);
_outStringLst = tmpMeta[2];
}
}
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsAnnotationsElArgs(threadData_t *threadData, modelica_metatype _inElementArgs, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache, modelica_metatype *out_outCache)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _outCache = NULL;
modelica_string _str = NULL;
modelica_string _ann_name = NULL;
modelica_metatype _eq_aexp = NULL;
modelica_metatype _eq_dexp = NULL;
modelica_metatype _prop = NULL;
modelica_metatype _info = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _c = NULL;
modelica_metatype _smod = NULL;
modelica_metatype _dmod = NULL;
modelica_metatype _dae = NULL;
modelica_metatype _fullProgram = NULL;
modelica_metatype _modelPath = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta[0];
_outCache = _inCache;
{
modelica_metatype _e;
for (tmpMeta[1] = listReverse(_inElementArgs); !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_e = MMC_CAR(tmpMeta[1]);
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _e;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (!listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,2) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_ann_name = tmpMeta[3];
_eq_aexp = tmpMeta[8];
_info = tmpMeta[9];
tmp4 += 3;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, tmpMeta[2] ,&_env ,NULL ,&_outCache);
omc_StaticScript_elabGraphicsExp(threadData, _cache, _env, _eq_aexp, 0, _OMC_LIT33, _info ,&_eq_dexp ,&_prop);
_cache = omc_Ceval_cevalIfConstant(threadData, _cache, _env, _eq_dexp, _prop, 0, _info ,&_eq_dexp ,&_prop);
_eq_dexp = omc_ExpressionSimplify_simplify1(threadData, _eq_dexp, NULL);
omc_Print_clearErrorBuf(threadData);
_str = omc_ExpressionDump_printExpStr(threadData, _eq_dexp);
tmpMeta[2] = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT34, mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[2]);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,0) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_ann_name = tmpMeta[3];
_mod = tmpMeta[6];
_info = tmpMeta[8];
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _mod, _OMC_LIT35);
_smod = omc_AbsynToSCode_translateMod(threadData, mmc_mk_some(tmpMeta[2]), _OMC_LIT36, _OMC_LIT37, _info);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, _mod ,&_env ,NULL ,&_outCache);
_cache = omc_Lookup_lookupClassIdent(threadData, _cache, _inEnv, _ann_name, mmc_mk_none() ,&_c ,&_env2);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box2(3, &Mod_ModScope_COMPONENT__desc, _ann_name);
_cache = omc_Mod_elabMod(threadData, _cache, _env, tmpMeta[2], _OMC_LIT33, _smod, 0, tmpMeta[3], _OMC_LIT39 ,&_dmod);
_c = omc_SCodeUtil_classSetPartial(threadData, _c, _OMC_LIT40);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_instClass(threadData, _cache, _env2, tmpMeta[2], _OMC_LIT41, _dmod, _OMC_LIT33, _c, tmpMeta[3], 0, _OMC_LIT42, _OMC_LIT43, _OMC_LIT46 ,NULL ,NULL ,NULL ,&_dae, NULL, NULL, NULL, NULL, NULL);
_str = omc_DAEUtil_getVariableBindingsStr(threadData, omc_DAEUtil_daeElements(threadData, _dae));
tmpMeta[2] = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT47, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT48, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp1 = stringAppendList(tmpMeta[2]);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,0) == 0) goto tmp3_end;
_ann_name = tmpMeta[3];
tmp4 += 1;
tmpMeta[2] = stringAppend(_ann_name,_OMC_LIT49);
tmp1 = tmpMeta[2];
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (!optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_ann_name = tmpMeta[3];
_info = tmpMeta[5];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InteractiveUtil_buildEnvForGraphicProgram(threadData, _outCache, tmpMeta[2] ,NULL ,NULL ,&_outCache);
_cache = omc_Lookup_lookupClassIdent(threadData, _cache, _inEnv, _ann_name, mmc_mk_none() ,&_c ,&_env);
_c = omc_SCodeUtil_classSetPartial(threadData, _c, _OMC_LIT40);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_instClass(threadData, _cache, _env, tmpMeta[2], _OMC_LIT41, _OMC_LIT50, _OMC_LIT33, _c, tmpMeta[3], 0, _OMC_LIT42, _OMC_LIT43, _OMC_LIT46 ,NULL ,NULL ,NULL ,&_dae, NULL, NULL, NULL, NULL, NULL);
_str = omc_DAEUtil_getVariableBindingsStr(threadData, omc_DAEUtil_daeElements(threadData, _dae));
tmpMeta[2] = mmc_mk_cons(_ann_name, mmc_mk_cons(_OMC_LIT47, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT48, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp1 = stringAppendList(tmpMeta[2]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
tmpMeta[2] = mmc_mk_cons(_str, _outStringLst);
_outStringLst = tmpMeta[2];
}
}
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsAnnotations(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype _inCache)
{
jmp_buf *old_mmc_jumper = threadData->mmc_jumper;
modelica_metatype _outStringLst = NULL;
modelica_metatype _res = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _items = NULL;
modelica_metatype _cc = NULL;
modelica_metatype _fullProgram = NULL;
modelica_metatype _modelPath = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = tmpMeta[0];
_cache = _inCache;
if(omc_Flags_isSet(threadData, _OMC_LIT18))
{
_fullProgram = omc_InteractiveUtil_cacheProgramAndPath(threadData, _inCache ,&_modelPath);
_outStringLst = omc_NFApi_evaluateAnnotations(threadData, _fullProgram, _modelPath, _inElements);
goto _return;
}
{
modelica_metatype _e;
for (tmpMeta[1] = listReverse(_inElements); !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_e = MMC_CAR(tmpMeta[1]);
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _e;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,3) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_items = tmpMeta[4];
_cc = tmpMeta[5];
_res = omc_InteractiveUtil_getComponentitemsAnnotationsFromItems(threadData, _items, omc_AbsynUtil_getAnnotationsFromConstraintClass(threadData, _cc), _inEnv, _inClass, _cache ,&_cache);
tmpMeta[2] = listAppend(_res, _outStringLst);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,3) == 0) goto tmp2_end;
tmpMeta[3] = mmc_mk_cons(_OMC_LIT51, _outStringLst);
tmpMeta[2] = tmpMeta[3];
goto tmp2_done;
}
case 2: {
tmpMeta[2] = _outStringLst;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[2];
}
}
_return: OMC_LABEL_UNUSED
threadData->mmc_jumper = old_mmc_jumper;
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentAnnotationsFromElts(threadData_t *threadData, modelica_metatype _comps, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _resStr = NULL;
modelica_metatype _graphicProgramSCode = NULL;
modelica_metatype _env = NULL;
modelica_metatype _res = NULL;
modelica_metatype _placementProgram = NULL;
modelica_metatype _cache = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if((!omc_Flags_isSet(threadData, _OMC_LIT18)))
{
_placementProgram = omc_InteractiveUtil_modelicaAnnotationProgram(threadData, omc_Config_getAnnotationVersion(threadData));
_graphicProgramSCode = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _placementProgram);
omc_Inst_makeEnvFromProgram(threadData, _graphicProgramSCode ,&_env);
}
else
{
_env = _OMC_LIT61;
}
tmpMeta[0] = mmc_mk_box3(3, &Interactive_GraphicEnvCache_GRAPHIC__ENV__NO__CACHE__desc, _inFullProgram, _inModelPath);
_cache = tmpMeta[0];
_res = omc_InteractiveUtil_getComponentitemsAnnotations(threadData, _comps, _env, _inClass, _cache);
_resStr = stringDelimitList(_res, _OMC_LIT10);
_return: OMC_LABEL_UNUSED
return _resStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionsInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inAbsynEquationItemLst;
{
modelica_metatype _eq = NULL;
modelica_metatype _eqlist1 = NULL;
modelica_metatype _eqlist2 = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _forEqList = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,2) == 0) goto tmp2_end;
_eq = tmpMeta[1];
_xs = tmpMeta[2];
_eqlist1 = omc_InteractiveUtil_getConnectionsInEquations(threadData, _xs);
tmpMeta[1] = mmc_mk_cons(_eq, _eqlist1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],4,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_forEqList = tmpMeta[4];
_xs = tmpMeta[2];
_eqlist1 = omc_InteractiveUtil_getConnectionsInEquations(threadData, _forEqList);
_eqlist2 = omc_InteractiveUtil_getConnectionsInEquations(threadData, _xs);
tmpMeta[0] = listAppend(_eqlist1, _eqlist2);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
_inAbsynEquationItemLst = _xs;
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outList = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionsInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _eqlist1 = NULL;
modelica_metatype _eqlist2 = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_eqlist1 = tmpMeta[3];
_xs = tmpMeta[2];
_eqlist1 = omc_InteractiveUtil_getConnectionsInEquations(threadData, _eqlist1);
_eqlist2 = omc_InteractiveUtil_getConnectionsInClassparts(threadData, _xs);
tmpMeta[0] = listAppend(_eqlist1, _eqlist2);
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
tmp3 += 1;
tmpMeta[0] = omc_InteractiveUtil_getConnectionsInClassparts(threadData, _xs);
goto tmp2_done;
}
case 2: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outList = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outList;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getConnections(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getConnectionsInClassparts(threadData, _parts);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getConnectionsInClassparts(threadData, _parts);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outList = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getConnectionStr(threadData_t *threadData, modelica_metatype _inEquation, modelica_string *out_outToString)
{
modelica_string _outFromString = NULL;
modelica_string _outToString = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inEquation;
{
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cr1 = tmpMeta[2];
_cr2 = tmpMeta[3];
_s1 = omc_Dump_printComponentRefStr(threadData, _cr1);
_s2 = omc_Dump_printComponentRefStr(threadData, _cr2);
tmp1_c0 = _s1;
tmp1_c1 = _s2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outFromString = tmp1_c0;
_outToString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outToString) { *out_outToString = _outToString; }
return _outFromString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_createFuncargsFromElementargs(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst)
{
modelica_metatype _outFunctionArgs = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynElementArgLst;
{
modelica_metatype _expl = NULL;
modelica_metatype _narg = NULL;
modelica_string _id = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[0] = _OMC_LIT233;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,2) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
_id = tmpMeta[4];
_exp = tmpMeta[8];
_xs = tmpMeta[2];
tmpMeta[1] = omc_InteractiveUtil_createFuncargsFromElementargs(threadData, _xs);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_expl = tmpMeta[2];
_narg = tmpMeta[3];
tmpMeta[2] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _id, _exp);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _narg);
tmpMeta[3] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _expl, tmpMeta[1]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
tmpMeta[1] = omc_InteractiveUtil_createFuncargsFromElementargs(threadData, _xs);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_expl = tmpMeta[2];
_narg = tmpMeta[3];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _expl, _narg);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outFunctionArgs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outFunctionArgs;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getConnectionAnnotationStr(threadData_t *threadData, modelica_metatype _inEquationItem, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inEquationItem;
{
modelica_metatype _res = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (optionNone(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_annotations = tmpMeta[5];
_info = tmpMeta[6];
_res = omc_InteractiveUtil_getConnectionAnnotationStrElArgs(threadData, _annotations, _info, _inClass, _inFullProgram, _inModelPath);
tmp1 = stringDelimitList(_res, _OMC_LIT27);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConnectionAnnotationStrElArgs(threadData_t *threadData, modelica_metatype _inElArgLst, modelica_metatype _info, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inElArgLst;
{
modelica_metatype _fargs = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _newexp = NULL;
modelica_string _gexpstr = NULL;
modelica_string _gexpstr_1 = NULL;
modelica_string _annName = NULL;
modelica_metatype _res = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _prop = NULL;
modelica_metatype _lineProgram = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_annName = tmpMeta[4];
_mod = tmpMeta[7];
_rest = tmpMeta[2];
_lineProgram = omc_InteractiveUtil_modelicaAnnotationProgram(threadData, omc_Config_getAnnotationVersion(threadData));
_fargs = omc_InteractiveUtil_createFuncargsFromElementargs(threadData, _mod);
_p_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _lineProgram);
_cache = omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _annName, tmpMeta[1]);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, tmpMeta[2], _fargs, tmpMeta[3]);
omc_StaticScript_elabGraphicsExp(threadData, _cache, _env, tmpMeta[4], 0, _OMC_LIT33, _info ,&_newexp ,&_prop);
_cache = omc_Ceval_cevalIfConstant(threadData, _cache, _env, _newexp, _prop, 0, _info ,&_newexp ,&_prop);
omc_Print_clearErrorBuf(threadData);
_gexpstr = omc_ExpressionDump_printExpStr(threadData, _newexp);
_res = omc_InteractiveUtil_getConnectionAnnotationStrElArgs(threadData, _rest, _info, _inClass, _inFullProgram, _inModelPath);
tmpMeta[1] = mmc_mk_cons(_gexpstr, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,0) == 0) goto tmp2_end;
_annName = tmpMeta[4];
_rest = tmpMeta[2];
tmpMeta[1] = stringAppend(_annName,_OMC_LIT49);
_gexpstr_1 = tmpMeta[1];
_res = omc_InteractiveUtil_getConnectionAnnotationStrElArgs(threadData, _rest, _info, _inClass, _inFullProgram, _inModelPath);
tmpMeta[1] = mmc_mk_cons(_gexpstr_1, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inAbsynElementItemLst)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
tmp4_3 = _inAbsynElementItemLst;
{
modelica_metatype _cdef = NULL;
modelica_metatype _newmodelpath = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _tp = NULL;
modelica_integer _c1;
modelica_integer _c2;
modelica_metatype _p = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _complst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_3);
tmpMeta[1] = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_tp = tmpMeta[4];
_lst = tmpMeta[1];
_modelpath = tmp4_1;
_p = tmp4_2;
tmp4 += 2;
_cdef = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p ,&_newmodelpath);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _newmodelpath, _p, _cdef);
_c2 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _lst);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_3);
tmpMeta[1] = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,2) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
_tp = tmpMeta[5];
_complst = tmpMeta[6];
_lst = tmpMeta[1];
_modelpath = tmp4_1;
_p = tmp4_2;
tmpMeta[0] = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,0) == 0) goto goto_2;
_c1 = listLength(_complst);
_c2 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _lst);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_3);
tmpMeta[1] = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,2) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
_tp = tmpMeta[5];
_complst = tmpMeta[6];
_lst = tmpMeta[1];
_modelpath = tmp4_1;
_p = tmp4_2;
tmpMeta[0] = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,0) == 0) goto goto_2;
_c1 = listLength(_complst);
_c2 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _lst);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_3);
tmpMeta[1] = MMC_CDR(tmp4_3);
_lst = tmpMeta[1];
_modelpath = tmp4_1;
_p = tmp4_2;
tmp4 += 1;
tmp1 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _lst);
goto tmp3_done;
}
case 4: {
if (!listEmpty(tmp4_3)) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inAbsynElementItemLst)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countConnectors(threadData, _inPath, _inProgram, _inAbsynElementItemLst);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countPublicConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
tmp4_3 = _inClass;
{
modelica_integer _c1;
modelica_integer _c2;
modelica_metatype _modelpath = NULL;
modelica_metatype _newmodelpath = NULL;
modelica_metatype _cname = NULL;
modelica_metatype _p = NULL;
modelica_string _a = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmp7 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 5));
tmp8 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,5) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,1) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
_a = tmpMeta[0];
_b = tmp6;
_c = tmp7;
_d = tmp8;
_e = tmpMeta[4];
_elt = tmpMeta[9];
_lst = tmpMeta[8];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_modelpath = tmp4_1;
_p = tmp4_2;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[0], tmpMeta[1], _lst, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[2], _file_info);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta[3]);
_c2 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _elt);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 1: {
modelica_integer tmp9;
modelica_integer tmp10;
modelica_integer tmp11;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
tmp9 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmp10 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 5));
tmp11 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,5) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
_a = tmpMeta[0];
_b = tmp9;
_c = tmp10;
_d = tmp11;
_e = tmpMeta[4];
_lst = tmpMeta[8];
_ann = tmpMeta[9];
_cmt = tmpMeta[10];
_file_info = tmpMeta[11];
_modelpath = tmp4_1;
_p = tmp4_2;
tmp4 += 5;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[0], tmpMeta[1], _lst, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[2], _file_info);
tmp1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta[3]);
goto tmp3_done;
}
case 2: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
tmp4 += 4;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 3: {
modelica_integer tmp12;
modelica_integer tmp13;
modelica_integer tmp14;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
tmp12 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmp13 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 5));
tmp14 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,5) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],0,1) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
_a = tmpMeta[0];
_b = tmp12;
_c = tmp13;
_d = tmp14;
_e = tmpMeta[4];
_cmt = tmpMeta[6];
_elt = tmpMeta[10];
_lst = tmpMeta[9];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_modelpath = tmp4_1;
_p = tmp4_2;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[0], tmpMeta[1], _lst, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[2], _file_info);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta[3]);
_c2 = omc_InteractiveUtil_countConnectors(threadData, _modelpath, _p, _elt);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 4: {
modelica_integer tmp15;
modelica_integer tmp16;
modelica_integer tmp17;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
tmp15 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmp16 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 5));
tmp17 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,5) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 8));
_a = tmpMeta[0];
_b = tmp15;
_c = tmp16;
_d = tmp17;
_e = tmpMeta[4];
_cmt = tmpMeta[6];
_lst = tmpMeta[9];
_ann = tmpMeta[10];
_file_info = tmpMeta[11];
_modelpath = tmp4_1;
_p = tmp4_2;
tmp4 += 2;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[0], tmpMeta[1], _lst, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[2], _file_info);
tmp1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta[3]);
goto tmp3_done;
}
case 5: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
tmp4 += 1;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 6: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,4) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_cname = tmpMeta[2];
_modelpath = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_lookupClassdef(threadData, _cname, _modelpath, _p ,&_newmodelpath);
tmp1 = omc_InteractiveUtil_countPublicConnectors(threadData, _newmodelpath, _p, _cdef);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 7) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countPublicConnectors(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countPublicConnectors(threadData, _inPath, _inProgram, _inClass);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
DLLExport
modelica_string omc_InteractiveUtil_getNthCompname(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_integer tmp4_2;
tmp4_1 = _inAbsynComponentItemLst;
tmp4_2 = _inInteger;
{
modelica_string _id = NULL;
modelica_metatype _xs = NULL;
modelica_integer _n1;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (1 != tmp4_2) goto tmp3_end;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_id = tmpMeta[3];
tmp1 = _id;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
_n = tmp4_2;
_n1 = ((modelica_integer) -1) + _n;
_inAbsynComponentItemLst = _xs;
_inInteger = _n1;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getNthCompname(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthCompname(threadData, _inAbsynComponentItemLst, tmp1);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthConnectorStr(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_integer _inInteger, modelica_metatype *out_outPath)
{
modelica_string _outString = NULL;
modelica_metatype _outPath = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_integer tmp4_4;
tmp4_1 = _inProgram;
tmp4_2 = _inPath;
tmp4_3 = _inAbsynElementItemLst;
tmp4_4 = _inInteger;
{
modelica_metatype _cdef = NULL;
modelica_metatype _newmodelpath = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _modelpath = NULL;
modelica_string _str = NULL;
modelica_metatype _p = NULL;
modelica_metatype _lst = NULL;
modelica_integer _n;
modelica_integer _c1;
modelica_integer _c2;
modelica_integer _newn;
modelica_metatype _complst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_3);
tmpMeta[3] = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,3) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_tp = tmpMeta[6];
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
_cdef = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p ,&_newmodelpath);
tmp1_c0 = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _newmodelpath, _cdef, _p, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_3);
tmpMeta[3] = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,3) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_tp = tmpMeta[6];
_lst = tmpMeta[3];
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmp4 += 4;
_cdef = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p ,&_newmodelpath);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _newmodelpath, _p, _cdef);
_c2 = _n - _c1;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _lst, _c2, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_3);
tmpMeta[3] = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,3) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
_tp = tmpMeta[7];
_complst = tmpMeta[8];
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmpMeta[2] = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],5,0) == 0) goto goto_2;
_str = omc_InteractiveUtil_getNthCompname(threadData, _complst, _n);
tmp1_c0 = _str;
tmpMeta[0+1] = _tp;
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_3);
tmpMeta[3] = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,3) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
_tp = tmpMeta[7];
_complst = tmpMeta[8];
_lst = tmpMeta[3];
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmpMeta[2] = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],5,0) == 0) goto goto_2;
_c1 = listLength(_complst);
_newn = _n - _c1;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _lst, _newn, &tmpMeta[0+1]);
goto tmp3_done;
}
case 4: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_3);
tmpMeta[3] = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,3) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
_tp = tmpMeta[7];
_complst = tmpMeta[8];
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmpMeta[2] = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],6,0) == 0) goto goto_2;
_str = omc_InteractiveUtil_getNthCompname(threadData, _complst, _n);
tmp1_c0 = _str;
tmpMeta[0+1] = _tp;
goto tmp3_done;
}
case 5: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_3);
tmpMeta[3] = MMC_CDR(tmp4_3);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,3) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
_tp = tmpMeta[7];
_complst = tmpMeta[8];
_lst = tmpMeta[3];
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmpMeta[2] = omc_InteractiveUtil_lookupClassdef(threadData, _tp, _modelpath, _p, NULL);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],6,0) == 0) goto goto_2;
_c1 = listLength(_complst);
_newn = _n - _c1;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _lst, _newn, &tmpMeta[0+1]);
goto tmp3_done;
}
case 6: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_3);
tmpMeta[3] = MMC_CDR(tmp4_3);
_lst = tmpMeta[3];
_p = tmp4_1;
_modelpath = tmp4_2;
_n = tmp4_4;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _lst, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 7) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outPath = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outPath) { *out_outPath = _outPath; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthConnectorStr(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inInteger, modelica_metatype *out_outPath)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthConnectorStr(threadData, _inProgram, _inPath, _inAbsynElementItemLst, tmp1, out_outPath);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthPublicConnectorStr(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_integer _inInteger, modelica_metatype *out_outPath)
{
modelica_string _outString = NULL;
modelica_metatype _outPath = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[15] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_integer tmp4_4;
tmp4_1 = _inPath;
tmp4_2 = _inClass;
tmp4_3 = _inProgram;
tmp4_4 = _inInteger;
{
modelica_string _a = NULL;
modelica_metatype _modelpath = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
modelica_integer _c1;
modelica_integer _c2;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,5) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_elt = tmpMeta[6];
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _elt, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
case 1: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp8 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,5) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
if (listEmpty(tmpMeta[8])) goto tmp3_end;
tmpMeta[9] = MMC_CAR(tmpMeta[8]);
tmpMeta[10] = MMC_CDR(tmpMeta[8]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],0,1) == 0) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta[2];
_b = tmp6;
_c = tmp7;
_d = tmp8;
_e = tmpMeta[6];
_elt = tmpMeta[11];
_lst = tmpMeta[10];
_ann = tmpMeta[12];
_cmt = tmpMeta[13];
_file_info = tmpMeta[14];
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elt);
tmpMeta[4] = mmc_mk_cons(tmpMeta[5], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[6] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[2], tmpMeta[3], tmpMeta[4], _ann, _cmt);
tmpMeta[7] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[6], _file_info);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta[7]);
_c2 = _n - _c1;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[2], tmpMeta[3], _lst, _ann, _cmt);
tmpMeta[5] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[4], _file_info);
tmp1_c0 = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, tmpMeta[5], _p, _c2, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
modelica_integer tmp9;
modelica_integer tmp10;
modelica_integer tmp11;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp11 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,5) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
if (listEmpty(tmpMeta[8])) goto tmp3_end;
tmpMeta[9] = MMC_CAR(tmpMeta[8]);
tmpMeta[10] = MMC_CDR(tmpMeta[8]);
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta[2];
_b = tmp9;
_c = tmp10;
_d = tmp11;
_e = tmpMeta[6];
_lst = tmpMeta[10];
_ann = tmpMeta[11];
_cmt = tmpMeta[12];
_file_info = tmpMeta[13];
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmp4 += 3;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[2], tmpMeta[3], _lst, _ann, _cmt);
tmpMeta[5] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[4], _file_info);
tmp1_c0 = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, tmpMeta[5], _p, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
case 3: {
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],4,5) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_elt = tmpMeta[6];
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmp1_c0 = omc_InteractiveUtil_getNthConnectorStr(threadData, _p, _modelpath, _elt, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
case 4: {
modelica_integer tmp12;
modelica_integer tmp13;
modelica_integer tmp14;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp12 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp13 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp14 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],4,5) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[10],0,1) == 0) goto tmp3_end;
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 2));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta[2];
_b = tmp12;
_c = tmp13;
_d = tmp14;
_e = tmpMeta[6];
_cmt = tmpMeta[8];
_elt = tmpMeta[12];
_lst = tmpMeta[11];
_ann = tmpMeta[13];
_file_info = tmpMeta[14];
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elt);
tmpMeta[4] = mmc_mk_cons(tmpMeta[5], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[6] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[2], tmpMeta[3], tmpMeta[4], _ann, _cmt);
tmpMeta[7] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[6], _file_info);
_c1 = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, tmpMeta[7]);
_c2 = _n - _c1;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[2], tmpMeta[3], _lst, _ann, _cmt);
tmpMeta[5] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[4], _file_info);
tmp1_c0 = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, tmpMeta[5], _p, _c2, &tmpMeta[0+1]);
goto tmp3_done;
}
case 5: {
modelica_integer tmp15;
modelica_integer tmp16;
modelica_integer tmp17;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmp15 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
tmp16 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
tmp17 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],4,5) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 8));
_a = tmpMeta[2];
_b = tmp15;
_c = tmp16;
_d = tmp17;
_e = tmpMeta[6];
_cmt = tmpMeta[8];
_lst = tmpMeta[11];
_ann = tmpMeta[12];
_file_info = tmpMeta[13];
_modelpath = tmp4_1;
_p = tmp4_3;
_n = tmp4_4;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[2], tmpMeta[3], _lst, _ann, _cmt);
tmpMeta[5] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[4], _file_info);
tmp1_c0 = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, tmpMeta[5], _p, _n, &tmpMeta[0+1]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outPath = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outPath) { *out_outPath = _outPath; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthPublicConnectorStr(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _inInteger, modelica_metatype *out_outPath)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _inPath, _inClass, _inProgram, tmp1, out_outPath);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationInfoHeader(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _exp = NULL;
modelica_metatype _xs = NULL;
modelica_string _s = NULL;
modelica_metatype _dexp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (25 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT234), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_exp = tmpMeta[7];
omc_StaticScript_elabGraphicsExp(threadData, omc_FCore_emptyCache(threadData), omc_FGraph_empty(threadData), _exp, 1, _OMC_LIT33, _OMC_LIT39 ,&_dexp ,NULL);
tmpMeta[0] = omc_ExpressionSimplify_simplify(threadData, _dexp, NULL);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_s = tmpMeta[1];
tmp1 = _s;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
tmp1 = omc_InteractiveUtil_getDocumentationAnnotationInfoHeader(threadData, _xs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationRevision(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _exp = NULL;
modelica_metatype _xs = NULL;
modelica_string _s = NULL;
modelica_metatype _dexp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (9 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT235), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_exp = tmpMeta[7];
omc_StaticScript_elabGraphicsExp(threadData, omc_FCore_emptyCache(threadData), omc_FGraph_empty(threadData), _exp, 1, _OMC_LIT33, _OMC_LIT39 ,&_dexp ,NULL);
tmpMeta[0] = omc_ExpressionSimplify_simplify(threadData, _dexp, NULL);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_s = tmpMeta[1];
tmp1 = _s;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
tmp1 = omc_InteractiveUtil_getDocumentationAnnotationRevision(threadData, _xs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationAnnotationInfo(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _eltArgs;
{
modelica_metatype _exp = NULL;
modelica_metatype _dexp = NULL;
modelica_metatype _xs = NULL;
modelica_string _s = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (4 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT236), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_exp = tmpMeta[7];
omc_StaticScript_elabGraphicsExp(threadData, omc_FCore_emptyCache(threadData), omc_FGraph_empty(threadData), _exp, 1, _OMC_LIT33, _OMC_LIT39 ,&_dexp ,NULL);
tmpMeta[0] = omc_ExpressionSimplify_simplify(threadData, _dexp, NULL);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_s = tmpMeta[1];
tmp1 = _s;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
tmp1 = omc_InteractiveUtil_getDocumentationAnnotationInfo(threadData, _xs);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getDocumentationAnnotationString(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _docStr = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _mod;
{
modelica_metatype _arglst = NULL;
modelica_string _info = NULL;
modelica_string _revisions = NULL;
modelica_string _infoHeader = NULL;
modelica_boolean _partialInst;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_arglst = tmpMeta[2];
_partialInst = omc_System_getPartialInstantiation(threadData);
omc_System_setPartialInstantiation(threadData, 1);
_info = omc_InteractiveUtil_getDocumentationAnnotationInfo(threadData, _arglst);
_revisions = omc_InteractiveUtil_getDocumentationAnnotationRevision(threadData, _arglst);
_infoHeader = omc_InteractiveUtil_getDocumentationAnnotationInfoHeader(threadData, _arglst);
omc_System_setPartialInstantiation(threadData, _partialInst);
tmpMeta[1] = mmc_mk_box3(0, _info, _revisions, _infoHeader);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_docStr = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _docStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExperimentAnnotationString2(threadData_t *threadData, modelica_metatype _eltArgs)
{
modelica_metatype _strs = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _eltArgs;
{
modelica_metatype _exp = NULL;
modelica_metatype _xs = NULL;
modelica_string _name = NULL;
modelica_string _s = NULL;
modelica_metatype _ss = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,2) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
_name = tmpMeta[4];
_exp = tmpMeta[8];
_xs = tmpMeta[2];
tmpMeta[1] = stringAppend(_name,_OMC_LIT34);
tmpMeta[2] = stringAppend(tmpMeta[1],omc_Dump_printExpStr(threadData, _exp));
_s = tmpMeta[2];
_ss = omc_InteractiveUtil_getExperimentAnnotationString2(threadData, _xs);
tmpMeta[1] = mmc_mk_cons(_s, _ss);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getExperimentAnnotationString2(threadData, _xs);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_strs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _strs;
}
DLLExport
modelica_string omc_InteractiveUtil_getExperimentAnnotationString(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _experimentStr = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _arglst = NULL;
modelica_metatype _strs = NULL;
modelica_string _s = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_arglst = tmpMeta[1];
_strs = omc_InteractiveUtil_getExperimentAnnotationString2(threadData, _arglst);
_s = stringDelimitList(_strs, _OMC_LIT10);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_s, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_experimentStr = tmp1;
_return: OMC_LABEL_UNUSED
return _experimentStr;
}
DLLExport
modelica_string omc_InteractiveUtil_getAnnotationStringValueOrFail(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_string _s = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_s = tmpMeta[4];
tmp1 = _s;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getAnnotationExp(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _exp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _mod;
if (optionNone(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (!listEmpty(tmpMeta[2])) MMC_THROW_INTERNAL();
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_exp = tmpMeta[4];
_return: OMC_LABEL_UNUSED
return _exp;
}
DLLExport
modelica_string omc_InteractiveUtil_getAnnotationValue(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_string _s = NULL;
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_exp = tmpMeta[3];
_s = omc_Dump_printExpStr(threadData, _exp);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_s, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_string omc_InteractiveUtil_getDefaultComponentPrefixes(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_string _compName = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_compName = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT238, _OMC_LIT239, boxvar_InteractiveUtil_getDefaultComponentPrefixesModStr);
_return: OMC_LABEL_UNUSED
return _compName;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentNameModStr(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _docStr = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_e = tmpMeta[2];
tmp1 = omc_Dump_printExpStr(threadData, _e);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_docStr = tmp1;
_return: OMC_LABEL_UNUSED
return _docStr;
}
DLLExport
modelica_string omc_InteractiveUtil_getDefaultComponentName(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_string _compName = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_compName = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT241, _OMC_LIT239, boxvar_InteractiveUtil_getDefaultComponentNameModStr);
_return: OMC_LABEL_UNUSED
return _compName;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDocumentationClassAnnotationModStr(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _docStr = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_e = tmpMeta[2];
tmp1 = omc_Dump_printExpStr(threadData, _e);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT24;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_docStr = tmp1;
_return: OMC_LABEL_UNUSED
return _docStr;
}
DLLExport
modelica_boolean omc_InteractiveUtil_getDocumentationClassAnnotation(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_boolean _isDocClass;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _docStr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_docStr = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT243, _OMC_LIT244, boxvar_InteractiveUtil_getDocumentationClassAnnotationModStr);
tmp1 = (stringEqual(_docStr, _OMC_LIT23));
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isDocClass = tmp1;
_return: OMC_LABEL_UNUSED
return _isDocClass;
}
modelica_metatype boxptr_InteractiveUtil_getDocumentationClassAnnotation(threadData_t *threadData, modelica_metatype _className, modelica_metatype _p)
{
modelica_boolean _isDocClass;
modelica_metatype out_isDocClass;
_isDocClass = omc_InteractiveUtil_getDocumentationClassAnnotation(threadData, _className, _p);
out_isDocClass = mmc_mk_icon(_isDocClass);
return out_isDocClass;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getAnnotationStr(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _annotationType, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inAbsynElementArgLst;
tmp4_2 = _inClass;
tmp4_3 = _inProgram;
tmp4_4 = _inModelPath;
{
modelica_string _ann_name = NULL;
modelica_metatype _ann = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _fullProgram = NULL;
modelica_metatype _c = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_ann = tmpMeta[0];
_ann_name = tmpMeta[3];
_c = tmp4_2;
_fullProgram = tmp4_3;
_p = tmp4_4;
omc_InteractiveUtil_isAnnotationType(threadData, _ann_name, _annotationType);
tmpMeta[0] = mmc_mk_cons(_ann, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, tmpMeta[0]);
tmp1 = omc_InteractiveUtil_getAnnotationString(threadData, tmpMeta[1], _c, _fullProgram, _p);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
_c = tmp4_2;
_fullProgram = tmp4_3;
_p = tmp4_4;
tmp1 = omc_InteractiveUtil_getAnnotationStr(threadData, _xs, _annotationType, _c, _fullProgram, _p);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_containAnnotation(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _annotationType)
{
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynElementArgLst;
{
modelica_metatype _lst = NULL;
modelica_string _ann_name = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = MMC_CAR(tmp3_1);
tmpMeta[1] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_ann_name = tmpMeta[3];
omc_InteractiveUtil_isAnnotationType(threadData, _ann_name, _annotationType);
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = MMC_CAR(tmp3_1);
tmpMeta[1] = MMC_CDR(tmp3_1);
_lst = tmpMeta[1];
omc_InteractiveUtil_containAnnotation(threadData, _lst, _annotationType);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_isAnnotationType(threadData_t *threadData, modelica_string _annotationStr, modelica_metatype _annotationType)
{
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _annotationStr;
tmp3_2 = _annotationType;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (4 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT209), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,0) == 0) goto tmp2_end;
goto tmp2_done;
}
case 1: {
if (7 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT210), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,0) == 0) goto tmp2_end;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
DLLExport
modelica_string omc_InteractiveUtil_getAnnotationInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _annotationType, modelica_metatype _inProgram, modelica_metatype _inModelPath)
{
modelica_string _annotationStr = NULL;
modelica_metatype _body = NULL;
modelica_metatype _ann = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inClass;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
_body = tmpMeta[1];
{
modelica_metatype tmp3_1;
tmp3_1 = _body;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
{
modelica_metatype __omcQ_24tmpVar13;
modelica_metatype* tmp4;
modelica_metatype __omcQ_24tmpVar12;
int tmp5;
modelica_metatype _a_loopVar = 0;
modelica_metatype _a;
_a_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 5)));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar13 = tmpMeta[2];
tmp4 = &__omcQ_24tmpVar13;
while(1) {
tmp5 = 1;
if (!listEmpty(_a_loopVar)) {
_a = MMC_CAR(_a_loopVar);
_a_loopVar = MMC_CDR(_a_loopVar);
tmp5--;
}
if (tmp5 == 0) {
__omcQ_24tmpVar12 = omc_AbsynUtil_annotationToElementArgs(threadData, _a);
*tmp4 = mmc_mk_cons(__omcQ_24tmpVar12,0);
tmp4 = &MMC_CDR(*tmp4);
} else if (tmp5 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp4 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar13;
}
tmpMeta[0] = omc_List_flatten(threadData, tmpMeta[1]);
goto tmp2_done;
}
case 7: {
{
modelica_metatype __omcQ_24tmpVar15;
modelica_metatype* tmp6;
modelica_metatype __omcQ_24tmpVar14;
int tmp7;
modelica_metatype _a_loopVar = 0;
modelica_metatype _a;
_a_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 6)));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar15 = tmpMeta[2];
tmp6 = &__omcQ_24tmpVar15;
while(1) {
tmp7 = 1;
if (!listEmpty(_a_loopVar)) {
_a = MMC_CAR(_a_loopVar);
_a_loopVar = MMC_CDR(_a_loopVar);
tmp7--;
}
if (tmp7 == 0) {
__omcQ_24tmpVar14 = omc_AbsynUtil_annotationToElementArgs(threadData, _a);
*tmp6 = mmc_mk_cons(__omcQ_24tmpVar14,0);
tmp6 = &MMC_CDR(*tmp6);
} else if (tmp7 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp6 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar15;
}
tmpMeta[0] = omc_List_flatten(threadData, tmpMeta[1]);
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_ann = tmpMeta[5];
tmpMeta[0] = _ann;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_ann = tmpMeta[5];
tmpMeta[0] = _ann;
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_ann = tmpMeta[5];
tmpMeta[0] = _ann;
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_ann = tmpMeta[5];
tmpMeta[0] = _ann;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_ann = tmpMeta[0];
_annotationStr = omc_InteractiveUtil_getAnnotationStr(threadData, _ann, _annotationType, _inClass, _inProgram, _inModelPath);
tmpMeta[0] = stringAppend(_OMC_LIT12,_annotationStr);
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT13);
_annotationStr = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _annotationStr;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementItemLst;
{
modelica_integer _cl;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,3) == 0) goto tmp3_end;
_rest = tmpMeta[1];
_cl = omc_InteractiveUtil_countBaseClassesFromElts(threadData, _rest);
tmp1 = ((modelica_integer) 1) + _cl;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_rest = tmpMeta[1];
tmp1 = omc_InteractiveUtil_countBaseClassesFromElts(threadData, _rest);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countBaseClassesFromElts(threadData, _inAbsynElementItemLst);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynClassPartLst;
{
modelica_integer _c1;
modelica_integer _c2;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_elts = tmpMeta[2];
_rest = tmpMeta[1];
tmp4 += 1;
_c1 = omc_InteractiveUtil_countBaseClassesFromElts(threadData, _elts);
_c2 = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _rest);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_elts = tmpMeta[2];
_rest = tmpMeta[1];
_c1 = omc_InteractiveUtil_countBaseClassesFromElts(threadData, _elts);
_c2 = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _rest);
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_rest = tmpMeta[1];
tmp4 += 1;
tmp1 = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _rest);
goto tmp3_done;
}
case 3: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _inAbsynClassPartLst);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countBaseClasses(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_integer _res;
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_parts = tmpMeta[1];
tmp4 += 2;
tmp1 = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _parts);
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_parts = tmpMeta[1];
tmp4 += 1;
_res = omc_InteractiveUtil_countBaseClassesFromParts(threadData, _parts);
tmp1 = ((modelica_integer) 1) + _res;
goto tmp3_done;
}
case 2: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,4) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 3: {
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countBaseClasses(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countBaseClasses(threadData, _inClass);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassesFromElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inEnv)
{
modelica_metatype _outAbsynComponentRefLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inAbsynElementItemLst;
tmp3_2 = _inEnv;
{
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _cl = NULL;
modelica_metatype _envpath = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _path = NULL;
modelica_string _tpname = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_e = tmpMeta[3];
_path = tmpMeta[5];
_rest = tmpMeta[2];
_env = tmp3_2;
_cl = omc_InteractiveUtil_getBaseClassesFromElts(threadData, _rest, _env);
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 6)))) ,NULL ,&_env_1);
tmpMeta[1] = omc_FGraph_getScopePath(threadData, _env_1);
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_envpath = tmpMeta[2];
_tpname = omc_AbsynUtil_pathLastIdent(threadData, _path);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _tpname);
_p_1 = omc_AbsynUtil_joinPaths(threadData, _envpath, tmpMeta[1]);
_cref = omc_AbsynUtil_pathToCref(threadData, _p_1);
tmpMeta[1] = mmc_mk_cons(_cref, _cl);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_e = tmpMeta[3];
_path = tmpMeta[5];
_rest = tmpMeta[2];
_env = tmp3_2;
_cl = omc_InteractiveUtil_getBaseClassesFromElts(threadData, _rest, _env);
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 6)))) ,NULL ,&_env_1);
tmpMeta[1] = omc_FGraph_getScopePath(threadData, _env_1);
if (!optionNone(tmpMeta[1])) goto goto_1;
_cref = omc_AbsynUtil_pathToCref(threadData, _path);
tmpMeta[1] = mmc_mk_cons(_cref, _cl);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
_env = tmp3_2;
tmpMeta[0] = omc_InteractiveUtil_getBaseClassesFromElts(threadData, _rest, _env);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynComponentRefLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynComponentRefLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClassesFromParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inEnv)
{
modelica_metatype _outAbsynComponentRefLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inEnv;
{
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_env = tmp3_2;
tmp3 += 1;
_c1 = omc_InteractiveUtil_getBaseClassesFromElts(threadData, _elts, _env);
_c2 = omc_InteractiveUtil_getBaseClassesFromParts(threadData, _rest, _env);
tmpMeta[0] = listAppend(_c1, _c2);
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_env = tmp3_2;
_c1 = omc_InteractiveUtil_getBaseClassesFromElts(threadData, _elts, _env);
_c2 = omc_InteractiveUtil_getBaseClassesFromParts(threadData, _rest, _env);
tmpMeta[0] = listAppend(_c1, _c2);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
_env = tmp3_2;
tmp3 += 1;
tmpMeta[0] = omc_InteractiveUtil_getBaseClassesFromParts(threadData, _rest, _env);
goto tmp2_done;
}
case 3: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynComponentRefLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynComponentRefLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getBaseClasses(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEnv)
{
modelica_metatype _outAbsynComponentRefLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inClass;
tmp3_2 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _env = NULL;
modelica_metatype _tp = NULL;
modelica_string _baseClassName = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _envpath = NULL;
modelica_metatype _p1 = NULL;
modelica_string _tpname = NULL;
modelica_metatype _cref = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_env = tmp3_2;
tmp3 += 3;
tmpMeta[0] = omc_InteractiveUtil_getBaseClassesFromParts(threadData, _parts, _env);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_baseClassName = tmpMeta[2];
_parts = tmpMeta[3];
_env = tmp3_2;
tmp3 += 2;
omc_Lookup_lookupClassIdent(threadData, omc_FCore_emptyCache(threadData), _env, _baseClassName, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inClass), 8)))) ,NULL ,&_cenv);
tmpMeta[1] = omc_FGraph_getScopePath(threadData, _cenv);
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_envpath = tmpMeta[2];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _baseClassName);
_p1 = omc_AbsynUtil_joinPaths(threadData, _envpath, tmpMeta[1]);
_cref = omc_AbsynUtil_pathToCref(threadData, _p1);
_res = omc_InteractiveUtil_getBaseClassesFromParts(threadData, _parts, _env);
tmpMeta[1] = mmc_mk_cons(_cref, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_tp = tmpMeta[3];
_env = tmp3_2;
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _tp, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inClass), 8)))) ,NULL ,&_cenv);
tmpMeta[1] = omc_FGraph_getScopePath(threadData, _cenv);
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_envpath = tmpMeta[2];
_tpname = omc_AbsynUtil_pathLastIdent(threadData, _tp);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _tpname);
_p1 = omc_AbsynUtil_joinPaths(threadData, _envpath, tmpMeta[1]);
_cref = omc_AbsynUtil_pathToCref(threadData, _p1);
tmpMeta[1] = mmc_mk_cons(_cref, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_tp = tmpMeta[3];
_env = tmp3_2;
omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _tp, mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inClass), 8)))) ,NULL ,&_cenv);
tmpMeta[1] = omc_FGraph_getScopePath(threadData, _cenv);
if (!optionNone(tmpMeta[1])) goto goto_1;
_cref = omc_AbsynUtil_pathToCref(threadData, _tp);
tmpMeta[1] = mmc_mk_cons(_cref, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynComponentRefLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynComponentRefLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassnamesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_boolean _includeConstants)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _delst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_delst = omc_DoubleEnded_fromList(threadData, tmpMeta[0]);
{
modelica_metatype _elt;
for (tmpMeta[0] = _inAbsynElementItemLst; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_elt = MMC_CAR(tmpMeta[0]);
{
modelica_metatype tmp3_1;
tmp3_1 = _elt;
{
modelica_string _id = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],4,5) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_id = tmpMeta[5];
omc_DoubleEnded_push__back(threadData, _delst, _id);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_id = tmpMeta[4];
omc_DoubleEnded_push__back(threadData, _delst, _id);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,0) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_lst = tmpMeta[5];
if (!_includeConstants) goto tmp2_end;
omc_DoubleEnded_push__list__back(threadData, _delst, omc_InteractiveUtil_getComponentItemsName(threadData, _lst, 0));
goto tmp2_done;
}
case 3: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
}
}
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outStringLst = omc_DoubleEnded_toListAndClear(threadData, _delst, tmpMeta[0]);
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
modelica_metatype boxptr_InteractiveUtil_getClassnamesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_includeConstants);
_outStringLst = omc_InteractiveUtil_getClassnamesInElts(threadData, _inAbsynElementItemLst, tmp1);
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassnamesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_boolean tmp3_2;volatile modelica_boolean tmp3_3;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inShowProtected;
tmp3_3 = _includeConstants;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_b = tmp3_2;
_c = tmp3_3;
tmp3 += 1;
_l1 = omc_InteractiveUtil_getClassnamesInElts(threadData, _elts, _c);
_l2 = omc_InteractiveUtil_getClassnamesInParts(threadData, _rest, _b, _c);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 2: {
if (1 != tmp3_2) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_c = tmp3_3;
_l1 = omc_InteractiveUtil_getClassnamesInElts(threadData, _elts, _c);
_l2 = omc_InteractiveUtil_getClassnamesInParts(threadData, _rest, 1, _c);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
_b = tmp3_2;
_c = tmp3_3;
tmpMeta[0] = omc_InteractiveUtil_getClassnamesInParts(threadData, _rest, _b, _c);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
modelica_metatype boxptr_InteractiveUtil_getClassnamesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outStringLst = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_outStringLst = omc_InteractiveUtil_getClassnamesInParts(threadData, _inAbsynClassPartLst, tmp1, tmp2);
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getClassnamesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_boolean tmp3_2;modelica_boolean tmp3_3;
tmp3_1 = _inClass;
tmp3_2 = _inShowProtected;
tmp3_3 = _includeConstants;
{
modelica_metatype _strlist = NULL;
modelica_metatype _parts = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_b = tmp3_2;
_c = tmp3_3;
_strlist = omc_InteractiveUtil_getClassnamesInParts(threadData, _parts, _b, _c);
tmpMeta[0] = omc_List_map(threadData, _strlist, boxvar_AbsynUtil_makeIdentPathFromString);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_b = tmp3_2;
_c = tmp3_3;
_strlist = omc_InteractiveUtil_getClassnamesInParts(threadData, _parts, _b, _c);
tmpMeta[0] = omc_List_map(threadData, _strlist, boxvar_AbsynUtil_makeIdentPathFromString);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_paths = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _paths;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getClassnamesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _paths = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_paths = omc_InteractiveUtil_getClassnamesInClass(threadData, _inPath, _inProgram, _inClass, tmp1, tmp2);
return _paths;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getTopQualifiedClassnames(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inProgram;
{
modelica_string _id = NULL;
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _w = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[4];
_rest = tmpMeta[3];
_w = tmpMeta[5];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_p = omc_AbsynUtil_joinWithinPath(threadData, _w, tmpMeta[1]);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
_res = omc_InteractiveUtil_getTopQualifiedClassnames(threadData, tmpMeta[1]);
tmpMeta[1] = mmc_mk_cons(_p, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_rest = tmpMeta[3];
_w = tmpMeta[4];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
tmpMeta[0] = omc_InteractiveUtil_getTopQualifiedClassnames(threadData, tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getTopClassnamesInProgram(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inProgram;
{
modelica_metatype _res = NULL;
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _w = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[4];
_rest = tmpMeta[3];
_w = tmpMeta[5];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
_res = omc_InteractiveUtil_getTopClassnamesInProgram(threadData, tmpMeta[1]);
tmpMeta[1] = mmc_mk_cons(_id, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_rest = tmpMeta[3];
_w = tmpMeta[4];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
tmpMeta[0] = omc_InteractiveUtil_getTopClassnamesInProgram(threadData, tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getTopClassnames(threadData_t *threadData, modelica_metatype _p)
{
modelica_metatype _paths = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_paths = omc_List_map(threadData, omc_InteractiveUtil_getTopClassnamesInProgram(threadData, _p), boxvar_AbsynUtil_makeIdentPathFromString);
_return: OMC_LABEL_UNUSED
return _paths;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassnamesInPath(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_boolean _inShowProtected, modelica_boolean _includeConstants)
{
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_boolean tmp3_3;volatile modelica_boolean tmp3_4;
tmp3_1 = _inPath;
tmp3_2 = _inProgram;
tmp3_3 = _inShowProtected;
tmp3_4 = _includeConstants;
{
modelica_metatype _cdef = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _p = NULL;
modelica_boolean _b;
modelica_boolean _c;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_modelpath = tmp3_1;
_p = tmp3_2;
_b = tmp3_3;
_c = tmp3_4;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[0] = omc_InteractiveUtil_getClassnamesInClass(threadData, _modelpath, _p, _cdef, _b, _c);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_paths = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _paths;
}
modelica_metatype boxptr_InteractiveUtil_getClassnamesInPath(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inShowProtected, modelica_metatype _includeConstants)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _paths = NULL;
tmp1 = mmc_unbox_integer(_inShowProtected);
tmp2 = mmc_unbox_integer(_includeConstants);
_paths = omc_InteractiveUtil_getClassnamesInPath(threadData, _inPath, _inProgram, tmp1, tmp2);
return _paths;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynElementItemLst;
{
modelica_metatype _res = NULL;
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,2) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],8,0) == 0) goto tmp2_end;
_id = tmpMeta[6];
_rest = tmpMeta[2];
_res = omc_InteractiveUtil_getPackagesInElts(threadData, _rest);
tmpMeta[1] = mmc_mk_cons(_id, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getPackagesInElts(threadData, _rest);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
tmp3 += 1;
_l1 = omc_InteractiveUtil_getPackagesInElts(threadData, _elts);
_l2 = omc_InteractiveUtil_getPackagesInParts(threadData, _rest);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_l1 = omc_InteractiveUtil_getPackagesInElts(threadData, _elts);
_l2 = omc_InteractiveUtil_getPackagesInParts(threadData, _rest);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getPackagesInParts(threadData, _rest);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getPackagesInClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _inClass)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _strlist = NULL;
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_strlist = omc_InteractiveUtil_getPackagesInParts(threadData, _parts);
tmpMeta[0] = omc_List_map(threadData, _strlist, boxvar_AbsynUtil_makeIdentPathFromString);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_strlist = omc_InteractiveUtil_getPackagesInParts(threadData, _parts);
tmpMeta[0] = omc_List_map(threadData, _strlist, boxvar_AbsynUtil_makeIdentPathFromString);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outString = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getTopPackagesInProgram(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inProgram;
{
modelica_metatype _res = NULL;
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _w = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],8,0) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[4];
_rest = tmpMeta[3];
_w = tmpMeta[6];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
_res = omc_InteractiveUtil_getTopPackagesInProgram(threadData, tmpMeta[1]);
tmpMeta[1] = mmc_mk_cons(_id, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_rest = tmpMeta[3];
_w = tmpMeta[4];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _rest, _w);
tmpMeta[0] = omc_InteractiveUtil_getTopPackagesInProgram(threadData, tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getTopPackages(threadData_t *threadData, modelica_metatype _p)
{
modelica_metatype _paths = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_paths = omc_List_map(threadData, omc_InteractiveUtil_getTopPackagesInProgram(threadData, _p), boxvar_AbsynUtil_makeIdentPathFromString);
_return: OMC_LABEL_UNUSED
return _paths;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getPackagesInPath(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram)
{
modelica_metatype _paths = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inPath;
tmp3_2 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_modelpath = tmp3_1;
_p = tmp3_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[0] = omc_InteractiveUtil_getPackagesInClass(threadData, _modelpath, _p, _cdef);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_paths = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _paths;
}
DLLExport
modelica_string omc_InteractiveUtil_getIconAnnotation(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelpath = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp1 = omc_InteractiveUtil_getAnnotationInClass(threadData, _cdef, _OMC_LIT245, _p, _modelpath);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_filterIsVersionElement(threadData_t *threadData, modelica_metatype _eltArg)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eltArg;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (7 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT246), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_filterIsVersionElement(threadData_t *threadData, modelica_metatype _eltArg)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_InteractiveUtil_filterIsVersionElement(threadData, _eltArg);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getConversionAnnotationString(threadData_t *threadData, modelica_metatype _mod)
{
modelica_metatype _result = NULL;
modelica_metatype _arglst = NULL;
modelica_metatype _arglst2 = NULL;
modelica_metatype _without = NULL;
modelica_metatype _with = NULL;
modelica_metatype _exps = NULL;
modelica_string _version = NULL;
modelica_string _name = NULL;
modelica_metatype _info = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_without = tmpMeta[0];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_with = tmpMeta[1];
tmpMeta[2] = _mod;
if (optionNone(tmpMeta[2])) MMC_THROW_INTERNAL();
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_arglst = tmpMeta[4];
{
modelica_metatype _arg;
for (tmpMeta[2] = _arglst; !listEmpty(tmpMeta[2]); tmpMeta[2]=MMC_CDR(tmpMeta[2]))
{
_arg = MMC_CAR(tmpMeta[2]);
{
modelica_metatype tmp3_1;
tmp3_1 = _arg;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (15 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT254), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,2) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],3,1) == 0) goto tmp2_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
_version = tmpMeta[9];
tmpMeta[3] = mmc_mk_cons(_version, _without);
_without = tmpMeta[3];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (4 != MMC_STRLEN(tmpMeta[4]) || strcmp(MMC_STRINGDATA(_OMC_LIT255), MMC_STRINGDATA(tmpMeta[4])) != 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_arglst2 = tmpMeta[7];
_info = tmpMeta[8];
_arglst2 = omc_List_filterOnTrue(threadData, _arglst2, boxvar_InteractiveUtil_filterIsVersionElement);
{
volatile modelica_metatype tmp7_1;
tmp7_1 = _arglst2;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp6_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp7 < 3; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (listEmpty(tmp7_1)) goto tmp6_end;
tmpMeta[3] = MMC_CAR(tmp7_1);
tmpMeta[4] = MMC_CDR(tmp7_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp6_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (optionNone(tmpMeta[5])) goto tmp6_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,2) == 0) goto tmp6_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],3,1) == 0) goto tmp6_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
if (!listEmpty(tmpMeta[4])) goto tmp6_end;
_version = tmpMeta[9];
tmp7 += 1;
tmpMeta[3] = mmc_mk_cons(_version, _with);
_with = tmpMeta[3];
goto tmp6_done;
}
case 1: {
if (listEmpty(tmp7_1)) goto tmp6_end;
tmpMeta[3] = MMC_CAR(tmp7_1);
tmpMeta[4] = MMC_CDR(tmp7_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp6_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (optionNone(tmpMeta[5])) goto tmp6_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,2) == 0) goto tmp6_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],13,1) == 0) goto tmp6_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
if (!listEmpty(tmpMeta[4])) goto tmp6_end;
_exps = tmpMeta[9];
{
modelica_metatype _exp;
for (tmpMeta[3] = _exps; !listEmpty(tmpMeta[3]); tmpMeta[3]=MMC_CDR(tmpMeta[3]))
{
_exp = MMC_CAR(tmpMeta[3]);
tmpMeta[4] = _exp;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto goto_5;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_version = tmpMeta[5];
tmpMeta[4] = mmc_mk_cons(_version, _with);
_with = tmpMeta[4];
}
}
goto tmp6_done;
}
case 2: {
tmpMeta[3] = mmc_mk_cons(omc_Dump_unparseElementArgStr(threadData, _arg), MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT249, tmpMeta[3], _info);
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
tmp6_done:
(void)tmp7;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp6_done2;
goto_5:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp7 < 3) {
goto tmp6_top;
}
goto goto_1;
tmp6_done2:;
}
}
;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_name = tmpMeta[4];
_info = tmpMeta[5];
if((!omc_Util_stringStartsWith(threadData, _name, _OMC_LIT253)))
{
tmpMeta[3] = mmc_mk_cons(_name, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT252, tmpMeta[3], _info);
}
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
}
}
tmpMeta[2] = mmc_mk_box2(0, listReverse(_without), listReverse(_with));
_result = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _result;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getConversionAnnotation(threadData_t *threadData, modelica_metatype _cls, modelica_metatype *out_withConversion)
{
modelica_metatype _withoutConversion = NULL;
modelica_metatype _withConversion = NULL;
modelica_metatype _opt_conversion = NULL;
modelica_metatype _classes = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_withoutConversion = tmpMeta[0];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_withConversion = tmpMeta[1];
_opt_conversion = omc_AbsynUtil_getNamedAnnotationInClass(threadData, _cls, _OMC_LIT257, boxvar_InteractiveUtil_getConversionAnnotationString);
{
modelica_metatype tmp4_1;
tmp4_1 = _opt_conversion;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_withoutConversion = tmpMeta[5];
_withConversion = tmpMeta[6];
tmpMeta[2+0] = _withoutConversion;
tmpMeta[2+1] = _withConversion;
goto tmp3_done;
}
case 1: {
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2+0] = tmpMeta[4];
tmpMeta[2+1] = tmpMeta[5];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_withoutConversion = tmpMeta[2+0];
_withConversion = tmpMeta[2+1];
_return: OMC_LABEL_UNUSED
if (out_withConversion) { *out_withConversion = _withConversion; }
return _withoutConversion;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getUsesAnnotationString2(threadData_t *threadData, modelica_metatype _eltArgs, modelica_string _classOrigin)
{
modelica_metatype _strs = NULL;
modelica_metatype tmpMeta[17] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _eltArgs;
{
modelica_metatype _xs = NULL;
modelica_string _name = NULL;
modelica_string _version = NULL;
modelica_metatype _ss = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (listEmpty(tmpMeta[7])) goto tmp2_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],0,6) == 0) goto tmp2_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[10],1,1) == 0) goto tmp2_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 2));
if (7 != MMC_STRLEN(tmpMeta[11]) || strcmp(MMC_STRINGDATA(_OMC_LIT246), MMC_STRINGDATA(tmpMeta[11])) != 0) goto tmp2_end;
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 5));
if (optionNone(tmpMeta[12])) goto tmp2_end;
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 1));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[13]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[14],1,2) == 0) goto tmp2_end;
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[14]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[15],3,1) == 0) goto tmp2_end;
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[15]), 2));
if (!listEmpty(tmpMeta[9])) goto tmp2_end;
_name = tmpMeta[4];
_version = tmpMeta[16];
_xs = tmpMeta[2];
_ss = omc_InteractiveUtil_getUsesAnnotationString2(threadData, _xs, _classOrigin);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta[3] = mmc_mk_cons(_version, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[4] = mmc_mk_box4(0, tmpMeta[2], _classOrigin, tmpMeta[3], mmc_mk_boolean(0));
tmpMeta[1] = mmc_mk_cons(tmpMeta[4], _ss);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
_name = tmpMeta[4];
_info = tmpMeta[5];
_xs = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_name, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT260, tmpMeta[1], _info);
_ss = omc_InteractiveUtil_getUsesAnnotationString2(threadData, _xs, _classOrigin);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta[3] = mmc_mk_box4(0, tmpMeta[2], _classOrigin, _OMC_LIT262, mmc_mk_boolean(0));
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _ss);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
_eltArgs = _xs;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_strs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _strs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getUsesAnnotationString(threadData_t *threadData, modelica_metatype _mod, modelica_string _classOrigin)
{
modelica_metatype _usesStr = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _mod;
{
modelica_metatype _arglst = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_arglst = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getUsesAnnotationString2(threadData, _arglst, _classOrigin);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_usesStr = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _usesStr;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getUsesAnnotationOrDefault(threadData_t *threadData, modelica_metatype _p, modelica_boolean _requireExactVersion)
{
modelica_metatype _usesStr = NULL;
modelica_metatype _paths = NULL;
modelica_metatype _strs = NULL;
modelica_metatype _fromVersions = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_usesStr = omc_InteractiveUtil_getUsesAnnotation(threadData, _p);
_paths = omc_List_map(threadData, _usesStr, boxvar_Util_tuple41);
_fromVersions = omc_List_map(threadData, _usesStr, boxvar_Util_tuple42);
_strs = omc_List_map(threadData, _usesStr, boxvar_Util_tuple43);
if((!_requireExactVersion))
{
_strs = omc_List_map1(threadData, _strs, boxvar_listAppend, _OMC_LIT262);
}
{
modelica_metatype __omcQ_24tmpVar17;
modelica_metatype* tmp1;
modelica_metatype __omcQ_24tmpVar16;
int tmp2;
modelica_metatype _s_loopVar = 0;
modelica_metatype _s;
modelica_metatype _f_loopVar = 0;
modelica_metatype _f;
modelica_metatype _p_loopVar = 0;
modelica_metatype _p;
_s_loopVar = _strs;
_f_loopVar = _fromVersions;
_p_loopVar = _paths;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar17 = tmpMeta[1];
tmp1 = &__omcQ_24tmpVar17;
while(1) {
tmp2 = 3;
if (!listEmpty(_s_loopVar)) {
_s = MMC_CAR(_s_loopVar);
_s_loopVar = MMC_CDR(_s_loopVar);
tmp2--;
}if (!listEmpty(_f_loopVar)) {
_f = MMC_CAR(_f_loopVar);
_f_loopVar = MMC_CDR(_f_loopVar);
tmp2--;
}if (!listEmpty(_p_loopVar)) {
_p = MMC_CAR(_p_loopVar);
_p_loopVar = MMC_CDR(_p_loopVar);
tmp2--;
}
if (tmp2 == 0) {
tmpMeta[2] = mmc_mk_box4(0, _p, _f, _s, mmc_mk_boolean(0));
__omcQ_24tmpVar16 = tmpMeta[2];
*tmp1 = mmc_mk_cons(__omcQ_24tmpVar16,0);
tmp1 = &MMC_CDR(*tmp1);
} else if (tmp2 == 3) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp1 = mmc_mk_nil();
tmpMeta[0] = __omcQ_24tmpVar17;
}
_usesStr = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _usesStr;
}
modelica_metatype boxptr_InteractiveUtil_getUsesAnnotationOrDefault(threadData_t *threadData, modelica_metatype _p, modelica_metatype _requireExactVersion)
{
modelica_integer tmp1;
modelica_metatype _usesStr = NULL;
tmp1 = mmc_unbox_integer(_requireExactVersion);
_usesStr = omc_InteractiveUtil_getUsesAnnotationOrDefault(threadData, _p, tmp1);
return _usesStr;
}
static modelica_metatype closure12_InteractiveUtil_getUsesAnnotationString(threadData_t *thData, modelica_metatype closure, modelica_metatype mod)
{
modelica_string classOrigin = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_InteractiveUtil_getUsesAnnotationString(thData, mod, classOrigin);
}
DLLExport
modelica_metatype omc_InteractiveUtil_getUsesAnnotation(threadData_t *threadData, modelica_metatype _program)
{
modelica_metatype _outUses = NULL;
modelica_metatype _opt_uses = NULL;
modelica_metatype _uses = NULL;
modelica_metatype _classes = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outUses = tmpMeta[0];
tmpMeta[1] = _program;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_classes = tmpMeta[2];
{
modelica_metatype _cls;
for (tmpMeta[1] = _classes; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_cls = MMC_CAR(tmpMeta[1]);
tmpMeta[2] = mmc_mk_box1(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 2))));
_opt_uses = omc_AbsynUtil_getNamedAnnotationInClass(threadData, _cls, _OMC_LIT264, (modelica_fnptr) mmc_mk_box2(0,closure12_InteractiveUtil_getUsesAnnotationString,tmpMeta[2]));
if(isSome(_opt_uses))
{
tmpMeta[2] = _opt_uses;
if (optionNone(tmpMeta[2])) MMC_THROW_INTERNAL();
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
_uses = tmpMeta[3];
_outUses = listAppend(_uses, _outUses);
}
}
}
_return: OMC_LABEL_UNUSED
return _outUses;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getNamedAnnotation(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram, modelica_metatype _id, modelica_metatype _default, modelica_fnptr _f)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inPath;
tmp3_2 = _inProgram;
tmp3_3 = _default;
{
modelica_metatype _cdef = NULL;
modelica_metatype _str = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_modelpath = tmp3_1;
_p = tmp3_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[1] = omc_AbsynUtil_getNamedAnnotationInClass(threadData, _cdef, _id, ((modelica_fnptr) _f));
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_str = tmpMeta[2];
tmpMeta[0] = _str;
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_3)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 1));
_str = tmpMeta[1];
tmpMeta[0] = _str;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outString = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getDiagramAnnotation(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inPath;
tmp4_2 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _modelpath = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelpath = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp1 = omc_InteractiveUtil_getAnnotationInClass(threadData, _cdef, _OMC_LIT265, _p, _modelpath);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getNthConnectorIconAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inModelPath;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelpath = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, _cdef, _p, _n ,&_tp);
tmp1 = omc_InteractiveUtil_getIconAnnotation(threadData, _tp, _p);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getNthConnectorIconAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthConnectorIconAnnotation(threadData, _inModelPath, _inProgram, tmp1);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getNthConnector(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inModelPath;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _cdef = NULL;
modelica_string _str = NULL;
modelica_string _tpstr = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelpath = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_str = omc_InteractiveUtil_getNthPublicConnectorStr(threadData, _modelpath, _cdef, _p, _n ,&_tp);
_tpstr = omc_AbsynUtil_pathString(threadData, _tp, _OMC_LIT0, 1, 0);
tmpMeta[0] = mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_tpstr, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getNthConnector(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthConnector(threadData, _inModelPath, _inProgram, tmp1);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getConnectorCount(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_integer _count;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_p = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_count = omc_InteractiveUtil_countPublicConnectors(threadData, _modelpath, _p, _cdef);
tmp1 = intString(_count);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getNthConnectionAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inModelPath;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _citem = NULL;
modelica_string _s1 = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_modelpath = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_citem = listGet(omc_InteractiveUtil_getConnections(threadData, _cdef), _n);
_s1 = omc_InteractiveUtil_getConnectionAnnotationStr(threadData, _citem, _cdef, _p, _modelpath);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getNthConnectionAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthConnectionAnnotation(threadData, _inModelPath, _inProgram, tmp1);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInEquations(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4)
{
modelica_metatype _outAbsynEquationItemLst = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_string tmp3_4;
tmp3_1 = _inAbsynEquationItemLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
tmp3_4 = _inString4;
{
modelica_metatype _eqcmt_1 = NULL;
modelica_metatype _eqcmt = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _es = NULL;
modelica_metatype _es_1 = NULL;
modelica_string _cmt = NULL;
modelica_metatype _e = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
modelica_boolean tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_c1 = tmpMeta[4];
_c2 = tmpMeta[5];
_eqcmt = tmpMeta[6];
_info = tmpMeta[7];
_es = tmpMeta[2];
_cr1 = tmp3_2;
_cr2 = tmp3_3;
_cmt = tmp3_4;
tmp5 = omc_AbsynUtil_crefEqual(threadData, _cr1, _c1);
if (1 != tmp5) goto goto_1;
tmp6 = omc_AbsynUtil_crefEqual(threadData, _cr2, _c2);
if (1 != tmp6) goto goto_1;
_eqcmt_1 = omc_InteractiveUtil_setClassCommentInCommentOpt(threadData, _eqcmt, _cmt);
tmpMeta[2] = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _c1, _c2);
tmpMeta[3] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta[2], _eqcmt_1, _info);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _es);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_e = tmpMeta[1];
_es = tmpMeta[2];
_cr1 = tmp3_2;
_cr2 = tmp3_3;
_cmt = tmp3_4;
_es_1 = omc_InteractiveUtil_setConnectionCommentInEquations(threadData, _es, _cr1, _cr2, _cmt);
tmpMeta[1] = mmc_mk_cons(_e, _es_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynEquationItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_string tmp3_4;
tmp3_1 = _inAbsynClassPartLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
tmp3_4 = _inString4;
{
modelica_metatype _e_1 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _xs_1 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_string _cmt = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_e = tmpMeta[3];
_xs = tmpMeta[2];
_cr1 = tmp3_2;
_cr2 = tmp3_3;
_cmt = tmp3_4;
_e_1 = omc_InteractiveUtil_setConnectionCommentInEquations(threadData, _e, _cr1, _cr2, _cmt);
tmpMeta[2] = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _e_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _xs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_e = tmpMeta[3];
_xs = tmpMeta[2];
_cr1 = tmp3_2;
_cr2 = tmp3_3;
_cmt = tmp3_4;
_xs_1 = omc_InteractiveUtil_setConnectionCommentInParts(threadData, _xs, _cr1, _cr2, _cmt);
tmpMeta[2] = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _e);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _xs_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_p = tmpMeta[1];
_xs = tmpMeta[2];
_cr1 = tmp3_2;
_cr2 = tmp3_3;
_cmt = tmp3_4;
_xs_1 = omc_InteractiveUtil_setConnectionCommentInParts(threadData, _xs, _cr1, _cr2, _cmt);
tmpMeta[1] = mmc_mk_cons(_p, _xs_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setConnectionCommentInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;modelica_string tmp3_4;
tmp3_1 = _inClass1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
tmp3_4 = _inString4;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _name = NULL;
modelica_string _cmt = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _restr = NULL;
modelica_metatype _pcmt = NULL;
modelica_metatype _info = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_restr = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_pcmt = tmpMeta[11];
_info = tmpMeta[12];
_cr1 = tmp3_2;
_cr2 = tmp3_3;
_cmt = tmp3_4;
_parts_1 = omc_InteractiveUtil_setConnectionCommentInParts(threadData, _parts, _cr1, _cr2, _cmt);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _pcmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _restr, tmpMeta[1], _info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_restr = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_pcmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_info = tmpMeta[12];
_cr1 = tmp3_2;
_cr2 = tmp3_3;
_cmt = tmp3_4;
_parts_1 = omc_InteractiveUtil_setConnectionCommentInParts(threadData, _parts, _cr1, _cr2, _cmt);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _pcmt, _parts_1, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _restr, tmpMeta[1], _info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_setConnectionComment(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_string _inString4, modelica_metatype _inProgram5, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_string tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inString4;
tmp4_5 = _inProgram5;
{
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_string _cmt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_class_ = tmp4_1;
_cr1 = tmp4_2;
_cr2 = tmp4_3;
_cmt = tmp4_4;
_p = tmp4_5;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_cdef_1 = omc_InteractiveUtil_setConnectionCommentInClass(threadData, _cdef, _cr1, _cr2, _cmt);
tmpMeta[2] = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmpMeta[0+0] = _newp;
tmp1_c1 = _OMC_LIT67;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inProgram5;
tmp1_c1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inComponentRef, modelica_string _inString)
{
modelica_metatype _outAbsynComponentItemLst = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_string tmp3_3;
tmp3_1 = _inAbsynComponentItemLst;
tmp3_2 = _inComponentRef;
tmp3_3 = _inString;
{
modelica_metatype _compcmt_1 = NULL;
modelica_metatype _compcmt = NULL;
modelica_string _id = NULL;
modelica_string _cmt = NULL;
modelica_metatype _ad = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _cs = NULL;
modelica_metatype _cs_1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _c = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_id = tmpMeta[4];
_ad = tmpMeta[5];
_mod = tmpMeta[6];
_cond = tmpMeta[7];
_compcmt = tmpMeta[8];
_cs = tmpMeta[2];
_cr = tmp3_2;
_cmt = tmp3_3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, tmpMeta[1]);
tmp5 = omc_AbsynUtil_crefEqual(threadData, tmpMeta[2], _cr);
if (1 != tmp5) goto goto_1;
_compcmt_1 = omc_InteractiveUtil_setClassCommentInCommentOpt(threadData, _compcmt, _cmt);
tmpMeta[2] = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _id, _ad, _mod);
tmpMeta[3] = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta[2], _cond, _compcmt_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _cs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_c = tmpMeta[1];
_cs = tmpMeta[2];
_cr = tmp3_2;
_cmt = tmp3_3;
_cs_1 = omc_InteractiveUtil_setComponentCommentInCompitems(threadData, _cs, _cr, _cmt);
tmpMeta[1] = mmc_mk_cons(_c, _cs_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynComponentItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynComponentItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inComponentRef, modelica_string _inString)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_string tmp3_3;
tmp3_1 = _inElementSpec;
tmp3_2 = _inComponentRef;
tmp3_3 = _inString;
{
modelica_metatype _citems_1 = NULL;
modelica_metatype _citems = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _cr = NULL;
modelica_string _cmt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_attr = tmpMeta[1];
_tp = tmpMeta[2];
_citems = tmpMeta[3];
_cr = tmp3_2;
_cmt = tmp3_3;
_citems_1 = omc_InteractiveUtil_setComponentCommentInCompitems(threadData, _citems, _cr, _cmt);
tmpMeta[1] = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr, _tp, _citems_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElementSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponentRef, modelica_string _inString)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_string tmp3_3;
tmp3_1 = _inAbsynElementItemLst;
tmp3_2 = _inComponentRef;
tmp3_3 = _inString;
{
modelica_metatype _spec_1 = NULL;
modelica_metatype _spec = NULL;
modelica_boolean _f;
modelica_metatype _r = NULL;
modelica_metatype _inout = NULL;
modelica_string _cmt = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_metatype _es = NULL;
modelica_metatype _es_1 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 6));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 7));
_f = tmp5;
_r = tmpMeta[5];
_inout = tmpMeta[6];
_spec = tmpMeta[7];
_info = tmpMeta[8];
_constr = tmpMeta[9];
_es = tmpMeta[2];
_cr1 = tmp3_2;
_cmt = tmp3_3;
_spec_1 = omc_InteractiveUtil_setComponentCommentInElementspec(threadData, _spec, _cr1, _cmt);
tmpMeta[2] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _inout, _spec_1, _info, _constr);
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta[2]);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _es);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_e = tmpMeta[1];
_es = tmpMeta[2];
_cr1 = tmp3_2;
_cmt = tmp3_3;
_es_1 = omc_InteractiveUtil_setComponentCommentInElementitems(threadData, _es, _cr1, _cmt);
tmpMeta[1] = mmc_mk_cons(_e, _es_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponentRef, modelica_string _inString)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_string tmp3_3;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inComponentRef;
tmp3_3 = _inString;
{
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _e = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _xs_1 = NULL;
modelica_metatype _cr1 = NULL;
modelica_string _cmt = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_xs = tmpMeta[2];
_cr1 = tmp3_2;
_cmt = tmp3_3;
_elts_1 = omc_InteractiveUtil_setComponentCommentInElementitems(threadData, _elts, _cr1, _cmt);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _xs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_e = tmpMeta[3];
_xs = tmpMeta[2];
_cr1 = tmp3_2;
_cmt = tmp3_3;
tmp3 += 2;
_xs_1 = omc_InteractiveUtil_setComponentCommentInParts(threadData, _xs, _cr1, _cmt);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _e);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _xs_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_xs = tmpMeta[2];
_cr1 = tmp3_2;
_cmt = tmp3_3;
_elts_1 = omc_InteractiveUtil_setComponentCommentInElementitems(threadData, _elts, _cr1, _cmt);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _xs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_e = tmpMeta[3];
_xs = tmpMeta[2];
_cr1 = tmp3_2;
_cmt = tmp3_3;
_xs_1 = omc_InteractiveUtil_setComponentCommentInParts(threadData, _xs, _cr1, _cmt);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _e);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _xs_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_p = tmpMeta[1];
_xs = tmpMeta[2];
_cr1 = tmp3_2;
_cmt = tmp3_3;
_xs_1 = omc_InteractiveUtil_setComponentCommentInParts(threadData, _xs, _cr1, _cmt);
tmpMeta[1] = mmc_mk_cons(_p, _xs_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentRef, modelica_string _inString)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_string tmp3_3;
tmp3_1 = _inClass;
tmp3_2 = _inComponentRef;
tmp3_3 = _inString;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _name = NULL;
modelica_string _cmt = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _restr = NULL;
modelica_metatype _pcmt = NULL;
modelica_metatype _info = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_restr = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_pcmt = tmpMeta[11];
_info = tmpMeta[12];
_cr1 = tmp3_2;
_cmt = tmp3_3;
_parts_1 = omc_InteractiveUtil_setComponentCommentInParts(threadData, _parts, _cr1, _cmt);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _pcmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _restr, tmpMeta[1], _info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_restr = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_pcmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_info = tmpMeta[12];
_cr1 = tmp3_2;
_cmt = tmp3_3;
_parts_1 = omc_InteractiveUtil_setComponentCommentInParts(threadData, _parts, _cr1, _cmt);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _pcmt, _parts_1, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _restr, tmpMeta[1], _info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_string omc_InteractiveUtil_setComponentComment(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_string _inString3, modelica_metatype _inProgram4, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_string tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inString3;
tmp4_4 = _inProgram4;
{
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _cr1 = NULL;
modelica_string _cmt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_class_ = tmp4_1;
_cr1 = tmp4_2;
_cmt = tmp4_3;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_cdef_1 = omc_InteractiveUtil_setComponentCommentInClass(threadData, _cdef, _cr1, _cmt);
tmpMeta[2] = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp1_c0 = _OMC_LIT67;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
tmp1_c0 = _OMC_LIT52;
tmpMeta[0+1] = _inProgram4;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getClassCommentInCommentOpt(threadData_t *threadData, modelica_metatype _inComment)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComment;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_outString = tmpMeta[2];
tmp1 = _outString;
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inComponentRef)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inAbsynComponentItemLst;
tmp4_2 = _inComponentRef;
{
modelica_metatype _compcmt = NULL;
modelica_string _id = NULL;
modelica_metatype _ad = NULL;
modelica_metatype _cs = NULL;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_id = tmpMeta[3];
_ad = tmpMeta[4];
_compcmt = tmpMeta[5];
_cr = tmp4_2;
tmpMeta[0] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, _ad);
tmp6 = omc_AbsynUtil_crefEqual(threadData, tmpMeta[0], _cr);
if (1 != tmp6) goto goto_2;
tmp1 = omc_InteractiveUtil_getClassCommentInCommentOpt(threadData, _compcmt);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_cs = tmpMeta[1];
_cr = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInCompitems(threadData, _cs, _cr);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inComponentRef)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inElementSpec;
tmp4_2 = _inComponentRef;
{
modelica_metatype _citems = NULL;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_citems = tmpMeta[0];
_cr = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInCompitems(threadData, _citems, _cr);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponentRef)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inComponentRef;
{
modelica_metatype _spec = NULL;
modelica_metatype _es = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
_spec = tmpMeta[3];
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInElementspec(threadData, _spec, _cr1);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_es = tmpMeta[1];
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInElementitems(threadData, _es, _cr1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponentRef)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inComponentRef;
{
modelica_metatype _elts = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_elts = tmpMeta[2];
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInElementitems(threadData, _elts, _cr1);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
_xs = tmpMeta[1];
_cr1 = tmp4_2;
tmp4 += 2;
tmp1 = omc_InteractiveUtil_getComponentCommentInParts(threadData, _xs, _cr1);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_elts = tmpMeta[2];
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInElementitems(threadData, _elts, _cr1);
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
_xs = tmpMeta[1];
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInParts(threadData, _xs, _cr1);
goto tmp3_done;
}
case 4: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInParts(threadData, _xs, _cr1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentRef)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inComponentRef;
{
modelica_metatype _parts = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_parts = tmpMeta[1];
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInParts(threadData, _parts, _cr1);
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_parts = tmpMeta[1];
_cr1 = tmp4_2;
tmp1 = omc_InteractiveUtil_getComponentCommentInParts(threadData, _parts, _cr1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getComponentComment(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inProgram4)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inProgram4;
{
modelica_metatype _p_class = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _cr1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_class_ = tmp4_1;
_cr1 = tmp4_2;
_p = tmp4_3;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
tmp1 = omc_InteractiveUtil_getComponentCommentInClass(threadData, _cdef, _cr1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_compareTransitionFuncArgs(threadData_t *threadData, modelica_metatype _args, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[14] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_string tmp4_3;volatile modelica_string tmp4_4;volatile modelica_boolean tmp4_5;volatile modelica_boolean tmp4_6;volatile modelica_boolean tmp4_7;volatile modelica_integer tmp4_8;
tmp4_1 = _args;
tmp4_2 = _from;
tmp4_3 = _to;
tmp4_4 = _condition;
tmp4_5 = _immediate;
tmp4_6 = _reset;
tmp4_7 = _synchronize;
tmp4_8 = _priority;
{
modelica_string _from1 = NULL;
modelica_string _to1 = NULL;
modelica_string _condition1 = NULL;
modelica_string _immediate1 = NULL;
modelica_string _reset1 = NULL;
modelica_string _synchronize1 = NULL;
modelica_string _priority1 = NULL;
modelica_string _from2 = NULL;
modelica_string _to2 = NULL;
modelica_string _condition2 = NULL;
modelica_boolean _immediate2;
modelica_boolean _reset2;
modelica_boolean _synchronize2;
modelica_integer _priority2;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (!listEmpty(tmpMeta[5])) goto tmp3_end;
_from1 = tmpMeta[0];
_to1 = tmpMeta[2];
_condition1 = tmpMeta[4];
_from2 = tmp4_2;
_to2 = tmp4_3;
_condition2 = tmp4_4;
tmp4 += 4;
if (!(((stringEqual(_from1, _from2)) && (stringEqual(_to1, _to2))) && (stringEqual(_condition1, _condition2)))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
_from1 = tmpMeta[0];
_to1 = tmpMeta[2];
_condition1 = tmpMeta[4];
_immediate1 = tmpMeta[6];
_from2 = tmp4_2;
_to2 = tmp4_3;
_condition2 = tmp4_4;
_immediate2 = tmp4_5;
tmp4 += 3;
if (!((((stringEqual(_from1, _from2)) && (stringEqual(_to1, _to2))) && (stringEqual(_condition1, _condition2))) && (stringEqual(_immediate1, (_immediate2?_OMC_LIT23:_OMC_LIT24))))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (!listEmpty(tmpMeta[9])) goto tmp3_end;
_from1 = tmpMeta[0];
_to1 = tmpMeta[2];
_condition1 = tmpMeta[4];
_immediate1 = tmpMeta[6];
_reset1 = tmpMeta[8];
_from2 = tmp4_2;
_to2 = tmp4_3;
_condition2 = tmp4_4;
_immediate2 = tmp4_5;
_reset2 = tmp4_6;
tmp4 += 2;
if (!(((((stringEqual(_from1, _from2)) && (stringEqual(_to1, _to2))) && (stringEqual(_condition1, _condition2))) && (stringEqual(_immediate1, (_immediate2?_OMC_LIT23:_OMC_LIT24)))) && (stringEqual(_reset1, (_reset2?_OMC_LIT23:_OMC_LIT24))))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
if (!listEmpty(tmpMeta[11])) goto tmp3_end;
_from1 = tmpMeta[0];
_to1 = tmpMeta[2];
_condition1 = tmpMeta[4];
_immediate1 = tmpMeta[6];
_reset1 = tmpMeta[8];
_synchronize1 = tmpMeta[10];
_from2 = tmp4_2;
_to2 = tmp4_3;
_condition2 = tmp4_4;
_immediate2 = tmp4_5;
_reset2 = tmp4_6;
_synchronize2 = tmp4_7;
tmp4 += 1;
if (!((((((stringEqual(_from1, _from2)) && (stringEqual(_to1, _to2))) && (stringEqual(_condition1, _condition2))) && (stringEqual(_immediate1, (_immediate2?_OMC_LIT23:_OMC_LIT24)))) && (stringEqual(_reset1, (_reset2?_OMC_LIT23:_OMC_LIT24)))) && (stringEqual(_synchronize1, (_synchronize2?_OMC_LIT23:_OMC_LIT24))))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
if (listEmpty(tmpMeta[11])) goto tmp3_end;
tmpMeta[12] = MMC_CAR(tmpMeta[11]);
tmpMeta[13] = MMC_CDR(tmpMeta[11]);
if (!listEmpty(tmpMeta[13])) goto tmp3_end;
_from1 = tmpMeta[0];
_to1 = tmpMeta[2];
_condition1 = tmpMeta[4];
_immediate1 = tmpMeta[6];
_reset1 = tmpMeta[8];
_synchronize1 = tmpMeta[10];
_priority1 = tmpMeta[12];
_from2 = tmp4_2;
_to2 = tmp4_3;
_condition2 = tmp4_4;
_immediate2 = tmp4_5;
_reset2 = tmp4_6;
_synchronize2 = tmp4_7;
_priority2 = tmp4_8;
if (!(((((((stringEqual(_from1, _from2)) && (stringEqual(_to1, _to2))) && (stringEqual(_condition1, _condition2))) && (stringEqual(_immediate1, (_immediate2?_OMC_LIT23:_OMC_LIT24)))) && (stringEqual(_reset1, (_reset2?_OMC_LIT23:_OMC_LIT24)))) && (stringEqual(_synchronize1, (_synchronize2?_OMC_LIT23:_OMC_LIT24)))) && (stringEqual(_priority1, intString(_priority2))))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_compareTransitionFuncArgs(threadData_t *threadData, modelica_metatype _args, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_boolean _b;
modelica_metatype out_b;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_b = omc_InteractiveUtil_compareTransitionFuncArgs(threadData, _args, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_namedArgValueAsString(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_string _inNamedArg, modelica_string _inDefaultValue, modelica_boolean *out_outDefault)
{
modelica_string _outNamedArg = NULL;
modelica_boolean _outDefault;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynNamedArgLst;
{
modelica_metatype _namedArg = NULL;
modelica_metatype _al = NULL;
modelica_string _namedArgName = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1_c0 = _inDefaultValue;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_namedArg = tmpMeta[2];
_namedArgName = tmpMeta[4];
if (!(stringEqual(_namedArgName, _inNamedArg))) goto tmp3_end;
tmp1_c0 = omc_Dump_printNamedArgValueStr(threadData, _namedArg);
tmp1_c1 = 0;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_al = tmpMeta[3];
_inAbsynNamedArgLst = _al;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outNamedArg = tmp1_c0;
_outDefault = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outDefault) { *out_outDefault = _outDefault; }
return _outNamedArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_namedArgValueAsString(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inNamedArg, modelica_metatype _inDefaultValue, modelica_metatype *out_outDefault)
{
modelica_boolean _outDefault;
modelica_string _outNamedArg = NULL;
_outNamedArg = omc_InteractiveUtil_namedArgValueAsString(threadData, _inAbsynNamedArgLst, _inNamedArg, _inDefaultValue, &_outDefault);
if (out_outDefault) { *out_outDefault = mmc_mk_icon(_outDefault); }
return _outNamedArg;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addOrUpdateNamedArg(threadData_t *threadData, modelica_metatype _inNamedArgLst, modelica_string _namedArg, modelica_string _defaultValue, modelica_metatype _inTransition, modelica_integer _position)
{
modelica_metatype _outTransition = NULL;
modelica_string _namedArgValue = NULL;
modelica_boolean _isDefault;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_namedArgValue = omc_InteractiveUtil_namedArgValueAsString(threadData, _inNamedArgLst, _namedArg, _defaultValue ,&_isDefault);
if((listLength(_inTransition) < _position))
{
_outTransition = omc_List_insert(threadData, _inTransition, _position, _namedArgValue);
}
else
{
if(((listLength(_inTransition) >= _position) && (!_isDefault)))
{
_outTransition = omc_List_replaceAt(threadData, _namedArgValue, _position, _inTransition);
}
else
{
_outTransition = _inTransition;
}
}
_return: OMC_LABEL_UNUSED
return _outTransition;
}
modelica_metatype boxptr_InteractiveUtil_addOrUpdateNamedArg(threadData_t *threadData, modelica_metatype _inNamedArgLst, modelica_metatype _namedArg, modelica_metatype _defaultValue, modelica_metatype _inTransition, modelica_metatype _position)
{
modelica_integer tmp1;
modelica_metatype _outTransition = NULL;
tmp1 = mmc_unbox_integer(_position);
_outTransition = omc_InteractiveUtil_addOrUpdateNamedArg(threadData, _inNamedArgLst, _namedArg, _defaultValue, _inTransition, tmp1);
return _outTransition;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteTransitionInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority)
{
modelica_metatype _outAbsynEquationItemLst = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_string tmp3_2;volatile modelica_string tmp3_3;volatile modelica_string tmp3_4;volatile modelica_boolean tmp3_5;volatile modelica_boolean tmp3_6;volatile modelica_boolean tmp3_7;volatile modelica_integer tmp3_8;
tmp3_1 = _inAbsynEquationItemLst;
tmp3_2 = _from;
tmp3_3 = _to;
tmp3_4 = _condition;
tmp3_5 = _immediate;
tmp3_6 = _reset;
tmp3_7 = _synchronize;
tmp3_8 = _priority;
{
modelica_metatype _res = NULL;
modelica_metatype _xs = NULL;
modelica_string _from_ = NULL;
modelica_string _to_ = NULL;
modelica_string _condition_ = NULL;
modelica_boolean _immediate_;
modelica_boolean _reset_;
modelica_boolean _synchronize_;
modelica_integer _priority_;
modelica_metatype _name = NULL;
modelica_metatype _expArgs = NULL;
modelica_metatype _namedArgs = NULL;
modelica_metatype _args = NULL;
modelica_metatype _conditionExp = NULL;
modelica_metatype _x = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],6,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,2) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
_name = tmpMeta[4];
_expArgs = tmpMeta[6];
_namedArgs = tmpMeta[7];
_xs = tmpMeta[2];
_from_ = tmp3_2;
_to_ = tmp3_3;
_condition_ = tmp3_4;
_immediate_ = tmp3_5;
_reset_ = tmp3_6;
_synchronize_ = tmp3_7;
_priority_ = tmp3_8;
if (!omc_AbsynUtil_crefEqual(threadData, _name, _OMC_LIT273)) goto tmp2_end;
_args = omc_List_map(threadData, _expArgs, boxvar_Dump_printExpStr);
_args = omc_InteractiveUtil_addOrUpdateNamedArg(threadData, _namedArgs, _OMC_LIT266, _OMC_LIT23, _args, ((modelica_integer) 4));
_args = omc_InteractiveUtil_addOrUpdateNamedArg(threadData, _namedArgs, _OMC_LIT267, _OMC_LIT23, _args, ((modelica_integer) 5));
_args = omc_InteractiveUtil_addOrUpdateNamedArg(threadData, _namedArgs, _OMC_LIT268, _OMC_LIT24, _args, ((modelica_integer) 6));
_args = omc_InteractiveUtil_addOrUpdateNamedArg(threadData, _namedArgs, _OMC_LIT269, _OMC_LIT270, _args, ((modelica_integer) 7));
tmpMeta[1] = omc_Parser_parsestringexp(threadData, _condition_, _OMC_LIT271);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (listEmpty(tmpMeta[2])) goto goto_1;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,2) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (!listEmpty(tmpMeta[4])) goto goto_1;
_conditionExp = tmpMeta[5];
_condition_ = omc_Dump_printExpStr(threadData, _conditionExp);
tmp5 = omc_InteractiveUtil_compareTransitionFuncArgs(threadData, _args, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = omc_InteractiveUtil_deleteTransitionInEqlist(threadData, _xs, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_from_ = tmp3_2;
_to_ = tmp3_3;
_condition_ = tmp3_4;
_immediate_ = tmp3_5;
_reset_ = tmp3_6;
_synchronize_ = tmp3_7;
_priority_ = tmp3_8;
_res = omc_InteractiveUtil_deleteTransitionInEqlist(threadData, _xs, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
tmpMeta[1] = mmc_mk_cons(_x, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynEquationItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteTransitionInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_metatype _outAbsynEquationItemLst = NULL;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_outAbsynEquationItemLst = omc_InteractiveUtil_deleteTransitionInEqlist(threadData, _inAbsynEquationItemLst, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4);
return _outAbsynEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteTransitionInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_string tmp3_2;modelica_string tmp3_3;modelica_string tmp3_4;modelica_boolean tmp3_5;modelica_boolean tmp3_6;modelica_boolean tmp3_7;modelica_integer tmp3_8;
tmp3_1 = _inClass;
tmp3_2 = _from;
tmp3_3 = _to;
tmp3_4 = _condition;
tmp3_5 = _immediate;
tmp3_6 = _reset;
tmp3_7 = _synchronize;
tmp3_8 = _priority;
{
modelica_metatype _eqlst = NULL;
modelica_metatype _eqlst_1 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_string _from_ = NULL;
modelica_string _to_ = NULL;
modelica_string _condition_ = NULL;
modelica_boolean _immediate_;
modelica_boolean _reset_;
modelica_boolean _synchronize_;
modelica_integer _priority_;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_from_ = tmp3_2;
_to_ = tmp3_3;
_condition_ = tmp3_4;
_immediate_ = tmp3_5;
_reset_ = tmp3_6;
_synchronize_ = tmp3_7;
_priority_ = tmp3_8;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_deleteTransitionInEqlist(threadData, _eqlst, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_from_ = tmp3_2;
_to_ = tmp3_3;
_condition_ = tmp3_4;
_immediate_ = tmp3_5;
_reset_ = tmp3_6;
_synchronize_ = tmp3_7;
_priority_ = tmp3_8;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_deleteTransitionInEqlist(threadData, _eqlst, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteTransitionInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_outClass = omc_InteractiveUtil_deleteTransitionInClass(threadData, _inClass, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4);
return _outClass;
}
DLLExport
modelica_boolean omc_InteractiveUtil_deleteTransition(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _b;
modelica_metatype _outProgram = NULL;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_string tmp4_3;volatile modelica_string tmp4_4;volatile modelica_boolean tmp4_5;volatile modelica_boolean tmp4_6;volatile modelica_boolean tmp4_7;volatile modelica_integer tmp4_8;volatile modelica_metatype tmp4_9;
tmp4_1 = _inComponentRef1;
tmp4_2 = _from;
tmp4_3 = _to;
tmp4_4 = _condition;
tmp4_5 = _immediate;
tmp4_6 = _reset;
tmp4_7 = _synchronize;
tmp4_8 = _priority;
tmp4_9 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _modelwithin = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _model_ = NULL;
modelica_string _from_ = NULL;
modelica_string _to_ = NULL;
modelica_string _condition_ = NULL;
modelica_boolean _immediate_;
modelica_boolean _reset_;
modelica_boolean _synchronize_;
modelica_integer _priority_;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_p = tmp4_9;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_modelwithin = omc_AbsynUtil_stripLast(threadData, _modelpath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteTransitionInClass(threadData, _cdef, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _modelwithin);
tmpMeta[4] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], tmpMeta[3]);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[4], _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
_model_ = tmp4_1;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_p = tmp4_9;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteTransitionInClass(threadData, _cdef, _from_, _to_, _condition_, _immediate_, _reset_, _synchronize_, _priority_);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _OMC_LIT7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 2: {
_p = tmp4_9;
tmp1_c0 = 0;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_b = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _b;
}
modelica_metatype boxptr_InteractiveUtil_deleteTransition(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_boolean _b;
modelica_metatype out_b;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_b = omc_InteractiveUtil_deleteTransition(threadData, _inComponentRef1, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4, _inProgram, out_outProgram);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_InteractiveUtil_addTransitionWithAnnotation(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority, modelica_metatype _inAnnotation, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _b;
modelica_metatype _outProgram = NULL;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[21] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;modelica_string tmp4_3;modelica_string tmp4_4;modelica_boolean tmp4_5;modelica_boolean tmp4_6;modelica_boolean tmp4_7;modelica_integer tmp4_8;modelica_metatype tmp4_9;modelica_metatype tmp4_10;
tmp4_1 = _inComponentRef;
tmp4_2 = _from;
tmp4_3 = _to;
tmp4_4 = _condition;
tmp4_5 = _immediate;
tmp4_6 = _reset;
tmp4_7 = _synchronize;
tmp4_8 = _priority;
tmp4_9 = _inAnnotation;
tmp4_10 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _package_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _model_ = NULL;
modelica_string _from_ = NULL;
modelica_string _to_ = NULL;
modelica_string _condition_ = NULL;
modelica_boolean _immediate_;
modelica_boolean _reset_;
modelica_boolean _synchronize_;
modelica_integer _priority_;
modelica_metatype _ann = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _conditionExp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
_model_ = tmp4_1;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_ann = tmp4_9;
_p = tmp4_10;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(_ann), mmc_mk_none());
_cmt = mmc_mk_some(tmpMeta[2]);
tmpMeta[2] = omc_Parser_parsestringexp(threadData, _condition_, _OMC_LIT271);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (listEmpty(tmpMeta[3])) goto goto_2;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,2) == 0) goto goto_2;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (!listEmpty(tmpMeta[5])) goto goto_2;
_conditionExp = tmpMeta[6];
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _from_, tmpMeta[3]);
tmpMeta[5] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, tmpMeta[4]);
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[7] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _to_, tmpMeta[6]);
tmpMeta[8] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, tmpMeta[7]);
tmpMeta[2] = mmc_mk_cons(tmpMeta[5], mmc_mk_cons(tmpMeta[8], mmc_mk_cons(_conditionExp, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta[10] = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_immediate_));
tmpMeta[11] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT266, tmpMeta[10]);
tmpMeta[12] = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_reset_));
tmpMeta[13] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT267, tmpMeta[12]);
tmpMeta[14] = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_synchronize_));
tmpMeta[15] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT268, tmpMeta[14]);
tmpMeta[16] = mmc_mk_box2(3, &Absyn_Exp_INTEGER__desc, mmc_mk_integer(_priority_));
tmpMeta[17] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT269, tmpMeta[16]);
tmpMeta[9] = mmc_mk_cons(tmpMeta[11], mmc_mk_cons(tmpMeta[13], mmc_mk_cons(tmpMeta[15], mmc_mk_cons(tmpMeta[17], MMC_REFSTRUCTLIT(mmc_nil)))));
tmpMeta[18] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, tmpMeta[2], tmpMeta[9]);
tmpMeta[19] = mmc_mk_box3(9, &Absyn_Equation_EQ__NORETCALL__desc, _OMC_LIT273, tmpMeta[18]);
tmpMeta[20] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta[19], _cmt, _OMC_LIT39);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta[20]);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 3))));
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
_model_ = tmp4_1;
_from_ = tmp4_2;
_to_ = tmp4_3;
_condition_ = tmp4_4;
_immediate_ = tmp4_5;
_reset_ = tmp4_6;
_synchronize_ = tmp4_7;
_priority_ = tmp4_8;
_ann = tmp4_9;
_p = tmp4_10;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_package_ = omc_AbsynUtil_stripLast(threadData, _modelpath);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(_ann), mmc_mk_none());
_cmt = mmc_mk_some(tmpMeta[2]);
tmpMeta[2] = omc_Parser_parsestringexp(threadData, _condition_, _OMC_LIT271);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (listEmpty(tmpMeta[3])) goto goto_2;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,2) == 0) goto goto_2;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (!listEmpty(tmpMeta[5])) goto goto_2;
_conditionExp = tmpMeta[6];
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _from_, tmpMeta[3]);
tmpMeta[5] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, tmpMeta[4]);
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[7] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _to_, tmpMeta[6]);
tmpMeta[8] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, tmpMeta[7]);
tmpMeta[2] = mmc_mk_cons(tmpMeta[5], mmc_mk_cons(tmpMeta[8], mmc_mk_cons(_conditionExp, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta[10] = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_immediate_));
tmpMeta[11] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT266, tmpMeta[10]);
tmpMeta[12] = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_reset_));
tmpMeta[13] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT267, tmpMeta[12]);
tmpMeta[14] = mmc_mk_box2(7, &Absyn_Exp_BOOL__desc, mmc_mk_boolean(_synchronize_));
tmpMeta[15] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT268, tmpMeta[14]);
tmpMeta[16] = mmc_mk_box2(3, &Absyn_Exp_INTEGER__desc, mmc_mk_integer(_priority_));
tmpMeta[17] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _OMC_LIT269, tmpMeta[16]);
tmpMeta[9] = mmc_mk_cons(tmpMeta[11], mmc_mk_cons(tmpMeta[13], mmc_mk_cons(tmpMeta[15], mmc_mk_cons(tmpMeta[17], MMC_REFSTRUCTLIT(mmc_nil)))));
tmpMeta[18] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, tmpMeta[2], tmpMeta[9]);
tmpMeta[19] = mmc_mk_box3(9, &Absyn_Equation_EQ__NORETCALL__desc, _OMC_LIT273, tmpMeta[18]);
tmpMeta[20] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta[19], _cmt, _OMC_LIT39);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta[20]);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _package_);
tmpMeta[4] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], tmpMeta[3]);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[4], _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _b;
}
modelica_metatype boxptr_InteractiveUtil_addTransitionWithAnnotation(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority, modelica_metatype _inAnnotation, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_boolean _b;
modelica_metatype out_b;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_b = omc_InteractiveUtil_addTransitionWithAnnotation(threadData, _inComponentRef, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4, _inAnnotation, _inProgram, out_outProgram);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_InteractiveUtil_addTransition(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_string _from, modelica_string _to, modelica_string _condition, modelica_boolean _immediate, modelica_boolean _reset, modelica_boolean _synchronize, modelica_integer _priority, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _b;
modelica_metatype _outProgram = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = omc_InteractiveUtil_addTransitionWithAnnotation(threadData, _inComponentRef, _from, _to, _condition, _immediate, _reset, _synchronize, _priority, omc_InteractiveUtil_annotationListToAbsyn(threadData, _inAbsynNamedArgLst), _inProgram ,&_outProgram);
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _b;
}
modelica_metatype boxptr_InteractiveUtil_addTransition(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _from, modelica_metatype _to, modelica_metatype _condition, modelica_metatype _immediate, modelica_metatype _reset, modelica_metatype _synchronize, modelica_metatype _priority, modelica_metatype _inAbsynNamedArgLst, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_boolean _b;
modelica_metatype out_b;
tmp1 = mmc_unbox_integer(_immediate);
tmp2 = mmc_unbox_integer(_reset);
tmp3 = mmc_unbox_integer(_synchronize);
tmp4 = mmc_unbox_integer(_priority);
_b = omc_InteractiveUtil_addTransition(threadData, _inComponentRef, _from, _to, _condition, tmp1, tmp2, tmp3, tmp4, _inAbsynNamedArgLst, _inProgram, out_outProgram);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteEquationInEqlist(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynEquationItemLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inAbsynEquationItemLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _res = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _cn1 = NULL;
modelica_metatype _cn2 = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _x = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_cn1 = tmpMeta[4];
_cn2 = tmpMeta[5];
_xs = tmpMeta[2];
_c1 = tmp3_2;
_c2 = tmp3_3;
if (!(omc_AbsynUtil_crefEqual(threadData, _c1, _cn1) && omc_AbsynUtil_crefEqual(threadData, _c2, _cn2))) goto tmp2_end;
_inAbsynEquationItemLst1 = _xs;
_inComponentRef2 = _c1;
_inComponentRef3 = _c2;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_c1 = tmp3_2;
_c2 = tmp3_3;
_res = omc_InteractiveUtil_deleteEquationInEqlist(threadData, _xs, _c1, _c2);
tmpMeta[1] = mmc_mk_cons(_x, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynEquationItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteEquationInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inClass1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _eqlst = NULL;
modelica_metatype _eqlst_1 = NULL;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _i = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_2;
_c2 = tmp3_3;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_deleteEquationInEqlist(threadData, _eqlst, _c1, _c2);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_i = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_c1 = tmp3_2;
_c2 = tmp3_3;
_eqlst = omc_InteractiveUtil_getEquationList(threadData, _parts);
_eqlst_1 = omc_InteractiveUtil_deleteEquationInEqlist(threadData, _eqlst, _c1, _c2);
_parts2 = omc_InteractiveUtil_replaceEquationList(threadData, _parts, _eqlst_1);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_string omc_InteractiveUtil_deleteConnection(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inProgram4, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inProgram4;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _modelwithin = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_p = tmp4_4;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_modelwithin = omc_AbsynUtil_stripLast(threadData, _modelpath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteEquationInClass(threadData, _cdef, _c1, _c2);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _modelwithin);
tmpMeta[4] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], tmpMeta[3]);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[4], _p, 0);
tmp1_c0 = _OMC_LIT67;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_p = tmp4_4;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteEquationInClass(threadData, _cdef, _c1, _c2);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _OMC_LIT7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp1_c0 = _OMC_LIT67;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 2: {
_p = tmp4_4;
tmp1_c0 = _OMC_LIT52;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_addConnection(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inAbsynNamedArgLst4, modelica_metatype _inProgram5, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inAbsynNamedArgLst4;
tmp4_5 = _inProgram5;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _package_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _c1 = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _nargs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
if (!listEmpty(tmp4_4)) goto tmp3_end;
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_p = tmp4_5;
tmp4 += 1;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[2] = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _c1, _c2);
tmpMeta[3] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta[2], mmc_mk_none(), _OMC_LIT39);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta[3]);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 3))));
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp1_c0 = _OMC_LIT67;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
if (!listEmpty(tmp4_4)) goto tmp3_end;
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_p = tmp4_5;
tmp4 += 1;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_package_ = omc_AbsynUtil_stripLast(threadData, _modelpath);
tmpMeta[2] = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _c1, _c2);
tmpMeta[3] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta[2], mmc_mk_none(), _OMC_LIT39);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta[3]);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _package_);
tmpMeta[4] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], tmpMeta[3]);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[4], _p, 0);
tmp1_c0 = _OMC_LIT67;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_nargs = tmp4_4;
_p = tmp4_5;
tmp4 += 1;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_cmt = omc_InteractiveUtil_annotationListToAbsynComment(threadData, _nargs, mmc_mk_none());
tmpMeta[2] = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _c1, _c2);
tmpMeta[3] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta[2], _cmt, _OMC_LIT39);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta[3]);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 3))));
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp1_c0 = _OMC_LIT67;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
_model_ = tmp4_1;
_c1 = tmp4_2;
_c2 = tmp4_3;
_nargs = tmp4_4;
_p = tmp4_5;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_package_ = omc_AbsynUtil_stripLast(threadData, _modelpath);
_cmt = omc_InteractiveUtil_annotationListToAbsynComment(threadData, _nargs, mmc_mk_none());
tmpMeta[2] = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _c1, _c2);
tmpMeta[3] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, tmpMeta[2], _cmt, _OMC_LIT39);
_newcdef = omc_InteractiveUtil_addToEquation(threadData, _cdef, tmpMeta[3]);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _package_);
tmpMeta[4] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], tmpMeta[3]);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[4], _p, 0);
tmp1_c0 = _OMC_LIT67;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getStringComment(threadData_t *threadData, modelica_metatype _inAbsynCommentOption)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynCommentOption;
{
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_str = tmpMeta[2];
tmp1 = _str;
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getNthConnection(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_metatype _outValue = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_integer tmp3_3;
tmp3_1 = _inComponentRef;
tmp3_2 = _inProgram;
tmp3_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _eq = NULL;
modelica_metatype _cmt = NULL;
modelica_string _str = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_model_ = tmp3_1;
_p = tmp3_2;
_n = tmp3_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[1] = listGet(omc_InteractiveUtil_getConnections(threadData, _cdef), _n);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_eq = tmpMeta[2];
_cmt = tmpMeta[3];
_str = omc_InteractiveUtil_getStringComment(threadData, _cmt);
_s1 = omc_InteractiveUtil_getConnectionStr(threadData, _eq ,&_s2);
tmpMeta[2] = mmc_mk_box2(5, &Values_Value_STRING__desc, _s1);
tmpMeta[3] = mmc_mk_box2(5, &Values_Value_STRING__desc, _s2);
tmpMeta[4] = mmc_mk_box2(5, &Values_Value_STRING__desc, _str);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], mmc_mk_cons(tmpMeta[3], mmc_mk_cons(tmpMeta[4], MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outValue = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outValue;
}
modelica_metatype boxptr_InteractiveUtil_getNthConnection(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_metatype _outValue = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outValue = omc_InteractiveUtil_getNthConnection(threadData, _inComponentRef, _inProgram, tmp1);
return _outValue;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemsCondition(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynComponentItemLst;
{
modelica_metatype _cond = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
_cond = tmpMeta[2];
tmp1 = omc_Dump_unparseComponentCondition(threadData, _cond);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentCondition(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,3) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_lst = tmpMeta[1];
tmp1 = omc_InteractiveUtil_getComponentitemsCondition(threadData, _lst);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getNthComponentCondition(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _comp = NULL;
modelica_string _str = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_comp = omc_InteractiveUtil_getNthComponentInClass(threadData, _cdef, _n);
_str = omc_InteractiveUtil_getComponentCondition(threadData, _comp);
_str = omc_System_trim(threadData, _str, _OMC_LIT146);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT28, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT28, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getNthComponentCondition(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthComponentCondition(threadData, _inComponentRef, _inProgram, tmp1);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getNthComponentModification(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _comp = NULL;
modelica_string _str = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_comp = omc_InteractiveUtil_getNthComponentInClass(threadData, _cdef, _n);
_str = omc_InteractiveUtil_getComponentModification(threadData, _comp);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getNthComponentModification(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthComponentModification(threadData, _inComponentRef, _inProgram, tmp1);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getNthComponentAnnotation(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _comp = NULL;
modelica_string _s1 = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_comp = omc_InteractiveUtil_getNthComponentInClass(threadData, _cdef, _n);
_s1 = omc_InteractiveUtil_getComponentAnnotation(threadData, _comp, _cdef, _p, _modelpath);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getNthComponentAnnotation(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthComponentAnnotation(threadData, _inComponentRef, _inProgram, tmp1);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getComponentAnnotations(threadData_t *threadData, modelica_metatype _inClassPath, modelica_metatype _inProgram, modelica_integer _inAccess)
{
modelica_string _outString = NULL;
modelica_metatype _model_path = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _comps2 = NULL;
modelica_metatype _comps = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_model_path = omc_AbsynUtil_crefToPath(threadData, _inClassPath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _model_path, _inProgram, 0);
_comps1 = omc_InteractiveUtil_getPublicComponentsInClass(threadData, _cdef);
if((_inAccess >= ((modelica_integer) 4)))
{
_comps2 = omc_InteractiveUtil_getProtectedComponentsInClass(threadData, _cdef);
}
else
{
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_comps2 = tmpMeta[0];
}
_comps = listAppend(_comps1, _comps2);
_outString = omc_InteractiveUtil_getComponentAnnotationsFromElts(threadData, _comps, _cdef, _inProgram, _model_path);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_outString, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
_outString = stringAppendList(tmpMeta[0]);
goto tmp2_done;
}
case 1: {
_outString = _OMC_LIT52;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getComponentAnnotations(threadData_t *threadData, modelica_metatype _inClassPath, modelica_metatype _inProgram, modelica_metatype _inAccess)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inAccess);
_outString = omc_InteractiveUtil_getComponentAnnotations(threadData, _inClassPath, _inProgram, tmp1);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponents2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_boolean _inBoolean, modelica_integer _inAccess)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_boolean tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inComponentRef;
tmp4_2 = _inBoolean;
tmp4_3 = _inAccess;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _c = NULL;
modelica_string _id = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_string _str = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _comps2 = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _cache = NULL;
modelica_boolean _b;
modelica_boolean _permissive;
modelica_metatype _genv = NULL;
modelica_integer _access;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_b = tmp4_2;
_access = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_p_1 = omc_SymbolTable_getSCode(threadData);
if(omc_Flags_isSet(threadData, _OMC_LIT18))
{
tmpMeta[0] = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, omc_SymbolTable_getAbsyn(threadData), _modelpath, omc_FCore_emptyCache(threadData), _OMC_LIT61);
_genv = tmpMeta[0];
}
else
{
_cache = omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
tmpMeta[5] = omc_Lookup_lookupClass(threadData, _cache, _env, _modelpath, mmc_mk_none(), &tmpMeta[0], &tmpMeta[4]);
_cache = tmpMeta[5];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,8) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
_c = tmpMeta[0];
_id = tmpMeta[1];
_encflag = tmpMeta[2];
_restr = tmpMeta[3];
_env_1 = tmpMeta[4];
_env2 = omc_FGraph_openScope(threadData, _env_1, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
_permissive = omc_Flags_getConfigBool(threadData, _OMC_LIT58);
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT58, 1);
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, _cache, _env2, tmpMeta[0], _OMC_LIT50, _OMC_LIT33, _ci_state, _c, _OMC_LIT59, tmpMeta[1], ((modelica_integer) 0) ,&_env2 ,NULL ,NULL ,NULL);
omc_FlagsUtil_setConfigBool(threadData, _OMC_LIT58, _permissive);
tmpMeta[0] = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, omc_SymbolTable_getAbsyn(threadData), _modelpath, _cache, _env2);
_genv = tmpMeta[0];
}
_comps1 = omc_InteractiveUtil_getPublicComponentsInClass(threadData, _cdef);
_s1 = omc_InteractiveUtil_getComponentsInfo(threadData, _comps1, _b, _OMC_LIT62, _genv);
if((_access >= ((modelica_integer) 4)))
{
_comps2 = omc_InteractiveUtil_getProtectedComponentsInClass(threadData, _cdef);
_s2 = omc_InteractiveUtil_getComponentsInfo(threadData, _comps2, _b, _OMC_LIT63, _genv);
}
else
{
_s2 = _OMC_LIT9;
}
tmpMeta[0] = mmc_mk_cons(_s1, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil)));
_str = omc_Util_stringDelimitListNonEmptyElts(threadData, tmpMeta[0], _OMC_LIT10);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponents2(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inBoolean, modelica_metatype _inAccess)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
tmp2 = mmc_unbox_integer(_inAccess);
_outString = omc_InteractiveUtil_getComponents2(threadData, _inComponentRef, tmp1, tmp2);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getComponents(threadData_t *threadData, modelica_metatype _cr, modelica_boolean _inBoolean, modelica_integer _inAccess)
{
modelica_string _outString = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outString = omc_InteractiveUtil_getComponents2(threadData, _cr, _inBoolean, _inAccess);
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getComponents(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _inBoolean, modelica_metatype _inAccess)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
tmp2 = mmc_unbox_integer(_inAccess);
_outString = omc_InteractiveUtil_getComponents(threadData, _cr, tmp1, tmp2);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_insertQuotesToList(threadData_t *threadData, modelica_metatype _inStringList)
{
modelica_metatype _outStringList = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inStringList;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_string _str_1 = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_str = tmpMeta[1];
_rest = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_OMC_LIT28, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT28, MMC_REFSTRUCTLIT(mmc_nil))));
_str_1 = stringAppendList(tmpMeta[1]);
_res = omc_InteractiveUtil_insertQuotesToList(threadData, _rest);
tmpMeta[1] = mmc_mk_cons(_str_1, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outStringList = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringList;
}
DLLExport
modelica_boolean omc_InteractiveUtil_useQuotes(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynNamedArgLst;
{
modelica_metatype _al = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
modelica_integer tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (9 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT274), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],4,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
_b = tmp6;
tmp1 = _b;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_al = tmpMeta[1];
_inAbsynNamedArgLst = _al;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_useQuotes(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_useQuotes(threadData, _inAbsynNamedArgLst);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthComponent2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_integer _inInteger3, modelica_metatype _inEnv4)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inClass1;
tmp4_2 = _inClass2;
tmp4_3 = _inInteger3;
tmp4_4 = _inEnv4;
{
modelica_metatype _env2 = NULL;
modelica_metatype _env_2 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _comp = NULL;
modelica_string _s1 = NULL;
modelica_string _id = NULL;
modelica_metatype _c = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _cdef = NULL;
modelica_integer _n;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_c = tmp4_1;
_id = tmpMeta[0];
_encflag = tmpMeta[1];
_restr = tmpMeta[2];
_cdef = tmp4_2;
_n = tmp4_3;
_env = tmp4_4;
_env2 = omc_FGraph_openScope(threadData, _env, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, omc_FCore_emptyCache(threadData), _env2, tmpMeta[0], _OMC_LIT50, _OMC_LIT33, _ci_state, _c, _OMC_LIT59, tmpMeta[1], ((modelica_integer) 0) ,&_env_2 ,NULL ,NULL ,NULL);
_comp = omc_InteractiveUtil_getNthComponentInClass(threadData, _cdef, _n);
tmpMeta[0] = omc_InteractiveUtil_getComponentInfoOld(threadData, _comp, _env_2);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (!listEmpty(tmpMeta[2])) goto goto_2;
_s1 = tmpMeta[1];
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
fputs(MMC_STRINGDATA(_OMC_LIT275),stdout);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthComponent2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _inInteger3, modelica_metatype _inEnv4)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger3);
_outString = omc_InteractiveUtil_getNthComponent2(threadData, _inClass1, _inClass2, tmp1, _inEnv4);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getNthComponent(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_integer tmp4_3;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
tmp4_3 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _c = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
modelica_integer _n;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_p = tmp4_2;
_n = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_p_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p);
_cache = omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
omc_Lookup_lookupClass(threadData, _cache, _env, _modelpath, mmc_mk_none(), &tmpMeta[0], &tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,8) == 0) goto goto_2;
_c = tmpMeta[0];
_env_1 = tmpMeta[1];
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp1 = omc_InteractiveUtil_getNthComponent2(threadData, _c, _cdef, _n, _env_1);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getNthComponent(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthComponent(threadData, _inComponentRef, _inProgram, tmp1);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countComponentsInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_integer _inInteger)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementItemLst;
{
modelica_metatype _complst = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,3) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
_complst = tmpMeta[4];
_lst = tmpMeta[1];
_inAbsynElementItemLst = _lst;
_inInteger = _inInteger + listLength(_complst);
goto _tailrecursive;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_lst = tmpMeta[1];
_inAbsynElementItemLst = _lst;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = _inInteger;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countComponentsInElts(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_integer _outInteger;
modelica_metatype out_outInteger;
tmp1 = mmc_unbox_integer(_inInteger);
_outInteger = omc_InteractiveUtil_countComponentsInElts(threadData, _inAbsynElementItemLst, tmp1);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_countComponents(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_integer _c1;
modelica_integer _c2;
modelica_string _a = NULL;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _d;
modelica_metatype _e = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 9; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp7 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp8 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,5) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,1) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_a = tmpMeta[0];
_b = tmp6;
_c = tmp7;
_d = tmp8;
_e = tmpMeta[4];
_elt = tmpMeta[9];
_lst = tmpMeta[8];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
tmp4 += 1;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[0], tmpMeta[1], _lst, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[2], _file_info);
_c1 = omc_InteractiveUtil_countComponents(threadData, tmpMeta[3]);
_c2 = omc_InteractiveUtil_countComponentsInElts(threadData, _elt, ((modelica_integer) 0));
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 1: {
modelica_integer tmp9;
modelica_integer tmp10;
modelica_integer tmp11;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp9 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp11 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,5) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,1) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_a = tmpMeta[0];
_b = tmp9;
_c = tmp10;
_d = tmp11;
_e = tmpMeta[4];
_elt = tmpMeta[9];
_lst = tmpMeta[8];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[0], tmpMeta[1], _lst, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[2], _file_info);
_c1 = omc_InteractiveUtil_countComponents(threadData, tmpMeta[3]);
_c2 = omc_InteractiveUtil_countComponentsInElts(threadData, _elt, ((modelica_integer) 0));
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 2: {
modelica_integer tmp12;
modelica_integer tmp13;
modelica_integer tmp14;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp12 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp13 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp14 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,5) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_a = tmpMeta[0];
_b = tmp12;
_c = tmp13;
_d = tmp14;
_e = tmpMeta[4];
_lst = tmpMeta[8];
_ann = tmpMeta[9];
_cmt = tmpMeta[10];
_file_info = tmpMeta[11];
tmp4 += 6;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[0], tmpMeta[1], _lst, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[2], _file_info);
tmp1 = omc_InteractiveUtil_countComponents(threadData, tmpMeta[3]);
goto tmp3_done;
}
case 3: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
tmp4 += 5;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 4: {
modelica_integer tmp15;
modelica_integer tmp16;
modelica_integer tmp17;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp15 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp16 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp17 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,5) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],0,1) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_a = tmpMeta[0];
_b = tmp15;
_c = tmp16;
_d = tmp17;
_e = tmpMeta[4];
_cmt = tmpMeta[6];
_elt = tmpMeta[10];
_lst = tmpMeta[9];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
tmp4 += 1;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[0], tmpMeta[1], _lst, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[2], _file_info);
_c1 = omc_InteractiveUtil_countComponents(threadData, tmpMeta[3]);
_c2 = omc_InteractiveUtil_countComponentsInElts(threadData, _elt, ((modelica_integer) 0));
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 5: {
modelica_integer tmp18;
modelica_integer tmp19;
modelica_integer tmp20;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp18 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp19 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp20 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,5) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],1,1) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_a = tmpMeta[0];
_b = tmp18;
_c = tmp19;
_d = tmp20;
_e = tmpMeta[4];
_cmt = tmpMeta[6];
_elt = tmpMeta[10];
_lst = tmpMeta[9];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[0], tmpMeta[1], _lst, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[2], _file_info);
_c1 = omc_InteractiveUtil_countComponents(threadData, tmpMeta[3]);
_c2 = omc_InteractiveUtil_countComponentsInElts(threadData, _elt, ((modelica_integer) 0));
tmp1 = _c1 + _c2;
goto tmp3_done;
}
case 6: {
modelica_integer tmp21;
modelica_integer tmp22;
modelica_integer tmp23;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp21 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp22 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp23 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,5) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
if (listEmpty(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_CAR(tmpMeta[7]);
tmpMeta[9] = MMC_CDR(tmpMeta[7]);
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_a = tmpMeta[0];
_b = tmp21;
_c = tmp22;
_d = tmp23;
_e = tmpMeta[4];
_cmt = tmpMeta[6];
_lst = tmpMeta[9];
_ann = tmpMeta[10];
_file_info = tmpMeta[11];
tmp4 += 2;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, tmpMeta[0], tmpMeta[1], _lst, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _a, mmc_mk_boolean(_b), mmc_mk_boolean(_c), mmc_mk_boolean(_d), _e, tmpMeta[2], _file_info);
tmp1 = omc_InteractiveUtil_countComponents(threadData, tmpMeta[3]);
goto tmp3_done;
}
case 7: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
tmp4 += 1;
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
case 8: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,4) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) -1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 9) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_countComponents(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_countComponents(threadData, _inClass);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
DLLExport
modelica_integer omc_InteractiveUtil_getComponentCount(threadData_t *threadData, modelica_metatype _model_, modelica_metatype _p)
{
modelica_integer _count;
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_count = omc_InteractiveUtil_countComponents(threadData, _cdef);
_return: OMC_LABEL_UNUSED
return _count;
}
modelica_metatype boxptr_InteractiveUtil_getComponentCount(threadData_t *threadData, modelica_metatype _model_, modelica_metatype _p)
{
modelica_integer _count;
modelica_metatype out_count;
_count = omc_InteractiveUtil_getComponentCount(threadData, _model_, _p);
out_count = mmc_mk_icon(_count);
return out_count;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClass2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_integer _inInteger3, modelica_metatype _inEnv4)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_integer tmp4_3;modelica_metatype tmp4_4;
tmp4_1 = _inClass1;
tmp4_2 = _inClass2;
tmp4_3 = _inInteger3;
tmp4_4 = _inEnv4;
{
modelica_metatype _lst = NULL;
modelica_integer _n;
modelica_metatype _cref = NULL;
modelica_metatype _path = NULL;
modelica_string _id = NULL;
modelica_metatype _c = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _env_2 = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_c = tmp4_1;
_id = tmpMeta[0];
_encflag = tmpMeta[1];
_restr = tmpMeta[2];
_cdef = tmp4_2;
_n = tmp4_3;
_env = tmp4_4;
if(omc_SCodeUtil_isDerivedClass(threadData, _c))
{
_lst = omc_InteractiveUtil_getBaseClasses(threadData, _cdef, _env);
}
else
{
_env2 = omc_FGraph_openScope(threadData, _env, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, omc_FCore_emptyCache(threadData), _env2, tmpMeta[0], _OMC_LIT50, _OMC_LIT33, _ci_state, _c, _OMC_LIT59, tmpMeta[1], ((modelica_integer) 0) ,&_env_2 ,NULL ,NULL ,NULL);
_lst = omc_InteractiveUtil_getBaseClasses(threadData, _cdef, _env_2);
}
_cref = listGet(_lst, _n);
_path = omc_AbsynUtil_crefToPath(threadData, _cref);
tmp1 = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClass2(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _inInteger3, modelica_metatype _inEnv4)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger3);
_outString = omc_InteractiveUtil_getNthInheritedClass2(threadData, _inClass1, _inClass2, tmp1, _inEnv4);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynElementItemLst;
{
modelica_metatype _res = NULL;
modelica_metatype _e = NULL;
modelica_metatype _es = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,3) == 0) goto tmp2_end;
_e = tmpMeta[4];
_es = tmpMeta[2];
_res = omc_InteractiveUtil_getExtendsInElementitems(threadData, _es);
tmpMeta[1] = mmc_mk_cons(_e, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_es = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getExtendsInElementitems(threadData, _es);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementSpecLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_parts = tmpMeta[2];
tmp3 += 1;
_l1 = omc_InteractiveUtil_getExtendsInParts(threadData, _parts);
_l2 = omc_InteractiveUtil_getExtendsInElementitems(threadData, _elts);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_parts = tmpMeta[2];
_l1 = omc_InteractiveUtil_getExtendsInParts(threadData, _parts);
_l2 = omc_InteractiveUtil_getExtendsInElementitems(threadData, _elts);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_parts = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getExtendsInParts(threadData, _parts);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementSpecLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getExtendsInParts(threadData, _parts);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getExtendsInParts(threadData, _parts);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynElementSpecLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
DLLExport
modelica_string omc_InteractiveUtil_getNthInheritedClassMapAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_integer _inInteger, modelica_metatype _inProgram, modelica_string _inMapType)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_integer tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inModelPath;
tmp4_2 = _inInteger;
tmp4_3 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_string _s = NULL;
modelica_string _annStr = NULL;
modelica_integer _n;
modelica_metatype _p = NULL;
modelica_metatype _elArgs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_string tmp6;
_modelpath = tmp4_1;
_n = tmp4_2;
_p = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp6 = omc_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData, _modelpath, _n, _cdef, _p, &tmpMeta[0]);
_s = tmp6;
if (optionNone(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elArgs = tmpMeta[2];
_annStr = omc_InteractiveUtil_getMapAnnotationStr(threadData, _elArgs, _inMapType, _cdef, _p, _modelpath);
tmpMeta[0] = stringAppend(_OMC_LIT12,_s);
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT27);
tmpMeta[2] = stringAppend(tmpMeta[1],_annStr);
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT13);
tmp1 = tmpMeta[3];
goto tmp3_done;
}
case 1: {
modelica_string tmp7;
_modelpath = tmp4_1;
_n = tmp4_2;
_p = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp7 = omc_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData, _modelpath, _n, _cdef, _p, &tmpMeta[0]);
_s = tmp7;
if (!optionNone(tmpMeta[0])) goto goto_2;
tmpMeta[0] = stringAppend(_OMC_LIT12,_s);
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT276);
tmp1 = tmpMeta[1];
goto tmp3_done;
}
case 2: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getNthInheritedClassMapAnnotation(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inInteger, modelica_metatype _inProgram, modelica_metatype _inMapType)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthInheritedClassMapAnnotation(threadData, _inModelPath, tmp1, _inProgram, _inMapType);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getMapAnnotationStr(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_string _inMapType, modelica_metatype _inClass, modelica_metatype _inFullProgram, modelica_metatype _inModelPath)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementArgLst;
{
modelica_metatype _ann = NULL;
modelica_metatype _xs = NULL;
modelica_string _mapType = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_ann = tmpMeta[0];
_mapType = tmpMeta[3];
tmp6 = (stringEqual(_mapType, _inMapType));
if (1 != tmp6) goto goto_2;
tmpMeta[0] = mmc_mk_cons(_ann, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, tmpMeta[0]);
tmp1 = omc_InteractiveUtil_getAnnotationString(threadData, tmpMeta[1], _inClass, _inFullProgram, _inModelPath);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_xs = tmpMeta[1];
tmp1 = omc_InteractiveUtil_getMapAnnotationStr(threadData, _xs, _inMapType, _inClass, _inFullProgram, _inModelPath);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData_t *threadData, modelica_metatype _inModelPath, modelica_integer _inInteger, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype *out_annotationOpt)
{
modelica_string _outString = NULL;
modelica_metatype _annotationOpt = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_integer tmp4_1;
tmp4_1 = _inInteger;
{
modelica_metatype _path = NULL;
modelica_metatype _cdef = NULL;
modelica_string _s = NULL;
modelica_integer _n;
modelica_metatype _extends_ = NULL;
modelica_metatype _annOpt = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_n = tmp4_1;
_cdef = _inClass;
_extends_ = omc_InteractiveUtil_getExtendsInClass(threadData, _cdef);
tmpMeta[2] = listGet(_extends_, _n);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,3) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_path = tmpMeta[3];
_annOpt = tmpMeta[4];
_s = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmp1_c0 = _s;
tmpMeta[0+1] = _annOpt;
goto tmp3_done;
}
case 1: {
tmp1_c0 = _OMC_LIT52;
tmpMeta[0+1] = mmc_mk_none();
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_annotationOpt = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_annotationOpt) { *out_annotationOpt = _annotationOpt; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData_t *threadData, modelica_metatype _inModelPath, modelica_metatype _inInteger, modelica_metatype _inClass, modelica_metatype _inProgram, modelica_metatype *out_annotationOpt)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthInheritedClassAnnotationOpt(threadData, _inModelPath, tmp1, _inClass, _inProgram, out_annotationOpt);
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getNthInheritedClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_integer _inInteger)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_integer tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inInteger;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _c = NULL;
modelica_metatype _model_ = NULL;
modelica_integer _n;
modelica_metatype _extends_ = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_n = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_p_1 = omc_SymbolTable_getSCode(threadData);
_cache = omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
omc_Lookup_lookupClass(threadData, _cache, _env, _modelpath, mmc_mk_none(), &tmpMeta[0], &tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,8) == 0) goto goto_2;
_c = tmpMeta[0];
_env_1 = tmpMeta[1];
tmp1 = omc_InteractiveUtil_getNthInheritedClass2(threadData, _c, _cdef, _n, _env_1);
goto tmp3_done;
}
case 1: {
_model_ = tmp4_1;
_n = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_extends_ = omc_InteractiveUtil_getExtendsInClass(threadData, _cdef);
tmpMeta[0] = listGet(_extends_, _n);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_path = tmpMeta[1];
tmp1 = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
goto tmp3_done;
}
case 2: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getNthInheritedClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outString = omc_InteractiveUtil_getNthInheritedClass(threadData, _inComponentRef, tmp1);
return _outString;
}
DLLExport
modelica_integer omc_InteractiveUtil_getInheritanceCount(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_p = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp1 = omc_InteractiveUtil_countBaseClasses(threadData, _cdef);
goto tmp3_done;
}
case 1: {
tmp1 = ((modelica_integer) 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
modelica_metatype boxptr_InteractiveUtil_getInheritanceCount(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_getInheritanceCount(threadData, _inComponentRef, _inProgram);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getInheritedClasses(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outPaths = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if((!omc_Flags_isSet(threadData, _OMC_LIT281)))
{
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT277);
}
{
volatile modelica_metatype tmp7_1;
tmp7_1 = _inPath;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _c = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _extendsLst = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp6_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp7 < 3; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
modelica_boolean tmp9;
_modelpath = tmp7_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_p_1 = omc_SymbolTable_getSCode(threadData);
_cache = omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
omc_Lookup_lookupClass(threadData, _cache, _env, _modelpath, mmc_mk_none(), &tmpMeta[1], &tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,8) == 0) goto goto_5;
_c = tmpMeta[1];
_env_1 = tmpMeta[2];
_lst = omc_InteractiveUtil_getInheritedClassesHelper(threadData, _c, _cdef, _env_1);
tmp9 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmpMeta[1] = _lst;
if (!listEmpty(tmpMeta[1])) goto goto_10;
tmp9 = 1;
goto goto_10;
goto_10:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp9) {goto goto_5;}
tmpMeta[0] = omc_List_map(threadData, _lst, boxvar_AbsynUtil_crefToPath);
goto tmp6_done;
}
case 1: {
_modelpath = tmp7_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, omc_SymbolTable_getAbsyn(threadData), 0);
_extendsLst = omc_InteractiveUtil_getExtendsInClass(threadData, _cdef);
tmpMeta[0] = omc_List_map(threadData, _extendsLst, boxvar_AbsynUtil_elementSpecToPath);
goto tmp6_done;
}
case 2: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
tmp6_done:
(void)tmp7;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp6_done2;
goto_5:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp7 < 3) {
goto tmp6_top;
}
goto goto_1;
tmp6_done2:;
}
}
_outPaths = tmpMeta[0];
if((!omc_Flags_isSet(threadData, _OMC_LIT281)))
{
omc_ErrorExt_rollBack(threadData, _OMC_LIT277);
}
goto tmp2_done;
}
case 1: {
if((!omc_Flags_isSet(threadData, _OMC_LIT281)))
{
omc_ErrorExt_rollBack(threadData, _OMC_LIT277);
}
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outPaths;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getInheritedClassesHelper(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inClass2, modelica_metatype _inEnv4)
{
modelica_metatype _outAbsynComponentRefLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inClass1;
tmp3_2 = _inClass2;
tmp3_3 = _inEnv4;
{
modelica_metatype _lst = NULL;
modelica_string _id = NULL;
modelica_metatype _c = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _env_2 = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_c = tmp3_1;
_id = tmpMeta[1];
_encflag = tmpMeta[2];
_restr = tmpMeta[3];
_cdef = tmp3_2;
_env = tmp3_3;
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT282);
if(omc_SCodeUtil_isDerivedClass(threadData, _c))
{
_env_2 = _env;
}
else
{
_env2 = omc_FGraph_openScope(threadData, _env, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Inst_partialInstClassIn(threadData, omc_FCore_emptyCache(threadData), _env2, tmpMeta[1], _OMC_LIT50, _OMC_LIT33, _ci_state, _c, _OMC_LIT59, tmpMeta[2], ((modelica_integer) 0) ,&_env_2 ,NULL ,NULL ,NULL);
}
_lst = omc_InteractiveUtil_getBaseClasses(threadData, _cdef, _env_2);
omc_ErrorExt_rollBack(threadData, _OMC_LIT282);
tmpMeta[0] = _lst;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,8) == 0) goto tmp2_end;
omc_ErrorExt_rollBack(threadData, _OMC_LIT282);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynComponentRefLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynComponentRefLst;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addClassAnnotationToClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inAnnotation)
{
modelica_metatype _outClass = NULL;
modelica_metatype _body = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inClass;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
_body = tmpMeta[1];
{
modelica_metatype tmp3_1;
tmp3_1 = _body;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
tmpMeta[2] = mmc_mk_cons(omc_List_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 5))), boxvar_AbsynUtil_mergeAnnotations, _inAnnotation), MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(7));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_body), 7*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[5] = tmpMeta[2];
_body = tmpMeta[1];
tmpMeta[0] = _body;
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_body), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[5] = omc_AbsynUtil_mergeCommentAnnotation(threadData, _inAnnotation, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 5))));
_body = tmpMeta[1];
tmpMeta[0] = _body;
goto tmp2_done;
}
case 5: {
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_body), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[3] = omc_AbsynUtil_mergeCommentAnnotation(threadData, _inAnnotation, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 3))));
_body = tmpMeta[1];
tmpMeta[0] = _body;
goto tmp2_done;
}
case 6: {
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_body), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[3] = omc_AbsynUtil_mergeCommentAnnotation(threadData, _inAnnotation, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 3))));
_body = tmpMeta[1];
tmpMeta[0] = _body;
goto tmp2_done;
}
case 7: {
tmpMeta[2] = mmc_mk_cons(omc_List_fold(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 6))), boxvar_AbsynUtil_mergeAnnotations, _inAnnotation), MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(7));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_body), 7*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[6] = tmpMeta[2];
_body = tmpMeta[1];
tmpMeta[0] = _body;
goto tmp2_done;
}
case 8: {
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_body), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[4] = omc_AbsynUtil_mergeCommentAnnotation(threadData, _inAnnotation, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4))));
_body = tmpMeta[1];
tmpMeta[0] = _body;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_body = tmpMeta[0];
_outClass = omc_AbsynUtil_setClassBody(threadData, _inClass, _body);
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addClassAnnotation(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inAnnotation, modelica_metatype _inProgram)
{
modelica_metatype _outProgram = NULL;
modelica_metatype _class_path = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _class_within = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_class_path = omc_AbsynUtil_crefToPath(threadData, _inClass);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _class_path, _inProgram, 0);
_cls = omc_InteractiveUtil_addClassAnnotationToClass(threadData, _cls, omc_InteractiveUtil_annotationListToAbsyn(threadData, _inAnnotation));
tmp1 = (modelica_boolean)omc_AbsynUtil_pathIsIdent(threadData, _class_path);
if(tmp1)
{
tmpMeta[1] = _OMC_LIT7;
}
else
{
tmpMeta[0] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, omc_AbsynUtil_stripLast(threadData, _class_path));
tmpMeta[1] = tmpMeta[0];
}
_class_within = tmpMeta[1];
tmpMeta[0] = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[0], _class_within);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[1], _inProgram, 0);
_return: OMC_LABEL_UNUSED
return _outProgram;
}
DLLExport
modelica_metatype omc_InteractiveUtil_updateComponent(threadData_t *threadData, modelica_string _inString1, modelica_metatype _inTypeCref, modelica_metatype _inComponentRef3, modelica_metatype _inAbsynNamedArgLst4, modelica_metatype _inProgram5, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inString1;
tmp4_2 = _inComponentRef3;
tmp4_3 = _inAbsynNamedArgLst4;
tmp4_4 = _inProgram5;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _tppath2 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _publst = NULL;
modelica_metatype _protlst = NULL;
modelica_string _name = NULL;
modelica_metatype _items = NULL;
modelica_metatype _arrayDimensions = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _modification = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _ann = NULL;
modelica_metatype _annotation_ = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _nargs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_name = tmp4_1;
_model_ = tmp4_2;
_nargs = tmp4_3;
_p = tmp4_4;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_tppath2 = omc_AbsynUtil_crefToPath(threadData, _inTypeCref);
tmpMeta[2] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,5) == 0) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
_parts = tmpMeta[4];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _name, tmpMeta[2]);
tmpMeta[4] = omc_InteractiveUtil_getElementContainsName(threadData, tmpMeta[3], listAppend(_publst, _protlst));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto goto_2;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,3) == 0) goto goto_2;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,2) == 0) goto goto_2;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
_items = tmpMeta[7];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _name, tmpMeta[2]);
tmpMeta[4] = omc_InteractiveUtil_getCompitemNamed(threadData, tmpMeta[3], _items);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_arrayDimensions = tmpMeta[6];
_mod = tmpMeta[7];
_cond = tmpMeta[8];
_ann = tmpMeta[9];
_annotation_ = omc_InteractiveUtil_annotationListToAbsynComment(threadData, _nargs, _ann);
_modification = omc_InteractiveUtil_modificationToAbsyn(threadData, _nargs, _mod);
tmpMeta[2] = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _name, _arrayDimensions, _modification);
tmpMeta[3] = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta[2], _cond, _annotation_);
tmpMeta[4] = mmc_mk_box2(0, _tppath2, tmpMeta[3]);
_newp = omc_InteractiveUtil_deleteOrUpdateComponent(threadData, _name, _model_, _p, mmc_mk_some(tmpMeta[4]));
tmpMeta[0+0] = _newp;
tmp1_c1 = _OMC_LIT23;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inProgram5;
tmp1_c1 = _OMC_LIT24;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getDefaultComponentPrefixesModStr(threadData_t *threadData, modelica_metatype _mod)
{
modelica_string _docStr = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _mod;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_e = tmpMeta[2];
tmp1 = omc_Dump_printExpStr(threadData, _e);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_docStr = tmp1;
_return: OMC_LABEL_UNUSED
return _docStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultAttr(threadData_t *threadData, modelica_string _str)
{
modelica_metatype _attr = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
modelica_integer tmp7;
tmp5 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp7 = omc_System_stringFind(threadData, _str, _OMC_LIT283);
if (-1 != tmp7) goto goto_6;
tmp5 = 1;
goto goto_6;
goto_6:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp5) {goto goto_1;}
tmpMeta[0] = _OMC_LIT288;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp8;
modelica_integer tmp10;
tmp8 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp10 = omc_System_stringFind(threadData, _str, _OMC_LIT289);
if (-1 != tmp10) goto goto_9;
tmp8 = 1;
goto goto_9;
goto_9:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp8) {goto goto_1;}
tmpMeta[0] = _OMC_LIT291;
goto tmp2_done;
}
case 2: {
modelica_boolean tmp11;
modelica_integer tmp13;
tmp11 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp13 = omc_System_stringFind(threadData, _str, _OMC_LIT292);
if (-1 != tmp13) goto goto_12;
tmp11 = 1;
goto goto_12;
goto_12:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp11) {goto goto_1;}
tmpMeta[0] = _OMC_LIT294;
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _OMC_LIT296;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_attr = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _attr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultReplaceable(threadData_t *threadData, modelica_string _str)
{
modelica_metatype _repl = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
tmp5 = omc_System_stringFind(threadData, _str, _OMC_LIT297);
if (-1 != tmp5) goto goto_1;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
modelica_integer tmp8;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp8 = omc_System_stringFind(threadData, _str, _OMC_LIT297);
if (-1 != tmp8) goto goto_7;
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_1;}
tmpMeta[0] = _OMC_LIT299;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_repl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _repl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultInnerOuter(threadData_t *threadData, modelica_string _str)
{
modelica_metatype _io = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
tmp5 = omc_System_stringFind(threadData, _str, _OMC_LIT300);
if (-1 != tmp5) goto goto_1;
tmp6 = omc_System_stringFind(threadData, _str, _OMC_LIT301);
if (-1 != tmp6) goto goto_1;
tmpMeta[0] = _OMC_LIT181;
goto tmp2_done;
}
case 1: {
modelica_integer tmp7;
tmp7 = omc_System_stringFind(threadData, _str, _OMC_LIT301);
if (-1 != tmp7) goto goto_1;
tmpMeta[0] = _OMC_LIT302;
goto tmp2_done;
}
case 2: {
modelica_integer tmp8;
tmp8 = omc_System_stringFind(threadData, _str, _OMC_LIT300);
if (-1 != tmp8) goto goto_1;
tmpMeta[0] = _OMC_LIT303;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_io = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _io;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeReplaceableIfPartial(threadData_t *threadData, modelica_metatype _p, modelica_metatype _className, modelica_metatype _redecl)
{
modelica_metatype _new_redecl = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _redecl;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_1)) goto tmp2_end;
if (!omc_InteractiveUtil_isPartial(threadData, _className, _p)) goto tmp2_end;
tmpMeta[0] = _OMC_LIT299;
goto tmp2_done;
}
case 1: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _redecl;
goto tmp2_done;
}
case 2: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,0) == 0) goto tmp2_end;
tmpMeta[0] = _redecl;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_new_redecl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _new_redecl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDefaultPrefixes(threadData_t *threadData, modelica_metatype _p, modelica_metatype _className, modelica_metatype *out_redecl, modelica_metatype *out_attr)
{
modelica_metatype _io = NULL;
modelica_metatype _redecl = NULL;
modelica_metatype _attr = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_str = omc_InteractiveUtil_getNamedAnnotation(threadData, _className, _p, _OMC_LIT238, _OMC_LIT239, boxvar_InteractiveUtil_getDefaultComponentPrefixesModStr);
_io = omc_InteractiveUtil_getDefaultInnerOuter(threadData, _str);
_redecl = omc_InteractiveUtil_getDefaultReplaceable(threadData, _str);
_redecl = omc_InteractiveUtil_makeReplaceableIfPartial(threadData, _p, _className, _redecl);
_attr = omc_InteractiveUtil_getDefaultAttr(threadData, _str);
tmpMeta[0+0] = _io;
tmpMeta[0+1] = _redecl;
tmpMeta[0+2] = _attr;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_io = tmpMeta[0+0];
_redecl = tmpMeta[0+1];
_attr = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_redecl) { *out_redecl = _redecl; }
if (out_attr) { *out_attr = _attr; }
return _io;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addComponent(threadData_t *threadData, modelica_string _inString1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inAbsynNamedArgLst4, modelica_metatype _inProgram5, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inString1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inAbsynNamedArgLst4;
tmp4_5 = _inProgram5;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _tppath = NULL;
modelica_string _name = NULL;
modelica_string _filename = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _nargs = NULL;
modelica_metatype _p = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
modelica_metatype _annotation_ = NULL;
modelica_metatype _modification = NULL;
modelica_metatype _w = NULL;
modelica_metatype _io = NULL;
modelica_metatype _redecl = NULL;
modelica_metatype _attr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_model_ = tmp4_3;
_p = tmp4_5;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_2;}
tmpMeta[0+0] = _p;
tmp1_c1 = _OMC_LIT304;
goto tmp3_done;
}
case 1: {
_name = tmp4_1;
_tp = tmp4_2;
_model_ = tmp4_3;
_nargs = tmp4_4;
_p = tmp4_5;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
{
modelica_metatype tmp10_1;
tmp10_1 = _modelpath;
{
volatile mmc_switch_type tmp10;
int tmp11;
tmp10 = 0;
for (; tmp10 < 2; tmp10++) {
switch (MMC_SWITCH_CAST(tmp10)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,1,1) == 0) goto tmp9_end;
tmpMeta[2] = _OMC_LIT7;
goto tmp9_done;
}
case 1: {
tmpMeta[3] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, omc_AbsynUtil_stripLast(threadData, _modelpath));
tmpMeta[2] = tmpMeta[3];
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
goto_8:;
goto goto_2;
goto tmp9_done;
tmp9_done:;
}
}
_w = tmpMeta[2];
tmpMeta[2] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_cdef = tmpMeta[2];
_filename = tmpMeta[4];
_tppath = omc_AbsynUtil_crefToPath(threadData, _tp);
_annotation_ = omc_InteractiveUtil_annotationListToAbsynComment(threadData, _nargs, mmc_mk_none());
_modification = omc_InteractiveUtil_modificationToAbsyn(threadData, _nargs, mmc_mk_none());
_io = omc_InteractiveUtil_getDefaultPrefixes(threadData, _p, _tppath ,&_redecl ,&_attr);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, omc_AbsynUtil_pathStripSamePrefix(threadData, _tppath, _modelpath), mmc_mk_none());
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _name, tmpMeta[4], _modification);
tmpMeta[6] = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta[5], mmc_mk_none(), _annotation_);
tmpMeta[3] = mmc_mk_cons(tmpMeta[6], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[7] = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr, tmpMeta[2], tmpMeta[3]);
tmpMeta[8] = mmc_mk_box8(3, &SourceInfo_SOURCEINFO__desc, _filename, mmc_mk_boolean(0), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), mmc_mk_integer(((modelica_integer) 0)), _OMC_LIT38);
tmpMeta[9] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(0), _redecl, _io, tmpMeta[7], tmpMeta[8], mmc_mk_none());
tmpMeta[10] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta[9]);
_newcdef = omc_InteractiveUtil_addToPublic(threadData, _cdef, tmpMeta[10]);
tmpMeta[2] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _w);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmpMeta[0+0] = _newp;
tmp1_c1 = _OMC_LIT305;
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _inProgram5;
tmp1_c1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData_t *threadData, modelica_string _inString, modelica_metatype _inAbsynElementItemLst, modelica_metatype _item, modelica_boolean *out_success)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_boolean _success;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inString;
tmp4_2 = _inAbsynElementItemLst;
{
modelica_string _name = NULL;
modelica_string _name2 = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _res = NULL;
modelica_metatype _x = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _eltold = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _compitem = NULL;
modelica_metatype _spec = NULL;
modelica_metatype _tppath = NULL;
modelica_metatype _typeSpec = NULL;
modelica_boolean _hasOtherComponents;
modelica_boolean _successResult;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
modelica_boolean tmp13_c1 __attribute__((unused)) = 0;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,3) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,2) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
_x = tmpMeta[2];
_elt = tmpMeta[4];
_spec = tmpMeta[5];
_typeSpec = tmpMeta[6];
_comps = tmpMeta[7];
_xs = tmpMeta[3];
_name = tmp4_1;
{
modelica_boolean __omcQ_24tmpVar19;
modelica_boolean tmp7 = 0;
modelica_boolean __omcQ_24tmpVar18;
int tmp12;
modelica_metatype _c_loopVar = 0;
modelica_metatype _c;
_c_loopVar = _comps;
__omcQ_24tmpVar19 = 0;
while(1) {
tmp12 = 1;
if (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
tmp12--;
}
if (tmp12 == 0) {
{
modelica_metatype tmp10_1;
tmp10_1 = _c;
{
volatile mmc_switch_type tmp10;
int tmp11;
tmp10 = 0;
for (; tmp10 < 2; tmp10++) {
switch (MMC_SWITCH_CAST(tmp10)) {
case 0: {
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_name2 = tmpMeta[3];
if (!(stringEqual(_name, _name2))) goto tmp9_end;
tmp7 = 1;
goto tmp9_done;
}
case 1: {
tmp7 = 0;
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
goto_8:;
goto goto_2;
goto tmp9_done;
tmp9_done:;
}
}__omcQ_24tmpVar18 = tmp7;
__omcQ_24tmpVar19 = (__omcQ_24tmpVar18 || __omcQ_24tmpVar19);
} else if (tmp12 == 1) {
break;
} else {
goto goto_2;
}
}
tmp6 = __omcQ_24tmpVar19;
}
if(tmp6)
{
{
modelica_metatype tmp16_1;
tmp16_1 = _item;
{
volatile mmc_switch_type tmp16;
int tmp17;
tmp16 = 0;
for (; tmp16 < 2; tmp16++) {
switch (MMC_SWITCH_CAST(tmp16)) {
case 0: {
if (optionNone(tmp16_1)) goto tmp15_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp16_1), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_tppath = tmpMeta[5];
_compitem = tmpMeta[6];
if(omc_AbsynUtil_pathEqual(threadData, _tppath, omc_AbsynUtil_typeSpecPath(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_spec), 3))))))
{
{
modelica_metatype __omcQ_24tmpVar21;
modelica_metatype* tmp18;
modelica_metatype __omcQ_24tmpVar20;
int tmp23;
modelica_metatype _c_loopVar = 0;
modelica_metatype _c;
_c_loopVar = _comps;
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar21 = tmpMeta[6];
tmp18 = &__omcQ_24tmpVar21;
while(1) {
tmp23 = 1;
if (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
tmp23--;
}
if (tmp23 == 0) {
{
modelica_metatype tmp21_1;
tmp21_1 = _c;
{
volatile mmc_switch_type tmp21;
int tmp22;
tmp21 = 0;
for (; tmp21 < 2; tmp21++) {
switch (MMC_SWITCH_CAST(tmp21)) {
case 0: {
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp21_1), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
_name2 = tmpMeta[9];
if (!(stringEqual(_name, _name2))) goto tmp20_end;
tmpMeta[7] = _compitem;
goto tmp20_done;
}
case 1: {
tmpMeta[7] = _c;
goto tmp20_done;
}
}
goto tmp20_end;
tmp20_end: ;
}
goto goto_19;
goto_19:;
goto goto_14;
goto tmp20_done;
tmp20_done:;
}
}__omcQ_24tmpVar20 = tmpMeta[7];
*tmp18 = mmc_mk_cons(__omcQ_24tmpVar20,0);
tmp18 = &MMC_CDR(*tmp18);
} else if (tmp23 == 1) {
break;
} else {
goto goto_14;
}
}
*tmp18 = mmc_mk_nil();
tmpMeta[5] = __omcQ_24tmpVar21;
}
tmpMeta[4] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[4]), MMC_UNTAGPTR(_spec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[4]))[4] = tmpMeta[5];
_spec = tmpMeta[4];
tmpMeta[4] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[4]), MMC_UNTAGPTR(_elt), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[4]))[5] = _spec;
_elt = tmpMeta[4];
tmpMeta[5] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt);
tmpMeta[4] = mmc_mk_cons(tmpMeta[5], _xs);
_res = tmpMeta[4];
_successResult = 1;
}
else
{
{
modelica_metatype __omcQ_24tmpVar23;
modelica_metatype* tmp24;
modelica_metatype __omcQ_24tmpVar22;
int tmp25;
modelica_metatype _c_loopVar = 0;
modelica_boolean tmp26 = 0;
modelica_metatype _c;
_c_loopVar = _comps;
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar23 = tmpMeta[6];
tmp24 = &__omcQ_24tmpVar23;
while(1) {
tmp25 = 1;
while (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
{
modelica_metatype tmp29_1;
tmp29_1 = _c;
{
volatile mmc_switch_type tmp29;
int tmp30;
tmp29 = 0;
for (; tmp29 < 2; tmp29++) {
switch (MMC_SWITCH_CAST(tmp29)) {
case 0: {
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp29_1), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
_name2 = tmpMeta[8];
tmp26 = (!(stringEqual(_name, _name2)));
goto tmp28_done;
}
case 1: {
tmp26 = 1;
goto tmp28_done;
}
}
goto tmp28_end;
tmp28_end: ;
}
goto goto_27;
goto_27:;
goto goto_14;
goto tmp28_done;
tmp28_done:;
}
}
if (tmp26) {
tmp25--;
break;
}
}
if (tmp25 == 0) {
__omcQ_24tmpVar22 = _c;
*tmp24 = mmc_mk_cons(__omcQ_24tmpVar22,0);
tmp24 = &MMC_CDR(*tmp24);
} else if (tmp25 == 1) {
break;
} else {
goto goto_14;
}
}
*tmp24 = mmc_mk_nil();
tmpMeta[5] = __omcQ_24tmpVar23;
}
tmpMeta[4] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[4]), MMC_UNTAGPTR(_spec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[4]))[4] = tmpMeta[5];
_spec = tmpMeta[4];
_hasOtherComponents = (!listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_spec), 4)))));
if(_hasOtherComponents)
{
tmpMeta[4] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[4]), MMC_UNTAGPTR(_elt), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[4]))[5] = _spec;
_elt = tmpMeta[4];
_eltold = _elt;
}
tmpMeta[5] = mmc_mk_cons(_compitem, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[4] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[4]), MMC_UNTAGPTR(_spec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[4]))[4] = tmpMeta[5];
_spec = tmpMeta[4];
tmpMeta[4] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[4]), MMC_UNTAGPTR(_typeSpec), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[4]))[2] = _tppath;
_typeSpec = tmpMeta[4];
tmpMeta[4] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[4]), MMC_UNTAGPTR(_spec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[4]))[3] = _typeSpec;
_spec = tmpMeta[4];
tmpMeta[4] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[4]), MMC_UNTAGPTR(_elt), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[4]))[5] = _spec;
_elt = tmpMeta[4];
tmpMeta[5] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt);
tmpMeta[4] = mmc_mk_cons(tmpMeta[5], _xs);
_res = tmpMeta[4];
if(_hasOtherComponents)
{
tmpMeta[5] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _eltold);
tmpMeta[4] = mmc_mk_cons(tmpMeta[5], _res);
_res = tmpMeta[4];
}
_successResult = 1;
}
tmpMeta[2+0] = _res;
tmp13_c1 = _successResult;
goto tmp15_done;
}
case 1: {
if((listLength(_comps) == ((modelica_integer) 1)))
{
_res = _xs;
_successResult = 1;
}
else
{
{
modelica_metatype __omcQ_24tmpVar25;
modelica_metatype* tmp31;
modelica_metatype __omcQ_24tmpVar24;
int tmp32;
modelica_metatype _c_loopVar = 0;
modelica_boolean tmp33 = 0;
modelica_metatype _c;
_c_loopVar = _comps;
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar25 = tmpMeta[6];
tmp31 = &__omcQ_24tmpVar25;
while(1) {
tmp32 = 1;
while (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
{
modelica_metatype tmp36_1;
tmp36_1 = _c;
{
volatile mmc_switch_type tmp36;
int tmp37;
tmp36 = 0;
for (; tmp36 < 2; tmp36++) {
switch (MMC_SWITCH_CAST(tmp36)) {
case 0: {
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp36_1), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
_name2 = tmpMeta[8];
tmp33 = (!(stringEqual(_name, _name2)));
goto tmp35_done;
}
case 1: {
tmp33 = 1;
goto tmp35_done;
}
}
goto tmp35_end;
tmp35_end: ;
}
goto goto_34;
goto_34:;
goto goto_14;
goto tmp35_done;
tmp35_done:;
}
}
if (tmp33) {
tmp32--;
break;
}
}
if (tmp32 == 0) {
__omcQ_24tmpVar24 = _c;
*tmp31 = mmc_mk_cons(__omcQ_24tmpVar24,0);
tmp31 = &MMC_CDR(*tmp31);
} else if (tmp32 == 1) {
break;
} else {
goto goto_14;
}
}
*tmp31 = mmc_mk_nil();
tmpMeta[5] = __omcQ_24tmpVar25;
}
tmpMeta[4] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[4]), MMC_UNTAGPTR(_spec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[4]))[4] = tmpMeta[5];
_spec = tmpMeta[4];
tmpMeta[4] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[4]), MMC_UNTAGPTR(_elt), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[4]))[5] = _spec;
_elt = tmpMeta[4];
tmpMeta[5] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt);
tmpMeta[4] = mmc_mk_cons(tmpMeta[5], _xs);
_res = tmpMeta[4];
_successResult = 1;
}
tmpMeta[2+0] = _res;
tmp13_c1 = _successResult;
goto tmp15_done;
}
}
goto tmp15_end;
tmp15_end: ;
}
goto goto_14;
goto_14:;
goto goto_2;
goto tmp15_done;
tmp15_done:;
}
}
_res = tmpMeta[2+0];
_successResult = tmp13_c1;
}
else
{
_res = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _xs, _item ,&_successResult);
tmpMeta[2] = mmc_mk_cons(_x, _res);
_res = tmpMeta[2];
}
tmpMeta[0+0] = _res;
tmp1_c1 = _successResult;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
_x = tmpMeta[2];
_xs = tmpMeta[3];
_name = tmp4_1;
_res = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _xs, _item ,&_successResult);
tmpMeta[2] = mmc_mk_cons(_x, _res);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _successResult;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynElementItemLst = tmpMeta[0+0];
_success = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_success) { *out_success = _success; }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData_t *threadData, modelica_metatype _inString, modelica_metatype _inAbsynElementItemLst, modelica_metatype _item, modelica_metatype *out_success)
{
modelica_boolean _success;
modelica_metatype _outAbsynElementItemLst = NULL;
_outAbsynElementItemLst = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _inString, _inAbsynElementItemLst, _item, &_success);
if (out_success) { *out_success = mmc_mk_icon(_success); }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponentFromClass(threadData_t *threadData, modelica_string _inString, modelica_metatype _inClass, modelica_metatype _item)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inString;
tmp3_2 = _inClass;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst2 = NULL;
modelica_metatype _protlst = NULL;
modelica_metatype _protlst2 = NULL;
modelica_integer _l2;
modelica_integer _l1;
modelica_integer _l1_1;
modelica_metatype _parts2 = NULL;
modelica_metatype _parts = NULL;
modelica_string _name = NULL;
modelica_string _i = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_boolean _success;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_string _bcpath = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_i = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_name = tmp3_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _publst, _item ,&_success);
_l2 = listLength(_publst2);
_l1 = listLength(_publst);
_l1_1 = ((modelica_integer) -1) + _l1;
if(((((_l1_1 == _l2) && (!isSome(_item))) && _success) || (((!(_l1_1 == _l2)) && isSome(_item)) && _success)))
{
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
}
else
{
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_protlst2 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _protlst, _item, NULL);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _protlst2);
}
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts2, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
_i = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_bcpath = tmpMeta[7];
_mod = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_name = tmp3_1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
_publst2 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _publst, _item ,&_success);
_l2 = listLength(_publst2);
_l1 = listLength(_publst);
_l1_1 = ((modelica_integer) -1) + _l1;
if(((((_l1_1 == _l2) && (!isSome(_item))) && _success) || (((!(_l1_1 == _l2)) && isSome(_item)) && _success)))
{
_parts2 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst2);
}
else
{
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_protlst2 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _name, _protlst, _item, NULL);
_parts2 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _protlst2);
}
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcpath, _mod, _cmt, _parts2, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _i, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_deleteOrUpdateComponent(threadData_t *threadData, modelica_string _inString, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype _item)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inString;
tmp3_2 = _inComponentRef;
tmp3_3 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_metatype _modelwithin = NULL;
modelica_string _name = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newcdef = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,3) == 0) goto tmp2_end;
_model_ = tmp3_2;
_name = tmp3_1;
_p = tmp3_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_modelwithin = omc_AbsynUtil_stripLast(threadData, _modelpath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteOrUpdateComponentFromClass(threadData, _name, _cdef, _item);
tmpMeta[1] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _modelwithin);
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[1], tmpMeta[2]);
tmpMeta[0] = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,2) == 0) goto tmp2_end;
_model_ = tmp3_2;
_name = tmp3_1;
_p = tmp3_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
_newcdef = omc_InteractiveUtil_deleteOrUpdateComponentFromClass(threadData, _name, _cdef, _item);
tmpMeta[1] = mmc_mk_cons(_newcdef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[1], _OMC_LIT7);
tmpMeta[0] = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[2], _p, 0);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outProgram = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_lookupClassdef(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2, modelica_metatype _inProgram3, modelica_metatype *out_outPath)
{
modelica_metatype _outClass = NULL;
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inPath1;
tmp4_2 = _inPath2;
tmp4_3 = _inProgram3;
{
modelica_metatype _inmodeldef = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _newpath = NULL;
modelica_metatype _path = NULL;
modelica_metatype _inmodel = NULL;
modelica_metatype _innewpath = NULL;
modelica_metatype _p = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 9; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_path = tmp4_1;
_inmodel = tmp4_2;
_p = tmp4_3;
_path = omc_InstUtil_removeSelfReference(threadData, omc_AbsynUtil_pathLastIdent(threadData, _inmodel), _path);
_inmodeldef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _inmodel, _p, 0);
tmpMeta[2] = mmc_mk_cons(_inmodeldef, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _OMC_LIT7);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, tmpMeta[3], 0);
_newpath = omc_AbsynUtil_joinPaths(threadData, _inmodel, _path);
tmpMeta[0+0] = _cdef;
tmpMeta[0+1] = _newpath;
goto tmp3_done;
}
case 1: {
_path = tmp4_1;
_inmodel = tmp4_2;
_p = tmp4_3;
_innewpath = omc_AbsynUtil_stripLast(threadData, _inmodel);
tmpMeta[0+0] = omc_InteractiveUtil_lookupClassdef(threadData, _path, _innewpath, _p, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
_path = tmp4_1;
_p = tmp4_3;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[0+0] = _cdef;
tmpMeta[0+1] = _path;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (4 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT19), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 4;
tmpMeta[0+0] = _OMC_LIT308;
tmpMeta[0+1] = _OMC_LIT309;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 3;
tmpMeta[0+0] = _OMC_LIT311;
tmpMeta[0+1] = _OMC_LIT312;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT22), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 2;
tmpMeta[0+0] = _OMC_LIT314;
tmpMeta[0+1] = _OMC_LIT315;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT21), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 1;
tmpMeta[0+0] = _OMC_LIT317;
tmpMeta[0+1] = _OMC_LIT318;
goto tmp3_done;
}
case 7: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (5 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT319), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp6 = omc_Config_synchronousFeaturesAllowed(threadData);
if (1 != tmp6) goto goto_2;
tmpMeta[0+0] = _OMC_LIT321;
tmpMeta[0+1] = _OMC_LIT322;
goto tmp3_done;
}
case 8: {
_path = tmp4_1;
_inmodel = tmp4_2;
_s1 = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
_s2 = omc_AbsynUtil_pathString(threadData, _inmodel, _OMC_LIT0, 1, 0);
tmpMeta[2] = mmc_mk_cons(_s1, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addMessage(threadData, _OMC_LIT5, tmpMeta[2]);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 9) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta[0+0];
_outPath = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outPath) { *out_outPath = _outPath; }
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getVariableValueLst(threadData_t *threadData, modelica_metatype _ids, modelica_metatype _vars)
{
modelica_metatype _val = NULL;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _ids;
tmp3_2 = _vars;
{
modelica_integer _ix;
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
modelica_string _id3 = NULL;
modelica_metatype _v = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _srest = NULL;
modelica_metatype _vals = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_2);
tmpMeta[4] = MMC_CDR(tmp3_2);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_id1 = tmpMeta[1];
_id2 = tmpMeta[5];
_rest = tmpMeta[4];
tmp5 = (stringEqual(_id1, _id2));
if (0 != tmp5) goto goto_1;
tmpMeta[0] = omc_InteractiveUtil_getVariableValueLst(threadData, _ids, _rest);
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmp3_2);
tmpMeta[6] = MMC_CDR(tmp3_2);
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],10,4) == 0) goto tmp2_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 4));
_id1 = tmpMeta[1];
_id2 = tmpMeta[3];
_srest = tmpMeta[4];
_id3 = tmpMeta[7];
_vals = tmpMeta[9];
_comp = tmpMeta[10];
tmp3 += 1;
tmp6 = (stringEqual(_id1, _id3));
if (1 != tmp6) goto goto_1;
_ix = omc_List_position1OnTrue(threadData, _comp, boxvar_stringEq, _id2);
_v = listGet(_vals, _ix);
tmpMeta[1] = mmc_mk_cons(_id2, _srest);
tmpMeta[3] = mmc_mk_box4(3, &GlobalScript_Variable_IVAR__desc, _id2, _v, _OMC_LIT323);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = omc_InteractiveUtil_getVariableValueLst(threadData, tmpMeta[1], tmpMeta[2]);
goto tmp2_done;
}
case 2: {
modelica_boolean tmp7;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmp3_1);
tmpMeta[6] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[6])) goto tmp2_end;
_id2 = tmpMeta[3];
_v = tmpMeta[4];
_id1 = tmpMeta[5];
tmp7 = (stringEqual(_id1, _id2));
if (1 != tmp7) goto goto_1;
tmpMeta[0] = _v;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_val = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _val;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getVariableValue(threadData_t *threadData, modelica_string _inIdent, modelica_metatype _inVariableLst)
{
modelica_metatype _outValue = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inIdent;
tmp3_2 = _inVariableLst;
{
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
modelica_metatype _v = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_id2 = tmpMeta[3];
_v = tmpMeta[4];
_id1 = tmp3_1;
tmp5 = (stringEqual(_id1, _id2));
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _v;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_id2 = tmpMeta[3];
_rest = tmpMeta[2];
_id1 = tmp3_1;
tmp6 = (stringEqual(_id1, _id2));
if (0 != tmp6) goto goto_1;
tmpMeta[0] = omc_InteractiveUtil_getVariableValue(threadData, _id1, _rest);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outValue = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outValue;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addScope(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inVariableLst)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inProgram;
tmp3_2 = _inVariableLst;
{
modelica_metatype _path = NULL;
modelica_metatype _newpath = NULL;
modelica_metatype _path2 = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _vars = NULL;
modelica_metatype _w = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,0) == 0) goto tmp2_end;
_cls = tmpMeta[1];
_vars = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_getVariableValue(threadData, _OMC_LIT324, _vars);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],12,1) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_path = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _path);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _cls, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cls = tmpMeta[1];
_w = tmpMeta[2];
_vars = tmp3_2;
tmp5 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_InteractiveUtil_getVariableValue(threadData, _OMC_LIT324, _vars);
tmp5 = 1;
goto goto_6;
goto_6:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp5) {goto goto_1;}
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _cls, _w);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_cls = tmpMeta[1];
_path2 = tmpMeta[3];
_vars = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_getVariableValue(threadData, _OMC_LIT324, _vars);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],12,1) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_path = tmpMeta[3];
_newpath = omc_AbsynUtil_joinPaths(threadData, _path, _path2);
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _newpath);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, _cls, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _inProgram;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outProgram = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_updateProgram2(threadData_t *threadData, modelica_metatype _inNewClasses, modelica_metatype _w, modelica_metatype _inOldProgram, modelica_boolean _mergeAST)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inNewClasses;
tmp3_2 = _w;
tmp3_3 = _inOldProgram;
{
modelica_metatype _prg = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _c1 = NULL;
modelica_string _name = NULL;
modelica_metatype _c2 = NULL;
modelica_metatype _c3 = NULL;
modelica_metatype _w2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_prg = tmp3_3;
tmpMeta[0] = _prg;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,0) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 3));
_c1 = tmpMeta[1];
_name = tmpMeta[3];
_c2 = tmpMeta[2];
_p2 = tmp3_3;
_c3 = tmpMeta[4];
_w2 = tmpMeta[5];
if(omc_InteractiveUtil_classInProgram(threadData, _name, _p2))
{
_newp = omc_InteractiveUtil_replaceClassInProgram(threadData, _c1, _p2, _mergeAST);
}
else
{
tmpMeta[1] = mmc_mk_cons(_c1, _c3);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[1], _w2);
_newp = tmpMeta[2];
}
_inNewClasses = _c2;
_inOldProgram = _newp;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
_c1 = tmpMeta[1];
_c2 = tmpMeta[2];
_p2 = tmp3_3;
_newp = omc_InteractiveUtil_insertClassInProgram(threadData, _c1, _w, _p2, _mergeAST);
_inNewClasses = _c2;
_inOldProgram = _newp;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outProgram = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_updateProgram2(threadData_t *threadData, modelica_metatype _inNewClasses, modelica_metatype _w, modelica_metatype _inOldProgram, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outProgram = omc_InteractiveUtil_updateProgram2(threadData, _inNewClasses, _w, _inOldProgram, tmp1);
return _outProgram;
}
DLLExport
modelica_metatype omc_InteractiveUtil_updateProgram(threadData_t *threadData, modelica_metatype _inNewProgram, modelica_metatype _inOldProgram, modelica_boolean _mergeAST)
{
modelica_metatype _outProgram = NULL;
modelica_metatype _cs = NULL;
modelica_metatype _w = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inNewProgram;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_cs = tmpMeta[1];
_w = tmpMeta[2];
_outProgram = omc_InteractiveUtil_updateProgram2(threadData, listReverse(_cs), _w, _inOldProgram, _mergeAST);
_return: OMC_LABEL_UNUSED
return _outProgram;
}
modelica_metatype boxptr_InteractiveUtil_updateProgram(threadData_t *threadData, modelica_metatype _inNewProgram, modelica_metatype _inOldProgram, modelica_metatype _mergeAST)
{
modelica_integer tmp1;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_mergeAST);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, _inNewProgram, _inOldProgram, tmp1);
return _outProgram;
}
DLLExport
modelica_metatype omc_InteractiveUtil_mergeProgram(threadData_t *threadData, modelica_metatype _newProgram, modelica_metatype _oldProgram)
{
modelica_metatype _program = NULL;
modelica_metatype _cl1 = NULL;
modelica_metatype _cl2 = NULL;
modelica_metatype _w = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _newProgram;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_cl1 = tmpMeta[1];
_w = tmpMeta[2];
tmpMeta[0] = _oldProgram;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_cl2 = tmpMeta[1];
tmpMeta[0] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, listAppend(_cl1, _cl2), _w);
_program = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _program;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isPrimitiveClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inClass;
tmp4_2 = _inProgram;
{
modelica_metatype _inmodel = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cdef = NULL;
modelica_string _cname = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],13,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],14,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],15,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],16,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],18,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],7,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,4) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_cname = tmpMeta[0];
_path = tmpMeta[4];
_p = tmp4_2;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _cname, tmpMeta[0]);
_inmodel = omc_AbsynUtil_crefToPath(threadData, tmpMeta[1]);
_cdef = omc_InteractiveUtil_lookupClassdef(threadData, _path, _inmodel, _p, NULL);
_inClass = _cdef;
_inProgram = _p;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isPrimitiveClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isPrimitiveClass(threadData, _inClass, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_existClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _path = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cr = tmp4_1;
_p = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _cr);
omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_existClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_existClass(threadData, _inComponentRef, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getCompitemNamed(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynComponentItemLst)
{
modelica_metatype _outComponentItem = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inComponentRef;
tmp3_2 = _inAbsynComponentItemLst;
{
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
modelica_metatype _x = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmp3_2);
tmpMeta[3] = MMC_CDR(tmp3_2);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_id1 = tmpMeta[1];
_x = tmpMeta[2];
_id2 = tmpMeta[5];
tmp5 = (stringEqual(_id1, _id2));
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _x;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
_xs = tmpMeta[2];
_cr = tmp3_1;
tmpMeta[0] = omc_InteractiveUtil_getCompitemNamed(threadData, _cr, _xs);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponentItem = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentItem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inComponentRef;
tmp3_2 = _inAbsynElementItemLst;
{
modelica_metatype _cr = NULL;
modelica_metatype _res = NULL;
modelica_metatype _ellst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_res = tmpMeta[3];
_ellst = tmpMeta[5];
_cr = tmp3_1;
omc_InteractiveUtil_getCompitemNamed(threadData, _cr, _ellst);
tmpMeta[0] = _res;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
_xs = tmpMeta[2];
_cr = tmp3_1;
tmpMeta[0] = omc_InteractiveUtil_getElementContainsName(threadData, _cr, _xs);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElement = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inComponentRef;
tmp3_2 = _inAbsynElementItemLst;
{
modelica_metatype _cr = NULL;
modelica_metatype _res = NULL;
modelica_metatype _ellst = NULL;
modelica_metatype _xs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_res = tmpMeta[4];
_ellst = tmpMeta[5];
_cr = tmp3_1;
omc_InteractiveUtil_getCompitemNamed(threadData, _cr, _ellst);
tmpMeta[0] = _res;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
_xs = tmpMeta[2];
_cr = tmp3_1;
tmpMeta[0] = omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _xs);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElementSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getElementitemContainsName(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outElementItem = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inComponentRef;
tmp3_2 = _inAbsynElementItemLst;
{
modelica_metatype _cr = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
_elt = tmpMeta[1];
_cr = tmp3_1;
tmpMeta[1] = mmc_mk_cons(_elt, MMC_REFSTRUCTLIT(mmc_nil));
omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, tmpMeta[1]);
tmpMeta[0] = _elt;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
_rest = tmpMeta[2];
_cr = tmp3_1;
tmpMeta[0] = omc_InteractiveUtil_getElementitemContainsName(threadData, _cr, _rest);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElementItem = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementItem;
}
DLLExport
modelica_string omc_InteractiveUtil_getDerivedClassModifierValue(threadData_t *threadData, modelica_metatype _cls, modelica_metatype _path)
{
modelica_string _value = NULL;
modelica_metatype _args = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = _cls;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_args = tmpMeta[2];
_value = omc_Dump_printExpStr(threadData, omc_InteractiveUtil_getModificationValue(threadData, _args, _path));
goto tmp2_done;
}
case 1: {
_value = _OMC_LIT9;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _value;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getDerivedClassModifierNames(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _args = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,0) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,4) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_args = tmpMeta[3];
tmpMeta[0] = omc_InteractiveUtil_getModificationNames(threadData, _args, 0);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outString = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getEnumLiterals(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _literals = NULL;
modelica_string _str = NULL;
modelica_metatype _enumList = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],7,0) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_literals = tmpMeta[3];
_enumList = omc_List_map(threadData, _literals, boxvar_InteractiveUtil_getEnumerationLiterals);
_str = stringDelimitList(_enumList, _OMC_LIT10);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isProtectedClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inString)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inString;
{
modelica_string _str = NULL;
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_id = tmpMeta[5];
_str = tmp4_2;
tmp6 = (stringEqual(_id, _str));
if (1 != tmp6) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_rest = tmpMeta[1];
_str = tmp4_2;
tmp1 = omc_InteractiveUtil_isProtectedClassInElements(threadData, _rest, _str);
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isProtectedClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inString)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isProtectedClassInElements(threadData, _inAbsynElementItemLst, _inString);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isProtectedClass(threadData_t *threadData, modelica_metatype _path, modelica_string _inString, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inString;
tmp4_2 = _inProgram;
{
modelica_string _str = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _protected_elementitem_list = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_str = tmp4_1;
_p = tmp4_2;
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isProtectedClassInElements(threadData, _protected_elementitem_list, _str);
goto tmp3_done;
}
case 1: {
_str = tmp4_1;
_p = tmp4_2;
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isProtectedClassInElements(threadData, _protected_elementitem_list, _str);
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isProtectedClass(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inString, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isProtectedClass(threadData, _path, _inString, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isReplaceableInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inString)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inString;
{
modelica_string _str = NULL;
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _r = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,2) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_r = tmpMeta[3];
_id = tmpMeta[6];
_str = tmp4_2;
tmp6 = (stringEqual(_id, _str));
if (1 != tmp6) goto goto_2;
tmp1 = omc_InteractiveUtil_keywordReplaceable(threadData, _r);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_rest = tmpMeta[1];
_str = tmp4_2;
tmp1 = omc_InteractiveUtil_isReplaceableInElements(threadData, _rest, _str);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isReplaceableInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inString)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isReplaceableInElements(threadData, _inAbsynElementItemLst, _inString);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isReplaceable(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_string _inString, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inString;
tmp4_3 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_string _str = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _public_elementitem_list = NULL;
modelica_metatype _protected_elementitem_list = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_str = tmp4_2;
_p = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_public_elementitem_list = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isReplaceableInElements(threadData, _public_elementitem_list, _str);
goto tmp3_done;
}
case 1: {
_model_ = tmp4_1;
_str = tmp4_2;
_p = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isReplaceableInElements(threadData, _protected_elementitem_list, _str);
goto tmp3_done;
}
case 2: {
_model_ = tmp4_1;
_str = tmp4_2;
_p = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_public_elementitem_list = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isReplaceableInElements(threadData, _public_elementitem_list, _str);
goto tmp3_done;
}
case 3: {
_model_ = tmp4_1;
_str = tmp4_2;
_p = tmp4_3;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmp1 = omc_InteractiveUtil_isReplaceableInElements(threadData, _protected_elementitem_list, _str);
goto tmp3_done;
}
case 4: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isReplaceable(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inString, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isReplaceable(threadData, _inComponentRef1, _inString, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isEnumeration(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,0) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,2) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isEnumeration(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isEnumeration(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isConstant(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
{
modelica_metatype _path = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _publst = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _classname = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[0] = omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[0] = omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isConstant(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isConstant(threadData, _inComponentRef1, _inComponentRef2, _p);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isProtected(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
{
modelica_metatype _path = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _publst = NULL;
modelica_metatype _protlst = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _classname = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
tmp1 = 0;
goto tmp3_done;
}
case 1: {
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _protlst);
tmp1 = 1;
goto tmp3_done;
}
case 2: {
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
tmp1 = 0;
goto tmp3_done;
}
case 3: {
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _protlst);
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isProtected(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isProtected(threadData, _inComponentRef1, _inComponentRef2, _p);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isParameter(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
{
modelica_metatype _path = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _publst = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _classname = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[0] = omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
_cr = tmp4_1;
_classname = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _classname);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[0] = omc_InteractiveUtil_getComponentsContainsName(threadData, _cr, _publst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isParameter(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _p)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isParameter(threadData, _inComponentRef1, _inComponentRef2, _p);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isPartial(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp6) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isPartial(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isPartial(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isClass(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isClass(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isClass(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isPackage(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],8,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isPackage(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isPackage(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isFunction(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],9,1) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isFunction(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isFunction(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isOptimization(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isOptimization(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isOptimization(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isBlock(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isBlock(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isBlock(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isRecord(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isRecord(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isRecord(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isOperatorFunction(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],9,1) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isOperatorFunction(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isOperatorFunction(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isOperatorRecord(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],11,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isOperatorRecord(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isOperatorRecord(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isOperator(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],10,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isOperator(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isOperator(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isModel(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isModel(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isModel(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isConnector(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isConnector(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isConnector(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isType(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,0) == 0) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isType(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isType(threadData, _path, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_string omc_InteractiveUtil_getClassRestriction(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_string _outRestriction = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inProgram;
{
modelica_metatype _p = NULL;
modelica_metatype _restr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_p = tmp4_1;
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
_restr = tmpMeta[1];
tmp1 = omc_Dump_unparseRestrictionStr(threadData, _restr);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outRestriction = tmp1;
_return: OMC_LABEL_UNUSED
return _outRestriction;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getClassDimensions(threadData_t *threadData, modelica_metatype _cdef)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _cdef;
{
modelica_metatype _ad = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (optionNone(tmpMeta[1])) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_ad = tmpMeta[2];
tmpMeta[0] = stringAppend(_OMC_LIT12,stringDelimitList(omc_List_map(threadData, _ad, boxvar_Dump_printSubscriptStr), _OMC_LIT10));
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT13);
tmp1 = tmpMeta[1];
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_string omc_InteractiveUtil_getExternalFunctionSpecification(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _p)
{
modelica_string _res_1 = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _path = NULL;
modelica_string _strLanguage = NULL;
modelica_string _strFuncName = NULL;
modelica_string _strOutput = NULL;
modelica_string _strArguments = NULL;
modelica_string _strAnn1 = NULL;
modelica_string _strAnn2 = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _funcName = NULL;
modelica_metatype _lang = NULL;
modelica_metatype _output_ = NULL;
modelica_metatype _args = NULL;
modelica_metatype _ann1 = NULL;
modelica_metatype _ann2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_path = omc_AbsynUtil_crefToPath(threadData, _cr);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[0] = omc_AbsynUtil_getExternalDecl(threadData, _cls);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],7,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_funcName = tmpMeta[2];
_lang = tmpMeta[3];
_output_ = tmpMeta[4];
_args = tmpMeta[5];
_ann1 = tmpMeta[6];
_ann2 = tmpMeta[7];
tmpMeta[0] = stringAppend(_OMC_LIT28,omc_Util_getOptionOrDefault(threadData, _lang, _OMC_LIT9));
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT28);
_strLanguage = tmpMeta[1];
tmpMeta[0] = stringAppend(_OMC_LIT28,omc_AbsynUtil_printComponentRefStr(threadData, omc_Util_getOptionOrDefault(threadData, _output_, _OMC_LIT325)));
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT28);
_strOutput = tmpMeta[1];
tmpMeta[0] = stringAppend(_OMC_LIT28,omc_Util_getOptionOrDefault(threadData, _funcName, _OMC_LIT9));
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT28);
_strFuncName = tmpMeta[1];
tmpMeta[0] = stringAppend(_OMC_LIT28,omc_Dump_printExpLstStr(threadData, _args));
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT28);
_strArguments = tmpMeta[1];
tmpMeta[0] = stringAppend(_OMC_LIT28,omc_Dump_unparseAnnotationOption(threadData, _ann1));
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT28);
_strAnn1 = tmpMeta[1];
tmpMeta[0] = stringAppend(_OMC_LIT28,omc_Dump_unparseAnnotationOption(threadData, _ann2));
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT28);
_strAnn2 = tmpMeta[1];
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_strLanguage, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_strOutput, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_strFuncName, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_strArguments, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_strAnn1, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_strAnn2, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))))))))))))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res_1 = tmp1;
_return: OMC_LABEL_UNUSED
return _res_1;
}
DLLExport
modelica_string omc_InteractiveUtil_getShortDefinitionBaseClassInformation(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _p)
{
modelica_string _res_1 = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _path = NULL;
modelica_metatype _baseClassPath = NULL;
modelica_string _strFlow = NULL;
modelica_string _strStream = NULL;
modelica_string _strVariability = NULL;
modelica_string _strDirection = NULL;
modelica_string _dim_str = NULL;
modelica_string _strBaseClassPath = NULL;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_metatype _cdef = NULL;
modelica_metatype _attr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
_path = omc_AbsynUtil_crefToPath(threadData, _cr);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmp7 = mmc_unbox_integer(tmpMeta[6]);
_cdef = tmpMeta[1];
_baseClassPath = tmpMeta[3];
_attr = tmpMeta[4];
_flowPrefix = tmp6;
_streamPrefix = tmp7;
_dim_str = omc_InteractiveUtil_getClassDimensions(threadData, _cdef);
_strBaseClassPath = omc_AbsynUtil_pathString(threadData, _baseClassPath, _OMC_LIT0, 1, 0);
_strFlow = (_flowPrefix?_OMC_LIT326:_OMC_LIT327);
_strStream = (_streamPrefix?_OMC_LIT328:_OMC_LIT327);
_strVariability = omc_InteractiveUtil_attrVariabilityStr(threadData, _attr);
_strDirection = omc_InteractiveUtil_attrDirectionStr(threadData, _attr);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_strBaseClassPath, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_strFlow, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_strStream, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_strVariability, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_strDirection, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_dim_str, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))))))))))))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res_1 = tmp1;
_return: OMC_LABEL_UNUSED
return _res_1;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInCommentOpt(threadData_t *threadData, modelica_metatype _inAbsynCommentOption, modelica_string _inString)
{
modelica_metatype _outAbsynCommentOption = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_string tmp3_2;
tmp3_1 = _inAbsynCommentOption;
tmp3_2 = _inString;
{
modelica_metatype _ann = NULL;
modelica_string _cmt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (0 != MMC_STRLEN(tmp3_2) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp3_2)) != 0) goto tmp2_end;
_ann = tmpMeta[2];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, _ann, mmc_mk_none());
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ann = tmpMeta[2];
_cmt = tmp3_2;
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, _ann, mmc_mk_some(_cmt));
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
case 2: {
if (!optionNone(tmp3_1)) goto tmp2_end;
_cmt = tmp3_2;
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_none(), mmc_mk_some(_cmt));
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynCommentOption = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynCommentOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInClassdef(threadData_t *threadData, modelica_metatype _inClassDef, modelica_string _inString)
{
modelica_metatype _outClassDef = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_string tmp3_2;
tmp3_1 = _inClassDef;
tmp3_2 = _inString;
{
modelica_metatype _p = NULL;
modelica_string _strcmt = NULL;
modelica_string _id = NULL;
modelica_metatype _cmt_1 = NULL;
modelica_metatype _ad = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _args = NULL;
modelica_metatype _edef = NULL;
modelica_metatype _plst = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 8; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (0 != MMC_STRLEN(tmp3_2) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp3_2)) != 0) goto tmp2_end;
_typeVars = tmpMeta[1];
_classAttrs = tmpMeta[2];
_p = tmpMeta[3];
_ann = tmpMeta[4];
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _p, _ann, mmc_mk_none());
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_typeVars = tmpMeta[1];
_classAttrs = tmpMeta[2];
_p = tmpMeta[3];
_ann = tmpMeta[4];
_strcmt = tmp3_2;
tmp3 += 5;
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _p, _ann, mmc_mk_some(_strcmt));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_path = tmpMeta[2];
_ad = tmpMeta[3];
_attr = tmpMeta[4];
_arg = tmpMeta[5];
_cmt = tmpMeta[6];
_strcmt = tmp3_2;
tmp3 += 4;
_cmt_1 = omc_InteractiveUtil_setClassCommentInCommentOpt(threadData, _cmt, _strcmt);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, _path, _ad);
tmpMeta[2] = mmc_mk_box5(4, &Absyn_ClassDef_DERIVED__desc, tmpMeta[1], _attr, _arg, _cmt_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_edef = tmpMeta[1];
_cmt = tmpMeta[2];
_strcmt = tmp3_2;
tmp3 += 3;
_cmt_1 = omc_InteractiveUtil_setClassCommentInCommentOpt(threadData, _cmt, _strcmt);
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ClassDef_ENUMERATION__desc, _edef, _cmt_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_plst = tmpMeta[1];
_cmt = tmpMeta[2];
_strcmt = tmp3_2;
tmp3 += 2;
_cmt_1 = omc_InteractiveUtil_setClassCommentInCommentOpt(threadData, _cmt, _strcmt);
tmpMeta[1] = mmc_mk_box3(6, &Absyn_ClassDef_OVERLOAD__desc, _plst, _cmt_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
if (0 != MMC_STRLEN(tmp3_2) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp3_2)) != 0) goto tmp2_end;
_id = tmpMeta[1];
_args = tmpMeta[2];
_p = tmpMeta[3];
_ann = tmpMeta[4];
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _id, _args, mmc_mk_none(), _p, _ann);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_id = tmpMeta[1];
_args = tmpMeta[2];
_p = tmpMeta[3];
_ann = tmpMeta[4];
_strcmt = tmp3_2;
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _id, _args, mmc_mk_some(_strcmt), _p, _ann);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
tmpMeta[0] = _inClassDef;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 8) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outClassDef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClassDef;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setClassCommentInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inString)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_string tmp3_2;
tmp3_1 = _inClass;
tmp3_2 = _inString;
{
modelica_metatype _cdef_1 = NULL;
modelica_metatype _cdef = NULL;
modelica_string _id = NULL;
modelica_string _cmt = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_id = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_cdef = tmpMeta[6];
_info = tmpMeta[7];
_cmt = tmp3_2;
_cdef_1 = omc_InteractiveUtil_setClassCommentInClassdef(threadData, _cdef, _cmt);
tmpMeta[1] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, _cdef_1, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_setClassComment(threadData_t *threadData, modelica_metatype _path, modelica_string _inString, modelica_metatype _inProgram, modelica_boolean *out_success)
{
modelica_metatype _outProgram = NULL;
modelica_boolean _success;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _path;
tmp4_2 = _inString;
tmp4_3 = _inProgram;
{
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_p_class = tmp4_1;
_str = tmp4_2;
_p = tmp4_3;
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_cdef_1 = omc_InteractiveUtil_setClassCommentInClass(threadData, _cdef, _str);
tmpMeta[2] = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmpMeta[0+0] = _newp;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inProgram;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_success = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_success) { *out_success = _success; }
return _outProgram;
}
modelica_metatype boxptr_InteractiveUtil_setClassComment(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inString, modelica_metatype _inProgram, modelica_metatype *out_success)
{
modelica_boolean _success;
modelica_metatype _outProgram = NULL;
_outProgram = omc_InteractiveUtil_setClassComment(threadData, _path, _inString, _inProgram, &_success);
if (out_success) { *out_success = mmc_mk_icon(_success); }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_deleteClassFromList(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inAbsynClassLst)
{
modelica_metatype _outAbsynClassLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inClass;
tmp3_2 = _inAbsynClassLst;
{
modelica_string _name1 = NULL;
modelica_string _name2 = NULL;
modelica_metatype _xs = NULL;
modelica_metatype _res = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _x = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_name2 = tmpMeta[3];
_xs = tmpMeta[2];
_name1 = tmpMeta[4];
if (!(stringEqual(_name1, _name2))) goto tmp2_end;
tmpMeta[0] = _xs;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
_x = tmpMeta[1];
_xs = tmpMeta[2];
_cdef = tmp3_1;
_res = omc_InteractiveUtil_deleteClassFromList(threadData, _cdef, _xs);
tmpMeta[1] = mmc_mk_cons(_x, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynClassLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassLst;
}
DLLExport
modelica_string omc_InteractiveUtil_deleteClass(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _cpath = NULL;
modelica_metatype _parentcpath = NULL;
modelica_metatype _parentparentcpath = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _parentcdef = NULL;
modelica_metatype _parentcdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_class_ = tmp4_1;
_p = tmp4_2;
_cpath = omc_AbsynUtil_crefToPath(threadData, _class_);
_parentcpath = omc_AbsynUtil_stripLast(threadData, _cpath);
_parentparentcpath = omc_AbsynUtil_stripLast(threadData, _parentcpath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cpath, _p, 0);
_parentcdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _parentcpath, _p, 0);
_parentcdef_1 = omc_InteractiveUtil_removeInnerClass(threadData, _cdef, _parentcdef);
tmpMeta[2] = mmc_mk_cons(_parentcdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _parentparentcpath);
tmpMeta[4] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], tmpMeta[3]);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[4], _p, 0);
tmp1_c0 = _OMC_LIT23;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
_class_ = tmp4_1;
_p = tmp4_2;
_cpath = omc_AbsynUtil_crefToPath(threadData, _class_);
_parentcpath = omc_AbsynUtil_stripLast(threadData, _cpath);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cpath, _p, 0);
_parentcdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _parentcpath, _p, 0);
_parentcdef_1 = omc_InteractiveUtil_removeInnerClass(threadData, _cdef, _parentcdef);
tmpMeta[2] = mmc_mk_cons(_parentcdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _OMC_LIT7);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp1_c0 = _OMC_LIT23;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 2: {
_class_ = tmp4_1;
_p = tmp4_2;
_cpath = omc_AbsynUtil_crefToPath(threadData, _class_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cpath, _p, 0);
tmpMeta[2] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[2]), MMC_UNTAGPTR(_p), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[2]))[2] = omc_InteractiveUtil_deleteClassFromList(threadData, _cdef, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))));
_p = tmpMeta[2];
tmp1_c0 = _OMC_LIT23;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
case 3: {
tmp1_c0 = _OMC_LIT24;
tmpMeta[0+1] = _inProgram;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_createModel(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_metatype _outProgram = NULL;
modelica_string _name = NULL;
modelica_metatype _w = NULL;
modelica_metatype _wp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(omc_AbsynUtil_crefIsIdent(threadData, _inComponentRef))
{
_name = omc_AbsynUtil_crefFirstIdent(threadData, _inComponentRef);
_w = _OMC_LIT7;
}
else
{
_wp = omc_AbsynUtil_crefToPath(threadData, _inComponentRef);
tmpMeta[2] = omc_AbsynUtil_splitQualAndIdentPath(threadData, _wp, &tmpMeta[0]);
_wp = tmpMeta[2];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
tmpMeta[0] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _wp);
_w = tmpMeta[0];
}
tmpMeta[1] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(0), mmc_mk_boolean(0), mmc_mk_boolean(0), _OMC_LIT329, _OMC_LIT307, _OMC_LIT39);
tmpMeta[0] = mmc_mk_cons(tmpMeta[1], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[0], _w);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[2], _inProgram, 0);
_return: OMC_LABEL_UNUSED
return _outProgram;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isPrimitive(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _path = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (4 != MMC_STRLEN(tmpMeta[0]) || strcmp(MMC_STRINGDATA(_OMC_LIT19), MMC_STRINGDATA(tmpMeta[0])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta[0]) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta[0])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta[0]) || strcmp(MMC_STRINGDATA(_OMC_LIT22), MMC_STRINGDATA(tmpMeta[0])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta[0]) || strcmp(MMC_STRINGDATA(_OMC_LIT21), MMC_STRINGDATA(tmpMeta[0])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
_cr = tmp4_1;
_p = tmp4_2;
_path = omc_AbsynUtil_crefToPath(threadData, _cr);
_class_ = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmp1 = omc_InteractiveUtil_isPrimitiveClass(threadData, _class_, _p);
goto tmp3_done;
}
case 5: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isPrimitive(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isPrimitive(threadData, _inComponentRef, _inProgram);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_changeLastIdent(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inPath1;
tmp3_2 = _inPath2;
{
modelica_string _b = NULL;
modelica_string _b_1 = NULL;
modelica_metatype _a_1 = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
_b = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _b);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,2) == 0) goto tmp2_end;
_p2 = tmp3_2;
_b_1 = omc_AbsynUtil_pathLastIdent(threadData, _p2);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _b_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
_p1 = tmp3_1;
_p2 = tmp3_2;
_a_1 = omc_AbsynUtil_stripLast(threadData, _p1);
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _a_1, _p2);
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,2) == 0) goto tmp2_end;
_p1 = tmp3_1;
_p2 = tmp3_2;
_a_1 = omc_AbsynUtil_stripLast(threadData, _p1);
_b_1 = omc_AbsynUtil_pathLastIdent(threadData, _p2);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _b_1);
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _a_1, tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInImport(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean)
{
modelica_metatype _outImport = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inImport1;
tmp4_2 = _inPath2;
tmp4_3 = _inPath3;
tmp4_4 = _inEnv4;
{
modelica_metatype _cenv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _path = NULL;
modelica_metatype _new_path = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_string _id = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta[2];
_path_1 = tmpMeta[3];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_cache = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none() ,NULL ,&_cenv);
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp6 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp6) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path_1, _new_comp);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Import_NAMED__IMPORT__desc, _id, _new_path);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path_1 = tmpMeta[2];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_cache = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none() ,NULL ,&_cenv);
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp7 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp7) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path_1, _new_comp);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Import_QUAL__IMPORT__desc, _new_path);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 1;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_path_1 = tmpMeta[2];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_cache = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none() ,NULL ,&_cenv);
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp8 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp8) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path_1, _new_comp);
tmpMeta[2] = mmc_mk_box2(5, &Absyn_Import_UNQUAL__IMPORT__desc, _new_path);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 1;
goto tmp3_done;
}
case 3: {
tmpMeta[0+0] = _inImport1;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outImport = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outImport;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInImport(threadData_t *threadData, modelica_metatype _inImport1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outImport = NULL;
_outImport = omc_InteractiveUtil_renameClassInImport(threadData, _inImport1, _inPath2, _inPath3, _inEnv4, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outImport;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean)
{
modelica_metatype _outElementSpec = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inElementSpec1;
tmp4_2 = _inPath2;
tmp4_3 = _inPath3;
tmp4_4 = _inEnv4;
{
modelica_string _id = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _new_path = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _a = NULL;
modelica_metatype _comp_items = NULL;
modelica_metatype _import_1 = NULL;
modelica_metatype _import_ = NULL;
modelica_boolean _changed;
modelica_metatype _x = NULL;
modelica_metatype _annOpt = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _elargs = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_a = tmpMeta[2];
_path_1 = tmpMeta[4];
_x = tmpMeta[5];
_comp_items = tmpMeta[6];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 2;
tmpMeta[5] = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none(), &tmpMeta[2], &tmpMeta[4]);
_cache = tmpMeta[5];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_id = tmpMeta[3];
_cenv = tmpMeta[4];
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta[2];
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp6 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp6) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path, _new_comp);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, _new_path, _x);
tmpMeta[3] = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _a, tmpMeta[2], _comp_items);
tmpMeta[0+0] = tmpMeta[3];
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_path_1 = tmpMeta[2];
_elargs = tmpMeta[3];
_annOpt = tmpMeta[4];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_cache = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none() ,NULL ,&_cenv);
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp7 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp7) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path_1, _new_comp);
tmpMeta[2] = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _new_path, _elargs, _annOpt);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_import_ = tmpMeta[2];
_cmt = tmpMeta[3];
_info = tmpMeta[4];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_import_1 = omc_InteractiveUtil_renameClassInImport(threadData, _import_, _old_comp, _new_comp, _env ,&_changed);
tmpMeta[2] = mmc_mk_box4(5, &Absyn_ElementSpec_IMPORT__desc, _import_1, _cmt, _info);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _changed;
goto tmp3_done;
}
case 3: {
tmpMeta[0+0] = _inElementSpec1;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElementSpec = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outElementSpec = NULL;
_outElementSpec = omc_InteractiveUtil_renameClassInElementSpec(threadData, _inElementSpec1, _inPath2, _inPath3, _inEnv4, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inAbsynElementItemLst1;
tmp4_2 = _inPath2;
tmp4_3 = _inPath3;
tmp4_4 = _inEnv4;
{
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_boolean _changed1;
modelica_boolean _changed2;
modelica_boolean _changed;
modelica_boolean _finalPrefix;
modelica_metatype _elementspec_1 = NULL;
modelica_metatype _elementspec = NULL;
modelica_metatype _element_1 = NULL;
modelica_metatype _element = NULL;
modelica_metatype _redeclare_ = NULL;
modelica_metatype _inner_outer = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constrainClass = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
modelica_integer tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,6) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 6));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
_finalPrefix = tmp6;
_redeclare_ = tmpMeta[6];
_inner_outer = tmpMeta[7];
_elementspec = tmpMeta[8];
_info = tmpMeta[9];
_constrainClass = tmpMeta[10];
_res = tmpMeta[3];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_res_1 = omc_InteractiveUtil_renameClassInElements(threadData, _res, _old_comp, _new_comp, _env ,&_changed1);
_elementspec_1 = omc_InteractiveUtil_renameClassInElementSpec(threadData, _elementspec, _old_comp, _new_comp, _env ,&_changed2);
tmpMeta[2] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_finalPrefix), _redeclare_, _inner_outer, _elementspec_1, _info, _constrainClass);
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta[2]);
_element_1 = tmpMeta[3];
_changed = (_changed1 || _changed2);
tmpMeta[2] = mmc_mk_cons(_element_1, _res_1);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _changed;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_element = tmpMeta[2];
_res = tmpMeta[3];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_res_1 = omc_InteractiveUtil_renameClassInElements(threadData, _res, _old_comp, _new_comp, _env ,&_changed);
_element_1 = _element;
tmpMeta[2] = mmc_mk_cons(_element_1, _res_1);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _changed;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementItemLst = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outAbsynElementItemLst = NULL;
_outAbsynElementItemLst = omc_InteractiveUtil_renameClassInElements(threadData, _inAbsynElementItemLst1, _inPath2, _inPath3, _inEnv4, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inAbsynClassPartLst1;
tmp4_2 = _inPath2;
tmp4_3 = _inPath3;
tmp4_4 = _inEnv4;
{
modelica_metatype _env = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_boolean _changed1;
modelica_boolean _changed2;
modelica_boolean _changed;
modelica_metatype _elements_1 = NULL;
modelica_metatype _elements = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _a = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_elements = tmpMeta[4];
_res = tmpMeta[3];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_res_1 = omc_InteractiveUtil_renameClassInParts(threadData, _res, _old_comp, _new_comp, _env ,&_changed1);
_elements_1 = omc_InteractiveUtil_renameClassInElements(threadData, _elements, _old_comp, _new_comp, _env ,&_changed2);
_changed = (_changed1 || _changed2);
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elements_1);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _res_1);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _changed;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_elements = tmpMeta[4];
_res = tmpMeta[3];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_res_1 = omc_InteractiveUtil_renameClassInParts(threadData, _res, _old_comp, _new_comp, _env ,&_changed1);
_elements_1 = omc_InteractiveUtil_renameClassInElements(threadData, _elements, _old_comp, _new_comp, _env ,&_changed2);
_changed = (_changed1 || _changed2);
tmpMeta[3] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elements_1);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _res_1);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _changed;
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_a = tmpMeta[2];
_res = tmpMeta[3];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
_res_1 = omc_InteractiveUtil_renameClassInParts(threadData, _res, _old_comp, _new_comp, _env ,&_changed);
tmpMeta[2] = mmc_mk_cons(_a, _res_1);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _changed;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassPartLst = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outAbsynClassPartLst = NULL;
_outAbsynClassPartLst = omc_InteractiveUtil_renameClassInParts(threadData, _inAbsynClassPartLst1, _inPath2, _inPath3, _inEnv4, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_boolean *out_outBoolean)
{
modelica_metatype _outClass = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[15] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inClass1;
tmp4_2 = _inPath2;
tmp4_3 = _inPath3;
tmp4_4 = _inEnv4;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_boolean _changed;
modelica_boolean _partialPrefix;
modelica_boolean _finalPrefix;
modelica_boolean _encapsulatedPrefix;
modelica_string _name = NULL;
modelica_string _baseClassName = NULL;
modelica_metatype _restriction = NULL;
modelica_metatype _comment = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _new_path = NULL;
modelica_metatype _env = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _elementarg = NULL;
modelica_metatype _co = NULL;
modelica_metatype _subscripts = NULL;
modelica_metatype _attrs = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp8 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,5) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta[2];
_partialPrefix = tmp6;
_finalPrefix = tmp7;
_encapsulatedPrefix = tmp8;
_restriction = tmpMeta[6];
_typeVars = tmpMeta[8];
_classAttrs = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_comment = tmpMeta[12];
_file_info = tmpMeta[13];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 2;
_parts_1 = omc_InteractiveUtil_renameClassInParts(threadData, _parts, _old_comp, _new_comp, _env ,&_changed);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _comment);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta[2], _file_info);
tmpMeta[0+0] = tmpMeta[3];
tmp1_c1 = _changed;
goto tmp3_done;
}
case 1: {
modelica_integer tmp9;
modelica_integer tmp10;
modelica_integer tmp11;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp11 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],4,5) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta[2];
_partialPrefix = tmp9;
_finalPrefix = tmp10;
_encapsulatedPrefix = tmp11;
_restriction = tmpMeta[6];
_baseClassName = tmpMeta[8];
_modifications = tmpMeta[9];
_comment = tmpMeta[10];
_parts = tmpMeta[11];
_ann = tmpMeta[12];
_file_info = tmpMeta[13];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmp4 += 1;
_parts_1 = omc_InteractiveUtil_renameClassInParts(threadData, _parts, _old_comp, _new_comp, _env ,&_changed);
tmpMeta[2] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, _comment, _parts_1, _ann);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta[2], _file_info);
tmpMeta[0+0] = tmpMeta[3];
tmp1_c1 = _changed;
goto tmp3_done;
}
case 2: {
modelica_integer tmp12;
modelica_integer tmp13;
modelica_integer tmp14;
modelica_boolean tmp15;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp12 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp13 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp14 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,4) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 3));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_name = tmpMeta[2];
_partialPrefix = tmp12;
_finalPrefix = tmp13;
_encapsulatedPrefix = tmp14;
_restriction = tmpMeta[6];
_path_1 = tmpMeta[9];
_subscripts = tmpMeta[10];
_attrs = tmpMeta[11];
_elementarg = tmpMeta[12];
_co = tmpMeta[13];
_file_info = tmpMeta[14];
_old_comp = tmp4_2;
_new_comp = tmp4_3;
_env = tmp4_4;
tmpMeta[5] = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none(), &tmpMeta[2], &tmpMeta[4]);
_cache = tmpMeta[5];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_name = tmpMeta[3];
_cenv = tmpMeta[4];
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
_path_1 = tmpMeta[2];
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmp15 = omc_AbsynUtil_pathEqual(threadData, _path, _old_comp);
if (1 != tmp15) goto goto_2;
_new_path = omc_InteractiveUtil_changeLastIdent(threadData, _path_1, _new_comp);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, _new_path, _subscripts);
tmpMeta[3] = mmc_mk_box5(4, &Absyn_ClassDef_DERIVED__desc, tmpMeta[2], _attrs, _elementarg, _co);
tmpMeta[4] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta[3], _file_info);
tmpMeta[0+0] = tmpMeta[4];
tmp1_c1 = 1;
goto tmp3_done;
}
case 3: {
tmpMeta[0+0] = _inClass1;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outClass = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_renameClassInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inPath2, modelica_metatype _inPath3, modelica_metatype _inEnv4, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outClass = NULL;
_outClass = omc_InteractiveUtil_renameClassInClass(threadData, _inClass1, _inPath2, _inPath3, _inEnv4, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameClassVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv)
{
modelica_metatype _outTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv = NULL;
modelica_metatype tmpMeta[17] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv;
{
modelica_metatype _path_1 = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _old_class_path = NULL;
modelica_metatype _new_class_path = NULL;
modelica_string _new_name = NULL;
modelica_string _path_str = NULL;
modelica_string _id = NULL;
modelica_boolean _a;
modelica_boolean _b;
modelica_boolean _c;
modelica_boolean _changed;
modelica_metatype _d = NULL;
modelica_metatype _e = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _p = NULL;
modelica_metatype _path_str_lst = NULL;
modelica_metatype _env = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _class_1 = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _args = NULL;
modelica_metatype _opath = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 8));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_class_ = tmpMeta[1];
_file_info = tmpMeta[2];
_opath = tmpMeta[3];
_args = tmpMeta[4];
tmp5 = omc_InteractiveUtil_isReadOnly(threadData, _file_info);
if (1 != tmp5) goto goto_1;
tmpMeta[1] = mmc_mk_box3(0, _class_, _opath, _args);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
modelica_boolean tmp9;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmp8 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 8));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (optionNone(tmpMeta[9])) goto tmp2_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 1));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 1));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 3));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 4));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 5));
_id = tmpMeta[2];
_a = tmp6;
_b = tmp7;
_c = tmp8;
_d = tmpMeta[6];
_e = tmpMeta[7];
_file_info = tmpMeta[8];
_pa = tmpMeta[10];
_old_class_path = tmpMeta[12];
_new_class_path = tmpMeta[13];
_p = tmpMeta[14];
_path_str_lst = tmpMeta[15];
_env = tmpMeta[16];
tmp3 += 1;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = omc_AbsynUtil_joinPaths(threadData, _pa, tmpMeta[1]);
tmp9 = omc_AbsynUtil_pathEqual(threadData, _old_class_path, _path_1);
if (1 != tmp9) goto goto_1;
_new_name = omc_AbsynUtil_pathLastIdent(threadData, _new_class_path);
_path_str = omc_AbsynUtil_pathString(threadData, _new_class_path, _OMC_LIT0, 1, 0);
tmpMeta[1] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _new_name, mmc_mk_boolean(_a), mmc_mk_boolean(_b), mmc_mk_boolean(_c), _d, _e, _file_info);
tmpMeta[2] = mmc_mk_cons(_path_str, _path_str_lst);
tmpMeta[3] = mmc_mk_box5(0, _old_class_path, _new_class_path, _p, tmpMeta[2], _env);
tmpMeta[4] = mmc_mk_box3(0, tmpMeta[1], mmc_mk_some(_pa), tmpMeta[3]);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 2: {
modelica_integer tmp10;
modelica_integer tmp11;
modelica_integer tmp12;
modelica_boolean tmp13;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmp10 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmp11 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmp12 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 8));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!optionNone(tmpMeta[9])) goto tmp2_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 1));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 2));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 3));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 4));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 5));
_id = tmpMeta[2];
_a = tmp10;
_b = tmp11;
_c = tmp12;
_d = tmpMeta[6];
_e = tmpMeta[7];
_file_info = tmpMeta[8];
_old_class_path = tmpMeta[11];
_new_class_path = tmpMeta[12];
_p = tmpMeta[13];
_path_str_lst = tmpMeta[14];
_env = tmpMeta[15];
tmp3 += 1;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta[1];
tmp13 = omc_AbsynUtil_pathEqual(threadData, _old_class_path, _path_1);
if (1 != tmp13) goto goto_1;
_new_name = omc_AbsynUtil_pathLastIdent(threadData, _new_class_path);
_path_str = omc_AbsynUtil_pathString(threadData, _new_class_path, _OMC_LIT0, 1, 0);
tmpMeta[1] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _new_name, mmc_mk_boolean(_a), mmc_mk_boolean(_b), mmc_mk_boolean(_c), _d, _e, _file_info);
tmpMeta[2] = mmc_mk_cons(_path_str, _path_str_lst);
tmpMeta[3] = mmc_mk_box5(0, _old_class_path, _new_class_path, _p, tmpMeta[2], _env);
tmpMeta[4] = mmc_mk_box3(0, tmpMeta[1], mmc_mk_none(), tmpMeta[3]);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
_class_ = tmpMeta[1];
_id = tmpMeta[2];
_pa = tmpMeta[4];
_old_class_path = tmpMeta[6];
_new_class_path = tmpMeta[7];
_p = tmpMeta[8];
_path_str_lst = tmpMeta[9];
_env = tmpMeta[10];
tmp3 += 1;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = omc_AbsynUtil_joinPaths(threadData, _pa, tmpMeta[1]);
_cenv = omc_InteractiveUtil_getClassEnvNoElaboration(threadData, _p, _path_1, _env);
_class_1 = omc_InteractiveUtil_renameClassInClass(threadData, _class_, _old_class_path, _new_class_path, _cenv ,&_changed);
_path_str = (_changed?omc_AbsynUtil_pathString(threadData, _path_1, _OMC_LIT0, 1, 0):_OMC_LIT9);
tmpMeta[1] = mmc_mk_cons(_path_str, _path_str_lst);
tmpMeta[2] = mmc_mk_box5(0, _old_class_path, _new_class_path, _p, tmpMeta[1], _env);
tmpMeta[3] = mmc_mk_box3(0, _class_1, mmc_mk_some(_pa), tmpMeta[2]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
_class_ = tmpMeta[1];
_id = tmpMeta[2];
_old_class_path = tmpMeta[5];
_new_class_path = tmpMeta[6];
_p = tmpMeta[7];
_path_str_lst = tmpMeta[8];
_env = tmpMeta[9];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta[1];
_cenv = omc_InteractiveUtil_getClassEnvNoElaboration(threadData, _p, _path_1, _env);
_class_1 = omc_InteractiveUtil_renameClassInClass(threadData, _class_, _old_class_path, _new_class_path, _cenv ,&_changed);
_path_str = (_changed?omc_AbsynUtil_pathString(threadData, _path_1, _OMC_LIT0, 1, 0):_OMC_LIT9);
tmpMeta[1] = mmc_mk_cons(_path_str, _path_str_lst);
tmpMeta[2] = mmc_mk_box5(0, _old_class_path, _new_class_path, _p, tmpMeta[1], _env);
tmpMeta[3] = mmc_mk_box3(0, _class_1, mmc_mk_none(), tmpMeta[2]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 5: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_class_ = tmpMeta[1];
_opath = tmpMeta[2];
_args = tmpMeta[3];
tmpMeta[1] = mmc_mk_box3(0, _class_, _opath, _args);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 6) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTplAbsynClassAbsynPathOptionTplAbsynPathAbsynPathAbsynProgramStringLstEnvEnv;
}
DLLExport
modelica_string omc_InteractiveUtil_renameClass(threadData_t *threadData, modelica_metatype _inProgram1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inProgram1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
{
modelica_metatype _new_path = NULL;
modelica_metatype _old_path = NULL;
modelica_metatype _new_path_1 = NULL;
modelica_metatype _old_path_no_last = NULL;
modelica_string _tmp_str = NULL;
modelica_string _path_str_lst_no_empty = NULL;
modelica_string _res = NULL;
modelica_metatype _p = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _old_class = NULL;
modelica_metatype _new_name = NULL;
modelica_metatype _pa_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _path_str_lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,3) == 0) goto tmp3_end;
_new_name = tmp4_3;
_p = tmp4_1;
_new_path = omc_AbsynUtil_crefToPath(threadData, _new_name);
_tmp_str = omc_AbsynUtil_pathString(threadData, _new_path, _OMC_LIT0, 1, 0);
fputs(MMC_STRINGDATA(_tmp_str),stdout);
fputs(MMC_STRINGDATA(_OMC_LIT136),stdout);
tmp1_c0 = _OMC_LIT330;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
_old_class = tmp4_2;
_p = tmp4_1;
_new_name = tmp4_3;
tmp4 += 1;
_old_path = omc_AbsynUtil_crefToPath(threadData, _old_class);
_new_path = omc_AbsynUtil_crefToPath(threadData, _new_name);
_pa_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p);
omc_Inst_makeEnvFromProgram(threadData, _pa_1 ,&_env);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box5(0, _old_path, _new_path, _p, tmpMeta[2], _env);
tmpMeta[4] = omc_AbsynUtil_traverseClasses(threadData, _p, mmc_mk_none(), boxvar_InteractiveUtil_renameClassVisitor, tmpMeta[3], 1);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
_p_1 = tmpMeta[5];
_path_str_lst = tmpMeta[7];
_path_str_lst_no_empty = omc_Util_stringDelimitListNonEmptyElts(threadData, _path_str_lst, _OMC_LIT10);
tmpMeta[2] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_path_str_lst_no_empty, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
_res = stringAppendList(tmpMeta[2]);
tmp1_c0 = _res;
tmpMeta[0+1] = _p_1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
_old_class = tmp4_2;
_p = tmp4_1;
_new_name = tmp4_3;
_old_path = omc_AbsynUtil_crefToPath(threadData, _old_class);
_new_path_1 = omc_AbsynUtil_crefToPath(threadData, _new_name);
_old_path_no_last = omc_AbsynUtil_stripLast(threadData, _old_path);
_new_path = omc_AbsynUtil_joinPaths(threadData, _old_path_no_last, _new_path_1);
_pa_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p);
omc_Inst_makeEnvFromProgram(threadData, _pa_1 ,&_env);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box5(0, _old_path, _new_path, _p, tmpMeta[2], _env);
tmpMeta[4] = omc_AbsynUtil_traverseClasses(threadData, _p, mmc_mk_none(), boxvar_InteractiveUtil_renameClassVisitor, tmpMeta[3], 1);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
_p_1 = tmpMeta[5];
_path_str_lst = tmpMeta[7];
_path_str_lst_no_empty = omc_Util_stringDelimitListNonEmptyElts(threadData, _path_str_lst, _OMC_LIT10);
tmpMeta[2] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_path_str_lst_no_empty, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
_res = stringAppendList(tmpMeta[2]);
tmp1_c0 = _res;
tmpMeta[0+1] = _p_1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentitemsInElement(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_metatype _outAbsynComponentItemLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inElement;
{
modelica_metatype _l = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_l = tmpMeta[2];
tmpMeta[0] = _l;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynComponentItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynComponentItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getComponentitemName(threadData_t *threadData, modelica_metatype _inComponentItem)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentItem;
{
modelica_string _id = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_id = tmpMeta[1];
tmp1 = _id;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_componentitemNamed(threadData_t *threadData, modelica_metatype _inComponentItem, modelica_string _inIdent)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;
tmp4_1 = _inComponentItem;
tmp4_2 = _inIdent;
{
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_id1 = tmpMeta[1];
_id2 = tmp4_2;
if (!(stringEqual(_id1, _id2))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_componentitemNamed(threadData_t *threadData, modelica_metatype _inComponentItem, modelica_metatype _inIdent)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_componentitemNamed(threadData, _inComponentItem, _inIdent);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_metatype omc_InteractiveUtil_buildWithin(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outWithin = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_metatype _w_path = NULL;
modelica_metatype _path = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
tmpMeta[0] = _OMC_LIT7;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
_inPath = _path;
goto _tailrecursive;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
_path = tmp3_1;
_w_path = omc_AbsynUtil_stripLast(threadData, _path);
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Within_WITHIN__desc, _w_path);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outWithin = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outWithin;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade)
{
modelica_metatype _outAbsynComponentItemLst = NULL;
modelica_boolean _outChangeMade;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inAbsynComponentItemLst;
tmp4_2 = _inIdent;
tmp4_3 = _inExp;
{
modelica_string _id = NULL;
modelica_string _id2 = NULL;
modelica_metatype _dim = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _res = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _item = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
if (optionNone(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 1));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_id = tmpMeta[5];
_dim = tmpMeta[6];
_arg = tmpMeta[9];
_cond = tmpMeta[10];
_cmt = tmpMeta[11];
_rest = tmpMeta[3];
_id2 = tmp4_2;
_exp = tmp4_3;
if (!(stringEqual(_id, _id2))) goto tmp3_end;
tmpMeta[3] = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _exp, _OMC_LIT39);
tmpMeta[4] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _arg, tmpMeta[3]);
tmpMeta[5] = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _id, _dim, mmc_mk_some(tmpMeta[4]));
tmpMeta[6] = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta[5], _cond, _cmt);
tmpMeta[2] = mmc_mk_cons(tmpMeta[6], _rest);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 1;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
if (!optionNone(tmpMeta[7])) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_id = tmpMeta[5];
_dim = tmpMeta[6];
_cond = tmpMeta[8];
_cmt = tmpMeta[9];
_rest = tmpMeta[3];
_id2 = tmp4_2;
_exp = tmp4_3;
if (!(stringEqual(_id, _id2))) goto tmp3_end;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _exp, _OMC_LIT39);
tmpMeta[5] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta[3], tmpMeta[4]);
tmpMeta[6] = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _id, _dim, mmc_mk_some(tmpMeta[5]));
tmpMeta[7] = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta[6], _cond, _cmt);
tmpMeta[2] = mmc_mk_cons(tmpMeta[7], _rest);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 1;
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_item = tmpMeta[2];
_rest = tmpMeta[3];
_id = tmp4_2;
_exp = tmp4_3;
_res = omc_InteractiveUtil_setVariableBindingInCompitems(threadData, _rest, _id, _exp ,&_b);
tmpMeta[2] = mmc_mk_cons(_item, _res);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _b;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAbsynComponentItemLst = tmpMeta[0+0];
_outChangeMade = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outChangeMade) { *out_outChangeMade = _outChangeMade; }
return _outAbsynComponentItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInCompitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade)
{
modelica_boolean _outChangeMade;
modelica_metatype _outAbsynComponentItemLst = NULL;
_outAbsynComponentItemLst = omc_InteractiveUtil_setVariableBindingInCompitems(threadData, _inAbsynComponentItemLst, _inIdent, _inExp, &_outChangeMade);
if (out_outChangeMade) { *out_outChangeMade = mmc_mk_icon(_outChangeMade); }
return _outAbsynComponentItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade)
{
modelica_metatype _outElement = NULL;
modelica_boolean _outChangeMade;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inElement;
tmp4_2 = _inIdent;
tmp4_3 = _inExp;
{
modelica_metatype _compitems_1 = NULL;
modelica_metatype _compitems = NULL;
modelica_boolean _f;
modelica_boolean _b;
modelica_metatype _r = NULL;
modelica_metatype _i = NULL;
modelica_string _id = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,3) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_f = tmp6;
_r = tmpMeta[3];
_i = tmpMeta[4];
_attr = tmpMeta[6];
_tp = tmpMeta[7];
_compitems = tmpMeta[8];
_info = tmpMeta[9];
_constr = tmpMeta[10];
_id = tmp4_2;
_exp = tmp4_3;
_compitems_1 = omc_InteractiveUtil_setVariableBindingInCompitems(threadData, _compitems, _id, _exp ,&_b);
tmpMeta[2] = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr, _tp, _compitems_1);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _i, tmpMeta[2], _info, _constr);
tmpMeta[0+0] = tmpMeta[3];
tmp1_c1 = _b;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inElement;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outElement = tmpMeta[0+0];
_outChangeMade = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outChangeMade) { *out_outChangeMade = _outChangeMade; }
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade)
{
modelica_boolean _outChangeMade;
modelica_metatype _outElement = NULL;
_outElement = omc_InteractiveUtil_setVariableBindingInElement(threadData, _inElement, _inIdent, _inExp, &_outChangeMade);
if (out_outChangeMade) { *out_outChangeMade = mmc_mk_icon(_outChangeMade); }
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_boolean _outChangeMade;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynElementItemLst;
tmp4_2 = _inIdent;
tmp4_3 = _inExp;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elt_1 = NULL;
modelica_metatype _elt = NULL;
modelica_string _id = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _elitem = NULL;
modelica_boolean _b1;
modelica_boolean _b2;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_elt = tmpMeta[4];
_rest = tmpMeta[3];
_id = tmp4_2;
_exp = tmp4_3;
_res = omc_InteractiveUtil_setVariableBindingInElementitems(threadData, _rest, _id, _exp ,&_b1);
_elt_1 = omc_InteractiveUtil_setVariableBindingInElement(threadData, _elt, _id, _exp ,&_b2);
_b = (_b1 || _b2);
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _res);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _b;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_elitem = tmpMeta[2];
_rest = tmpMeta[3];
_id = tmp4_2;
_exp = tmp4_3;
_res = omc_InteractiveUtil_setVariableBindingInElementitems(threadData, _rest, _id, _exp ,&_b);
tmpMeta[2] = mmc_mk_cons(_elitem, _res);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _b;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementItemLst = tmpMeta[0+0];
_outChangeMade = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outChangeMade) { *out_outChangeMade = _outChangeMade; }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade)
{
modelica_boolean _outChangeMade;
modelica_metatype _outAbsynElementItemLst = NULL;
_outAbsynElementItemLst = omc_InteractiveUtil_setVariableBindingInElementitems(threadData, _inAbsynElementItemLst, _inIdent, _inExp, &_outChangeMade);
if (out_outChangeMade) { *out_outChangeMade = mmc_mk_icon(_outChangeMade); }
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_boolean _outChangeMade;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inAbsynClassPartLst;
tmp4_2 = _inIdent;
tmp4_3 = _inExp;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_string _id = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _elt = NULL;
modelica_boolean _b1;
modelica_boolean _b2;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_elts = tmpMeta[4];
_rest = tmpMeta[3];
_id = tmp4_2;
_exp = tmp4_3;
tmp4 += 1;
_res = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _rest, _id, _exp ,&_b1);
_elts_1 = omc_InteractiveUtil_setVariableBindingInElementitems(threadData, _elts, _id, _exp ,&_b2);
_b = (_b1 || _b2);
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _res);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _b;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_elts = tmpMeta[4];
_rest = tmpMeta[3];
_id = tmp4_2;
_exp = tmp4_3;
_res = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _rest, _id, _exp ,&_b1);
_elts_1 = omc_InteractiveUtil_setVariableBindingInElementitems(threadData, _elts, _id, _exp ,&_b2);
_b = (_b1 || _b2);
tmpMeta[3] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _res);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _b;
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_elt = tmpMeta[2];
_rest = tmpMeta[3];
_id = tmp4_2;
_exp = tmp4_3;
_res = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _rest, _id, _exp ,&_b);
tmpMeta[2] = mmc_mk_cons(_elt, _res);
tmpMeta[0+0] = tmpMeta[2];
tmp1_c1 = _b;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynClassPartLst = tmpMeta[0+0];
_outChangeMade = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outChangeMade) { *out_outChangeMade = _outChangeMade; }
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade)
{
modelica_boolean _outChangeMade;
modelica_metatype _outAbsynClassPartLst = NULL;
_outAbsynClassPartLst = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _inAbsynClassPartLst, _inIdent, _inExp, &_outChangeMade);
if (out_outChangeMade) { *out_outChangeMade = mmc_mk_icon(_outChangeMade); }
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setVariableBindingInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inIdent, modelica_metatype _inExp, modelica_boolean *out_outChangeMade)
{
modelica_metatype _outClass = NULL;
modelica_boolean _outChangeMade;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[14] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inClass;
tmp4_2 = _inIdent;
tmp4_3 = _inExp;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _id = NULL;
modelica_string _id2 = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_boolean _b;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp8 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,5) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta[2];
_p = tmp6;
_f = tmp7;
_e = tmp8;
_r = tmpMeta[6];
_typeVars = tmpMeta[8];
_classAttrs = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_cmt = tmpMeta[12];
_file_info = tmpMeta[13];
_id2 = tmp4_2;
_exp = tmp4_3;
_parts_1 = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _parts, _id2, _exp ,&_b);
tmpMeta[2] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _cmt);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[2], _file_info);
tmpMeta[0+0] = tmpMeta[3];
tmp1_c1 = _b;
goto tmp3_done;
}
case 1: {
modelica_integer tmp9;
modelica_integer tmp10;
modelica_integer tmp11;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp11 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],4,5) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_id = tmpMeta[2];
_p = tmp9;
_f = tmp10;
_e = tmp11;
_r = tmpMeta[6];
_bcname = tmpMeta[8];
_modif = tmpMeta[9];
_cmt = tmpMeta[10];
_parts = tmpMeta[11];
_ann = tmpMeta[12];
_file_info = tmpMeta[13];
_id2 = tmp4_2;
_exp = tmp4_3;
_parts_1 = omc_InteractiveUtil_setVariableBindingInClassparts(threadData, _parts, _id2, _exp ,&_b);
tmpMeta[2] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts_1, _ann);
tmpMeta[3] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[2], _file_info);
tmpMeta[0+0] = tmpMeta[3];
tmp1_c1 = _b;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta[0+0];
_outChangeMade = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outChangeMade) { *out_outChangeMade = _outChangeMade; }
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setVariableBindingInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inIdent, modelica_metatype _inExp, modelica_metatype *out_outChangeMade)
{
modelica_boolean _outChangeMade;
modelica_metatype _outClass = NULL;
_outClass = omc_InteractiveUtil_setVariableBindingInClass(threadData, _inClass, _inIdent, _inExp, &_outChangeMade);
if (out_outChangeMade) { *out_outChangeMade = mmc_mk_icon(_outChangeMade); }
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_setParameterValue(threadData_t *threadData, modelica_metatype _inComponentRefClass, modelica_metatype _inComponentRefComponentName, modelica_metatype _inBindingExp, modelica_metatype _inFullProgram, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRefClass;
tmp4_2 = _inComponentRefComponentName;
tmp4_3 = _inBindingExp;
tmp4_4 = _inFullProgram;
{
modelica_metatype _p_class = NULL;
modelica_string _varname = NULL;
modelica_string _str = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _name = NULL;
modelica_metatype _exp = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_string tmp7;
_class_ = tmp4_1;
_name = tmp4_2;
_exp = tmp4_3;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta[2] = omc_AbsynUtil_crefToPath(threadData, _name);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_varname = tmpMeta[3];
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_cdef_1 = omc_InteractiveUtil_setVariableBindingInClass(threadData, _cdef, _varname, _exp ,&_b);
tmpMeta[2] = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp6 = (modelica_boolean)_b;
if(tmp6)
{
tmp7 = _OMC_LIT67;
}
else
{
tmpMeta[2] = stringAppend(_OMC_LIT331,_varname);
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT332);
tmpMeta[4] = stringAppend(tmpMeta[3],omc_AbsynUtil_pathString(threadData, _p_class, _OMC_LIT0, 1, 0));
tmpMeta[5] = stringAppend(tmpMeta[4],_OMC_LIT333);
tmp7 = tmpMeta[5];
}
_str = tmp7;
tmpMeta[0+0] = _newp;
tmp1_c1 = _str;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp8;
_class_ = tmp4_1;
_name = tmp4_2;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta[2] = omc_AbsynUtil_crefToPath(threadData, _name);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto goto_2;
tmp8 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
tmp8 = 1;
goto goto_9;
goto_9:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp8) {goto goto_2;}
tmpMeta[2] = stringAppend(_OMC_LIT334,omc_AbsynUtil_pathString(threadData, _p_class, _OMC_LIT0, 1, 0));
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT333);
_str = tmpMeta[3];
tmpMeta[0+0] = _p;
tmp1_c1 = _str;
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _inFullProgram;
tmp1_c1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getVariableBindingInComponentitem(threadData_t *threadData, modelica_metatype _inComponentItem)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponentItem;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,2) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_e = tmpMeta[5];
tmpMeta[0] = _e;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getComponentInClass(threadData_t *threadData, modelica_metatype _cls, modelica_string _componentName)
{
modelica_metatype _component = NULL;
modelica_metatype _body = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _elements = NULL;
modelica_metatype _components = NULL;
modelica_boolean _found;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_found = 0;
tmpMeta[0] = _cls;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
_body = tmpMeta[1];
{
modelica_metatype tmp3_1;
tmp3_1 = _body;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,5) == 0) goto tmp2_end;
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 4)));
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,5) == 0) goto tmp2_end;
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_body), 5)));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_parts = tmpMeta[0];
{
modelica_metatype _part;
for (tmpMeta[0] = _parts; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_part = MMC_CAR(tmpMeta[0]);
{
modelica_metatype tmp7_1;
tmp7_1 = _part;
{
int tmp7;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp7_1))) {
case 3: {
tmpMeta[1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 2)));
goto tmp6_done;
}
case 4: {
tmpMeta[1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_part), 2)));
goto tmp6_done;
}
default:
tmp6_default: OMC_LABEL_UNUSED; {
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = tmpMeta[2];
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
MMC_THROW_INTERNAL();
goto tmp6_done;
tmp6_done:;
}
}
_elements = tmpMeta[1];
{
modelica_metatype _e;
for (tmpMeta[1] = _elements; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_e = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp10_1;
tmp10_1 = _e;
{
volatile mmc_switch_type tmp10;
int tmp11;
tmp10 = 0;
for (; tmp10 < 2; tmp10++) {
switch (MMC_SWITCH_CAST(tmp10)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,0,1) == 0) goto tmp9_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp9_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,3) == 0) goto tmp9_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_components = tmpMeta[5];
tmpMeta[2] = _components;
goto tmp9_done;
}
case 1: {
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = tmpMeta[3];
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
goto_8:;
MMC_THROW_INTERNAL();
goto tmp9_done;
tmp9_done:;
}
}
_components = tmpMeta[2];
{
modelica_metatype _c;
for (tmpMeta[2] = _components; !listEmpty(tmpMeta[2]); tmpMeta[2]=MMC_CDR(tmpMeta[2]))
{
_c = MMC_CAR(tmpMeta[2]);
if((stringEqual(omc_AbsynUtil_componentName(threadData, _c), _componentName)))
{
_component = _c;
goto _return;
}
}
}
}
}
}
}
MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
return _component;
}
DLLExport
modelica_string omc_InteractiveUtil_getComponentBinding(threadData_t *threadData, modelica_metatype _path, modelica_string _parameterName, modelica_metatype _program)
{
modelica_string _bindingStr = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _component = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _program, 0);
_component = omc_InteractiveUtil_getComponentInClass(threadData, _cls, _parameterName);
_bindingStr = omc_Dump_printExpStr(threadData, omc_InteractiveUtil_getVariableBindingInComponentitem(threadData, _component));
goto tmp2_done;
}
case 1: {
_bindingStr = _OMC_LIT9;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _bindingStr;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getComponentModifierNames(threadData_t *threadData, modelica_metatype _path, modelica_string _inComponentName, modelica_metatype _inProgram3)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inProgram3;
{
modelica_metatype _cdef = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _compelts = NULL;
modelica_metatype _compelts_1 = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_p = tmp3_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_comps = omc_InteractiveUtil_getComponentsInClass(threadData, _cdef);
_compelts = omc_List_map(threadData, _comps, boxvar_InteractiveUtil_getComponentitemsInElement);
_compelts_1 = omc_List_flatten(threadData, _compelts);
tmpMeta[1] = omc_List_select1(threadData, _compelts_1, boxvar_InteractiveUtil_componentitemNamed, _inComponentName);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
if (optionNone(tmpMeta[5])) goto goto_1;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (!listEmpty(tmpMeta[3])) goto goto_1;
_mod = tmpMeta[7];
tmpMeta[0] = omc_InteractiveUtil_getModificationNames(threadData, _mod, 0);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outList = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getModificationValues(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath)
{
modelica_metatype _outModification = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inAbsynElementArgLst;
tmp3_2 = _inPath;
{
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _args = NULL;
modelica_string _name1 = NULL;
modelica_string _name2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
_p1 = tmpMeta[3];
_mod = tmpMeta[5];
_p2 = tmp3_2;
if (!omc_AbsynUtil_pathEqual(threadData, _p1, _p2)) goto tmp2_end;
tmpMeta[0] = _mod;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_1);
tmpMeta[4] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (optionNone(tmpMeta[7])) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 1));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
_name2 = tmpMeta[1];
_p2 = tmpMeta[2];
_name1 = tmpMeta[6];
_args = tmpMeta[9];
if (!(stringEqual(_name1, _name2))) goto tmp2_end;
_inAbsynElementArgLst = _args;
_inPath = _p2;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
_inAbsynElementArgLst = _rest;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outModification = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outModification;
}
DLLExport
modelica_string omc_InteractiveUtil_getComponentModifierValues(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inProgram4)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inProgram4;
{
modelica_metatype _p_class = NULL;
modelica_string _name = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _compelts = NULL;
modelica_metatype _compelts_1 = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _ident = NULL;
modelica_metatype _subident = NULL;
modelica_metatype _p = NULL;
modelica_metatype _elementArgLst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_class_ = tmp4_1;
_ident = tmp4_2;
_subident = tmp4_3;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta[0] = omc_AbsynUtil_crefToPath(threadData, _ident);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_comps = omc_InteractiveUtil_getComponentsInClass(threadData, _cdef);
_compelts = omc_List_map(threadData, _comps, boxvar_InteractiveUtil_getComponentitemsInElement);
_compelts_1 = omc_List_flatten(threadData, _compelts);
tmpMeta[0] = omc_List_select1(threadData, _compelts_1, boxvar_InteractiveUtil_componentitemNamed, _name);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
if (optionNone(tmpMeta[4])) goto goto_2;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (!listEmpty(tmpMeta[2])) goto goto_2;
_elementArgLst = tmpMeta[6];
_mod = omc_InteractiveUtil_getModificationValues(threadData, _elementArgLst, omc_AbsynUtil_crefToPath(threadData, _subident));
tmp1 = omc_Dump_unparseModificationStr(threadData, _mod);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getModificationValue(threadData_t *threadData, modelica_metatype _args, modelica_metatype _path)
{
modelica_metatype _value = NULL;
modelica_string _name = NULL;
modelica_metatype _rest_args = NULL;
modelica_metatype _arg = NULL;
modelica_boolean _found;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_rest_args = _args;
_found = 0;
while(1)
{
if(!(!_found)) break;
tmpMeta[0] = _rest_args;
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_arg = tmpMeta[1];
_rest_args = tmpMeta[2];
{
modelica_metatype tmp4_1;
tmp4_1 = _arg;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
if (!omc_AbsynUtil_pathEqual(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arg), 4))), _path)) goto tmp3_end;
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arg), 5)));
if (optionNone(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,2) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_value = tmpMeta[3];
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
if (!(stringEqual(_name, omc_AbsynUtil_pathFirstIdent(threadData, _path)))) goto tmp3_end;
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_arg), 5)));
if (optionNone(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_rest_args = tmpMeta[2];
_value = omc_InteractiveUtil_getModificationValue(threadData, _rest_args, omc_AbsynUtil_pathRest(threadData, _path));
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_found = tmp1;
}
_return: OMC_LABEL_UNUSED
return _value;
}
DLLExport
modelica_string omc_InteractiveUtil_getComponentModifierValue(threadData_t *threadData, modelica_metatype _classRef, modelica_metatype _varRef, modelica_metatype _subModRef, modelica_metatype _program)
{
modelica_string _valueStr = NULL;
modelica_metatype _cls_path = NULL;
modelica_string _name = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _args = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_cls_path = omc_AbsynUtil_crefToPath(threadData, _classRef);
_name = omc_AbsynUtil_crefIdent(threadData, _varRef);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cls_path, _program, 0);
tmpMeta[0] = omc_InteractiveUtil_getComponentInClass(threadData, _cls, _name);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
if (optionNone(tmpMeta[2])) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_args = tmpMeta[4];
_valueStr = omc_Dump_printExpStr(threadData, omc_InteractiveUtil_getModificationValue(threadData, _args, omc_AbsynUtil_crefToPath(threadData, _subModRef)));
goto tmp2_done;
}
case 1: {
_valueStr = _OMC_LIT9;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _valueStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_createNestedSubMod(threadData_t *threadData, modelica_metatype _inComponentName, modelica_metatype _inMod)
{
modelica_metatype _outSubMod = NULL;
modelica_metatype _e = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(omc_AbsynUtil_pathIsIdent(threadData, _inComponentName))
{
{
modelica_metatype tmp3_1;
tmp3_1 = _inMod;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,6) == 0) goto tmp2_end;
if (!listEmpty(tmpMeta[3])) goto tmp2_end;
_e = tmpMeta[2];
tmpMeta[0] = _e;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT65, _inComponentName, mmc_mk_some(_inMod), mmc_mk_none(), _OMC_LIT39);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSubMod = tmpMeta[0];
}
else
{
_outSubMod = omc_InteractiveUtil_createNestedSubMod(threadData, omc_AbsynUtil_pathRest(threadData, _inComponentName), _inMod);
tmpMeta[0] = mmc_mk_cons(_outSubMod, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, tmpMeta[0], _OMC_LIT35);
tmpMeta[2] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(0), _OMC_LIT65, omc_AbsynUtil_pathFirstPath(threadData, _inComponentName), mmc_mk_some(tmpMeta[1]), mmc_mk_none(), _OMC_LIT39);
_outSubMod = tmpMeta[2];
}
_return: OMC_LABEL_UNUSED
return _outSubMod;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_propagateMod2(threadData_t *threadData, modelica_metatype _inComponentName, modelica_metatype _inSubMods, modelica_metatype _inNewMod)
{
modelica_metatype _outSubMods = NULL;
modelica_metatype _submod = NULL;
modelica_metatype _rest_submods = NULL;
modelica_metatype _new_mod = NULL;
modelica_metatype _comp_name = NULL;
modelica_metatype _comp_rest = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outSubMods = tmpMeta[0];
_rest_submods = _inSubMods;
while(1)
{
if(!(!listEmpty(_rest_submods))) break;
tmpMeta[1] = _rest_submods;
if (listEmpty(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_submod = tmpMeta[2];
_rest_submods = tmpMeta[3];
_comp_name = omc_AbsynUtil_pathRest(threadData, _inComponentName);
_comp_rest = _comp_name;
while(1)
{
if(!1) break;
if(omc_AbsynUtil_pathEqual(threadData, _comp_name, omc_AbsynUtil_elementArgName(threadData, _submod)))
{
{
modelica_metatype tmp3_1;
tmp3_1 = _submod;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
if((!omc_AbsynUtil_pathIsIdent(threadData, _comp_name)))
{
_comp_name = omc_AbsynUtil_pathPrefix(threadData, _comp_name);
_comp_rest = omc_AbsynUtil_removePrefix(threadData, _comp_name, _comp_rest);
}
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_submod), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[5] = omc_InteractiveUtil_propagateMod(threadData, _comp_rest, _inNewMod, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_submod), 5))));
_submod = tmpMeta[1];
if(isSome((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_submod), 5)))))
{
tmpMeta[1] = mmc_mk_cons(_submod, _rest_submods);
_rest_submods = tmpMeta[1];
}
goto tmp2_done;
}
case 1: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_outSubMods = omc_List_append__reverse(threadData, _outSubMods, _rest_submods);
goto _return;
}
if(omc_AbsynUtil_pathIsIdent(threadData, _comp_name))
{
break;
}
else
{
_comp_name = omc_AbsynUtil_pathPrefix(threadData, _comp_name);
}
}
tmpMeta[1] = mmc_mk_cons(_submod, _outSubMods);
_outSubMods = tmpMeta[1];
}
if((!omc_AbsynUtil_isEmptyMod(threadData, _inNewMod)))
{
_submod = omc_InteractiveUtil_createNestedSubMod(threadData, omc_AbsynUtil_pathRest(threadData, _inComponentName), _inNewMod);
tmpMeta[1] = mmc_mk_cons(_submod, _outSubMods);
_outSubMods = listReverse(tmpMeta[1]);
}
else
{
_outSubMods = _inSubMods;
}
_return: OMC_LABEL_UNUSED
return _outSubMods;
}
static modelica_metatype closure13_AbsynUtil_elementArgEqualName(threadData_t *thData, modelica_metatype closure, modelica_metatype inArg1)
{
modelica_metatype inArg2 = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_elementArgEqualName(thData, inArg1, inArg2);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_mergeElementArgs(threadData_t *threadData, modelica_metatype _inOldArgs, modelica_metatype _inNewArgs)
{
modelica_metatype _outArgs = NULL;
modelica_boolean _found;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outArgs = _inOldArgs;
if(listEmpty(_inOldArgs))
{
_outArgs = _inNewArgs;
}
else
{
if(listEmpty(_inNewArgs))
{
_outArgs = _inOldArgs;
}
else
{
{
modelica_metatype _narg;
for (tmpMeta[0] = _inNewArgs; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_narg = MMC_CAR(tmpMeta[0]);
tmpMeta[1] = mmc_mk_box1(0, _narg);
_outArgs = omc_List_replaceOnTrue(threadData, _narg, _outArgs, (modelica_fnptr) mmc_mk_box2(0,closure13_AbsynUtil_elementArgEqualName,tmpMeta[1]) ,&_found);
if((!_found))
{
tmpMeta[1] = mmc_mk_cons(_narg, _outArgs);
_outArgs = tmpMeta[1];
}
}
}
}
}
_return: OMC_LABEL_UNUSED
return _outArgs;
}
DLLExport
modelica_metatype omc_InteractiveUtil_propagateMod(threadData_t *threadData, modelica_metatype _inComponentName, modelica_metatype _inNewMod, modelica_metatype _inOldMod)
{
modelica_metatype _outMod = NULL;
modelica_metatype _new_args = NULL;
modelica_metatype _old_args = NULL;
modelica_metatype _new_eqmod = NULL;
modelica_metatype _old_eqmod = NULL;
modelica_metatype _mod = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(isSome(_inOldMod))
{
tmpMeta[0] = _inOldMod;
if (optionNone(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_old_args = tmpMeta[2];
_old_eqmod = tmpMeta[3];
}
else
{
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_old_args = tmpMeta[0];
_old_eqmod = _OMC_LIT35;
}
if(omc_AbsynUtil_pathIsIdent(threadData, _inComponentName))
{
tmpMeta[0] = _inNewMod;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_new_args = tmpMeta[1];
_new_eqmod = tmpMeta[2];
if((valueEq(_new_eqmod, _OMC_LIT35) && (!listEmpty(_new_args))))
{
_new_eqmod = _old_eqmod;
}
_new_args = omc_InteractiveUtil_mergeElementArgs(threadData, _old_args, _new_args);
tmpMeta[0] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _new_args, _new_eqmod);
_mod = tmpMeta[0];
}
else
{
_new_args = omc_InteractiveUtil_propagateMod2(threadData, _inComponentName, _old_args, _inNewMod);
tmpMeta[0] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _new_args, _old_eqmod);
_mod = tmpMeta[0];
}
_outMod = (omc_AbsynUtil_isEmptyMod(threadData, _mod)?mmc_mk_none():mmc_mk_some(_mod));
_return: OMC_LABEL_UNUSED
return _outMod;
}
DLLExport
modelica_metatype omc_InteractiveUtil_setComponentSubmodifierInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inFound, modelica_metatype _inComponentName, modelica_metatype _inMod, modelica_boolean *out_outFound, modelica_boolean *out_outContinue)
{
modelica_metatype _outComponents = NULL;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _item = NULL;
modelica_metatype _rest_items = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _args_old = NULL;
modelica_metatype _args_new = NULL;
modelica_metatype _eqmod_old = NULL;
modelica_metatype _eqmod_new = NULL;
modelica_string _comp_id = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outComponents = tmpMeta[0];
_rest_items = _inComponents;
_comp_id = omc_AbsynUtil_crefFirstIdent(threadData, _inComponentName);
while(1)
{
if(!(!listEmpty(_rest_items))) break;
tmpMeta[1] = _rest_items;
if (listEmpty(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_item = tmpMeta[2];
_rest_items = tmpMeta[3];
if((stringEqual(omc_AbsynUtil_componentName(threadData, _item), _comp_id)))
{
{
modelica_metatype tmp3_1;
tmp3_1 = _item;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_comp = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_comp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[4] = omc_InteractiveUtil_propagateMod(threadData, omc_AbsynUtil_crefToPath(threadData, _inComponentName), _inMod, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 4))));
_comp = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_item), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = _comp;
_item = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
tmpMeta[1] = mmc_mk_cons(_item, _rest_items);
_outComponents = omc_List_append__reverse(threadData, _outComponents, tmpMeta[1]);
_outFound = 1;
_outContinue = 0;
goto _return;
}
tmpMeta[1] = mmc_mk_cons(_item, _outComponents);
_outComponents = tmpMeta[1];
}
_outComponents = _inComponents;
_outFound = 0;
_outContinue = 1;
_return: OMC_LABEL_UNUSED
if (out_outFound) { *out_outFound = _outFound; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outComponents;
}
modelica_metatype boxptr_InteractiveUtil_setComponentSubmodifierInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inFound, modelica_metatype _inComponentName, modelica_metatype _inMod, modelica_metatype *out_outFound, modelica_metatype *out_outContinue)
{
modelica_integer tmp1;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
tmp1 = mmc_unbox_integer(_inFound);
_outComponents = omc_InteractiveUtil_setComponentSubmodifierInCompitems(threadData, _inComponents, tmp1, _inComponentName, _inMod, &_outFound, &_outContinue);
if (out_outFound) { *out_outFound = mmc_mk_icon(_outFound); }
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outComponents;
}
static modelica_metatype closure14_InteractiveUtil_setComponentSubmodifierInCompitems(threadData_t *thData, modelica_metatype closure, modelica_metatype inComponents, modelica_metatype inFound, modelica_metatype tmp2, modelica_metatype tmp3)
{
modelica_metatype inComponentName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype inMod = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_setComponentSubmodifierInCompitems(thData, inComponents, inFound, inComponentName, inMod, tmp2, tmp3);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentSubmodifierInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _inMod)
{
modelica_metatype _outClass = NULL;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
tmpMeta[1] = mmc_mk_box2(0, _inComponentName, _inMod);
tmpMeta[2] = omc_AbsynUtil_traverseClassComponents(threadData, _inClass, (modelica_fnptr) mmc_mk_box2(0,closure14_InteractiveUtil_setComponentSubmodifierInCompitems,tmpMeta[1]), mmc_mk_boolean(0), &tmpMeta[0]);
_outClass = tmpMeta[2];
tmp1 = mmc_unbox_integer(tmpMeta[0]);
if (1 != tmp1) MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_setComponentModifier(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _inMod, modelica_metatype _inProgram, modelica_string *out_outResult)
{
modelica_metatype _outProgram = NULL;
modelica_string _outResult = NULL;
modelica_metatype _p_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cls = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_p_class = omc_AbsynUtil_crefToPath(threadData, _inClass);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _inProgram, 0);
_cls = omc_InteractiveUtil_setComponentSubmodifierInClass(threadData, _cls, _inComponentName, _inMod);
tmpMeta[0] = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[0], _within_);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[1], _inProgram, 0);
_outResult = _OMC_LIT67;
goto tmp2_done;
}
case 1: {
_outProgram = _inProgram;
_outResult = _OMC_LIT52;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outResult) { *out_outResult = _outResult; }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_stripModifiersKeepRedeclares(threadData_t *threadData, modelica_metatype _inMod)
{
modelica_metatype _outMod = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inMod;
{
modelica_metatype _m = NULL;
modelica_metatype _ea = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ea = tmpMeta[2];
{
modelica_metatype __omcQ_24tmpVar27;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar26;
int tmp6;
modelica_metatype _e_loopVar = 0;
modelica_boolean tmp7 = 0;
modelica_metatype _e;
_e_loopVar = _ea;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar27 = tmpMeta[2];
tmp5 = &__omcQ_24tmpVar27;
while(1) {
tmp6 = 1;
while (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
{
modelica_metatype tmp10_1;
tmp10_1 = _e;
{
volatile mmc_switch_type tmp10;
int tmp11;
tmp10 = 0;
for (; tmp10 < 2; tmp10++) {
switch (MMC_SWITCH_CAST(tmp10)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,1,6) == 0) goto tmp9_end;
tmp7 = 1;
goto tmp9_done;
}
case 1: {
tmp7 = 0;
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
goto_8:;
goto goto_1;
goto tmp9_done;
tmp9_done:;
}
}
if (tmp7) {
tmp6--;
break;
}
}
if (tmp6 == 0) {
__omcQ_24tmpVar26 = _e;
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar26,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar27;
}
_ea = tmpMeta[1];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _ea, _OMC_LIT35);
_m = tmpMeta[1];
tmpMeta[0] = mmc_mk_some(_m);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outMod = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outMod;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_clearComponentModifiersInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_boolean _inFound, modelica_string _inComponentName, modelica_boolean _keepRedeclares, modelica_boolean *out_outFound, modelica_boolean *out_outContinue)
{
modelica_metatype _outComponents = NULL;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _item = NULL;
modelica_metatype _rest_items = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _args_old = NULL;
modelica_metatype _args_new = NULL;
modelica_metatype _eqmod_old = NULL;
modelica_metatype _eqmod_new = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outComponents = tmpMeta[0];
_rest_items = _inComponents;
while(1)
{
if(!(!listEmpty(_rest_items))) break;
tmpMeta[1] = _rest_items;
if (listEmpty(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_item = tmpMeta[2];
_rest_items = tmpMeta[3];
if((stringEqual(omc_AbsynUtil_componentName(threadData, _item), _inComponentName)))
{
{
modelica_metatype tmp3_1;
tmp3_1 = _item;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_comp = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_comp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[4] = ((!_keepRedeclares)?mmc_mk_none():omc_InteractiveUtil_stripModifiersKeepRedeclares(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_comp), 4)))));
_comp = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_item), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = _comp;
_item = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
tmpMeta[1] = mmc_mk_cons(_item, _rest_items);
_outComponents = omc_List_append__reverse(threadData, _outComponents, tmpMeta[1]);
_outFound = 1;
_outContinue = 0;
goto _return;
}
tmpMeta[1] = mmc_mk_cons(_item, _outComponents);
_outComponents = tmpMeta[1];
}
_outComponents = _inComponents;
_outFound = 0;
_outContinue = 1;
_return: OMC_LABEL_UNUSED
if (out_outFound) { *out_outFound = _outFound; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_clearComponentModifiersInCompitems(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inFound, modelica_metatype _inComponentName, modelica_metatype _keepRedeclares, modelica_metatype *out_outFound, modelica_metatype *out_outContinue)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_boolean _outFound;
modelica_boolean _outContinue;
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
tmp1 = mmc_unbox_integer(_inFound);
tmp2 = mmc_unbox_integer(_keepRedeclares);
_outComponents = omc_InteractiveUtil_clearComponentModifiersInCompitems(threadData, _inComponents, tmp1, _inComponentName, tmp2, &_outFound, &_outContinue);
if (out_outFound) { *out_outFound = mmc_mk_icon(_outFound); }
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outComponents;
}
static modelica_metatype closure15_InteractiveUtil_clearComponentModifiersInCompitems(threadData_t *thData, modelica_metatype closure, modelica_metatype inComponents, modelica_metatype inFound, modelica_metatype tmp2, modelica_metatype tmp3)
{
modelica_string inComponentName = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype keepRedeclares = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InteractiveUtil_clearComponentModifiersInCompitems(thData, inComponents, inFound, inComponentName, keepRedeclares, tmp2, tmp3);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_clearComponentModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_string _inComponentName, modelica_boolean _keepRedeclares)
{
modelica_metatype _outClass = NULL;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
tmpMeta[1] = mmc_mk_box2(0, _inComponentName, mmc_mk_boolean(_keepRedeclares));
tmpMeta[2] = omc_AbsynUtil_traverseClassComponents(threadData, _inClass, (modelica_fnptr) mmc_mk_box2(0,closure15_InteractiveUtil_clearComponentModifiersInCompitems,tmpMeta[1]), mmc_mk_boolean(0), &tmpMeta[0]);
_outClass = tmpMeta[2];
tmp1 = mmc_unbox_integer(tmpMeta[0]);
if (1 != tmp1) MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_clearComponentModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inComponentName, modelica_metatype _keepRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outClass = omc_InteractiveUtil_clearComponentModifiersInClass(threadData, _inClass, _inComponentName, tmp1);
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_removeComponentModifiers(threadData_t *threadData, modelica_metatype _path, modelica_string _inComponentName, modelica_metatype _inProgram, modelica_boolean _keepRedeclares, modelica_boolean *out_outResult)
{
modelica_metatype _outProgram = NULL;
modelica_boolean _outResult;
modelica_metatype _within_ = NULL;
modelica_metatype _cls = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_within_ = omc_InteractiveUtil_buildWithin(threadData, _path);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _inProgram, 0);
_cls = omc_InteractiveUtil_clearComponentModifiersInClass(threadData, _cls, _inComponentName, _keepRedeclares);
tmpMeta[0] = mmc_mk_cons(_cls, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[0], _within_);
_outProgram = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[1], _inProgram, 0);
_outResult = 1;
goto tmp2_done;
}
case 1: {
_outProgram = _inProgram;
_outResult = 0;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outResult) { *out_outResult = _outResult; }
return _outProgram;
}
modelica_metatype boxptr_InteractiveUtil_removeComponentModifiers(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inComponentName, modelica_metatype _inProgram, modelica_metatype _keepRedeclares, modelica_metatype *out_outResult)
{
modelica_integer tmp1;
modelica_boolean _outResult;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outProgram = omc_InteractiveUtil_removeComponentModifiers(threadData, _path, _inComponentName, _inProgram, tmp1, &_outResult);
if (out_outResult) { *out_outResult = mmc_mk_icon(_outResult); }
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInElement(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inElement;
{
modelica_metatype _ext = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,3) == 0) goto tmp2_end;
_ext = tmpMeta[1];
tmpMeta[0] = _ext;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElementSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynElementItemLst;
{
modelica_metatype _el = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_el = tmpMeta[3];
_rest = tmpMeta[2];
_elt = omc_InteractiveUtil_getExtendsElementspecInElement(threadData, _el);
_res = omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData, _rest);
tmpMeta[1] = mmc_mk_cons(_elt, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData, _rest);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementSpecLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inAbsynClassPartLst;
{
modelica_metatype _lst1 = NULL;
modelica_metatype _lst2 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
tmp3 += 1;
_lst1 = omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData, _rest);
_lst2 = omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData, _elts);
tmpMeta[0] = listAppend(_lst1, _lst2);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_lst1 = omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData, _rest);
_lst2 = omc_InteractiveUtil_getExtendsElementspecInElementitems(threadData, _elts);
tmpMeta[0] = listAppend(_lst1, _lst2);
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData, _rest);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementSpecLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getExtendsElementspecInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outAbsynElementSpecLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _parts = NULL;
modelica_metatype _eltArg = NULL;
modelica_metatype _tp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
tmp3 += 2;
tmpMeta[0] = omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData, _parts);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
tmp3 += 1;
tmpMeta[0] = omc_InteractiveUtil_getExtendsElementspecInClassparts(threadData, _parts);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_tp = tmpMeta[3];
_eltArg = tmpMeta[4];
tmpMeta[2] = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _tp, _eltArg, mmc_mk_none());
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementSpecLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementSpecLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extendsName(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inElementSpec;
{
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
tmpMeta[0] = _path;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_extendsElementspecNamed(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inElementSpec;
tmp4_2 = _inPath;
{
modelica_metatype _extpath = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_extpath = tmpMeta[0];
_path = tmp4_2;
tmp1 = omc_AbsynUtil_pathEqual(threadData, _path, _extpath);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_extendsElementspecNamed(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_extendsElementspecNamed(threadData, _inElementSpec, _inPath);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_InteractiveUtil_hasModifiers(threadData_t *threadData, modelica_metatype _exts)
{
modelica_boolean _b;
modelica_metatype _ext = NULL;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = 0;
{
modelica_metatype _e;
for (tmpMeta[0] = _exts; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_e = MMC_CAR(tmpMeta[0]);
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
_ext = tmp4_1;
tmp1 = (!listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ext), 3)))));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
if(_b)
{
break;
}
}
}
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_InteractiveUtil_hasModifiers(threadData_t *threadData, modelica_metatype _exts)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_InteractiveUtil_hasModifiers(threadData, _exts);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_string omc_InteractiveUtil_getExtendsModifierNames(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_boolean _inBoolean, modelica_metatype _inProgram3)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inBoolean;
tmp4_4 = _inProgram3;
{
modelica_metatype _p_class = NULL;
modelica_metatype _name = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _exts = NULL;
modelica_metatype _exts_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _extmod = NULL;
modelica_metatype _res = NULL;
modelica_metatype _res1 = NULL;
modelica_string _res_1 = NULL;
modelica_boolean _b;
modelica_metatype _class_ = NULL;
modelica_metatype _inherit_name = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_class_ = tmp4_1;
_inherit_name = tmp4_2;
_b = tmp4_3;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_name = omc_AbsynUtil_crefToPath(threadData, _inherit_name);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_exts = omc_InteractiveUtil_getExtendsElementspecInClass(threadData, _cdef);
if(omc_InteractiveUtil_hasModifiers(threadData, _exts))
{
_env = omc_InteractiveUtil_getClassEnv(threadData, _p, _p_class);
_exts_1 = omc_List_map1(threadData, _exts, boxvar_InteractiveUtil_makeExtendsFullyQualified, _env);
tmpMeta[0] = omc_List_select1(threadData, _exts_1, boxvar_InteractiveUtil_extendsElementspecNamed, _name);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,3) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (!listEmpty(tmpMeta[2])) goto goto_2;
_extmod = tmpMeta[3];
_res = omc_InteractiveUtil_getModificationNames(threadData, _extmod, 0);
_res1 = (_b?omc_InteractiveUtil_insertQuotesToList(threadData, _res):_res);
_res_1 = stringDelimitList(_res1, _OMC_LIT27);
}
else
{
_res_1 = _OMC_LIT9;
}
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_res_1, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_getExtendsModifierNames(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inBoolean, modelica_metatype _inProgram3)
{
modelica_integer tmp1;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outString = omc_InteractiveUtil_getExtendsModifierNames(threadData, _inComponentRef1, _inComponentRef2, tmp1, _inProgram3);
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeExtendsFullyQualified(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inEnv)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inElementSpec;
tmp3_2 = _inEnv;
{
modelica_metatype _path_1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _earg = NULL;
modelica_metatype _env = NULL;
modelica_metatype _annOpt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_path = tmpMeta[1];
_earg = tmpMeta[2];
_annOpt = tmpMeta[3];
_env = tmp3_2;
omc_InteractiveUtil_mkFullyQual(threadData, _env, _path ,&_path_1);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _path_1, _earg, _annOpt);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElementSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
DLLExport
modelica_boolean omc_InteractiveUtil_isModifierfinal(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAbsynElementArgLst;
tmp4_2 = _inPath;
{
modelica_boolean _f;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _args = NULL;
modelica_string _name1 = NULL;
modelica_string _name2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
_f = tmp6;
_p1 = tmpMeta[3];
_p2 = tmp4_2;
if (!omc_AbsynUtil_pathEqual(threadData, _p1, _p2)) goto tmp3_end;
tmp1 = _f;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (optionNone(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 1));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
_name2 = tmpMeta[0];
_p2 = tmpMeta[1];
_name1 = tmpMeta[5];
_args = tmpMeta[8];
if (!(stringEqual(_name1, _name2))) goto tmp3_end;
_inAbsynElementArgLst = _args;
_inPath = _p2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_rest = tmpMeta[1];
_inAbsynElementArgLst = _rest;
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_InteractiveUtil_isModifierfinal(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inPath)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isModifierfinal(threadData, _inAbsynElementArgLst, _inPath);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_string omc_InteractiveUtil_isExtendsModifierFinal(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inProgram4)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inProgram4;
{
modelica_metatype _p_class = NULL;
modelica_metatype _name = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _env = NULL;
modelica_metatype _exts = NULL;
modelica_metatype _exts_1 = NULL;
modelica_metatype _extmod = NULL;
modelica_boolean _finalPrefix;
modelica_metatype _class_ = NULL;
modelica_metatype _inherit_name = NULL;
modelica_metatype _subident = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_class_ = tmp4_1;
_inherit_name = tmp4_2;
_subident = tmp4_3;
_p = tmp4_4;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_name = omc_AbsynUtil_crefToPath(threadData, _inherit_name);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_env = omc_InteractiveUtil_getClassEnv(threadData, _p, _p_class);
_exts = omc_InteractiveUtil_getExtendsElementspecInClass(threadData, _cdef);
_exts_1 = omc_List_map1(threadData, _exts, boxvar_InteractiveUtil_makeExtendsFullyQualified, _env);
tmpMeta[0] = omc_List_select1(threadData, _exts_1, boxvar_InteractiveUtil_extendsElementspecNamed, _name);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,3) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (!listEmpty(tmpMeta[2])) goto goto_2;
_extmod = tmpMeta[3];
_finalPrefix = omc_InteractiveUtil_isModifierfinal(threadData, _extmod, omc_AbsynUtil_crefToPath(threadData, _subident));
tmp1 = (_finalPrefix?_OMC_LIT23:_OMC_LIT24);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getExtendsModifierValue(threadData_t *threadData, modelica_metatype _classRef, modelica_metatype _extendsRef, modelica_metatype _varRef, modelica_metatype _program)
{
modelica_string _valueStr = NULL;
modelica_metatype _cls_path = NULL;
modelica_metatype _name = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _args = NULL;
modelica_metatype _env = NULL;
modelica_metatype _exts = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_cls_path = omc_AbsynUtil_crefToPath(threadData, _classRef);
_name = omc_AbsynUtil_crefToPath(threadData, _extendsRef);
_cls = omc_InteractiveUtil_getPathedClassInProgram(threadData, _cls_path, _program, 0);
_env = omc_InteractiveUtil_getClassEnv(threadData, _program, _cls_path);
{
modelica_metatype __omcQ_24tmpVar29;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar28;
int tmp6;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = omc_InteractiveUtil_getExtendsElementspecInClass(threadData, _cls);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar29 = tmpMeta[1];
tmp5 = &__omcQ_24tmpVar29;
while(1) {
tmp6 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp6--;
}
if (tmp6 == 0) {
__omcQ_24tmpVar28 = omc_InteractiveUtil_makeExtendsFullyQualified(threadData, _e, _env);
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar28,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[0] = __omcQ_24tmpVar29;
}
_exts = tmpMeta[0];
tmpMeta[0] = omc_List_select1(threadData, _exts, boxvar_InteractiveUtil_extendsElementspecNamed, _name);
if (listEmpty(tmpMeta[0])) goto goto_1;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,3) == 0) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (!listEmpty(tmpMeta[2])) goto goto_1;
_args = tmpMeta[3];
_valueStr = omc_Dump_printExpStr(threadData, omc_InteractiveUtil_getModificationValue(threadData, _args, omc_AbsynUtil_crefToPath(threadData, _varRef)));
goto tmp2_done;
}
case 1: {
_valueStr = _OMC_LIT9;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return _valueStr;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_metatype tmp3_4;volatile modelica_metatype tmp3_5;
tmp3_1 = _inElement;
tmp3_2 = _inPath;
tmp3_3 = _inComponentRef;
tmp3_4 = _inModification;
tmp3_5 = _inEnv;
{
modelica_boolean _f;
modelica_metatype _r = NULL;
modelica_metatype _i = NULL;
modelica_metatype _path = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _eargs = NULL;
modelica_metatype _eargs_1 = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_metatype _submod = NULL;
modelica_metatype _env = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _annOpt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_f = tmp5;
_r = tmpMeta[2];
_i = tmpMeta[3];
_path = tmpMeta[5];
_eargs = tmpMeta[6];
_annOpt = tmpMeta[7];
_info = tmpMeta[8];
_constr = tmpMeta[9];
_inherit = tmp3_2;
_submod = tmp3_3;
_mod = tmp3_4;
_env = tmp3_5;
omc_InteractiveUtil_mkFullyQual(threadData, _env, _path ,&_path_1);
tmp6 = omc_AbsynUtil_pathEqual(threadData, _inherit, _path_1);
if (1 != tmp6) goto goto_1;
_eargs_1 = omc_InteractiveUtil_setSubmodifierInElementargs(threadData, _eargs, omc_AbsynUtil_crefToPath(threadData, _submod), _mod);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _path, _eargs_1, _annOpt);
tmpMeta[2] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _i, tmpMeta[1], _info, _constr);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inElement;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElement = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_metatype tmp3_4;volatile modelica_metatype tmp3_5;
tmp3_1 = _inAbsynElementItemLst;
tmp3_2 = _inPath;
tmp3_3 = _inComponentRef;
tmp3_4 = _inModification;
tmp3_5 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elt_1 = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _submod = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elitem = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elt = tmpMeta[3];
_rest = tmpMeta[2];
_inherit = tmp3_2;
_submod = tmp3_3;
_mod = tmp3_4;
_env = tmp3_5;
_res = omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData, _rest, _inherit, _submod, _mod, _env);
_elt_1 = omc_InteractiveUtil_setExtendsSubmodifierInElement(threadData, _elt, _inherit, _submod, _mod, _env);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_elitem = tmpMeta[1];
_rest = tmpMeta[2];
_inherit = tmp3_2;
_submod = tmp3_3;
_mod = tmp3_4;
_env = tmp3_5;
_res = omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData, _rest, _inherit, _submod, _mod, _env);
tmpMeta[1] = mmc_mk_cons(_elitem, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_metatype tmp3_4;volatile modelica_metatype tmp3_5;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inPath;
tmp3_3 = _inComponentRef;
tmp3_4 = _inModification;
tmp3_5 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _submod = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_inherit = tmp3_2;
_submod = tmp3_3;
_mod = tmp3_4;
_env = tmp3_5;
tmp3 += 1;
_res = omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData, _rest, _inherit, _submod, _mod, _env);
_elts_1 = omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData, _elts, _inherit, _submod, _mod, _env);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_inherit = tmp3_2;
_submod = tmp3_3;
_mod = tmp3_4;
_env = tmp3_5;
_res = omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData, _rest, _inherit, _submod, _mod, _env);
_elts_1 = omc_InteractiveUtil_setExtendsSubmodifierInElementitems(threadData, _elts, _inherit, _submod, _mod, _env);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_elt = tmpMeta[1];
_rest = tmpMeta[2];
_inherit = tmp3_2;
_submod = tmp3_3;
_mod = tmp3_4;
_env = tmp3_5;
_res = omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData, _rest, _inherit, _submod, _mod, _env);
tmpMeta[1] = mmc_mk_cons(_elt, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setExtendsSubmodifierInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inComponentRef, modelica_metatype _inModification, modelica_metatype _inEnv)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;modelica_metatype tmp3_4;modelica_metatype tmp3_5;
tmp3_1 = _inClass;
tmp3_2 = _inPath;
tmp3_3 = _inComponentRef;
tmp3_4 = _inModification;
tmp3_5 = _inEnv;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _id = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _inherit_name = NULL;
modelica_metatype _submod = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _env = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_id = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_inherit_name = tmp3_2;
_submod = tmp3_3;
_mod = tmp3_4;
_env = tmp3_5;
_parts_1 = omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData, _parts, _inherit_name, _submod, _mod, _env);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_id = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_inherit_name = tmp3_2;
_submod = tmp3_3;
_mod = tmp3_4;
_env = tmp3_5;
_parts_1 = omc_InteractiveUtil_setExtendsSubmodifierInClassparts(threadData, _parts, _inherit_name, _submod, _mod, _env);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts_1, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_setExtendsModifierValue(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inModification4, modelica_metatype _inProgram5, modelica_string *out_outString)
{
modelica_metatype _outProgram = NULL;
modelica_string _outString = NULL;
modelica_string tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inComponentRef1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inModification4;
tmp4_5 = _inProgram5;
{
modelica_metatype _p_class = NULL;
modelica_metatype _inherit_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _inheritclass = NULL;
modelica_metatype _subident = NULL;
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_class_ = tmp4_1;
_inheritclass = tmp4_2;
_subident = tmp4_3;
_mod = tmp4_4;
_p = tmp4_5;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_inherit_class = omc_AbsynUtil_crefToPath(threadData, _inheritclass);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_env = omc_InteractiveUtil_getClassEnv(threadData, _p, _p_class);
_cdef_1 = omc_InteractiveUtil_setExtendsSubmodifierInClass(threadData, _cdef, _inherit_class, _subident, _mod, _env);
tmpMeta[2] = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmpMeta[0+0] = _newp;
tmp1_c1 = _OMC_LIT67;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inProgram5;
tmp1_c1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outString = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outString) { *out_outString = _outString; }
return _outProgram;
}
DLLExport
modelica_metatype omc_InteractiveUtil_mkFullyQual(threadData_t *threadData, modelica_metatype _env, modelica_metatype _ipath, modelica_metatype *out_opath)
{
modelica_metatype _ocache = NULL;
modelica_metatype _opath = NULL;
modelica_metatype _cpath = NULL;
modelica_metatype _program = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(omc_Flags_isSet(threadData, _OMC_LIT18))
{
_ocache = omc_InteractiveUtil_cacheFromGraphicEnvCache(threadData, _env);
_program = omc_InteractiveUtil_cacheProgramAndPath(threadData, _env ,&_cpath);
_opath = omc_NFApi_mkFullyQual(threadData, _program, _cpath, _ipath);
}
else
{
_ocache = omc_Inst_makeFullyQualified(threadData, omc_InteractiveUtil_cacheFromGraphicEnvCache(threadData, _env), omc_InteractiveUtil_envFromGraphicEnvCache(threadData, _env), _ipath ,&_opath);
}
_return: OMC_LABEL_UNUSED
if (out_opath) { *out_opath = _opath; }
return _ocache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inElement;
tmp3_2 = _inPath;
tmp3_3 = _inEnv;
{
modelica_boolean _f;
modelica_metatype _r = NULL;
modelica_metatype _i = NULL;
modelica_metatype _path = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _eargs = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_metatype _env = NULL;
modelica_metatype _annOpt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_boolean tmp6;
modelica_boolean tmp14;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_f = tmp5;
_r = tmpMeta[2];
_i = tmpMeta[3];
_path = tmpMeta[5];
_eargs = tmpMeta[6];
_annOpt = tmpMeta[7];
_info = tmpMeta[8];
_constr = tmpMeta[9];
_inherit = tmp3_2;
_env = tmp3_3;
omc_InteractiveUtil_mkFullyQual(threadData, _env, _path ,&_path_1);
tmp6 = omc_AbsynUtil_pathEqual(threadData, _inherit, _path_1);
if (1 != tmp6) goto goto_1;
tmp14 = (modelica_boolean)(!_keepRedeclares);
if(tmp14)
{
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = tmpMeta[1];
}
else
{
{
modelica_metatype __omcQ_24tmpVar31;
modelica_metatype* tmp7;
modelica_metatype __omcQ_24tmpVar30;
int tmp8;
modelica_metatype _e_loopVar = 0;
modelica_boolean tmp9 = 0;
modelica_metatype _e;
_e_loopVar = _eargs;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar31 = tmpMeta[3];
tmp7 = &__omcQ_24tmpVar31;
while(1) {
tmp8 = 1;
while (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
{
modelica_metatype tmp12_1;
tmp12_1 = _e;
{
volatile mmc_switch_type tmp12;
int tmp13;
tmp12 = 0;
for (; tmp12 < 2; tmp12++) {
switch (MMC_SWITCH_CAST(tmp12)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,1,6) == 0) goto tmp11_end;
tmp9 = 1;
goto tmp11_done;
}
case 1: {
tmp9 = 0;
goto tmp11_done;
}
}
goto tmp11_end;
tmp11_end: ;
}
goto goto_10;
goto_10:;
goto goto_1;
goto tmp11_done;
tmp11_done:;
}
}
if (tmp9) {
tmp8--;
break;
}
}
if (tmp8 == 0) {
__omcQ_24tmpVar30 = _e;
*tmp7 = mmc_mk_cons(__omcQ_24tmpVar30,0);
tmp7 = &MMC_CDR(*tmp7);
} else if (tmp8 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp7 = mmc_mk_nil();
tmpMeta[2] = __omcQ_24tmpVar31;
}
tmpMeta[4] = tmpMeta[2];
}
_eargs = tmpMeta[4];
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ElementSpec_EXTENDS__desc, _path, _eargs, _annOpt);
tmpMeta[2] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _i, tmpMeta[1], _info, _constr);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inElement;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElement = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInElement(threadData_t *threadData, modelica_metatype _inElement, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outElement = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outElement = omc_InteractiveUtil_removeExtendsModifiersInElement(threadData, _inElement, _inPath, _inEnv, tmp1);
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynElementItemLst;
tmp3_2 = _inPath;
tmp3_3 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elt_1 = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elitem = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elt = tmpMeta[3];
_rest = tmpMeta[2];
_inherit = tmp3_2;
_env = tmp3_3;
_res = omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData, _rest, _inherit, _env, _keepRedeclares);
_elt_1 = omc_InteractiveUtil_removeExtendsModifiersInElement(threadData, _elt, _inherit, _env, _keepRedeclares);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_elitem = tmpMeta[1];
_rest = tmpMeta[2];
_inherit = tmp3_2;
_env = tmp3_3;
_res = omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData, _rest, _inherit, _env, _keepRedeclares);
tmpMeta[1] = mmc_mk_cons(_elitem, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outAbsynElementItemLst = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outAbsynElementItemLst = omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData, _inAbsynElementItemLst, _inPath, _inEnv, tmp1);
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynClassPartLst;
tmp3_2 = _inPath;
tmp3_3 = _inEnv;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _inherit = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_inherit = tmp3_2;
_env = tmp3_3;
tmp3 += 1;
_res = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _rest, _inherit, _env, _keepRedeclares);
_elts_1 = omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData, _elts, _inherit, _env, _keepRedeclares);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_inherit = tmp3_2;
_env = tmp3_3;
_res = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _rest, _inherit, _env, _keepRedeclares);
_elts_1 = omc_InteractiveUtil_removeExtendsModifiersInElementitems(threadData, _elts, _inherit, _env, _keepRedeclares);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_elt = tmpMeta[1];
_rest = tmpMeta[2];
_inherit = tmp3_2;
_env = tmp3_3;
_res = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _rest, _inherit, _env, _keepRedeclares);
tmpMeta[1] = mmc_mk_cons(_elt, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outAbsynClassPartLst = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outAbsynClassPartLst = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _inAbsynClassPartLst, _inPath, _inEnv, tmp1);
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_removeExtendsModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_boolean _keepRedeclares)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inClass;
tmp3_2 = _inPath;
tmp3_3 = _inEnv;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _id = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _inherit_name = NULL;
modelica_metatype _env = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_id = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_inherit_name = tmp3_2;
_env = tmp3_3;
_parts_1 = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _parts, _inherit_name, _env, _keepRedeclares);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_id = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_inherit_name = tmp3_2;
_env = tmp3_3;
_parts_1 = omc_InteractiveUtil_removeExtendsModifiersInClassparts(threadData, _parts, _inherit_name, _env, _keepRedeclares);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _cmt, _parts_1, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiersInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inEnv, modelica_metatype _keepRedeclares)
{
modelica_integer tmp1;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outClass = omc_InteractiveUtil_removeExtendsModifiersInClass(threadData, _inClass, _inPath, _inEnv, tmp1);
return _outClass;
}
DLLExport
modelica_metatype omc_InteractiveUtil_removeExtendsModifiers(threadData_t *threadData, modelica_metatype _inClassPath, modelica_metatype _inBaseClassPath, modelica_metatype _inProgram, modelica_boolean _keepRedeclares, modelica_boolean *out_outResult)
{
modelica_metatype _outProgram = NULL;
modelica_boolean _outResult;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inClassPath;
tmp4_2 = _inBaseClassPath;
tmp4_3 = _inProgram;
{
modelica_metatype _p_class = NULL;
modelica_metatype _inherit_class = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_p_class = tmp4_1;
_inherit_class = tmp4_2;
_p = tmp4_3;
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_env = omc_InteractiveUtil_getClassEnv(threadData, _p, _p_class);
_cdef_1 = omc_InteractiveUtil_removeExtendsModifiersInClass(threadData, _cdef, _inherit_class, _env, _keepRedeclares);
tmpMeta[2] = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmpMeta[0+0] = _newp;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inProgram;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outProgram = tmpMeta[0+0];
_outResult = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outResult) { *out_outResult = _outResult; }
return _outProgram;
}
modelica_metatype boxptr_InteractiveUtil_removeExtendsModifiers(threadData_t *threadData, modelica_metatype _inClassPath, modelica_metatype _inBaseClassPath, modelica_metatype _inProgram, modelica_metatype _keepRedeclares, modelica_metatype *out_outResult)
{
modelica_integer tmp1;
modelica_boolean _outResult;
modelica_metatype _outProgram = NULL;
tmp1 = mmc_unbox_integer(_keepRedeclares);
_outProgram = omc_InteractiveUtil_removeExtendsModifiers(threadData, _inClassPath, _inBaseClassPath, _inProgram, tmp1, &_outResult);
if (out_outResult) { *out_outResult = mmc_mk_icon(_outResult); }
return _outProgram;
}
DLLExport
modelica_boolean omc_InteractiveUtil_setSourceFile(threadData_t *threadData, modelica_metatype _path, modelica_string _inString, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _success;
modelica_metatype _outProgram = NULL;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inString;
tmp4_2 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _within_ = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_string _filename = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_filename = tmp4_1;
_p = tmp4_2;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_within_ = omc_InteractiveUtil_buildWithin(threadData, _path);
_cdef_1 = omc_AbsynUtil_setClassFilename(threadData, _cdef, _filename);
tmpMeta[2] = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp1_c0 = 1;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
tmp1_c0 = 0;
tmpMeta[0+1] = _inProgram;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_success = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _success;
}
modelica_metatype boxptr_InteractiveUtil_setSourceFile(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inString, modelica_metatype _inProgram, modelica_metatype *out_outProgram)
{
modelica_boolean _success;
modelica_metatype out_success;
_success = omc_InteractiveUtil_setSourceFile(threadData, _path, _inString, _inProgram, out_outProgram);
out_success = mmc_mk_icon(_success);
return out_success;
}
DLLExport
modelica_string omc_InteractiveUtil_getSourceFile(threadData_t *threadData, modelica_metatype _p_class, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_p = tmp4_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
tmp1 = omc_AbsynUtil_classFilename(threadData, _cdef);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getElementsInfo(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _modelpath = NULL;
modelica_string _public_str = NULL;
modelica_string _protected_str = NULL;
modelica_string _elements_str = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _public_elementitem_list = NULL;
modelica_metatype _protected_elementitem_list = NULL;
modelica_metatype _model_ = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_model_ = tmp4_1;
_p = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
_public_elementitem_list = omc_InteractiveUtil_getPublicList(threadData, _parts);
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_public_str = omc_InteractiveUtil_constructElementsInfo(threadData, _OMC_LIT8, _public_elementitem_list);
_protected_str = omc_InteractiveUtil_constructElementsInfo(threadData, _OMC_LIT335, _protected_elementitem_list);
_elements_str = omc_InteractiveUtil_appendNonEmptyStrings(threadData, _public_str, _protected_str, _OMC_LIT27);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT336, mmc_mk_cons(_elements_str, mmc_mk_cons(_OMC_LIT337, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
_model_ = tmp4_1;
_p = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
_public_elementitem_list = omc_InteractiveUtil_getPublicList(threadData, _parts);
_protected_elementitem_list = omc_InteractiveUtil_getProtectedList(threadData, _parts);
_public_str = omc_InteractiveUtil_constructElementsInfo(threadData, _OMC_LIT8, _public_elementitem_list);
_protected_str = omc_InteractiveUtil_constructElementsInfo(threadData, _OMC_LIT335, _protected_elementitem_list);
_elements_str = omc_InteractiveUtil_appendNonEmptyStrings(threadData, _public_str, _protected_str, _OMC_LIT27);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT336, mmc_mk_cons(_elements_str, mmc_mk_cons(_OMC_LIT337, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 2: {
_model_ = tmp4_1;
_p = tmp4_2;
_modelpath = omc_AbsynUtil_crefToPath(threadData, _model_);
tmpMeta[0] = omc_InteractiveUtil_getPathedClassInProgram(threadData, _modelpath, _p, 0);
tmp1 = _OMC_LIT338;
goto tmp3_done;
}
case 3: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_appendNonEmptyStrings(threadData_t *threadData, modelica_string _inString1, modelica_string _inString2, modelica_string _inString3)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp4_1;modelica_string tmp4_2;modelica_string tmp4_3;
tmp4_1 = _inString1;
tmp4_2 = _inString2;
tmp4_3 = _inString3;
{
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_string _delimiter = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (0 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
if (0 != MMC_STRLEN(tmp4_2) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp4_2)) != 0) goto tmp3_end;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 1: {
if (0 != MMC_STRLEN(tmp4_2) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp4_2)) != 0) goto tmp3_end;
_s1 = tmp4_1;
tmp1 = _s1;
goto tmp3_done;
}
case 2: {
if (0 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
_s2 = tmp4_2;
tmp1 = _s2;
goto tmp3_done;
}
case 3: {
_s1 = tmp4_1;
_s2 = tmp4_2;
_delimiter = tmp4_3;
tmpMeta[0] = mmc_mk_cons(_s1, mmc_mk_cons(_delimiter, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_constructElementsInfo(threadData_t *threadData, modelica_string _inString, modelica_metatype _inAbsynElementItemLst)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inString;
tmp4_2 = _inAbsynElementItemLst;
{
modelica_string _visibility_str = NULL;
modelica_string _s1 = NULL;
modelica_string _element_str = NULL;
modelica_string _s2 = NULL;
modelica_metatype _current = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_2)) goto tmp3_end;
tmp4 += 2;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_2);
tmpMeta[1] = MMC_CDR(tmp4_2);
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
_current = tmpMeta[0];
_visibility_str = tmp4_1;
_s1 = omc_InteractiveUtil_getElementItemInfo(threadData, _current);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT339, mmc_mk_cons(_visibility_str, mmc_mk_cons(_OMC_LIT27, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT340, MMC_REFSTRUCTLIT(mmc_nil))))));
_element_str = stringAppendList(tmpMeta[0]);
tmpMeta[0] = stringAppend(_element_str,_OMC_LIT136);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_2);
tmpMeta[1] = MMC_CDR(tmp4_2);
_current = tmpMeta[0];
_rest = tmpMeta[1];
_visibility_str = tmp4_1;
_s1 = omc_InteractiveUtil_getElementItemInfo(threadData, _current);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT339, mmc_mk_cons(_visibility_str, mmc_mk_cons(_OMC_LIT27, mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT340, MMC_REFSTRUCTLIT(mmc_nil))))));
_element_str = stringAppendList(tmpMeta[0]);
_s2 = omc_InteractiveUtil_constructElementsInfo(threadData, _visibility_str, _rest);
tmpMeta[0] = mmc_mk_cons(_element_str, mmc_mk_cons(_OMC_LIT341, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementItemInfo(threadData_t *threadData, modelica_metatype _inElementItem)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[15] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inElementItem;
{
modelica_string _finalPrefix = NULL;
modelica_string _repl = NULL;
modelica_string _inout_str = NULL;
modelica_string _str_restriction = NULL;
modelica_string _element_str = NULL;
modelica_string _sline_str = NULL;
modelica_string _scol_str = NULL;
modelica_string _eline_str = NULL;
modelica_string _ecol_str = NULL;
modelica_string _readonly_str = NULL;
modelica_string _id = NULL;
modelica_string _file = NULL;
modelica_boolean _r_1;
modelica_boolean _f;
modelica_boolean _isReadOnly;
modelica_metatype _r = NULL;
modelica_metatype _inout = NULL;
modelica_metatype _restr = NULL;
modelica_integer _sline;
modelica_integer _scol;
modelica_integer _eline;
modelica_integer _ecol;
modelica_metatype _elementSpec = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
modelica_integer tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,2) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 8));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 3));
tmp7 = mmc_unbox_integer(tmpMeta[10]);
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 4));
tmp8 = mmc_unbox_integer(tmpMeta[11]);
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 5));
tmp9 = mmc_unbox_integer(tmpMeta[12]);
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 6));
tmp10 = mmc_unbox_integer(tmpMeta[13]);
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 7));
tmp11 = mmc_unbox_integer(tmpMeta[14]);
_f = tmp6;
_r = tmpMeta[2];
_inout = tmpMeta[3];
_id = tmpMeta[6];
_restr = tmpMeta[7];
_file = tmpMeta[9];
_isReadOnly = tmp7;
_sline = tmp8;
_scol = tmp9;
_eline = tmp10;
_ecol = tmp11;
_finalPrefix = (_f?_OMC_LIT23:_OMC_LIT24);
_r_1 = omc_InteractiveUtil_keywordReplaceable(threadData, _r);
_repl = (_r_1?_OMC_LIT23:_OMC_LIT24);
_inout_str = omc_InteractiveUtil_innerOuterStr(threadData, _inout);
_str_restriction = omc_AbsynUtil_restrString(threadData, _restr);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT342, mmc_mk_cons(_id, mmc_mk_cons(_OMC_LIT343, mmc_mk_cons(_str_restriction, MMC_REFSTRUCTLIT(mmc_nil)))));
_element_str = stringAppendList(tmpMeta[0]);
_file = omc_Testsuite_friendly(threadData, _file);
_sline_str = intString(_sline);
_scol_str = intString(_scol);
_eline_str = intString(_eline);
_ecol_str = intString(_ecol);
_readonly_str = (_isReadOnly?_OMC_LIT344:_OMC_LIT345);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT346, mmc_mk_cons(_file, mmc_mk_cons(_OMC_LIT347, mmc_mk_cons(_readonly_str, mmc_mk_cons(_OMC_LIT348, mmc_mk_cons(_sline_str, mmc_mk_cons(_OMC_LIT349, mmc_mk_cons(_scol_str, mmc_mk_cons(_OMC_LIT350, mmc_mk_cons(_eline_str, mmc_mk_cons(_OMC_LIT351, mmc_mk_cons(_ecol_str, mmc_mk_cons(_OMC_LIT352, mmc_mk_cons(_finalPrefix, mmc_mk_cons(_OMC_LIT353, mmc_mk_cons(_repl, mmc_mk_cons(_OMC_LIT354, mmc_mk_cons(_inout_str, mmc_mk_cons(_OMC_LIT27, mmc_mk_cons(_element_str, MMC_REFSTRUCTLIT(mmc_nil)))))))))))))))))))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
modelica_integer tmp12;
modelica_integer tmp13;
modelica_integer tmp14;
modelica_integer tmp15;
modelica_integer tmp16;
modelica_integer tmp17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp12 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmp13 = mmc_unbox_integer(tmpMeta[7]);
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp14 = mmc_unbox_integer(tmpMeta[8]);
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmp15 = mmc_unbox_integer(tmpMeta[9]);
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmp16 = mmc_unbox_integer(tmpMeta[10]);
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 7));
tmp17 = mmc_unbox_integer(tmpMeta[11]);
_f = tmp12;
_r = tmpMeta[2];
_inout = tmpMeta[3];
_elementSpec = tmpMeta[4];
_file = tmpMeta[6];
_isReadOnly = tmp13;
_sline = tmp14;
_scol = tmp15;
_eline = tmp16;
_ecol = tmp17;
tmp4 += 1;
_finalPrefix = (_f?_OMC_LIT23:_OMC_LIT24);
_r_1 = omc_InteractiveUtil_keywordReplaceable(threadData, _r);
_repl = (_r_1?_OMC_LIT23:_OMC_LIT24);
_inout_str = omc_InteractiveUtil_innerOuterStr(threadData, _inout);
_element_str = omc_InteractiveUtil_getElementType(threadData, _elementSpec);
_sline_str = intString(_sline);
_scol_str = intString(_scol);
_eline_str = intString(_eline);
_ecol_str = intString(_ecol);
_readonly_str = (_isReadOnly?_OMC_LIT344:_OMC_LIT345);
_file = omc_Testsuite_friendly(threadData, _file);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT346, mmc_mk_cons(_file, mmc_mk_cons(_OMC_LIT347, mmc_mk_cons(_readonly_str, mmc_mk_cons(_OMC_LIT348, mmc_mk_cons(_sline_str, mmc_mk_cons(_OMC_LIT349, mmc_mk_cons(_scol_str, mmc_mk_cons(_OMC_LIT350, mmc_mk_cons(_eline_str, mmc_mk_cons(_OMC_LIT351, mmc_mk_cons(_ecol_str, mmc_mk_cons(_OMC_LIT352, mmc_mk_cons(_finalPrefix, mmc_mk_cons(_OMC_LIT353, mmc_mk_cons(_repl, mmc_mk_cons(_OMC_LIT354, mmc_mk_cons(_inout_str, mmc_mk_cons(_OMC_LIT27, mmc_mk_cons(_element_str, MMC_REFSTRUCTLIT(mmc_nil)))))))))))))))))))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp1 = _OMC_LIT355;
goto tmp3_done;
}
case 3: {
tmp1 = _OMC_LIT356;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getElementType(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementSpec;
{
modelica_string _path_str = NULL;
modelica_string _import_str = NULL;
modelica_string _typename = NULL;
modelica_string _flowPrefixstr = NULL;
modelica_string _streamPrefixstr = NULL;
modelica_string _variability_str = NULL;
modelica_string _dir_str = NULL;
modelica_string _names_str = NULL;
modelica_metatype _path = NULL;
modelica_metatype _typeSpec = NULL;
modelica_metatype _import_ = NULL;
modelica_metatype _names = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _lst = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmpMeta[0] = stringAppend(_OMC_LIT357,_path_str);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_import_ = tmpMeta[0];
_import_str = omc_InteractiveUtil_getImportString(threadData, _import_);
tmpMeta[0] = stringAppend(_OMC_LIT358,_import_str);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_attr = tmpMeta[0];
_typeSpec = tmpMeta[1];
_lst = tmpMeta[2];
_typename = omc_Dump_unparseTypeSpec(threadData, _typeSpec);
_names = omc_InteractiveUtil_getComponentItemsNameAndComment(threadData, _lst, 0);
_flowPrefixstr = omc_InteractiveUtil_attrFlowStr(threadData, _attr);
_streamPrefixstr = omc_InteractiveUtil_attrStreamStr(threadData, _attr);
_variability_str = omc_InteractiveUtil_attrVariabilityStr(threadData, _attr);
_dir_str = omc_InteractiveUtil_attrDirectionStr(threadData, _attr);
_names_str = stringDelimitList(_names, _OMC_LIT27);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT359, mmc_mk_cons(_typename, mmc_mk_cons(_OMC_LIT360, mmc_mk_cons(_names_str, mmc_mk_cons(_OMC_LIT361, mmc_mk_cons(_flowPrefixstr, mmc_mk_cons(_OMC_LIT362, mmc_mk_cons(_streamPrefixstr, mmc_mk_cons(_OMC_LIT363, mmc_mk_cons(_variability_str, mmc_mk_cons(_OMC_LIT364, mmc_mk_cons(_dir_str, MMC_REFSTRUCTLIT(mmc_nil)))))))))))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_getImportString(threadData_t *threadData, modelica_metatype _inImport)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inImport;
{
modelica_string _path_str = NULL;
modelica_string _id = NULL;
modelica_metatype _path = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta[0];
_path = tmpMeta[1];
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT365, mmc_mk_cons(_id, mmc_mk_cons(_OMC_LIT366, mmc_mk_cons(_path_str, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmpMeta[0] = stringAppend(_OMC_LIT367,_path_str);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmpMeta[0] = stringAppend(_OMC_LIT368,_path_str);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_getCrefInfo(threadData_t *threadData, modelica_metatype _inComponentRef, modelica_metatype _inProgram)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponentRef;
tmp4_2 = _inProgram;
{
modelica_metatype _p_class = NULL;
modelica_metatype _cdef = NULL;
modelica_string _filename = NULL;
modelica_string _str_sline = NULL;
modelica_string _str_scol = NULL;
modelica_string _str_eline = NULL;
modelica_string _str_ecol = NULL;
modelica_string _str_readonly = NULL;
modelica_boolean _isReadOnly;
modelica_integer _sline;
modelica_integer _scol;
modelica_integer _eline;
modelica_integer _ecol;
modelica_metatype _class_ = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
_class_ = tmp4_1;
_p = tmp4_2;
_p_class = omc_AbsynUtil_crefToPath(threadData, _class_);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
tmpMeta[0] = _cdef;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 8));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmp8 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
tmp9 = mmc_unbox_integer(tmpMeta[6]);
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
tmp10 = mmc_unbox_integer(tmpMeta[7]);
_filename = tmpMeta[2];
_isReadOnly = tmp6;
_sline = tmp7;
_scol = tmp8;
_eline = tmp9;
_ecol = tmp10;
_filename = omc_Testsuite_friendly(threadData, _filename);
_str_sline = intString(_sline);
_str_scol = intString(_scol);
_str_eline = intString(_eline);
_str_ecol = intString(_ecol);
_str_readonly = (_isReadOnly?_OMC_LIT344:_OMC_LIT345);
tmpMeta[0] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_filename, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_str_readonly, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_str_sline, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_str_scol, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_str_eline, mmc_mk_cons(_OMC_LIT10, mmc_mk_cons(_str_ecol, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))))))))))))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementIsField(threadData_t *threadData, modelica_string _inString)
{
modelica_metatype _outIsField = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;
tmp3_1 = _inString;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (0 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT287;
goto tmp2_done;
}
case 1: {
if (8 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT405), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT287;
goto tmp2_done;
}
case 2: {
if (5 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT406), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
if((!(omc_Flags_getConfigEnum(threadData, _OMC_LIT403) == ((modelica_integer) 5))))
{
omc_Error_addMessage(threadData, _OMC_LIT371, _OMC_LIT373);
goto goto_1;
}
tmpMeta[0] = _OMC_LIT404;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outIsField = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outIsField;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementCausality(threadData_t *threadData, modelica_string _inString)
{
modelica_metatype _outDirection = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;
tmp3_1 = _inString;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (0 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT286;
goto tmp2_done;
}
case 1: {
if (5 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT409), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT407;
goto tmp2_done;
}
case 2: {
if (6 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT410), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT408;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outDirection = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outDirection;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementVariability(threadData_t *threadData, modelica_string _inString)
{
modelica_metatype _outVariability = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;
tmp3_1 = _inString;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (0 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT295;
goto tmp2_done;
}
case 1: {
if (8 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT292), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT293;
goto tmp2_done;
}
case 2: {
if (9 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT283), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT285;
goto tmp2_done;
}
case 3: {
if (8 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT289), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT290;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outVariability = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outVariability;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementParallelism(threadData_t *threadData, modelica_string _inString)
{
modelica_metatype _outParallelism = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;
tmp3_1 = _inString;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (0 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT9), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT284;
goto tmp2_done;
}
case 1: {
if (9 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT413), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT411;
goto tmp2_done;
}
case 2: {
if (8 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT414), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT412;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outParallelism = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outParallelism;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setElementAttributes(threadData_t *threadData, modelica_metatype _inElementAttributes1, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_string _inString2, modelica_string _inString3, modelica_string _inString4, modelica_string _inString5)
{
modelica_metatype _outElementAttributes = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_boolean tmp3_2;modelica_boolean tmp3_3;modelica_string tmp3_4;modelica_string tmp3_5;modelica_string tmp3_6;modelica_string tmp3_7;
tmp3_1 = _inElementAttributes1;
tmp3_2 = _inFlow;
tmp3_3 = _inStream;
tmp3_4 = _inString2;
tmp3_5 = _inString3;
tmp3_6 = _inString4;
tmp3_7 = _inString5;
{
modelica_metatype _pa_1 = NULL;
modelica_metatype _va_1 = NULL;
modelica_metatype _cau_1 = NULL;
modelica_metatype _fi_1 = NULL;
modelica_metatype _dim = NULL;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_string _va = NULL;
modelica_string _cau = NULL;
modelica_string _prl = NULL;
modelica_string _fi = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_dim = tmpMeta[1];
_flowPrefix = tmp3_2;
_streamPrefix = tmp3_3;
_prl = tmp3_4;
_va = tmp3_5;
_cau = tmp3_6;
_fi = tmp3_7;
_pa_1 = omc_InteractiveUtil_setElementParallelism(threadData, _prl);
_va_1 = omc_InteractiveUtil_setElementVariability(threadData, _va);
_cau_1 = omc_InteractiveUtil_setElementCausality(threadData, _cau);
_fi_1 = omc_InteractiveUtil_setElementIsField(threadData, _fi);
tmpMeta[1] = mmc_mk_box8(3, &Absyn_ElementAttributes_ATTR__desc, mmc_mk_boolean(_flowPrefix), mmc_mk_boolean(_streamPrefix), _pa_1, _va_1, _cau_1, _fi_1, _dim);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElementAttributes = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementAttributes;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setElementAttributes(threadData_t *threadData, modelica_metatype _inElementAttributes1, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inString2, modelica_metatype _inString3, modelica_metatype _inString4, modelica_metatype _inString5)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outElementAttributes = NULL;
tmp1 = mmc_unbox_integer(_inFlow);
tmp2 = mmc_unbox_integer(_inStream);
_outElementAttributes = omc_InteractiveUtil_setElementAttributes(threadData, _inElementAttributes1, tmp1, tmp2, _inString2, _inString3, _inString4, _inString5);
return _outElementAttributes;
}
PROTECTED_FUNCTION_STATIC void omc_InteractiveUtil_itemsContainCompname(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst, modelica_string _inIdent)
{
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_string tmp3_2;
tmp3_1 = _inAbsynComponentItemLst;
tmp3_2 = _inIdent;
{
modelica_string _cr1 = NULL;
modelica_string _cr2 = NULL;
modelica_string _cr = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = MMC_CAR(tmp3_1);
tmpMeta[1] = MMC_CDR(tmp3_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_cr1 = tmpMeta[3];
_cr2 = tmp3_2;
tmp5 = (stringEqual(_cr1, _cr2));
if (1 != tmp5) goto goto_1;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = MMC_CAR(tmp3_1);
tmpMeta[1] = MMC_CDR(tmp3_1);
_rest = tmpMeta[1];
_cr = tmp3_2;
omc_InteractiveUtil_itemsContainCompname(threadData, _rest, _cr);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_string _inIdent2, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_string _inString3, modelica_string _inString4, modelica_string _inString5, modelica_string _inString6)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_string tmp3_2;volatile modelica_boolean tmp3_3;volatile modelica_boolean tmp3_4;volatile modelica_string tmp3_5;volatile modelica_string tmp3_6;volatile modelica_string tmp3_7;volatile modelica_string tmp3_8;
tmp3_1 = _inElementSpec1;
tmp3_2 = _inIdent2;
tmp3_3 = _inFlow;
tmp3_4 = _inStream;
tmp3_5 = _inString3;
tmp3_6 = _inString4;
tmp3_7 = _inString5;
tmp3_8 = _inString6;
{
modelica_metatype _attr_1 = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _path = NULL;
modelica_metatype _items = NULL;
modelica_string _cr = NULL;
modelica_string _va = NULL;
modelica_string _cau = NULL;
modelica_string _prl = NULL;
modelica_string _isf = NULL;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_attr = tmpMeta[1];
_path = tmpMeta[2];
_items = tmpMeta[3];
_cr = tmp3_2;
_flowPrefix = tmp3_3;
_streamPrefix = tmp3_4;
_prl = tmp3_5;
_va = tmp3_6;
_cau = tmp3_7;
_isf = tmp3_8;
omc_InteractiveUtil_itemsContainCompname(threadData, _items, _cr);
_attr_1 = omc_InteractiveUtil_setElementAttributes(threadData, _attr, _flowPrefix, _streamPrefix, _prl, _va, _cau, _isf);
tmpMeta[1] = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr_1, _path, _items);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inElementSpec1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElementSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElementspec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inIdent2, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inString3, modelica_metatype _inString4, modelica_metatype _inString5, modelica_metatype _inString6)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outElementSpec = NULL;
tmp1 = mmc_unbox_integer(_inFlow);
tmp2 = mmc_unbox_integer(_inStream);
_outElementSpec = omc_InteractiveUtil_setComponentPropertiesInElementspec(threadData, _inElementSpec1, _inIdent2, tmp1, tmp2, _inString3, _inString4, _inString5, _inString6);
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setInnerOuterAttributes(threadData_t *threadData, modelica_metatype _inBooleanLst)
{
modelica_metatype _outInnerOuter = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inBooleanLst;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmp5 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp5) goto tmp2_end;
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
tmp6 = mmc_unbox_integer(tmpMeta[3]);
if (0 != tmp6) goto tmp2_end;
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
tmpMeta[0] = _OMC_LIT181;
goto tmp2_done;
}
case 1: {
modelica_integer tmp7;
modelica_integer tmp8;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmp7 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp7) goto tmp2_end;
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
tmp8 = mmc_unbox_integer(tmpMeta[3]);
if (0 != tmp8) goto tmp2_end;
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
tmpMeta[0] = _OMC_LIT302;
goto tmp2_done;
}
case 2: {
modelica_integer tmp9;
modelica_integer tmp10;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmp9 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp9) goto tmp2_end;
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
tmp10 = mmc_unbox_integer(tmpMeta[3]);
if (1 != tmp10) goto tmp2_end;
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
tmpMeta[0] = _OMC_LIT303;
goto tmp2_done;
}
case 3: {
modelica_integer tmp11;
modelica_integer tmp12;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmp11 = mmc_unbox_integer(tmpMeta[1]);
if (1 != tmp11) goto tmp2_end;
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
tmp12 = mmc_unbox_integer(tmpMeta[3]);
if (1 != tmp12) goto tmp2_end;
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
tmpMeta[0] = _OMC_LIT415;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outInnerOuter = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outInnerOuter;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setReplaceableKeywordAttributes(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption, modelica_boolean _inBoolean)
{
modelica_metatype _outAbsynRedeclareKeywordsOption = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_boolean tmp3_2;
tmp3_1 = _inAbsynRedeclareKeywordsOption;
tmp3_2 = _inBoolean;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 8; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (0 != tmp3_2) goto tmp2_end;
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
case 1: {
if (0 != tmp3_2) goto tmp2_end;
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,0) == 0) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
case 2: {
if (0 != tmp3_2) goto tmp2_end;
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT417;
goto tmp2_done;
}
case 3: {
if (0 != tmp3_2) goto tmp2_end;
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT417;
goto tmp2_done;
}
case 4: {
if (1 != tmp3_2) goto tmp2_end;
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _OMC_LIT299;
goto tmp2_done;
}
case 5: {
if (1 != tmp3_2) goto tmp2_end;
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT419;
goto tmp2_done;
}
case 6: {
if (1 != tmp3_2) goto tmp2_end;
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT299;
goto tmp2_done;
}
case 7: {
if (1 != tmp3_2) goto tmp2_end;
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,0) == 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT419;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynRedeclareKeywordsOption = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynRedeclareKeywordsOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setReplaceableKeywordAttributes(threadData_t *threadData, modelica_metatype _inAbsynRedeclareKeywordsOption, modelica_metatype _inBoolean)
{
modelica_integer tmp1;
modelica_metatype _outAbsynRedeclareKeywordsOption = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outAbsynRedeclareKeywordsOption = omc_InteractiveUtil_setReplaceableKeywordAttributes(threadData, _inAbsynRedeclareKeywordsOption, tmp1);
return _outAbsynRedeclareKeywordsOption;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElement(threadData_t *threadData, modelica_metatype _inElement1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inReplaceable, modelica_string _inString5, modelica_string _inString6, modelica_metatype _inBooleanLst7, modelica_string _inString8, modelica_string _inString9)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_string tmp3_2;volatile modelica_boolean tmp3_3;volatile modelica_boolean tmp3_4;volatile modelica_boolean tmp3_5;volatile modelica_boolean tmp3_6;volatile modelica_string tmp3_7;volatile modelica_string tmp3_8;volatile modelica_metatype tmp3_9;volatile modelica_string tmp3_10;volatile modelica_string tmp3_11;
tmp3_1 = _inElement1;
tmp3_2 = _inIdent2;
tmp3_3 = _inFinal;
tmp3_4 = _inFlow;
tmp3_5 = _inStream;
tmp3_6 = _inReplaceable;
tmp3_7 = _inString5;
tmp3_8 = _inString6;
tmp3_9 = _inBooleanLst7;
tmp3_10 = _inString8;
tmp3_11 = _inString9;
{
modelica_metatype _redeclkw_1 = NULL;
modelica_metatype _redeclkw = NULL;
modelica_metatype _inout_1 = NULL;
modelica_metatype _spec_1 = NULL;
modelica_metatype _spec = NULL;
modelica_string _cr = NULL;
modelica_string _va = NULL;
modelica_string _cau = NULL;
modelica_string _prl = NULL;
modelica_string _isf = NULL;
modelica_metatype _ellst = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_boolean _finalPrefix;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_boolean _repl;
modelica_metatype _dr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_redeclkw = tmpMeta[1];
_spec = tmpMeta[2];
_ellst = tmpMeta[3];
_info = tmpMeta[4];
_constr = tmpMeta[5];
_cr = tmp3_2;
_finalPrefix = tmp3_3;
_flowPrefix = tmp3_4;
_streamPrefix = tmp3_5;
_repl = tmp3_6;
_prl = tmp3_7;
_va = tmp3_8;
_dr = tmp3_9;
_cau = tmp3_10;
_isf = tmp3_11;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _cr, tmpMeta[1]);
omc_InteractiveUtil_getCompitemNamed(threadData, tmpMeta[2], _ellst);
_redeclkw_1 = omc_InteractiveUtil_setReplaceableKeywordAttributes(threadData, _redeclkw, _repl);
_inout_1 = omc_InteractiveUtil_setInnerOuterAttributes(threadData, _dr);
_spec_1 = omc_InteractiveUtil_setComponentPropertiesInElementspec(threadData, _spec, _cr, _flowPrefix, _streamPrefix, _prl, _va, _cau, _isf);
tmpMeta[1] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_finalPrefix), _redeclkw_1, _inout_1, _spec_1, _info, _constr);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inElement1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElement = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElement(threadData_t *threadData, modelica_metatype _inElement1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inReplaceable, modelica_metatype _inString5, modelica_metatype _inString6, modelica_metatype _inBooleanLst7, modelica_metatype _inString8, modelica_metatype _inString9)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_metatype _outElement = NULL;
tmp1 = mmc_unbox_integer(_inFinal);
tmp2 = mmc_unbox_integer(_inFlow);
tmp3 = mmc_unbox_integer(_inStream);
tmp4 = mmc_unbox_integer(_inReplaceable);
_outElement = omc_InteractiveUtil_setComponentPropertiesInElement(threadData, _inElement1, _inIdent2, tmp1, tmp2, tmp3, tmp4, _inString5, _inString6, _inBooleanLst7, _inString8, _inString9);
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inReplaceable, modelica_string _inString5, modelica_string _inString6, modelica_metatype _inBooleanLst7, modelica_string _inString8, modelica_string _inString9)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_string tmp3_2;volatile modelica_boolean tmp3_3;volatile modelica_boolean tmp3_4;volatile modelica_boolean tmp3_5;volatile modelica_boolean tmp3_6;volatile modelica_string tmp3_7;volatile modelica_string tmp3_8;volatile modelica_metatype tmp3_9;volatile modelica_string tmp3_10;volatile modelica_string tmp3_11;
tmp3_1 = _inAbsynElementItemLst1;
tmp3_2 = _inIdent2;
tmp3_3 = _inFinal;
tmp3_4 = _inFlow;
tmp3_5 = _inStream;
tmp3_6 = _inReplaceable;
tmp3_7 = _inString5;
tmp3_8 = _inString6;
tmp3_9 = _inBooleanLst7;
tmp3_10 = _inString8;
tmp3_11 = _inString9;
{
modelica_metatype _res = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _elt_1 = NULL;
modelica_metatype _elt = NULL;
modelica_string _cr = NULL;
modelica_string _prl = NULL;
modelica_string _va = NULL;
modelica_string _cau = NULL;
modelica_string _isf = NULL;
modelica_boolean _finalPrefix;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_boolean _repl;
modelica_metatype _dr = NULL;
modelica_metatype _elitem = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elt = tmpMeta[3];
_rest = tmpMeta[2];
_cr = tmp3_2;
_finalPrefix = tmp3_3;
_flowPrefix = tmp3_4;
_streamPrefix = tmp3_5;
_repl = tmp3_6;
_prl = tmp3_7;
_va = tmp3_8;
_dr = tmp3_9;
_cau = tmp3_10;
_isf = tmp3_11;
_res = omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData, _rest, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _prl, _va, _dr, _cau, _isf);
_elt_1 = omc_InteractiveUtil_setComponentPropertiesInElement(threadData, _elt, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _prl, _va, _dr, _cau, _isf);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_elitem = tmpMeta[1];
_rest = tmpMeta[2];
_cr = tmp3_2;
_finalPrefix = tmp3_3;
_flowPrefix = tmp3_4;
_streamPrefix = tmp3_5;
_repl = tmp3_6;
_prl = tmp3_7;
_va = tmp3_8;
_dr = tmp3_9;
_cau = tmp3_10;
_isf = tmp3_11;
_res = omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData, _rest, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _prl, _va, _dr, _cau, _isf);
tmpMeta[1] = mmc_mk_cons(_elitem, _res);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInElementitems(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inReplaceable, modelica_metatype _inString5, modelica_metatype _inString6, modelica_metatype _inBooleanLst7, modelica_metatype _inString8, modelica_metatype _inString9)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_metatype _outAbsynElementItemLst = NULL;
tmp1 = mmc_unbox_integer(_inFinal);
tmp2 = mmc_unbox_integer(_inFlow);
tmp3 = mmc_unbox_integer(_inStream);
tmp4 = mmc_unbox_integer(_inReplaceable);
_outAbsynElementItemLst = omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData, _inAbsynElementItemLst1, _inIdent2, tmp1, tmp2, tmp3, tmp4, _inString5, _inString6, _inBooleanLst7, _inString8, _inString9);
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_string _inIdent2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString6, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_string _inString10)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_string tmp3_2;volatile modelica_boolean tmp3_3;volatile modelica_boolean tmp3_4;volatile modelica_boolean tmp3_5;volatile modelica_boolean tmp3_6;volatile modelica_boolean tmp3_7;volatile modelica_string tmp3_8;volatile modelica_string tmp3_9;volatile modelica_metatype tmp3_10;volatile modelica_string tmp3_11;volatile modelica_string tmp3_12;
tmp3_1 = _inAbsynClassPartLst1;
tmp3_2 = _inIdent2;
tmp3_3 = _inFinal;
tmp3_4 = _inFlow;
tmp3_5 = _inStream;
tmp3_6 = _inProtected;
tmp3_7 = _inReplaceable;
tmp3_8 = _inString6;
tmp3_9 = _inString7;
tmp3_10 = _inBooleanLst8;
tmp3_11 = _inString9;
tmp3_12 = _inString10;
{
modelica_metatype _publst = NULL;
modelica_metatype _publst_1 = NULL;
modelica_metatype _protlst = NULL;
modelica_metatype _protlst_1 = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _elt_1 = NULL;
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _rest_1 = NULL;
modelica_string _cr = NULL;
modelica_string _parallelism = NULL;
modelica_string _variability = NULL;
modelica_string _causality = NULL;
modelica_string _isField = NULL;
modelica_boolean _finalPrefix;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_boolean _repl;
modelica_boolean _prot;
modelica_metatype _dyn_ref = NULL;
modelica_metatype _part = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (1 != tmp3_6) goto tmp2_end;
_parts = tmp3_1;
_cr = tmp3_2;
_finalPrefix = tmp3_3;
_flowPrefix = tmp3_4;
_streamPrefix = tmp3_5;
_repl = tmp3_7;
_parallelism = tmp3_8;
_variability = tmp3_9;
_dyn_ref = tmp3_10;
_causality = tmp3_11;
_isField = tmp3_12;
tmp3 += 1;
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _cr, tmpMeta[1]);
tmpMeta[3] = omc_InteractiveUtil_getElementitemContainsName(threadData, tmpMeta[2], _publst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto goto_1;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_elt = tmpMeta[4];
_elt_1 = omc_InteractiveUtil_setComponentPropertiesInElement(threadData, _elt, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
_publst_1 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _cr, _publst, mmc_mk_none(), NULL);
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
_protlst_1 = listAppend(_protlst, tmpMeta[1]);
_parts_1 = omc_InteractiveUtil_replaceProtectedList(threadData, _parts, _protlst_1);
tmpMeta[0] = omc_InteractiveUtil_replacePublicList(threadData, _parts_1, _publst_1);
goto tmp2_done;
}
case 2: {
if (0 != tmp3_6) goto tmp2_end;
_parts = tmp3_1;
_cr = tmp3_2;
_finalPrefix = tmp3_3;
_flowPrefix = tmp3_4;
_streamPrefix = tmp3_5;
_repl = tmp3_7;
_parallelism = tmp3_8;
_variability = tmp3_9;
_dyn_ref = tmp3_10;
_causality = tmp3_11;
_isField = tmp3_12;
_protlst = omc_InteractiveUtil_getProtectedList(threadData, _parts);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _cr, tmpMeta[1]);
tmpMeta[3] = omc_InteractiveUtil_getElementitemContainsName(threadData, tmpMeta[2], _protlst);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto goto_1;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_elt = tmpMeta[4];
_elt_1 = omc_InteractiveUtil_setComponentPropertiesInElement(threadData, _elt, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
_protlst_1 = omc_InteractiveUtil_deleteOrUpdateComponentFromElementitems(threadData, _cr, _protlst, mmc_mk_none(), NULL);
_publst = omc_InteractiveUtil_getPublicList(threadData, _parts);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elt_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
_publst_1 = listAppend(_publst, tmpMeta[1]);
_parts_1 = omc_InteractiveUtil_replacePublicList(threadData, _parts, _publst_1);
tmpMeta[0] = omc_InteractiveUtil_replaceProtectedList(threadData, _parts_1, _protlst_1);
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_cr = tmp3_2;
_finalPrefix = tmp3_3;
_flowPrefix = tmp3_4;
_streamPrefix = tmp3_5;
_prot = tmp3_6;
_repl = tmp3_7;
_parallelism = tmp3_8;
_variability = tmp3_9;
_dyn_ref = tmp3_10;
_causality = tmp3_11;
_isField = tmp3_12;
tmp3 += 1;
_rest = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _rest, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
_elts_1 = omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData, _elts, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_rest = tmpMeta[2];
_cr = tmp3_2;
_finalPrefix = tmp3_3;
_flowPrefix = tmp3_4;
_streamPrefix = tmp3_5;
_prot = tmp3_6;
_repl = tmp3_7;
_parallelism = tmp3_8;
_variability = tmp3_9;
_dyn_ref = tmp3_10;
_causality = tmp3_11;
_isField = tmp3_12;
_rest = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _rest, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
_elts_1 = omc_InteractiveUtil_setComponentPropertiesInElementitems(threadData, _elts, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _rest);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_part = tmpMeta[1];
_rest = tmpMeta[2];
_cr = tmp3_2;
_finalPrefix = tmp3_3;
_flowPrefix = tmp3_4;
_streamPrefix = tmp3_5;
_prot = tmp3_6;
_repl = tmp3_7;
_parallelism = tmp3_8;
_variability = tmp3_9;
_dyn_ref = tmp3_10;
_causality = tmp3_11;
_isField = tmp3_12;
_rest_1 = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _rest, _cr, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
tmpMeta[1] = mmc_mk_cons(_part, _rest_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 6) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInClassparts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inIdent2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString6, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inString10)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_integer tmp5;
modelica_metatype _outAbsynClassPartLst = NULL;
tmp1 = mmc_unbox_integer(_inFinal);
tmp2 = mmc_unbox_integer(_inFlow);
tmp3 = mmc_unbox_integer(_inStream);
tmp4 = mmc_unbox_integer(_inProtected);
tmp5 = mmc_unbox_integer(_inReplaceable);
_outAbsynClassPartLst = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _inAbsynClassPartLst1, _inIdent2, tmp1, tmp2, tmp3, tmp4, tmp5, _inString6, _inString7, _inBooleanLst8, _inString9, _inString10);
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_setComponentPropertiesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_string _inString2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString6, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_string _inString10)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_string tmp3_2;modelica_boolean tmp3_3;modelica_boolean tmp3_4;modelica_boolean tmp3_5;modelica_boolean tmp3_6;modelica_boolean tmp3_7;modelica_string tmp3_8;modelica_string tmp3_9;modelica_metatype tmp3_10;modelica_string tmp3_11;modelica_string tmp3_12;
tmp3_1 = _inClass1;
tmp3_2 = _inString2;
tmp3_3 = _inFinal;
tmp3_4 = _inFlow;
tmp3_5 = _inStream;
tmp3_6 = _inProtected;
tmp3_7 = _inReplaceable;
tmp3_8 = _inString6;
tmp3_9 = _inString7;
tmp3_10 = _inBooleanLst8;
tmp3_11 = _inString9;
tmp3_12 = _inString10;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _id = NULL;
modelica_string _varname = NULL;
modelica_string _parallelism = NULL;
modelica_string _variability = NULL;
modelica_string _causality = NULL;
modelica_string _bcname = NULL;
modelica_string _isField = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_boolean _finalPrefix;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_boolean _prot;
modelica_boolean _repl;
modelica_metatype _r = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _dyn_ref = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_id = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_cmt = tmpMeta[11];
_file_info = tmpMeta[12];
_varname = tmp3_2;
_finalPrefix = tmp3_3;
_flowPrefix = tmp3_4;
_streamPrefix = tmp3_5;
_prot = tmp3_6;
_repl = tmp3_7;
_parallelism = tmp3_8;
_variability = tmp3_9;
_dyn_ref = tmp3_10;
_causality = tmp3_11;
_isField = tmp3_12;
_parts_1 = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _parts, _varname, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _cmt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_id = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_bcname = tmpMeta[7];
_mod = tmpMeta[8];
_cmt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_varname = tmp3_2;
_finalPrefix = tmp3_3;
_flowPrefix = tmp3_4;
_streamPrefix = tmp3_5;
_prot = tmp3_6;
_repl = tmp3_7;
_parallelism = tmp3_8;
_variability = tmp3_9;
_dyn_ref = tmp3_10;
_causality = tmp3_11;
_isField = tmp3_12;
_parts_1 = omc_InteractiveUtil_setComponentPropertiesInClassparts(threadData, _parts, _varname, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _parallelism, _variability, _dyn_ref, _causality, _isField);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _mod, _cmt, _parts_1, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _id, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_setComponentPropertiesInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inString2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString6, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inString10)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_integer tmp5;
modelica_metatype _outClass = NULL;
tmp1 = mmc_unbox_integer(_inFinal);
tmp2 = mmc_unbox_integer(_inFlow);
tmp3 = mmc_unbox_integer(_inStream);
tmp4 = mmc_unbox_integer(_inProtected);
tmp5 = mmc_unbox_integer(_inReplaceable);
_outClass = omc_InteractiveUtil_setComponentPropertiesInClass(threadData, _inClass1, _inString2, tmp1, tmp2, tmp3, tmp4, tmp5, _inString6, _inString7, _inBooleanLst8, _inString9, _inString10);
return _outClass;
}
DLLExport
modelica_string omc_InteractiveUtil_setComponentProperties(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inComponentRef2, modelica_boolean _inFinal, modelica_boolean _inFlow, modelica_boolean _inStream, modelica_boolean _inProtected, modelica_boolean _inReplaceable, modelica_string _inString7, modelica_metatype _inBooleanLst8, modelica_string _inString9, modelica_metatype _inProgram10, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_boolean tmp4_3;volatile modelica_boolean tmp4_4;volatile modelica_boolean tmp4_5;volatile modelica_boolean tmp4_6;volatile modelica_boolean tmp4_7;volatile modelica_string tmp4_8;volatile modelica_metatype tmp4_9;volatile modelica_string tmp4_10;volatile modelica_metatype tmp4_11;
tmp4_1 = _inPath1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inFinal;
tmp4_4 = _inFlow;
tmp4_5 = _inStream;
tmp4_6 = _inProtected;
tmp4_7 = _inReplaceable;
tmp4_8 = _inString7;
tmp4_9 = _inBooleanLst8;
tmp4_10 = _inString9;
tmp4_11 = _inProgram10;
{
modelica_metatype _within_ = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _cdef_1 = NULL;
modelica_metatype _newp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _p_class = NULL;
modelica_string _varname = NULL;
modelica_string _variability = NULL;
modelica_string _causality = NULL;
modelica_boolean _finalPrefix;
modelica_boolean _flowPrefix;
modelica_boolean _streamPrefix;
modelica_boolean _prot;
modelica_boolean _repl;
modelica_metatype _dyn_ref = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_varname = tmpMeta[2];
_p_class = tmp4_1;
_finalPrefix = tmp4_3;
_flowPrefix = tmp4_4;
_streamPrefix = tmp4_5;
_prot = tmp4_6;
_repl = tmp4_7;
_variability = tmp4_8;
_dyn_ref = tmp4_9;
_causality = tmp4_10;
_p = tmp4_11;
_within_ = omc_InteractiveUtil_buildWithin(threadData, _p_class);
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _p_class, _p, 0);
_cdef_1 = omc_InteractiveUtil_setComponentPropertiesInClass(threadData, _cdef, _varname, _finalPrefix, _flowPrefix, _streamPrefix, _prot, _repl, _OMC_LIT9, _variability, _dyn_ref, _causality, _OMC_LIT9);
tmpMeta[2] = mmc_mk_cons(_cdef_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _within_);
_newp = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
tmp1_c0 = _OMC_LIT67;
tmpMeta[0+1] = _newp;
goto tmp3_done;
}
case 1: {
tmp1_c0 = _OMC_LIT52;
tmpMeta[0+1] = _inProgram10;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
modelica_metatype boxptr_InteractiveUtil_setComponentProperties(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inComponentRef2, modelica_metatype _inFinal, modelica_metatype _inFlow, modelica_metatype _inStream, modelica_metatype _inProtected, modelica_metatype _inReplaceable, modelica_metatype _inString7, modelica_metatype _inBooleanLst8, modelica_metatype _inString9, modelica_metatype _inProgram10, modelica_metatype *out_outProgram)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_integer tmp4;
modelica_integer tmp5;
modelica_string _outString = NULL;
tmp1 = mmc_unbox_integer(_inFinal);
tmp2 = mmc_unbox_integer(_inFlow);
tmp3 = mmc_unbox_integer(_inStream);
tmp4 = mmc_unbox_integer(_inProtected);
tmp5 = mmc_unbox_integer(_inReplaceable);
_outString = omc_InteractiveUtil_setComponentProperties(threadData, _inPath1, _inComponentRef2, tmp1, tmp2, tmp3, tmp4, tmp5, _inString7, _inBooleanLst8, _inString9, _inProgram10, out_outProgram);
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassEnv__dispatch(threadData_t *threadData, modelica_metatype _p, modelica_metatype _p_class, modelica_metatype *out_env_2)
{
modelica_metatype _cache = NULL;
modelica_metatype _env_2 = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _cl = NULL;
modelica_string _id = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_p_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p);
_cache = omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
_cache = omc_Lookup_lookupClass(threadData, _cache, _env, _p_class, mmc_mk_none() ,&_cl ,&_env_1);
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _cl;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,2) == 0) goto tmp2_end;
_id = tmpMeta[1];
_encflag = tmpMeta[2];
_restr = tmpMeta[3];
tmpMeta[0] = _env_1;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_id = tmpMeta[1];
_encflag = tmpMeta[2];
_restr = tmpMeta[3];
_env2 = omc_FGraph_openScope(threadData, _env_1, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_partialInstClassIn(threadData, _cache, _env2, tmpMeta[1], _OMC_LIT50, _OMC_LIT33, _ci_state, _cl, _OMC_LIT59, tmpMeta[2], ((modelica_integer) 0) ,&_env_2 ,NULL ,NULL ,NULL);
tmpMeta[0] = _env_2;
goto tmp2_done;
}
case 2: {
tmpMeta[0] = omc_FGraph_empty(threadData);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_env_2 = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_env_2) { *out_env_2 = _env_2; }
return _cache;
}
DLLExport
modelica_boolean omc_InteractiveUtil_matchPath(threadData_t *threadData, modelica_metatype _p, modelica_metatype _entry)
{
modelica_boolean _matches;
modelica_metatype _po = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _entry;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_po = tmpMeta[1];
_matches = omc_AbsynUtil_pathEqual(threadData, _po, _p);
_return: OMC_LABEL_UNUSED
return _matches;
}
modelica_metatype boxptr_InteractiveUtil_matchPath(threadData_t *threadData, modelica_metatype _p, modelica_metatype _entry)
{
modelica_boolean _matches;
modelica_metatype out_matches;
_matches = omc_InteractiveUtil_matchPath(threadData, _p, _entry);
out_matches = mmc_mk_icon(_matches);
return out_matches;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getClassEnv(threadData_t *threadData, modelica_metatype _p, modelica_metatype _p_class)
{
modelica_metatype _env_2 = NULL;
modelica_metatype _ocache = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _lcache = NULL;
modelica_metatype _po = NULL;
modelica_metatype _patho = NULL;
modelica_metatype _envo = NULL;
modelica_boolean _invalidate;
modelica_metatype _fcache = NULL;
modelica_metatype _env = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_lcache = tmpMeta[0];
_invalidate = 0;
if(omc_Flags_isSet(threadData, _OMC_LIT18))
{
tmpMeta[1] = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, _p, _p_class, omc_FCore_emptyCache(threadData), omc_FGraph_empty(threadData));
_env_2 = tmpMeta[1];
goto _return;
}
_ocache = getGlobalRoot(((modelica_integer) 26));
if(isSome(_ocache))
{
tmpMeta[1] = _ocache;
if (optionNone(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_cache = tmpMeta[2];
{
modelica_metatype _x;
for (tmpMeta[1] = _cache; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_x = MMC_CAR(tmpMeta[1]);
tmpMeta[2] = _x;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
_po = tmpMeta[3];
_patho = tmpMeta[4];
_envo = tmpMeta[5];
if(omc_AbsynUtil_pathEqual(threadData, _patho, _p_class))
{
if(referenceEq(_po, _p))
{
_env_2 = _envo;
goto _return;
}
else
{
_invalidate = 1;
break;
}
}
}
}
if(_invalidate)
{
tmpMeta[1] = _ocache;
if (optionNone(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_cache = tmpMeta[2];
_cache = omc_List_deleteMemberOnTrue(threadData, _p_class, _cache, boxvar_InteractiveUtil_matchPath, NULL);
setGlobalRoot(((modelica_integer) 26), mmc_mk_some(_cache));
}
}
_fcache = omc_InteractiveUtil_getClassEnv__dispatch(threadData, _p, _p_class ,&_env);
tmpMeta[1] = mmc_mk_box5(5, &Interactive_GraphicEnvCache_GRAPHIC__ENV__FULL__CACHE__desc, _p, _p_class, _fcache, _env);
_env_2 = tmpMeta[1];
_ocache = getGlobalRoot(((modelica_integer) 26));
if(isSome(_ocache))
{
tmpMeta[1] = _ocache;
if (optionNone(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_cache = tmpMeta[2];
tmpMeta[2] = mmc_mk_box3(0, _p, _p_class, _env_2);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _cache);
setGlobalRoot(((modelica_integer) 26), mmc_mk_some(tmpMeta[1]));
}
else
{
tmpMeta[2] = mmc_mk_box3(0, _p, _p_class, _env_2);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
setGlobalRoot(((modelica_integer) 26), mmc_mk_some(tmpMeta[1]));
}
_return: OMC_LABEL_UNUSED
return _env_2;
}
DLLExport
modelica_metatype omc_InteractiveUtil_getParameterNames(threadData_t *threadData, modelica_metatype _path, modelica_metatype _inProgram)
{
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inProgram;
{
modelica_metatype _cdef = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _compelts = NULL;
modelica_metatype _compelts_1 = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_p = tmp3_1;
_cdef = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
_comps = omc_InteractiveUtil_getComponentsInClass(threadData, _cdef);
{
modelica_metatype __omcQ_24tmpVar33;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar32;
int tmp6;
modelica_metatype _c_loopVar = 0;
modelica_metatype _c;
_c_loopVar = _comps;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar33 = tmpMeta[2];
tmp5 = &__omcQ_24tmpVar33;
while(1) {
tmp6 = 1;
while (!listEmpty(_c_loopVar)) {
_c = MMC_CAR(_c_loopVar);
_c_loopVar = MMC_CDR(_c_loopVar);
if (omc_InteractiveUtil_isParameterElement(threadData, _c)) {
tmp6--;
break;
}
}
if (tmp6 == 0) {
__omcQ_24tmpVar32 = omc_InteractiveUtil_getComponentitemsInElement(threadData, _c);
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar32,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar33;
}
_compelts = tmpMeta[1];
_compelts_1 = omc_List_flatten(threadData, _compelts);
tmpMeta[0] = omc_List_map(threadData, _compelts_1, boxvar_InteractiveUtil_getComponentitemName);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outList = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isParameterElement(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,3) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isParameterElement(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_isParameterElement(threadData, _inElement);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_dumpComponentsToString(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponents;
{
modelica_metatype _res = NULL;
modelica_metatype _comps = NULL;
modelica_string _s1 = NULL;
modelica_string _pa_str = NULL;
modelica_string _path_str = NULL;
modelica_string _cr_str = NULL;
modelica_metatype _cr_pa = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = _OMC_LIT9;
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_comps = tmp4_1;
_pa = tmpMeta[3];
_path = tmpMeta[4];
_cr = tmpMeta[5];
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_s1 = omc_InteractiveUtil_dumpComponentsToString(threadData, _res);
_pa_str = omc_AbsynUtil_pathString(threadData, _pa, _OMC_LIT0, 1, 0);
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
_cr_pa = omc_AbsynUtil_crefToPath(threadData, _cr);
_cr_str = omc_AbsynUtil_pathString(threadData, _cr_pa, _OMC_LIT0, 1, 0);
tmpMeta[0] = mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT420, mmc_mk_cons(_pa_str, mmc_mk_cons(_OMC_LIT421, mmc_mk_cons(_path_str, mmc_mk_cons(_OMC_LIT422, mmc_mk_cons(_cr_str, mmc_mk_cons(_OMC_LIT136, MMC_REFSTRUCTLIT(mmc_nil)))))))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
case 2: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (listEmpty(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_comps = tmp4_1;
_pa = tmpMeta[3];
_path = tmpMeta[4];
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_s1 = omc_InteractiveUtil_dumpComponentsToString(threadData, _res);
_pa_str = omc_AbsynUtil_pathString(threadData, _pa, _OMC_LIT0, 1, 0);
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
tmpMeta[0] = mmc_mk_cons(_s1, mmc_mk_cons(_OMC_LIT423, mmc_mk_cons(_pa_str, mmc_mk_cons(_OMC_LIT424, mmc_mk_cons(_path_str, mmc_mk_cons(_OMC_LIT136, MMC_REFSTRUCTLIT(mmc_nil)))))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_InteractiveUtil_addComponentToComponents(threadData_t *threadData, modelica_metatype _inComponent, modelica_metatype _inComponents)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inComponent;
tmp3_2 = _inComponents;
{
modelica_integer _len_1;
modelica_integer _len;
modelica_metatype _comp = NULL;
modelica_metatype _comps = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
_comp = tmp3_1;
_comps = tmpMeta[1];
_len = tmp5;
_len_1 = ((modelica_integer) 1) + _len;
tmpMeta[1] = mmc_mk_cons(_comp, _comps);
tmpMeta[2] = mmc_mk_box3(3, &GlobalScript_Components_COMPONENTS__desc, tmpMeta[1], mmc_mk_integer(_len_1));
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_lengthComponents(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponents;
{
modelica_integer _len;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_len = tmp6;
tmp1 = _len;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_lengthComponents(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_lengthComponents(threadData, _inComponents);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_restComponents(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponents;
{
modelica_integer _len_1;
modelica_integer _len;
modelica_metatype _res = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[0] = _OMC_LIT425;
goto tmp2_done;
}
case 1: {
modelica_integer tmp5;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[4]);
_res = tmpMeta[3];
_len = tmp5;
_len_1 = ((modelica_integer) -1) + _len;
tmpMeta[1] = mmc_mk_box3(3, &GlobalScript_Components_COMPONENTS__desc, _res, mmc_mk_integer(_len_1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_firstComponent(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_metatype _outComponent = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponents;
{
modelica_metatype _comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
fputs(MMC_STRINGDATA(_OMC_LIT426),stdout);
goto goto_1;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_comp = tmpMeta[2];
tmpMeta[0] = _comp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponent = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponent;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_emptyComponents(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponents;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_emptyComponents(threadData_t *threadData, modelica_metatype _inComponents)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_emptyComponents(threadData, _inComponents);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_existsComponentInComponents(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponent)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inComponents;
tmp4_2 = _inComponent;
{
modelica_metatype _comp = NULL;
modelica_metatype _a = NULL;
modelica_metatype _b = NULL;
modelica_metatype _ap = NULL;
modelica_metatype _bp = NULL;
modelica_metatype _c = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _comps = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
modelica_boolean tmp7;
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_ap = tmpMeta[0];
_bp = tmpMeta[1];
_cr = tmpMeta[2];
_comps = tmp4_1;
tmp4 += 1;
tmpMeta[0] = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,3) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_a = tmpMeta[1];
_b = tmpMeta[2];
_c = tmpMeta[3];
tmp6 = omc_AbsynUtil_pathEqual(threadData, _a, _ap);
if (1 != tmp6) goto goto_2;
tmp7 = omc_AbsynUtil_pathEqual(threadData, _b, _bp);
if (1 != tmp7) goto goto_2;
tmp8 = omc_AbsynUtil_crefEqual(threadData, _c, _cr);
if (1 != tmp8) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp9;
modelica_boolean tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_ap = tmpMeta[0];
_bp = tmpMeta[1];
_comps = tmp4_1;
tmpMeta[0] = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,2) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_a = tmpMeta[1];
_b = tmpMeta[2];
tmp9 = omc_AbsynUtil_pathEqual(threadData, _a, _ap);
if (1 != tmp9) goto goto_2;
tmp10 = omc_AbsynUtil_pathEqual(threadData, _b, _bp);
if (1 != tmp10) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
_comps = tmp4_1;
_comp = tmp4_2;
tmp1 = omc_InteractiveUtil_existsComponentInComponents(threadData, _comps, _comp);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_existsComponentInComponents(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponent)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_existsComponentInComponents(threadData, _inComponents, _inComponent);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinComponents(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inComponents1;
tmp3_2 = _inComponents2;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _comps2 = NULL;
modelica_integer _len;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
_comps1 = tmpMeta[1];
_comps2 = tmpMeta[2];
_comps = omc_List_union(threadData, _comps1, _comps2);
_len = listLength(_comps);
tmpMeta[1] = mmc_mk_box3(3, &GlobalScript_Components_COMPONENTS__desc, _comps, mmc_mk_integer(_len));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromModificationOption(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynModificationOption, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;modelica_metatype tmp3_4;
tmp3_1 = _inPath;
tmp3_2 = _inAbsynModificationOption;
tmp3_3 = _inComponents;
tmp3_4 = _inEnv;
{
modelica_metatype _pa = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elementargs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_2)) goto tmp2_end;
_comps = tmp3_3;
tmpMeta[0] = _comps;
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elementargs = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _elementargs, _comps, _env);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElementargs(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynElementArgLst, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_metatype tmp3_4;
tmp3_1 = _inPath;
tmp3_2 = _inAbsynElementArgLst;
tmp3_3 = _inComponents;
tmp3_4 = _inEnv;
{
modelica_metatype _pa = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comps_2 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elementspec = NULL;
modelica_metatype _elementspec2 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _mod_opt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
_comps = tmp3_3;
tmp3 += 4;
tmpMeta[0] = _comps;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_elementspec = tmpMeta[3];
_elementspec2 = tmpMeta[6];
_res = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
_comps_1 = omc_InteractiveUtil_extractComponentsFromElementspec(threadData, _pa, _elementspec, _comps, _env);
_comps_2 = omc_InteractiveUtil_extractComponentsFromElementspec(threadData, _pa, _elementspec2, _comps_1, _env);
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _res, _comps_2, _env);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
_elementspec = tmpMeta[3];
_res = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
tmp3 += 1;
_comps_1 = omc_InteractiveUtil_extractComponentsFromElementspec(threadData, _pa, _elementspec, _comps, _env);
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _res, _comps_1, _env);
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_mod_opt = tmpMeta[3];
_res = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
_comps_1 = omc_InteractiveUtil_extractComponentsFromModificationOption(threadData, _pa, _mod_opt, _comps, _env);
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _res, _comps_1, _env);
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
_res = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _res, _comps, _env);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromComponentitems(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2, modelica_metatype _inAbsynComponentItemLst3, modelica_metatype _inComponents4, modelica_metatype _inEnv5)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_metatype tmp3_4;volatile modelica_metatype tmp3_5;
tmp3_1 = _inPath1;
tmp3_2 = _inPath2;
tmp3_3 = _inAbsynComponentItemLst3;
tmp3_4 = _inComponents4;
tmp3_5 = _inEnv5;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comps_2 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _path = NULL;
modelica_string _id = NULL;
modelica_metatype _mod_opt = NULL;
modelica_metatype _res = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_3)) goto tmp2_end;
_comps = tmp3_4;
tmp3 += 1;
tmpMeta[0] = _comps;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_3)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_3);
tmpMeta[2] = MMC_CDR(tmp3_3);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
_id = tmpMeta[4];
_mod_opt = tmpMeta[5];
_res = tmpMeta[2];
_pa = tmp3_1;
_path = tmp3_2;
_comps = tmp3_4;
_env = tmp3_5;
_comps_1 = omc_InteractiveUtil_extractComponentsFromComponentitems(threadData, _pa, _path, _res, _comps, _env);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, tmpMeta[1]);
_comp = tmpMeta[2];
tmpMeta[1] = mmc_mk_box4(3, &GlobalScript_Component_COMPONENTITEM__desc, _pa, _path, _comp);
_comps_2 = omc_InteractiveUtil_addComponentToComponents(threadData, tmpMeta[1], _comps_1);
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromModificationOption(threadData, _pa, _mod_opt, _comps_2, _env);
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT427),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElementspec(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inElementSpec, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_metatype tmp3_4;
tmp3_1 = _inPath;
tmp3_2 = _inElementSpec;
tmp3_3 = _inComponents;
tmp3_4 = _inEnv;
{
modelica_string _id = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _path_1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _comp_items = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _elementargs = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,3,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_path_1 = tmpMeta[2];
_comp_items = tmpMeta[3];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
tmp3 += 1;
tmpMeta[4] = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none(), &tmpMeta[1], &tmpMeta[3]);
_cache = tmpMeta[4];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,8) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_id = tmpMeta[2];
_cenv = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta[1];
_cache = omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromComponentitems(threadData, _pa, _path, _comp_items, _comps, _env);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_path_1 = tmpMeta[1];
_elementargs = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
_cache = omc_Lookup_lookupClass(threadData, omc_FCore_emptyCache(threadData), _env, _path_1, mmc_mk_none() ,NULL ,&_cenv);
omc_Inst_makeFullyQualified(threadData, _cache, _cenv, _path_1 ,&_path);
tmpMeta[1] = mmc_mk_box3(4, &GlobalScript_Component_EXTENDSITEM__desc, _pa, _path);
_comp = tmpMeta[1];
_comps_1 = omc_InteractiveUtil_addComponentToComponents(threadData, _comp, _comps);
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _elementargs, _comps_1, _env);
goto tmp2_done;
}
case 2: {
tmpMeta[0] = _inComponents;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromElements(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynElementItemLst, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_metatype tmp3_4;
tmp3_1 = _inPath;
tmp3_2 = _inAbsynElementItemLst;
tmp3_3 = _inComponents;
tmp3_4 = _inEnv;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _elementspec = NULL;
modelica_metatype _res = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
_comps = tmp3_3;
tmp3 += 2;
tmpMeta[0] = _comps;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
_elementspec = tmpMeta[4];
_res = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
_comps_1 = omc_InteractiveUtil_extractComponentsFromElements(threadData, _pa, _res, _comps, _env);
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElementspec(threadData, _pa, _elementspec, _comps_1, _env);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
_res = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElements(threadData, _pa, _res, _comps, _env);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClassparts(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inAbsynClassPartLst, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_metatype tmp3_4;
tmp3_1 = _inPath;
tmp3_2 = _inAbsynClassPartLst;
tmp3_3 = _inComponents;
tmp3_4 = _inEnv;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _elements = NULL;
modelica_metatype _res = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
_comps = tmp3_3;
tmp3 += 2;
tmpMeta[0] = _comps;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elements = tmpMeta[3];
_res = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
tmp3 += 1;
_comps_1 = omc_InteractiveUtil_extractComponentsFromClassparts(threadData, _pa, _res, _comps, _env);
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElements(threadData, _pa, _elements, _comps_1, _env);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elements = tmpMeta[3];
_res = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
_comps_1 = omc_InteractiveUtil_extractComponentsFromClassparts(threadData, _pa, _res, _comps, _env);
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElements(threadData, _pa, _elements, _comps_1, _env);
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _inComponents;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClassdef(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inClassDef, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_metatype tmp3_4;
tmp3_1 = _inPath;
tmp3_2 = _inClassDef;
tmp3_3 = _inComponents;
tmp3_4 = _inEnv;
{
modelica_metatype _comps = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elementargs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_parts = tmpMeta[1];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
tmp3 += 2;
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromClassparts(threadData, _pa, _parts, _comps, _env);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_elementargs = tmpMeta[2];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
tmp3 += 1;
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromElementargs(threadData, _pa, _elementargs, _comps, _env);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,4,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
_parts = tmpMeta[1];
_pa = tmp3_1;
_comps = tmp3_3;
_env = tmp3_4;
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromClassparts(threadData, _pa, _parts, _comps, _env);
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _inComponents;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractComponentsFromClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_metatype _inComponents, modelica_metatype _inEnv)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;volatile modelica_metatype tmp3_4;
tmp3_1 = _inClass;
tmp3_2 = _inPath;
tmp3_3 = _inComponents;
tmp3_4 = _inEnv;
{
modelica_metatype _comps = NULL;
modelica_metatype _classdef = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_classdef = tmpMeta[1];
_pa = tmp3_2;
_comps = tmp3_3;
_env = tmp3_4;
tmpMeta[0] = omc_InteractiveUtil_extractComponentsFromClassdef(threadData, _pa, _classdef, _comps, _env);
goto tmp2_done;
}
case 1: {
fputs(MMC_STRINGDATA(_OMC_LIT428),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isReadOnly(threadData_t *threadData, modelica_metatype _file_info)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _file_info;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_res = tmp6;
tmp1 = _res;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isReadOnly(threadData_t *threadData, modelica_metatype _file_info)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_InteractiveUtil_isReadOnly(threadData, _file_info);
out_res = mmc_mk_icon(_res);
return out_res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponentsVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv)
{
modelica_metatype _outTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv;
{
modelica_metatype _path_1 = NULL;
modelica_metatype _pa_1 = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _paOpt = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _class_ = NULL;
modelica_string _id = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 8));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 1));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
_class_ = tmpMeta[1];
_id = tmpMeta[2];
_file_info = tmpMeta[3];
_pa = tmpMeta[5];
_comps = tmpMeta[7];
_p = tmpMeta[8];
_env = tmpMeta[9];
tmp3 += 1;
tmp5 = omc_InteractiveUtil_isReadOnly(threadData, _file_info);
if (0 != tmp5) goto goto_1;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = omc_AbsynUtil_joinPaths(threadData, _pa, tmpMeta[1]);
_cenv = omc_InteractiveUtil_getClassEnvNoElaboration(threadData, _p, _path_1, _env);
omc_Inst_makeFullyQualified(threadData, omc_FCore_emptyCache(threadData), _cenv, _path_1 ,&_pa_1);
_comps_1 = omc_InteractiveUtil_extractComponentsFromClass(threadData, _class_, _pa_1, _comps, _cenv);
tmpMeta[1] = mmc_mk_box3(0, _comps_1, _p, _env);
tmpMeta[2] = mmc_mk_box3(0, _class_, mmc_mk_some(_pa), tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 8));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
_class_ = tmpMeta[1];
_id = tmpMeta[2];
_file_info = tmpMeta[3];
_comps = tmpMeta[6];
_p = tmpMeta[7];
_env = tmpMeta[8];
tmp6 = omc_InteractiveUtil_isReadOnly(threadData, _file_info);
if (0 != tmp6) goto goto_1;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta[1];
_cenv = omc_InteractiveUtil_getClassEnvNoElaboration(threadData, _p, _path_1, _env);
omc_Inst_makeFullyQualified(threadData, omc_FCore_emptyCache(threadData), _cenv, _path_1 ,&_pa_1);
_comps_1 = omc_InteractiveUtil_extractComponentsFromClass(threadData, _class_, _pa_1, _comps, _cenv);
tmpMeta[1] = mmc_mk_box3(0, _comps_1, _p, _env);
tmpMeta[2] = mmc_mk_box3(0, _class_, mmc_mk_none(), tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_class_ = tmpMeta[1];
_paOpt = tmpMeta[2];
_comps = tmpMeta[4];
_p = tmpMeta[5];
_env = tmpMeta[6];
tmpMeta[1] = mmc_mk_box3(0, _comps, _p, _env);
tmpMeta[2] = mmc_mk_box3(0, _class_, _paOpt, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTplAbsynClassAbsynPathOptionTplComponentsAbsynProgramEnvEnv;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponents(threadData_t *threadData, modelica_metatype _p, modelica_metatype _path)
{
modelica_metatype _comps = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _p_1 = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_p_1 = omc_AbsynToSCode_translateAbsyn2SCode(threadData, _p);
omc_Inst_makeEnvFromProgram(threadData, _p_1 ,&_env);
tmpMeta[1] = mmc_mk_box3(0, _OMC_LIT425, _p, _env);
tmpMeta[2] = omc_AbsynUtil_traverseClasses(threadData, _p, mmc_mk_none(), boxvar_InteractiveUtil_extractAllComponentsVisitor, tmpMeta[1], 1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
_comps = tmpMeta[4];
tmpMeta[0] = _comps;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_comps = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _comps;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithType(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inComponents;
tmp3_2 = _inPath;
{
modelica_metatype _comps = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _comp_path = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
_comps = tmp3_1;
tmp5 = omc_InteractiveUtil_emptyComponents(threadData, _comps);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _OMC_LIT425;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
_comps = tmp3_1;
_path = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_comp = tmpMeta[1];
_comp_path = tmpMeta[2];
tmp6 = omc_AbsynUtil_pathEqual(threadData, _comp_path, _path);
if (1 != tmp6) goto goto_1;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_getComponentsWithType(threadData, _res, _path);
tmpMeta[0] = omc_InteractiveUtil_addComponentToComponents(threadData, _comp, _comps_1);
goto tmp2_done;
}
case 2: {
modelica_boolean tmp7;
_comps = tmp3_1;
_path = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_comp = tmpMeta[1];
_comp_path = tmpMeta[2];
tmp7 = omc_AbsynUtil_pathEqual(threadData, _comp_path, _path);
if (1 != tmp7) goto goto_1;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_getComponentsWithType(threadData, _res, _path);
tmpMeta[0] = omc_InteractiveUtil_addComponentToComponents(threadData, _comp, _comps_1);
goto tmp2_done;
}
case 3: {
_comps = tmp3_1;
_path = tmp3_2;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
tmpMeta[0] = omc_InteractiveUtil_getComponentsWithType(threadData, _res, _path);
goto tmp2_done;
}
case 4: {
fputs(MMC_STRINGDATA(_OMC_LIT429),stdout);
tmpMeta[0] = _OMC_LIT425;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsFromClass(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inComponents;
tmp3_2 = _inPath;
{
modelica_metatype _comps = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _comp_path = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
_comps = tmp3_1;
tmp5 = omc_InteractiveUtil_emptyComponents(threadData, _comps);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _OMC_LIT425;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
_comps = tmp3_1;
_path = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_comp = tmpMeta[1];
_comp_path = tmpMeta[2];
tmp6 = omc_AbsynUtil_pathEqual(threadData, _comp_path, _path);
if (1 != tmp6) goto goto_1;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_getComponentsFromClass(threadData, _res, _path);
tmpMeta[0] = omc_InteractiveUtil_addComponentToComponents(threadData, _comp, _comps_1);
goto tmp2_done;
}
case 2: {
modelica_boolean tmp7;
_comps = tmp3_1;
_path = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_comp = tmpMeta[1];
_comp_path = tmpMeta[2];
tmp7 = omc_AbsynUtil_pathEqual(threadData, _comp_path, _path);
if (1 != tmp7) goto goto_1;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_getComponentsFromClass(threadData, _res, _path);
tmpMeta[0] = omc_InteractiveUtil_addComponentToComponents(threadData, _comp, _comps_1);
goto tmp2_done;
}
case 3: {
_comps = tmp3_1;
_path = tmp3_2;
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
tmpMeta[0] = omc_InteractiveUtil_getComponentsFromClass(threadData, _res, _path);
goto tmp2_done;
}
case 4: {
fputs(MMC_STRINGDATA(_OMC_LIT430),stdout);
tmpMeta[0] = _OMC_LIT425;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithComponentsType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inComponents1;
tmp3_2 = _inComponents2;
{
modelica_metatype _comps = NULL;
modelica_metatype _in_comps = NULL;
modelica_metatype _in_comps_1 = NULL;
modelica_metatype _comp1 = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comp_path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
_in_comps = tmp3_2;
tmp5 = omc_InteractiveUtil_emptyComponents(threadData, _in_comps);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _OMC_LIT425;
goto tmp2_done;
}
case 1: {
_comps = tmp3_1;
_in_comps = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_firstComponent(threadData, _in_comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_comp_path = tmpMeta[2];
_in_comps_1 = omc_InteractiveUtil_restComponents(threadData, _in_comps);
_comp1 = omc_InteractiveUtil_getComponentsWithType(threadData, _comps, _comp_path);
_comps_1 = omc_InteractiveUtil_getComponentsWithComponentsType(threadData, _comps, _in_comps_1);
tmpMeta[0] = omc_InteractiveUtil_joinComponents(threadData, _comp1, _comps_1);
goto tmp2_done;
}
case 2: {
_comps = tmp3_1;
_in_comps = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_firstComponent(threadData, _in_comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_comp_path = tmpMeta[2];
_in_comps_1 = omc_InteractiveUtil_restComponents(threadData, _in_comps);
_comp1 = omc_InteractiveUtil_getComponentsWithType(threadData, _comps, _comp_path);
_comps_1 = omc_InteractiveUtil_getComponentsWithComponentsType(threadData, _comps, _in_comps_1);
tmpMeta[0] = omc_InteractiveUtil_joinComponents(threadData, _comp1, _comps_1);
goto tmp2_done;
}
case 3: {
fputs(MMC_STRINGDATA(_OMC_LIT431),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentsWithComponentsClass(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inComponents1;
tmp3_2 = _inComponents2;
{
modelica_metatype _comps = NULL;
modelica_metatype _in_comps = NULL;
modelica_metatype _in_comps_1 = NULL;
modelica_metatype _comp1 = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comp_path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
_in_comps = tmp3_2;
tmp5 = omc_InteractiveUtil_emptyComponents(threadData, _in_comps);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _OMC_LIT425;
goto tmp2_done;
}
case 1: {
_comps = tmp3_1;
_in_comps = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_firstComponent(threadData, _in_comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_comp_path = tmpMeta[2];
_in_comps_1 = omc_InteractiveUtil_restComponents(threadData, _in_comps);
_comp1 = omc_InteractiveUtil_getComponentsWithType(threadData, _comps, _comp_path);
_comps_1 = omc_InteractiveUtil_getComponentsWithComponentsClass(threadData, _comps, _in_comps_1);
tmpMeta[0] = omc_InteractiveUtil_joinComponents(threadData, _comp1, _comps_1);
goto tmp2_done;
}
case 2: {
_comps = tmp3_1;
_in_comps = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_firstComponent(threadData, _in_comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_comp_path = tmpMeta[2];
_in_comps_1 = omc_InteractiveUtil_restComponents(threadData, _in_comps);
_comp1 = omc_InteractiveUtil_getComponentsWithType(threadData, _comps, _comp_path);
_comps_1 = omc_InteractiveUtil_getComponentsWithComponentsClass(threadData, _comps, _in_comps_1);
tmpMeta[0] = omc_InteractiveUtil_joinComponents(threadData, _comp1, _comps_1);
goto tmp2_done;
}
case 3: {
fputs(MMC_STRINGDATA(_OMC_LIT432),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDependencyWithType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2, modelica_integer _inInteger3)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_integer tmp3_3;
tmp3_1 = _inComponents1;
tmp3_2 = _inComponents2;
tmp3_3 = _inInteger3;
{
modelica_integer _len;
modelica_integer _old_len;
modelica_metatype _comps = NULL;
modelica_metatype _in_comps = NULL;
modelica_metatype _in_comps_1 = NULL;
modelica_metatype _comps_1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_in_comps = tmp3_2;
_old_len = tmp3_3;
_len = omc_InteractiveUtil_lengthComponents(threadData, _in_comps);
if((!(_old_len == _len)))
{
goto goto_1;
}
tmpMeta[0] = _in_comps;
goto tmp2_done;
}
case 1: {
_comps = tmp3_1;
_in_comps = tmp3_2;
_len = omc_InteractiveUtil_lengthComponents(threadData, _in_comps);
_in_comps_1 = omc_InteractiveUtil_getComponentsWithComponentsClass(threadData, _comps, _in_comps);
_comps_1 = omc_InteractiveUtil_joinComponents(threadData, _in_comps_1, _in_comps);
tmpMeta[0] = omc_InteractiveUtil_getDependencyWithType(threadData, _comps, _comps_1, _len);
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT433),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getDependencyWithType(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponents2, modelica_metatype _inInteger3)
{
modelica_integer tmp1;
modelica_metatype _outComponents = NULL;
tmp1 = mmc_unbox_integer(_inInteger3);
_outComponents = omc_InteractiveUtil_getDependencyWithType(threadData, _inComponents1, _inComponents2, tmp1);
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getDependencyOnClass(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inPath)
{
modelica_metatype _outComponents = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inComponents;
tmp3_2 = _inPath;
{
modelica_metatype _comps_types = NULL;
modelica_metatype _comps_types2 = NULL;
modelica_metatype _comps = NULL;
modelica_string _str = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_comps = tmp3_1;
_path = tmp3_2;
_comps_types = omc_InteractiveUtil_getComponentsFromClass(threadData, _comps, _path);
_comps_types2 = omc_InteractiveUtil_getDependencyWithType(threadData, _comps, _comps_types, ((modelica_integer) 0));
_str = omc_InteractiveUtil_dumpComponentsToString(threadData, _comps_types);
fputs(MMC_STRINGDATA(_OMC_LIT434),stdout);
fputs(MMC_STRINGDATA(_str),stdout);
fputs(MMC_STRINGDATA(_OMC_LIT435),stdout);
_str = omc_InteractiveUtil_dumpComponentsToString(threadData, _comps_types2);
fputs(MMC_STRINGDATA(_OMC_LIT436),stdout);
fputs(MMC_STRINGDATA(_str),stdout);
fputs(MMC_STRINGDATA(_OMC_LIT435),stdout);
tmpMeta[0] = omc_InteractiveUtil_joinComponents(threadData, _comps_types, _comps_types2);
goto tmp2_done;
}
case 1: {
fputs(MMC_STRINGDATA(_OMC_LIT437),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponents = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_restComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_metatype _outComponentReplacementRules = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponentReplacementRules;
{
modelica_integer _len_1;
modelica_integer _len;
modelica_metatype _res = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[0] = _OMC_LIT438;
goto tmp2_done;
}
case 1: {
modelica_integer tmp5;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[4]);
_res = tmpMeta[3];
_len = tmp5;
_len_1 = ((modelica_integer) -1) + _len;
tmpMeta[1] = mmc_mk_box3(3, &GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc, _res, mmc_mk_integer(_len_1));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentReplacementRules = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_firstComponentReplacement(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_metatype _outComponentReplacement = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponentReplacementRules;
{
modelica_metatype _comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
fputs(MMC_STRINGDATA(_OMC_LIT439),stdout);
goto goto_1;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_comp = tmpMeta[2];
tmpMeta[0] = _comp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentReplacement = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentReplacement;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_InteractiveUtil_lengthComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_integer _outInteger;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentReplacementRules;
{
modelica_integer _len;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_len = tmp6;
tmp1 = _len;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outInteger = tmp1;
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_lengthComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_integer _outInteger;
modelica_metatype out_outInteger;
_outInteger = omc_InteractiveUtil_lengthComponentReplacementRules(threadData, _inComponentReplacementRules);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_joinComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules1, modelica_metatype _inComponentReplacementRules2)
{
modelica_metatype _outComponentReplacementRules = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inComponentReplacementRules1;
tmp3_2 = _inComponentReplacementRules2;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps1 = NULL;
modelica_metatype _comps2 = NULL;
modelica_integer _len;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
_comps1 = tmpMeta[1];
_comps2 = tmpMeta[2];
_comps = omc_List_union(threadData, _comps1, _comps2);
_len = listLength(_comps);
tmpMeta[1] = mmc_mk_box3(3, &GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc, _comps, mmc_mk_integer(_len));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentReplacementRules = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_emptyComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentReplacementRules;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_emptyComponentReplacementRules(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_InteractiveUtil_emptyComponentReplacementRules(threadData, _inComponentReplacementRules);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_makeComponentsReplacementRulesFromComponents(threadData_t *threadData, modelica_metatype _inComponents1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outComponentReplacementRules = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inComponents1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _comps = NULL;
modelica_metatype _res = NULL;
modelica_metatype _cr_from = NULL;
modelica_metatype _cr_to = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr_from_1 = NULL;
modelica_metatype _cr_to_1 = NULL;
modelica_metatype _path_class = NULL;
modelica_metatype _comp_rep = NULL;
modelica_metatype _comps_1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
_comps = tmp3_1;
tmp5 = omc_InteractiveUtil_emptyComponents(threadData, _comps);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _OMC_LIT438;
goto tmp2_done;
}
case 1: {
_comps = tmp3_1;
_cr_from = tmp3_2;
_cr_to = tmp3_3;
tmpMeta[1] = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_path_class = tmpMeta[2];
_cr = tmpMeta[3];
_cr_from_1 = omc_AbsynUtil_joinCrefs(threadData, _cr, _cr_from);
_cr_to_1 = omc_AbsynUtil_joinCrefs(threadData, _cr, _cr_to);
tmpMeta[1] = mmc_mk_box4(3, &GlobalScript_ComponentReplacement_COMPONENTREPLACEMENT__desc, _path_class, _cr_from_1, _cr_to_1);
_comp_rep = tmpMeta[1];
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_makeComponentsReplacementRulesFromComponents(threadData, _res, _cr_from, _cr_to);
tmpMeta[1] = mmc_mk_cons(_comp_rep, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(3, &GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc, tmpMeta[1], mmc_mk_integer(((modelica_integer) 1)));
tmpMeta[0] = omc_InteractiveUtil_joinComponentReplacementRules(threadData, _comps_1, tmpMeta[2]);
goto tmp2_done;
}
case 2: {
_comps = tmp3_1;
_cr_from = tmp3_2;
_cr_to = tmp3_3;
tmpMeta[1] = omc_InteractiveUtil_firstComponent(threadData, _comps);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_path_class = tmpMeta[2];
tmpMeta[1] = mmc_mk_box4(3, &GlobalScript_ComponentReplacement_COMPONENTREPLACEMENT__desc, _path_class, _cr_from, _cr_to);
_comp_rep = tmpMeta[1];
_res = omc_InteractiveUtil_restComponents(threadData, _comps);
_comps_1 = omc_InteractiveUtil_makeComponentsReplacementRulesFromComponents(threadData, _res, _cr_from, _cr_to);
tmpMeta[1] = mmc_mk_cons(_comp_rep, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(3, &GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc, tmpMeta[1], mmc_mk_integer(((modelica_integer) 1)));
tmpMeta[0] = omc_InteractiveUtil_joinComponentReplacementRules(threadData, _comps_1, tmpMeta[2]);
goto tmp2_done;
}
case 3: {
fputs(MMC_STRINGDATA(_OMC_LIT440),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponentReplacementRules = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getNewComponentreplacementsrulesForEachRule(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules)
{
modelica_metatype _outComponentReplacementRules = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inComponents;
tmp3_2 = _inComponentReplacementRules;
{
modelica_metatype _comps = NULL;
modelica_metatype _comps_1 = NULL;
modelica_metatype _comp_reps = NULL;
modelica_metatype _comp_reps_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comp_reps_2 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
_comp_reps = tmp3_2;
tmp5 = omc_InteractiveUtil_emptyComponentReplacementRules(threadData, _comp_reps);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _comp_reps;
goto tmp2_done;
}
case 1: {
_comps = tmp3_1;
_comp_reps = tmp3_2;
tmpMeta[1] = omc_InteractiveUtil_firstComponentReplacement(threadData, _comp_reps);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_path = tmpMeta[2];
_cr1 = tmpMeta[3];
_cr2 = tmpMeta[4];
_comps_1 = omc_InteractiveUtil_getComponentsWithType(threadData, _comps, _path);
_comp_reps_1 = omc_InteractiveUtil_makeComponentsReplacementRulesFromComponents(threadData, _comps_1, _cr1, _cr2);
_res = omc_InteractiveUtil_restComponentReplacementRules(threadData, _comp_reps);
_comp_reps_2 = omc_InteractiveUtil_getNewComponentreplacementsrulesForEachRule(threadData, _comps, _res);
tmpMeta[0] = omc_InteractiveUtil_joinComponentReplacementRules(threadData, _comp_reps_1, _comp_reps_2);
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT441),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponentReplacementRules = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_getComponentreplacementsrules(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules, modelica_integer _inInteger)
{
modelica_metatype _outComponentReplacementRules = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_integer tmp3_3;
tmp3_1 = _inComponents;
tmp3_2 = _inComponentReplacementRules;
tmp3_3 = _inInteger;
{
modelica_integer _len;
modelica_integer _old_len;
modelica_metatype _comps = NULL;
modelica_metatype _comp_reps = NULL;
modelica_metatype _comp_reps_1 = NULL;
modelica_metatype _comp_reps_2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_comp_reps = tmp3_2;
_old_len = tmp3_3;
_len = omc_InteractiveUtil_lengthComponentReplacementRules(threadData, _comp_reps);
if((!(_len == _old_len)))
{
goto goto_1;
}
tmpMeta[0] = _comp_reps;
goto tmp2_done;
}
case 1: {
_comps = tmp3_1;
_comp_reps = tmp3_2;
_old_len = omc_InteractiveUtil_lengthComponentReplacementRules(threadData, _comp_reps);
_comp_reps_1 = omc_InteractiveUtil_getNewComponentreplacementsrulesForEachRule(threadData, _comps, _comp_reps);
_comp_reps_2 = omc_InteractiveUtil_joinComponentReplacementRules(threadData, _comp_reps_1, _comp_reps);
tmpMeta[0] = omc_InteractiveUtil_getComponentreplacementsrules(threadData, _comps, _comp_reps_2, _old_len);
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT442),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponentReplacementRules = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_getComponentreplacementsrules(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inComponentReplacementRules, modelica_metatype _inInteger)
{
modelica_integer tmp1;
modelica_metatype _outComponentReplacementRules = NULL;
tmp1 = mmc_unbox_integer(_inInteger);
_outComponentReplacementRules = omc_InteractiveUtil_getComponentreplacementsrules(threadData, _inComponents, _inComponentReplacementRules, tmp1);
return _outComponentReplacementRules;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceStartInComponentRef2(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inComponentRef1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_string _id = NULL;
modelica_string _id2 = NULL;
modelica_string _id3 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _cr3 = NULL;
modelica_metatype _a = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_3,2,2) == 0) goto tmp2_end;
_id = tmpMeta[1];
_id2 = tmpMeta[2];
_res = tmp3_3;
tmp3 += 2;
tmp5 = (stringEqual(_id, _id2));
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _res;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_3,2,2) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
_id = tmpMeta[1];
_a = tmpMeta[2];
_cr1 = tmpMeta[3];
_id2 = tmpMeta[4];
_id3 = tmpMeta[5];
tmp3 += 1;
tmp6 = (stringEqual(_id, _id2));
if (1 != tmp6) goto goto_1;
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _id3, _a, _cr1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,3) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_3,1,3) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_3), 4));
_id = tmpMeta[1];
_a = tmpMeta[2];
_cr1 = tmpMeta[3];
_id2 = tmpMeta[4];
_cr2 = tmpMeta[5];
_id3 = tmpMeta[6];
_cr3 = tmpMeta[7];
tmp7 = (stringEqual(_id, _id2));
if (1 != tmp7) goto goto_1;
_cr = omc_InteractiveUtil_replaceStartInComponentRef2(threadData, _cr1, _cr2, _cr3);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _id3, _a, _cr);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _inComponentRef1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_replaceStartInComponentRef(threadData_t *threadData, modelica_metatype _cr1, modelica_metatype _cr2, modelica_metatype _cr3)
{
modelica_metatype _res = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = omc_InteractiveUtil_replaceStartInComponentRef2(threadData, _cr1, _cr2, _cr3);
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExternalDecl(threadData_t *threadData, modelica_metatype _external_, modelica_metatype _old_comp, modelica_metatype _new_comp)
{
modelica_metatype _external_1 = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
fputs(MMC_STRINGDATA(_OMC_LIT443),stdout);
_external_1 = _external_;
_return: OMC_LABEL_UNUSED
return _external_1;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInNamedArgs(threadData_t *threadData, modelica_metatype _inAbsynNamedArgLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynNamedArgLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynNamedArgLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_string _id = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_id = tmpMeta[3];
_exp = tmpMeta[4];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInNamedArgs(threadData, _res, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _id, _exp_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT444),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynNamedArgLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynNamedArgLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInIterators(threadData_t *threadData, modelica_metatype _iterators, modelica_metatype _oldComp, modelica_metatype _newComp)
{
modelica_metatype _iteratorsRenamed = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype __omcQ_24tmpVar35;
modelica_metatype* tmp1;
modelica_metatype __omcQ_24tmpVar34;
int tmp6;
modelica_metatype _it_loopVar = 0;
modelica_metatype _it;
_it_loopVar = _iterators;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar35 = tmpMeta[1];
tmp1 = &__omcQ_24tmpVar35;
while(1) {
tmp6 = 1;
if (!listEmpty(_it_loopVar)) {
_it = MMC_CAR(_it_loopVar);
_it_loopVar = MMC_CDR(_it_loopVar);
tmp6--;
}
if (tmp6 == 0) {
{
modelica_metatype tmp4_1;
tmp4_1 = _it;
{
modelica_metatype _exp = NULL;
modelica_string _i = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (optionNone(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
_i = tmpMeta[3];
_exp = tmpMeta[6];
_exp = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _oldComp, _newComp);
tmpMeta[3] = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _i, mmc_mk_none(), mmc_mk_some(_exp));
tmpMeta[2] = tmpMeta[3];
goto tmp3_done;
}
case 1: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!optionNone(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (!optionNone(tmpMeta[5])) goto tmp3_end;
_i = tmpMeta[3];
tmpMeta[3] = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _i, mmc_mk_none(), mmc_mk_none());
tmpMeta[2] = tmpMeta[3];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}__omcQ_24tmpVar34 = tmpMeta[2];
*tmp1 = mmc_mk_cons(__omcQ_24tmpVar34,0);
tmp1 = &MMC_CDR(*tmp1);
} else if (tmp6 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp1 = mmc_mk_nil();
tmpMeta[0] = __omcQ_24tmpVar35;
}
_iteratorsRenamed = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _iteratorsRenamed;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInFunctionArgs(threadData_t *threadData, modelica_metatype _inFunctionArgs1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outFunctionArgs = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inFunctionArgs1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _exps_1 = NULL;
modelica_metatype _exps = NULL;
modelica_metatype _namedArg_1 = NULL;
modelica_metatype _namedArg = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _iterators = NULL;
modelica_metatype _iteratorsRenamed = NULL;
modelica_metatype _iterType = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exps = tmpMeta[1];
_namedArg = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 1;
_exps_1 = omc_InteractiveUtil_renameComponentInExpList(threadData, _exps, _old_comp, _new_comp);
_namedArg_1 = omc_InteractiveUtil_renameComponentInNamedArgs(threadData, _namedArg, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _exps_1, _namedArg_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp = tmpMeta[1];
_iterType = tmpMeta[2];
_iterators = tmpMeta[3];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_iteratorsRenamed = omc_InteractiveUtil_renameComponentInIterators(threadData, _iterators, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_FunctionArgs_FOR__ITER__FARG__desc, _exp1_1, _iterType, _iteratorsRenamed);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT445),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outFunctionArgs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outFunctionArgs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpAlgoritmsList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynAlgorithmItemLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outTplAbsynExpAbsynAlgorithmItemLstLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inTplAbsynExpAbsynAlgorithmItemLstLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _algs_1 = NULL;
modelica_metatype _algs = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_exp = tmpMeta[3];
_algs = tmpMeta[4];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_algs_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInExpAlgoritmsList(threadData, _res, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box2(0, _exp_1, _algs_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT446),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTplAbsynExpAbsynAlgorithmItemLstLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTplAbsynExpAbsynAlgorithmItemLstLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInAlgorithm(threadData_t *threadData, modelica_metatype _inAlgorithm1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAlgorithm = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inAlgorithm1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _cr_1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp2_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _algs1_1 = NULL;
modelica_metatype _algs2_1 = NULL;
modelica_metatype _algs1 = NULL;
modelica_metatype _algs2 = NULL;
modelica_metatype _algs_1 = NULL;
modelica_metatype _algs = NULL;
modelica_metatype _exp_algs_list_1 = NULL;
modelica_metatype _exp_algs_list = NULL;
modelica_string _id = NULL;
modelica_metatype _func_args_1 = NULL;
modelica_metatype _func_args = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 7; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr = tmpMeta[2];
_exp = tmpMeta[3];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_cr_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cr, _old_comp, _new_comp);
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr_1);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Algorithm_ALG__ASSIGN__desc, tmpMeta[1], _exp_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],16,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Algorithm_ALG__ASSIGN__desc, _exp1_1, _exp2_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_exp = tmpMeta[1];
_algs1 = tmpMeta[2];
_exp_algs_list = tmpMeta[3];
_algs2 = tmpMeta[4];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_algs1_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs1, _old_comp, _new_comp);
_exp_algs_list_1 = omc_InteractiveUtil_renameComponentInExpAlgoritmsList(threadData, _exp_algs_list, _old_comp, _new_comp);
_algs2_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs2, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box5(4, &Absyn_Algorithm_ALG__IF__desc, _exp_1, _algs1_1, _exp_algs_list_1, _algs2_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (!optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (optionNone(tmpMeta[6])) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 1));
if (!listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[4];
_exp = tmpMeta[7];
_algs = tmpMeta[8];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_algs_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _id, mmc_mk_none(), mmc_mk_some(_exp_1));
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(5, &Absyn_Algorithm_ALG__FOR__desc, tmpMeta[1], _algs_1);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exp = tmpMeta[1];
_algs = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_algs_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(7, &Absyn_Algorithm_ALG__WHILE__desc, _exp_1, _algs_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp = tmpMeta[1];
_algs = tmpMeta[2];
_exp_algs_list = tmpMeta[3];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_algs_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs, _old_comp, _new_comp);
_exp_algs_list_1 = omc_InteractiveUtil_renameComponentInExpAlgoritmsList(threadData, _exp_algs_list, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(8, &Absyn_Algorithm_ALG__WHEN__A__desc, _exp_1, _algs_1, _exp_algs_list_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr = tmpMeta[1];
_func_args = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_cr_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cr, _old_comp, _new_comp);
_func_args_1 = omc_InteractiveUtil_renameComponentInFunctionArgs(threadData, _func_args, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(9, &Absyn_Algorithm_ALG__NORETCALL__desc, _cr_1, _func_args_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAlgorithm = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAlgorithm;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInAlgorithms(threadData_t *threadData, modelica_metatype _inAbsynAlgorithmItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynAlgorithmItemLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inAbsynAlgorithmItemLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _algorithm_1 = NULL;
modelica_metatype _algorithm_ = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_algorithm_ = tmpMeta[1];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_res_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _res, _old_comp, _new_comp);
_algorithm_1 = _algorithm_;
tmpMeta[1] = mmc_mk_cons(_algorithm_1, _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAbsynAlgorithmItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynAlgorithmItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExp(threadData_t *threadData, modelica_metatype _inExp1, modelica_metatype _oldPrefix, modelica_metatype _newPrefix)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inExp1;
tmp3_2 = _oldPrefix;
tmp3_3 = _newPrefix;
{
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp2_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _exp3_1 = NULL;
modelica_metatype _exp3 = NULL;
modelica_metatype _op = NULL;
modelica_metatype _exp_tuple_list_1 = NULL;
modelica_metatype _exp_tuple_list = NULL;
modelica_metatype _func_args = NULL;
modelica_metatype _exp_list_1 = NULL;
modelica_metatype _exp_list = NULL;
modelica_metatype _exp_list_list_1 = NULL;
modelica_metatype _exp_list_list = NULL;
modelica_metatype _code_1 = NULL;
modelica_metatype _code = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 20; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmp3 += 18;
tmpMeta[0] = _inExp1;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmp3 += 17;
tmpMeta[0] = _inExp1;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 16;
_cr_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cr, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmp3 += 15;
tmpMeta[0] = _inExp1;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,1) == 0) goto tmp2_end;
tmp3 += 14;
tmpMeta[0] = _inExp1;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp1 = tmpMeta[1];
_op = tmpMeta[2];
_exp2 = tmpMeta[3];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 13;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(8, &Absyn_Exp_BINARY__desc, _exp1_1, _op, _exp2_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_op = tmpMeta[1];
_exp = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 12;
_exp = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(9, &Absyn_Exp_UNARY__desc, _op, _exp);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp1 = tmpMeta[1];
_op = tmpMeta[2];
_exp2 = tmpMeta[3];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 11;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(10, &Absyn_Exp_LBINARY__desc, _exp1_1, _op, _exp2_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_op = tmpMeta[1];
_exp = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 10;
_exp = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(11, &Absyn_Exp_LUNARY__desc, _op, _exp);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp1 = tmpMeta[1];
_op = tmpMeta[2];
_exp2 = tmpMeta[3];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 9;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(12, &Absyn_Exp_RELATION__desc, _exp1_1, _op, _exp2_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[2];
_exp3 = tmpMeta[3];
_exp_tuple_list = tmpMeta[4];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 8;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
_exp3_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp3, _old_comp, _new_comp);
_exp_tuple_list_1 = omc_InteractiveUtil_renameComponentInExpTupleList(threadData, _exp_tuple_list, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box5(13, &Absyn_Exp_IFEXP__desc, _exp1_1, _exp2_1, _exp3_1, _exp_tuple_list_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cref = tmpMeta[1];
_func_args = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 7;
_cref = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cref, _old_comp, _new_comp);
_func_args = omc_InteractiveUtil_renameComponentInFunctionArgs(threadData, _func_args, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, _cref, _func_args, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp1), 4))));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exp_list = tmpMeta[1];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 6;
_exp_list_1 = omc_InteractiveUtil_renameComponentInExpList(threadData, _exp_list, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box2(16, &Absyn_Exp_ARRAY__desc, _exp_list_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,14,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exp_list_list = tmpMeta[1];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 5;
_exp_list_list_1 = omc_InteractiveUtil_renameComponentInExpListList(threadData, _exp_list_list, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box2(17, &Absyn_Exp_MATRIX__desc, _exp_list_list_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,15,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[3];
_exp3 = tmpMeta[4];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 4;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
_exp3_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp3, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(18, &Absyn_Exp_RANGE__desc, _exp1_1, mmc_mk_some(_exp2_1), _exp3_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,15,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (!optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp1 = tmpMeta[1];
_exp3 = tmpMeta[3];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 3;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp3_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp3, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(18, &Absyn_Exp_RANGE__desc, _exp1_1, mmc_mk_none(), _exp3_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exp_list = tmpMeta[1];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 2;
_exp_list_1 = omc_InteractiveUtil_renameComponentInExpList(threadData, _exp_list, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box2(19, &Absyn_Exp_TUPLE__desc, _exp_list_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,0) == 0) goto tmp2_end;
tmp3 += 1;
tmpMeta[0] = _OMC_LIT447;
goto tmp2_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_code = tmpMeta[1];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_code_1 = omc_InteractiveUtil_renameComponentInCode(threadData, _code, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box2(21, &Absyn_Exp_CODE__desc, _code_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 19: {
fputs(MMC_STRINGDATA(_OMC_LIT448),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 20) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInCode(threadData_t *threadData, modelica_metatype _inCode1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outCode = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inCode1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _path = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _eqn_items_1 = NULL;
modelica_metatype _eqn_items = NULL;
modelica_boolean _b;
modelica_boolean _finalPrefix;
modelica_metatype _algs_1 = NULL;
modelica_metatype _algs = NULL;
modelica_metatype _elementspec_1 = NULL;
modelica_metatype _elementspec = NULL;
modelica_metatype _redeclare_ = NULL;
modelica_metatype _inner_outer = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constrainClass = NULL;
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _element_args_1 = NULL;
modelica_metatype _element_args = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 8; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(3, &Absyn_CodeNode_C__TYPENAME__desc, _path);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_cr_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cr, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_CodeNode_C__VARIABLENAME__desc, _cr_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_b = tmp5;
_eqn_items = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_eqn_items_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _eqn_items, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(6, &Absyn_CodeNode_C__EQUATIONSECTION__desc, mmc_mk_boolean(_b), _eqn_items_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_b = tmp6;
_algs = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_algs_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algs, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(7, &Absyn_CodeNode_C__ALGORITHMSECTION__desc, mmc_mk_boolean(_b), _algs_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmp7 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
_finalPrefix = tmp7;
_redeclare_ = tmpMeta[3];
_inner_outer = tmpMeta[4];
_elementspec = tmpMeta[5];
_info = tmpMeta[6];
_constrainClass = tmpMeta[7];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_elementspec_1 = omc_InteractiveUtil_renameComponentInElementSpec(threadData, _elementspec, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_finalPrefix), _redeclare_, _inner_outer, _elementspec_1, _info, _constrainClass);
tmpMeta[2] = mmc_mk_box2(8, &Absyn_CodeNode_C__ELEMENT__desc, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exp = tmpMeta[1];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box2(9, &Absyn_CodeNode_C__EXPRESSION__desc, _exp_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_element_args = tmpMeta[2];
_exp = tmpMeta[4];
_info = tmpMeta[5];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_element_args_1 = omc_InteractiveUtil_renameComponentInElementArgList(threadData, _element_args, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _exp_1, _info);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _element_args_1, tmpMeta[1]);
tmpMeta[3] = mmc_mk_box2(10, &Absyn_CodeNode_C__MODIFICATION__desc, tmpMeta[2]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,0) == 0) goto tmp2_end;
_element_args = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_element_args_1 = omc_InteractiveUtil_renameComponentInElementArgList(threadData, _element_args, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _element_args_1, _OMC_LIT35);
tmpMeta[2] = mmc_mk_box2(10, &Absyn_CodeNode_C__MODIFICATION__desc, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCode = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCode;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementArg(threadData_t *threadData, modelica_metatype _inElementArg1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outElementArg = NULL;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inElementArg1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _p = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _element_args_1 = NULL;
modelica_metatype _element_args = NULL;
modelica_boolean _b;
modelica_metatype _each_ = NULL;
modelica_metatype _str = NULL;
modelica_metatype _element_spec_1 = NULL;
modelica_metatype _element_spec2_1 = NULL;
modelica_metatype _element_spec = NULL;
modelica_metatype _element_spec2 = NULL;
modelica_metatype _redecl = NULL;
modelica_metatype _c = NULL;
modelica_metatype _info = NULL;
modelica_metatype _mod_info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],1,2) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_b = tmp5;
_each_ = tmpMeta[2];
_p = tmpMeta[3];
_element_args = tmpMeta[6];
_exp = tmpMeta[8];
_info = tmpMeta[9];
_str = tmpMeta[10];
_mod_info = tmpMeta[11];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_p_1 = omc_AbsynUtil_crefToPath(threadData, omc_InteractiveUtil_replaceStartInComponentRef(threadData, omc_AbsynUtil_pathToCref(threadData, _p), _old_comp, _new_comp));
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_element_args_1 = omc_InteractiveUtil_renameComponentInElementArgList(threadData, _element_args, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(4, &Absyn_EqMod_EQMOD__desc, _exp_1, _info);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _element_args_1, tmpMeta[1]);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_b), _each_, _p_1, mmc_mk_some(tmpMeta[2]), _str, _mod_info);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 1: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,0) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_b = tmp6;
_each_ = tmpMeta[2];
_p = tmpMeta[3];
_element_args = tmpMeta[6];
_str = tmpMeta[8];
_mod_info = tmpMeta[9];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_p_1 = omc_AbsynUtil_crefToPath(threadData, omc_InteractiveUtil_replaceStartInComponentRef(threadData, omc_AbsynUtil_pathToCref(threadData, _p), _old_comp, _new_comp));
_element_args_1 = omc_InteractiveUtil_renameComponentInElementArgList(threadData, _element_args, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _element_args_1, _OMC_LIT35);
tmpMeta[2] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_b), _each_, _p_1, mmc_mk_some(tmpMeta[1]), _str, _mod_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (!optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_b = tmp7;
_each_ = tmpMeta[2];
_p = tmpMeta[3];
_str = tmpMeta[5];
_mod_info = tmpMeta[6];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_p_1 = omc_AbsynUtil_crefToPath(threadData, omc_InteractiveUtil_replaceStartInComponentRef(threadData, omc_AbsynUtil_pathToCref(threadData, _p), _old_comp, _new_comp));
tmpMeta[1] = mmc_mk_box7(3, &Absyn_ElementArg_MODIFICATION__desc, mmc_mk_boolean(_b), _each_, _p_1, mmc_mk_none(), _str, _mod_info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
modelica_integer tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp8 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_b = tmp8;
_redecl = tmpMeta[2];
_each_ = tmpMeta[3];
_element_spec = tmpMeta[4];
_element_spec2 = tmpMeta[7];
_c = tmpMeta[8];
_info = tmpMeta[9];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_element_spec_1 = omc_InteractiveUtil_renameComponentInElementSpec(threadData, _element_spec, _old_comp, _new_comp);
_element_spec2_1 = omc_InteractiveUtil_renameComponentInElementSpec(threadData, _element_spec2, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_ConstrainClass_CONSTRAINCLASS__desc, _element_spec2_1, _c);
tmpMeta[2] = mmc_mk_box7(4, &Absyn_ElementArg_REDECLARATION__desc, mmc_mk_boolean(_b), _redecl, _each_, _element_spec_1, mmc_mk_some(tmpMeta[1]), _info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 4: {
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp9 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
if (!optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_b = tmp9;
_redecl = tmpMeta[2];
_each_ = tmpMeta[3];
_element_spec = tmpMeta[4];
_info = tmpMeta[6];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_element_spec_1 = omc_InteractiveUtil_renameComponentInElementSpec(threadData, _element_spec, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box7(4, &Absyn_ElementArg_REDECLARATION__desc, mmc_mk_boolean(_b), _redecl, _each_, _element_spec_1, mmc_mk_none(), _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElementArg = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementArgList(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynElementArgLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynElementArgLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _element_arg_1 = NULL;
modelica_metatype _element_arg = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_element_arg = tmpMeta[1];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_element_arg_1 = omc_InteractiveUtil_renameComponentInElementArg(threadData, _element_arg, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInElementArgList(threadData, _res, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_cons(_element_arg_1, _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT449),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementArgLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementArgLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpTupleList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynExpLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outTplAbsynExpAbsynExpLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inTplAbsynExpAbsynExpLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp2_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_exp1 = tmpMeta[3];
_exp2 = tmpMeta[4];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInExpTupleList(threadData, _res, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box2(0, _exp1_1, _exp2_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT450),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTplAbsynExpAbsynExpLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTplAbsynExpAbsynExpLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpListList(threadData_t *threadData, modelica_metatype _inAbsynExpLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynExpLstLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynExpLstLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_exp = tmpMeta[1];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExpList(threadData, _exp, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInExpListList(threadData, _res, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_cons(_exp_1, _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT451),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynExpLstLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynExpLstLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpList(threadData_t *threadData, modelica_metatype _inAbsynExpLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynExpLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynExpLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_exp = tmpMeta[1];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInExpList(threadData, _res, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_cons(_exp_1, _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT452),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynExpLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynExpLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInEquation(threadData_t *threadData, modelica_metatype _inEquation1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outEquation = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inEquation1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp2_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _true_items_1 = NULL;
modelica_metatype _elses_1 = NULL;
modelica_metatype _true_items = NULL;
modelica_metatype _elses = NULL;
modelica_metatype _equations_1 = NULL;
modelica_metatype _equations = NULL;
modelica_metatype _exp_elseifs_1 = NULL;
modelica_metatype _exp_elseifs = NULL;
modelica_metatype _exp_equations_1 = NULL;
modelica_metatype _exp_equations = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _cref1_1 = NULL;
modelica_metatype _cref2_1 = NULL;
modelica_metatype _cref1 = NULL;
modelica_metatype _cref2 = NULL;
modelica_metatype _cref = NULL;
modelica_string _ident = NULL;
modelica_metatype _function_args = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 8; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_exp = tmpMeta[1];
_true_items = tmpMeta[2];
_exp_elseifs = tmpMeta[3];
_elses = tmpMeta[4];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 6;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_true_items_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _true_items, _old_comp, _new_comp);
_exp_elseifs_1 = omc_InteractiveUtil_renameComponentInExpEquationitemList(threadData, _exp_elseifs, _old_comp, _new_comp);
_elses_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _elses, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box5(3, &Absyn_Equation_EQ__IF__desc, _exp_1, _true_items_1, _exp_elseifs_1, _elses_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 5;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(4, &Absyn_Equation_EQ__EQUALS__desc, _exp1_1, _exp2_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[2];
_cref1 = tmpMeta[3];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 4;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_exp2_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp2, _old_comp, _new_comp);
_cref1_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cref1, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(5, &Absyn_Equation_EQ__PDE__desc, _exp1_1, _exp2_1, _cref1_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cref1 = tmpMeta[1];
_cref2 = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 3;
_cref1_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cref1, _old_comp, _new_comp);
_cref2_1 = omc_InteractiveUtil_replaceStartInComponentRef(threadData, _cref2, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _cref1_1, _cref2_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (!optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (optionNone(tmpMeta[6])) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 1));
if (!listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_ident = tmpMeta[4];
_exp = tmpMeta[7];
_equations = tmpMeta[8];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 2;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_equations_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _equations, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _ident, mmc_mk_none(), mmc_mk_some(_exp_1));
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(7, &Absyn_Equation_EQ__FOR__desc, tmpMeta[1], _equations_1);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp = tmpMeta[1];
_equations = tmpMeta[2];
_exp_equations = tmpMeta[3];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 1;
_exp_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp, _old_comp, _new_comp);
_equations_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _equations, _old_comp, _new_comp);
_exp_equations_1 = omc_InteractiveUtil_renameComponentInExpEquationitemList(threadData, _exp_equations, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(8, &Absyn_Equation_EQ__WHEN__E__desc, _exp_1, _equations_1, _exp_equations_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cref = tmpMeta[1];
_function_args = tmpMeta[2];
fputs(MMC_STRINGDATA(_OMC_LIT453),stdout);
tmpMeta[1] = mmc_mk_box3(9, &Absyn_Equation_EQ__NORETCALL__desc, _cref, _function_args);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
fputs(MMC_STRINGDATA(_OMC_LIT454),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 8) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outEquation = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEquation;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInExpEquationitemList(threadData_t *threadData, modelica_metatype _inTplAbsynExpAbsynEquationItemLstLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outTplAbsynExpAbsynEquationItemLstLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inTplAbsynExpAbsynEquationItemLstLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _eqn_item_1 = NULL;
modelica_metatype _eqn_item = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_exp1 = tmpMeta[3];
_eqn_item = tmpMeta[4];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_exp1_1 = omc_InteractiveUtil_renameComponentInExp(threadData, _exp1, _old_comp, _new_comp);
_eqn_item_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _eqn_item, _old_comp, _new_comp);
_res_1 = omc_InteractiveUtil_renameComponentInExpEquationitemList(threadData, _res, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box2(0, _exp1_1, _eqn_item_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT455),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTplAbsynExpAbsynEquationItemLstLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTplAbsynExpAbsynEquationItemLstLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInEquationList(threadData_t *threadData, modelica_metatype _inAbsynEquationItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynEquationItemLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynEquationItemLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _equation_1 = NULL;
modelica_metatype _equation_ = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _info = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _equation_item = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_equation_ = tmpMeta[3];
_cmt = tmpMeta[4];
_info = tmpMeta[5];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_res_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _res, _old_comp, _new_comp);
_equation_1 = omc_InteractiveUtil_renameComponentInEquation(threadData, _equation_, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, _equation_1, _cmt, _info);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_equation_item = tmpMeta[1];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_res_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _res, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_cons(_equation_item, _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynEquationItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynEquationItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInComponentitems(threadData_t *threadData, modelica_metatype _inAbsynComponentItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynComponentItemLst = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynComponentItemLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _old_comp_path = NULL;
modelica_metatype _new_comp_path = NULL;
modelica_string _old_comp_string = NULL;
modelica_string _new_comp_string = NULL;
modelica_string _name = NULL;
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comp_1 = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _arrayDim = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _comment = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_name = tmpMeta[4];
_arrayDim = tmpMeta[5];
_mod = tmpMeta[6];
_cond = tmpMeta[7];
_comment = tmpMeta[8];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_old_comp_path = omc_AbsynUtil_crefToPath(threadData, _old_comp);
_old_comp_string = omc_AbsynUtil_pathString(threadData, _old_comp_path, _OMC_LIT0, 1, 0);
tmp5 = (stringEqual(_name, _old_comp_string));
if (1 != tmp5) goto goto_1;
_new_comp_path = omc_AbsynUtil_crefToPath(threadData, _new_comp);
_new_comp_string = omc_AbsynUtil_pathString(threadData, _new_comp_path, _OMC_LIT0, 1, 0);
_res_1 = omc_InteractiveUtil_renameComponentInComponentitems(threadData, _res, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(3, &Absyn_Component_COMPONENT__desc, _new_comp_string, _arrayDim, _mod);
tmpMeta[2] = mmc_mk_box4(3, &Absyn_ComponentItem_COMPONENTITEM__desc, tmpMeta[1], _cond, _comment);
_comp_1 = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_comp_1, _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_comp = tmpMeta[1];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_res_1 = omc_InteractiveUtil_renameComponentInComponentitems(threadData, _res, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_cons(_comp, _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
fputs(MMC_STRINGDATA(_OMC_LIT456),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynComponentItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynComponentItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outElementSpec = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inElementSpec1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _comps_1 = NULL;
modelica_metatype _comps = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _path = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_attr = tmpMeta[1];
_path = tmpMeta[2];
_comps = tmpMeta[3];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_comps_1 = omc_InteractiveUtil_renameComponentInComponentitems(threadData, _comps, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(6, &Absyn_ElementSpec_COMPONENTS__desc, _attr, _path, _comps_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inElementSpec1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElementSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElementSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInElements(threadData_t *threadData, modelica_metatype _inAbsynElementItemLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynElementItemLst = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynElementItemLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elementspec_1 = NULL;
modelica_metatype _elementspec = NULL;
modelica_metatype _element_1 = NULL;
modelica_metatype _element = NULL;
modelica_boolean _finalPrefix;
modelica_metatype _redeclare_ = NULL;
modelica_metatype _inner_outer = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constrainClass = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_integer tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 6));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 7));
_finalPrefix = tmp5;
_redeclare_ = tmpMeta[5];
_inner_outer = tmpMeta[6];
_elementspec = tmpMeta[7];
_info = tmpMeta[8];
_constrainClass = tmpMeta[9];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_res_1 = omc_InteractiveUtil_renameComponentInElements(threadData, _res, _old_comp, _new_comp);
_elementspec_1 = omc_InteractiveUtil_renameComponentInElementSpec(threadData, _elementspec, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_finalPrefix), _redeclare_, _inner_outer, _elementspec_1, _info, _constrainClass);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta[1]);
_element_1 = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_element_1, _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_element = tmpMeta[1];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_res_1 = omc_InteractiveUtil_renameComponentInElements(threadData, _res, _old_comp, _new_comp);
_element_1 = _element;
tmpMeta[1] = mmc_mk_cons(_element_1, _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynElementItemLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynElementItemLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInParts(threadData_t *threadData, modelica_metatype _inAbsynClassPartLst1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outAbsynClassPartLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAbsynClassPartLst1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _res_1 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _elements_1 = NULL;
modelica_metatype _elements = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _equations_1 = NULL;
modelica_metatype _equations = NULL;
modelica_metatype _algorithms_1 = NULL;
modelica_metatype _algorithms = NULL;
modelica_metatype _external_decl_1 = NULL;
modelica_metatype _external_decl = NULL;
modelica_metatype _ano = NULL;
modelica_metatype _a = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 9; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 8;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elements = tmpMeta[3];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 6;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_elements_1 = omc_InteractiveUtil_renameComponentInElements(threadData, _elements, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elements_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elements = tmpMeta[3];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 5;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_elements_1 = omc_InteractiveUtil_renameComponentInElements(threadData, _elements, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elements_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_equations = tmpMeta[3];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 4;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_equations_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _equations, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _equations_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_equations = tmpMeta[3];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 3;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_equations_1 = omc_InteractiveUtil_renameComponentInEquationList(threadData, _equations, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box2(7, &Absyn_ClassPart_INITIALEQUATIONS__desc, _equations_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],5,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_algorithms = tmpMeta[3];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 2;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_algorithms_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algorithms, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box2(8, &Absyn_ClassPart_ALGORITHMS__desc, _algorithms_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_algorithms = tmpMeta[3];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 1;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_algorithms_1 = omc_InteractiveUtil_renameComponentInAlgorithms(threadData, _algorithms, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box2(9, &Absyn_ClassPart_INITIALALGORITHMS__desc, _algorithms_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_external_decl = tmpMeta[3];
_ano = tmpMeta[4];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
_external_decl_1 = omc_InteractiveUtil_renameComponentInExternalDecl(threadData, _external_decl, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box3(10, &Absyn_ClassPart_EXTERNAL__desc, _external_decl_1, _ano);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 8: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_a = tmpMeta[1];
_res = tmpMeta[2];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_res_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _res, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_cons(_a, _res_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 9) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynClassPartLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynClassPartLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentInClass(threadData_t *threadData, modelica_metatype _inClass1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inClass1;
tmp3_2 = _inComponentRef2;
tmp3_3 = _inComponentRef3;
{
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_string _name = NULL;
modelica_string _baseClassName = NULL;
modelica_boolean _partialPrefix;
modelica_boolean _finalPrefix;
modelica_boolean _encapsulatedPrefix;
modelica_metatype _restriction = NULL;
modelica_metatype _a = NULL;
modelica_metatype _c = NULL;
modelica_metatype _file_info = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _b = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_partialPrefix = tmp5;
_finalPrefix = tmp6;
_encapsulatedPrefix = tmp7;
_restriction = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_a = tmpMeta[11];
_file_info = tmpMeta[12];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
tmp3 += 1;
_parts_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _parts, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _a);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_partialPrefix = tmp8;
_finalPrefix = tmp9;
_encapsulatedPrefix = tmp10;
_restriction = tmpMeta[5];
_baseClassName = tmpMeta[7];
_b = tmpMeta[8];
_c = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_old_comp = tmp3_2;
_new_comp = tmp3_3;
_parts_1 = omc_InteractiveUtil_renameComponentInParts(threadData, _parts, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _b, _c, _parts_1, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta[1], _file_info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
tmpMeta[0] = _inClass1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentVisitor(threadData_t *threadData, modelica_metatype _inTplAbsynClassAbsynPathOptionComponentReplacement)
{
modelica_metatype _outTplAbsynClassAbsynPathOptionComponentReplacement = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inTplAbsynClassAbsynPathOptionComponentReplacement;
{
modelica_metatype _path_1 = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _class_id = NULL;
modelica_metatype _class_1 = NULL;
modelica_metatype _class_ = NULL;
modelica_string _id = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _args = NULL;
modelica_metatype _opath = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
_class_ = tmpMeta[1];
_id = tmpMeta[2];
_pa = tmpMeta[4];
_class_id = tmpMeta[6];
_old_comp = tmpMeta[7];
_new_comp = tmpMeta[8];
tmp3 += 1;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = omc_AbsynUtil_joinPaths(threadData, _pa, tmpMeta[1]);
tmp5 = omc_AbsynUtil_pathEqual(threadData, _class_id, _path_1);
if (1 != tmp5) goto goto_1;
_class_1 = omc_InteractiveUtil_renameComponentInClass(threadData, _class_, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(3, &GlobalScript_ComponentReplacement_COMPONENTREPLACEMENT__desc, _class_id, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box3(0, _class_1, mmc_mk_some(_pa), tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_class_ = tmpMeta[1];
_id = tmpMeta[2];
_class_id = tmpMeta[5];
_old_comp = tmpMeta[6];
_new_comp = tmpMeta[7];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path_1 = tmpMeta[1];
tmp6 = omc_AbsynUtil_pathEqual(threadData, _class_id, _path_1);
if (1 != tmp6) goto goto_1;
_class_1 = omc_InteractiveUtil_renameComponentInClass(threadData, _class_, _old_comp, _new_comp);
tmpMeta[1] = mmc_mk_box4(3, &GlobalScript_ComponentReplacement_COMPONENTREPLACEMENT__desc, _class_id, _old_comp, _new_comp);
tmpMeta[2] = mmc_mk_box3(0, _class_1, mmc_mk_none(), tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_class_ = tmpMeta[1];
_opath = tmpMeta[2];
_args = tmpMeta[3];
tmpMeta[1] = mmc_mk_box3(0, _class_, _opath, _args);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTplAbsynClassAbsynPathOptionComponentReplacement = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTplAbsynClassAbsynPathOptionComponentReplacement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_renameComponentFromComponentreplacements(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inComponentReplacementRules)
{
modelica_metatype _outProgram = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inProgram;
tmp3_2 = _inComponentReplacementRules;
{
modelica_metatype _p = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _comp_reps = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comp_rep = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
_p = tmp3_1;
_comp_reps = tmp3_2;
tmp5 = omc_InteractiveUtil_emptyComponentReplacementRules(threadData, _comp_reps);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _p;
goto tmp2_done;
}
case 1: {
_p = tmp3_1;
_comp_reps = tmp3_2;
_comp_rep = omc_InteractiveUtil_firstComponentReplacement(threadData, _comp_reps);
tmpMeta[1] = omc_AbsynUtil_traverseClasses(threadData, _p, mmc_mk_none(), boxvar_InteractiveUtil_renameComponentVisitor, _comp_rep, 1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_p_1 = tmpMeta[2];
_res = omc_InteractiveUtil_restComponentReplacementRules(threadData, _comp_reps);
tmpMeta[0] = omc_InteractiveUtil_renameComponentFromComponentreplacements(threadData, _p_1, _res);
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT457),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outProgram = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outProgram;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractRenamedClassesAsStringList(threadData_t *threadData, modelica_metatype _inComponentReplacementRules)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inComponentReplacementRules;
{
modelica_metatype _comp_reps = NULL;
modelica_metatype _res = NULL;
modelica_metatype _path = NULL;
modelica_string _path_str = NULL;
modelica_metatype _res_1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
_comp_reps = tmp3_1;
tmp5 = omc_InteractiveUtil_emptyComponentReplacementRules(threadData, _comp_reps);
if (1 != tmp5) goto goto_1;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
_comp_reps = tmp3_1;
tmpMeta[1] = omc_InteractiveUtil_firstComponentReplacement(threadData, _comp_reps);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_path = tmpMeta[2];
_path_str = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT0, 1, 0);
_res = omc_InteractiveUtil_restComponentReplacementRules(threadData, _comp_reps);
_res_1 = omc_InteractiveUtil_extractRenamedClassesAsStringList(threadData, _res);
tmpMeta[1] = mmc_mk_cons(_path_str, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = omc_List_union(threadData, tmpMeta[1], _res_1);
goto tmp2_done;
}
case 2: {
fputs(MMC_STRINGDATA(_OMC_LIT458),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStringLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStringLst;
}
DLLExport
modelica_string omc_InteractiveUtil_renameComponentOnlyInClass(threadData_t *threadData, modelica_metatype _inProgram1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inComponentRef4, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inProgram1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inComponentRef4;
{
modelica_metatype _p = NULL;
modelica_string _paths_2 = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _cl = NULL;
modelica_metatype _model_path = NULL;
modelica_string _str = NULL;
modelica_metatype _w = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_p = tmp4_1;
_class_ = tmp4_2;
_model_path = omc_AbsynUtil_crefToPath(threadData, _class_);
tmp6 = omc_InteractiveUtil_isClassReadOnly(threadData, omc_InteractiveUtil_getPathedClassInProgram(threadData, _model_path, _p, 0));
if (1 != tmp6) goto goto_2;
_str = omc_AbsynUtil_pathString(threadData, _model_path, _OMC_LIT0, 1, 0);
tmpMeta[2] = stringAppend(_OMC_LIT334,_str);
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT459);
_str = tmpMeta[3];
tmp1_c0 = _str;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
case 1: {
_p = tmp4_1;
_class_ = tmp4_2;
_old_comp = tmp4_3;
_new_comp = tmp4_4;
_model_path = omc_AbsynUtil_crefToPath(threadData, _class_);
_cl = omc_InteractiveUtil_getPathedClassInProgram(threadData, _model_path, _p, 0);
_cl = omc_InteractiveUtil_renameComponentInClass(threadData, _cl, _old_comp, _new_comp);
_w = omc_InteractiveUtil_buildWithin(threadData, omc_AbsynUtil_makeFullyQualified(threadData, _model_path));
tmpMeta[2] = mmc_mk_cons(_cl, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[2], _w);
_p = omc_InteractiveUtil_updateProgram(threadData, tmpMeta[3], _p, 0);
_str = omc_AbsynUtil_pathString(threadData, _model_path, _OMC_LIT0, 1, 0);
tmpMeta[2] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_str, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
_paths_2 = stringAppendList(tmpMeta[2]);
tmp1_c0 = _paths_2;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
case 2: {
if(omc_Flags_isSet(threadData, _OMC_LIT464))
{
omc_Debug_trace(threadData, _OMC_LIT460);
}
tmp1_c0 = _OMC_LIT52;
tmpMeta[0+1] = _inProgram1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
DLLExport
modelica_string omc_InteractiveUtil_renameComponent(threadData_t *threadData, modelica_metatype _inProgram1, modelica_metatype _inComponentRef2, modelica_metatype _inComponentRef3, modelica_metatype _inComponentRef4, modelica_metatype *out_outProgram)
{
modelica_string _outString = NULL;
modelica_metatype _outProgram = NULL;
modelica_string tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inProgram1;
tmp4_2 = _inComponentRef2;
tmp4_3 = _inComponentRef3;
tmp4_4 = _inComponentRef4;
{
modelica_metatype _comp_reps = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _p = NULL;
modelica_metatype _paths = NULL;
modelica_string _paths_1 = NULL;
modelica_string _paths_2 = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _old_comp = NULL;
modelica_metatype _new_comp = NULL;
modelica_metatype _model_path = NULL;
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_p = tmp4_1;
_class_ = tmp4_2;
_model_path = omc_AbsynUtil_crefToPath(threadData, _class_);
tmp6 = omc_InteractiveUtil_isClassReadOnly(threadData, omc_InteractiveUtil_getPathedClassInProgram(threadData, _model_path, _p, 0));
if (1 != tmp6) goto goto_2;
_str = omc_AbsynUtil_pathString(threadData, _model_path, _OMC_LIT0, 1, 0);
tmpMeta[2] = stringAppend(_OMC_LIT334,_str);
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT459);
_str = tmpMeta[3];
tmp1_c0 = _str;
tmpMeta[0+1] = _p;
goto tmp3_done;
}
case 1: {
_p = tmp4_1;
_class_ = tmp4_2;
_old_comp = tmp4_3;
_new_comp = tmp4_4;
_comp_reps = omc_InteractiveUtil_extractAllComponentreplacements(threadData, _p, _class_, _old_comp, _new_comp);
_p_1 = omc_InteractiveUtil_renameComponentFromComponentreplacements(threadData, _p, _comp_reps);
_paths = omc_InteractiveUtil_extractRenamedClassesAsStringList(threadData, _comp_reps);
_paths_1 = stringDelimitList(_paths, _OMC_LIT10);
tmpMeta[2] = mmc_mk_cons(_OMC_LIT12, mmc_mk_cons(_paths_1, mmc_mk_cons(_OMC_LIT13, MMC_REFSTRUCTLIT(mmc_nil))));
_paths_2 = stringAppendList(tmpMeta[2]);
tmp1_c0 = _paths_2;
tmpMeta[0+1] = _p_1;
goto tmp3_done;
}
case 2: {
if(omc_Flags_isSet(threadData, _OMC_LIT464))
{
omc_Debug_trace(threadData, _OMC_LIT465);
}
tmp1_c0 = _OMC_LIT52;
tmpMeta[0+1] = _inProgram1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outString = tmp1_c0;
_outProgram = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outProgram) { *out_outProgram = _outProgram; }
return _outString;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_InteractiveUtil_isClassReadOnly(threadData_t *threadData, modelica_metatype _cl)
{
modelica_boolean _readOnly;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _cl;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmp6 = mmc_unbox_integer(tmpMeta[1]);
_readOnly = tmp6;
tmp1 = _readOnly;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_readOnly = tmp1;
_return: OMC_LABEL_UNUSED
return _readOnly;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InteractiveUtil_isClassReadOnly(threadData_t *threadData, modelica_metatype _cl)
{
modelica_boolean _readOnly;
modelica_metatype out_readOnly;
_readOnly = omc_InteractiveUtil_isClassReadOnly(threadData, _cl);
out_readOnly = mmc_mk_icon(_readOnly);
return out_readOnly;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InteractiveUtil_extractAllComponentreplacements(threadData_t *threadData, modelica_metatype _p, modelica_metatype _class_, modelica_metatype _cref1, modelica_metatype _cref2)
{
modelica_metatype _comp_reps = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _comps = NULL;
modelica_metatype _class_path = NULL;
modelica_metatype _comp_repsrules = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT466);
_comps = omc_InteractiveUtil_extractAllComponents(threadData, _p, omc_AbsynUtil_crefToPath(threadData, _class_));
omc_ErrorExt_rollBack(threadData, _OMC_LIT466);
tmp5 = omc_InteractiveUtil_isClassReadOnly(threadData, omc_InteractiveUtil_getPathedClassInProgram(threadData, omc_AbsynUtil_crefToPath(threadData, _class_), _p, 0));
if (0 != tmp5) goto goto_1;
_class_path = omc_AbsynUtil_crefToPath(threadData, _class_);
tmpMeta[2] = mmc_mk_box4(3, &GlobalScript_ComponentReplacement_COMPONENTREPLACEMENT__desc, _class_path, _cref1, _cref2);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(3, &GlobalScript_ComponentReplacementRules_COMPONENTREPLACEMENTRULES__desc, tmpMeta[1], mmc_mk_integer(((modelica_integer) 1)));
_comp_repsrules = tmpMeta[3];
tmpMeta[0] = omc_InteractiveUtil_getComponentreplacementsrules(threadData, _comps, _comp_repsrules, ((modelica_integer) 0));
goto tmp2_done;
}
case 1: {
omc_ErrorExt_delCheckpoint(threadData, _OMC_LIT466);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_comp_reps = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _comp_reps;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InteractiveUtil_listClass(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _p)
{
modelica_string _classStr = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cl = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_path = omc_AbsynUtil_crefToPath(threadData, _cr);
_cl = omc_InteractiveUtil_getPathedClassInProgram(threadData, _path, _p, 0);
tmpMeta[0] = mmc_mk_cons(_cl, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Program_PROGRAM__desc, tmpMeta[0], _OMC_LIT7);
_classStr = omc_Dump_unparseStr(threadData, tmpMeta[1], 0, _OMC_LIT467);
_return: OMC_LABEL_UNUSED
return _classStr;
}
