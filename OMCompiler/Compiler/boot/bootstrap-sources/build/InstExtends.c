#ifdef OMC_BASE_FILE
#define OMC_FILE OMC_BASE_FILE
#else
#define OMC_FILE "/home/mahge/dev/OpenModelica/OMCompiler/Compiler/boot/build/tmp/InstExtends.c"
#endif
#include "omc_simulation_settings.h"
#include "InstExtends.h"
#define _OMC_LIT0_data "failtrace"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,9,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
#define _OMC_LIT1_data "Sets whether to print a failtrace or not."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT1,41,_OMC_LIT1_data);
#define _OMC_LIT1 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT1)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT2,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT1}};
#define _OMC_LIT2 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT2)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT3,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT0,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT2}};
#define _OMC_LIT3 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT3)
#define _OMC_LIT4_data "InstExtends.fixModifications failed: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT4,37,_OMC_LIT4_data);
#define _OMC_LIT4 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT4)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT5,10,3) {&SCodeDump_SCodeDumpOptions_OPTIONS__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT5 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT5)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT6,1,3) {&SCode_Encapsulated_ENCAPSULATED__desc,}};
#define _OMC_LIT6 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT6)
#define _OMC_LIT7_data "InstExtends.lookupVarNoErrorMessage"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT7,35,_OMC_LIT7_data);
#define _OMC_LIT7 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data "InstExtends.fixStatement failed: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,33,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "/home/mahge/dev/OpenModelica/OMCompiler/Compiler/FrontEnd/InstExtends.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,72,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT10_6,1605721860.0);
#define _OMC_LIT10_6 MMC_REFREALLIT(_OMC_LIT_STRUCT10_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT10,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT9,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1390)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1391)),MMC_IMMEDIATE(MMC_TAGFIXNUM(94)),_OMC_LIT10_6}};
#define _OMC_LIT10 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT10)
#define _OMC_LIT11_data "- Inst.fixEquation failed: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT11,27,_OMC_LIT11_data);
#define _OMC_LIT11 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT11)
#define _OMC_LIT12_data "InstExtends.fixClassDef failed: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT12,32,_OMC_LIT12_data);
#define _OMC_LIT12 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT12)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT13,1,4) {&SCode_Encapsulated_NOT__ENCAPSULATED__desc,}};
#define _OMC_LIT13 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT13)
#define _OMC_LIT14_data "InstExtends.fixElement failed: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT14,31,_OMC_LIT14_data);
#define _OMC_LIT14 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT14)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT15,1,5) {&DAE_Mod_NOMOD__desc,}};
#define _OMC_LIT15 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT15)
#define _OMC_LIT16_data "- InstExtends.updateComponentsAndClassdefs2 failed on:\nenv = "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT16,61,_OMC_LIT16_data);
#define _OMC_LIT16 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT16)
#define _OMC_LIT17_data "\nmod = "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT17,7,_OMC_LIT17_data);
#define _OMC_LIT17 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT17)
#define _OMC_LIT18_data "\ncmod = "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT18,8,_OMC_LIT18_data);
#define _OMC_LIT18 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT18)
#define _OMC_LIT19_data "\nbool = "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT19,8,_OMC_LIT19_data);
#define _OMC_LIT19 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT19)
#define _OMC_LIT20_data "true"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT20,4,_OMC_LIT20_data);
#define _OMC_LIT20 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT20)
#define _OMC_LIT21_data "false"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT21,5,_OMC_LIT21_data);
#define _OMC_LIT21 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT21)
#define _OMC_LIT22_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT22,1,_OMC_LIT22_data);
#define _OMC_LIT22 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT22)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT23,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT23 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT23)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT24,1,5) {&ErrorTypes_Severity_WARNING__desc,}};
#define _OMC_LIT24 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT24)
#define _OMC_LIT25_data "Ignoring external declaration of the extended class: %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT25,56,_OMC_LIT25_data);
#define _OMC_LIT25 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT25)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT26,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT25}};
#define _OMC_LIT26 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT26)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT27,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(160)),_OMC_LIT23,_OMC_LIT24,_OMC_LIT26}};
#define _OMC_LIT27 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT27)
#define _OMC_LIT28_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT28,0,_OMC_LIT28_data);
#define _OMC_LIT28 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT28)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT29,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT29 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT29)
#define _OMC_LIT30_data "The maximum recursion depth of was reached when instantiating a derived class. Current class %s in scope %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT30,108,_OMC_LIT30_data);
#define _OMC_LIT30 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT30)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT31,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT30}};
#define _OMC_LIT31 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT31)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT32,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(534)),_OMC_LIT23,_OMC_LIT29,_OMC_LIT31}};
#define _OMC_LIT32 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT32)
#define _OMC_LIT33_data "- Inst.instDerivedClasses failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT33,33,_OMC_LIT33_data);
#define _OMC_LIT33 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT33)
#define _OMC_LIT34_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT34,1,_OMC_LIT34_data);
#define _OMC_LIT34 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT34)
#define _OMC_LIT35_data "TODO: Make a proper Error message here - Inst.instClassExtendsList2 couldn't find the class to extend"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT35,101,_OMC_LIT35_data);
#define _OMC_LIT35 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT35)
#define _OMC_LIT36_data "$parent."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT36,8,_OMC_LIT36_data);
#define _OMC_LIT36 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT36)
#define _OMC_LIT37_data ".$env."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT37,6,_OMC_LIT37_data);
#define _OMC_LIT37 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT37)
#define _OMC_LIT38_data "- Inst.instClassExtendsList failed "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT38,35,_OMC_LIT38_data);
#define _OMC_LIT38 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT38)
#define _OMC_LIT39_data "  Candidate classes: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT39,21,_OMC_LIT39_data);
#define _OMC_LIT39 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT39)
#define _OMC_LIT40_data ","
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT40,1,_OMC_LIT40_data);
#define _OMC_LIT40 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT40)
#define _OMC_LIT41_data "Duplicate elements:\n %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT41,24,_OMC_LIT41_data);
#define _OMC_LIT41 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT41)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT42,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT41}};
#define _OMC_LIT42 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT42)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT43,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(7025)),_OMC_LIT23,_OMC_LIT29,_OMC_LIT42}};
#define _OMC_LIT43 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT43)
#define _OMC_LIT44_data "Base class %s not found in scope %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT44,36,_OMC_LIT44_data);
#define _OMC_LIT44 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT44)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT45,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT44}};
#define _OMC_LIT45 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT45)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT46,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(39)),_OMC_LIT23,_OMC_LIT29,_OMC_LIT45}};
#define _OMC_LIT46 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "permissive"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,10,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT48,1,3) {&Flags_FlagVisibility_INTERNAL__desc,}};
#define _OMC_LIT48 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT48)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT49,2,4) {&Flags_FlagData_BOOL__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT49 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "Disables some error checks to allow erroneous models to compile."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,64,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT51,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT50}};
#define _OMC_LIT51 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT51)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT52,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(87)),_OMC_LIT47,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT48,_OMC_LIT49,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT51}};
#define _OMC_LIT52 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT52)
#define _OMC_LIT53_data "- Inst.instExtendsList failed on:\n	className: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT53,46,_OMC_LIT53_data);
#define _OMC_LIT53 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT53)
#define _OMC_LIT54_data "\n	"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT54,2,_OMC_LIT54_data);
#define _OMC_LIT54 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT54)
#define _OMC_LIT55_data "env:       "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT55,11,_OMC_LIT55_data);
#define _OMC_LIT55 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT55)
#define _OMC_LIT56_data "mods:      "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT56,11,_OMC_LIT56_data);
#define _OMC_LIT56 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT56)
#define _OMC_LIT57_data "elem:      "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT57,11,_OMC_LIT57_data);
#define _OMC_LIT57 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT57)
#include "util/modelica.h"
#include "InstExtends_includes.h"
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixTuple2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype __omcQ_24in_5Ftpl, modelica_metatype _tree, modelica_fnptr _fixA, modelica_fnptr _fixB);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixTuple2,2,0) {(void*) boxptr_InstExtends_fixTuple2,0}};
#define boxvar_InstExtends_fixTuple2 MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixTuple2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixListTuple2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inRest, modelica_metatype _tree, modelica_fnptr _fixA, modelica_fnptr _fixB);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixListTuple2,2,0) {(void*) boxptr_InstExtends_fixListTuple2,0}};
#define boxvar_InstExtends_fixListTuple2 MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixListTuple2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixListList(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inA, modelica_metatype _tree, modelica_fnptr _fixA);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixListList,2,0) {(void*) boxptr_InstExtends_fixListList,0}};
#define boxvar_InstExtends_fixListList MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixListList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixList(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inA, modelica_metatype _tree, modelica_fnptr _fixA);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixList,2,0) {(void*) boxptr_InstExtends_fixList,0}};
#define boxvar_InstExtends_fixList MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixOption(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inA, modelica_metatype _tree, modelica_fnptr _fixA);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixOption,2,0) {(void*) boxptr_InstExtends_fixOption,0}};
#define boxvar_InstExtends_fixOption MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixOption)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixExpTraverse(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Ftpl, modelica_metatype *out_tpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixExpTraverse,2,0) {(void*) boxptr_InstExtends_fixExpTraverse,0}};
#define boxvar_InstExtends_fixExpTraverse MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixExpTraverse)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixExp(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inExp, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixExp,2,0) {(void*) boxptr_InstExtends_fixExp,0}};
#define boxvar_InstExtends_fixExp MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixSubMod(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype __omcQ_24in_5FsubMod, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixSubMod,2,0) {(void*) boxptr_InstExtends_fixSubMod,0}};
#define boxvar_InstExtends_fixSubMod MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixSubMod)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixModifications(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inMod, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixModifications,2,0) {(void*) boxptr_InstExtends_fixModifications,0}};
#define boxvar_InstExtends_fixModifications MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixModifications)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixCref(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inCref, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixCref,2,0) {(void*) boxptr_InstExtends_fixCref,0}};
#define boxvar_InstExtends_fixCref MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixCref)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_lookupVarNoErrorMessage(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _ident, modelica_string *out_id);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_lookupVarNoErrorMessage,2,0) {(void*) boxptr_InstExtends_lookupVarNoErrorMessage,0}};
#define boxvar_InstExtends_lookupVarNoErrorMessage MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_lookupVarNoErrorMessage)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixPath(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixPath,2,0) {(void*) boxptr_InstExtends_fixPath,0}};
#define boxvar_InstExtends_fixPath MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixPath)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixTypeSpec(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inTs, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixTypeSpec,2,0) {(void*) boxptr_InstExtends_fixTypeSpec,0}};
#define boxvar_InstExtends_fixTypeSpec MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixTypeSpec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixSubscript(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inSub, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixSubscript,2,0) {(void*) boxptr_InstExtends_fixSubscript,0}};
#define boxvar_InstExtends_fixSubscript MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixSubscript)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixArrayDim(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype __omcQ_24in_5Fads, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixArrayDim,2,0) {(void*) boxptr_InstExtends_fixArrayDim,0}};
#define boxvar_InstExtends_fixArrayDim MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixArrayDim)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixStatement(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inStmt, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixStatement,2,0) {(void*) boxptr_InstExtends_fixStatement,0}};
#define boxvar_InstExtends_fixStatement MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixStatement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixListAlgorithmItem(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _env, modelica_metatype _alg, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixListAlgorithmItem,2,0) {(void*) boxptr_InstExtends_fixListAlgorithmItem,0}};
#define boxvar_InstExtends_fixListAlgorithmItem MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixListAlgorithmItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixConstraint(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inConstrs, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixConstraint,2,0) {(void*) boxptr_InstExtends_fixConstraint,0}};
#define boxvar_InstExtends_fixConstraint MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixConstraint)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixAlgorithm(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inAlg, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixAlgorithm,2,0) {(void*) boxptr_InstExtends_fixAlgorithm,0}};
#define boxvar_InstExtends_fixAlgorithm MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixAlgorithm)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixListEEquation(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _env, modelica_metatype _eeq, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixListEEquation,2,0) {(void*) boxptr_InstExtends_fixListEEquation,0}};
#define boxvar_InstExtends_fixListEEquation MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixListEEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixEEquation(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inEeq, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixEEquation,2,0) {(void*) boxptr_InstExtends_fixEEquation,0}};
#define boxvar_InstExtends_fixEEquation MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixEEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixEquation(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inEq, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixEquation,2,0) {(void*) boxptr_InstExtends_fixEquation,0}};
#define boxvar_InstExtends_fixEquation MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixEquation)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixClassdef(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inCd, modelica_metatype _inTree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixClassdef,2,0) {(void*) boxptr_InstExtends_fixClassdef,0}};
#define boxvar_InstExtends_fixClassdef MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixClassdef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixElement(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inElt, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixElement,2,0) {(void*) boxptr_InstExtends_fixElement,0}};
#define boxvar_InstExtends_fixElement MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixLocalIdent(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype __omcQ_24in_5Felt, modelica_metatype _tree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_fixLocalIdent,2,0) {(void*) boxptr_InstExtends_fixLocalIdent,0}};
#define boxvar_InstExtends_fixLocalIdent MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_fixLocalIdent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_getLocalIdentElement(threadData_t *threadData, modelica_metatype _elt, modelica_metatype __omcQ_24in_5Ftree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_getLocalIdentElement,2,0) {(void*) boxptr_InstExtends_getLocalIdentElement,0}};
#define boxvar_InstExtends_getLocalIdentElement MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_getLocalIdentElement)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_getLocalIdentElementTpl(threadData_t *threadData, modelica_metatype _eltTpl, modelica_metatype __omcQ_24in_5Ftree);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_getLocalIdentElementTpl,2,0) {(void*) boxptr_InstExtends_getLocalIdentElementTpl,0}};
#define boxvar_InstExtends_getLocalIdentElementTpl MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_getLocalIdentElementTpl)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_getLocalIdentList(threadData_t *threadData, modelica_metatype _ielts, modelica_metatype __omcQ_24in_5Ftree, modelica_fnptr _getIdent);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_getLocalIdentList,2,0) {(void*) boxptr_InstExtends_getLocalIdentList,0}};
#define boxvar_InstExtends_getLocalIdentList MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_getLocalIdentList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_updateComponentsAndClassdefs2(threadData_t *threadData, modelica_metatype _inComponent, modelica_metatype _inEnv, modelica_metatype _inMod, modelica_metatype *out_outRestMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_updateComponentsAndClassdefs2,2,0) {(void*) boxptr_InstExtends_updateComponentsAndClassdefs2,0}};
#define boxvar_InstExtends_updateComponentsAndClassdefs2 MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_updateComponentsAndClassdefs2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_updateComponentsAndClassdefs(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inMod, modelica_metatype _inEnv, modelica_metatype *out_outRestMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_updateComponentsAndClassdefs,2,0) {(void*) boxptr_InstExtends_updateComponentsAndClassdefs,0}};
#define boxvar_InstExtends_updateComponentsAndClassdefs MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_updateComponentsAndClassdefs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_noImportElements(threadData_t *threadData, modelica_metatype _inElements);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_noImportElements,2,0) {(void*) boxptr_InstExtends_noImportElements,0}};
#define boxvar_InstExtends_noImportElements MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_noImportElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_instDerivedClassesWork(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inClass, modelica_boolean _inBoolean, modelica_metatype _inInfo, modelica_boolean _overflow, modelica_integer _numIter, modelica_metatype *out_outEnv1, modelica_metatype *out_outIH, modelica_metatype *out_outSCodeElementLst2, modelica_metatype *out_outSCodeEquationLst3, modelica_metatype *out_outSCodeEquationLst4, modelica_metatype *out_outSCodeAlgorithmLst5, modelica_metatype *out_outSCodeAlgorithmLst6, modelica_metatype *out_outMod, modelica_metatype *out_outComments);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InstExtends_instDerivedClassesWork(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inClass, modelica_metatype _inBoolean, modelica_metatype _inInfo, modelica_metatype _overflow, modelica_metatype _numIter, modelica_metatype *out_outEnv1, modelica_metatype *out_outIH, modelica_metatype *out_outSCodeElementLst2, modelica_metatype *out_outSCodeEquationLst3, modelica_metatype *out_outSCodeEquationLst4, modelica_metatype *out_outSCodeAlgorithmLst5, modelica_metatype *out_outSCodeAlgorithmLst6, modelica_metatype *out_outMod, modelica_metatype *out_outComments);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_instDerivedClassesWork,2,0) {(void*) boxptr_InstExtends_instDerivedClassesWork,0}};
#define boxvar_InstExtends_instDerivedClassesWork MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_instDerivedClassesWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_instClassExtendsList2(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inMod, modelica_string _inName, modelica_metatype _inClassExtendsElt, modelica_metatype _inElements, modelica_metatype *out_outElements);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_instClassExtendsList2,2,0) {(void*) boxptr_InstExtends_instClassExtendsList2,0}};
#define boxvar_InstExtends_instClassExtendsList2 MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_instClassExtendsList2)
PROTECTED_FUNCTION_STATIC modelica_string omc_InstExtends_buildClassExtendsName(threadData_t *threadData, modelica_string _inEnvPath, modelica_string _inClassName);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_buildClassExtendsName,2,0) {(void*) boxptr_InstExtends_buildClassExtendsName,0}};
#define boxvar_InstExtends_buildClassExtendsName MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_buildClassExtendsName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_instClassExtendsList(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inMod, modelica_metatype _inClassExtendsList, modelica_metatype _inElements, modelica_metatype *out_outElements);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_instClassExtendsList,2,0) {(void*) boxptr_InstExtends_instClassExtendsList,0}};
#define boxvar_InstExtends_instClassExtendsList MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_instClassExtendsList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_instExtendsAndClassExtendsList2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inExtendsElementLst, modelica_metatype _inClassExtendsElementLst, modelica_metatype _inElementsFromExtendsScope, modelica_metatype _inState, modelica_string _inClassName, modelica_boolean _inImpl, modelica_boolean _isPartialInst, modelica_metatype *out_outEnv, modelica_metatype *out_outIH, modelica_metatype *out_outMod, modelica_metatype *out_outElements, modelica_metatype *out_outNormalEqs, modelica_metatype *out_outInitialEqs, modelica_metatype *out_outNormalAlgs, modelica_metatype *out_outInitialAlgs, modelica_metatype *out_comments);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InstExtends_instExtendsAndClassExtendsList2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inExtendsElementLst, modelica_metatype _inClassExtendsElementLst, modelica_metatype _inElementsFromExtendsScope, modelica_metatype _inState, modelica_metatype _inClassName, modelica_metatype _inImpl, modelica_metatype _isPartialInst, modelica_metatype *out_outEnv, modelica_metatype *out_outIH, modelica_metatype *out_outMod, modelica_metatype *out_outElements, modelica_metatype *out_outNormalEqs, modelica_metatype *out_outInitialEqs, modelica_metatype *out_outNormalAlgs, modelica_metatype *out_outInitialAlgs, modelica_metatype *out_comments);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_instExtendsAndClassExtendsList2,2,0) {(void*) boxptr_InstExtends_instExtendsAndClassExtendsList2,0}};
#define boxvar_InstExtends_instExtendsAndClassExtendsList2 MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_instExtendsAndClassExtendsList2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_updateElementListVisibility(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inVisibility);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_updateElementListVisibility,2,0) {(void*) boxptr_InstExtends_updateElementListVisibility,0}};
#define boxvar_InstExtends_updateElementListVisibility MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_updateElementListVisibility)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_lookupBaseClass(threadData_t *threadData, modelica_metatype _inPath, modelica_boolean _inSelfReference, modelica_string _inClassName, modelica_metatype _inEnv, modelica_metatype _inCache, modelica_metatype *out_outElement, modelica_metatype *out_outEnv);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InstExtends_lookupBaseClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inSelfReference, modelica_metatype _inClassName, modelica_metatype _inEnv, modelica_metatype _inCache, modelica_metatype *out_outElement, modelica_metatype *out_outEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_lookupBaseClass,2,0) {(void*) boxptr_InstExtends_lookupBaseClass,0}};
#define boxvar_InstExtends_lookupBaseClass MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_lookupBaseClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_instExtendsList(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inLocalElements, modelica_metatype _inElementsFromExtendsScope, modelica_metatype _inState, modelica_string _inClassName, modelica_boolean _inImpl, modelica_boolean _inPartialInst, modelica_metatype *out_outEnv, modelica_metatype *out_outIH, modelica_metatype *out_outMod, modelica_metatype *out_outElements, modelica_metatype *out_outNormalEqs, modelica_metatype *out_outInitialEqs, modelica_metatype *out_outNormalAlgs, modelica_metatype *out_outInitialAlgs, modelica_metatype *out_outComments);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InstExtends_instExtendsList(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inLocalElements, modelica_metatype _inElementsFromExtendsScope, modelica_metatype _inState, modelica_metatype _inClassName, modelica_metatype _inImpl, modelica_metatype _inPartialInst, modelica_metatype *out_outEnv, modelica_metatype *out_outIH, modelica_metatype *out_outMod, modelica_metatype *out_outElements, modelica_metatype *out_outNormalEqs, modelica_metatype *out_outInitialEqs, modelica_metatype *out_outNormalAlgs, modelica_metatype *out_outInitialAlgs, modelica_metatype *out_outComments);
static const MMC_DEFSTRUCTLIT(boxvar_lit_InstExtends_instExtendsList,2,0) {(void*) boxptr_InstExtends_instExtendsList,0}};
#define boxvar_InstExtends_instExtendsList MMC_REFSTRUCTLIT(boxvar_lit_InstExtends_instExtendsList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixTuple2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype __omcQ_24in_5Ftpl, modelica_metatype _tree, modelica_fnptr _fixA, modelica_fnptr _fixB)
{
modelica_metatype _tpl = NULL;
modelica_metatype _a1 = NULL;
modelica_metatype _a2 = NULL;
modelica_metatype _b1 = NULL;
modelica_metatype _b2 = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_tpl = __omcQ_24in_5Ftpl;
tmpMeta[0] = _tpl;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_a1 = tmpMeta[1];
_b1 = tmpMeta[2];
_a2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA), 2))), _inCache, _inEnv, _a1, _tree) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA), 1)))) (threadData, _inCache, _inEnv, _a1, _tree);
_b2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixB), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixB), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixB), 2))), _inCache, _inEnv, _b1, _tree) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixB), 1)))) (threadData, _inCache, _inEnv, _b1, _tree);
if((!(referenceEq(_a1, _a2) && referenceEq(_b1, _b2))))
{
tmpMeta[0] = mmc_mk_box2(0, _a2, _b2);
_tpl = tmpMeta[0];
}
_return: OMC_LABEL_UNUSED
return _tpl;
}
static modelica_metatype closure0_InstExtends_fixTuple2(threadData_t *thData, modelica_metatype closure, modelica_metatype inCache, modelica_metatype inEnv, modelica_metatype $in_tpl, modelica_metatype tree)
{
modelica_fnptr fixA = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_fnptr fixB = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
return boxptr_InstExtends_fixTuple2(thData, inCache, inEnv, $in_tpl, tree, fixA, fixB);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixListTuple2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inRest, modelica_metatype _tree, modelica_fnptr _fixA, modelica_fnptr _fixB)
{
modelica_metatype _outA = NULL;
modelica_metatype _a1 = NULL;
modelica_metatype _a2 = NULL;
modelica_metatype _b1 = NULL;
modelica_metatype _b2 = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(0, ((modelica_fnptr) _fixA), ((modelica_fnptr) _fixB));
_outA = omc_InstExtends_fixList(threadData, _inCache, _inEnv, _inRest, _tree, (modelica_fnptr) mmc_mk_box2(0,closure0_InstExtends_fixTuple2,tmpMeta[0]));
_return: OMC_LABEL_UNUSED
return _outA;
}
static modelica_metatype closure1_InstExtends_fixList(threadData_t *thData, modelica_metatype closure, modelica_metatype inA)
{
modelica_metatype inCache = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype inEnv = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
modelica_metatype tree = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
modelica_fnptr fixA = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),4));
return boxptr_InstExtends_fixList(thData, inCache, inEnv, inA, tree, fixA);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixListList(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inA, modelica_metatype _tree, modelica_fnptr _fixA)
{
modelica_metatype _outA = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outA = tmpMeta[0];
if(listEmpty(_inA))
{
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_outA = tmpMeta[1];
goto _return;
}
tmpMeta[1] = mmc_mk_box4(0, _inCache, _inEnv, _tree, ((modelica_fnptr) _fixA));
_outA = omc_List_mapCheckReferenceEq(threadData, _inA, (modelica_fnptr) mmc_mk_box2(0,closure1_InstExtends_fixList,tmpMeta[1]));
_return: OMC_LABEL_UNUSED
return _outA;
}
static modelica_metatype closure2_fixA(threadData_t *thData, modelica_metatype closure, modelica_metatype inA)
{
modelica_metatype inCache = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
modelica_metatype inEnv = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),2));
modelica_metatype tree = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),3));
modelica_fnptr _fixA = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),4));
if (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA),2))) {
return  ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA), 1)))) (thData, MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA),2)), inCache, inEnv, inA, tree);
} else {
return  ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA), 1)))) (thData, inCache, inEnv, inA, tree);
}
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixList(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inA, modelica_metatype _tree, modelica_fnptr _fixA)
{
modelica_metatype _outA = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(listEmpty(_inA))
{
_outA = _inA;
goto _return;
}
tmpMeta[0] = mmc_mk_box4(0, _inCache, _inEnv, _tree, _fixA);
_outA = omc_List_mapCheckReferenceEq(threadData, _inA, (modelica_fnptr) mmc_mk_box2(0,closure2_fixA,tmpMeta[0]));
_return: OMC_LABEL_UNUSED
return _outA;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixOption(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inA, modelica_metatype _tree, modelica_fnptr _fixA)
{
modelica_metatype _outA = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inA;
{
modelica_metatype _A1 = NULL;
modelica_metatype _A2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _inA;
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
_A1 = tmpMeta[1];
_A2 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA), 2))), _inCache, _inEnv, _A1, _tree) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_fixA), 1)))) (threadData, _inCache, _inEnv, _A1, _tree);
tmpMeta[0] = (referenceEq(_A1, _A2)?_inA:mmc_mk_some(_A2));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outA = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outA;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixExpTraverse(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fexp, modelica_metatype __omcQ_24in_5Ftpl, modelica_metatype *out_tpl)
{
modelica_metatype _exp = NULL;
modelica_metatype _tpl = NULL;
modelica_metatype _inExp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_exp = __omcQ_24in_5Fexp;
_tpl = __omcQ_24in_5Ftpl;
_inExp = _exp;
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _exp;
tmp3_2 = _tpl;
{
modelica_metatype _fargs = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _cref1 = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _tree = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_cref = tmpMeta[1];
_cache = tmpMeta[2];
_env = tmpMeta[3];
_tree = tmpMeta[4];
_cref1 = omc_InstExtends_fixCref(threadData, _cache, _env, _cref, _tree);
tmp5 = (modelica_boolean)referenceEq(_cref, _cref1);
if(tmp5)
{
tmpMeta[2] = _exp;
}
else
{
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cref1);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_cref = tmpMeta[1];
_cache = tmpMeta[2];
_env = tmpMeta[3];
_tree = tmpMeta[4];
_cref1 = omc_InstExtends_fixCref(threadData, _cache, _env, _cref, _tree);
tmp6 = (modelica_boolean)referenceEq(_cref, _cref1);
if(tmp6)
{
tmpMeta[2] = _exp;
}
else
{
tmpMeta[1] = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, _cref1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 3))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exp), 4))));
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,12,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_cref = tmpMeta[1];
_fargs = tmpMeta[2];
_cache = tmpMeta[3];
_env = tmpMeta[4];
_tree = tmpMeta[5];
_cref1 = omc_InstExtends_fixCref(threadData, _cache, _env, _cref, _tree);
tmp7 = (modelica_boolean)referenceEq(_cref, _cref1);
if(tmp7)
{
tmpMeta[2] = _exp;
}
else
{
tmpMeta[1] = mmc_mk_box3(15, &Absyn_Exp_PARTEVALFUNCTION__desc, _cref1, _fargs);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _exp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_exp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_tpl) { *out_tpl = _tpl; }
return _exp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixExp(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inExp, modelica_metatype _tree)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box3(0, _cache, _inEnv, _tree);
_outExp = omc_AbsynUtil_traverseExp(threadData, _inExp, boxvar_InstExtends_fixExpTraverse, tmpMeta[0], NULL);
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixSubMod(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype __omcQ_24in_5FsubMod, modelica_metatype _tree)
{
modelica_metatype _subMod = NULL;
modelica_string _ident = NULL;
modelica_metatype _mod1 = NULL;
modelica_metatype _mod2 = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_subMod = __omcQ_24in_5FsubMod;
tmpMeta[0] = _subMod;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_ident = tmpMeta[1];
_mod1 = tmpMeta[2];
_mod2 = omc_InstExtends_fixModifications(threadData, _inCache, _inEnv, _mod1, _tree);
if((!referenceEq(_mod1, _mod2)))
{
tmpMeta[0] = mmc_mk_box3(3, &SCode_SubMod_NAMEMOD__desc, _ident, _mod2);
_subMod = tmpMeta[0];
}
_return: OMC_LABEL_UNUSED
return _subMod;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixModifications(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inMod, modelica_metatype _tree)
{
modelica_metatype _outMod = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outMod = _inMod;
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _outMod;
{
modelica_metatype _subModLst = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _e = NULL;
modelica_metatype _cdef = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,0) == 0) goto tmp2_end;
tmp3 += 3;
tmpMeta[0] = _inMod;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,5) == 0) goto tmp2_end;
tmp3 += 2;
_subModLst = omc_InstExtends_fixList(threadData, _inCache, _inEnv, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outMod), 4))), _tree, boxvar_InstExtends_fixSubMod);
if((!referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outMod), 4))), _subModLst)))
{
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(7));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outMod), 7*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[4] = _subModLst;
_outMod = tmpMeta[1];
}
_exp = omc_InstExtends_fixOption(threadData, _inCache, _inEnv, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outMod), 5))), _tree, boxvar_InstExtends_fixExp);
if((!referenceEq(_exp, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outMod), 5))))))
{
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(7));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outMod), 7*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[5] = _exp;
_outMod = tmpMeta[1];
}
tmpMeta[0] = _outMod;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,8) == 0) goto tmp2_end;
tmp3 += 1;
_e = omc_InstExtends_fixElement(threadData, _inCache, _inEnv, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outMod), 4))), _tree);
if((!referenceEq(_e, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outMod), 4))))))
{
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outMod), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[4] = _e;
_outMod = tmpMeta[1];
}
tmpMeta[0] = _outMod;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,8) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
_e = tmpMeta[1];
_cdef = tmpMeta[2];
_cdef = omc_InstExtends_fixClassdef(threadData, _inCache, _inEnv, _cdef, _tree);
if((!referenceEq(_cdef, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_e), 7))))))
{
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(10));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_e), 10*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[7] = _cdef;
_e = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outMod), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[4] = _e;
_outMod = tmpMeta[1];
}
tmpMeta[0] = _outMod;
goto tmp2_done;
}
case 4: {
modelica_boolean tmp5;
tmp5 = omc_Flags_isSet(threadData, _OMC_LIT3);
if (1 != tmp5) goto goto_1;
tmpMeta[1] = stringAppend(_OMC_LIT4,omc_SCodeDump_printModStr(threadData, _inMod, _OMC_LIT5));
omc_Debug_traceln(threadData, tmpMeta[1]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outMod = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outMod;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixCref(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inCref, modelica_metatype _tree)
{
modelica_metatype _outCref = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inEnv;
tmp3_2 = _inCref;
{
modelica_string _id = NULL;
modelica_metatype _env = NULL;
modelica_metatype _denv = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _c = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
_env = tmp3_1;
_env = omc_FGraph_topScope(threadData, _inEnv);
tmpMeta[0] = omc_InstExtends_fixCref(threadData, _cache, _env, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCref), 2))), _tree);
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
_env = tmp3_1;
_cref = tmp3_2;
_id = omc_AbsynUtil_crefFirstIdent(threadData, _cref);
tmp5 = omc_AvlSetString_hasKey(threadData, _tree, _id);
if (1 != tmp5) goto goto_1;
_cref = omc_FGraph_crefStripGraphScopePrefix(threadData, _cref, _env, 0);
tmpMeta[0] = (omc_AbsynUtil_crefEqual(threadData, _cref, _inCref)?_inCref:_cref);
goto tmp2_done;
}
case 2: {
_env = tmp3_1;
_cref = tmp3_2;
_id = omc_AbsynUtil_crefFirstIdent(threadData, _cref);
_denv = omc_InstExtends_lookupVarNoErrorMessage(threadData, arrayGet(_cache, ((modelica_integer) 1)), _env, _id ,&_id);
_denv = omc_FGraph_openScope(threadData, _denv, _OMC_LIT6, _id, mmc_mk_none());
_cref = omc_AbsynUtil_crefReplaceFirstIdent(threadData, _cref, omc_FGraph_getGraphName(threadData, _denv));
_cref = omc_FGraph_crefStripGraphScopePrefix(threadData, _cref, _env, 0);
tmpMeta[0] = (omc_AbsynUtil_crefEqual(threadData, _cref, _inCref)?_inCref:_cref);
goto tmp2_done;
}
case 3: {
_env = tmp3_1;
_cref = tmp3_2;
_id = omc_AbsynUtil_crefFirstIdent(threadData, _cref);
omc_Lookup_lookupClassIdent(threadData, arrayGet(_cache, ((modelica_integer) 1)), _env, _id, mmc_mk_none() ,&_c ,&_denv);
_id = omc_SCodeUtil_getElementName(threadData, _c);
_denv = omc_FGraph_openScope(threadData, _denv, _OMC_LIT6, _id, mmc_mk_none());
_cref = omc_AbsynUtil_crefReplaceFirstIdent(threadData, _cref, omc_FGraph_getGraphName(threadData, _denv));
_cref = omc_FGraph_crefStripGraphScopePrefix(threadData, _cref, _env, 0);
tmpMeta[0] = (omc_AbsynUtil_crefEqual(threadData, _cref, _inCref)?_inCref:_cref);
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _inCref;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outCref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCref;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_lookupVarNoErrorMessage(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _ident, modelica_string *out_id)
{
modelica_metatype _outEnv = NULL;
modelica_string _id = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT7);
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Lookup_lookupVarIdent(threadData, _inCache, _inEnv, _ident, tmpMeta[0] ,NULL ,NULL ,NULL ,NULL ,NULL ,&_outEnv ,NULL ,&_id);
omc_ErrorExt_rollBack(threadData, _OMC_LIT7);
goto tmp2_done;
}
case 1: {
omc_ErrorExt_rollBack(threadData, _OMC_LIT7);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_id) { *out_id = _id; }
return _outEnv;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixPath(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _tree)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_string _id = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[0] = _inPath;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
_id = omc_AbsynUtil_pathFirstIdent(threadData, _inPath);
tmp5 = omc_AvlSetString_hasKey(threadData, _tree, _id);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = omc_FGraph_pathStripGraphScopePrefix(threadData, _inPath, _inEnv, 0);
goto tmp2_done;
}
case 2: {
omc_Lookup_lookupClassLocal(threadData, _inEnv, omc_AbsynUtil_pathFirstIdent(threadData, _inPath), NULL);
tmpMeta[0] = omc_FGraph_pathStripGraphScopePrefix(threadData, _inPath, _inEnv, 0);
goto tmp2_done;
}
case 3: {
_cache = omc_Inst_makeFullyQualified(threadData, arrayGet(_inCache, ((modelica_integer) 1)), _inEnv, _inPath ,&_path);
_path = omc_FGraph_pathStripGraphScopePrefix(threadData, _path, _inEnv, 0);
arrayUpdate(_inCache, ((modelica_integer) 1), _cache);
tmpMeta[0] = _path;
goto tmp2_done;
}
case 4: {
tmpMeta[0] = omc_FGraph_pathStripGraphScopePrefix(threadData, _inPath, _inEnv, 0);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixTypeSpec(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inTs, modelica_metatype _tree)
{
modelica_metatype _outTs = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inTs;
{
modelica_metatype _path1 = NULL;
modelica_metatype _path2 = NULL;
modelica_metatype _arrayDim1 = NULL;
modelica_metatype _arrayDim2 = NULL;
modelica_metatype _typeSpecs1 = NULL;
modelica_metatype _typeSpecs2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_path1 = tmpMeta[1];
_arrayDim1 = tmpMeta[2];
_arrayDim2 = omc_InstExtends_fixOption(threadData, _cache, _inEnv, _arrayDim1, _tree, boxvar_InstExtends_fixArrayDim);
_path2 = omc_InstExtends_fixPath(threadData, _cache, _inEnv, _path1, _tree);
tmp5 = (modelica_boolean)(referenceEq(_arrayDim2, _arrayDim1) && referenceEq(_path1, _path2));
if(tmp5)
{
tmpMeta[2] = _inTs;
}
else
{
tmpMeta[1] = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, _path2, _arrayDim2);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_path1 = tmpMeta[1];
_typeSpecs1 = tmpMeta[2];
_arrayDim1 = tmpMeta[3];
_arrayDim2 = omc_InstExtends_fixOption(threadData, _cache, _inEnv, _arrayDim1, _tree, boxvar_InstExtends_fixArrayDim);
_path2 = omc_InstExtends_fixPath(threadData, _cache, _inEnv, _path1, _tree);
_typeSpecs2 = omc_InstExtends_fixList(threadData, _cache, _inEnv, _typeSpecs1, _tree, boxvar_InstExtends_fixTypeSpec);
tmp6 = (modelica_boolean)((referenceEq(_arrayDim2, _arrayDim1) && referenceEq(_path1, _path2)) && referenceEq(_typeSpecs1, _typeSpecs2));
if(tmp6)
{
tmpMeta[2] = _inTs;
}
else
{
tmpMeta[1] = mmc_mk_box4(4, &Absyn_TypeSpec_TCOMPLEX__desc, _path2, _typeSpecs2, _arrayDim2);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outTs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixSubscript(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inSub, modelica_metatype _tree)
{
modelica_metatype _outSub = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inSub;
{
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,0) == 0) goto tmp2_end;
tmpMeta[0] = _inSub;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exp1 = tmpMeta[1];
_exp2 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
tmp5 = (modelica_boolean)referenceEq(_exp1, _exp2);
if(tmp5)
{
tmpMeta[2] = _inSub;
}
else
{
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Subscript_SUBSCRIPT__desc, _exp2);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSub = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSub;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixArrayDim(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype __omcQ_24in_5Fads, modelica_metatype _tree)
{
modelica_metatype _ads = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ads = __omcQ_24in_5Fads;
_ads = omc_InstExtends_fixList(threadData, _inCache, _inEnv, _ads, _tree, boxvar_InstExtends_fixSubscript);
_return: OMC_LABEL_UNUSED
return _ads;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixStatement(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inStmt, modelica_metatype _tree)
{
modelica_metatype _outStmt = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inStmt;
{
modelica_metatype _exp = NULL;
modelica_metatype _exp_1 = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _exp1_1 = NULL;
modelica_metatype _exp2_1 = NULL;
modelica_metatype _optExp1 = NULL;
modelica_metatype _optExp2 = NULL;
modelica_string _iter = NULL;
modelica_metatype _elseifbranch1 = NULL;
modelica_metatype _elseifbranch2 = NULL;
modelica_metatype _whenlst = NULL;
modelica_metatype _truebranch1 = NULL;
modelica_metatype _truebranch2 = NULL;
modelica_metatype _elsebranch1 = NULL;
modelica_metatype _elsebranch2 = NULL;
modelica_metatype _body1 = NULL;
modelica_metatype _body2 = NULL;
modelica_metatype _comment = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 16; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[2];
_comment = tmpMeta[3];
_info = tmpMeta[4];
tmp3 += 14;
_exp1_1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
_exp2_1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp2, _tree);
tmp5 = (modelica_boolean)(referenceEq(_exp1, _exp1_1) && referenceEq(_exp2, _exp2_1));
if(tmp5)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box5(3, &SCode_Statement_ALG__ASSIGN__desc, _exp1_1, _exp2_1, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_exp1 = tmpMeta[1];
_truebranch1 = tmpMeta[2];
_elseifbranch1 = tmpMeta[3];
_elsebranch1 = tmpMeta[4];
_comment = tmpMeta[5];
_info = tmpMeta[6];
tmp3 += 13;
_exp2 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
_truebranch2 = omc_InstExtends_fixList(threadData, _cache, _inEnv, _truebranch1, _tree, boxvar_InstExtends_fixStatement);
_elseifbranch2 = omc_InstExtends_fixListTuple2(threadData, _cache, _inEnv, _elseifbranch1, _tree, boxvar_InstExtends_fixExp, boxvar_InstExtends_fixListAlgorithmItem);
_elsebranch2 = omc_InstExtends_fixList(threadData, _cache, _inEnv, _elsebranch1, _tree, boxvar_InstExtends_fixStatement);
tmp6 = (modelica_boolean)(((referenceEq(_exp1, _exp2) && referenceEq(_truebranch1, _truebranch2)) && referenceEq(_elseifbranch1, _elseifbranch2)) && referenceEq(_elsebranch1, _elsebranch2));
if(tmp6)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box7(4, &SCode_Statement_ALG__IF__desc, _exp2, _truebranch2, _elseifbranch2, _elsebranch2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_iter = tmpMeta[1];
_optExp1 = tmpMeta[2];
_body1 = tmpMeta[3];
_comment = tmpMeta[4];
_info = tmpMeta[5];
tmp3 += 12;
_optExp2 = omc_InstExtends_fixOption(threadData, _cache, _inEnv, _optExp1, _tree, boxvar_InstExtends_fixExp);
_body2 = omc_InstExtends_fixList(threadData, _cache, _inEnv, _body1, _tree, boxvar_InstExtends_fixStatement);
tmp7 = (modelica_boolean)(referenceEq(_optExp1, _optExp2) && referenceEq(_body1, _body2));
if(tmp7)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box6(5, &SCode_Statement_ALG__FOR__desc, _iter, _optExp2, _body2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_iter = tmpMeta[1];
_optExp1 = tmpMeta[2];
_body1 = tmpMeta[3];
_comment = tmpMeta[4];
_info = tmpMeta[5];
tmp3 += 11;
_optExp2 = omc_InstExtends_fixOption(threadData, _cache, _inEnv, _optExp1, _tree, boxvar_InstExtends_fixExp);
_body2 = omc_InstExtends_fixList(threadData, _cache, _inEnv, _body1, _tree, boxvar_InstExtends_fixStatement);
tmp8 = (modelica_boolean)(referenceEq(_optExp1, _optExp2) && referenceEq(_body1, _body2));
if(tmp8)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box6(6, &SCode_Statement_ALG__PARFOR__desc, _iter, _optExp2, _body2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 4: {
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_exp1 = tmpMeta[1];
_body1 = tmpMeta[2];
_comment = tmpMeta[3];
_info = tmpMeta[4];
tmp3 += 10;
_exp2 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
_body2 = omc_InstExtends_fixList(threadData, _cache, _inEnv, _body1, _tree, boxvar_InstExtends_fixStatement);
tmp9 = (modelica_boolean)(referenceEq(_exp1, _exp2) && referenceEq(_body1, _body2));
if(tmp9)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box5(7, &SCode_Statement_ALG__WHILE__desc, _exp2, _body2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_whenlst = tmpMeta[1];
_comment = tmpMeta[2];
_info = tmpMeta[3];
tmp3 += 9;
_whenlst = omc_InstExtends_fixListTuple2(threadData, _cache, _inEnv, _whenlst, _tree, boxvar_InstExtends_fixExp, boxvar_InstExtends_fixListAlgorithmItem);
tmpMeta[1] = mmc_mk_box4(8, &SCode_Statement_ALG__WHEN__A__desc, _whenlst, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
modelica_boolean tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_exp = tmpMeta[1];
_exp1 = tmpMeta[2];
_exp2 = tmpMeta[3];
_comment = tmpMeta[4];
_info = tmpMeta[5];
tmp3 += 8;
_exp_1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp, _tree);
_exp1_1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
_exp2_1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp2, _tree);
tmp10 = (modelica_boolean)((referenceEq(_exp, _exp_1) && referenceEq(_exp1, _exp1_1)) && referenceEq(_exp2, _exp2_1));
if(tmp10)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box6(9, &SCode_Statement_ALG__ASSERT__desc, _exp_1, _exp1_1, _exp2_1, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 7: {
modelica_boolean tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp1 = tmpMeta[1];
_comment = tmpMeta[2];
_info = tmpMeta[3];
tmp3 += 7;
_exp2 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
tmp11 = (modelica_boolean)referenceEq(_exp1, _exp2);
if(tmp11)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box4(10, &SCode_Statement_ALG__TERMINATE__desc, _exp2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 8: {
modelica_boolean tmp12;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[2];
_comment = tmpMeta[3];
_info = tmpMeta[4];
tmp3 += 6;
_exp1_1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
_exp2_1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp2, _tree);
tmp12 = (modelica_boolean)(referenceEq(_exp1, _exp1_1) && referenceEq(_exp2, _exp2_1));
if(tmp12)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box5(11, &SCode_Statement_ALG__REINIT__desc, _exp1_1, _exp2_1, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 9: {
modelica_boolean tmp13;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp1 = tmpMeta[1];
_comment = tmpMeta[2];
_info = tmpMeta[3];
tmp3 += 5;
_exp2 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
tmp13 = (modelica_boolean)referenceEq(_exp1, _exp2);
if(tmp13)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box4(12, &SCode_Statement_ALG__NORETCALL__desc, _exp2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,2) == 0) goto tmp2_end;
tmp3 += 4;
tmpMeta[0] = _inStmt;
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,2) == 0) goto tmp2_end;
tmp3 += 3;
tmpMeta[0] = _inStmt;
goto tmp2_done;
}
case 12: {
modelica_boolean tmp14;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,12,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_body1 = tmpMeta[1];
_comment = tmpMeta[2];
_info = tmpMeta[3];
tmp3 += 2;
_body2 = omc_InstExtends_fixList(threadData, _cache, _inEnv, _body1, _tree, boxvar_InstExtends_fixStatement);
tmp14 = (modelica_boolean)referenceEq(_body1, _body2);
if(tmp14)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box4(15, &SCode_Statement_ALG__FAILURE__desc, _body2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 13: {
modelica_boolean tmp15;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_truebranch1 = tmpMeta[1];
_elsebranch1 = tmpMeta[2];
_comment = tmpMeta[3];
_info = tmpMeta[4];
tmp3 += 1;
_truebranch2 = omc_InstExtends_fixList(threadData, _cache, _inEnv, _truebranch1, _tree, boxvar_InstExtends_fixStatement);
_elsebranch2 = omc_InstExtends_fixList(threadData, _cache, _inEnv, _elsebranch1, _tree, boxvar_InstExtends_fixStatement);
tmp15 = (modelica_boolean)(referenceEq(_truebranch1, _truebranch2) && referenceEq(_elsebranch1, _elsebranch2));
if(tmp15)
{
tmpMeta[2] = _inStmt;
}
else
{
tmpMeta[1] = mmc_mk_box5(16, &SCode_Statement_ALG__TRY__desc, _truebranch2, _elsebranch2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,14,2) == 0) goto tmp2_end;
tmpMeta[0] = _inStmt;
goto tmp2_done;
}
case 15: {
tmpMeta[1] = stringAppend(_OMC_LIT8,omc_Dump_unparseAlgorithmStr(threadData, omc_SCodeUtil_statementToAlgorithmItem(threadData, _inStmt)));
omc_Error_addInternalError(threadData, tmpMeta[1], _OMC_LIT10);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 16) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outStmt = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outStmt;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixListAlgorithmItem(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _env, modelica_metatype _alg, modelica_metatype _tree)
{
modelica_metatype _outAlg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outAlg = omc_InstExtends_fixList(threadData, _cache, _env, _alg, _tree, boxvar_InstExtends_fixStatement);
_return: OMC_LABEL_UNUSED
return _outAlg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixConstraint(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inConstrs, modelica_metatype _tree)
{
modelica_metatype _outConstrs = NULL;
modelica_metatype _exps = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inConstrs;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_exps = tmpMeta[1];
_exps = omc_InstExtends_fixList(threadData, _inCache, _inEnv, _exps, _tree, boxvar_InstExtends_fixExp);
tmpMeta[0] = mmc_mk_box2(3, &SCode_ConstraintSection_CONSTRAINTS__desc, _exps);
_outConstrs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outConstrs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixAlgorithm(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inAlg, modelica_metatype _tree)
{
modelica_metatype _outAlg = NULL;
modelica_metatype _stmts1 = NULL;
modelica_metatype _stmts2 = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inAlg;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_stmts1 = tmpMeta[1];
_stmts2 = omc_InstExtends_fixList(threadData, _inCache, _inEnv, _stmts1, _tree, boxvar_InstExtends_fixStatement);
tmp1 = (modelica_boolean)referenceEq(_stmts1, _stmts2);
if(tmp1)
{
tmpMeta[1] = _inAlg;
}
else
{
tmpMeta[0] = mmc_mk_box2(3, &SCode_AlgorithmSection_ALGORITHM__desc, _stmts2);
tmpMeta[1] = tmpMeta[0];
}
_outAlg = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _outAlg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixListEEquation(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _env, modelica_metatype _eeq, modelica_metatype _tree)
{
modelica_metatype _outEeq = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outEeq = omc_InstExtends_fixList(threadData, _cache, _env, _eeq, _tree, boxvar_InstExtends_fixEEquation);
_return: OMC_LABEL_UNUSED
return _outEeq;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixEEquation(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inEeq, modelica_metatype _tree)
{
modelica_metatype _outEeq = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inEeq;
{
modelica_string _id = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _cref1 = NULL;
modelica_metatype _cref2 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _exp1 = NULL;
modelica_metatype _exp2 = NULL;
modelica_metatype _exp3 = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _eql = NULL;
modelica_metatype _eqll = NULL;
modelica_metatype _whenlst = NULL;
modelica_metatype _comment = NULL;
modelica_metatype _optExp = NULL;
modelica_metatype _info = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_expl = tmpMeta[1];
_eqll = tmpMeta[2];
_eql = tmpMeta[3];
_comment = tmpMeta[4];
_info = tmpMeta[5];
_expl = omc_InstExtends_fixList(threadData, _cache, _inEnv, _expl, _tree, boxvar_InstExtends_fixExp);
_eqll = omc_InstExtends_fixListList(threadData, _cache, _inEnv, _eqll, _tree, boxvar_InstExtends_fixEEquation);
_eql = omc_InstExtends_fixList(threadData, _cache, _inEnv, _eql, _tree, boxvar_InstExtends_fixEEquation);
tmpMeta[1] = mmc_mk_box6(3, &SCode_EEquation_EQ__IF__desc, _expl, _eqll, _eql, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[2];
_comment = tmpMeta[3];
_info = tmpMeta[4];
_exp1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
_exp2 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp2, _tree);
tmpMeta[1] = mmc_mk_box5(4, &SCode_EEquation_EQ__EQUALS__desc, _exp1, _exp2, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[2];
_cref = tmpMeta[3];
_comment = tmpMeta[4];
_info = tmpMeta[5];
_exp1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
_exp2 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp2, _tree);
_cref = omc_InstExtends_fixCref(threadData, _cache, _inEnv, _cref, _tree);
tmpMeta[1] = mmc_mk_box6(5, &SCode_EEquation_EQ__PDE__desc, _exp1, _exp2, _cref, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_cref1 = tmpMeta[1];
_cref2 = tmpMeta[2];
_comment = tmpMeta[3];
_info = tmpMeta[4];
_cref1 = omc_InstExtends_fixCref(threadData, _cache, _inEnv, _cref1, _tree);
_cref2 = omc_InstExtends_fixCref(threadData, _cache, _inEnv, _cref2, _tree);
tmpMeta[1] = mmc_mk_box5(6, &SCode_EEquation_EQ__CONNECT__desc, _cref1, _cref2, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_id = tmpMeta[1];
_optExp = tmpMeta[2];
_eql = tmpMeta[3];
_comment = tmpMeta[4];
_info = tmpMeta[5];
_optExp = omc_InstExtends_fixOption(threadData, _cache, _inEnv, _optExp, _tree, boxvar_InstExtends_fixExp);
_eql = omc_InstExtends_fixList(threadData, _cache, _inEnv, _eql, _tree, boxvar_InstExtends_fixEEquation);
tmpMeta[1] = mmc_mk_box6(7, &SCode_EEquation_EQ__FOR__desc, _id, _optExp, _eql, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_exp = tmpMeta[1];
_eql = tmpMeta[2];
_whenlst = tmpMeta[3];
_comment = tmpMeta[4];
_info = tmpMeta[5];
_exp = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp, _tree);
_eql = omc_InstExtends_fixList(threadData, _cache, _inEnv, _eql, _tree, boxvar_InstExtends_fixEEquation);
_whenlst = omc_InstExtends_fixListTuple2(threadData, _cache, _inEnv, _whenlst, _tree, boxvar_InstExtends_fixExp, boxvar_InstExtends_fixListEEquation);
tmpMeta[1] = mmc_mk_box6(8, &SCode_EEquation_EQ__WHEN__desc, _exp, _eql, _whenlst, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_exp1 = tmpMeta[1];
_exp2 = tmpMeta[2];
_exp3 = tmpMeta[3];
_comment = tmpMeta[4];
_info = tmpMeta[5];
_exp1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
_exp2 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp2, _tree);
_exp3 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp3, _tree);
tmpMeta[1] = mmc_mk_box6(9, &SCode_EEquation_EQ__ASSERT__desc, _exp1, _exp2, _exp3, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp = tmpMeta[1];
_comment = tmpMeta[2];
_info = tmpMeta[3];
_exp = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp, _tree);
tmpMeta[1] = mmc_mk_box4(10, &SCode_EEquation_EQ__TERMINATE__desc, _exp, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_exp1 = tmpMeta[1];
_exp = tmpMeta[2];
_comment = tmpMeta[3];
_info = tmpMeta[4];
_exp1 = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp1, _tree);
_exp = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp, _tree);
tmpMeta[1] = mmc_mk_box5(11, &SCode_EEquation_EQ__REINIT__desc, _exp1, _exp, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp = tmpMeta[1];
_comment = tmpMeta[2];
_info = tmpMeta[3];
_exp = omc_InstExtends_fixExp(threadData, _cache, _inEnv, _exp, _tree);
tmpMeta[1] = mmc_mk_box4(12, &SCode_EEquation_EQ__NORETCALL__desc, _exp, _comment, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outEeq = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEeq;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixEquation(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inEq, modelica_metatype _tree)
{
modelica_metatype _outEq = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inEq;
{
modelica_metatype _eeq1 = NULL;
modelica_metatype _eeq2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_eeq1 = tmpMeta[1];
_eeq2 = omc_InstExtends_fixEEquation(threadData, _inCache, _inEnv, _eeq1, _tree);
tmp5 = (modelica_boolean)referenceEq(_eeq1, _eeq2);
if(tmp5)
{
tmpMeta[2] = _inEq;
}
else
{
tmpMeta[1] = mmc_mk_box2(3, &SCode_Equation_EQUATION__desc, _eeq2);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_eeq1 = tmpMeta[1];
tmp6 = omc_Flags_isSet(threadData, _OMC_LIT3);
if (1 != tmp6) goto goto_1;
tmpMeta[1] = stringAppend(_OMC_LIT11,omc_SCodeDump_equationStr(threadData, _eeq1, _OMC_LIT5));
omc_Debug_traceln(threadData, tmpMeta[1]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outEq = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEq;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixClassdef(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _inEnv, modelica_metatype _inCd, modelica_metatype _inTree)
{
modelica_metatype _outCd = NULL;
modelica_metatype _tree = NULL;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_tree = _inTree;
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inEnv;
tmp3_2 = _inCd;
{
modelica_metatype _elts = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _ne = NULL;
modelica_metatype _ne_1 = NULL;
modelica_metatype _ie = NULL;
modelica_metatype _ie_1 = NULL;
modelica_metatype _na = NULL;
modelica_metatype _na_1 = NULL;
modelica_metatype _ia = NULL;
modelica_metatype _ia_1 = NULL;
modelica_metatype _nc = NULL;
modelica_metatype _nc_1 = NULL;
modelica_metatype _clats = NULL;
modelica_metatype _ed = NULL;
modelica_metatype _ts = NULL;
modelica_metatype _ts_1 = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _mod_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _cd = NULL;
modelica_metatype _cd_1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 7; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 9));
_elts = tmpMeta[1];
_ne = tmpMeta[2];
_ie = tmpMeta[3];
_na = tmpMeta[4];
_ia = tmpMeta[5];
_nc = tmpMeta[6];
_clats = tmpMeta[7];
_ed = tmpMeta[8];
_env = tmp3_1;
tmp3 += 5;
_tree = omc_InstExtends_getLocalIdentList(threadData, _elts, _tree, boxvar_InstExtends_getLocalIdentElement);
_elts_1 = omc_InstExtends_fixList(threadData, _cache, _env, _elts, _tree, boxvar_InstExtends_fixElement);
_ne_1 = omc_InstExtends_fixList(threadData, _cache, _env, _ne, _tree, boxvar_InstExtends_fixEquation);
_ie_1 = omc_InstExtends_fixList(threadData, _cache, _env, _ie, _tree, boxvar_InstExtends_fixEquation);
_na_1 = omc_InstExtends_fixList(threadData, _cache, _env, _na, _tree, boxvar_InstExtends_fixAlgorithm);
_ia_1 = omc_InstExtends_fixList(threadData, _cache, _env, _ia, _tree, boxvar_InstExtends_fixAlgorithm);
_nc_1 = omc_InstExtends_fixList(threadData, _cache, _env, _nc, _tree, boxvar_InstExtends_fixConstraint);
tmp5 = (modelica_boolean)(((((referenceEq(_elts, _elts_1) && referenceEq(_ne, _ne_1)) && referenceEq(_ie, _ie_1)) && referenceEq(_na, _na_1)) && referenceEq(_ia, _ia_1)) && referenceEq(_nc, _nc_1));
if(tmp5)
{
tmpMeta[2] = _inCd;
}
else
{
tmpMeta[1] = mmc_mk_box9(3, &SCode_ClassDef_PARTS__desc, _elts_1, _ne_1, _ie_1, _na_1, _ia_1, _nc_1, _clats, _ed);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,8) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 9));
_mod = tmpMeta[1];
_cd = tmpMeta[2];
_elts = tmpMeta[3];
_ne = tmpMeta[4];
_ie = tmpMeta[5];
_na = tmpMeta[6];
_ia = tmpMeta[7];
_nc = tmpMeta[8];
_clats = tmpMeta[9];
_ed = tmpMeta[10];
_env = tmp3_1;
tmp3 += 4;
_mod_1 = omc_InstExtends_fixModifications(threadData, _cache, _env, _mod, _inTree);
_elts_1 = omc_InstExtends_fixList(threadData, _cache, _env, _elts, _tree, boxvar_InstExtends_fixElement);
_ne_1 = omc_InstExtends_fixList(threadData, _cache, _env, _ne, _tree, boxvar_InstExtends_fixEquation);
_ie_1 = omc_InstExtends_fixList(threadData, _cache, _env, _ie, _tree, boxvar_InstExtends_fixEquation);
_na_1 = omc_InstExtends_fixList(threadData, _cache, _env, _na, _tree, boxvar_InstExtends_fixAlgorithm);
_ia_1 = omc_InstExtends_fixList(threadData, _cache, _env, _ia, _tree, boxvar_InstExtends_fixAlgorithm);
_nc_1 = omc_InstExtends_fixList(threadData, _cache, _env, _nc, _tree, boxvar_InstExtends_fixConstraint);
tmp6 = (modelica_boolean)(((((referenceEq(_elts, _elts_1) && referenceEq(_ne, _ne_1)) && referenceEq(_ie, _ie_1)) && referenceEq(_na, _na_1)) && referenceEq(_ia, _ia_1)) && referenceEq(_nc, _nc_1));
if(tmp6)
{
tmpMeta[2] = _cd;
}
else
{
tmpMeta[1] = mmc_mk_box9(3, &SCode_ClassDef_PARTS__desc, _elts_1, _ne_1, _ie_1, _na_1, _ia_1, _nc_1, _clats, _ed);
tmpMeta[2] = tmpMeta[1];
}
_cd_1 = tmpMeta[2];
tmp7 = (modelica_boolean)(referenceEq(_cd, _cd_1) && referenceEq(_mod, _mod_1));
if(tmp7)
{
tmpMeta[2] = _inCd;
}
else
{
tmpMeta[1] = mmc_mk_box3(4, &SCode_ClassDef_CLASS__EXTENDS__desc, _mod_1, _cd_1);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_ts = tmpMeta[1];
_mod = tmpMeta[2];
_attr = tmpMeta[3];
_env = tmp3_1;
tmp3 += 3;
_ts_1 = omc_InstExtends_fixTypeSpec(threadData, _cache, _env, _ts, _tree);
_mod_1 = omc_InstExtends_fixModifications(threadData, _cache, _env, _mod, _tree);
tmp8 = (modelica_boolean)(referenceEq(_ts, _ts_1) && referenceEq(_mod, _mod_1));
if(tmp8)
{
tmpMeta[2] = _inCd;
}
else
{
tmpMeta[1] = mmc_mk_box4(5, &SCode_ClassDef_DERIVED__desc, _ts_1, _mod_1, _attr);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,3,1) == 0) goto tmp2_end;
_cd = tmp3_2;
tmp3 += 2;
tmpMeta[0] = _cd;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,4,1) == 0) goto tmp2_end;
_cd = tmp3_2;
tmp3 += 1;
tmpMeta[0] = _cd;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,5,2) == 0) goto tmp2_end;
_cd = tmp3_2;
tmpMeta[0] = _cd;
goto tmp2_done;
}
case 6: {
modelica_boolean tmp9;
_cd = tmp3_2;
tmp9 = omc_Flags_isSet(threadData, _OMC_LIT3);
if (1 != tmp9) goto goto_1;
tmpMeta[1] = stringAppend(_OMC_LIT12,omc_SCodeDump_classDefStr(threadData, _cd, _OMC_LIT5));
omc_Debug_traceln(threadData, tmpMeta[1]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 7) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outCd = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCd;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixElement(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inElt, modelica_metatype _tree)
{
modelica_metatype _outElts = NULL;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inEnv;
tmp3_2 = _inElt;
{
modelica_string _name = NULL;
modelica_metatype _prefixes = NULL;
modelica_metatype _partialPrefix = NULL;
modelica_metatype _typeSpec1 = NULL;
modelica_metatype _typeSpec2 = NULL;
modelica_metatype _modifications1 = NULL;
modelica_metatype _modifications2 = NULL;
modelica_metatype _comment = NULL;
modelica_metatype _condition = NULL;
modelica_metatype _info = NULL;
modelica_metatype _classDef1 = NULL;
modelica_metatype _classDef2 = NULL;
modelica_metatype _restriction = NULL;
modelica_metatype _optAnnotation = NULL;
modelica_metatype _extendsPath1 = NULL;
modelica_metatype _extendsPath2 = NULL;
modelica_metatype _vis = NULL;
modelica_metatype _ad = NULL;
modelica_metatype _env = NULL;
modelica_metatype _elt = NULL;
modelica_metatype _elt2 = NULL;
modelica_metatype _attr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 9; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,3,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,1) == 0) goto tmp2_end;
_elt = tmp3_2;
_env = tmp3_1;
omc_Lookup_lookupIdentLocal(threadData, arrayGet(_inCache, ((modelica_integer) 1)), _env, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elt), 2))), NULL, &tmpMeta[1], NULL, NULL, &tmpMeta[10]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,8) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 8));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 9));
_elt2 = tmpMeta[1];
_name = tmpMeta[2];
_prefixes = tmpMeta[3];
_attr = tmpMeta[4];
_typeSpec1 = tmpMeta[5];
_modifications1 = tmpMeta[6];
_comment = tmpMeta[7];
_condition = tmpMeta[8];
_info = tmpMeta[9];
_env = tmpMeta[10];
_modifications2 = omc_InstExtends_fixModifications(threadData, _inCache, _env, _modifications1, _tree);
_typeSpec2 = omc_InstExtends_fixTypeSpec(threadData, _inCache, _env, _typeSpec1, _tree);
_ad = omc_InstExtends_fixArrayDim(threadData, _inCache, _env, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attr), 2))), _tree);
if((!referenceEq(_ad, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attr), 2))))))
{
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_attr), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = _ad;
_attr = tmpMeta[1];
}
if((!((referenceEq(_ad, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attr), 2)))) && referenceEq(_typeSpec1, _typeSpec2)) && referenceEq(_modifications1, _modifications2))))
{
tmpMeta[1] = mmc_mk_box9(6, &SCode_Element_COMPONENT__desc, _name, _prefixes, _attr, _typeSpec2, _modifications2, _comment, _condition, _info);
_elt2 = tmpMeta[1];
}
tmpMeta[0] = _elt2;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,3,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_elt = tmp3_2;
_attr = tmpMeta[1];
_env = tmp3_1;
tmp3 += 6;
_modifications2 = omc_InstExtends_fixModifications(threadData, _inCache, _env, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elt), 6))), _tree);
_typeSpec2 = omc_InstExtends_fixTypeSpec(threadData, _inCache, _env, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elt), 5))), _tree);
_ad = omc_InstExtends_fixArrayDim(threadData, _inCache, _env, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attr), 2))), _tree);
if((!referenceEq(_ad, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attr), 2))))))
{
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_attr), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = _ad;
_attr = tmpMeta[1];
}
if((!((referenceEq(_ad, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_attr), 2)))) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elt), 5))), _typeSpec2)) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elt), 6))), _modifications2))))
{
tmpMeta[1] = mmc_mk_box9(6, &SCode_Element_COMPONENT__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elt), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elt), 3))), _attr, _typeSpec2, _modifications2, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elt), 7))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elt), 8))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_elt), 9))));
_elt = tmpMeta[1];
}
tmpMeta[0] = _elt;
goto tmp2_done;
}
case 2: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,0) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 9));
_name = tmpMeta[1];
_prefixes = tmpMeta[2];
_partialPrefix = tmpMeta[5];
_restriction = tmpMeta[6];
_comment = tmpMeta[7];
_info = tmpMeta[8];
_env = tmp3_1;
tmpMeta[2] = omc_Lookup_lookupClassLocal(threadData, _env, _name, &tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 9));
_prefixes = tmpMeta[3];
_partialPrefix = tmpMeta[4];
_restriction = tmpMeta[5];
_classDef1 = tmpMeta[6];
_comment = tmpMeta[7];
_info = tmpMeta[8];
_env = tmpMeta[1];
_env = omc_FGraph_openScope(threadData, _env, _OMC_LIT6, _name, omc_FGraph_restrictionToScopeType(threadData, _restriction));
_classDef2 = omc_InstExtends_fixClassdef(threadData, _inCache, _env, _classDef1, _tree);
tmp5 = (modelica_boolean)referenceEq(_classDef1, _classDef2);
if(tmp5)
{
tmpMeta[2] = _inElt;
}
else
{
tmpMeta[1] = mmc_mk_box9(5, &SCode_Element_CLASS__desc, _name, _prefixes, _OMC_LIT6, _partialPrefix, _restriction, _classDef2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,0) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 9));
_name = tmpMeta[1];
_prefixes = tmpMeta[2];
_partialPrefix = tmpMeta[4];
_restriction = tmpMeta[5];
_classDef1 = tmpMeta[6];
_comment = tmpMeta[7];
_info = tmpMeta[8];
_env = tmp3_1;
tmp3 += 4;
_env = omc_FGraph_openScope(threadData, _env, _OMC_LIT6, _name, omc_FGraph_restrictionToScopeType(threadData, _restriction));
_classDef2 = omc_InstExtends_fixClassdef(threadData, _inCache, _env, _classDef1, _tree);
tmp6 = (modelica_boolean)referenceEq(_classDef1, _classDef2);
if(tmp6)
{
tmpMeta[2] = _inElt;
}
else
{
tmpMeta[1] = mmc_mk_box9(5, &SCode_Element_CLASS__desc, _name, _prefixes, _OMC_LIT6, _partialPrefix, _restriction, _classDef2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 4: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,0) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 9));
_name = tmpMeta[1];
_prefixes = tmpMeta[2];
_partialPrefix = tmpMeta[5];
_restriction = tmpMeta[6];
_comment = tmpMeta[7];
_info = tmpMeta[8];
_env = tmp3_1;
tmpMeta[2] = omc_Lookup_lookupClassLocal(threadData, _env, _name, &tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 9));
_prefixes = tmpMeta[3];
_partialPrefix = tmpMeta[4];
_restriction = tmpMeta[5];
_classDef1 = tmpMeta[6];
_comment = tmpMeta[7];
_info = tmpMeta[8];
_env = tmpMeta[1];
_env = omc_FGraph_openScope(threadData, _env, _OMC_LIT13, _name, omc_FGraph_restrictionToScopeType(threadData, _restriction));
_classDef2 = omc_InstExtends_fixClassdef(threadData, _inCache, _env, _classDef1, _tree);
tmp7 = (modelica_boolean)referenceEq(_classDef1, _classDef2);
if(tmp7)
{
tmpMeta[2] = _inElt;
}
else
{
tmpMeta[1] = mmc_mk_box9(5, &SCode_Element_CLASS__desc, _name, _prefixes, _OMC_LIT13, _partialPrefix, _restriction, _classDef2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 5: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,0) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 7));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 8));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 9));
_name = tmpMeta[1];
_prefixes = tmpMeta[2];
_partialPrefix = tmpMeta[4];
_restriction = tmpMeta[5];
_classDef1 = tmpMeta[6];
_comment = tmpMeta[7];
_info = tmpMeta[8];
_env = tmp3_1;
tmp3 += 2;
_env = omc_FGraph_openScope(threadData, _env, _OMC_LIT13, _name, omc_FGraph_restrictionToScopeType(threadData, _restriction));
_classDef2 = omc_InstExtends_fixClassdef(threadData, _inCache, _env, _classDef1, _tree);
tmp8 = (modelica_boolean)referenceEq(_classDef1, _classDef2);
if(tmp8)
{
tmpMeta[2] = _inElt;
}
else
{
tmpMeta[1] = mmc_mk_box9(5, &SCode_Element_CLASS__desc, _name, _prefixes, _OMC_LIT13, _partialPrefix, _restriction, _classDef2, _comment, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 6: {
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 6));
_extendsPath1 = tmpMeta[1];
_vis = tmpMeta[2];
_modifications1 = tmpMeta[3];
_optAnnotation = tmpMeta[4];
_info = tmpMeta[5];
_env = tmp3_1;
tmp3 += 1;
_extendsPath2 = omc_InstExtends_fixPath(threadData, _inCache, _env, _extendsPath1, _tree);
_modifications2 = omc_InstExtends_fixModifications(threadData, _inCache, _env, _modifications1, _tree);
tmp9 = (modelica_boolean)(referenceEq(_extendsPath1, _extendsPath2) && referenceEq(_modifications1, _modifications2));
if(tmp9)
{
tmpMeta[2] = _inElt;
}
else
{
tmpMeta[1] = mmc_mk_box6(4, &SCode_Element_EXTENDS__desc, _extendsPath2, _vis, _modifications2, _optAnnotation, _info);
tmpMeta[2] = tmpMeta[1];
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,3) == 0) goto tmp2_end;
tmpMeta[0] = _inElt;
goto tmp2_done;
}
case 8: {
modelica_boolean tmp10;
_elt = tmp3_2;
tmp10 = omc_Flags_isSet(threadData, _OMC_LIT3);
if (1 != tmp10) goto goto_1;
tmpMeta[1] = stringAppend(_OMC_LIT14,omc_SCodeDump_unparseElementStr(threadData, _elt, _OMC_LIT5));
omc_Debug_traceln(threadData, tmpMeta[1]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 9) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElts = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElts;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_fixLocalIdent(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype __omcQ_24in_5Felt, modelica_metatype _tree)
{
modelica_metatype _elt = NULL;
modelica_metatype _elt1 = NULL;
modelica_metatype _elt2 = NULL;
modelica_metatype _mod = NULL;
modelica_boolean _b;
modelica_integer tmp1;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_elt = __omcQ_24in_5Felt;
tmpMeta[0] = _elt;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmp1 = mmc_unbox_integer(tmpMeta[3]);
_elt1 = tmpMeta[1];
_mod = tmpMeta[2];
_b = tmp1;
_elt2 = omc_InstExtends_fixElement(threadData, _inCache, _inEnv, _elt1, _tree);
if(((!referenceEq(_elt1, _elt2)) || (!_b)))
{
tmpMeta[0] = mmc_mk_box3(0, _elt2, _mod, mmc_mk_boolean(1));
_elt = tmpMeta[0];
}
_return: OMC_LABEL_UNUSED
return _elt;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_getLocalIdentElement(threadData_t *threadData, modelica_metatype _elt, modelica_metatype __omcQ_24in_5Ftree)
{
modelica_metatype _tree = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_tree = __omcQ_24in_5Ftree;
{
modelica_metatype tmp3_1;
tmp3_1 = _elt;
{
modelica_string _id = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_id = tmpMeta[1];
tmpMeta[0] = omc_AvlSetString_add(threadData, _tree, _id);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,8) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_id = tmpMeta[1];
tmpMeta[0] = omc_AvlSetString_add(threadData, _tree, _id);
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _tree;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_tree = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _tree;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_getLocalIdentElementTpl(threadData_t *threadData, modelica_metatype _eltTpl, modelica_metatype __omcQ_24in_5Ftree)
{
modelica_metatype _tree = NULL;
modelica_metatype _elt = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_tree = __omcQ_24in_5Ftree;
tmpMeta[0] = _eltTpl;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_elt = tmpMeta[1];
_tree = omc_InstExtends_getLocalIdentElement(threadData, _elt, _tree);
_return: OMC_LABEL_UNUSED
return _tree;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_getLocalIdentList(threadData_t *threadData, modelica_metatype _ielts, modelica_metatype __omcQ_24in_5Ftree, modelica_fnptr _getIdent)
{
modelica_metatype _tree = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_tree = __omcQ_24in_5Ftree;
{
modelica_metatype _elt;
for (tmpMeta[0] = _ielts; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_elt = MMC_CAR(tmpMeta[0]);
_tree = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_getIdent), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_getIdent), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_getIdent), 2))), _elt, _tree) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_getIdent), 1)))) (threadData, _elt, _tree);
}
}
_return: OMC_LABEL_UNUSED
return _tree;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_updateComponentsAndClassdefs2(threadData_t *threadData, modelica_metatype _inComponent, modelica_metatype _inEnv, modelica_metatype _inMod, modelica_metatype *out_outRestMod)
{
modelica_metatype _outComponent = NULL;
modelica_metatype _outRestMod = NULL;
modelica_metatype _el = NULL;
modelica_metatype _mod = NULL;
modelica_boolean _b;
modelica_integer tmp1;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inComponent;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmp1 = mmc_unbox_integer(tmpMeta[3]);
_el = tmpMeta[1];
_mod = tmpMeta[2];
_b = tmp1;
{
volatile modelica_metatype tmp5_1;
tmp5_1 = _el;
{
modelica_metatype _comp = NULL;
modelica_metatype _cmod = NULL;
modelica_metatype _mod_rest = NULL;
volatile mmc_switch_type tmp5;
int tmp6;
tmp5 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp4_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp5 < 6; tmp5++) {
switch (MMC_SWITCH_CAST(tmp5)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,3,8) == 0) goto tmp4_end;
tmp5 += 4;
_cmod = omc_Mod_lookupCompModificationFromEqu(threadData, _inMod, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 2))));
_cmod = omc_Mod_merge(threadData, _cmod, _mod, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 2))), 0);
_mod_rest = _inMod;
tmpMeta[2] = mmc_mk_box3(0, _el, _cmod, mmc_mk_boolean(_b));
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _mod_rest;
goto tmp4_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,1,5) == 0) goto tmp4_end;
tmp5 += 3;
tmpMeta[0+0] = _inComponent;
tmpMeta[0+1] = _inMod;
goto tmp4_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,3) == 0) goto tmp4_end;
tmp5 += 2;
tmpMeta[2] = mmc_mk_box3(0, _el, _OMC_LIT15, mmc_mk_boolean(_b));
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _inMod;
goto tmp4_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,2,8) == 0) goto tmp4_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp5_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto tmp4_end;
tmpMeta[2] = omc_Mod_lookupCompModification(threadData, _inMod, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 2))));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,4) == 0) goto goto_3;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
_comp = tmpMeta[3];
_cmod = tmpMeta[4];
_mod_rest = _inMod;
_cmod = omc_Mod_merge(threadData, _cmod, _mod, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 2))), 0);
_comp = omc_SCodeUtil_mergeWithOriginal(threadData, _comp, _el);
tmpMeta[2] = mmc_mk_box3(0, _comp, _cmod, mmc_mk_boolean(_b));
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _mod_rest;
goto tmp4_done;
}
case 4: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,2,8) == 0) goto tmp4_end;
_cmod = omc_Mod_lookupCompModification(threadData, _inMod, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 2))));
tmp7 = (modelica_boolean)valueEq(_cmod, _OMC_LIT15);
if(tmp7)
{
tmpMeta[3] = _inComponent;
}
else
{
tmpMeta[2] = mmc_mk_box3(0, _el, _cmod, mmc_mk_boolean(_b));
tmpMeta[3] = tmpMeta[2];
}
_outComponent = tmpMeta[3];
tmpMeta[0+0] = _outComponent;
tmpMeta[0+1] = _inMod;
goto tmp4_done;
}
case 5: {
modelica_boolean tmp8;
tmp8 = omc_Flags_isSet(threadData, _OMC_LIT3);
if (1 != tmp8) goto goto_3;
tmpMeta[2] = stringAppend(_OMC_LIT16,omc_FGraph_printGraphPathStr(threadData, _inEnv));
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT17);
tmpMeta[4] = stringAppend(tmpMeta[3],omc_Mod_printModStr(threadData, _inMod));
tmpMeta[5] = stringAppend(tmpMeta[4],_OMC_LIT18);
tmpMeta[6] = stringAppend(tmpMeta[5],omc_Mod_printModStr(threadData, _mod));
tmpMeta[7] = stringAppend(tmpMeta[6],_OMC_LIT19);
tmpMeta[8] = stringAppend(tmpMeta[7],(_b?_OMC_LIT20:_OMC_LIT21));
tmpMeta[9] = stringAppend(tmpMeta[8],_OMC_LIT22);
tmpMeta[10] = stringAppend(tmpMeta[9],omc_SCodeDump_unparseElementStr(threadData, _el, _OMC_LIT5));
omc_Debug_traceln(threadData, tmpMeta[10]);
goto goto_3;
goto tmp4_done;
}
}
goto tmp4_end;
tmp4_end: ;
}
goto goto_3;
tmp4_done:
(void)tmp5;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp4_done2;
goto_3:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp5 < 6) {
goto tmp4_top;
}
MMC_THROW_INTERNAL();
tmp4_done2:;
}
}
_outComponent = tmpMeta[0+0];
_outRestMod = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outRestMod) { *out_outRestMod = _outRestMod; }
return _outComponent;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_updateComponentsAndClassdefs(threadData_t *threadData, modelica_metatype _inComponents, modelica_metatype _inMod, modelica_metatype _inEnv, modelica_metatype *out_outRestMod)
{
modelica_metatype _outComponents = NULL;
modelica_metatype _outRestMod = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outComponents = omc_List_map1Fold(threadData, _inComponents, boxvar_InstExtends_updateComponentsAndClassdefs2, _inEnv, _inMod ,&_outRestMod);
_return: OMC_LABEL_UNUSED
if (out_outRestMod) { *out_outRestMod = _outRestMod; }
return _outComponents;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_noImportElements(threadData_t *threadData, modelica_metatype _inElements)
{
modelica_metatype _outElements = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype __omcQ_24tmpVar1;
modelica_metatype* tmp1;
modelica_metatype __omcQ_24tmpVar0;
int tmp2;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _inElements;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar1 = tmpMeta[1];
tmp1 = &__omcQ_24tmpVar1;
while(1) {
tmp2 = 1;
while (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
if ((!omc_SCodeUtil_elementIsImport(threadData, _e))) {
tmp2--;
break;
}
}
if (tmp2 == 0) {
__omcQ_24tmpVar0 = _e;
*tmp1 = mmc_mk_cons(__omcQ_24tmpVar0,0);
tmp1 = &MMC_CDR(*tmp1);
} else if (tmp2 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp1 = mmc_mk_nil();
tmpMeta[0] = __omcQ_24tmpVar1;
}
_outElements = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElements;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_instDerivedClassesWork(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inClass, modelica_boolean _inBoolean, modelica_metatype _inInfo, modelica_boolean _overflow, modelica_integer _numIter, modelica_metatype *out_outEnv1, modelica_metatype *out_outIH, modelica_metatype *out_outSCodeElementLst2, modelica_metatype *out_outSCodeEquationLst3, modelica_metatype *out_outSCodeEquationLst4, modelica_metatype *out_outSCodeAlgorithmLst5, modelica_metatype *out_outSCodeAlgorithmLst6, modelica_metatype *out_outMod, modelica_metatype *out_outComments)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv1 = NULL;
modelica_metatype _outIH = NULL;
modelica_metatype _outSCodeElementLst2 = NULL;
modelica_metatype _outSCodeEquationLst3 = NULL;
modelica_metatype _outSCodeEquationLst4 = NULL;
modelica_metatype _outSCodeAlgorithmLst5 = NULL;
modelica_metatype _outSCodeAlgorithmLst6 = NULL;
modelica_metatype _outMod = NULL;
modelica_metatype _outComments = NULL;
modelica_metatype tmpMeta[18] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;volatile modelica_metatype tmp4_6;volatile modelica_boolean tmp4_7;volatile modelica_metatype tmp4_8;volatile modelica_boolean tmp4_9;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inIH;
tmp4_4 = _inMod;
tmp4_5 = _inPrefix;
tmp4_6 = _inClass;
tmp4_7 = _inBoolean;
tmp4_8 = _inInfo;
tmp4_9 = _overflow;
{
modelica_metatype _elt = NULL;
modelica_metatype _env = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _daeDMOD = NULL;
modelica_metatype _eq = NULL;
modelica_metatype _ieq = NULL;
modelica_metatype _alg = NULL;
modelica_metatype _ialg = NULL;
modelica_metatype _c = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _dmod = NULL;
modelica_boolean _impl;
modelica_metatype _cache = NULL;
modelica_metatype _ih = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _enumLst = NULL;
modelica_string _n = NULL;
modelica_string _name = NULL;
modelica_string _str1 = NULL;
modelica_string _str2 = NULL;
modelica_metatype _extdecl = NULL;
modelica_metatype _pre = NULL;
modelica_metatype _info = NULL;
modelica_metatype _prefixes = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_6,2,8) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_6), 2));
_name = tmpMeta[10];
_cache = tmp4_1;
_env = tmp4_2;
_ih = tmp4_3;
tmp6 = omc_InstUtil_isBuiltInClass(threadData, _name);
if (1 != tmp6) goto goto_2;
tmpMeta[10] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[11] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[12] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[13] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[14] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[15] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = _ih;
tmpMeta[0+3] = tmpMeta[10];
tmpMeta[0+4] = tmpMeta[11];
tmpMeta[0+5] = tmpMeta[12];
tmpMeta[0+6] = tmpMeta[13];
tmpMeta[0+7] = tmpMeta[14];
tmpMeta[0+8] = _inMod;
tmpMeta[0+9] = tmpMeta[15];
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_6,2,8) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_6), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[11],0,8) == 0) goto tmp3_end;
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 2));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 3));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 4));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 5));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 6));
tmpMeta[17] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 9));
_name = tmpMeta[10];
_elt = tmpMeta[12];
_eq = tmpMeta[13];
_ieq = tmpMeta[14];
_alg = tmpMeta[15];
_ialg = tmpMeta[16];
_extdecl = tmpMeta[17];
_cache = tmp4_1;
_env = tmp4_2;
_ih = tmp4_3;
_info = tmp4_8;
tmp4 += 2;
tmpMeta[10] = mmc_mk_cons(_name, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_assertionOrAddSourceMessage(threadData, isNone(_extdecl), _OMC_LIT27, tmpMeta[10], _info);
tmpMeta[10] = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inClass), 8))), MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = _ih;
tmpMeta[0+3] = _elt;
tmpMeta[0+4] = _eq;
tmpMeta[0+5] = _ieq;
tmpMeta[0+6] = _alg;
tmpMeta[0+7] = _ialg;
tmpMeta[0+8] = _inMod;
tmpMeta[0+9] = tmpMeta[10];
goto tmp3_done;
}
case 2: {
if (0 != tmp4_9) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_6,2,8) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[10],2,3) == 0) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[11],0,2) == 0) goto tmp3_end;
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 2));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 3));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_6), 9));
_tp = tmpMeta[12];
_dmod = tmpMeta[13];
_info = tmpMeta[14];
_cache = tmp4_1;
_env = tmp4_2;
_ih = tmp4_3;
_mod = tmp4_4;
_pre = tmp4_5;
_impl = tmp4_7;
tmp4 += 2;
_cache = omc_Lookup_lookupClass(threadData, _cache, _env, _tp, mmc_mk_some(_info) ,&_c ,&_cenv);
_dmod = omc_InstUtil_chainRedeclares(threadData, _mod, _dmod);
tmpMeta[10] = mmc_mk_box2(5, &Mod_ModScope_DERIVED__desc, _tp);
_cache = omc_Mod_elabMod(threadData, _cache, _env, _ih, _pre, _dmod, _impl, tmpMeta[10], _info ,&_daeDMOD);
_mod = omc_Mod_merge(threadData, _mod, _daeDMOD, _OMC_LIT28, 1);
_cache = omc_InstExtends_instDerivedClassesWork(threadData, _cache, _cenv, _ih, _mod, _pre, _c, _impl, _info, (_numIter >= ((modelica_integer) 256)), ((modelica_integer) 1) + _numIter ,&_env ,&_ih ,&_elt ,&_eq ,&_ieq ,&_alg ,&_ialg ,&_mod ,&_outComments);
tmpMeta[10] = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inClass), 8))), _outComments);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = _ih;
tmpMeta[0+3] = _elt;
tmpMeta[0+4] = _eq;
tmpMeta[0+5] = _ieq;
tmpMeta[0+6] = _alg;
tmpMeta[0+7] = _ialg;
tmpMeta[0+8] = _mod;
tmpMeta[0+9] = tmpMeta[10];
goto tmp3_done;
}
case 3: {
if (0 != tmp4_9) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_6,2,8) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_6), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_6), 3));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_6), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[12],3,1) == 0) goto tmp3_end;
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_6), 8));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_6), 9));
_n = tmpMeta[10];
_prefixes = tmpMeta[11];
_enumLst = tmpMeta[13];
_cmt = tmpMeta[14];
_info = tmpMeta[15];
_cache = tmp4_1;
_env = tmp4_2;
_ih = tmp4_3;
_mod = tmp4_4;
_pre = tmp4_5;
_impl = tmp4_7;
tmp4 += 1;
_c = omc_SCodeInstUtil_expandEnumeration(threadData, _n, _enumLst, _prefixes, _cmt, _info);
tmpMeta[0+0] = omc_InstExtends_instDerivedClassesWork(threadData, _cache, _env, _ih, _mod, _pre, _c, _impl, _info, (_numIter >= ((modelica_integer) 256)), ((modelica_integer) 1) + _numIter, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5], &tmpMeta[0+6], &tmpMeta[0+7], &tmpMeta[0+8], &tmpMeta[0+9]);
goto tmp3_done;
}
case 4: {
if (1 != tmp4_9) goto tmp3_end;
_str1 = omc_SCodeDump_unparseElementStr(threadData, _inClass, _OMC_LIT5);
_str2 = omc_FGraph_printGraphPathStr(threadData, _inEnv);
tmpMeta[10] = mmc_mk_cons(_str1, mmc_mk_cons(_str2, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addSourceMessage(threadData, _OMC_LIT32, tmpMeta[10], _inInfo);
goto goto_2;
goto tmp3_done;
}
case 5: {
modelica_boolean tmp7;
tmp7 = omc_Flags_isSet(threadData, _OMC_LIT3);
if (1 != tmp7) goto goto_2;
omc_Debug_trace(threadData, _OMC_LIT33);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outEnv1 = tmpMeta[0+1];
_outIH = tmpMeta[0+2];
_outSCodeElementLst2 = tmpMeta[0+3];
_outSCodeEquationLst3 = tmpMeta[0+4];
_outSCodeEquationLst4 = tmpMeta[0+5];
_outSCodeAlgorithmLst5 = tmpMeta[0+6];
_outSCodeAlgorithmLst6 = tmpMeta[0+7];
_outMod = tmpMeta[0+8];
_outComments = tmpMeta[0+9];
_return: OMC_LABEL_UNUSED
if (out_outEnv1) { *out_outEnv1 = _outEnv1; }
if (out_outIH) { *out_outIH = _outIH; }
if (out_outSCodeElementLst2) { *out_outSCodeElementLst2 = _outSCodeElementLst2; }
if (out_outSCodeEquationLst3) { *out_outSCodeEquationLst3 = _outSCodeEquationLst3; }
if (out_outSCodeEquationLst4) { *out_outSCodeEquationLst4 = _outSCodeEquationLst4; }
if (out_outSCodeAlgorithmLst5) { *out_outSCodeAlgorithmLst5 = _outSCodeAlgorithmLst5; }
if (out_outSCodeAlgorithmLst6) { *out_outSCodeAlgorithmLst6 = _outSCodeAlgorithmLst6; }
if (out_outMod) { *out_outMod = _outMod; }
if (out_outComments) { *out_outComments = _outComments; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InstExtends_instDerivedClassesWork(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inClass, modelica_metatype _inBoolean, modelica_metatype _inInfo, modelica_metatype _overflow, modelica_metatype _numIter, modelica_metatype *out_outEnv1, modelica_metatype *out_outIH, modelica_metatype *out_outSCodeElementLst2, modelica_metatype *out_outSCodeEquationLst3, modelica_metatype *out_outSCodeEquationLst4, modelica_metatype *out_outSCodeAlgorithmLst5, modelica_metatype *out_outSCodeAlgorithmLst6, modelica_metatype *out_outMod, modelica_metatype *out_outComments)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_metatype _outCache = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
tmp2 = mmc_unbox_integer(_overflow);
tmp3 = mmc_unbox_integer(_numIter);
_outCache = omc_InstExtends_instDerivedClassesWork(threadData, _inCache, _inEnv, _inIH, _inMod, _inPrefix, _inClass, tmp1, _inInfo, tmp2, tmp3, out_outEnv1, out_outIH, out_outSCodeElementLst2, out_outSCodeEquationLst3, out_outSCodeEquationLst4, out_outSCodeAlgorithmLst5, out_outSCodeAlgorithmLst6, out_outMod, out_outComments);
return _outCache;
}
DLLExport
modelica_metatype omc_InstExtends_instDerivedClasses(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inClass, modelica_boolean _inBoolean, modelica_metatype _inInfo, modelica_metatype *out_outEnv1, modelica_metatype *out_outIH, modelica_metatype *out_outSCodeElementLst2, modelica_metatype *out_outSCodeEquationLst3, modelica_metatype *out_outSCodeEquationLst4, modelica_metatype *out_outSCodeAlgorithmLst5, modelica_metatype *out_outSCodeAlgorithmLst6, modelica_metatype *out_outMod, modelica_metatype *out_outComments)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv1 = NULL;
modelica_metatype _outIH = NULL;
modelica_metatype _outSCodeElementLst2 = NULL;
modelica_metatype _outSCodeEquationLst3 = NULL;
modelica_metatype _outSCodeEquationLst4 = NULL;
modelica_metatype _outSCodeAlgorithmLst5 = NULL;
modelica_metatype _outSCodeAlgorithmLst6 = NULL;
modelica_metatype _outMod = NULL;
modelica_metatype _outComments = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outCache = omc_InstExtends_instDerivedClassesWork(threadData, _inCache, _inEnv, _inIH, _inMod, _inPrefix, _inClass, _inBoolean, _inInfo, 0, ((modelica_integer) 0) ,&_outEnv1 ,&_outIH ,&_outSCodeElementLst2 ,&_outSCodeEquationLst3 ,&_outSCodeEquationLst4 ,&_outSCodeAlgorithmLst5 ,&_outSCodeAlgorithmLst6 ,&_outMod ,&_outComments);
_return: OMC_LABEL_UNUSED
if (out_outEnv1) { *out_outEnv1 = _outEnv1; }
if (out_outIH) { *out_outIH = _outIH; }
if (out_outSCodeElementLst2) { *out_outSCodeElementLst2 = _outSCodeElementLst2; }
if (out_outSCodeEquationLst3) { *out_outSCodeEquationLst3 = _outSCodeEquationLst3; }
if (out_outSCodeEquationLst4) { *out_outSCodeEquationLst4 = _outSCodeEquationLst4; }
if (out_outSCodeAlgorithmLst5) { *out_outSCodeAlgorithmLst5 = _outSCodeAlgorithmLst5; }
if (out_outSCodeAlgorithmLst6) { *out_outSCodeAlgorithmLst6 = _outSCodeAlgorithmLst6; }
if (out_outMod) { *out_outMod = _outMod; }
if (out_outComments) { *out_outComments = _outComments; }
return _outCache;
}
modelica_metatype boxptr_InstExtends_instDerivedClasses(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inClass, modelica_metatype _inBoolean, modelica_metatype _inInfo, modelica_metatype *out_outEnv1, modelica_metatype *out_outIH, modelica_metatype *out_outSCodeElementLst2, modelica_metatype *out_outSCodeEquationLst3, modelica_metatype *out_outSCodeEquationLst4, modelica_metatype *out_outSCodeAlgorithmLst5, modelica_metatype *out_outSCodeAlgorithmLst6, modelica_metatype *out_outMod, modelica_metatype *out_outComments)
{
modelica_integer tmp1;
modelica_metatype _outCache = NULL;
tmp1 = mmc_unbox_integer(_inBoolean);
_outCache = omc_InstExtends_instDerivedClasses(threadData, _inCache, _inEnv, _inIH, _inMod, _inPrefix, _inClass, tmp1, _inInfo, out_outEnv1, out_outIH, out_outSCodeElementLst2, out_outSCodeEquationLst3, out_outSCodeEquationLst4, out_outSCodeAlgorithmLst5, out_outSCodeAlgorithmLst6, out_outMod, out_outComments);
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_instClassExtendsList2(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inMod, modelica_string _inName, modelica_metatype _inClassExtendsElt, modelica_metatype _inElements, modelica_metatype *out_outElements)
{
modelica_metatype _outMod = NULL;
modelica_metatype _outElements = NULL;
modelica_metatype tmpMeta[18] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_string tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inMod;
tmp4_2 = _inName;
tmp4_3 = _inClassExtendsElt;
tmp4_4 = _inElements;
{
modelica_metatype _elt = NULL;
modelica_metatype _compelt = NULL;
modelica_metatype _classExtendsElt = NULL;
modelica_metatype _cl = NULL;
modelica_metatype _classDef = NULL;
modelica_metatype _classExtendsCdef = NULL;
modelica_metatype _partialPrefix1 = NULL;
modelica_metatype _partialPrefix2 = NULL;
modelica_metatype _encapsulatedPrefix1 = NULL;
modelica_metatype _encapsulatedPrefix2 = NULL;
modelica_metatype _restriction1 = NULL;
modelica_metatype _restriction2 = NULL;
modelica_metatype _prefixes1 = NULL;
modelica_metatype _prefixes2 = NULL;
modelica_metatype _vis2 = NULL;
modelica_string _name1 = NULL;
modelica_string _name2 = NULL;
modelica_string _env_path = NULL;
modelica_metatype _externalDecl1 = NULL;
modelica_metatype _externalDecl2 = NULL;
modelica_metatype _comment1 = NULL;
modelica_metatype _comment2 = NULL;
modelica_metatype _els1 = NULL;
modelica_metatype _els2 = NULL;
modelica_metatype _nEqn1 = NULL;
modelica_metatype _nEqn2 = NULL;
modelica_metatype _inEqn1 = NULL;
modelica_metatype _inEqn2 = NULL;
modelica_metatype _nAlg1 = NULL;
modelica_metatype _nAlg2 = NULL;
modelica_metatype _inAlg1 = NULL;
modelica_metatype _inAlg2 = NULL;
modelica_metatype _inCons1 = NULL;
modelica_metatype _inCons2 = NULL;
modelica_metatype _clats = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _first = NULL;
modelica_metatype _mods = NULL;
modelica_metatype _derivedMod = NULL;
modelica_metatype _mod1 = NULL;
modelica_metatype _emod = NULL;
modelica_metatype _info1 = NULL;
modelica_metatype _info2 = NULL;
modelica_boolean _b;
modelica_metatype _attrs = NULL;
modelica_metatype _derivedTySpec = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_boolean tmp7;
if (listEmpty(tmp4_4)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_4);
tmpMeta[3] = MMC_CDR(tmp4_4);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,8) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,8) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmp6 = mmc_unbox_integer(tmpMeta[8]);
_cl = tmpMeta[4];
_name2 = tmpMeta[5];
_mod1 = tmpMeta[7];
_b = tmp6;
_rest = tmpMeta[3];
_emod = tmp4_1;
_name1 = tmp4_2;
_classExtendsElt = tmp4_3;
tmp4 += 1;
tmp7 = (stringEqual(_name1, _name2));
if (1 != tmp7) goto goto_2;
_env_path = omc_AbsynUtil_pathString(threadData, omc_FGraph_getGraphName(threadData, _inEnv), _OMC_LIT34, 1, 0);
_name2 = omc_InstExtends_buildClassExtendsName(threadData, _env_path, _name2);
tmpMeta[2] = _cl;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,8) == 0) goto goto_2;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 7));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 8));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 9));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
tmpMeta[17] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 9));
_prefixes2 = tmpMeta[3];
_encapsulatedPrefix2 = tmpMeta[4];
_partialPrefix2 = tmpMeta[5];
_restriction2 = tmpMeta[6];
_els2 = tmpMeta[8];
_nEqn2 = tmpMeta[9];
_inEqn2 = tmpMeta[10];
_nAlg2 = tmpMeta[11];
_inAlg2 = tmpMeta[12];
_inCons2 = tmpMeta[13];
_clats = tmpMeta[14];
_externalDecl2 = tmpMeta[15];
_comment2 = tmpMeta[16];
_info2 = tmpMeta[17];
tmpMeta[2] = _classExtendsElt;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 9));
_prefixes1 = tmpMeta[3];
_encapsulatedPrefix1 = tmpMeta[4];
_partialPrefix1 = tmpMeta[5];
_restriction1 = tmpMeta[6];
_classExtendsCdef = tmpMeta[7];
_comment1 = tmpMeta[8];
_info1 = tmpMeta[9];
tmpMeta[2] = _classExtendsCdef;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,2) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,8) == 0) goto goto_2;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 6));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 9));
_mods = tmpMeta[3];
_els1 = tmpMeta[5];
_nEqn1 = tmpMeta[6];
_inEqn1 = tmpMeta[7];
_nAlg1 = tmpMeta[8];
_inAlg1 = tmpMeta[9];
_inCons1 = tmpMeta[10];
_externalDecl1 = tmpMeta[11];
tmpMeta[2] = mmc_mk_box9(3, &SCode_ClassDef_PARTS__desc, _els2, _nEqn2, _inEqn2, _nAlg2, _inAlg2, _inCons2, _clats, _externalDecl2);
_classDef = tmpMeta[2];
tmpMeta[2] = mmc_mk_box9(5, &SCode_Element_CLASS__desc, _name2, _prefixes2, _encapsulatedPrefix2, _partialPrefix2, _restriction2, _classDef, _comment2, _info2);
_compelt = tmpMeta[2];
_vis2 = omc_SCodeUtil_prefixesVisibility(threadData, _prefixes2);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name2);
tmpMeta[3] = mmc_mk_box6(4, &SCode_Element_EXTENDS__desc, tmpMeta[2], _vis2, _mods, mmc_mk_none(), _info1);
_elt = tmpMeta[3];
tmpMeta[2] = mmc_mk_cons(_elt, _els1);
tmpMeta[3] = mmc_mk_box9(3, &SCode_ClassDef_PARTS__desc, tmpMeta[2], _nEqn1, _inEqn1, _nAlg1, _inAlg1, _inCons1, _clats, _externalDecl1);
_classDef = tmpMeta[3];
tmpMeta[2] = mmc_mk_box9(5, &SCode_Element_CLASS__desc, _name1, _prefixes1, _encapsulatedPrefix1, _partialPrefix1, _restriction1, _classDef, _comment1, _info1);
_elt = tmpMeta[2];
_emod = omc_Mod_renameTopLevelNamedSubMod(threadData, _emod, _name1, _name2);
tmpMeta[3] = mmc_mk_box3(0, _compelt, _mod1, mmc_mk_boolean(_b));
tmpMeta[5] = mmc_mk_box3(0, _elt, _OMC_LIT15, mmc_mk_boolean(1));
tmpMeta[4] = mmc_mk_cons(tmpMeta[5], _rest);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], tmpMeta[4]);
tmpMeta[0+0] = _emod;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 1: {
modelica_integer tmp8;
modelica_boolean tmp9;
if (listEmpty(tmp4_4)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_4);
tmpMeta[3] = MMC_CDR(tmp4_4);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,8) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],2,3) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmp8 = mmc_unbox_integer(tmpMeta[8]);
_cl = tmpMeta[4];
_name2 = tmpMeta[5];
_mod1 = tmpMeta[7];
_b = tmp8;
_rest = tmpMeta[3];
_emod = tmp4_1;
_name1 = tmp4_2;
_classExtendsElt = tmp4_3;
tmp9 = (stringEqual(_name1, _name2));
if (1 != tmp9) goto goto_2;
_env_path = omc_AbsynUtil_pathString(threadData, omc_FGraph_getGraphName(threadData, _inEnv), _OMC_LIT34, 1, 0);
_name2 = omc_InstExtends_buildClassExtendsName(threadData, _env_path, _name2);
tmpMeta[2] = _cl;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],2,3) == 0) goto goto_2;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 9));
_prefixes2 = tmpMeta[3];
_encapsulatedPrefix2 = tmpMeta[4];
_partialPrefix2 = tmpMeta[5];
_restriction2 = tmpMeta[6];
_derivedTySpec = tmpMeta[8];
_derivedMod = tmpMeta[9];
_attrs = tmpMeta[10];
_comment2 = tmpMeta[11];
_info2 = tmpMeta[12];
tmpMeta[2] = _classExtendsElt;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 9));
_prefixes1 = tmpMeta[3];
_encapsulatedPrefix1 = tmpMeta[4];
_partialPrefix1 = tmpMeta[5];
_restriction1 = tmpMeta[6];
_classExtendsCdef = tmpMeta[7];
_comment1 = tmpMeta[8];
_info1 = tmpMeta[9];
tmpMeta[2] = _classExtendsCdef;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,2) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,8) == 0) goto goto_2;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 5));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 6));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 7));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 9));
_mods = tmpMeta[3];
_els1 = tmpMeta[5];
_nEqn1 = tmpMeta[6];
_inEqn1 = tmpMeta[7];
_nAlg1 = tmpMeta[8];
_inAlg1 = tmpMeta[9];
_inCons1 = tmpMeta[10];
_externalDecl1 = tmpMeta[11];
tmpMeta[2] = mmc_mk_box4(5, &SCode_ClassDef_DERIVED__desc, _derivedTySpec, _derivedMod, _attrs);
_classDef = tmpMeta[2];
tmpMeta[2] = mmc_mk_box9(5, &SCode_Element_CLASS__desc, _name2, _prefixes2, _encapsulatedPrefix2, _partialPrefix2, _restriction2, _classDef, _comment2, _info2);
_compelt = tmpMeta[2];
_vis2 = omc_SCodeUtil_prefixesVisibility(threadData, _prefixes2);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name2);
tmpMeta[3] = mmc_mk_box6(4, &SCode_Element_EXTENDS__desc, tmpMeta[2], _vis2, _mods, mmc_mk_none(), _info1);
_elt = tmpMeta[3];
tmpMeta[2] = mmc_mk_cons(_elt, _els1);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box9(3, &SCode_ClassDef_PARTS__desc, tmpMeta[2], _nEqn1, _inEqn1, _nAlg1, _inAlg1, _inCons1, tmpMeta[3], _externalDecl1);
_classDef = tmpMeta[4];
tmpMeta[2] = mmc_mk_box9(5, &SCode_Element_CLASS__desc, _name1, _prefixes1, _encapsulatedPrefix1, _partialPrefix1, _restriction1, _classDef, _comment1, _info1);
_elt = tmpMeta[2];
_emod = omc_Mod_renameTopLevelNamedSubMod(threadData, _emod, _name1, _name2);
tmpMeta[3] = mmc_mk_box3(0, _compelt, _mod1, mmc_mk_boolean(_b));
tmpMeta[5] = mmc_mk_box3(0, _elt, _OMC_LIT15, mmc_mk_boolean(1));
tmpMeta[4] = mmc_mk_cons(tmpMeta[5], _rest);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], tmpMeta[4]);
tmpMeta[0+0] = _emod;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_4)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_4);
tmpMeta[3] = MMC_CDR(tmp4_4);
_first = tmpMeta[2];
_rest = tmpMeta[3];
_emod = tmp4_1;
_name1 = tmp4_2;
_classExtendsElt = tmp4_3;
tmp4 += 1;
_emod = omc_InstExtends_instClassExtendsList2(threadData, _inEnv, _emod, _name1, _classExtendsElt, _rest ,&_rest);
tmpMeta[2] = mmc_mk_cons(_first, _rest);
tmpMeta[0+0] = _emod;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 3: {
if (!listEmpty(tmp4_4)) goto tmp3_end;
omc_Debug_traceln(threadData, _OMC_LIT35);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outMod = tmpMeta[0+0];
_outElements = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outElements) { *out_outElements = _outElements; }
return _outMod;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_InstExtends_buildClassExtendsName(threadData_t *threadData, modelica_string _inEnvPath, modelica_string _inClassName)
{
modelica_string _outClassName = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = stringAppend(_OMC_LIT36,_inClassName);
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT37);
tmpMeta[2] = stringAppend(tmpMeta[1],_inEnvPath);
_outClassName = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _outClassName;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_instClassExtendsList(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inMod, modelica_metatype _inClassExtendsList, modelica_metatype _inElements, modelica_metatype *out_outElements)
{
modelica_metatype _outMod = NULL;
modelica_metatype _outElements = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inMod;
tmp4_2 = _inClassExtendsList;
tmp4_3 = _inElements;
{
modelica_metatype _first = NULL;
modelica_metatype _rest = NULL;
modelica_string _name = NULL;
modelica_metatype _els = NULL;
modelica_metatype _compelts = NULL;
modelica_metatype _emod = NULL;
modelica_metatype _names = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_2)) goto tmp3_end;
_emod = tmp4_1;
_compelts = tmp4_3;
tmp4 += 2;
tmpMeta[0+0] = _emod;
tmpMeta[0+1] = _compelts;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_first = tmpMeta[2];
_name = tmpMeta[4];
_rest = tmpMeta[3];
_emod = tmp4_1;
_compelts = tmp4_3;
_emod = omc_InstExtends_instClassExtendsList2(threadData, _inEnv, _emod, _name, _first, _compelts ,&_compelts);
tmpMeta[0+0] = omc_InstExtends_instClassExtendsList(threadData, _inEnv, _emod, _rest, _compelts, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
modelica_boolean tmp6;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_name = tmpMeta[4];
_compelts = tmp4_3;
tmp6 = omc_Flags_isSet(threadData, _OMC_LIT3);
if (1 != tmp6) goto goto_2;
tmpMeta[2] = stringAppend(_OMC_LIT38,_name);
omc_Debug_traceln(threadData, tmpMeta[2]);
omc_Debug_traceln(threadData, _OMC_LIT39);
_els = omc_List_map(threadData, _compelts, boxvar_Util_tuple31);
_names = omc_List_map(threadData, _els, boxvar_SCodeUtil_elementName);
omc_Debug_traceln(threadData, stringDelimitList(_names, _OMC_LIT40));
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outMod = tmpMeta[0+0];
_outElements = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outElements) { *out_outElements = _outElements; }
return _outMod;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_instExtendsAndClassExtendsList2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inExtendsElementLst, modelica_metatype _inClassExtendsElementLst, modelica_metatype _inElementsFromExtendsScope, modelica_metatype _inState, modelica_string _inClassName, modelica_boolean _inImpl, modelica_boolean _isPartialInst, modelica_metatype *out_outEnv, modelica_metatype *out_outIH, modelica_metatype *out_outMod, modelica_metatype *out_outElements, modelica_metatype *out_outNormalEqs, modelica_metatype *out_outInitialEqs, modelica_metatype *out_outNormalAlgs, modelica_metatype *out_outInitialAlgs, modelica_metatype *out_comments)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outIH = NULL;
modelica_metatype _outMod = NULL;
modelica_metatype _outElements = NULL;
modelica_metatype _outNormalEqs = NULL;
modelica_metatype _outInitialEqs = NULL;
modelica_metatype _outNormalAlgs = NULL;
modelica_metatype _outInitialAlgs = NULL;
modelica_metatype _comments = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outCache = omc_InstExtends_instExtendsList(threadData, _inCache, _inEnv, _inIH, _inMod, _inPrefix, _inExtendsElementLst, _inElementsFromExtendsScope, _inState, _inClassName, _inImpl, _isPartialInst ,&_outEnv ,&_outIH ,&_outMod ,&_outElements ,&_outNormalEqs ,&_outInitialEqs ,&_outNormalAlgs ,&_outInitialAlgs ,&_comments);
_outMod = omc_InstExtends_instClassExtendsList(threadData, _inEnv, _outMod, _inClassExtendsElementLst, _outElements ,&_outElements);
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outIH) { *out_outIH = _outIH; }
if (out_outMod) { *out_outMod = _outMod; }
if (out_outElements) { *out_outElements = _outElements; }
if (out_outNormalEqs) { *out_outNormalEqs = _outNormalEqs; }
if (out_outInitialEqs) { *out_outInitialEqs = _outInitialEqs; }
if (out_outNormalAlgs) { *out_outNormalAlgs = _outNormalAlgs; }
if (out_outInitialAlgs) { *out_outInitialAlgs = _outInitialAlgs; }
if (out_comments) { *out_comments = _comments; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InstExtends_instExtendsAndClassExtendsList2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inExtendsElementLst, modelica_metatype _inClassExtendsElementLst, modelica_metatype _inElementsFromExtendsScope, modelica_metatype _inState, modelica_metatype _inClassName, modelica_metatype _inImpl, modelica_metatype _isPartialInst, modelica_metatype *out_outEnv, modelica_metatype *out_outIH, modelica_metatype *out_outMod, modelica_metatype *out_outElements, modelica_metatype *out_outNormalEqs, modelica_metatype *out_outInitialEqs, modelica_metatype *out_outNormalAlgs, modelica_metatype *out_outInitialAlgs, modelica_metatype *out_comments)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outCache = NULL;
tmp1 = mmc_unbox_integer(_inImpl);
tmp2 = mmc_unbox_integer(_isPartialInst);
_outCache = omc_InstExtends_instExtendsAndClassExtendsList2(threadData, _inCache, _inEnv, _inIH, _inMod, _inPrefix, _inExtendsElementLst, _inClassExtendsElementLst, _inElementsFromExtendsScope, _inState, _inClassName, tmp1, tmp2, out_outEnv, out_outIH, out_outMod, out_outElements, out_outNormalEqs, out_outInitialEqs, out_outNormalAlgs, out_outInitialAlgs, out_comments);
return _outCache;
}
DLLExport
modelica_metatype omc_InstExtends_instExtendsAndClassExtendsList(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inExtendsElementLst, modelica_metatype _inClassExtendsElementLst, modelica_metatype _inElementsFromExtendsScope, modelica_metatype _inState, modelica_string _inClassName, modelica_boolean _inImpl, modelica_boolean _isPartialInst, modelica_metatype *out_outEnv, modelica_metatype *out_outIH, modelica_metatype *out_outMod, modelica_metatype *out_outElements, modelica_metatype *out_outNormalEqs, modelica_metatype *out_outInitialEqs, modelica_metatype *out_outNormalAlgs, modelica_metatype *out_outInitialAlgs, modelica_metatype *out_outComments)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outIH = NULL;
modelica_metatype _outMod = NULL;
modelica_metatype _outElements = NULL;
modelica_metatype _outNormalEqs = NULL;
modelica_metatype _outInitialEqs = NULL;
modelica_metatype _outNormalAlgs = NULL;
modelica_metatype _outInitialAlgs = NULL;
modelica_metatype _outComments = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _cdefelts = NULL;
modelica_metatype _tmpelts = NULL;
modelica_metatype _extendselts = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_extendselts = omc_List_map(threadData, _inExtendsElementLst, boxvar_SCodeInstUtil_expandEnumerationClass);
_outCache = omc_InstExtends_instExtendsAndClassExtendsList2(threadData, _inCache, _inEnv, _inIH, _inMod, _inPrefix, _extendselts, _inClassExtendsElementLst, _inElementsFromExtendsScope, _inState, _inClassName, _inImpl, _isPartialInst ,&_outEnv ,&_outIH ,&_outMod ,&_elts ,&_outNormalEqs ,&_outInitialEqs ,&_outNormalAlgs ,&_outInitialAlgs ,&_outComments);
_outElements = omc_List_map(threadData, _elts, boxvar_Util_tuple312);
_tmpelts = omc_List_map(threadData, _outElements, boxvar_Util_tuple21);
omc_InstUtil_splitEltsNoComponents(threadData, _tmpelts ,&_cdefelts ,NULL ,NULL);
_outCache = omc_InstUtil_addClassdefsToEnv(threadData, _outCache, _outEnv, _outIH, _inPrefix, _cdefelts, _inImpl, mmc_mk_some(_outMod), 0 ,&_outEnv ,&_outIH);
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outIH) { *out_outIH = _outIH; }
if (out_outMod) { *out_outMod = _outMod; }
if (out_outElements) { *out_outElements = _outElements; }
if (out_outNormalEqs) { *out_outNormalEqs = _outNormalEqs; }
if (out_outInitialEqs) { *out_outInitialEqs = _outInitialEqs; }
if (out_outNormalAlgs) { *out_outNormalAlgs = _outNormalAlgs; }
if (out_outInitialAlgs) { *out_outInitialAlgs = _outInitialAlgs; }
if (out_outComments) { *out_outComments = _outComments; }
return _outCache;
}
modelica_metatype boxptr_InstExtends_instExtendsAndClassExtendsList(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inExtendsElementLst, modelica_metatype _inClassExtendsElementLst, modelica_metatype _inElementsFromExtendsScope, modelica_metatype _inState, modelica_metatype _inClassName, modelica_metatype _inImpl, modelica_metatype _isPartialInst, modelica_metatype *out_outEnv, modelica_metatype *out_outIH, modelica_metatype *out_outMod, modelica_metatype *out_outElements, modelica_metatype *out_outNormalEqs, modelica_metatype *out_outInitialEqs, modelica_metatype *out_outNormalAlgs, modelica_metatype *out_outInitialAlgs, modelica_metatype *out_outComments)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outCache = NULL;
tmp1 = mmc_unbox_integer(_inImpl);
tmp2 = mmc_unbox_integer(_isPartialInst);
_outCache = omc_InstExtends_instExtendsAndClassExtendsList(threadData, _inCache, _inEnv, _inIH, _inMod, _inPrefix, _inExtendsElementLst, _inClassExtendsElementLst, _inElementsFromExtendsScope, _inState, _inClassName, tmp1, tmp2, out_outEnv, out_outIH, out_outMod, out_outElements, out_outNormalEqs, out_outInitialEqs, out_outNormalAlgs, out_outInitialAlgs, out_outComments);
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_updateElementListVisibility(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inVisibility)
{
modelica_metatype _outElements = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inVisibility;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,0) == 0) goto tmp2_end;
tmpMeta[0] = _inElements;
goto tmp2_done;
}
case 1: {
{
modelica_metatype __omcQ_24tmpVar3;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar2;
int tmp6;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _inElements;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar3 = tmpMeta[2];
tmp5 = &__omcQ_24tmpVar3;
while(1) {
tmp6 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp6--;
}
if (tmp6 == 0) {
__omcQ_24tmpVar2 = omc_SCodeUtil_makeElementProtected(threadData, _e);
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar2,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar3;
}
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElements = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElements;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_lookupBaseClass(threadData_t *threadData, modelica_metatype _inPath, modelica_boolean _inSelfReference, modelica_string _inClassName, modelica_metatype _inEnv, modelica_metatype _inCache, modelica_metatype *out_outElement, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outElement = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_boolean tmp4_2;
tmp4_1 = _inPath;
tmp4_2 = _inSelfReference;
{
modelica_string _name = NULL;
modelica_metatype _elem = NULL;
modelica_metatype _env = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (1 != tmp4_2) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta[3];
_elem = omc_Lookup_lookupClassLocal(threadData, _inEnv, _name ,&_env);
tmpMeta[0+0] = _inCache;
tmpMeta[0+1] = mmc_mk_some(_elem);
tmpMeta[0+2] = _env;
goto tmp3_done;
}
case 1: {
tmpMeta[3] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _inClassName);
_path = omc_AbsynUtil_removePartialPrefix(threadData, tmpMeta[3], _inPath);
_cache = omc_Lookup_lookupClass(threadData, _inCache, _inEnv, _path, mmc_mk_none() ,&_elem ,&_env);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = mmc_mk_some(_elem);
tmpMeta[0+2] = _env;
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _inCache;
tmpMeta[0+1] = mmc_mk_none();
tmpMeta[0+2] = _inEnv;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outElement = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outElement) { *out_outElement = _outElement; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InstExtends_lookupBaseClass(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inSelfReference, modelica_metatype _inClassName, modelica_metatype _inEnv, modelica_metatype _inCache, modelica_metatype *out_outElement, modelica_metatype *out_outEnv)
{
modelica_integer tmp1;
modelica_metatype _outCache = NULL;
tmp1 = mmc_unbox_integer(_inSelfReference);
_outCache = omc_InstExtends_lookupBaseClass(threadData, _inPath, tmp1, _inClassName, _inEnv, _inCache, out_outElement, out_outEnv);
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_InstExtends_instExtendsList(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inLocalElements, modelica_metatype _inElementsFromExtendsScope, modelica_metatype _inState, modelica_string _inClassName, modelica_boolean _inImpl, modelica_boolean _inPartialInst, modelica_metatype *out_outEnv, modelica_metatype *out_outIH, modelica_metatype *out_outMod, modelica_metatype *out_outElements, modelica_metatype *out_outNormalEqs, modelica_metatype *out_outInitialEqs, modelica_metatype *out_outNormalAlgs, modelica_metatype *out_outInitialAlgs, modelica_metatype *out_outComments)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outIH = NULL;
modelica_metatype _outMod = NULL;
modelica_metatype _outElements = NULL;
modelica_metatype _outNormalEqs = NULL;
modelica_metatype _outInitialEqs = NULL;
modelica_metatype _outNormalAlgs = NULL;
modelica_metatype _outInitialAlgs = NULL;
modelica_metatype _outComments = NULL;
modelica_metatype _duplicates = NULL;
modelica_metatype _duplicateUnparseStrings = NULL;
modelica_metatype tmpMeta[19] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outCache = _inCache;
_outEnv = _inEnv;
_outIH = _inIH;
_outMod = _inMod;
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outElements = tmpMeta[0];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_outNormalEqs = tmpMeta[1];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_outInitialEqs = tmpMeta[2];
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_outNormalAlgs = tmpMeta[3];
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
_outInitialAlgs = tmpMeta[4];
tmpMeta[5] = MMC_REFSTRUCTLIT(mmc_nil);
_outComments = tmpMeta[5];
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
_duplicates = tmpMeta[6];
tmpMeta[7] = MMC_REFSTRUCTLIT(mmc_nil);
_duplicateUnparseStrings = tmpMeta[7];
_duplicates = omc_List_sortedDuplicates(threadData, omc_List_sort(threadData, _inElementsFromExtendsScope, boxvar_SCodeUtil_elementEqual), boxvar_SCodeUtil_elementEqual);
if(omc_Config_acceptMetaModelicaGrammar(threadData))
{
_duplicates = omc_List_filterOnFalse(threadData, _duplicates, boxvar_SCodeUtil_isTypeVar);
}
if((!listEmpty(_duplicates)))
{
{
modelica_metatype __omcQ_24tmpVar5;
modelica_metatype* tmp1;
modelica_string __omcQ_24tmpVar4;
int tmp2;
modelica_metatype _i_loopVar = 0;
modelica_metatype _i;
_i_loopVar = _duplicates;
tmpMeta[9] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar5 = tmpMeta[9];
tmp1 = &__omcQ_24tmpVar5;
while(1) {
tmp2 = 1;
if (!listEmpty(_i_loopVar)) {
_i = MMC_CAR(_i_loopVar);
_i_loopVar = MMC_CDR(_i_loopVar);
tmp2--;
}
if (tmp2 == 0) {
__omcQ_24tmpVar4 = omc_SCodeDump_unparseElementStr(threadData, _i, _OMC_LIT5);
*tmp1 = mmc_mk_cons(__omcQ_24tmpVar4,0);
tmp1 = &MMC_CDR(*tmp1);
} else if (tmp2 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp1 = mmc_mk_nil();
tmpMeta[8] = __omcQ_24tmpVar5;
}
_duplicateUnparseStrings = tmpMeta[8];
if((listLength(_duplicates) > ((modelica_integer) 1)))
{
omc_Error_addMultiSourceMessage(threadData, _OMC_LIT43, _duplicateUnparseStrings, omc_List_map(threadData, _duplicates, boxvar_SCodeUtil_elementInfo));
}
else
{
omc_Error_addSourceMessage(threadData, _OMC_LIT43, _duplicateUnparseStrings, omc_SCodeUtil_elementInfo(threadData, listHead(_duplicates)));
}
MMC_THROW_INTERNAL();
}
{
modelica_metatype _el;
for (tmpMeta[8] = listReverse(_inLocalElements); !listEmpty(tmpMeta[8]); tmpMeta[8]=MMC_CDR(tmpMeta[8]))
{
_el = MMC_CAR(tmpMeta[8]);
{
volatile modelica_metatype tmp5_1;
tmp5_1 = _el;
{
modelica_string _cn = NULL;
modelica_string _bc_str = NULL;
modelica_string _scope_str = NULL;
modelica_string _base_first_id = NULL;
modelica_metatype _emod = NULL;
modelica_boolean _eq_name;
modelica_metatype _ocls = NULL;
modelica_metatype _cls = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _encf = NULL;
modelica_metatype _els1 = NULL;
modelica_metatype _rest_els = NULL;
modelica_metatype _import_els = NULL;
modelica_metatype _cdef_els = NULL;
modelica_metatype _clsext_els = NULL;
modelica_metatype _els2 = NULL;
modelica_metatype _eq1 = NULL;
modelica_metatype _ieq1 = NULL;
modelica_metatype _eq2 = NULL;
modelica_metatype _ieq2 = NULL;
modelica_metatype _alg1 = NULL;
modelica_metatype _ialg1 = NULL;
modelica_metatype _alg2 = NULL;
modelica_metatype _ialg2 = NULL;
modelica_metatype _comments1 = NULL;
modelica_metatype _comments2 = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _tree = NULL;
modelica_metatype _cacheArr = NULL;
modelica_boolean _htHasEntries;
volatile mmc_switch_type tmp5;
int tmp6;
tmp5 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp4_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp5 < 7; tmp5++) {
switch (MMC_SWITCH_CAST(tmp5)) {
case 0: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,1,5) == 0) goto tmp4_end;
tmpMeta[9] = omc_AbsynUtil_makeNotFullyQualified(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 2))));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],1,1) == 0) goto goto_3;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
_cn = tmpMeta[10];
tmp7 = omc_InstUtil_isBuiltInClass(threadData, _cn);
if (1 != tmp7) goto goto_3;
goto tmp4_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,1,5) == 0) goto tmp4_end;
_emod = omc_InstUtil_chainRedeclares(threadData, _outMod, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 4))));
_base_first_id = omc_AbsynUtil_pathFirstIdent(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 2))));
_eq_name = ((stringEqual(_inClassName, _base_first_id)) && omc_AbsynUtil_pathEqual(threadData, omc_ClassInf_getStateName(threadData, _inState), omc_AbsynUtil_joinPaths(threadData, omc_FGraph_getGraphName(threadData, _outEnv), omc_AbsynUtil_makeIdentPathFromString(threadData, _base_first_id))));
_outCache = omc_InstExtends_lookupBaseClass(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 2))), _eq_name, _inClassName, _outEnv, _outCache ,&_ocls ,&_cenv);
if(isSome(_ocls))
{
tmpMeta[9] = _ocls;
if (optionNone(tmpMeta[9])) goto goto_3;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 1));
_cls = tmpMeta[10];
tmpMeta[9] = _cls;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],2,8) == 0) goto goto_3;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 4));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 8));
_cn = tmpMeta[10];
_encf = tmpMeta[11];
_cmt = tmpMeta[12];
}
else
{
if(omc_Flags_getConfigBool(threadData, _OMC_LIT52))
{
_bc_str = omc_AbsynUtil_pathString(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 2))), _OMC_LIT34, 1, 0);
_scope_str = omc_FGraph_printGraphPathStr(threadData, _inEnv);
tmpMeta[9] = mmc_mk_cons(_bc_str, mmc_mk_cons(_scope_str, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addSourceMessage(threadData, _OMC_LIT46, tmpMeta[9], (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 6))));
}
goto goto_3;
}
_outCache = omc_InstExtends_instDerivedClasses(threadData, _outCache, _cenv, _outIH, _outMod, _inPrefix, _cls, _inImpl, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 6))) ,&_cenv ,&_outIH ,&_els1 ,&_eq1 ,&_ieq1 ,&_alg1 ,&_ialg1 ,&_mod ,&_comments1);
_els1 = omc_InstExtends_updateElementListVisibility(threadData, _els1, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 3))));
_tree = omc_AvlSetString_new(threadData);
_tree = omc_InstExtends_getLocalIdentList(threadData, omc_InstUtil_constantAndParameterEls(threadData, _inElementsFromExtendsScope), _tree, boxvar_InstExtends_getLocalIdentElement);
_tree = omc_InstExtends_getLocalIdentList(threadData, omc_InstUtil_constantAndParameterEls(threadData, _els1), _tree, boxvar_InstExtends_getLocalIdentElement);
_cacheArr = arrayCreate(((modelica_integer) 1), _outCache);
_emod = omc_InstExtends_fixModifications(threadData, _cacheArr, _inEnv, _emod, _tree);
_cenv = omc_FGraph_openScope(threadData, _cenv, _encf, _cn, omc_FGraph_classInfToScopeType(threadData, _inState));
_import_els = omc_InstUtil_splitEltsNoComponents(threadData, _els1 ,&_cdef_els ,&_clsext_els ,&_rest_els);
_outCache = omc_InstUtil_addClassdefsToEnv(threadData, _outCache, _cenv, _outIH, _inPrefix, _import_els, _inImpl, mmc_mk_none(), 0 ,&_cenv ,&_outIH);
_outCache = omc_InstUtil_addClassdefsToEnv(threadData, _outCache, _cenv, _outIH, _inPrefix, _cdef_els, _inImpl, mmc_mk_some(_mod), 0 ,&_cenv ,&_outIH);
{
modelica_metatype __omcQ_24tmpVar7;
modelica_metatype* tmp8;
modelica_metatype __omcQ_24tmpVar6;
int tmp9;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _rest_els;
tmpMeta[10] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar7 = tmpMeta[10];
tmp8 = &__omcQ_24tmpVar7;
while(1) {
tmp9 = 1;
while (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
if (omc_SCodeUtil_isRedeclareElement(threadData, _e)) {
tmp9--;
break;
}
}
if (tmp9 == 0) {
__omcQ_24tmpVar6 = _e;
*tmp8 = mmc_mk_cons(__omcQ_24tmpVar6,0);
tmp8 = &MMC_CDR(*tmp8);
} else if (tmp9 == 1) {
break;
} else {
goto goto_3;
}
}
*tmp8 = mmc_mk_nil();
tmpMeta[9] = __omcQ_24tmpVar7;
}
_rest_els = omc_SCodeInstUtil_addRedeclareAsElementsToExtends(threadData, _rest_els, tmpMeta[9]);
tmpMeta[9] = mmc_mk_box2(4, &Mod_ModScope_EXTENDS__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 2))));
_outMod = omc_Mod_elabUntypedMod(threadData, _emod, tmpMeta[9]);
_outMod = omc_Mod_merge(threadData, _mod, _outMod, _OMC_LIT28, 0);
_outCache = omc_InstExtends_instExtendsAndClassExtendsList2(threadData, _outCache, _cenv, _outIH, _outMod, _inPrefix, _rest_els, _clsext_els, _els1, _inState, _inClassName, _inImpl, _inPartialInst ,NULL ,&_outIH ,NULL ,&_els2 ,&_eq2 ,&_ieq2 ,&_alg2 ,&_ialg2 ,&_comments2);
_tree = omc_AvlSetString_new(threadData);
_tree = omc_InstExtends_getLocalIdentList(threadData, _els2, _tree, boxvar_InstExtends_getLocalIdentElementTpl);
_tree = omc_InstExtends_getLocalIdentList(threadData, _cdef_els, _tree, boxvar_InstExtends_getLocalIdentElement);
_tree = omc_InstExtends_getLocalIdentList(threadData, _import_els, _tree, boxvar_InstExtends_getLocalIdentElement);
_htHasEntries = (!omc_AvlSetString_isEmpty(threadData, _tree));
arrayUpdate(_cacheArr, ((modelica_integer) 1), _outCache);
if(_htHasEntries)
{
_els2 = omc_InstExtends_fixList(threadData, _cacheArr, _cenv, _els2, _tree, boxvar_InstExtends_fixLocalIdent);
}
_outElements = listAppend(_els2, _outElements);
_outNormalEqs = omc_List_unionAppendListOnTrue(threadData, listReverse(_eq2), _outNormalEqs, boxvar_valueEq);
_outInitialEqs = omc_List_unionAppendListOnTrue(threadData, listReverse(_ieq2), _outInitialEqs, boxvar_valueEq);
_outNormalAlgs = omc_List_unionAppendListOnTrue(threadData, listReverse(_alg2), _outNormalAlgs, boxvar_valueEq);
_outInitialAlgs = omc_List_unionAppendListOnTrue(threadData, listReverse(_ialg2), _outInitialAlgs, boxvar_valueEq);
tmpMeta[9] = mmc_mk_cons(_cmt, _outComments);
_outComments = listAppend(_comments1, listAppend(_comments2, tmpMeta[9]));
if((!_inPartialInst))
{
if(_htHasEntries)
{
_eq1 = omc_InstExtends_fixList(threadData, _cacheArr, _cenv, _eq1, _tree, boxvar_InstExtends_fixEquation);
_ieq1 = omc_InstExtends_fixList(threadData, _cacheArr, _cenv, _ieq1, _tree, boxvar_InstExtends_fixEquation);
_alg1 = omc_InstExtends_fixList(threadData, _cacheArr, _cenv, _alg1, _tree, boxvar_InstExtends_fixAlgorithm);
_ialg1 = omc_InstExtends_fixList(threadData, _cacheArr, _cenv, _ialg1, _tree, boxvar_InstExtends_fixAlgorithm);
}
_outNormalEqs = omc_List_unionAppendListOnTrue(threadData, listReverse(_eq1), _outNormalEqs, boxvar_valueEq);
_outInitialEqs = omc_List_unionAppendListOnTrue(threadData, listReverse(_ieq1), _outInitialEqs, boxvar_valueEq);
_outNormalAlgs = omc_List_unionAppendListOnTrue(threadData, listReverse(_alg1), _outNormalAlgs, boxvar_valueEq);
_outInitialAlgs = omc_List_unionAppendListOnTrue(threadData, listReverse(_ialg1), _outInitialAlgs, boxvar_valueEq);
}
_outCache = arrayGet(_cacheArr, ((modelica_integer) 1));
goto tmp4_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,1,5) == 0) goto tmp4_end;
tmp5 += 3;
if (!omc_Flags_getConfigBool(threadData, _OMC_LIT52)) goto tmp4_end;
goto tmp4_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,3,8) == 0) goto tmp4_end;
tmp5 += 2;
if((omc_SCodeUtil_isConstant(threadData, omc_SCodeUtil_attrVariability(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 4))))) || (!_inPartialInst)))
{
tmpMeta[10] = mmc_mk_box3(0, _el, _OMC_LIT15, mmc_mk_boolean(0));
tmpMeta[9] = mmc_mk_cons(tmpMeta[10], _outElements);
_outElements = tmpMeta[9];
}
goto tmp4_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,2,8) == 0) goto tmp4_end;
tmp5 += 1;
tmpMeta[10] = mmc_mk_box3(0, _el, _OMC_LIT15, mmc_mk_boolean(0));
tmpMeta[9] = mmc_mk_cons(tmpMeta[10], _outElements);
_outElements = tmpMeta[9];
tmpMeta[9] = mmc_mk_cons((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_el), 8))), MMC_REFSTRUCTLIT(mmc_nil));
_outComments = tmpMeta[9];
goto tmp4_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp5_1,0,3) == 0) goto tmp4_end;
tmpMeta[10] = mmc_mk_box3(0, _el, _OMC_LIT15, mmc_mk_boolean(0));
tmpMeta[9] = mmc_mk_cons(tmpMeta[10], _outElements);
_outElements = tmpMeta[9];
goto tmp4_done;
}
case 6: {
modelica_boolean tmp10;
tmp10 = omc_Flags_isSet(threadData, _OMC_LIT3);
if (1 != tmp10) goto goto_3;
tmpMeta[9] = stringAppend(_OMC_LIT53,_inClassName);
tmpMeta[10] = stringAppend(tmpMeta[9],_OMC_LIT54);
tmpMeta[11] = stringAppend(tmpMeta[10],_OMC_LIT55);
tmpMeta[12] = stringAppend(tmpMeta[11],omc_FGraph_printGraphPathStr(threadData, _outEnv));
tmpMeta[13] = stringAppend(tmpMeta[12],_OMC_LIT54);
tmpMeta[14] = stringAppend(tmpMeta[13],_OMC_LIT56);
tmpMeta[15] = stringAppend(tmpMeta[14],omc_Mod_printModStr(threadData, _outMod));
tmpMeta[16] = stringAppend(tmpMeta[15],_OMC_LIT54);
tmpMeta[17] = stringAppend(tmpMeta[16],_OMC_LIT57);
tmpMeta[18] = stringAppend(tmpMeta[17],omc_SCodeDump_unparseElementStr(threadData, _el, _OMC_LIT5));
omc_Debug_traceln(threadData, tmpMeta[18]);
goto goto_3;
goto tmp4_done;
}
}
goto tmp4_end;
tmp4_end: ;
}
goto goto_3;
tmp4_done:
(void)tmp5;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp4_done2;
goto_3:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp5 < 7) {
goto tmp4_top;
}
MMC_THROW_INTERNAL();
tmp4_done2:;
}
}
;
}
}
_outElements = omc_InstExtends_updateComponentsAndClassdefs(threadData, _outElements, _outMod, _inEnv ,&_outMod);
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outIH) { *out_outIH = _outIH; }
if (out_outMod) { *out_outMod = _outMod; }
if (out_outElements) { *out_outElements = _outElements; }
if (out_outNormalEqs) { *out_outNormalEqs = _outNormalEqs; }
if (out_outInitialEqs) { *out_outInitialEqs = _outInitialEqs; }
if (out_outNormalAlgs) { *out_outNormalAlgs = _outNormalAlgs; }
if (out_outInitialAlgs) { *out_outInitialAlgs = _outInitialAlgs; }
if (out_outComments) { *out_outComments = _outComments; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_InstExtends_instExtendsList(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIH, modelica_metatype _inMod, modelica_metatype _inPrefix, modelica_metatype _inLocalElements, modelica_metatype _inElementsFromExtendsScope, modelica_metatype _inState, modelica_metatype _inClassName, modelica_metatype _inImpl, modelica_metatype _inPartialInst, modelica_metatype *out_outEnv, modelica_metatype *out_outIH, modelica_metatype *out_outMod, modelica_metatype *out_outElements, modelica_metatype *out_outNormalEqs, modelica_metatype *out_outInitialEqs, modelica_metatype *out_outNormalAlgs, modelica_metatype *out_outInitialAlgs, modelica_metatype *out_outComments)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outCache = NULL;
tmp1 = mmc_unbox_integer(_inImpl);
tmp2 = mmc_unbox_integer(_inPartialInst);
_outCache = omc_InstExtends_instExtendsList(threadData, _inCache, _inEnv, _inIH, _inMod, _inPrefix, _inLocalElements, _inElementsFromExtendsScope, _inState, _inClassName, tmp1, tmp2, out_outEnv, out_outIH, out_outMod, out_outElements, out_outNormalEqs, out_outInitialEqs, out_outNormalAlgs, out_outInitialAlgs, out_outComments);
return _outCache;
}
