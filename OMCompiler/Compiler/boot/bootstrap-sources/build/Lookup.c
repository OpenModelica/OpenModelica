#ifdef OMC_BASE_FILE
#define OMC_FILE OMC_BASE_FILE
#else
#define OMC_FILE "/home/mahge/dev/OpenModelica/OMCompiler/Compiler/boot/build/tmp/Lookup.c"
#endif
#include "omc_simulation_settings.h"
#include "Lookup.h"
#define _OMC_LIT0_data "functionViaComponentRef10"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,25,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT1,1,4) {&SCode_Encapsulated_NOT__ENCAPSULATED__desc,}};
#define _OMC_LIT1 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT1)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT2,1,4) {&FCore_ScopeType_CLASS__SCOPE__desc,}};
#define _OMC_LIT2 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT2)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT3,1,1) {_OMC_LIT2}};
#define _OMC_LIT3 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT3)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT4,1,4) {&UnitAbsyn_InstStore_NOSTORE__desc,}};
#define _OMC_LIT4 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT4)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT5,1,5) {&DAE_Mod_NOMOD__desc,}};
#define _OMC_LIT5 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT5)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT6,1,3) {&DAE_Prefix_NOPRE__desc,}};
#define _OMC_LIT6 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT6)
#define _OMC_LIT7_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT7,0,_OMC_LIT7_data);
#define _OMC_LIT7 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT7)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT8,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT7}};
#define _OMC_LIT8 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT8)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT9,2,24) {&ClassInf_State_META__RECORD__desc,_OMC_LIT8}};
#define _OMC_LIT9 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT9)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT10,1,4) {&InstTypes_CallingScope_INNER__CALL__desc,}};
#define _OMC_LIT10 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT10)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT11,7,3) {&ConnectionGraph_ConnectionGraph_GRAPH__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT11 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT11)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT12,1,7) {&DAE_ComponentRef_WILD__desc,}};
#define _OMC_LIT12 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT12)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT13,5,3) {&DAE_Connect_SetTrieNode_SET__TRIE__NODE__desc,_OMC_LIT7,_OMC_LIT12,MMC_REFSTRUCTLIT(mmc_nil),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT13 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT13)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT14,5,3) {&DAE_Connect_Sets_SETS__desc,_OMC_LIT13,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT14 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT14)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT15,2,3) {&DAE_Type_T__INTEGER__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT15 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT15)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT16,2,3) {&DAE_Exp_ICONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT16 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT16)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT17,2,1) {_OMC_LIT16,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT17 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT17)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT18,4,19) {&DAE_Exp_ARRAY__desc,_OMC_LIT15,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT17}};
#define _OMC_LIT18 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT18)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT19,2,4) {&DAE_Subscript_SLICE__desc,_OMC_LIT18}};
#define _OMC_LIT19 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT19)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT20,2,3) {&DAE_Exp_ICONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT20 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT20)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT21,2,6) {&DAE_Exp_BCONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT21 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT21)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT22,2,6) {&DAE_Exp_BCONST__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT22 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT22)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT23,2,1) {_OMC_LIT22,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT23 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT23)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT24,2,1) {_OMC_LIT21,_OMC_LIT23}};
#define _OMC_LIT24 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT24)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT25,2,6) {&DAE_Type_T__BOOL__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT25 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT25)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT26,1,3) {&DAE_Const_C__CONST__desc,}};
#define _OMC_LIT26 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT26)
#define _OMC_LIT27_data "failtrace"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT27,9,_OMC_LIT27_data);
#define _OMC_LIT27 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT27)
#define _OMC_LIT28_data "Sets whether to print a failtrace or not."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT28,41,_OMC_LIT28_data);
#define _OMC_LIT28 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT28)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT29,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT28}};
#define _OMC_LIT29 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT29)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT30,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT27,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT29}};
#define _OMC_LIT30 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT30)
#define _OMC_LIT31_data "- Lookup.checkSubscripts failed (tp: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT31,37,_OMC_LIT31_data);
#define _OMC_LIT31 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT31)
#define _OMC_LIT32_data " subs:"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT32,6,_OMC_LIT32_data);
#define _OMC_LIT32 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT32)
#define _OMC_LIT33_data ","
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT33,1,_OMC_LIT33_data);
#define _OMC_LIT33 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT33)
#define _OMC_LIT34_data ")\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT34,2,_OMC_LIT34_data);
#define _OMC_LIT34 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT34)
#define _OMC_LIT35_data " = "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT35,3,_OMC_LIT35_data);
#define _OMC_LIT35 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT35)
#define _OMC_LIT36_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT36,1,_OMC_LIT36_data);
#define _OMC_LIT36 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT36)
#define _OMC_LIT37_data "- Lookup.lookupVar2 failed because we found a class instead of a variable: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT37,75,_OMC_LIT37_data);
#define _OMC_LIT37 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT37)
#define _OMC_LIT38_data "lookup"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT38,6,_OMC_LIT38_data);
#define _OMC_LIT38 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT38)
#define _OMC_LIT39_data "Print extra failtrace from lookup."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT39,34,_OMC_LIT39_data);
#define _OMC_LIT39 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT39)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT40,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT39}};
#define _OMC_LIT40 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT40)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT41,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(20)),_OMC_LIT38,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT40}};
#define _OMC_LIT41 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT41)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT42,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT42 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT42)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT43,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT43 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT43)
#define _OMC_LIT44_data "%s found in several unqualified import statements."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT44,50,_OMC_LIT44_data);
#define _OMC_LIT44 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT44)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT45,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT44}};
#define _OMC_LIT45 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT45)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT46,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(57)),_OMC_LIT42,_OMC_LIT43,_OMC_LIT45}};
#define _OMC_LIT46 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "Class %s not found in scope %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,31,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT48,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT47}};
#define _OMC_LIT48 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT48)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT49,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(3)),_OMC_LIT42,_OMC_LIT43,_OMC_LIT48}};
#define _OMC_LIT49 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "result"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,6,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT51,1,3) {&SCode_Visibility_PUBLIC__desc,}};
#define _OMC_LIT51 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT51)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT52,1,4) {&SCode_Redeclare_NOT__REDECLARE__desc,}};
#define _OMC_LIT52 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT52)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT53,1,4) {&SCode_Final_NOT__FINAL__desc,}};
#define _OMC_LIT53 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT53)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT54,1,6) {&Absyn_InnerOuter_NOT__INNER__OUTER__desc,}};
#define _OMC_LIT54 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT54)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT55,1,4) {&SCode_Replaceable_NOT__REPLACEABLE__desc,}};
#define _OMC_LIT55 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT55)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT56,6,3) {&SCode_Prefixes_PREFIXES__desc,_OMC_LIT51,_OMC_LIT52,_OMC_LIT53,_OMC_LIT54,_OMC_LIT55}};
#define _OMC_LIT56 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT56)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT57,1,3) {&SCode_ConnectorType_POTENTIAL__desc,}};
#define _OMC_LIT57 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT57)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT58,1,5) {&SCode_Parallelism_NON__PARALLEL__desc,}};
#define _OMC_LIT58 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT58)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT59,1,3) {&SCode_Variability_VAR__desc,}};
#define _OMC_LIT59 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT59)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT60,1,4) {&Absyn_Direction_OUTPUT__desc,}};
#define _OMC_LIT60 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT60)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT61,1,3) {&Absyn_IsField_NONFIELD__desc,}};
#define _OMC_LIT61 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT61)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT62,7,3) {&SCode_Attributes_ATTR__desc,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT57,_OMC_LIT58,_OMC_LIT59,_OMC_LIT60,_OMC_LIT61}};
#define _OMC_LIT62 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT62)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT63,1,5) {&SCode_Mod_NOMOD__desc,}};
#define _OMC_LIT63 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT63)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT64,3,3) {&SCode_Comment_COMMENT__desc,MMC_REFSTRUCTLIT(mmc_none),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT64 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT64)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT65,1,5) {&Absyn_Direction_BIDIR__desc,}};
#define _OMC_LIT65 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT65)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT66,1,4) {&SCode_Visibility_PROTECTED__desc,}};
#define _OMC_LIT66 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT66)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT67,1,3) {&Absyn_Direction_INPUT__desc,}};
#define _OMC_LIT67 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT67)
#define _OMC_LIT68_data "- Lookup.buildRecordConstructorElts failed "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT68,43,_OMC_LIT68_data);
#define _OMC_LIT68 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT68)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT69,10,3) {&SCodeDump_SCodeDumpOptions_OPTIONS__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT69 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT69)
#define _OMC_LIT70_data " with mod: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT70,11,_OMC_LIT70_data);
#define _OMC_LIT70 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT70)
#define _OMC_LIT71_data " and: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT71,6,_OMC_LIT71_data);
#define _OMC_LIT71 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "buildRecordConstructorClass2 failed, cl:"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,40,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
#define _OMC_LIT73_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT73,1,_OMC_LIT73_data);
#define _OMC_LIT73 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT73)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT74,1,4) {&SCode_Partial_NOT__PARTIAL__desc,}};
#define _OMC_LIT74 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT74)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT75,1,6) {&SCode_FunctionRestriction_FR__RECORD__CONSTRUCTOR__desc,}};
#define _OMC_LIT75 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT75)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT76,2,12) {&SCode_Restriction_R__FUNCTION__desc,_OMC_LIT75}};
#define _OMC_LIT76 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT76)
#define _OMC_LIT77_data "buildRecordConstructorClass failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT77,35,_OMC_LIT77_data);
#define _OMC_LIT77 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT77)
#define _OMC_LIT78_data "Found a component with same name when looking for type %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT78,58,_OMC_LIT78_data);
#define _OMC_LIT78 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT78)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT79,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT78}};
#define _OMC_LIT79 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT79)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT80,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(58)),_OMC_LIT42,_OMC_LIT43,_OMC_LIT79}};
#define _OMC_LIT80 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT80)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT81,1,3) {&InstTypes_CallingScope_TOP__CALL__desc,}};
#define _OMC_LIT81 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT81)
#define _OMC_LIT82_data "$ty"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT82,3,_OMC_LIT82_data);
#define _OMC_LIT82 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT82)
#define _OMC_LIT83_data "x"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT83,1,_OMC_LIT83_data);
#define _OMC_LIT83 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT83)
#define _OMC_LIT84_data "$$"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT84,2,_OMC_LIT84_data);
#define _OMC_LIT84 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT84)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT85,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT84}};
#define _OMC_LIT85 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT85)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT86,3,8) {&ClassInf_State_CONNECTOR__desc,_OMC_LIT85,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT86 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT86)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT87,4,12) {&DAE_Type_T__COMPLEX__desc,_OMC_LIT86,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT87 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT87)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT88,1,5) {&DAE_Const_C__VAR__desc,}};
#define _OMC_LIT88 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT88)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT89,1,5) {&DAE_VarParallelism_NON__PARALLEL__desc,}};
#define _OMC_LIT89 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT89)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT90,6,3) {&DAE_FuncArg_FUNCARG__desc,_OMC_LIT83,_OMC_LIT87,_OMC_LIT88,_OMC_LIT89,MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT90 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT90)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT91,2,1) {_OMC_LIT90,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT91 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT91)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT92,1,6) {&DAE_InlineType_DEFAULT__INLINE__desc,}};
#define _OMC_LIT92 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT92)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT93,1,3) {&DAE_FunctionBuiltin_FUNCTION__NOT__BUILTIN__desc,}};
#define _OMC_LIT93 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT93)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT94,1,3) {&DAE_FunctionParallelism_FP__NON__PARALLEL__desc,}};
#define _OMC_LIT94 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT94)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT95,7,3) {&DAE_FunctionAttributes_FUNCTION__ATTRIBUTES__desc,_OMC_LIT92,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT93,_OMC_LIT94}};
#define _OMC_LIT95 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT95)
#define _OMC_LIT96_data "cardinality"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT96,11,_OMC_LIT96_data);
#define _OMC_LIT96 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT96)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT97,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT96}};
#define _OMC_LIT97 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT97)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT98,5,14) {&DAE_Type_T__FUNCTION__desc,_OMC_LIT91,_OMC_LIT15,_OMC_LIT95,_OMC_LIT97}};
#define _OMC_LIT98 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT98)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT99,3,8) {&ClassInf_State_CONNECTOR__desc,_OMC_LIT85,MMC_IMMEDIATE(MMC_TAGFIXNUM(1))}};
#define _OMC_LIT99 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT99)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT100,4,12) {&DAE_Type_T__COMPLEX__desc,_OMC_LIT99,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT100 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT100)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT101,6,3) {&DAE_FuncArg_FUNCARG__desc,_OMC_LIT83,_OMC_LIT100,_OMC_LIT88,_OMC_LIT89,MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT101 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT101)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT102,2,1) {_OMC_LIT101,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT102 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT102)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT103,5,14) {&DAE_Type_T__FUNCTION__desc,_OMC_LIT102,_OMC_LIT15,_OMC_LIT95,_OMC_LIT97}};
#define _OMC_LIT103 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT103)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT104,2,1) {_OMC_LIT103,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT104 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT104)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT105,2,1) {_OMC_LIT98,_OMC_LIT104}};
#define _OMC_LIT105 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT105)
#define _OMC_LIT106_data " not found in scope: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT106,21,_OMC_LIT106_data);
#define _OMC_LIT106 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT106)
#define _OMC_LIT107_data "Internal error %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT107,17,_OMC_LIT107_data);
#define _OMC_LIT107 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT107)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT108,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT107}};
#define _OMC_LIT108 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT108)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT109,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(63)),_OMC_LIT42,_OMC_LIT43,_OMC_LIT108}};
#define _OMC_LIT109 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT109)
#define _OMC_LIT110_data "functionViaComponentRef"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT110,23,_OMC_LIT110_data);
#define _OMC_LIT110 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT110)
#define _OMC_LIT111_data "OpenModelica"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT111,12,_OMC_LIT111_data);
#define _OMC_LIT111 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT111)
#define _OMC_LIT112_data "Internal"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT112,8,_OMC_LIT112_data);
#define _OMC_LIT112 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT112)
#define _OMC_LIT113_data "ClockConstructor"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT113,16,_OMC_LIT113_data);
#define _OMC_LIT113 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT113)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT114,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT113}};
#define _OMC_LIT114 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT114)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT115,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT112,_OMC_LIT114}};
#define _OMC_LIT115 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT115)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT116,3,3) {&Absyn_Path_QUALIFIED__desc,_OMC_LIT111,_OMC_LIT115}};
#define _OMC_LIT116 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT116)
#define _OMC_LIT117_data "Clock"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT117,5,_OMC_LIT117_data);
#define _OMC_LIT117 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT117)
#define _OMC_LIT118_data "lookupFunctionsInEnv failed on: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT118,32,_OMC_LIT118_data);
#define _OMC_LIT118 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT118)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT119,1,3) {&InstTypes_SearchStrategy_SEARCH__LOCAL__ONLY__desc,}};
#define _OMC_LIT119 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT119)
#define _OMC_LIT120_data "Variable %s in package %s is not constant."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT120,42,_OMC_LIT120_data);
#define _OMC_LIT120 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT120)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT121,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT120}};
#define _OMC_LIT121 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT121)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT122,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(91)),_OMC_LIT42,_OMC_LIT43,_OMC_LIT121}};
#define _OMC_LIT122 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT122)
#define _OMC_LIT123_data "- Lookup.checkPackageVariableConstant failed: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT123,46,_OMC_LIT123_data);
#define _OMC_LIT123 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT123)
#define _OMC_LIT124_data " in "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT124,4,_OMC_LIT124_data);
#define _OMC_LIT124 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT124)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT125,1,4) {&InstTypes_SearchStrategy_SEARCH__ALSO__BUILTIN__desc,}};
#define _OMC_LIT125 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT125)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT126,1,11) {&DAE_Type_T__UNKNOWN__desc,}};
#define _OMC_LIT126 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT126)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT127,1,6) {&DAE_ConnectorType_NON__CONNECTOR__desc,}};
#define _OMC_LIT127 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT127)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT128,1,6) {&SCode_Variability_CONST__desc,}};
#define _OMC_LIT128 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT128)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT129,7,3) {&DAE_Attributes_ATTR__desc,_OMC_LIT127,_OMC_LIT58,_OMC_LIT128,_OMC_LIT65,_OMC_LIT54,_OMC_LIT51}};
#define _OMC_LIT129 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT129)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT130,1,3) {&DAE_Binding_UNBOUND__desc,}};
#define _OMC_LIT130 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT130)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT131,3,3) {&InstTypes_SplicedExpData_SPLICEDEXPDATA__desc,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT126}};
#define _OMC_LIT131 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT131)
#define _OMC_LIT132_data "#varNotFound#"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT132,13,_OMC_LIT132_data);
#define _OMC_LIT132 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT132)
#define _OMC_LIT133_data "%s is partial, name lookup is not allowed in partial classes."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT133,61,_OMC_LIT133_data);
#define _OMC_LIT133 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT133)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT134,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT133}};
#define _OMC_LIT134 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT134)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT135,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(107)),_OMC_LIT42,_OMC_LIT43,_OMC_LIT134}};
#define _OMC_LIT135 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT135)
#define _OMC_LIT136_data "component %s contains the definition of a partial class %s.\nPlease redeclare it to any package compatible with %s."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT136,114,_OMC_LIT136_data);
#define _OMC_LIT136 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT136)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT137,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT136}};
#define _OMC_LIT137 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT137)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT138,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(285)),_OMC_LIT42,_OMC_LIT43,_OMC_LIT137}};
#define _OMC_LIT138 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT138)
#define _OMC_LIT139_data "functionViaComponentRef2"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT139,24,_OMC_LIT139_data);
#define _OMC_LIT139 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT139)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT140,0.0);
#define _OMC_LIT140 MMC_REFREALLIT(_OMC_LIT_STRUCT140)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT141,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT7,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT140}};
#define _OMC_LIT141 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT141)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT142,1,1) {_OMC_LIT141}};
#define _OMC_LIT142 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT142)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT143,2,4) {&DAE_Type_T__REAL__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT143 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT143)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT144,2,5) {&DAE_Type_T__STRING__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT144 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT144)
#define _OMC_LIT145_data "Real"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT145,4,_OMC_LIT145_data);
#define _OMC_LIT145 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT145)
#define _OMC_LIT146_data "Integer"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT146,7,_OMC_LIT146_data);
#define _OMC_LIT146 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT146)
#define _OMC_LIT147_data "Boolean"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT147,7,_OMC_LIT147_data);
#define _OMC_LIT147 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT147)
#define _OMC_LIT148_data "String"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT148,6,_OMC_LIT148_data);
#define _OMC_LIT148 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT148)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT149,2,19) {&DAE_Type_T__ANYTYPE__desc,MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT149 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT149)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT150,6,3) {&DAE_FuncArg_FUNCARG__desc,_OMC_LIT83,_OMC_LIT149,_OMC_LIT88,_OMC_LIT89,MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT150 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT150)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT151,2,1) {_OMC_LIT150,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT151 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT151)
#define _OMC_LIT152_data "rooted"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT152,6,_OMC_LIT152_data);
#define _OMC_LIT152 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT152)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT153,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT152}};
#define _OMC_LIT153 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT153)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT154,5,14) {&DAE_Type_T__FUNCTION__desc,_OMC_LIT151,_OMC_LIT25,_OMC_LIT95,_OMC_LIT153}};
#define _OMC_LIT154 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT154)
#define _OMC_LIT155_data " (its type) "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT155,12,_OMC_LIT155_data);
#define _OMC_LIT155 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT155)
#define _OMC_LIT156_data "roots"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT156,5,_OMC_LIT156_data);
#define _OMC_LIT156 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT156)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT157,1,7) {&DAE_Dimension_DIM__UNKNOWN__desc,}};
#define _OMC_LIT157 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT157)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT158,2,1) {_OMC_LIT157,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT158 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT158)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT159,3,9) {&DAE_Type_T__ARRAY__desc,_OMC_LIT149,_OMC_LIT158}};
#define _OMC_LIT159 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT159)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT160,6,3) {&DAE_FuncArg_FUNCARG__desc,_OMC_LIT156,_OMC_LIT159,_OMC_LIT88,_OMC_LIT89,MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT160 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT160)
#define _OMC_LIT161_data "nodes"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT161,5,_OMC_LIT161_data);
#define _OMC_LIT161 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT161)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT162,6,3) {&DAE_FuncArg_FUNCARG__desc,_OMC_LIT161,_OMC_LIT159,_OMC_LIT88,_OMC_LIT89,MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT162 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT162)
#define _OMC_LIT163_data "message"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT163,7,_OMC_LIT163_data);
#define _OMC_LIT163 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT163)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT164,6,3) {&DAE_FuncArg_FUNCARG__desc,_OMC_LIT163,_OMC_LIT144,_OMC_LIT88,_OMC_LIT89,MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT164 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT164)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT165,2,1) {_OMC_LIT164,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT165 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT165)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT166,2,1) {_OMC_LIT162,_OMC_LIT165}};
#define _OMC_LIT166 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT166)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT167,2,1) {_OMC_LIT160,_OMC_LIT166}};
#define _OMC_LIT167 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT167)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT168,3,9) {&DAE_Type_T__ARRAY__desc,_OMC_LIT15,_OMC_LIT158}};
#define _OMC_LIT168 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT168)
#define _OMC_LIT169_data "Connections"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT169,11,_OMC_LIT169_data);
#define _OMC_LIT169 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT169)
#define _OMC_LIT170_data "isRoot"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT170,6,_OMC_LIT170_data);
#define _OMC_LIT170 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT170)
#define _OMC_LIT171_data "uniqueRootIndices"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT171,17,_OMC_LIT171_data);
#define _OMC_LIT171 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT171)
#include "util/modelica.h"
#include "Lookup_includes.h"
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_prefixSplicedExp(threadData_t *threadData, modelica_metatype _inCref, modelica_metatype _inSplicedExp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_prefixSplicedExp,2,0) {(void*) boxptr_Lookup_prefixSplicedExp,0}};
#define boxvar_Lookup_prefixSplicedExp MMC_REFSTRUCTLIT(boxvar_lit_Lookup_prefixSplicedExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_sliceDimensionType(threadData_t *threadData, modelica_metatype _inTypeD, modelica_metatype _inTypeL);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_sliceDimensionType,2,0) {(void*) boxptr_Lookup_sliceDimensionType,0}};
#define boxvar_Lookup_sliceDimensionType MMC_REFSTRUCTLIT(boxvar_lit_Lookup_sliceDimensionType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_expandWholeDimSubScript(threadData_t *threadData, modelica_metatype _inSubs, modelica_metatype _inSlice);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_expandWholeDimSubScript,2,0) {(void*) boxptr_Lookup_expandWholeDimSubScript,0}};
#define boxvar_Lookup_expandWholeDimSubScript MMC_REFSTRUCTLIT(boxvar_lit_Lookup_expandWholeDimSubScript)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_makeEnumLiteralIndices(threadData_t *threadData, modelica_metatype _enumTypeName, modelica_metatype _enumLiterals, modelica_integer _enumIndex);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_makeEnumLiteralIndices(threadData_t *threadData, modelica_metatype _enumTypeName, modelica_metatype _enumLiterals, modelica_metatype _enumIndex);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_makeEnumLiteralIndices,2,0) {(void*) boxptr_Lookup_makeEnumLiteralIndices,0}};
#define boxvar_Lookup_makeEnumLiteralIndices MMC_REFSTRUCTLIT(boxvar_lit_Lookup_makeEnumLiteralIndices)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_makeDimensionSubscript(threadData_t *threadData, modelica_metatype _inDim);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_makeDimensionSubscript,2,0) {(void*) boxptr_Lookup_makeDimensionSubscript,0}};
#define boxvar_Lookup_makeDimensionSubscript MMC_REFSTRUCTLIT(boxvar_lit_Lookup_makeDimensionSubscript)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_addArrayDimensions(threadData_t *threadData, modelica_metatype _tySub, modelica_metatype _ss);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_addArrayDimensions,2,0) {(void*) boxptr_Lookup_addArrayDimensions,0}};
#define boxvar_Lookup_addArrayDimensions MMC_REFSTRUCTLIT(boxvar_lit_Lookup_addArrayDimensions)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_elabComponentRecursive(threadData_t *threadData, modelica_metatype _oCref);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_elabComponentRecursive,2,0) {(void*) boxptr_Lookup_elabComponentRecursive,0}};
#define boxvar_Lookup_elabComponentRecursive MMC_REFSTRUCTLIT(boxvar_lit_Lookup_elabComponentRecursive)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupBinding(threadData_t *threadData, modelica_metatype _inCref, modelica_metatype _inParentType, modelica_metatype _inChildType, modelica_metatype _inParentBinding, modelica_metatype _inChildBinding);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupBinding,2,0) {(void*) boxptr_Lookup_lookupBinding,0}};
#define boxvar_Lookup_lookupBinding MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupBinding)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupVarFMetaModelica(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _cr, modelica_metatype _inType, modelica_metatype *out_attr, modelica_metatype *out_ty, modelica_metatype *out_binding, modelica_metatype *out_cnstForRange, modelica_string *out_name);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupVarFMetaModelica,2,0) {(void*) boxptr_Lookup_lookupVarFMetaModelica,0}};
#define boxvar_Lookup_lookupVarFMetaModelica MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupVarFMetaModelica)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupVarFIdent(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcache, modelica_metatype _ht, modelica_string _ident, modelica_metatype _ss, modelica_metatype _inEnv, modelica_metatype *out_attr, modelica_metatype *out_ty_1, modelica_metatype *out_bind, modelica_metatype *out_cnstForRange, modelica_metatype *out_splicedExpData, modelica_metatype *out_componentEnv, modelica_string *out_name);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupVarFIdent,2,0) {(void*) boxptr_Lookup_lookupVarFIdent,0}};
#define boxvar_Lookup_lookupVarFIdent MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupVarFIdent)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupVarF(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inBinTree, modelica_metatype _inComponentRef, modelica_metatype _inEnv, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_splicedExpData, modelica_metatype *out_outComponentEnv, modelica_string *out_name);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupVarF,2,0) {(void*) boxptr_Lookup_lookupVarF,0}};
#define boxvar_Lookup_lookupVarF MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupVarF)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_checkSubscripts(threadData_t *threadData, modelica_metatype _inType, modelica_metatype _inExpSubscriptLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_checkSubscripts,2,0) {(void*) boxptr_Lookup_checkSubscripts,0}};
#define boxvar_Lookup_checkSubscripts MMC_REFSTRUCTLIT(boxvar_lit_Lookup_checkSubscripts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupVar2(threadData_t *threadData, modelica_metatype _inBinTree, modelica_string _inIdent, modelica_metatype _inGraph, modelica_metatype *out_outElement, modelica_metatype *out_outMod, modelica_metatype *out_instStatus, modelica_metatype *out_outEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupVar2,2,0) {(void*) boxptr_Lookup_lookupVar2,0}};
#define boxvar_Lookup_lookupVar2 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupVar2)
PROTECTED_FUNCTION_STATIC void omc_Lookup_reportSeveralNamesError(threadData_t *threadData, modelica_boolean _unique, modelica_string _name);
PROTECTED_FUNCTION_STATIC void boxptr_Lookup_reportSeveralNamesError(threadData_t *threadData, modelica_metatype _unique, modelica_metatype _name);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_reportSeveralNamesError,2,0) {(void*) boxptr_Lookup_reportSeveralNamesError,0}};
#define boxvar_Lookup_reportSeveralNamesError MMC_REFSTRUCTLIT(boxvar_lit_Lookup_reportSeveralNamesError)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inFrame, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupClassInFrame,2,0) {(void*) boxptr_Lookup_lookupClassInFrame,0}};
#define boxvar_Lookup_lookupClassInFrame MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupClassInFrame)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClassInEnv(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _id, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupClassInEnv,2,0) {(void*) boxptr_Lookup_lookupClassInEnv,0}};
#define boxvar_Lookup_lookupClassInEnv MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupClassInEnv)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_buildRecordConstructorResultElt(threadData_t *threadData, modelica_metatype _elts, modelica_string _id, modelica_metatype _env, modelica_metatype _info);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_buildRecordConstructorResultElt,2,0) {(void*) boxptr_Lookup_buildRecordConstructorResultElt,0}};
#define boxvar_Lookup_buildRecordConstructorResultElt MMC_REFSTRUCTLIT(boxvar_lit_Lookup_buildRecordConstructorResultElt)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_buildRecordConstructorElts(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inSCodeElementLst, modelica_metatype _mods, modelica_metatype *out_outEnv, modelica_metatype *out_outSCodeElementLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_buildRecordConstructorElts,2,0) {(void*) boxptr_Lookup_buildRecordConstructorElts,0}};
#define boxvar_Lookup_buildRecordConstructorElts MMC_REFSTRUCTLIT(boxvar_lit_Lookup_buildRecordConstructorElts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_selectModifier(threadData_t *threadData, modelica_metatype _inModID, modelica_metatype _inModNoID);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_selectModifier,2,0) {(void*) boxptr_Lookup_selectModifier,0}};
#define boxvar_Lookup_selectModifier MMC_REFSTRUCTLIT(boxvar_lit_Lookup_selectModifier)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_buildRecordConstructorClass2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _cl, modelica_metatype _mods, modelica_metatype *out_outEnv, modelica_metatype *out_funcelts, modelica_metatype *out_elts);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_buildRecordConstructorClass2,2,0) {(void*) boxptr_Lookup_buildRecordConstructorClass2,0}};
#define boxvar_Lookup_buildRecordConstructorClass2 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_buildRecordConstructorClass2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_buildRecordConstructorClass(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype *out_outEnv, modelica_metatype *out_outClass);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_buildRecordConstructorClass,2,0) {(void*) boxptr_Lookup_buildRecordConstructorClass,0}};
#define boxvar_Lookup_buildRecordConstructorClass MMC_REFSTRUCTLIT(boxvar_lit_Lookup_buildRecordConstructorClass)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_buildRecordType(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _env, modelica_metatype _icdef, modelica_metatype *out_outEnv, modelica_metatype *out_ftype);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_buildRecordType,2,0) {(void*) boxptr_Lookup_buildRecordType,0}};
#define boxvar_Lookup_buildRecordType MMC_REFSTRUCTLIT(boxvar_lit_Lookup_buildRecordType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupFunctionsInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inClasses, modelica_metatype _inFuncTypes, modelica_metatype _inEnv, modelica_string _inFuncName, modelica_metatype _inInfo, modelica_metatype *out_outFuncTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupFunctionsInFrame,2,0) {(void*) boxptr_Lookup_lookupFunctionsInFrame,0}};
#define boxvar_Lookup_lookupFunctionsInFrame MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupFunctionsInFrame)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupTypeInFrame2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _item, modelica_metatype _inEnv3, modelica_string _inIdent4, modelica_metatype *out_outType, modelica_metatype *out_outEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupTypeInFrame2,2,0) {(void*) boxptr_Lookup_lookupTypeInFrame2,0}};
#define boxvar_Lookup_lookupTypeInFrame2 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupTypeInFrame2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupTypeInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inBinTree1, modelica_metatype _inBinTree2, modelica_metatype _inEnv3, modelica_string _inIdent4, modelica_metatype *out_outType, modelica_metatype *out_outEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupTypeInFrame,2,0) {(void*) boxptr_Lookup_lookupTypeInFrame,0}};
#define boxvar_Lookup_lookupTypeInFrame MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupTypeInFrame)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_getHtTypes(threadData_t *threadData, modelica_metatype _inParentRef);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_getHtTypes,2,0) {(void*) boxptr_Lookup_getHtTypes,0}};
#define boxvar_Lookup_getHtTypes MMC_REFSTRUCTLIT(boxvar_lit_Lookup_getHtTypes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupTypeInEnv(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _id, modelica_metatype *out_outType, modelica_metatype *out_outEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupTypeInEnv,2,0) {(void*) boxptr_Lookup_lookupTypeInEnv,0}};
#define boxvar_Lookup_lookupTypeInEnv MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupTypeInEnv)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_createGenericBuiltinFunctions(threadData_t *threadData, modelica_metatype _inEnv, modelica_string _inString);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_createGenericBuiltinFunctions,2,0) {(void*) boxptr_Lookup_createGenericBuiltinFunctions,0}};
#define boxvar_Lookup_createGenericBuiltinFunctions MMC_REFSTRUCTLIT(boxvar_lit_Lookup_createGenericBuiltinFunctions)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupFunctionsInEnv2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_boolean _followedQual, modelica_metatype _info, modelica_metatype *out_outTypesTypeLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_lookupFunctionsInEnv2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _followedQual, modelica_metatype _info, modelica_metatype *out_outTypesTypeLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupFunctionsInEnv2,2,0) {(void*) boxptr_Lookup_lookupFunctionsInEnv2,0}};
#define boxvar_Lookup_lookupFunctionsInEnv2 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupFunctionsInEnv2)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Lookup_frameIsImplAddedScope(threadData_t *threadData, modelica_metatype _f);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_frameIsImplAddedScope(threadData_t *threadData, modelica_metatype _f);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_frameIsImplAddedScope,2,0) {(void*) boxptr_Lookup_frameIsImplAddedScope,0}};
#define boxvar_Lookup_frameIsImplAddedScope MMC_REFSTRUCTLIT(boxvar_lit_Lookup_frameIsImplAddedScope)
PROTECTED_FUNCTION_STATIC void omc_Lookup_checkPackageVariableConstant(threadData_t *threadData, modelica_metatype _parentEnv, modelica_metatype _classEnv, modelica_metatype _componentEnv, modelica_metatype _attr, modelica_metatype _tp, modelica_metatype _cref);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_checkPackageVariableConstant,2,0) {(void*) boxptr_Lookup_checkPackageVariableConstant,0}};
#define boxvar_Lookup_checkPackageVariableConstant MMC_REFSTRUCTLIT(boxvar_lit_Lookup_checkPackageVariableConstant)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupConnectorVar2(threadData_t *threadData, modelica_metatype _env, modelica_string _name, modelica_metatype *out_status, modelica_metatype *out_compEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupConnectorVar2,2,0) {(void*) boxptr_Lookup_lookupConnectorVar2,0}};
#define boxvar_Lookup_lookupConnectorVar2 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupConnectorVar2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupUnqualifiedImportedClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_lookupUnqualifiedImportedClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_metatype _inIdent, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupUnqualifiedImportedClassInFrame,2,0) {(void*) boxptr_Lookup_lookupUnqualifiedImportedClassInFrame,0}};
#define boxvar_Lookup_lookupUnqualifiedImportedClassInFrame MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupUnqualifiedImportedClassInFrame)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_moreLookupUnqualifiedImportedClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_string _inIdent, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_moreLookupUnqualifiedImportedClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_metatype _inIdent, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_moreLookupUnqualifiedImportedClassInFrame,2,0) {(void*) boxptr_Lookup_moreLookupUnqualifiedImportedClassInFrame,0}};
#define boxvar_Lookup_moreLookupUnqualifiedImportedClassInFrame MMC_REFSTRUCTLIT(boxvar_lit_Lookup_moreLookupUnqualifiedImportedClassInFrame)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupQualifiedImportedClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImport, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupQualifiedImportedClassInFrame,2,0) {(void*) boxptr_Lookup_lookupQualifiedImportedClassInFrame,0}};
#define boxvar_Lookup_lookupQualifiedImportedClassInFrame MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupQualifiedImportedClassInFrame)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupUnqualifiedImportedVarInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype *out_outClassEnv, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_boolean *out_outBoolean, modelica_metatype *out_splicedExpData, modelica_metatype *out_outComponentEnv, modelica_string *out_name);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_lookupUnqualifiedImportedVarInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_metatype _inIdent, modelica_metatype *out_outClassEnv, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_outBoolean, modelica_metatype *out_splicedExpData, modelica_metatype *out_outComponentEnv, modelica_metatype *out_name);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupUnqualifiedImportedVarInFrame,2,0) {(void*) boxptr_Lookup_lookupUnqualifiedImportedVarInFrame,0}};
#define boxvar_Lookup_lookupUnqualifiedImportedVarInFrame MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupUnqualifiedImportedVarInFrame)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_moreLookupUnqualifiedImportedVarInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_string _inIdent, modelica_boolean *out_outBoolean);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_moreLookupUnqualifiedImportedVarInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_metatype _inIdent, modelica_metatype *out_outBoolean);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_moreLookupUnqualifiedImportedVarInFrame,2,0) {(void*) boxptr_Lookup_moreLookupUnqualifiedImportedVarInFrame,0}};
#define boxvar_Lookup_moreLookupUnqualifiedImportedVarInFrame MMC_REFSTRUCTLIT(boxvar_lit_Lookup_moreLookupUnqualifiedImportedVarInFrame)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupQualifiedImportedVarInFrame(threadData_t *threadData, modelica_metatype _inImports, modelica_string _ident);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupQualifiedImportedVarInFrame,2,0) {(void*) boxptr_Lookup_lookupQualifiedImportedVarInFrame,0}};
#define boxvar_Lookup_lookupQualifiedImportedVarInFrame MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupQualifiedImportedVarInFrame)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupPrevFrames(threadData_t *threadData, modelica_string _id, modelica_metatype _inPrevFrames, modelica_metatype *out_outPrevFrames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupPrevFrames,2,0) {(void*) boxptr_Lookup_lookupPrevFrames,0}};
#define boxvar_Lookup_lookupPrevFrames MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupPrevFrames)
PROTECTED_FUNCTION_STATIC modelica_string omc_Lookup_getConstrainingClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEnv, modelica_metatype _inCache);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_getConstrainingClass,2,0) {(void*) boxptr_Lookup_getConstrainingClass,0}};
#define boxvar_Lookup_getConstrainingClass MMC_REFSTRUCTLIT(boxvar_lit_Lookup_getConstrainingClass)
PROTECTED_FUNCTION_STATIC void omc_Lookup_checkPartialScope(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inParentEnv, modelica_metatype _inCache, modelica_metatype _inInfo);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_checkPartialScope,2,0) {(void*) boxptr_Lookup_checkPartialScope,0}};
#define boxvar_Lookup_checkPartialScope MMC_REFSTRUCTLIT(boxvar_lit_Lookup_checkPartialScope)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClassQualified2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _path, modelica_metatype _inC, modelica_metatype _optFrame, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupClassQualified2,2,0) {(void*) boxptr_Lookup_lookupClassQualified2,0}};
#define boxvar_Lookup_lookupClassQualified2 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupClassQualified2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClassQualified(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _id, modelica_metatype _path, modelica_metatype _inOptFrame, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupClassQualified,2,0) {(void*) boxptr_Lookup_lookupClassQualified,0}};
#define boxvar_Lookup_lookupClassQualified MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupClassQualified)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClass2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupClass2,2,0) {(void*) boxptr_Lookup_lookupClass2,0}};
#define boxvar_Lookup_lookupClass2 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupClass2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClass1(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupClass1,2,0) {(void*) boxptr_Lookup_lookupClass1,0}};
#define boxvar_Lookup_lookupClass1 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupClass1)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupMetarecordsRecursive3(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _path, modelica_string _str, modelica_metatype _inHt, modelica_metatype _inAcc, modelica_metatype *out_outHt, modelica_metatype *out_outMetarecordTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupMetarecordsRecursive3,2,0) {(void*) boxptr_Lookup_lookupMetarecordsRecursive3,0}};
#define boxvar_Lookup_lookupMetarecordsRecursive3 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupMetarecordsRecursive3)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupMetarecordsRecursive2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inUniontypePaths, modelica_metatype _inHt, modelica_metatype _inAcc, modelica_metatype *out_outHt, modelica_metatype *out_outMetarecordTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupMetarecordsRecursive2,2,0) {(void*) boxptr_Lookup_lookupMetarecordsRecursive2,0}};
#define boxvar_Lookup_lookupMetarecordsRecursive2 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupMetarecordsRecursive2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupType2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype *out_outType, modelica_metatype *out_outEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupType2,2,0) {(void*) boxptr_Lookup_lookupType2,0}};
#define boxvar_Lookup_lookupType2 MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupType2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupTypeQual(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _msg, modelica_metatype *out_outType, modelica_metatype *out_outEnv);
static const MMC_DEFSTRUCTLIT(boxvar_lit_Lookup_lookupTypeQual,2,0) {(void*) boxptr_Lookup_lookupTypeQual,0}};
#define boxvar_Lookup_lookupTypeQual MMC_REFSTRUCTLIT(boxvar_lit_Lookup_lookupTypeQual)
DLLExport
modelica_metatype omc_Lookup_isArrayType(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_boolean *out_outIsArray)
{
modelica_metatype _outCache = NULL;
modelica_boolean _outIsArray;
modelica_metatype _el = NULL;
modelica_metatype _p = NULL;
modelica_metatype _env = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5 = 0;
_outCache = omc_Lookup_lookupClass(threadData, _inCache, _inEnv, _inPath, mmc_mk_none() ,&_el ,&_env);
{
modelica_metatype tmp8_1;
tmp8_1 = _el;
{
volatile mmc_switch_type tmp8;
int tmp9;
tmp8 = 0;
for (; tmp8 < 4; tmp8++) {
switch (MMC_SWITCH_CAST(tmp8)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,2,8) == 0) goto tmp7_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,3) == 0) goto tmp7_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp7_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (optionNone(tmpMeta[2])) goto tmp7_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmp5 = 1;
goto tmp7_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,2,8) == 0) goto tmp7_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,3) == 0) goto tmp7_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (listEmpty(tmpMeta[2])) goto tmp7_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
tmp5 = 1;
goto tmp7_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,2,8) == 0) goto tmp7_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,3) == 0) goto tmp7_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp7_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_p = tmpMeta[2];
_outCache = omc_Lookup_isArrayType(threadData, _outCache, _env, _p ,&_outIsArray);
tmp5 = _outIsArray;
goto tmp7_done;
}
case 3: {
tmp5 = 0;
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
goto_6:;
goto goto_1;
goto tmp7_done;
tmp7_done:;
}
}
_outIsArray = tmp5;
goto tmp2_done;
}
case 1: {
_outIsArray = 0;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outIsArray) { *out_outIsArray = _outIsArray; }
return _outCache;
}
modelica_metatype boxptr_Lookup_isArrayType(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype *out_outIsArray)
{
modelica_boolean _outIsArray;
modelica_metatype _outCache = NULL;
_outCache = omc_Lookup_isArrayType(threadData, _inCache, _inEnv, _inPath, &_outIsArray);
if (out_outIsArray) { *out_outIsArray = mmc_mk_icon(_outIsArray); }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_prefixSplicedExp(threadData_t *threadData, modelica_metatype _inCref, modelica_metatype _inSplicedExp)
{
modelica_metatype _outSplicedExp = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inSplicedExp;
{
modelica_metatype _ety = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _cref = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cref = tmpMeta[3];
_ety = tmpMeta[4];
_ty = tmpMeta[5];
_cref = omc_ComponentReference_joinCrefs(threadData, _inCref, _cref);
tmpMeta[1] = mmc_mk_box3(9, &DAE_Exp_CREF__desc, _cref, _ety);
tmpMeta[2] = mmc_mk_box3(3, &InstTypes_SplicedExpData_SPLICEDEXPDATA__desc, mmc_mk_some(tmpMeta[1]), _ty);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inSplicedExp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSplicedExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSplicedExp;
}
DLLExport
modelica_boolean omc_Lookup_isFunctionCallViaComponent(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath)
{
modelica_boolean _yes;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_string _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta[0];
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT0);
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Lookup_lookupVarIdent(threadData, _inCache, _inEnv, _name, tmpMeta[0], NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
omc_ErrorExt_rollBack(threadData, _OMC_LIT0);
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
omc_ErrorExt_rollBack(threadData, _OMC_LIT0);
goto goto_2;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_yes = tmp1;
_return: OMC_LABEL_UNUSED
return _yes;
}
modelica_metatype boxptr_Lookup_isFunctionCallViaComponent(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath)
{
modelica_boolean _yes;
modelica_metatype out_yes;
_yes = omc_Lookup_isFunctionCallViaComponent(threadData, _inCache, _inEnv, _inPath);
out_yes = mmc_mk_icon(_yes);
return out_yes;
}
DLLExport
modelica_metatype omc_Lookup_isIterator(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inCref, modelica_metatype *out_outCache)
{
modelica_metatype _outIsIterator = NULL;
modelica_metatype _outCache = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
{
modelica_string _id = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _ht = NULL;
modelica_metatype _ic = NULL;
modelica_metatype _ref = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_ref = tmpMeta[3];
_cache = tmp4_1;
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _ref));
_id = omc_ComponentReference_crefFirstIdent(threadData, _inCref);
tmpMeta[2] = omc_Lookup_lookupVar2(threadData, _ht, _id, _inEnv, NULL, NULL, NULL, NULL);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
_ic = tmpMeta[3];
_b = isSome(_ic);
tmpMeta[0+0] = mmc_mk_some(mmc_mk_boolean(_b));
tmpMeta[0+1] = _cache;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_ref = tmpMeta[3];
_cache = tmp4_1;
tmp6 = omc_Lookup_frameIsImplAddedScope(threadData, omc_FNode_fromRef(threadData, _ref));
if (1 != tmp6) goto goto_2;
_env = omc_FGraph_stripLastScopeRef(threadData, _inEnv, NULL);
tmpMeta[0+0] = omc_Lookup_isIterator(threadData, _cache, _env, _inCref, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = mmc_mk_none();
tmpMeta[0+1] = _inCache;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outIsIterator = tmpMeta[0+0];
_outCache = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outCache) { *out_outCache = _outCache; }
return _outIsIterator;
}
DLLExport
modelica_metatype omc_Lookup_buildMetaRecordType(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _cdef, modelica_metatype *out_outEnv, modelica_metatype *out_ftype)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _ftype = NULL;
modelica_string _id = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _utPath = NULL;
modelica_metatype _path = NULL;
modelica_integer _index;
modelica_metatype _varlst = NULL;
modelica_metatype _els = NULL;
modelica_boolean _singleton;
modelica_metatype _cache = NULL;
modelica_metatype _typeVarsType = NULL;
modelica_metatype _typeVars = NULL;
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _cdef;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,8) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],17,5) == 0) MMC_THROW_INTERNAL();
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
tmp1 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmp2 = mmc_unbox_integer(tmpMeta[5]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,8) == 0) MMC_THROW_INTERNAL();
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
_id = tmpMeta[1];
_utPath = tmpMeta[3];
_index = tmp1;
_singleton = tmp2;
_typeVars = tmpMeta[6];
_els = tmpMeta[8];
_env = omc_FGraph_openScope(threadData, _inEnv, _OMC_LIT1, _id, _OMC_LIT3);
_cache = omc_Inst_makeFullyQualified(threadData, _inCache, _env, _utPath ,&_utPath);
tmpMeta[0] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path = omc_AbsynUtil_joinPaths(threadData, _utPath, tmpMeta[0]);
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_outCache = omc_Inst_instElementList(threadData, _cache, _env, tmpMeta[0], _OMC_LIT4, _OMC_LIT5, _OMC_LIT6, _OMC_LIT9, omc_List_map1(threadData, _els, boxvar_Util_makeTuple, _OMC_LIT5), tmpMeta[1], 0, _OMC_LIT10, _OMC_LIT11, _OMC_LIT14, 1 ,&_outEnv ,NULL ,NULL ,NULL ,NULL ,NULL ,&_varlst ,NULL ,NULL);
_varlst = omc_Types_boxVarLst(threadData, _varlst);
{
modelica_metatype __omcQ_24tmpVar1;
modelica_metatype* tmp3;
modelica_metatype __omcQ_24tmpVar0;
int tmp4;
modelica_metatype _tv_loopVar = 0;
modelica_metatype _tv;
_tv_loopVar = _typeVars;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar1 = tmpMeta[1];
tmp3 = &__omcQ_24tmpVar1;
while(1) {
tmp4 = 1;
if (!listEmpty(_tv_loopVar)) {
_tv = MMC_CAR(_tv_loopVar);
_tv_loopVar = MMC_CDR(_tv_loopVar);
tmp4--;
}
if (tmp4 == 0) {
tmpMeta[2] = mmc_mk_box2(27, &DAE_Type_T__METAPOLYMORPHIC__desc, _tv);
__omcQ_24tmpVar0 = tmpMeta[2];
*tmp3 = mmc_mk_cons(__omcQ_24tmpVar0,0);
tmp3 = &MMC_CDR(*tmp3);
} else if (tmp4 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp3 = mmc_mk_nil();
tmpMeta[0] = __omcQ_24tmpVar1;
}
_typeVarsType = tmpMeta[0];
tmpMeta[0] = mmc_mk_box7(24, &DAE_Type_T__METARECORD__desc, _path, _utPath, _typeVarsType, mmc_mk_integer(_index), _varlst, mmc_mk_boolean(_singleton));
_ftype = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_ftype) { *out_ftype = _ftype; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_sliceDimensionType(threadData_t *threadData, modelica_metatype _inTypeD, modelica_metatype _inTypeL)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inTypeD;
tmp3_2 = _inTypeL;
{
modelica_metatype _t = NULL;
modelica_metatype _tOrg = NULL;
modelica_metatype _dimensions = NULL;
modelica_metatype _dim2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_t = tmp3_1;
_tOrg = tmp3_2;
_dimensions = omc_Types_getDimensionSizes(threadData, _t);
_dim2 = omc_List_map(threadData, _dimensions, boxvar_Expression_intDimension);
_dim2 = listReverse(_dim2);
tmpMeta[0] = omc_List_foldr(threadData, _dim2, boxvar_Types_liftArray, _tOrg);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_expandWholeDimSubScript(threadData_t *threadData, modelica_metatype _inSubs, modelica_metatype _inSlice)
{
modelica_metatype _outSubs = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inSubs;
tmp3_2 = _inSlice;
{
modelica_metatype _sub1 = NULL;
modelica_metatype _sub2 = NULL;
modelica_metatype _subs1 = NULL;
modelica_metatype _subs2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],6,2) == 0) goto tmp2_end;
_sub1 = tmpMeta[1];
_subs1 = tmpMeta[2];
_subs2 = tmp3_2;
_subs2 = omc_Lookup_expandWholeDimSubScript(threadData, _subs1, _subs2);
tmpMeta[1] = mmc_mk_cons(_sub1, _subs2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_subs2 = tmp3_2;
tmp3 += 2;
tmpMeta[0] = _subs2;
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_1);
tmpMeta[4] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,0) == 0) goto tmp2_end;
_sub2 = tmpMeta[1];
_subs2 = tmpMeta[2];
_subs1 = tmpMeta[4];
_subs2 = omc_Lookup_expandWholeDimSubScript(threadData, _subs1, _subs2);
tmpMeta[1] = mmc_mk_cons(_sub2, _subs2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_2);
tmpMeta[4] = MMC_CDR(tmp3_2);
_sub1 = tmpMeta[1];
_subs1 = tmpMeta[2];
_subs2 = tmpMeta[4];
_subs2 = omc_Lookup_expandWholeDimSubScript(threadData, _subs1, _subs2);
tmpMeta[1] = mmc_mk_cons(_sub1, _subs2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outSubs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_makeEnumLiteralIndices(threadData_t *threadData, modelica_metatype _enumTypeName, modelica_metatype _enumLiterals, modelica_integer _enumIndex)
{
modelica_metatype _enumIndices = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _enumLiterals;
{
modelica_string _l = NULL;
modelica_metatype _ls = NULL;
modelica_metatype _e = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _enum_type_name = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_l = tmpMeta[1];
_ls = tmpMeta[2];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _l);
_enum_type_name = omc_AbsynUtil_joinPaths(threadData, _enumTypeName, tmpMeta[1]);
tmpMeta[1] = mmc_mk_box3(8, &DAE_Exp_ENUM__LITERAL__desc, _enum_type_name, mmc_mk_integer(_enumIndex));
_e = tmpMeta[1];
_expl = omc_Lookup_makeEnumLiteralIndices(threadData, _enumTypeName, _ls, ((modelica_integer) 1) + _enumIndex);
tmpMeta[1] = mmc_mk_cons(_e, _expl);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_enumIndices = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _enumIndices;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_makeEnumLiteralIndices(threadData_t *threadData, modelica_metatype _enumTypeName, modelica_metatype _enumLiterals, modelica_metatype _enumIndex)
{
modelica_integer tmp1;
modelica_metatype _enumIndices = NULL;
tmp1 = mmc_unbox_integer(_enumIndex);
_enumIndices = omc_Lookup_makeEnumLiteralIndices(threadData, _enumTypeName, _enumLiterals, tmp1);
return _enumIndices;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_makeDimensionSubscript(threadData_t *threadData, modelica_metatype _inDim)
{
modelica_metatype _outSub = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inDim;
{
modelica_metatype _expl = NULL;
modelica_metatype _enum_name = NULL;
modelica_metatype _l = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
if (0 != tmp5) goto tmp2_end;
tmpMeta[0] = _OMC_LIT19;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[2] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDim), 2))));
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _OMC_LIT15, tmpMeta[1]);
tmpMeta[4] = mmc_mk_box2(3, &DAE_Exp_ICONST__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inDim), 2))));
tmpMeta[5] = mmc_mk_box5(21, &DAE_Exp_RANGE__desc, tmpMeta[3], _OMC_LIT20, mmc_mk_none(), tmpMeta[4]);
tmpMeta[6] = mmc_mk_box2(4, &DAE_Subscript_SLICE__desc, tmpMeta[5]);
tmpMeta[0] = tmpMeta[6];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,0) == 0) goto tmp2_end;
_expl = _OMC_LIT24;
tmpMeta[1] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, _OMC_LIT25, mmc_mk_boolean(1), _expl);
tmpMeta[2] = mmc_mk_box2(4, &DAE_Subscript_SLICE__desc, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_enum_name = tmpMeta[1];
_l = tmpMeta[2];
_expl = omc_Lookup_makeEnumLiteralIndices(threadData, _enum_name, _l, ((modelica_integer) 1));
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box6(8, &DAE_Type_T__ENUMERATION__desc, mmc_mk_none(), _enum_name, _l, tmpMeta[1], tmpMeta[2]);
tmpMeta[4] = mmc_mk_box4(19, &DAE_Exp_ARRAY__desc, tmpMeta[3], mmc_mk_boolean(1), _expl);
tmpMeta[5] = mmc_mk_box2(4, &DAE_Subscript_SLICE__desc, tmpMeta[4]);
tmpMeta[0] = tmpMeta[5];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSub = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSub;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_addArrayDimensions(threadData_t *threadData, modelica_metatype _tySub, modelica_metatype _ss)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _subs = NULL;
modelica_metatype _dims = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmp5 = omc_Types_isArray(threadData, _tySub);
if (1 != tmp5) goto goto_1;
_dims = omc_Types_getDimensions(threadData, _tySub);
_subs = omc_List_map(threadData, _dims, boxvar_Lookup_makeDimensionSubscript);
tmpMeta[0] = omc_Lookup_expandWholeDimSubScript(threadData, _ss, _subs);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _ss;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_elabComponentRecursive(threadData_t *threadData, modelica_metatype _oCref)
{
modelica_metatype _lref = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _oCref;
{
modelica_metatype _ecpr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,3) == 0) goto tmp2_end;
_ecpr = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_ecpr, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,4) == 0) goto tmp2_end;
_ecpr = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_ecpr, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_lref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _lref;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupBinding(threadData_t *threadData, modelica_metatype _inCref, modelica_metatype _inParentType, modelica_metatype _inChildType, modelica_metatype _inParentBinding, modelica_metatype _inChildBinding)
{
modelica_metatype _outBinding = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inCref;
tmp3_2 = _inParentBinding;
{
modelica_metatype _tyElement = NULL;
modelica_metatype _e = NULL;
modelica_metatype _v = NULL;
modelica_metatype _c = NULL;
modelica_metatype _s = NULL;
modelica_metatype _ss = NULL;
modelica_string _cId = NULL;
modelica_metatype _exps = NULL;
modelica_metatype _comp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,4) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,3) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
if (!listEmpty(tmpMeta[7])) goto tmp2_end;
_e = tmpMeta[1];
_c = tmpMeta[2];
_s = tmpMeta[3];
_ss = tmpMeta[4];
_cId = tmpMeta[6];
tmp3 += 1;
tmp5 = omc_Types_isArray(threadData, _inParentType);
if (1 != tmp5) goto goto_1;
_tyElement = omc_Types_arrayElementType(threadData, _inParentType);
tmp6 = omc_Types_isRecord(threadData, _tyElement);
if (1 != tmp6) goto goto_1;
tmpMeta[1] = omc_Expression_subscriptExp(threadData, _e, _ss);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],14,4) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_exps = tmpMeta[2];
_comp = tmpMeta[3];
_e = listGet(_exps, omc_List_position(threadData, _cId, _comp));
tmpMeta[1] = mmc_mk_box5(4, &DAE_Binding_EQBOUND__desc, _e, mmc_mk_none(), _c, _s);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp7;
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,4) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
if (!listEmpty(tmpMeta[6])) goto tmp2_end;
_v = tmpMeta[1];
_s = tmpMeta[2];
_ss = tmpMeta[3];
_cId = tmpMeta[5];
tmp7 = omc_Types_isArray(threadData, _inParentType);
if (1 != tmp7) goto goto_1;
_tyElement = omc_Types_arrayElementType(threadData, _inParentType);
tmp8 = omc_Types_isRecord(threadData, _tyElement);
if (1 != tmp8) goto goto_1;
_e = omc_ValuesUtil_valueExp(threadData, _v, mmc_mk_none());
tmpMeta[1] = omc_Expression_subscriptExp(threadData, _e, _ss);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],14,4) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_exps = tmpMeta[2];
_comp = tmpMeta[3];
_e = listGet(_exps, omc_List_position(threadData, _cId, _comp));
tmpMeta[1] = mmc_mk_box5(4, &DAE_Binding_EQBOUND__desc, _e, mmc_mk_none(), _OMC_LIT26, _s);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
tmpMeta[0] = _inChildBinding;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outBinding = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outBinding;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupVarFMetaModelica(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _cr, modelica_metatype _inType, modelica_metatype *out_attr, modelica_metatype *out_ty, modelica_metatype *out_binding, modelica_metatype *out_cnstForRange, modelica_string *out_name)
{
modelica_metatype _cache = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _binding = NULL;
modelica_metatype _cnstForRange = NULL;
modelica_string _name = NULL;
modelica_string tmp1_c4 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_cache = _inCache;
{
modelica_metatype tmp4_1;
tmp4_1 = _cr;
{
modelica_metatype _fields = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
_fields = omc_Types_getMetaRecordFields(threadData, _inType);
tmpMeta[5] = listGet(_fields, ((modelica_integer) 1) + omc_Types_findVarIndex(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 2))), _fields));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 7));
_name = tmpMeta[6];
_attr = tmpMeta[7];
_ty = tmpMeta[8];
_binding = tmpMeta[9];
_cnstForRange = tmpMeta[10];
{
modelica_metatype _s;
for (tmpMeta[5] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 4))); !listEmpty(tmpMeta[5]); tmpMeta[5]=MMC_CDR(tmpMeta[5]))
{
_s = MMC_CAR(tmpMeta[5]);
{
modelica_metatype tmp8_1;
tmp8_1 = _ty;
{
volatile mmc_switch_type tmp8;
int tmp9;
tmp8 = 0;
for (; tmp8 < 1; tmp8++) {
switch (MMC_SWITCH_CAST(tmp8)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,22,1) == 0) goto tmp7_end;
tmpMeta[6] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ty), 2)));
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
goto_6:;
goto goto_2;
goto tmp7_done;
tmp7_done:;
}
}
_ty = tmpMeta[6];
}
}
_ty = omc_Types_getMetaRecordIfSingleton(threadData, _ty);
tmpMeta[0+0] = _attr;
tmpMeta[0+1] = _ty;
tmpMeta[0+2] = _binding;
tmpMeta[0+3] = _cnstForRange;
tmp1_c4 = _name;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
_fields = omc_Types_getMetaRecordFields(threadData, _inType);
tmpMeta[5] = listGet(_fields, ((modelica_integer) 1) + omc_Types_findVarIndex(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 2))), _fields));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 7));
_name = tmpMeta[6];
_attr = tmpMeta[7];
_ty = tmpMeta[8];
_binding = tmpMeta[9];
_cnstForRange = tmpMeta[10];
{
modelica_metatype _s;
for (tmpMeta[5] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 4))); !listEmpty(tmpMeta[5]); tmpMeta[5]=MMC_CDR(tmpMeta[5]))
{
_s = MMC_CAR(tmpMeta[5]);
{
modelica_metatype tmp12_1;
tmp12_1 = _ty;
{
volatile mmc_switch_type tmp12;
int tmp13;
tmp12 = 0;
for (; tmp12 < 1; tmp12++) {
switch (MMC_SWITCH_CAST(tmp12)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,22,1) == 0) goto tmp11_end;
tmpMeta[6] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_ty), 2)));
goto tmp11_done;
}
}
goto tmp11_end;
tmp11_end: ;
}
goto goto_10;
goto_10:;
goto goto_2;
goto tmp11_done;
tmp11_done:;
}
}
_ty = tmpMeta[6];
}
}
_ty = omc_Types_getMetaRecordIfSingleton(threadData, _ty);
_cache = omc_Lookup_lookupVarFMetaModelica(threadData, _cache, _inEnv, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 5))), _ty ,&_attr ,&_ty ,&_binding ,&_cnstForRange ,&_name);
tmpMeta[0+0] = _attr;
tmpMeta[0+1] = _ty;
tmpMeta[0+2] = _binding;
tmpMeta[0+3] = _cnstForRange;
tmp1_c4 = _name;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_attr = tmpMeta[0+0];
_ty = tmpMeta[0+1];
_binding = tmpMeta[0+2];
_cnstForRange = tmpMeta[0+3];
_name = tmp1_c4;
_return: OMC_LABEL_UNUSED
if (out_attr) { *out_attr = _attr; }
if (out_ty) { *out_ty = _ty; }
if (out_binding) { *out_binding = _binding; }
if (out_cnstForRange) { *out_cnstForRange = _cnstForRange; }
if (out_name) { *out_name = _name; }
return _cache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupVarFIdent(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcache, modelica_metatype _ht, modelica_string _ident, modelica_metatype _ss, modelica_metatype _inEnv, modelica_metatype *out_attr, modelica_metatype *out_ty_1, modelica_metatype *out_bind, modelica_metatype *out_cnstForRange, modelica_metatype *out_splicedExpData, modelica_metatype *out_componentEnv, modelica_string *out_name)
{
modelica_metatype _cache = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _ty_1 = NULL;
modelica_metatype _bind = NULL;
modelica_metatype _cnstForRange = NULL;
modelica_metatype _splicedExpData = NULL;
modelica_metatype _componentEnv = NULL;
modelica_string _name = NULL;
modelica_metatype _tty = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _ss_1 = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_cache = __omcQ_24in_5Fcache;
tmpMeta[1] = omc_Lookup_lookupVar2(threadData, _ht, _ident, _inEnv, NULL, NULL, NULL, &tmpMeta[0]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 7));
_name = tmpMeta[2];
_attr = tmpMeta[3];
_ty = tmpMeta[4];
_bind = tmpMeta[5];
_cnstForRange = tmpMeta[6];
_componentEnv = tmpMeta[0];
_ty_1 = omc_Lookup_checkSubscripts(threadData, _ty, _ss);
_tty = omc_Types_simplifyType(threadData, _ty);
_ss_1 = omc_Lookup_addArrayDimensions(threadData, _tty, _ss);
tmpMeta[0] = mmc_mk_box3(3, &InstTypes_SplicedExpData_SPLICEDEXPDATA__desc, mmc_mk_some(omc_Expression_makeCrefExp(threadData, omc_ComponentReference_makeCrefIdent(threadData, _ident, _tty, _ss_1), _tty)), _ty);
_splicedExpData = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_attr) { *out_attr = _attr; }
if (out_ty_1) { *out_ty_1 = _ty_1; }
if (out_bind) { *out_bind = _bind; }
if (out_cnstForRange) { *out_cnstForRange = _cnstForRange; }
if (out_splicedExpData) { *out_splicedExpData = _splicedExpData; }
if (out_componentEnv) { *out_componentEnv = _componentEnv; }
if (out_name) { *out_name = _name; }
return _cache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupVarF(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inBinTree, modelica_metatype _inComponentRef, modelica_metatype _inEnv, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_splicedExpData, modelica_metatype *out_outComponentEnv, modelica_string *out_name)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outAttributes = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outBinding = NULL;
modelica_metatype _constOfForIteratorRange = NULL;
modelica_metatype _splicedExpData = NULL;
modelica_metatype _outComponentEnv = NULL;
modelica_string _name = NULL;
modelica_string tmp1_c7 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[29] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inBinTree;
tmp4_3 = _inComponentRef;
{
modelica_string _id = NULL;
modelica_metatype _ct = NULL;
modelica_metatype _prl = NULL;
modelica_metatype _vt = NULL;
modelica_metatype _vt2 = NULL;
modelica_metatype _di = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _idTp = NULL;
modelica_metatype _ty2_2 = NULL;
modelica_metatype _tyParent = NULL;
modelica_metatype _tyChild = NULL;
modelica_metatype _ty1 = NULL;
modelica_metatype _binding = NULL;
modelica_metatype _parentBinding = NULL;
modelica_metatype _ht = NULL;
modelica_metatype _ss = NULL;
modelica_metatype _componentEnv = NULL;
modelica_metatype _ids = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _io = NULL;
modelica_metatype _texp = NULL;
modelica_metatype _xCref = NULL;
modelica_metatype _tCref = NULL;
modelica_metatype _ltCref = NULL;
modelica_metatype _splicedExp = NULL;
modelica_metatype _eType = NULL;
modelica_metatype _cnstForRange = NULL;
modelica_metatype _vis = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _oSplicedExp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,3) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
_id = tmpMeta[8];
_ss = tmpMeta[9];
tmpMeta[0+0] = omc_Lookup_lookupVarFIdent(threadData, _inCache, _inBinTree, _id, _ss, _inEnv, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5], &tmpMeta[0+6], &tmp1_c7);
goto tmp3_done;
}
case 1: {
modelica_string tmp6_c5 __attribute__((unused)) = 0;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,0,4) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 5));
_id = tmpMeta[8];
_ss = tmpMeta[9];
_ids = tmpMeta[10];
_cache = tmp4_1;
_ht = tmp4_2;
tmpMeta[9] = omc_Lookup_lookupVar2(threadData, _ht, _id, _inEnv, NULL, NULL, NULL, &tmpMeta[8]);
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 3));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 4));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 4));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 5));
_vt2 = tmpMeta[11];
_tyParent = tmpMeta[12];
_parentBinding = tmpMeta[13];
_componentEnv = tmpMeta[8];
{
modelica_metatype tmp9_1;
tmp9_1 = _tyParent;
{
volatile mmc_switch_type tmp9;
int tmp10;
tmp9 = 0;
for (; tmp9 < 3; tmp9++) {
switch (MMC_SWITCH_CAST(tmp9)) {
case 0: {
modelica_boolean tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp9_1,22,1) == 0) goto tmp8_end;
tmp11 = (listLength(omc_Types_getDimensions(threadData, _tyParent)) == listLength(_ss));
if (1 != tmp11) goto goto_7;
_cache = omc_Lookup_lookupVarFMetaModelica(threadData, _cache, _componentEnv, _ids, omc_Types_metaArrayElementType(threadData, _tyParent) ,&_attr ,&_ty ,&_binding ,&_cnstForRange ,&_name);
tmpMeta[14] = mmc_mk_box3(3, &InstTypes_SplicedExpData_SPLICEDEXPDATA__desc, mmc_mk_none(), _ty);
_splicedExpData = tmpMeta[14];
tmpMeta[8+0] = _attr;
tmpMeta[8+1] = _ty;
tmpMeta[8+2] = _binding;
tmpMeta[8+3] = _cnstForRange;
tmpMeta[8+4] = _componentEnv;
tmp6_c5 = _name;
goto tmp8_done;
}
case 1: {
if (!(omc_Types_isBoxedType(threadData, _tyParent) && (!omc_Types_isUnknownType(threadData, _tyParent)))) goto tmp8_end;
tmpMeta[14] = _ss;
if (!listEmpty(tmpMeta[14])) goto goto_7;
_cache = omc_Lookup_lookupVarFMetaModelica(threadData, _cache, _componentEnv, _ids, _tyParent ,&_attr ,&_ty ,&_binding ,&_cnstForRange ,&_name);
tmpMeta[14] = mmc_mk_box3(3, &InstTypes_SplicedExpData_SPLICEDEXPDATA__desc, mmc_mk_none(), _ty);
_splicedExpData = tmpMeta[14];
tmpMeta[8+0] = _attr;
tmpMeta[8+1] = _ty;
tmpMeta[8+2] = _binding;
tmpMeta[8+3] = _cnstForRange;
tmpMeta[8+4] = _componentEnv;
tmp6_c5 = _name;
goto tmp8_done;
}
case 2: {
modelica_string tmp12;
tmpMeta[28] = omc_Lookup_lookupVar(threadData, _cache, _componentEnv, _ids, &tmpMeta[14], &tmpMeta[21], &tmpMeta[22], &tmpMeta[23], &tmpMeta[24], NULL, &tmpMeta[27], &tmp12);
_cache = tmpMeta[28];
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[14]), 2));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[14]), 3));
tmpMeta[17] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[14]), 4));
tmpMeta[18] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[14]), 5));
tmpMeta[19] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[14]), 6));
tmpMeta[20] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[14]), 7));
tmpMeta[25] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[24]), 2));
tmpMeta[26] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[24]), 3));
_ct = tmpMeta[15];
_prl = tmpMeta[16];
_vt = tmpMeta[17];
_di = tmpMeta[18];
_io = tmpMeta[19];
_vis = tmpMeta[20];
_tyChild = tmpMeta[21];
_binding = tmpMeta[22];
_cnstForRange = tmpMeta[23];
_texp = tmpMeta[25];
_idTp = tmpMeta[26];
_componentEnv = tmpMeta[27];
_name = tmp12;
_ltCref = omc_Lookup_elabComponentRecursive(threadData, _texp);
_ty = _tyChild;
{
modelica_metatype tmp15_1;
tmp15_1 = _ltCref;
{
volatile mmc_switch_type tmp15;
int tmp16;
tmp15 = 0;
for (; tmp15 < 2; tmp15++) {
switch (MMC_SWITCH_CAST(tmp15)) {
case 0: {
if (listEmpty(tmp15_1)) goto tmp14_end;
tmpMeta[15] = MMC_CAR(tmp15_1);
tmpMeta[16] = MMC_CDR(tmp15_1);
_tCref = tmpMeta[15];
_ty1 = omc_Lookup_checkSubscripts(threadData, _tyParent, _ss);
_ty = omc_Lookup_sliceDimensionType(threadData, _ty1, _tyChild);
_ty2_2 = omc_Types_simplifyType(threadData, _tyParent);
_ss = omc_Lookup_addArrayDimensions(threadData, _ty2_2, _ss);
_xCref = omc_ComponentReference_makeCrefQual(threadData, _id, _ty2_2, _ss, _tCref);
_eType = omc_Types_simplifyType(threadData, _ty);
_splicedExp = omc_Expression_makeCrefExp(threadData, _xCref, _eType);
tmpMeta[14] = mmc_mk_some(_splicedExp);
goto tmp14_done;
}
case 1: {
if (!listEmpty(tmp15_1)) goto tmp14_end;
tmpMeta[14] = mmc_mk_none();
goto tmp14_done;
}
}
goto tmp14_end;
tmp14_end: ;
}
goto goto_13;
goto_13:;
goto goto_7;
goto tmp14_done;
tmp14_done:;
}
}
_oSplicedExp = tmpMeta[14];
_vt = omc_SCodeUtil_variabilityOr(threadData, _vt, _vt2);
_binding = omc_Lookup_lookupBinding(threadData, _inComponentRef, _tyParent, _ty, _parentBinding, _binding);
tmpMeta[14] = mmc_mk_box3(3, &InstTypes_SplicedExpData_SPLICEDEXPDATA__desc, _oSplicedExp, _idTp);
_splicedExpData = tmpMeta[14];
tmpMeta[14] = mmc_mk_box7(3, &DAE_Attributes_ATTR__desc, _ct, _prl, _vt, _di, _io, _vis);
tmpMeta[8+0] = tmpMeta[14];
tmpMeta[8+1] = _ty;
tmpMeta[8+2] = _binding;
tmpMeta[8+3] = _cnstForRange;
tmpMeta[8+4] = _componentEnv;
tmp6_c5 = _name;
goto tmp8_done;
}
}
goto tmp8_end;
tmp8_end: ;
}
goto goto_7;
goto_7:;
goto goto_2;
goto tmp8_done;
tmp8_done:;
}
}
_attr = tmpMeta[8+0];
_ty = tmpMeta[8+1];
_binding = tmpMeta[8+2];
_cnstForRange = tmpMeta[8+3];
_componentEnv = tmpMeta[8+4];
_name = tmp6_c5;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _attr;
tmpMeta[0+2] = _ty;
tmpMeta[0+3] = _binding;
tmpMeta[0+4] = _cnstForRange;
tmpMeta[0+5] = _splicedExpData;
tmpMeta[0+6] = _componentEnv;
tmp1_c7 = _name;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outAttributes = tmpMeta[0+1];
_outType = tmpMeta[0+2];
_outBinding = tmpMeta[0+3];
_constOfForIteratorRange = tmpMeta[0+4];
_splicedExpData = tmpMeta[0+5];
_outComponentEnv = tmpMeta[0+6];
_name = tmp1_c7;
_return: OMC_LABEL_UNUSED
if (out_outAttributes) { *out_outAttributes = _outAttributes; }
if (out_outType) { *out_outType = _outType; }
if (out_outBinding) { *out_outBinding = _outBinding; }
if (out_constOfForIteratorRange) { *out_constOfForIteratorRange = _constOfForIteratorRange; }
if (out_splicedExpData) { *out_splicedExpData = _splicedExpData; }
if (out_outComponentEnv) { *out_outComponentEnv = _outComponentEnv; }
if (out_name) { *out_name = _name; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_checkSubscripts(threadData_t *threadData, modelica_metatype _inType, modelica_metatype _inExpSubscriptLst)
{
modelica_metatype _outType = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inType;
tmp3_2 = _inExpSubscriptLst;
{
modelica_metatype _t = NULL;
modelica_metatype _t_1 = NULL;
modelica_metatype _dim = NULL;
modelica_metatype _ys = NULL;
modelica_metatype _s = NULL;
modelica_integer _sz;
modelica_integer _ind;
modelica_integer _dim_int;
modelica_metatype _se = NULL;
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 15; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
_t = tmp3_1;
tmp3 += 9;
tmpMeta[0] = _t;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
if (!listEmpty(tmpMeta[6])) goto tmp2_end;
_ys = tmpMeta[2];
_t = tmpMeta[3];
_dim = tmpMeta[5];
tmp3 += 7;
_t_1 = omc_Lookup_checkSubscripts(threadData, _t, _ys);
tmpMeta[1] = mmc_mk_cons(_dim, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _t_1, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmp3_2);
tmpMeta[6] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,1) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],18,4) == 0) goto tmp2_end;
_t = tmpMeta[1];
_e = tmpMeta[7];
_ys = tmpMeta[6];
tmp3 += 1;
_t_1 = omc_Lookup_checkSubscripts(threadData, _t, _ys);
_dim_int = omc_Expression_rangeSize(threadData, _e);
tmpMeta[2] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(_dim_int));
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _t_1, tmpMeta[1]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmp3_2);
tmpMeta[6] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,1) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],16,3) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
_t = tmpMeta[1];
_dim = tmpMeta[3];
_se = tmpMeta[8];
_ys = tmpMeta[6];
omc_Expression_dimensionSize(threadData, _dim);
_t_1 = omc_Lookup_checkSubscripts(threadData, _t, _ys);
_dim_int = listLength(_se);
tmpMeta[2] = mmc_mk_box2(3, &DAE_Dimension_DIM__INTEGER__desc, mmc_mk_integer(_dim_int));
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _t_1, tmpMeta[1]);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (!listEmpty(tmpMeta[7])) goto tmp2_end;
_e = tmpMeta[3];
_ys = tmpMeta[2];
_t = tmpMeta[4];
tmp3 += 9;
tmpMeta[1] = omc_Expression_typeof(threadData, _e);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (listEmpty(tmpMeta[2])) goto goto_1;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto goto_1;
_dim = tmpMeta[3];
_t_1 = omc_Lookup_checkSubscripts(threadData, _t, _ys);
tmpMeta[1] = mmc_mk_cons(_dim, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box3(9, &DAE_Type_T__ARRAY__desc, _t_1, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 5: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (!listEmpty(tmpMeta[4])) goto tmp2_end;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmp3_2);
tmpMeta[6] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],2,1) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,1) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[8]);
_t = tmpMeta[1];
_dim = tmpMeta[3];
_ind = tmp5;
_ys = tmpMeta[6];
_sz = omc_Expression_dimensionSize(threadData, _dim);
if((!(_ind > ((modelica_integer) 0))))
{
goto goto_1;
}
if((!(_ind <= _sz)))
{
goto goto_1;
}
tmpMeta[0] = omc_Lookup_checkSubscripts(threadData, _t, _ys);
goto tmp2_done;
}
case 6: {
modelica_boolean tmp6;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
if (!listEmpty(tmpMeta[6])) goto tmp2_end;
_ys = tmpMeta[2];
_t = tmpMeta[3];
_dim = tmpMeta[5];
tmp6 = omc_Expression_dimensionKnown(threadData, _dim);
if (1 != tmp6) goto goto_1;
tmpMeta[0] = omc_Lookup_checkSubscripts(threadData, _t, _ys);
goto tmp2_done;
}
case 7: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],4,0) == 0) goto tmp2_end;
if (!listEmpty(tmpMeta[6])) goto tmp2_end;
_ys = tmpMeta[2];
_t = tmpMeta[3];
tmp3 += 6;
tmpMeta[0] = omc_Lookup_checkSubscripts(threadData, _t, _ys);
goto tmp2_done;
}
case 8: {
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (listEmpty(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp2_end;
if (!listEmpty(tmpMeta[6])) goto tmp2_end;
_ys = tmpMeta[2];
_t = tmpMeta[3];
tmp3 += 5;
tmpMeta[0] = omc_Lookup_checkSubscripts(threadData, _t, _ys);
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmp3_2);
tmpMeta[3] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,0) == 0) goto tmp2_end;
_t = tmpMeta[1];
_ys = tmpMeta[3];
tmp3 += 4;
tmpMeta[0] = omc_Lookup_checkSubscripts(threadData, _t, _ys);
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_t = tmpMeta[1];
_ys = tmp3_2;
tmp3 += 3;
tmpMeta[0] = omc_Lookup_checkSubscripts(threadData, _t, _ys);
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,0) == 0) goto tmp2_end;
_t = tmp3_1;
tmp3 += 2;
tmpMeta[0] = _t;
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,22,1) == 0) goto tmp2_end;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto tmp2_end;
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inType), 2)));
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,22,1) == 0) goto tmp2_end;
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_2);
tmpMeta[2] = MMC_CDR(tmp3_2);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[0] = _inType;
goto tmp2_done;
}
case 14: {
modelica_boolean tmp7;
_t = tmp3_1;
_s = tmp3_2;
tmp7 = omc_Flags_isSet(threadData, _OMC_LIT30);
if (1 != tmp7) goto goto_1;
omc_Debug_trace(threadData, _OMC_LIT31);
omc_Debug_trace(threadData, omc_Types_printTypeStr(threadData, _t));
omc_Debug_trace(threadData, _OMC_LIT32);
omc_Debug_trace(threadData, stringDelimitList(omc_List_map(threadData, _s, boxvar_ExpressionDump_printSubscriptStr), _OMC_LIT33));
omc_Debug_trace(threadData, _OMC_LIT34);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 15) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outType = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outType;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupVar2(threadData_t *threadData, modelica_metatype _inBinTree, modelica_string _inIdent, modelica_metatype _inGraph, modelica_metatype *out_outElement, modelica_metatype *out_outMod, modelica_metatype *out_instStatus, modelica_metatype *out_outEnv)
{
modelica_metatype _outVar = NULL;
modelica_metatype _outElement = NULL;
modelica_metatype _outMod = NULL;
modelica_metatype _instStatus = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _r = NULL;
modelica_metatype _s = NULL;
modelica_metatype _n = NULL;
modelica_string _name = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_r = omc_FCore_RefTree_get(threadData, _inBinTree, _inIdent);
_outVar = omc_FNode_refInstVar(threadData, _r);
_s = omc_FNode_refRefTargetScope(threadData, _r);
_n = omc_FNode_fromRef(threadData, _r);
if(((!omc_FNode_isComponent(threadData, _n)) && omc_Flags_isSet(threadData, _OMC_LIT41)))
{
tmp1 = omc_Config_acceptMetaModelicaGrammar(threadData);
if (0 != tmp1) MMC_THROW_INTERNAL();
tmpMeta[0] = _n;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,5) == 0) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) MMC_THROW_INTERNAL();
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_name = tmpMeta[3];
tmpMeta[0] = stringAppend(_inIdent,_OMC_LIT35);
tmpMeta[1] = stringAppend(tmpMeta[0],omc_FGraph_printGraphPathStr(threadData, _inGraph));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT36);
tmpMeta[3] = stringAppend(tmpMeta[2],_name);
_name = tmpMeta[3];
tmpMeta[0] = stringAppend(_OMC_LIT37,_name);
omc_Debug_traceln(threadData, tmpMeta[0]);
MMC_THROW_INTERNAL();
}
tmpMeta[0] = _n;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,4) == 0) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_outElement = tmpMeta[2];
_outMod = tmpMeta[3];
_instStatus = tmpMeta[4];
_outEnv = omc_FGraph_setScope(threadData, _inGraph, _s);
_return: OMC_LABEL_UNUSED
if (out_outElement) { *out_outElement = _outElement; }
if (out_outMod) { *out_outMod = _outMod; }
if (out_instStatus) { *out_instStatus = _instStatus; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outVar;
}
PROTECTED_FUNCTION_STATIC void omc_Lookup_reportSeveralNamesError(threadData_t *threadData, modelica_boolean _unique, modelica_string _name)
{
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_boolean tmp3_1;
tmp3_1 = _unique;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (1 != tmp3_1) goto tmp2_end;
goto tmp2_done;
}
case 1: {
if (0 != tmp3_1) goto tmp2_end;
tmpMeta[0] = mmc_mk_cons(_name, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addMessage(threadData, _OMC_LIT46, tmpMeta[0]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC void boxptr_Lookup_reportSeveralNamesError(threadData_t *threadData, modelica_metatype _unique, modelica_metatype _name)
{
modelica_integer tmp1;
tmp1 = mmc_unbox_integer(_unique);
omc_Lookup_reportSeveralNamesError(threadData, tmp1, _name);
return;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inFrame, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outPrevFrames = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_string tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inCache;
tmp4_2 = _inFrame;
tmp4_3 = _inEnv;
tmp4_4 = _inIdent;
tmp4_5 = _inPrevFrames;
{
modelica_metatype _c = NULL;
modelica_metatype _totenv = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _r = NULL;
modelica_metatype _ht = NULL;
modelica_string _name = NULL;
modelica_metatype _qimports = NULL;
modelica_metatype _uqimports = NULL;
modelica_metatype _cache = NULL;
modelica_boolean _unique;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 5));
_cache = tmp4_1;
_ht = tmpMeta[4];
_totenv = tmp4_3;
_name = tmp4_4;
_prevFrames = tmp4_5;
_r = omc_FCore_RefTree_get(threadData, _ht, _name);
tmpMeta[4] = omc_FNode_fromRef(threadData, _r);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,5) == 0) goto goto_2;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_c = tmpMeta[6];
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _c;
tmpMeta[0+2] = _totenv;
tmpMeta[0+3] = _prevFrames;
goto tmp3_done;
}
case 1: {
_cache = tmp4_1;
_totenv = tmp4_3;
_name = tmp4_4;
_qimports = omc_FNode_imports(threadData, _inFrame ,&_uqimports);
{
volatile modelica_metatype tmp8_1;volatile modelica_metatype tmp8_2;
tmp8_1 = _qimports;
tmp8_2 = _uqimports;
{
volatile mmc_switch_type tmp8;
int tmp9;
tmp8 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp7_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp8 < 2; tmp8++) {
switch (MMC_SWITCH_CAST(tmp8)) {
case 0: {
if (listEmpty(tmp8_1)) goto tmp7_end;
tmpMeta[4] = MMC_CAR(tmp8_1);
tmpMeta[5] = MMC_CDR(tmp8_1);
_cache = omc_Lookup_lookupQualifiedImportedClassInFrame(threadData, _cache, _qimports, _totenv, _name, _inState, _inInfo ,&_c ,&_env_1 ,&_prevFrames);
goto tmp7_done;
}
case 1: {
if (listEmpty(tmp8_2)) goto tmp7_end;
tmpMeta[4] = MMC_CAR(tmp8_2);
tmpMeta[5] = MMC_CDR(tmp8_2);
_cache = omc_Lookup_lookupUnqualifiedImportedClassInFrame(threadData, _cache, _uqimports, _totenv, _name, _inInfo ,&_c ,&_env_1 ,&_prevFrames ,&_unique);
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
omc_Lookup_reportSeveralNamesError(threadData, _unique, _name);
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
tmp7_done:
(void)tmp8;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp7_done2;
goto_6:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp8 < 2) {
goto tmp7_top;
}
goto goto_2;
tmp7_done2:;
}
}
;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _c;
tmpMeta[0+2] = _env_1;
tmpMeta[0+3] = _prevFrames;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outClass = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_outPrevFrames = tmpMeta[0+3];
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outPrevFrames) { *out_outPrevFrames = _outPrevFrames; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClassInEnv(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _id, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outPrevFrames = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inPrevFrames;
tmp4_4 = _inInfo;
{
modelica_metatype _c = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _i_env = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _frame = NULL;
modelica_metatype _r = NULL;
modelica_string _sid = NULL;
modelica_string _scope = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
_env = tmp4_2;
_r = tmpMeta[5];
_cache = tmp4_1;
_prevFrames = tmp4_3;
_frame = omc_FNode_fromRef(threadData, _r);
_cache = omc_Lookup_lookupClassInFrame(threadData, _cache, _frame, _env, _id, _prevFrames, _inState, _inInfo ,&_c ,&_env_1 ,&_prevFrames);
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _c;
tmpMeta[0+2] = _env_1;
tmpMeta[0+3] = _prevFrames;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
modelica_boolean tmp7;
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
_env = tmp4_2;
_r = tmpMeta[5];
_cache = tmp4_1;
_prevFrames = tmp4_3;
tmp6 = omc_FNode_isRefTop(threadData, _r);
if (0 != tmp6) goto goto_2;
_frame = omc_FNode_fromRef(threadData, _r);
_sid = omc_FNode_refName(threadData, _r);
tmp7 = omc_FNode_isEncapsulated(threadData, _frame);
if (1 != tmp7) goto goto_2;
tmp8 = (stringEqual(_id, _sid));
if (1 != tmp8) goto goto_2;
_env = omc_FGraph_stripLastScopeRef(threadData, _env, NULL);
tmpMeta[4] = mmc_mk_cons(_r, _prevFrames);
_cache = omc_Lookup_lookupClassInEnv(threadData, _cache, _env, _id, tmpMeta[4], _inState, _inInfo ,&_c ,&_env ,&_prevFrames);
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _c;
tmpMeta[0+2] = _env;
tmpMeta[0+3] = _prevFrames;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp9;
modelica_boolean tmp10;
modelica_boolean tmp11;
if (optionNone(tmp4_4)) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_4), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[5])) goto tmp3_end;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
_info = tmpMeta[4];
_env = tmp4_2;
_r = tmpMeta[6];
_cache = tmp4_1;
tmp9 = omc_FNode_isRefTop(threadData, _r);
if (0 != tmp9) goto goto_2;
_frame = omc_FNode_fromRef(threadData, _r);
tmp10 = omc_FNode_isEncapsulated(threadData, _frame);
if (1 != tmp10) goto goto_2;
_i_env = omc_FGraph_topScope(threadData, _env);
tmp11 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Lookup_lookupClassInEnv(threadData, _cache, _i_env, _id, tmpMeta[4], _inState, mmc_mk_none(), NULL, NULL, NULL);
tmp11 = 1;
goto goto_12;
goto_12:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp11) {goto goto_2;}
_scope = omc_FGraph_printGraphPathStr(threadData, _env);
tmpMeta[4] = mmc_mk_cons(_id, mmc_mk_cons(_scope, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addSourceMessage(threadData, _OMC_LIT49, tmpMeta[4], _info);
goto goto_2;
goto tmp3_done;
}
case 3: {
modelica_boolean tmp13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
_env = tmp4_2;
_r = tmpMeta[5];
_cache = tmp4_1;
_prevFrames = tmp4_3;
_frame = omc_FNode_fromRef(threadData, _r);
tmp13 = omc_FNode_isEncapsulated(threadData, _frame);
if (1 != tmp13) goto goto_2;
_i_env = omc_FGraph_topScope(threadData, _env);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Lookup_lookupClassInEnv(threadData, _cache, _i_env, _id, tmpMeta[4], _inState, _inInfo ,&_c ,&_env_1 ,&_prevFrames);
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _c;
tmpMeta[0+2] = _env_1;
tmpMeta[0+3] = _prevFrames;
goto tmp3_done;
}
case 4: {
modelica_boolean tmp14;
modelica_boolean tmp15;
modelica_integer tmp16;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
_env = tmp4_2;
_r = tmpMeta[5];
_cache = tmp4_1;
_prevFrames = tmp4_3;
tmp14 = omc_FNode_isRefTop(threadData, _r);
if (0 != tmp14) goto goto_2;
_frame = omc_FNode_fromRef(threadData, _r);
tmp15 = omc_FNode_isEncapsulated(threadData, _frame);
if (0 != tmp15) goto goto_2;
tmpMeta[4] = omc_Mutable_access(threadData, _inState);
tmp16 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp16) goto goto_2;
_env = omc_FGraph_stripLastScopeRef(threadData, _env, NULL);
tmpMeta[4] = mmc_mk_cons(_r, _prevFrames);
_cache = omc_Lookup_lookupClassInEnv(threadData, _cache, _env, _id, tmpMeta[4], _inState, _inInfo ,&_c ,&_env_1 ,&_prevFrames);
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _c;
tmpMeta[0+2] = _env_1;
tmpMeta[0+3] = _prevFrames;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outClass = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_outPrevFrames = tmpMeta[0+3];
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outPrevFrames) { *out_outPrevFrames = _outPrevFrames; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_buildRecordConstructorResultElt(threadData_t *threadData, modelica_metatype _elts, modelica_string _id, modelica_metatype _env, modelica_metatype _info)
{
modelica_metatype _outElement = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, tmpMeta[0], mmc_mk_none());
tmpMeta[2] = mmc_mk_box9(6, &SCode_Element_COMPONENT__desc, _OMC_LIT50, _OMC_LIT56, _OMC_LIT62, tmpMeta[1], _OMC_LIT63, _OMC_LIT64, mmc_mk_none(), _info);
_outElement = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_buildRecordConstructorElts(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inSCodeElementLst, modelica_metatype _mods, modelica_metatype *out_outEnv, modelica_metatype *out_outSCodeElementLst)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outSCodeElementLst = NULL;
modelica_metatype tmpMeta[24] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inSCodeElementLst;
{
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _res = NULL;
modelica_metatype _comp = NULL;
modelica_string _id = NULL;
modelica_metatype _ct = NULL;
modelica_metatype _repl = NULL;
modelica_metatype _vis = NULL;
modelica_metatype _f = NULL;
modelica_metatype _redecl = NULL;
modelica_metatype _io = NULL;
modelica_metatype _d = NULL;
modelica_metatype _prl = NULL;
modelica_metatype _var = NULL;
modelica_metatype _isf = NULL;
modelica_metatype _dir = NULL;
modelica_metatype _tp = NULL;
modelica_metatype _comment = NULL;
modelica_metatype _cond = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _umod = NULL;
modelica_metatype _mod_1 = NULL;
modelica_metatype _compMod = NULL;
modelica_metatype _fullMod = NULL;
modelica_metatype _selectedMod = NULL;
modelica_metatype _cmod = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_3)) goto tmp3_end;
_cache = tmp4_1;
_env = tmp4_2;
tmp4 += 5;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = tmpMeta[3];
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmp4_3);
tmpMeta[4] = MMC_CDR(tmp4_3);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,8) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],0,0) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 3));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 4));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 5));
tmpMeta[17] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 7));
tmpMeta[18] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[19] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[20] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 7));
tmpMeta[21] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 8));
tmpMeta[22] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 9));
tmpMeta[23] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_id = tmpMeta[6];
_redecl = tmpMeta[8];
_f = tmpMeta[9];
_io = tmpMeta[10];
_repl = tmpMeta[11];
_d = tmpMeta[13];
_ct = tmpMeta[14];
_prl = tmpMeta[15];
_var = tmpMeta[16];
_isf = tmpMeta[17];
_tp = tmpMeta[18];
_mod = tmpMeta[19];
_comment = tmpMeta[20];
_cond = tmpMeta[21];
_info = tmpMeta[22];
_cmod = tmpMeta[23];
_rest = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box2(3, &Mod_ModScope_COMPONENT__desc, _id);
_cache = omc_Mod_elabMod(threadData, _cache, _env, tmpMeta[3], _OMC_LIT6, _mod, 1, tmpMeta[4], _info ,&_mod_1);
_mod_1 = omc_Mod_merge(threadData, _mods, _mod_1, _OMC_LIT7, 1);
_compMod = omc_Mod_lookupCompModification(threadData, _mod_1, _id);
_fullMod = _mod_1;
_selectedMod = omc_Lookup_selectModifier(threadData, _compMod, _fullMod);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Mod_updateMod(threadData, _cache, _env, tmpMeta[3], _OMC_LIT6, _cmod, 1, _info ,&_cmod);
_selectedMod = omc_Mod_merge(threadData, _cmod, _selectedMod, _OMC_LIT7, 1);
_umod = omc_Mod_unelabMod(threadData, _selectedMod);
_cache = omc_Lookup_buildRecordConstructorElts(threadData, _cache, _env, _rest, _mods ,&_env ,&_res);
_dir = _OMC_LIT65;
_vis = _OMC_LIT66;
tmpMeta[4] = mmc_mk_box6(3, &SCode_Prefixes_PREFIXES__desc, _vis, _redecl, _f, _io, _repl);
tmpMeta[5] = mmc_mk_box7(3, &SCode_Attributes_ATTR__desc, _d, _ct, _prl, _var, _dir, _isf);
tmpMeta[6] = mmc_mk_box9(6, &SCode_Element_COMPONENT__desc, _id, tmpMeta[4], tmpMeta[5], _tp, _umod, _comment, _cond, _info);
tmpMeta[3] = mmc_mk_cons(tmpMeta[6], _res);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = tmpMeta[3];
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmp4_3);
tmpMeta[4] = MMC_CDR(tmp4_3);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,8) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 3));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 4));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[16],3,0) == 0) goto tmp3_end;
tmpMeta[17] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 7));
tmpMeta[18] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[19] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[19],2,0) == 0) goto tmp3_end;
tmpMeta[20] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 7));
tmpMeta[21] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 8));
tmpMeta[22] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 9));
tmpMeta[23] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_id = tmpMeta[6];
_vis = tmpMeta[8];
_redecl = tmpMeta[9];
_io = tmpMeta[10];
_repl = tmpMeta[11];
_d = tmpMeta[13];
_ct = tmpMeta[14];
_prl = tmpMeta[15];
_isf = tmpMeta[17];
_tp = tmpMeta[18];
_mod = tmpMeta[19];
_comment = tmpMeta[20];
_cond = tmpMeta[21];
_info = tmpMeta[22];
_cmod = tmpMeta[23];
_rest = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box2(3, &Mod_ModScope_COMPONENT__desc, _id);
_cache = omc_Mod_elabMod(threadData, _cache, _env, tmpMeta[3], _OMC_LIT6, _mod, 1, tmpMeta[4], _info ,&_mod_1);
_mod_1 = omc_Mod_merge(threadData, _mods, _mod_1, _OMC_LIT7, 1);
_compMod = omc_Mod_lookupCompModification(threadData, _mod_1, _id);
_fullMod = _mod_1;
_selectedMod = omc_Lookup_selectModifier(threadData, _compMod, _fullMod);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Mod_updateMod(threadData, _cache, _env, tmpMeta[3], _OMC_LIT6, _cmod, 1, _info ,&_cmod);
_selectedMod = omc_Mod_merge(threadData, _cmod, _selectedMod, _OMC_LIT7, 1);
_umod = omc_Mod_unelabMod(threadData, _selectedMod);
_cache = omc_Lookup_buildRecordConstructorElts(threadData, _cache, _env, _rest, _mods ,&_env ,&_res);
_var = _OMC_LIT59;
_dir = _OMC_LIT67;
_vis = _OMC_LIT51;
_f = _OMC_LIT53;
tmpMeta[4] = mmc_mk_box6(3, &SCode_Prefixes_PREFIXES__desc, _vis, _redecl, _f, _io, _repl);
tmpMeta[5] = mmc_mk_box7(3, &SCode_Attributes_ATTR__desc, _d, _ct, _prl, _var, _dir, _isf);
tmpMeta[6] = mmc_mk_box9(6, &SCode_Element_COMPONENT__desc, _id, tmpMeta[4], tmpMeta[5], _tp, _umod, _comment, _cond, _info);
tmpMeta[3] = mmc_mk_cons(tmpMeta[6], _res);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = tmpMeta[3];
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmp4_3);
tmpMeta[4] = MMC_CDR(tmp4_3);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,8) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 3));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 4));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[16],3,0) == 0) goto tmp3_end;
tmpMeta[17] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 7));
tmpMeta[18] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[19] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[20] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 7));
tmpMeta[21] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 8));
tmpMeta[22] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 9));
tmpMeta[23] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_id = tmpMeta[6];
_redecl = tmpMeta[8];
_f = tmpMeta[9];
_io = tmpMeta[10];
_repl = tmpMeta[11];
_d = tmpMeta[13];
_ct = tmpMeta[14];
_prl = tmpMeta[15];
_var = tmpMeta[16];
_isf = tmpMeta[17];
_tp = tmpMeta[18];
_mod = tmpMeta[19];
_comment = tmpMeta[20];
_cond = tmpMeta[21];
_info = tmpMeta[22];
_cmod = tmpMeta[23];
_rest = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box2(3, &Mod_ModScope_COMPONENT__desc, _id);
_cache = omc_Mod_elabMod(threadData, _cache, _env, tmpMeta[3], _OMC_LIT6, _mod, 1, tmpMeta[4], _info ,&_mod_1);
_mod_1 = omc_Mod_merge(threadData, _mods, _mod_1, _OMC_LIT7, 1);
_compMod = omc_Mod_lookupCompModification(threadData, _mod_1, _id);
_fullMod = _mod_1;
_selectedMod = omc_Lookup_selectModifier(threadData, _compMod, _fullMod);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Mod_updateMod(threadData, _cache, _env, tmpMeta[3], _OMC_LIT6, _cmod, 1, _info ,&_cmod);
_selectedMod = omc_Mod_merge(threadData, _cmod, _selectedMod, _OMC_LIT7, 1);
_umod = omc_Mod_unelabMod(threadData, _selectedMod);
_cache = omc_Lookup_buildRecordConstructorElts(threadData, _cache, _env, _rest, _mods ,&_env ,&_res);
_dir = _OMC_LIT65;
_vis = _OMC_LIT66;
tmpMeta[4] = mmc_mk_box6(3, &SCode_Prefixes_PREFIXES__desc, _vis, _redecl, _f, _io, _repl);
tmpMeta[5] = mmc_mk_box7(3, &SCode_Attributes_ATTR__desc, _d, _ct, _prl, _var, _dir, _isf);
tmpMeta[6] = mmc_mk_box9(6, &SCode_Element_COMPONENT__desc, _id, tmpMeta[4], tmpMeta[5], _tp, _umod, _comment, _cond, _info);
tmpMeta[3] = mmc_mk_cons(tmpMeta[6], _res);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = tmpMeta[3];
goto tmp3_done;
}
case 4: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmp4_3);
tmpMeta[4] = MMC_CDR(tmp4_3);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,8) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 2));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 3));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 4));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 7));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 5));
tmpMeta[17] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
tmpMeta[18] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 7));
tmpMeta[19] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 8));
tmpMeta[20] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 9));
tmpMeta[21] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_id = tmpMeta[6];
_redecl = tmpMeta[8];
_io = tmpMeta[9];
_repl = tmpMeta[10];
_d = tmpMeta[12];
_ct = tmpMeta[13];
_prl = tmpMeta[14];
_isf = tmpMeta[15];
_tp = tmpMeta[16];
_mod = tmpMeta[17];
_comment = tmpMeta[18];
_cond = tmpMeta[19];
_info = tmpMeta[20];
_cmod = tmpMeta[21];
_rest = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box2(3, &Mod_ModScope_COMPONENT__desc, _id);
_cache = omc_Mod_elabMod(threadData, _cache, _env, tmpMeta[3], _OMC_LIT6, _mod, 1, tmpMeta[4], _info ,&_mod_1);
_mod_1 = omc_Mod_merge(threadData, _mods, _mod_1, _OMC_LIT7, 1);
_compMod = omc_Mod_lookupCompModification(threadData, _mod_1, _id);
_fullMod = _mod_1;
_selectedMod = omc_Lookup_selectModifier(threadData, _compMod, _fullMod);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Mod_updateMod(threadData, _cache, _env, tmpMeta[3], _OMC_LIT6, _cmod, 1, _info ,&_cmod);
_selectedMod = omc_Mod_merge(threadData, _cmod, _selectedMod, _OMC_LIT7, 1);
_umod = omc_Mod_unelabMod(threadData, _selectedMod);
_cache = omc_Lookup_buildRecordConstructorElts(threadData, _cache, _env, _rest, _mods ,&_env ,&_res);
_var = _OMC_LIT59;
_vis = _OMC_LIT51;
_f = _OMC_LIT53;
_dir = _OMC_LIT67;
tmpMeta[4] = mmc_mk_box6(3, &SCode_Prefixes_PREFIXES__desc, _vis, _redecl, _f, _io, _repl);
tmpMeta[5] = mmc_mk_box7(3, &SCode_Attributes_ATTR__desc, _d, _ct, _prl, _var, _dir, _isf);
tmpMeta[6] = mmc_mk_box9(6, &SCode_Element_COMPONENT__desc, _id, tmpMeta[4], tmpMeta[5], _tp, _umod, _comment, _cond, _info);
tmpMeta[3] = mmc_mk_cons(tmpMeta[6], _res);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = tmpMeta[3];
goto tmp3_done;
}
case 5: {
modelica_boolean tmp6;
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmp4_3);
tmpMeta[4] = MMC_CDR(tmp4_3);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_comp = tmpMeta[5];
_cmod = tmpMeta[6];
tmp6 = omc_Flags_isSet(threadData, _OMC_LIT30);
if (1 != tmp6) goto goto_2;
tmpMeta[3] = stringAppend(_OMC_LIT68,omc_SCodeDump_unparseElementStr(threadData, _comp, _OMC_LIT69));
tmpMeta[4] = stringAppend(tmpMeta[3],_OMC_LIT70);
tmpMeta[5] = stringAppend(tmpMeta[4],omc_Mod_printModStr(threadData, _cmod));
tmpMeta[6] = stringAppend(tmpMeta[5],_OMC_LIT71);
tmpMeta[7] = stringAppend(tmpMeta[6],omc_Mod_printModStr(threadData, _mods));
omc_Debug_traceln(threadData, tmpMeta[7]);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outEnv = tmpMeta[0+1];
_outSCodeElementLst = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outSCodeElementLst) { *out_outSCodeElementLst = _outSCodeElementLst; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_selectModifier(threadData_t *threadData, modelica_metatype _inModID, modelica_metatype _inModNoID)
{
modelica_metatype _outMod = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inModID;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,0) == 0) goto tmp2_end;
tmpMeta[0] = _inModNoID;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inModID;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outMod = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outMod;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_buildRecordConstructorClass2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _cl, modelica_metatype _mods, modelica_metatype *out_outEnv, modelica_metatype *out_funcelts, modelica_metatype *out_elts)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _funcelts = NULL;
modelica_metatype _elts = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _cl;
{
modelica_metatype _cdefelts = NULL;
modelica_metatype _classExtendsElts = NULL;
modelica_metatype _extendsElts = NULL;
modelica_metatype _compElts = NULL;
modelica_metatype _eltsMods = NULL;
modelica_string _name = NULL;
modelica_metatype _fpath = NULL;
modelica_metatype _info = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 9));
_name = tmpMeta[4];
_info = tmpMeta[5];
_cache = tmp4_1;
_env = tmp4_2;
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InstExtends_instDerivedClasses(threadData, _cache, _env, tmpMeta[4], _OMC_LIT5, _OMC_LIT6, _cl, 1, _info ,&_env ,NULL ,&_elts ,NULL ,NULL ,NULL ,NULL ,NULL, NULL);
_env = omc_FGraph_openScope(threadData, _env, _OMC_LIT1, _name, _OMC_LIT3);
_fpath = omc_FGraph_getGraphName(threadData, _env);
_cdefelts = omc_InstUtil_splitElts(threadData, _elts ,&_classExtendsElts ,&_extendsElts ,&_compElts);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = mmc_mk_box2(6, &ClassInf_State_RECORD__desc, _fpath);
_cache = omc_InstExtends_instExtendsAndClassExtendsList(threadData, _cache, _env, tmpMeta[4], _OMC_LIT5, _OMC_LIT6, _extendsElts, _classExtendsElts, _elts, tmpMeta[5], _name, 1, 0 ,&_env ,NULL ,NULL ,&_eltsMods ,NULL ,NULL ,NULL ,NULL, NULL);
_eltsMods = listAppend(_eltsMods, omc_InstUtil_addNomod(threadData, _compElts));
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InstUtil_addClassdefsToEnv(threadData, _cache, _env, tmpMeta[4], _OMC_LIT6, _cdefelts, 0, mmc_mk_none(), 0 ,&_env1 ,NULL);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = mmc_mk_box2(6, &ClassInf_State_RECORD__desc, _fpath);
_cache = omc_InstUtil_addComponentsToEnv(threadData, _cache, _env1, tmpMeta[4], _mods, _OMC_LIT6, tmpMeta[5], _eltsMods, 1 ,&_env1 ,NULL);
_cache = omc_Lookup_buildRecordConstructorElts(threadData, _cache, _env1, _eltsMods, _mods ,&_env1 ,&_funcelts);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env1;
tmpMeta[0+2] = _funcelts;
tmpMeta[0+3] = _elts;
goto tmp3_done;
}
case 1: {
tmpMeta[4] = stringAppend(_OMC_LIT72,omc_SCodeDump_unparseElementStr(threadData, _cl, _OMC_LIT69));
tmpMeta[5] = stringAppend(tmpMeta[4],_OMC_LIT73);
omc_Debug_traceln(threadData, tmpMeta[5]);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outEnv = tmpMeta[0+1];
_funcelts = tmpMeta[0+2];
_elts = tmpMeta[0+3];
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_funcelts) { *out_funcelts = _funcelts; }
if (out_elts) { *out_elts = _elts; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_buildRecordConstructorClass(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype *out_outEnv, modelica_metatype *out_outClass)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inClass;
{
modelica_metatype _funcelts = NULL;
modelica_metatype _reselt = NULL;
modelica_metatype _cl = NULL;
modelica_string _id = NULL;
modelica_metatype _info = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 9));
_cl = tmp4_3;
_id = tmpMeta[3];
_info = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
_cache = omc_Lookup_buildRecordConstructorClass2(threadData, _cache, _env, _cl, _OMC_LIT5 ,&_env ,&_funcelts ,NULL);
tmpMeta[3] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
tmpMeta[4] = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, tmpMeta[3], mmc_mk_none());
tmpMeta[5] = mmc_mk_box9(6, &SCode_Element_COMPONENT__desc, _OMC_LIT50, _OMC_LIT56, _OMC_LIT62, tmpMeta[4], _OMC_LIT63, _OMC_LIT64, mmc_mk_none(), _info);
_reselt = tmpMeta[5];
tmpMeta[3] = mmc_mk_cons(_reselt, _funcelts);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[7] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[8] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[9] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[10] = mmc_mk_box9(3, &SCode_ClassDef_PARTS__desc, tmpMeta[3], tmpMeta[4], tmpMeta[5], tmpMeta[6], tmpMeta[7], tmpMeta[8], tmpMeta[9], mmc_mk_none());
tmpMeta[11] = mmc_mk_box9(5, &SCode_Element_CLASS__desc, _id, _OMC_LIT56, _OMC_LIT1, _OMC_LIT74, _OMC_LIT76, tmpMeta[10], _OMC_LIT64, _info);
_cl = tmpMeta[11];
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = _cl;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
tmp6 = omc_Flags_isSet(threadData, _OMC_LIT30);
if (1 != tmp6) goto goto_2;
omc_Debug_trace(threadData, _OMC_LIT77);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outEnv = tmpMeta[0+1];
_outClass = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outClass) { *out_outClass = _outClass; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_buildRecordType(threadData_t *threadData, modelica_metatype _cache, modelica_metatype _env, modelica_metatype _icdef, modelica_metatype *out_outEnv, modelica_metatype *out_ftype)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _ftype = NULL;
modelica_string _name = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outCache = omc_Lookup_buildRecordConstructorClass(threadData, _cache, _env, _icdef ,NULL ,&_cdef);
_name = omc_SCodeUtil_className(threadData, _cdef);
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outCache = omc_InstFunction_implicitFunctionTypeInstantiation(threadData, _outCache, _env, tmpMeta[0], _cdef ,&_outEnv ,NULL);
_outCache = omc_Lookup_lookupTypeInEnv(threadData, _outCache, _outEnv, _name ,&_ftype ,NULL);
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_ftype) { *out_ftype = _ftype; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_selectUpdatedEnv(threadData_t *threadData, modelica_metatype _inNewEnv, modelica_metatype _inOldEnv)
{
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmp5 = omc_FGraph_isTopScope(threadData, _inNewEnv);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _inOldEnv;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
tmp6 = (stringEqual(omc_FGraph_getGraphNameStr(threadData, _inNewEnv), omc_FGraph_getGraphNameStr(threadData, _inOldEnv)));
if (1 != tmp6) goto goto_1;
tmpMeta[0] = _inNewEnv;
goto tmp2_done;
}
case 2: {
tmpMeta[0] = _inOldEnv;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outEnv = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outEnv;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupFunctionsInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inClasses, modelica_metatype _inFuncTypes, modelica_metatype _inEnv, modelica_string _inFuncName, modelica_metatype _inInfo, modelica_metatype *out_outFuncTypes)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outFuncTypes = NULL;
modelica_metatype _r = NULL;
modelica_metatype _data = NULL;
modelica_metatype _ty = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_r = omc_FCore_RefTree_get(threadData, _inFuncTypes, _inFuncName);
tmpMeta[0] = omc_FNode_fromRef(threadData, _r);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],7,1) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_outFuncTypes = tmpMeta[2];
_outCache = _inCache;
goto tmp2_done;
}
case 1: {
_r = omc_FCore_RefTree_get(threadData, _inClasses, _inFuncName);
tmpMeta[0] = omc_FNode_fromRef(threadData, _r);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
_data = tmpMeta[1];
{
volatile modelica_metatype tmp8_1;
tmp8_1 = _data;
{
modelica_metatype _cl = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp8;
int tmp9;
tmp8 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp7_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp8 < 5; tmp8++) {
switch (MMC_SWITCH_CAST(tmp8)) {
case 0: {
tmpMeta[2] = omc_FNode_refInstVar(threadData, _r);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_ty = tmpMeta[3];
{
modelica_metatype tmp12_1;
tmp12_1 = _ty;
{
volatile mmc_switch_type tmp12;
int tmp13;
tmp12 = 0;
for (; tmp12 < 1; tmp12++) {
switch (MMC_SWITCH_CAST(tmp12)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp12_1,11,4) == 0) goto tmp11_end;
tmpMeta[4] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _inFuncName);
tmpMeta[3] = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta[3]), MMC_UNTAGPTR(_ty), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[3]))[5] = tmpMeta[4];
_ty = tmpMeta[3];
tmpMeta[2] = _ty;
goto tmp11_done;
}
}
goto tmp11_end;
tmp11_end: ;
}
goto goto_10;
goto_10:;
goto goto_6;
goto tmp11_done;
tmp11_done:;
}
}
_ty = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_ty, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0+0] = _inCache;
tmpMeta[0+1] = tmpMeta[2];
goto tmp7_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,4,4) == 0) goto tmp7_end;
tmp8 += 3;
tmpMeta[2] = mmc_mk_cons(_inFuncName, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT80, tmpMeta[2], _inInfo);
goto goto_6;
goto tmp7_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,3,5) == 0) goto tmp7_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto tmp7_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto tmp7_end;
_cl = tmpMeta[2];
_cache = omc_Lookup_buildRecordType(threadData, _inCache, _inEnv, _cl ,NULL ,&_ty);
tmpMeta[2] = mmc_mk_cons(_ty, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = tmpMeta[2];
goto tmp7_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,3,5) == 0) goto tmp7_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
_cl = tmpMeta[2];
if (!omc_SCodeUtil_isFunction(threadData, _cl)) goto tmp7_end;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InstFunction_implicitFunctionTypeInstantiation(threadData, _inCache, _inEnv, tmpMeta[2], _cl ,&_env, NULL);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _inFuncName);
tmpMeta[0+0] = omc_Lookup_lookupFunctionsInEnv2(threadData, _cache, _env, tmpMeta[2], 1, _inInfo, &tmpMeta[0+1]);
goto tmp7_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp8_1,3,5) == 0) goto tmp7_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 2));
_cl = tmpMeta[2];
if (!omc_SCodeUtil_classIsExternalObject(threadData, _cl)) goto tmp7_end;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_instClass(threadData, _inCache, _inEnv, tmpMeta[2], _OMC_LIT4, _OMC_LIT5, _OMC_LIT6, _cl, tmpMeta[3], 0, _OMC_LIT81, _OMC_LIT11, _OMC_LIT14 ,&_env, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
_cache = omc_Lookup_lookupTypeInEnv(threadData, _cache, _env, _inFuncName ,&_ty, NULL);
tmpMeta[2] = mmc_mk_cons(_ty, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = tmpMeta[2];
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
tmp7_done:
(void)tmp8;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp7_done2;
goto_6:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp8 < 5) {
goto tmp7_top;
}
goto goto_1;
tmp7_done2:;
}
}
_outCache = tmpMeta[0+0];
_outFuncTypes = tmpMeta[0+1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outFuncTypes) { *out_outFuncTypes = _outFuncTypes; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupTypeInFrame2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _item, modelica_metatype _inEnv3, modelica_string _inIdent4, modelica_metatype *out_outType, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_string tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _item;
tmp4_3 = _inEnv3;
tmp4_4 = _inIdent4;
{
modelica_metatype _t = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _env = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env_3 = NULL;
modelica_string _id = NULL;
modelica_metatype _cdef = NULL;
modelica_metatype _comp = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
_t = tmpMeta[5];
_cache = tmp4_1;
_env = tmp4_3;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env;
goto tmp3_done;
}
case 1: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],4,4) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_comp = tmpMeta[4];
_id = tmp4_4;
_info = omc_SCodeUtil_elementInfo(threadData, _comp);
tmpMeta[3] = mmc_mk_cons(_id, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT80, tmpMeta[3], _info);
goto goto_2;
goto tmp3_done;
}
case 2: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,5) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,8) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp3_end;
_cdef = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_3;
_cache = omc_Lookup_buildRecordType(threadData, _cache, _env, _cdef ,&_env_3 ,&_ty);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _ty;
tmpMeta[0+2] = _env_3;
goto tmp3_done;
}
case 3: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,5) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,8) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],17,5) == 0) goto tmp3_end;
_cdef = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_3;
_cache = omc_Lookup_buildMetaRecordType(threadData, _cache, _env, _cdef ,&_env_3 ,&_ty);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _ty;
tmpMeta[0+2] = _env_3;
goto tmp3_done;
}
case 4: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,5) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,8) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],9,1) == 0) goto tmp3_end;
_cdef = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_3;
_id = tmp4_4;
_cenv = _env;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InstFunction_implicitFunctionInstantiation(threadData, _cache, _cenv, tmpMeta[3], _OMC_LIT5, _OMC_LIT6, _cdef, tmpMeta[4] ,&_env_1 ,NULL);
tmpMeta[0+0] = omc_Lookup_lookupTypeInEnv(threadData, _cache, _env_1, _id, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outType = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outType) { *out_outType = _outType; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupTypeInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inBinTree1, modelica_metatype _inBinTree2, modelica_metatype _inEnv3, modelica_string _inIdent4, modelica_metatype *out_outType, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_string tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inBinTree2;
tmp4_3 = _inEnv3;
tmp4_4 = _inIdent4;
{
modelica_metatype _httypes = NULL;
modelica_metatype _env = NULL;
modelica_string _id = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _item = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cache = tmp4_1;
_httypes = tmp4_2;
_env = tmp4_3;
_id = tmp4_4;
_item = omc_FNode_fromRef(threadData, omc_FCore_RefTree_get(threadData, _httypes, _id));
tmpMeta[0+0] = omc_Lookup_lookupTypeInFrame2(threadData, _cache, _item, _env, _id, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outType = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outType) { *out_outType = _outType; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_getHtTypes(threadData_t *threadData, modelica_metatype _inParentRef)
{
modelica_metatype _ht = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_metatype _r = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_r = omc_FNode_child(threadData, _inParentRef, _OMC_LIT82);
tmpMeta[0] = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _r));
goto tmp2_done;
}
case 1: {
tmpMeta[0] = omc_FCore_RefTree_new(threadData);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_ht = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _ht;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupTypeInEnv(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _id, modelica_metatype *out_outType, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
{
modelica_metatype _c = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _httypes = NULL;
modelica_metatype _ht = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _r = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_env = tmp4_2;
_r = tmpMeta[4];
_cache = tmp4_1;
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _r));
_httypes = omc_Lookup_getHtTypes(threadData, _r);
tmpMeta[0+0] = omc_Lookup_lookupTypeInFrame(threadData, _cache, _ht, _httypes, _env, _id, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_env = tmp4_2;
_r = tmpMeta[4];
_cache = tmp4_1;
_env = omc_FGraph_stripLastScopeRef(threadData, _env, NULL);
_cache = omc_Lookup_lookupTypeInEnv(threadData, _cache, _env, _id ,&_c ,&_env_1);
_env_1 = omc_FGraph_pushScopeRef(threadData, _env_1, _r);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _c;
tmpMeta[0+2] = _env_1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outType = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outType) { *out_outType = _outType; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_createGenericBuiltinFunctions(threadData_t *threadData, modelica_metatype _inEnv, modelica_string _inString)
{
modelica_metatype _outTypesTypeLst = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_string tmp3_1;
tmp3_1 = _inString;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (11 != MMC_STRLEN(tmp3_1) || strcmp(MMC_STRINGDATA(_OMC_LIT96), MMC_STRINGDATA(tmp3_1)) != 0) goto tmp2_end;
tmpMeta[0] = _OMC_LIT105;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outTypesTypeLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTypesTypeLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupFunctionsInEnv2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_boolean _followedQual, modelica_metatype _info, modelica_metatype *out_outTypesTypeLst)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outTypesTypeLst = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_boolean tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inPath;
tmp4_4 = _followedQual;
{
modelica_metatype _id = NULL;
modelica_metatype _path = NULL;
modelica_metatype _httypes = NULL;
modelica_metatype _ht = NULL;
modelica_metatype _res = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _env_2 = NULL;
modelica_string _pack = NULL;
modelica_string _str = NULL;
modelica_metatype _c = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _r = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[3])) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_str = tmpMeta[2];
_r = tmpMeta[4];
_cache = tmp4_1;
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _r));
_httypes = omc_Lookup_getHtTypes(threadData, _r);
tmpMeta[5] = omc_Lookup_lookupFunctionsInFrame(threadData, _cache, _ht, _httypes, _inEnv, _str, _info, &tmpMeta[2]);
_cache = tmpMeta[5];
if (listEmpty(tmpMeta[2])) goto goto_2;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_res = tmpMeta[2];
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _res;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_id = tmp4_3;
_r = tmpMeta[3];
_cache = tmp4_1;
tmp4 += 1;
tmpMeta[6] = omc_Lookup_lookupClass(threadData, _cache, _inEnv, _id, mmc_mk_none(), &tmpMeta[2], &tmpMeta[5]);
_cache = tmpMeta[6];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
_c = tmpMeta[2];
_str = tmpMeta[3];
_restr = tmpMeta[4];
_env_1 = tmpMeta[5];
tmp6 = omc_SCodeUtil_isFunctionRestriction(threadData, _restr);
if (1 != tmp6) goto goto_2;
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[7] = omc_InstFunction_implicitFunctionTypeInstantiation(threadData, _cache, _env_1, tmpMeta[6], _c, &tmpMeta[2], NULL);
_cache = tmpMeta[7];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (listEmpty(tmpMeta[3])) goto goto_2;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
_env_2 = tmpMeta[2];
_r = tmpMeta[4];
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _r));
_httypes = omc_Lookup_getHtTypes(threadData, _r);
tmpMeta[5] = omc_Lookup_lookupFunctionsInFrame(threadData, _cache, _ht, _httypes, _env_2, _str, _info, &tmpMeta[2]);
_cache = tmpMeta[5];
if (listEmpty(tmpMeta[2])) goto goto_2;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_res = tmpMeta[2];
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _res;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
_pack = tmpMeta[2];
_path = tmpMeta[3];
_r = tmpMeta[5];
_cache = tmp4_1;
tmpMeta[7] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _pack);
tmpMeta[8] = omc_Lookup_lookupClass(threadData, _cache, _inEnv, tmpMeta[7], mmc_mk_none(), &tmpMeta[2], &tmpMeta[6]);
_cache = tmpMeta[8];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
_c = tmpMeta[2];
_str = tmpMeta[3];
_encflag = tmpMeta[4];
_restr = tmpMeta[5];
_env_1 = tmpMeta[6];
_r = omc_FNode_child(threadData, omc_FGraph_lastScopeRef(threadData, _env_1), _str);
if(omc_FNode_isRefInstance(threadData, _r))
{
_cache = omc_Inst_getCachedInstance(threadData, _cache, _env_1, _str, _r ,&_env2);
}
else
{
_env2 = omc_FGraph_openScope(threadData, _env_1, _encflag, _str, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
_mod = omc_Mod_getClassModifier(threadData, _env_1, _str);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_partialInstClassIn(threadData, _cache, _env2, tmpMeta[2], _mod, _OMC_LIT6, _ci_state, _c, _OMC_LIT51, tmpMeta[3], ((modelica_integer) 0) ,&_env2 ,NULL ,NULL ,NULL);
}
tmpMeta[0+0] = omc_Lookup_lookupFunctionsInEnv2(threadData, _cache, _env2, _path, 1, _info, &tmpMeta[0+1]);
goto tmp3_done;
}
case 3: {
modelica_boolean tmp7;
if (0 != tmp4_4) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_r = tmpMeta[3];
_cache = tmp4_1;
_id = tmp4_3;
tmp7 = omc_FNode_isEncapsulated(threadData, omc_FNode_fromRef(threadData, _r));
if (0 != tmp7) goto goto_2;
_env = omc_FGraph_stripLastScopeRef(threadData, _inEnv, NULL);
tmpMeta[0+0] = omc_Lookup_lookupFunctionsInEnv2(threadData, _cache, _env, _id, 0, _info, &tmpMeta[0+1]);
goto tmp3_done;
}
case 4: {
modelica_boolean tmp8;
if (0 != tmp4_4) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,1) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_id = tmp4_3;
_r = tmpMeta[3];
_cache = tmp4_1;
tmp8 = omc_FNode_isEncapsulated(threadData, omc_FNode_fromRef(threadData, _r));
if (1 != tmp8) goto goto_2;
_env = omc_FGraph_topScope(threadData, _inEnv);
tmpMeta[0+0] = omc_Lookup_lookupFunctionsInEnv2(threadData, _cache, _env, _id, 1, _info, &tmpMeta[0+1]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outTypesTypeLst = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outTypesTypeLst) { *out_outTypesTypeLst = _outTypesTypeLst; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_lookupFunctionsInEnv2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _followedQual, modelica_metatype _info, modelica_metatype *out_outTypesTypeLst)
{
modelica_integer tmp1;
modelica_metatype _outCache = NULL;
tmp1 = mmc_unbox_integer(_followedQual);
_outCache = omc_Lookup_lookupFunctionsInEnv2(threadData, _inCache, _inEnv, _inPath, tmp1, _info, out_outTypesTypeLst);
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupFunctionsListInEnv(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inIds, modelica_metatype _info, modelica_metatype _inAcc, modelica_metatype *out_outTypesTypeLst)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outTypesTypeLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inIds;
tmp4_4 = _inAcc;
{
modelica_metatype _id = NULL;
modelica_metatype _res = NULL;
modelica_string _str = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _ids = NULL;
modelica_metatype _acc = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_3)) goto tmp3_end;
_cache = tmp4_1;
_acc = tmp4_4;
tmp4 += 2;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = listReverse(_acc);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_3);
tmpMeta[3] = MMC_CDR(tmp4_3);
_id = tmpMeta[2];
_ids = tmpMeta[3];
_cache = tmp4_1;
_env = tmp4_2;
_acc = tmp4_4;
tmpMeta[5] = omc_Lookup_lookupFunctionsInEnv(threadData, _cache, _env, _id, _info, &tmpMeta[2]);
_cache = tmpMeta[5];
if (listEmpty(tmpMeta[2])) goto goto_2;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_res = tmpMeta[2];
tmpMeta[0+0] = omc_Lookup_lookupFunctionsListInEnv(threadData, _cache, _env, _ids, _info, listAppend(_res, _acc), &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_3);
tmpMeta[3] = MMC_CDR(tmp4_3);
_id = tmpMeta[2];
_env = tmp4_2;
tmpMeta[2] = stringAppend(omc_AbsynUtil_pathString(threadData, _id, _OMC_LIT36, 1, 0),_OMC_LIT106);
tmpMeta[3] = stringAppend(tmpMeta[2],omc_FGraph_printGraphPathStr(threadData, _env));
_str = tmpMeta[3];
tmpMeta[2] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT109, tmpMeta[2], _info);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outTypesTypeLst = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outTypesTypeLst) { *out_outTypesTypeLst = _outTypesTypeLst; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupFunctionsInEnv(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inId, modelica_metatype _inInfo, modelica_metatype *out_outTypesTypeLst)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outTypesTypeLst = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inId;
tmp4_4 = _inInfo;
{
modelica_metatype _env_1 = NULL;
modelica_metatype _cenv = NULL;
modelica_metatype _env = NULL;
modelica_metatype _res = NULL;
modelica_metatype _names = NULL;
modelica_metatype _httypes = NULL;
modelica_metatype _ht = NULL;
modelica_string _str = NULL;
modelica_string _name = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _id = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 10; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
_name = tmpMeta[2];
_id = tmpMeta[3];
_cache = tmp4_1;
_env = tmp4_2;
_info = tmp4_4;
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT110);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Lookup_lookupVarIdent(threadData, _cache, _env, _name, tmpMeta[2] ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,&_cenv ,NULL);
_cache = omc_Lookup_lookupFunctionsInEnv(threadData, _cache, _cenv, _id, _info ,&_res);
omc_ErrorExt_rollBack(threadData, _OMC_LIT110);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _res;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,0,2) == 0) goto tmp3_end;
omc_ErrorExt_rollBack(threadData, _OMC_LIT110);
goto goto_2;
goto tmp3_done;
}
case 2: {
_cache = tmp4_1;
_env = tmp4_2;
_id = tmp4_3;
_env = omc_FGraph_selectScope(threadData, _env, _id);
_name = omc_AbsynUtil_pathLastIdent(threadData, _id);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta[0+0] = omc_Lookup_lookupFunctionsInEnv(threadData, _cache, _env, tmpMeta[2], _inInfo, &tmpMeta[0+1]);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
_str = tmpMeta[2];
_cache = tmp4_1;
_env = tmp4_2;
_info = tmp4_4;
omc_Static_elabBuiltinHandler(threadData, _str);
_env = omc_FGraph_topScope(threadData, _env);
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, omc_FGraph_lastScopeRef(threadData, _env)));
_httypes = omc_Lookup_getHtTypes(threadData, omc_FGraph_lastScopeRef(threadData, _env));
tmpMeta[0+0] = omc_Lookup_lookupFunctionsInFrame(threadData, _cache, _ht, _httypes, _env, _str, _info, &tmpMeta[0+1]);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (11 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT96), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
_str = tmpMeta[2];
_cache = tmp4_1;
_env = tmp4_2;
_env = omc_FGraph_topScope(threadData, _env);
_res = omc_Lookup_createGenericBuiltinFunctions(threadData, _env, _str);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _res;
goto tmp3_done;
}
case 5: {
modelica_boolean tmp6;
_cache = tmp4_1;
_env = tmp4_2;
_id = tmp4_3;
_info = tmp4_4;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmpMeta[2] = _id;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto goto_7;
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_2;}
tmpMeta[0+0] = omc_Lookup_lookupFunctionsInEnv2(threadData, _cache, _env, _id, 0, _info, &tmpMeta[0+1]);
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
_id = tmpMeta[2];
_cache = tmp4_1;
_env = tmp4_2;
_info = tmp4_4;
_env = omc_FGraph_topScope(threadData, _env);
tmpMeta[0+0] = omc_Lookup_lookupFunctionsInEnv2(threadData, _cache, _env, _id, 1, _info, &tmpMeta[0+1]);
goto tmp3_done;
}
case 7: {
_cache = tmp4_1;
_env = tmp4_2;
_id = tmp4_3;
{
modelica_metatype tmp10_1;
tmp10_1 = _id;
{
volatile mmc_switch_type tmp10;
int tmp11;
tmp10 = 0;
for (; tmp10 < 2; tmp10++) {
switch (MMC_SWITCH_CAST(tmp10)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp10_1,1,1) == 0) goto tmp9_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp10_1), 2));
if (5 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT117), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp9_end;
tmpMeta[2] = _OMC_LIT116;
goto tmp9_done;
}
case 1: {
tmpMeta[2] = _id;
goto tmp9_done;
}
}
goto tmp9_end;
tmp9_end: ;
}
goto goto_8;
goto_8:;
goto goto_2;
goto tmp9_done;
tmp9_done:;
}
}
_id = tmpMeta[2];
tmpMeta[7] = omc_Lookup_lookupClass(threadData, _cache, _env, _id, mmc_mk_none(), &tmpMeta[2], &tmpMeta[6]);
_cache = tmpMeta[7];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],4,1) == 0) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 9));
_names = tmpMeta[4];
_info = tmpMeta[5];
_env_1 = tmpMeta[6];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = omc_Lookup_lookupFunctionsListInEnv(threadData, _cache, _env_1, _names, _info, tmpMeta[2], &tmpMeta[0+1]);
goto tmp3_done;
}
case 8: {
_cache = tmp4_1;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 9: {
modelica_boolean tmp12;
_id = tmp4_3;
tmp12 = omc_Flags_isSet(threadData, _OMC_LIT30);
if (1 != tmp12) goto goto_2;
tmpMeta[2] = stringAppend(_OMC_LIT118,omc_AbsynUtil_pathString(threadData, _id, _OMC_LIT36, 1, 0));
omc_Debug_traceln(threadData, tmpMeta[2]);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 10) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outTypesTypeLst = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outTypesTypeLst) { *out_outTypesTypeLst = _outTypesTypeLst; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupIdent(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype *out_outVar, modelica_metatype *out_outElement, modelica_metatype *out_outMod, modelica_metatype *out_instStatus, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outVar = NULL;
modelica_metatype _outElement = NULL;
modelica_metatype _outMod = NULL;
modelica_metatype _instStatus = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_string tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inIdent;
{
modelica_metatype _fv = NULL;
modelica_metatype _c = NULL;
modelica_metatype _m = NULL;
modelica_metatype _i = NULL;
modelica_metatype _ht = NULL;
modelica_string _id = NULL;
modelica_metatype _e = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _r = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
_r = tmpMeta[7];
_cache = tmp4_1;
_id = tmp4_3;
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _r));
_fv = omc_Lookup_lookupVar2(threadData, _ht, _id, _inEnv ,&_c ,&_m ,&_i ,NULL);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _fv;
tmpMeta[0+2] = _c;
tmpMeta[0+3] = _m;
tmpMeta[0+4] = _i;
tmpMeta[0+5] = _inEnv;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
_cache = tmp4_1;
_id = tmp4_3;
_e = omc_FGraph_stripLastScopeRef(threadData, _inEnv, NULL);
tmpMeta[0+0] = omc_Lookup_lookupIdent(threadData, _cache, _e, _id, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outVar = tmpMeta[0+1];
_outElement = tmpMeta[0+2];
_outMod = tmpMeta[0+3];
_instStatus = tmpMeta[0+4];
_outEnv = tmpMeta[0+5];
_return: OMC_LABEL_UNUSED
if (out_outVar) { *out_outVar = _outVar; }
if (out_outElement) { *out_outElement = _outElement; }
if (out_outMod) { *out_outMod = _outMod; }
if (out_instStatus) { *out_instStatus = _instStatus; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupClassLocal(threadData_t *threadData, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype *out_outEnv)
{
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;
tmp4_1 = _inEnv;
tmp4_2 = _inIdent;
{
modelica_metatype _cl = NULL;
modelica_metatype _env = NULL;
modelica_metatype _ht = NULL;
modelica_string _id = NULL;
modelica_metatype _r = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_env = tmp4_1;
_r = tmpMeta[3];
_id = tmp4_2;
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _r));
_r = omc_FCore_RefTree_get(threadData, _ht, _id);
tmpMeta[2] = omc_FNode_fromRef(threadData, _r);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,5) == 0) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_cl = tmpMeta[4];
tmpMeta[0+0] = _cl;
tmpMeta[0+1] = _env;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outClass = tmpMeta[0+0];
_outEnv = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outClass;
}
DLLExport
modelica_metatype omc_Lookup_lookupIdentLocal(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype *out_outVar, modelica_metatype *out_outElement, modelica_metatype *out_outMod, modelica_metatype *out_instStatus, modelica_metatype *out_outComponentEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outVar = NULL;
modelica_metatype _outElement = NULL;
modelica_metatype _outMod = NULL;
modelica_metatype _instStatus = NULL;
modelica_metatype _outComponentEnv = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_string tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inIdent;
{
modelica_metatype _fv = NULL;
modelica_metatype _c = NULL;
modelica_metatype _m = NULL;
modelica_metatype _i = NULL;
modelica_metatype _r = NULL;
modelica_metatype _env = NULL;
modelica_metatype _componentEnv = NULL;
modelica_metatype _ht = NULL;
modelica_string _id = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
_r = tmpMeta[7];
_cache = tmp4_1;
_id = tmp4_3;
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _r));
_fv = omc_Lookup_lookupVar2(threadData, _ht, _id, _inEnv ,&_c ,&_m ,&_i ,&_componentEnv);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _fv;
tmpMeta[0+2] = _c;
tmpMeta[0+3] = _m;
tmpMeta[0+4] = _i;
tmpMeta[0+5] = _componentEnv;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmpMeta[6]);
tmpMeta[8] = MMC_CDR(tmpMeta[6]);
_r = tmpMeta[7];
_cache = tmp4_1;
_id = tmp4_3;
tmp6 = omc_FNode_isImplicitRefName(threadData, _r);
if (1 != tmp6) goto goto_2;
_env = omc_FGraph_stripLastScopeRef(threadData, _inEnv, NULL);
tmpMeta[0+0] = omc_Lookup_lookupIdentLocal(threadData, _cache, _env, _id, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outVar = tmpMeta[0+1];
_outElement = tmpMeta[0+2];
_outMod = tmpMeta[0+3];
_instStatus = tmpMeta[0+4];
_outComponentEnv = tmpMeta[0+5];
_return: OMC_LABEL_UNUSED
if (out_outVar) { *out_outVar = _outVar; }
if (out_outElement) { *out_outElement = _outElement; }
if (out_outMod) { *out_outMod = _outMod; }
if (out_instStatus) { *out_instStatus = _instStatus; }
if (out_outComponentEnv) { *out_outComponentEnv = _outComponentEnv; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupVarLocal(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inComponentRef, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_splicedExpData, modelica_metatype *out_outClassEnv, modelica_metatype *out_outComponentEnv, modelica_string *out_name)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outAttributes = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outBinding = NULL;
modelica_metatype _constOfForIteratorRange = NULL;
modelica_metatype _splicedExpData = NULL;
modelica_metatype _outClassEnv = NULL;
modelica_metatype _outComponentEnv = NULL;
modelica_string _name = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outCache = omc_Lookup_lookupVarInternal(threadData, _inCache, _inEnv, _inComponentRef, _OMC_LIT119 ,&_outAttributes ,&_outType ,&_outBinding ,&_constOfForIteratorRange ,&_splicedExpData ,&_outClassEnv ,&_outComponentEnv ,&_name);
_return: OMC_LABEL_UNUSED
if (out_outAttributes) { *out_outAttributes = _outAttributes; }
if (out_outType) { *out_outType = _outType; }
if (out_outBinding) { *out_outBinding = _outBinding; }
if (out_constOfForIteratorRange) { *out_constOfForIteratorRange = _constOfForIteratorRange; }
if (out_splicedExpData) { *out_splicedExpData = _splicedExpData; }
if (out_outClassEnv) { *out_outClassEnv = _outClassEnv; }
if (out_outComponentEnv) { *out_outComponentEnv = _outComponentEnv; }
if (out_name) { *out_name = _name; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupVarInPackagesIdent(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _id, modelica_metatype _ss, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype *out_outClassEnv, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_splicedExpData, modelica_metatype *out_outComponentEnv, modelica_string *out_name)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClassEnv = NULL;
modelica_metatype _outAttributes = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outBinding = NULL;
modelica_metatype _constOfForIteratorRange = NULL;
modelica_metatype _splicedExpData = NULL;
modelica_metatype _outComponentEnv = NULL;
modelica_string _name = NULL;
modelica_string tmp1_c8 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inPrevFrames;
{
modelica_metatype _env = NULL;
modelica_metatype _p_env = NULL;
modelica_metatype _componentEnv = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _fs = NULL;
modelica_metatype _node = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _bind = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _f = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _cnstForRange = NULL;
modelica_boolean _unique;
modelica_metatype _ht = NULL;
modelica_metatype _qimports = NULL;
modelica_metatype _uqimports = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cache = tmp4_1;
_env = tmp4_2;
_cache = omc_Lookup_lookupVarInternalIdent(threadData, _cache, _env, _id, _ss, _OMC_LIT119 ,&_attr ,&_ty ,&_bind ,&_cnstForRange ,&_splicedExpData ,NULL ,&_componentEnv ,&_name);
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = _attr;
tmpMeta[0+3] = _ty;
tmpMeta[0+4] = _bind;
tmpMeta[0+5] = _cnstForRange;
tmpMeta[0+6] = _splicedExpData;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
case 1: {
_cache = tmp4_1;
_env = tmp4_2;
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, omc_FGraph_lastScopeRef(threadData, _env)));
_cache = omc_Lookup_lookupVarFIdent(threadData, _cache, _ht, _id, _ss, _env ,&_attr ,&_ty ,&_bind ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = _attr;
tmpMeta[0+3] = _ty;
tmpMeta[0+4] = _bind;
tmpMeta[0+5] = _cnstForRange;
tmpMeta[0+6] = _splicedExpData;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
case 2: {
_cache = tmp4_1;
_env = tmp4_2;
_prevFrames = tmp4_3;
_node = omc_FNode_fromRef(threadData, omc_FGraph_lastScopeRef(threadData, _env));
_qimports = omc_FNode_imports(threadData, _node ,&_uqimports);
{
volatile modelica_metatype tmp8_1;volatile modelica_metatype tmp8_2;
tmp8_1 = _qimports;
tmp8_2 = _uqimports;
{
volatile mmc_switch_type tmp8;
int tmp9;
tmp8 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp7_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp8 < 2; tmp8++) {
switch (MMC_SWITCH_CAST(tmp8)) {
case 0: {
if (listEmpty(tmp8_1)) goto tmp7_end;
tmpMeta[9] = MMC_CAR(tmp8_1);
tmpMeta[10] = MMC_CDR(tmp8_1);
_cr = omc_Lookup_lookupQualifiedImportedVarInFrame(threadData, _qimports, _id);
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
_cr = ((stringEqual(omc_FNode_name(threadData, omc_FNode_fromRef(threadData, omc_FGraph_lastScopeRef(threadData, _env))), omc_ComponentReference_crefFirstIdent(threadData, _cr)))?omc_ComponentReference_crefStripFirstIdent(threadData, _cr):_cr);
tmpMeta[9] = listReverse(omc_FGraph_currentScope(threadData, _env));
if (listEmpty(tmpMeta[9])) goto goto_6;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
_f = tmpMeta[10];
_prevFrames = tmpMeta[11];
tmpMeta[9] = mmc_mk_cons(_f, MMC_REFSTRUCTLIT(mmc_nil));
_env = omc_FGraph_setScope(threadData, _env, tmpMeta[9]);
_cache = omc_Lookup_lookupVarInPackages(threadData, _cache, _env, _cr, _prevFrames, _inState ,&_p_env ,&_attr ,&_ty ,&_bind ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
goto tmp7_done;
}
case 1: {
if (listEmpty(tmp8_2)) goto tmp7_end;
tmpMeta[9] = MMC_CAR(tmp8_2);
tmpMeta[10] = MMC_CDR(tmp8_2);
_cache = omc_Lookup_lookupUnqualifiedImportedVarInFrame(threadData, _cache, _uqimports, _env, _id ,&_p_env ,&_attr ,&_ty ,&_bind ,&_cnstForRange ,&_unique ,&_splicedExpData ,&_componentEnv ,&_name);
omc_Lookup_reportSeveralNamesError(threadData, _unique, _id);
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
tmp7_done:
(void)tmp8;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp7_done2;
goto_6:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp8 < 2) {
goto tmp7_top;
}
goto goto_2;
tmp7_done2:;
}
}
;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _p_env;
tmpMeta[0+2] = _attr;
tmpMeta[0+3] = _ty;
tmpMeta[0+4] = _bind;
tmpMeta[0+5] = _cnstForRange;
tmpMeta[0+6] = _splicedExpData;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
case 3: {
modelica_integer tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
_f = tmpMeta[10];
_fs = tmpMeta[11];
_cache = tmp4_1;
_prevFrames = tmp4_3;
tmpMeta[9] = omc_Mutable_access(threadData, _inState);
tmp10 = mmc_unbox_integer(tmpMeta[9]);
if (0 != tmp10) goto goto_2;
_env = omc_FGraph_setScope(threadData, _inEnv, _fs);
tmpMeta[9] = mmc_mk_cons(_f, _prevFrames);
tmpMeta[0+0] = omc_Lookup_lookupVarInPackagesIdent(threadData, _cache, _env, _id, _ss, tmpMeta[9], _inState, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5], &tmpMeta[0+6], &tmpMeta[0+7], &tmp1_c8);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outClassEnv = tmpMeta[0+1];
_outAttributes = tmpMeta[0+2];
_outType = tmpMeta[0+3];
_outBinding = tmpMeta[0+4];
_constOfForIteratorRange = tmpMeta[0+5];
_splicedExpData = tmpMeta[0+6];
_outComponentEnv = tmpMeta[0+7];
_name = tmp1_c8;
_return: OMC_LABEL_UNUSED
if (out_outClassEnv) { *out_outClassEnv = _outClassEnv; }
if (out_outAttributes) { *out_outAttributes = _outAttributes; }
if (out_outType) { *out_outType = _outType; }
if (out_outBinding) { *out_outBinding = _outBinding; }
if (out_constOfForIteratorRange) { *out_constOfForIteratorRange = _constOfForIteratorRange; }
if (out_splicedExpData) { *out_splicedExpData = _splicedExpData; }
if (out_outComponentEnv) { *out_outComponentEnv = _outComponentEnv; }
if (out_name) { *out_name = _name; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupVarInPackages(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inComponentRef, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype *out_outClassEnv, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_splicedExpData, modelica_metatype *out_outComponentEnv, modelica_string *out_name)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClassEnv = NULL;
modelica_metatype _outAttributes = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outBinding = NULL;
modelica_metatype _constOfForIteratorRange = NULL;
modelica_metatype _splicedExpData = NULL;
modelica_metatype _outComponentEnv = NULL;
modelica_string _name = NULL;
modelica_string tmp1_c8 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[16] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inComponentRef;
tmp4_4 = _inPrevFrames;
{
modelica_metatype _c = NULL;
modelica_string _n = NULL;
modelica_string _id = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _r = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _env3 = NULL;
modelica_metatype _env5 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _p_env = NULL;
modelica_metatype _componentEnv = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _fs = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _bind = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _f = NULL;
modelica_metatype _rr = NULL;
modelica_metatype _of = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _cnstForRange = NULL;
modelica_metatype _ht = NULL;
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,0,4) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
if (!listEmpty(tmpMeta[10])) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 5));
_id = tmpMeta[9];
_cref = tmpMeta[11];
_cache = tmp4_1;
_env = tmp4_2;
_prevFrames = tmp4_4;
tmp4 += 1;
_of = omc_Lookup_lookupPrevFrames(threadData, _id, _prevFrames ,&_prevFrames);
{
modelica_metatype tmp8_1;
tmp8_1 = _of;
{
volatile mmc_switch_type tmp8;
int tmp9;
tmp8 = 0;
for (; tmp8 < 2; tmp8++) {
switch (MMC_SWITCH_CAST(tmp8)) {
case 0: {
if (optionNone(tmp8_1)) goto tmp7_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp8_1), 1));
_f = tmpMeta[9];
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
_env5 = omc_FGraph_pushScopeRef(threadData, _env, _f);
goto tmp7_done;
}
case 1: {
if (!optionNone(tmp8_1)) goto tmp7_end;
tmpMeta[15] = omc_Lookup_lookupClassInEnv(threadData, _cache, _env, _id, _prevFrames, omc_Mutable_create(threadData, mmc_mk_boolean(1)), mmc_mk_none(), &tmpMeta[9], &tmpMeta[13], &tmpMeta[14]);
_cache = tmpMeta[15];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],2,8) == 0) goto goto_6;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 4));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 6));
_c = tmpMeta[9];
_n = tmpMeta[10];
_encflag = tmpMeta[11];
_r = tmpMeta[12];
_env2 = tmpMeta[13];
_prevFrames = tmpMeta[14];
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
_rr = omc_FNode_child(threadData, omc_FGraph_lastScopeRef(threadData, _env2), _id);
if(omc_FNode_isRefInstance(threadData, _rr))
{
_cache = omc_Inst_getCachedInstance(threadData, _cache, _env2, _id, _rr ,&_env5);
}
else
{
_env3 = omc_FGraph_openScope(threadData, _env2, _encflag, _n, omc_FGraph_restrictionToScopeType(threadData, _r));
_ci_state = omc_ClassInf_start(threadData, _r, omc_FGraph_getGraphName(threadData, _env3));
_mod = omc_Mod_getClassModifier(threadData, _env2, _n);
tmpMeta[9] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[10] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_instClassIn(threadData, _cache, _env3, tmpMeta[9], _OMC_LIT4, _mod, _OMC_LIT6, _ci_state, _c, _OMC_LIT51, tmpMeta[10], 0, _OMC_LIT10, _OMC_LIT11, _OMC_LIT14, mmc_mk_none() ,&_env5 ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL);
}
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
goto_6:;
goto goto_2;
goto tmp7_done;
tmp7_done:;
}
}
;
_cache = omc_Lookup_lookupVarInPackages(threadData, _cache, _env5, _cref, _prevFrames, _inState ,&_p_env ,&_attr ,&_ty ,&_bind ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
_splicedExpData = omc_Lookup_prefixSplicedExp(threadData, omc_ComponentReference_crefFirstCref(threadData, _inComponentRef), _splicedExpData);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _p_env;
tmpMeta[0+2] = _attr;
tmpMeta[0+3] = _ty;
tmpMeta[0+4] = _bind;
tmpMeta[0+5] = _cnstForRange;
tmpMeta[0+6] = _splicedExpData;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,3) == 0) goto tmp3_end;
_cr = tmp4_3;
_cache = tmp4_1;
_env = tmp4_2;
tmp4 += 2;
tmpMeta[0+0] = omc_Lookup_lookupVarInPackagesIdent(threadData, _cache, _env, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 4))), _inPrevFrames, _inState, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5], &tmpMeta[0+6], &tmpMeta[0+7], &tmp1_c8);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,0,4) == 0) goto tmp3_end;
_cr = tmp4_3;
_cache = tmp4_1;
_env = tmp4_2;
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, omc_FGraph_lastScopeRef(threadData, _env)));
_cache = omc_Lookup_lookupVarF(threadData, _cache, _ht, _cr, _env ,&_attr ,&_ty ,&_bind ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _env;
tmpMeta[0+2] = _attr;
tmpMeta[0+3] = _ty;
tmpMeta[0+4] = _bind;
tmpMeta[0+5] = _cnstForRange;
tmpMeta[0+6] = _splicedExpData;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
case 3: {
modelica_integer tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,0,4) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
_cr = tmp4_3;
_f = tmpMeta[10];
_fs = tmpMeta[11];
_cache = tmp4_1;
_prevFrames = tmp4_4;
tmpMeta[9] = omc_Mutable_access(threadData, _inState);
tmp10 = mmc_unbox_integer(tmpMeta[9]);
if (0 != tmp10) goto goto_2;
_env = omc_FGraph_setScope(threadData, _inEnv, _fs);
tmpMeta[9] = mmc_mk_cons(_f, _prevFrames);
tmpMeta[0+0] = omc_Lookup_lookupVarInPackages(threadData, _cache, _env, _cr, tmpMeta[9], _inState, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5], &tmpMeta[0+6], &tmpMeta[0+7], &tmp1_c8);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outClassEnv = tmpMeta[0+1];
_outAttributes = tmpMeta[0+2];
_outType = tmpMeta[0+3];
_outBinding = tmpMeta[0+4];
_constOfForIteratorRange = tmpMeta[0+5];
_splicedExpData = tmpMeta[0+6];
_outComponentEnv = tmpMeta[0+7];
_name = tmp1_c8;
_return: OMC_LABEL_UNUSED
if (out_outClassEnv) { *out_outClassEnv = _outClassEnv; }
if (out_outAttributes) { *out_outAttributes = _outAttributes; }
if (out_outType) { *out_outType = _outType; }
if (out_outBinding) { *out_outBinding = _outBinding; }
if (out_constOfForIteratorRange) { *out_constOfForIteratorRange = _constOfForIteratorRange; }
if (out_splicedExpData) { *out_splicedExpData = _splicedExpData; }
if (out_outComponentEnv) { *out_outComponentEnv = _outComponentEnv; }
if (out_name) { *out_name = _name; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_Lookup_frameIsImplAddedScope(threadData_t *threadData, modelica_metatype _f)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _f;
{
modelica_string _oname = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_oname = tmpMeta[0];
tmp1 = omc_FCore_isImplicitScope(threadData, _oname);
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_frameIsImplAddedScope(threadData_t *threadData, modelica_metatype _f)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_Lookup_frameIsImplAddedScope(threadData, _f);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_metatype omc_Lookup_lookupVarInternalIdent(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _ident, modelica_metatype _ss, modelica_metatype _searchStrategy, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_splicedExpData, modelica_metatype *out_outClassEnv, modelica_metatype *out_outComponentEnv, modelica_string *out_name)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outAttributes = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outBinding = NULL;
modelica_metatype _constOfForIteratorRange = NULL;
modelica_metatype _splicedExpData = NULL;
modelica_metatype _outClassEnv = NULL;
modelica_metatype _outComponentEnv = NULL;
modelica_string _name = NULL;
modelica_string tmp1_c8 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[14] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _searchStrategy;
{
modelica_metatype _attr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _binding = NULL;
modelica_metatype _ht = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _cnstForRange = NULL;
modelica_metatype _env = NULL;
modelica_metatype _componentEnv = NULL;
modelica_metatype _r = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
_r = tmpMeta[10];
_cache = tmp4_1;
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _r));
_cache = omc_Lookup_lookupVarFIdent(threadData, _cache, _ht, _ident, _ss, _inEnv ,&_attr ,&_ty ,&_binding ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _attr;
tmpMeta[0+2] = _ty;
tmpMeta[0+3] = _binding;
tmpMeta[0+4] = _cnstForRange;
tmpMeta[0+5] = _splicedExpData;
tmpMeta[0+6] = _inEnv;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
_r = tmpMeta[10];
_cache = tmp4_1;
tmp6 = omc_FNode_isImplicitRefName(threadData, _r);
if (1 != tmp6) goto goto_2;
_env = omc_FGraph_stripLastScopeRef(threadData, _inEnv, NULL);
tmpMeta[0+0] = omc_Lookup_lookupVarInternalIdent(threadData, _cache, _env, _ident, _ss, _searchStrategy, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5], &tmpMeta[0+6], &tmpMeta[0+7], &tmp1_c8);
goto tmp3_done;
}
case 2: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
if (listEmpty(tmpMeta[11])) goto tmp3_end;
tmpMeta[12] = MMC_CAR(tmpMeta[11]);
tmpMeta[13] = MMC_CDR(tmpMeta[11]);
_cache = tmp4_1;
tmp7 = omc_Builtin_variableNameIsBuiltin(threadData, _ident);
if (1 != tmp7) goto goto_2;
_env = omc_FGraph_topScope(threadData, _inEnv);
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, omc_FGraph_lastScopeRef(threadData, _env)));
_cache = omc_Lookup_lookupVarFIdent(threadData, _cache, _ht, _ident, _ss, _env ,&_attr ,&_ty ,&_binding ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _attr;
tmpMeta[0+2] = _ty;
tmpMeta[0+3] = _binding;
tmpMeta[0+4] = _cnstForRange;
tmpMeta[0+5] = _splicedExpData;
tmpMeta[0+6] = _env;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outAttributes = tmpMeta[0+1];
_outType = tmpMeta[0+2];
_outBinding = tmpMeta[0+3];
_constOfForIteratorRange = tmpMeta[0+4];
_splicedExpData = tmpMeta[0+5];
_outClassEnv = tmpMeta[0+6];
_outComponentEnv = tmpMeta[0+7];
_name = tmp1_c8;
_return: OMC_LABEL_UNUSED
if (out_outAttributes) { *out_outAttributes = _outAttributes; }
if (out_outType) { *out_outType = _outType; }
if (out_outBinding) { *out_outBinding = _outBinding; }
if (out_constOfForIteratorRange) { *out_constOfForIteratorRange = _constOfForIteratorRange; }
if (out_splicedExpData) { *out_splicedExpData = _splicedExpData; }
if (out_outClassEnv) { *out_outClassEnv = _outClassEnv; }
if (out_outComponentEnv) { *out_outComponentEnv = _outComponentEnv; }
if (out_name) { *out_name = _name; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupVarInternal(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inComponentRef, modelica_metatype _searchStrategy, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_splicedExpData, modelica_metatype *out_outClassEnv, modelica_metatype *out_outComponentEnv, modelica_string *out_name)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outAttributes = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outBinding = NULL;
modelica_metatype _constOfForIteratorRange = NULL;
modelica_metatype _splicedExpData = NULL;
modelica_metatype _outClassEnv = NULL;
modelica_metatype _outComponentEnv = NULL;
modelica_string _name = NULL;
modelica_string tmp1_c8 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[14] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inComponentRef;
tmp4_4 = _searchStrategy;
{
modelica_metatype _attr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _binding = NULL;
modelica_metatype _ht = NULL;
modelica_metatype _ref = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _cnstForRange = NULL;
modelica_metatype _env = NULL;
modelica_metatype _componentEnv = NULL;
modelica_metatype _r = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
_r = tmpMeta[10];
_cache = tmp4_1;
_ref = tmp4_3;
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _r));
_cache = omc_Lookup_lookupVarF(threadData, _cache, _ht, _ref, _inEnv ,&_attr ,&_ty ,&_binding ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _attr;
tmpMeta[0+2] = _ty;
tmpMeta[0+3] = _binding;
tmpMeta[0+4] = _cnstForRange;
tmpMeta[0+5] = _splicedExpData;
tmpMeta[0+6] = _inEnv;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
_r = tmpMeta[10];
_cache = tmp4_1;
_ref = tmp4_3;
tmp6 = omc_FNode_isImplicitRefName(threadData, _r);
if (1 != tmp6) goto goto_2;
_env = omc_FGraph_stripLastScopeRef(threadData, _inEnv, NULL);
tmpMeta[0+0] = omc_Lookup_lookupVarInternal(threadData, _cache, _env, _ref, _searchStrategy, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5], &tmpMeta[0+6], &tmpMeta[0+7], &tmp1_c8);
goto tmp3_done;
}
case 2: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_4,1,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
if (listEmpty(tmpMeta[9])) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmpMeta[9]);
tmpMeta[11] = MMC_CDR(tmpMeta[9]);
if (listEmpty(tmpMeta[11])) goto tmp3_end;
tmpMeta[12] = MMC_CAR(tmpMeta[11]);
tmpMeta[13] = MMC_CDR(tmpMeta[11]);
_cache = tmp4_1;
_ref = tmp4_3;
tmp7 = omc_Builtin_variableIsBuiltin(threadData, _ref);
if (1 != tmp7) goto goto_2;
_env = omc_FGraph_topScope(threadData, _inEnv);
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, omc_FGraph_lastScopeRef(threadData, _env)));
_cache = omc_Lookup_lookupVarF(threadData, _cache, _ht, _ref, _env ,&_attr ,&_ty ,&_binding ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _attr;
tmpMeta[0+2] = _ty;
tmpMeta[0+3] = _binding;
tmpMeta[0+4] = _cnstForRange;
tmpMeta[0+5] = _splicedExpData;
tmpMeta[0+6] = _env;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outAttributes = tmpMeta[0+1];
_outType = tmpMeta[0+2];
_outBinding = tmpMeta[0+3];
_constOfForIteratorRange = tmpMeta[0+4];
_splicedExpData = tmpMeta[0+5];
_outClassEnv = tmpMeta[0+6];
_outComponentEnv = tmpMeta[0+7];
_name = tmp1_c8;
_return: OMC_LABEL_UNUSED
if (out_outAttributes) { *out_outAttributes = _outAttributes; }
if (out_outType) { *out_outType = _outType; }
if (out_outBinding) { *out_outBinding = _outBinding; }
if (out_constOfForIteratorRange) { *out_constOfForIteratorRange = _constOfForIteratorRange; }
if (out_splicedExpData) { *out_splicedExpData = _splicedExpData; }
if (out_outClassEnv) { *out_outClassEnv = _outClassEnv; }
if (out_outComponentEnv) { *out_outComponentEnv = _outComponentEnv; }
if (out_name) { *out_name = _name; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC void omc_Lookup_checkPackageVariableConstant(threadData_t *threadData, modelica_metatype _parentEnv, modelica_metatype _classEnv, modelica_metatype _componentEnv, modelica_metatype _attr, modelica_metatype _tp, modelica_metatype _cref)
{
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _attr;
{
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,0) == 0) goto tmp2_end;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
_s1 = omc_ComponentReference_printComponentRefStr(threadData, _cref);
_s2 = omc_FGraph_printGraphPathStr(threadData, _classEnv);
tmpMeta[0] = mmc_mk_cons(_s1, mmc_mk_cons(_s2, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addMessage(threadData, _OMC_LIT122, tmpMeta[0]);
tmp5 = omc_Flags_isSet(threadData, _OMC_LIT30);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = stringAppend(_OMC_LIT123,_s1);
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT124);
tmpMeta[2] = stringAppend(tmpMeta[1],_s2);
omc_Debug_traceln(threadData, tmpMeta[2]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
DLLExport
modelica_metatype omc_Lookup_lookupVarIdent(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _ident, modelica_metatype _ss, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_outSplicedExpData, modelica_metatype *out_outClassEnv, modelica_metatype *out_outComponentEnv, modelica_string *out_name)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outAttributes = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outBinding = NULL;
modelica_metatype _constOfForIteratorRange = NULL;
modelica_metatype _outSplicedExpData = NULL;
modelica_metatype _outClassEnv = NULL;
modelica_metatype _outComponentEnv = NULL;
modelica_string _name = NULL;
modelica_string tmp1_c8 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
{
modelica_metatype _attr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _binding = NULL;
modelica_metatype _env = NULL;
modelica_metatype _componentEnv = NULL;
modelica_metatype _classEnv = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _splicedExpData = NULL;
modelica_metatype _cnstForRange = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cache = tmp4_1;
_env = tmp4_2;
tmpMeta[0+0] = omc_Lookup_lookupVarInternalIdent(threadData, _cache, _env, _ident, _ss, _OMC_LIT125, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5], &tmpMeta[0+6], &tmpMeta[0+7], &tmp1_c8);
goto tmp3_done;
}
case 1: {
_cache = tmp4_1;
_env = tmp4_2;
_cref = omc_ComponentReference_makeCrefIdent(threadData, _ident, _OMC_LIT126, _ss);
tmpMeta[9] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Lookup_lookupVarInPackages(threadData, _cache, _env, _cref, tmpMeta[9], omc_Mutable_create(threadData, mmc_mk_boolean(0)) ,&_classEnv ,&_attr ,&_ty ,&_binding ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
omc_Lookup_checkPackageVariableConstant(threadData, _env, _classEnv, _componentEnv, _attr, _ty, _cref);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _attr;
tmpMeta[0+2] = _ty;
tmpMeta[0+3] = _binding;
tmpMeta[0+4] = _cnstForRange;
tmpMeta[0+5] = _splicedExpData;
tmpMeta[0+6] = _classEnv;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outAttributes = tmpMeta[0+1];
_outType = tmpMeta[0+2];
_outBinding = tmpMeta[0+3];
_constOfForIteratorRange = tmpMeta[0+4];
_outSplicedExpData = tmpMeta[0+5];
_outClassEnv = tmpMeta[0+6];
_outComponentEnv = tmpMeta[0+7];
_name = tmp1_c8;
_return: OMC_LABEL_UNUSED
if (out_outAttributes) { *out_outAttributes = _outAttributes; }
if (out_outType) { *out_outType = _outType; }
if (out_outBinding) { *out_outBinding = _outBinding; }
if (out_constOfForIteratorRange) { *out_constOfForIteratorRange = _constOfForIteratorRange; }
if (out_outSplicedExpData) { *out_outSplicedExpData = _outSplicedExpData; }
if (out_outClassEnv) { *out_outClassEnv = _outClassEnv; }
if (out_outComponentEnv) { *out_outComponentEnv = _outComponentEnv; }
if (out_name) { *out_name = _name; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupVar(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inComponentRef, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_outSplicedExpData, modelica_metatype *out_outClassEnv, modelica_metatype *out_outComponentEnv, modelica_string *out_name)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outAttributes = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outBinding = NULL;
modelica_metatype _constOfForIteratorRange = NULL;
modelica_metatype _outSplicedExpData = NULL;
modelica_metatype _outClassEnv = NULL;
modelica_metatype _outComponentEnv = NULL;
modelica_string _name = NULL;
modelica_string tmp1_c8 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inComponentRef;
{
modelica_metatype _attr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _binding = NULL;
modelica_metatype _env = NULL;
modelica_metatype _componentEnv = NULL;
modelica_metatype _classEnv = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _splicedExpData = NULL;
modelica_metatype _cnstForRange = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cache = tmp4_1;
_env = tmp4_2;
_cref = tmp4_3;
tmpMeta[0+0] = omc_Lookup_lookupVarInternal(threadData, _cache, _env, _cref, _OMC_LIT125, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5], &tmpMeta[0+6], &tmpMeta[0+7], &tmp1_c8);
goto tmp3_done;
}
case 1: {
_cache = tmp4_1;
_env = tmp4_2;
_cref = tmp4_3;
tmpMeta[9] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Lookup_lookupVarInPackages(threadData, _cache, _env, _cref, tmpMeta[9], omc_Mutable_create(threadData, mmc_mk_boolean(0)) ,&_classEnv ,&_attr ,&_ty ,&_binding ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
omc_Lookup_checkPackageVariableConstant(threadData, _env, _classEnv, _componentEnv, _attr, _ty, _cref);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _attr;
tmpMeta[0+2] = _ty;
tmpMeta[0+3] = _binding;
tmpMeta[0+4] = _cnstForRange;
tmpMeta[0+5] = _splicedExpData;
tmpMeta[0+6] = _classEnv;
tmpMeta[0+7] = _componentEnv;
tmp1_c8 = _name;
goto tmp3_done;
}
case 2: {
_cache = tmp4_1;
_env = tmp4_2;
if (!omc_Config_getGraphicsExpMode(threadData)) goto tmp3_end;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _OMC_LIT129;
tmpMeta[0+2] = _OMC_LIT126;
tmpMeta[0+3] = _OMC_LIT130;
tmpMeta[0+4] = mmc_mk_none();
tmpMeta[0+5] = _OMC_LIT131;
tmpMeta[0+6] = _env;
tmpMeta[0+7] = _env;
tmp1_c8 = _OMC_LIT132;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outAttributes = tmpMeta[0+1];
_outType = tmpMeta[0+2];
_outBinding = tmpMeta[0+3];
_constOfForIteratorRange = tmpMeta[0+4];
_outSplicedExpData = tmpMeta[0+5];
_outClassEnv = tmpMeta[0+6];
_outComponentEnv = tmpMeta[0+7];
_name = tmp1_c8;
_return: OMC_LABEL_UNUSED
if (out_outAttributes) { *out_outAttributes = _outAttributes; }
if (out_outType) { *out_outType = _outType; }
if (out_outBinding) { *out_outBinding = _outBinding; }
if (out_constOfForIteratorRange) { *out_constOfForIteratorRange = _constOfForIteratorRange; }
if (out_outSplicedExpData) { *out_outSplicedExpData = _outSplicedExpData; }
if (out_outClassEnv) { *out_outClassEnv = _outClassEnv; }
if (out_outComponentEnv) { *out_outComponentEnv = _outComponentEnv; }
if (out_name) { *out_name = _name; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupConnectorVar2(threadData_t *threadData, modelica_metatype _env, modelica_string _name, modelica_metatype *out_status, modelica_metatype *out_compEnv)
{
jmp_buf *old_mmc_jumper = threadData->mmc_jumper;
modelica_metatype _var = NULL;
modelica_metatype _status = NULL;
modelica_metatype _compEnv = NULL;
modelica_metatype _scope = NULL;
modelica_metatype _ht = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _env;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_scope = tmpMeta[1];
{
modelica_metatype _r;
for (tmpMeta[0] = _scope; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_r = MMC_CAR(tmpMeta[0]);
_ht = omc_FNode_children(threadData, omc_FNode_fromRef(threadData, _r));
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_var = omc_Lookup_lookupVar2(threadData, _ht, _name, _env ,NULL ,NULL ,&_status ,&_compEnv);
goto _return;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
tmp5 = omc_FNode_isImplicitRefName(threadData, _r);
if (1 != tmp5) goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
}
}
MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
if (out_status) { *out_status = _status; }
if (out_compEnv) { *out_compEnv = _compEnv; }
threadData->mmc_jumper = old_mmc_jumper;
return _var;
}
DLLExport
modelica_metatype omc_Lookup_lookupConnectorVar(threadData_t *threadData, modelica_metatype _env, modelica_metatype _cr, modelica_boolean _firstId, modelica_metatype *out_ty, modelica_metatype *out_status, modelica_boolean *out_isExpandable)
{
modelica_metatype _attr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _status = NULL;
modelica_boolean _isExpandable;
modelica_metatype _comp_env = NULL;
modelica_metatype _parent_attr = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_isExpandable = 0;
{
modelica_metatype tmp4_1;
tmp4_1 = _cr;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[4] = omc_Lookup_lookupConnectorVar2(threadData, _env, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 2))), &tmpMeta[3], NULL);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 4));
_attr = tmpMeta[5];
_ty = tmpMeta[6];
_status = tmpMeta[3];
_ty = omc_Lookup_checkSubscripts(threadData, _ty, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 4))));
tmpMeta[0+0] = _attr;
tmpMeta[0+1] = _ty;
tmpMeta[0+2] = _status;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta[5] = omc_Lookup_lookupConnectorVar2(threadData, _env, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 2))), &tmpMeta[3], &tmpMeta[4]);
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
_parent_attr = tmpMeta[6];
_ty = tmpMeta[7];
_status = tmpMeta[3];
_comp_env = tmpMeta[4];
if(omc_FCore_isDeletedComp(threadData, _status))
{
_attr = _parent_attr;
}
else
{
{
{
volatile mmc_switch_type tmp8;
int tmp9;
tmp8 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp7_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp8 < 2; tmp8++) {
switch (MMC_SWITCH_CAST(tmp8)) {
case 0: {
_attr = omc_Lookup_lookupConnectorVar(threadData, _comp_env, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cr), 5))), 0 ,&_ty ,&_status ,&_isExpandable);
goto tmp7_done;
}
case 1: {
if(omc_Types_isExpandableConnector(threadData, _ty))
{
_attr = _parent_attr;
_isExpandable = 1;
}
else
{
goto goto_6;
}
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
tmp7_done:
(void)tmp8;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp7_done2;
goto_6:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp8 < 2) {
goto tmp7_top;
}
goto goto_2;
tmp7_done2:;
}
}
;
_attr = omc_DAEUtil_setAttrVariability(threadData, _attr, omc_SCodeUtil_variabilityOr(threadData, omc_DAEUtil_getAttrVariability(threadData, _attr), omc_DAEUtil_getAttrVariability(threadData, _parent_attr)));
if(_firstId)
{
_attr = omc_DAEUtil_setAttrInnerOuter(threadData, _attr, omc_DAEUtil_getAttrInnerOuter(threadData, _parent_attr));
}
}
tmpMeta[0+0] = _attr;
tmpMeta[0+1] = _ty;
tmpMeta[0+2] = _status;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_attr = tmpMeta[0+0];
_ty = tmpMeta[0+1];
_status = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_ty) { *out_ty = _ty; }
if (out_status) { *out_status = _status; }
if (out_isExpandable) { *out_isExpandable = _isExpandable; }
return _attr;
}
modelica_metatype boxptr_Lookup_lookupConnectorVar(threadData_t *threadData, modelica_metatype _env, modelica_metatype _cr, modelica_metatype _firstId, modelica_metatype *out_ty, modelica_metatype *out_status, modelica_metatype *out_isExpandable)
{
modelica_integer tmp1;
modelica_boolean _isExpandable;
modelica_metatype _attr = NULL;
tmp1 = mmc_unbox_integer(_firstId);
_attr = omc_Lookup_lookupConnectorVar(threadData, _env, _cr, tmp1, out_ty, out_status, &_isExpandable);
if (out_isExpandable) { *out_isExpandable = mmc_mk_icon(_isExpandable); }
return _attr;
}
DLLExport
modelica_metatype omc_Lookup_lookupRecordConstructorClass(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype *out_outClass, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inPath;
{
modelica_metatype _c = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cache = tmp4_1;
_env = tmp4_2;
_path = tmp4_3;
_cache = omc_Lookup_lookupClass(threadData, _cache, _env, _path, mmc_mk_none() ,&_c ,&_env_1);
tmpMeta[3] = _c;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,8) == 0) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,1) == 0) goto goto_2;
_cache = omc_Lookup_buildRecordConstructorClass(threadData, _cache, _env_1, _c ,NULL ,&_c);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _c;
tmpMeta[0+2] = _env_1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outClass = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupUnqualifiedImportedClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames, modelica_boolean *out_outBoolean)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outPrevFrames = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c4 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_string tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inImports;
tmp4_3 = _inEnv;
tmp4_4 = _inIdent;
{
modelica_metatype _r = NULL;
modelica_metatype _c = NULL;
modelica_metatype _c_1 = NULL;
modelica_string _id = NULL;
modelica_string _ident = NULL;
modelica_metatype _encflag = NULL;
modelica_boolean _more;
modelica_boolean _unique;
modelica_metatype _restr = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _env3 = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _path = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmp4_2);
tmpMeta[6] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],2,1) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_path = tmpMeta[7];
_rest = tmpMeta[6];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmpMeta[5] = listReverse(omc_FGraph_currentScope(threadData, _env));
if (listEmpty(tmpMeta[5])) goto goto_2;
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
_r = tmpMeta[6];
_prevFrames = tmpMeta[7];
tmpMeta[5] = mmc_mk_cons(_r, MMC_REFSTRUCTLIT(mmc_nil));
_env3 = omc_FGraph_setScope(threadData, _env, tmpMeta[5]);
tmpMeta[11] = omc_Lookup_lookupClass2(threadData, _cache, _env3, _path, _prevFrames, omc_Mutable_create(threadData, mmc_mk_boolean(0)), _inInfo, &tmpMeta[5], &tmpMeta[9], &tmpMeta[10]);
_cache = tmpMeta[11];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],2,8) == 0) goto goto_2;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 6));
_c = tmpMeta[5];
_id = tmpMeta[6];
_encflag = tmpMeta[7];
_restr = tmpMeta[8];
_env_1 = tmpMeta[9];
_prevFrames = tmpMeta[10];
_env2 = omc_FGraph_openScope(threadData, _env_1, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
_mod = omc_Mod_getClassModifier(threadData, _env_1, _id);
tmpMeta[5] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_partialInstClassIn(threadData, _cache, _env2, tmpMeta[5], _mod, _OMC_LIT6, _ci_state, _c, _OMC_LIT51, tmpMeta[6], ((modelica_integer) 0) ,&_env2 ,NULL ,NULL ,NULL);
_cache = omc_Lookup_lookupClassInEnv(threadData, _cache, _env2, _ident, _prevFrames, omc_Mutable_create(threadData, mmc_mk_boolean(1)), _inInfo ,&_c_1 ,&_env2 ,&_prevFrames);
_cache = omc_Lookup_moreLookupUnqualifiedImportedClassInFrame(threadData, _cache, _rest, _env, _ident ,&_more);
_unique = (!_more);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _c_1;
tmpMeta[0+2] = _env2;
tmpMeta[0+3] = _prevFrames;
tmp1_c4 = _unique;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmp4_2);
tmpMeta[6] = MMC_CDR(tmp4_2);
_rest = tmpMeta[6];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmpMeta[0+0] = omc_Lookup_lookupUnqualifiedImportedClassInFrame(threadData, _cache, _rest, _env, _ident, _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmp1_c4);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outClass = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_outPrevFrames = tmpMeta[0+3];
_outBoolean = tmp1_c4;
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outPrevFrames) { *out_outPrevFrames = _outPrevFrames; }
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_lookupUnqualifiedImportedClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_metatype _inIdent, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outCache = NULL;
_outCache = omc_Lookup_lookupUnqualifiedImportedClassInFrame(threadData, _inCache, _inImports, _inEnv, _inIdent, _inInfo, out_outClass, out_outEnv, out_outPrevFrames, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_moreLookupUnqualifiedImportedClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_string _inIdent, modelica_boolean *out_outBoolean)
{
modelica_metatype _outCache = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_string tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inImports;
tmp4_3 = _inEnv;
tmp4_4 = _inIdent;
{
modelica_metatype _c = NULL;
modelica_string _id = NULL;
modelica_string _ident = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _path = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _r = NULL;
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_path = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
_env = omc_FGraph_topScope(threadData, _env);
tmpMeta[7] = omc_Lookup_lookupClass(threadData, _cache, _env, _path, mmc_mk_none(), &tmpMeta[2], &tmpMeta[6]);
_cache = tmpMeta[7];
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,8) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 6));
_c = tmpMeta[2];
_id = tmpMeta[3];
_encflag = tmpMeta[4];
_restr = tmpMeta[5];
_env_1 = tmpMeta[6];
_env2 = omc_FGraph_openScope(threadData, _env_1, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env2));
_mod = omc_Mod_getClassModifier(threadData, _env_1, _id);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_partialInstClassIn(threadData, _cache, _env2, tmpMeta[2], _mod, _OMC_LIT6, _ci_state, _c, _OMC_LIT51, tmpMeta[3], ((modelica_integer) 0) ,&_env ,NULL ,NULL ,NULL);
_r = omc_FGraph_lastScopeRef(threadData, _env);
tmpMeta[2] = mmc_mk_cons(_r, MMC_REFSTRUCTLIT(mmc_nil));
_env = omc_FGraph_setScope(threadData, _env, tmpMeta[2]);
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _ident);
_cache = omc_Lookup_lookupClass(threadData, _cache, _env, tmpMeta[2], mmc_mk_none(), NULL, NULL);
tmpMeta[0+0] = _cache;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
_rest = tmpMeta[3];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmp4 += 1;
tmpMeta[0+0] = omc_Lookup_moreLookupUnqualifiedImportedClassInFrame(threadData, _cache, _rest, _env, _ident, &tmp1_c1);
goto tmp3_done;
}
case 2: {
if (!listEmpty(tmp4_2)) goto tmp3_end;
_cache = tmp4_1;
tmpMeta[0+0] = _cache;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_moreLookupUnqualifiedImportedClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_metatype _inIdent, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outCache = NULL;
_outCache = omc_Lookup_moreLookupUnqualifiedImportedClassInFrame(threadData, _inCache, _inImports, _inEnv, _inIdent, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupQualifiedImportedClassInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImport, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outPrevFrames = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_string tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inImport;
tmp4_3 = _inEnv;
tmp4_4 = _inIdent;
{
modelica_metatype _r = NULL;
modelica_metatype _env = NULL;
modelica_metatype _prevFrames = NULL;
modelica_string _id = NULL;
modelica_string _ident = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cache = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmp4_2);
tmpMeta[5] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,1) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_id = tmpMeta[7];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmp6 = (stringEqual(_id, _ident));
if (1 != tmp6) goto goto_2;
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
tmpMeta[4] = listReverse(omc_FGraph_currentScope(threadData, _env));
if (listEmpty(tmpMeta[4])) goto goto_2;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
_r = tmpMeta[5];
_prevFrames = tmpMeta[6];
tmpMeta[4] = mmc_mk_cons(_r, MMC_REFSTRUCTLIT(mmc_nil));
_env = omc_FGraph_setScope(threadData, _env, tmpMeta[4]);
tmpMeta[0+0] = omc_Lookup_lookupClassInEnv(threadData, _cache, _env, _id, _prevFrames, omc_Mutable_create(threadData, mmc_mk_boolean(0)), _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
case 1: {
modelica_boolean tmp7;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmp4_2);
tmpMeta[5] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_path = tmpMeta[6];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmp4 += 1;
_id = omc_AbsynUtil_pathLastIdent(threadData, _path);
tmp7 = (stringEqual(_id, _ident));
if (1 != tmp7) goto goto_2;
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
tmpMeta[4] = listReverse(omc_FGraph_currentScope(threadData, _env));
if (listEmpty(tmpMeta[4])) goto goto_2;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
_r = tmpMeta[5];
_prevFrames = tmpMeta[6];
tmpMeta[4] = mmc_mk_cons(_r, MMC_REFSTRUCTLIT(mmc_nil));
_env = omc_FGraph_setScope(threadData, _env, tmpMeta[4]);
tmpMeta[0+0] = omc_Lookup_lookupClass2(threadData, _cache, _env, _path, _prevFrames, omc_Mutable_create(threadData, mmc_mk_boolean(0)), _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
case 2: {
modelica_boolean tmp8;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmp4_2);
tmpMeta[5] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,2) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
_id = tmpMeta[6];
_path = tmpMeta[7];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmp8 = (stringEqual(_id, _ident));
if (1 != tmp8) goto goto_2;
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
tmpMeta[4] = listReverse(omc_FGraph_currentScope(threadData, _env));
if (listEmpty(tmpMeta[4])) goto goto_2;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
_r = tmpMeta[5];
_prevFrames = tmpMeta[6];
tmpMeta[4] = mmc_mk_cons(_r, MMC_REFSTRUCTLIT(mmc_nil));
_env = omc_FGraph_setScope(threadData, _env, tmpMeta[4]);
tmpMeta[0+0] = omc_Lookup_lookupClass2(threadData, _cache, _env, _path, _prevFrames, omc_Mutable_create(threadData, mmc_mk_boolean(0)), _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[4] = MMC_CAR(tmp4_2);
tmpMeta[5] = MMC_CDR(tmp4_2);
_rest = tmpMeta[5];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmpMeta[0+0] = omc_Lookup_lookupQualifiedImportedClassInFrame(threadData, _cache, _rest, _env, _ident, _inState, _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outClass = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_outPrevFrames = tmpMeta[0+3];
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outPrevFrames) { *out_outPrevFrames = _outPrevFrames; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupUnqualifiedImportedVarInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_string _inIdent, modelica_metatype *out_outClassEnv, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_boolean *out_outBoolean, modelica_metatype *out_splicedExpData, modelica_metatype *out_outComponentEnv, modelica_string *out_name)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClassEnv = NULL;
modelica_metatype _outAttributes = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outBinding = NULL;
modelica_metatype _constOfForIteratorRange = NULL;
modelica_boolean _outBoolean;
modelica_metatype _splicedExpData = NULL;
modelica_metatype _outComponentEnv = NULL;
modelica_string _name = NULL;
modelica_boolean tmp1_c6 __attribute__((unused)) = 0;
modelica_string tmp1_c9 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_string tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inImports;
tmp4_3 = _inEnv;
tmp4_4 = _inIdent;
{
modelica_metatype _f = NULL;
modelica_metatype _cref = NULL;
modelica_string _ident = NULL;
modelica_boolean _more;
modelica_boolean _unique;
modelica_metatype _env = NULL;
modelica_metatype _classEnv = NULL;
modelica_metatype _componentEnv = NULL;
modelica_metatype _env2 = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _bind = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _path = NULL;
modelica_metatype _cnstForRange = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmp4_2);
tmpMeta[11] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[10],2,1) == 0) goto tmp3_end;
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 2));
_path = tmpMeta[12];
_rest = tmpMeta[11];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmpMeta[10] = listReverse(omc_FGraph_currentScope(threadData, _env));
if (listEmpty(tmpMeta[10])) goto goto_2;
tmpMeta[11] = MMC_CAR(tmpMeta[10]);
tmpMeta[12] = MMC_CDR(tmpMeta[10]);
_f = tmpMeta[11];
_prevFrames = tmpMeta[12];
_cref = omc_ComponentReference_pathToCref(threadData, _path);
tmpMeta[10] = MMC_REFSTRUCTLIT(mmc_nil);
_cref = omc_ComponentReference_crefPrependIdent(threadData, _cref, _ident, tmpMeta[10], _OMC_LIT126);
tmpMeta[10] = mmc_mk_cons(_f, MMC_REFSTRUCTLIT(mmc_nil));
_env2 = omc_FGraph_setScope(threadData, _env, tmpMeta[10]);
_cache = omc_Lookup_lookupVarInPackages(threadData, _cache, _env2, _cref, _prevFrames, omc_Mutable_create(threadData, mmc_mk_boolean(0)) ,&_classEnv ,&_attr ,&_ty ,&_bind ,&_cnstForRange ,&_splicedExpData ,&_componentEnv ,&_name);
_cache = omc_Lookup_moreLookupUnqualifiedImportedVarInFrame(threadData, _cache, _rest, _env, _ident ,&_more);
_unique = (!_more);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _classEnv;
tmpMeta[0+2] = _attr;
tmpMeta[0+3] = _ty;
tmpMeta[0+4] = _bind;
tmpMeta[0+5] = _cnstForRange;
tmp1_c6 = _unique;
tmpMeta[0+7] = _splicedExpData;
tmpMeta[0+8] = _componentEnv;
tmp1_c9 = _name;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[10] = MMC_CAR(tmp4_2);
tmpMeta[11] = MMC_CDR(tmp4_2);
_rest = tmpMeta[11];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmpMeta[0+0] = omc_Lookup_lookupUnqualifiedImportedVarInFrame(threadData, _cache, _rest, _env, _ident, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3], &tmpMeta[0+4], &tmpMeta[0+5], &tmp1_c6, &tmpMeta[0+7], &tmpMeta[0+8], &tmp1_c9);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outClassEnv = tmpMeta[0+1];
_outAttributes = tmpMeta[0+2];
_outType = tmpMeta[0+3];
_outBinding = tmpMeta[0+4];
_constOfForIteratorRange = tmpMeta[0+5];
_outBoolean = tmp1_c6;
_splicedExpData = tmpMeta[0+7];
_outComponentEnv = tmpMeta[0+8];
_name = tmp1_c9;
_return: OMC_LABEL_UNUSED
if (out_outClassEnv) { *out_outClassEnv = _outClassEnv; }
if (out_outAttributes) { *out_outAttributes = _outAttributes; }
if (out_outType) { *out_outType = _outType; }
if (out_outBinding) { *out_outBinding = _outBinding; }
if (out_constOfForIteratorRange) { *out_constOfForIteratorRange = _constOfForIteratorRange; }
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
if (out_splicedExpData) { *out_splicedExpData = _splicedExpData; }
if (out_outComponentEnv) { *out_outComponentEnv = _outComponentEnv; }
if (out_name) { *out_name = _name; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_lookupUnqualifiedImportedVarInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_metatype _inIdent, modelica_metatype *out_outClassEnv, modelica_metatype *out_outAttributes, modelica_metatype *out_outType, modelica_metatype *out_outBinding, modelica_metatype *out_constOfForIteratorRange, modelica_metatype *out_outBoolean, modelica_metatype *out_splicedExpData, modelica_metatype *out_outComponentEnv, modelica_metatype *out_name)
{
modelica_boolean _outBoolean;
modelica_metatype _outCache = NULL;
_outCache = omc_Lookup_lookupUnqualifiedImportedVarInFrame(threadData, _inCache, _inImports, _inEnv, _inIdent, out_outClassEnv, out_outAttributes, out_outType, out_outBinding, out_constOfForIteratorRange, &_outBoolean, out_splicedExpData, out_outComponentEnv, out_name);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_moreLookupUnqualifiedImportedVarInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_string _inIdent, modelica_boolean *out_outBoolean)
{
modelica_metatype _outCache = NULL;
modelica_boolean _outBoolean;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_string tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inImports;
tmp4_3 = _inEnv;
tmp4_4 = _inIdent;
{
modelica_metatype _f = NULL;
modelica_string _ident = NULL;
modelica_metatype _env = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_path = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmpMeta[2] = listReverse(omc_FGraph_currentScope(threadData, _env));
if (listEmpty(tmpMeta[2])) goto goto_2;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_f = tmpMeta[3];
_prevFrames = tmpMeta[4];
_cref = omc_ComponentReference_pathToCref(threadData, _path);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_cref = omc_ComponentReference_crefPrependIdent(threadData, _cref, _ident, tmpMeta[2], _OMC_LIT126);
tmpMeta[2] = mmc_mk_cons(_f, MMC_REFSTRUCTLIT(mmc_nil));
_env = omc_FGraph_setScope(threadData, _env, tmpMeta[2]);
_cache = omc_Lookup_lookupVarInPackages(threadData, _cache, _env, _cref, _prevFrames, omc_Mutable_create(threadData, mmc_mk_boolean(0)), NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
tmpMeta[0+0] = _cache;
tmp1_c1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
_rest = tmpMeta[3];
_cache = tmp4_1;
_env = tmp4_3;
_ident = tmp4_4;
tmp4 += 1;
tmpMeta[0+0] = omc_Lookup_moreLookupUnqualifiedImportedVarInFrame(threadData, _cache, _rest, _env, _ident, &tmp1_c1);
goto tmp3_done;
}
case 2: {
if (!listEmpty(tmp4_2)) goto tmp3_end;
_cache = tmp4_1;
tmpMeta[0+0] = _cache;
tmp1_c1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outBoolean = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBoolean) { *out_outBoolean = _outBoolean; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_Lookup_moreLookupUnqualifiedImportedVarInFrame(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inImports, modelica_metatype _inEnv, modelica_metatype _inIdent, modelica_metatype *out_outBoolean)
{
modelica_boolean _outBoolean;
modelica_metatype _outCache = NULL;
_outCache = omc_Lookup_moreLookupUnqualifiedImportedVarInFrame(threadData, _inCache, _inImports, _inEnv, _inIdent, &_outBoolean);
if (out_outBoolean) { *out_outBoolean = mmc_mk_icon(_outBoolean); }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupQualifiedImportedVarInFrame(threadData_t *threadData, modelica_metatype _inImports, modelica_string _ident)
{
modelica_metatype _outCref = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inImports;
{
modelica_string _id = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_path = tmpMeta[3];
tmp3 += 1;
_id = omc_AbsynUtil_pathLastIdent(threadData, _path);
tmp5 = (stringEqual(_id, _ident));
if (1 != tmp5) goto goto_1;
tmpMeta[0] = omc_ComponentReference_pathToCref(threadData, _path);
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_id = tmpMeta[3];
_path = tmpMeta[4];
tmp6 = (stringEqual(_id, _ident));
if (1 != tmp6) goto goto_1;
tmpMeta[0] = omc_ComponentReference_pathToCref(threadData, _path);
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_Lookup_lookupQualifiedImportedVarInFrame(threadData, _rest, _ident);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outCref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCref;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupPrevFrames(threadData_t *threadData, modelica_string _id, modelica_metatype _inPrevFrames, modelica_metatype *out_outPrevFrames)
{
modelica_metatype _outFrame = NULL;
modelica_metatype _outPrevFrames = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inPrevFrames;
{
modelica_string _sid = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _ref = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_ref = tmpMeta[2];
_prevFrames = tmpMeta[3];
tmp6 = omc_FNode_isRefTop(threadData, _ref);
if (0 != tmp6) goto goto_2;
_sid = omc_FNode_refName(threadData, _ref);
tmp7 = (stringEqual(_id, _sid));
if (1 != tmp7) goto goto_2;
tmpMeta[0+0] = mmc_mk_some(_ref);
tmpMeta[0+1] = _prevFrames;
goto tmp3_done;
}
case 1: {
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = mmc_mk_none();
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outFrame = tmpMeta[0+0];
_outPrevFrames = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outPrevFrames) { *out_outPrevFrames = _outPrevFrames; }
return _outFrame;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_Lookup_getConstrainingClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inEnv, modelica_metatype _inCache)
{
modelica_string _outPath = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
modelica_metatype _cc_path = NULL;
modelica_metatype _ts = NULL;
modelica_metatype _el = NULL;
modelica_metatype _env = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_cc_path = tmpMeta[4];
tmp1 = omc_AbsynUtil_pathString(threadData, _cc_path, _OMC_LIT36, 1, 0);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,8) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,3) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_ts = tmpMeta[1];
omc_Lookup_lookupClass(threadData, _inCache, _inEnv, omc_AbsynUtil_typeSpecPath(threadData, _ts), mmc_mk_none() ,&_el ,&_env);
tmp1 = omc_Lookup_getConstrainingClass(threadData, _el, _env, _inCache);
goto tmp3_done;
}
case 2: {
tmpMeta[0] = stringAppend(omc_FGraph_printGraphPathStr(threadData, _inEnv),_OMC_LIT36);
tmpMeta[1] = stringAppend(tmpMeta[0],omc_SCodeUtil_elementName(threadData, _inClass));
tmp1 = tmpMeta[1];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outPath = tmp1;
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC void omc_Lookup_checkPartialScope(threadData_t *threadData, modelica_metatype _inEnv, modelica_metatype _inParentEnv, modelica_metatype _inCache, modelica_metatype _inInfo)
{
modelica_metatype _el = NULL;
modelica_metatype _pre = NULL;
modelica_string _name = NULL;
modelica_string _pre_str = NULL;
modelica_string _cc_str = NULL;
modelica_metatype _cls_info = NULL;
modelica_metatype _pre_info = NULL;
modelica_metatype _info = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(((isSome(_inInfo) && omc_FGraph_isPartialScope(threadData, _inEnv)) && omc_Config_languageStandardAtLeast(threadData, 5)))
{
tmpMeta[0] = omc_FNode_fromRef(threadData, omc_FGraph_lastScopeRef(threadData, _inEnv));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,5) == 0) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_el = tmpMeta[2];
_pre = tmpMeta[3];
_name = omc_SCodeUtil_elementName(threadData, _el);
if((omc_FGraph_graphPrefixOf(threadData, _inParentEnv, _inEnv) && (!omc_PrefixUtil_isNoPrefix(threadData, _pre))))
{
_pre_str = omc_PrefixUtil_printPrefixStr(threadData, _pre);
_cls_info = omc_SCodeUtil_elementInfo(threadData, _el);
_pre_info = omc_PrefixUtil_getPrefixInfo(threadData, _pre);
_cc_str = omc_Lookup_getConstrainingClass(threadData, _el, omc_FGraph_stripLastScopeRef(threadData, _inEnv, NULL), _inCache);
tmpMeta[0] = mmc_mk_cons(_pre_str, mmc_mk_cons(_name, mmc_mk_cons(_cc_str, MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta[1] = mmc_mk_cons(_cls_info, mmc_mk_cons(_pre_info, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addMultiSourceMessage(threadData, _OMC_LIT138, tmpMeta[0], tmpMeta[1]);
MMC_THROW_INTERNAL();
}
else
{
tmpMeta[0] = _inInfo;
if (optionNone(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_info = tmpMeta[1];
if((!omc_Config_getGraphicsExpMode(threadData)))
{
tmpMeta[0] = mmc_mk_cons(_name, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT135, tmpMeta[0], _info);
}
}
}
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClassQualified2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _path, modelica_metatype _inC, modelica_metatype _optFrame, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outPrevFrames = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inC;
tmp4_4 = _optFrame;
tmp4_5 = _inPrevFrames;
{
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _frame = NULL;
modelica_metatype _restr = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _encflag = NULL;
modelica_string _id = NULL;
modelica_metatype _r = NULL;
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_4)) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_4), 1));
_frame = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
_prevFrames = tmp4_5;
tmp4 += 2;
_env = omc_FGraph_pushScopeRef(threadData, _env, _frame);
tmpMeta[0+0] = omc_Lookup_lookupClass2(threadData, _cache, _env, _path, _prevFrames, _inState, _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (!optionNone(tmp4_4)) goto tmp3_end;
_id = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
_r = omc_FNode_child(threadData, omc_FGraph_lastScopeRef(threadData, _env), _id);
tmpMeta[4] = omc_FNode_refData(threadData, _r);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,5) == 0) goto goto_2;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],7,1) == 0) goto goto_2;
_cache = omc_Inst_getCachedInstance(threadData, _cache, _env, _id, _r ,&_env);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = omc_Lookup_lookupClass2(threadData, _cache, _env, _path, tmpMeta[4], _inState, _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
if (!optionNone(tmp4_4)) goto tmp3_end;
_id = tmpMeta[4];
_encflag = tmpMeta[5];
_restr = tmpMeta[6];
_cache = tmp4_1;
_env = tmp4_2;
_env = omc_FGraph_openScope(threadData, _env, _encflag, _id, omc_FGraph_restrictionToScopeType(threadData, _restr));
_ci_state = omc_ClassInf_start(threadData, _restr, omc_FGraph_getGraphName(threadData, _env));
_mod = omc_Mod_getClassModifier(threadData, _inEnv, _id);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_partialInstClassIn(threadData, _cache, _env, tmpMeta[4], _mod, _OMC_LIT6, _ci_state, _inC, _OMC_LIT51, tmpMeta[5], ((modelica_integer) 0) ,&_env ,NULL ,NULL ,NULL);
omc_Lookup_checkPartialScope(threadData, _env, _inEnv, _cache, _inInfo);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = omc_Lookup_lookupClass2(threadData, _cache, _env, _path, tmpMeta[4], _inState, _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outClass = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_outPrevFrames = tmpMeta[0+3];
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outPrevFrames) { *out_outPrevFrames = _outPrevFrames; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClassQualified(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _id, modelica_metatype _path, modelica_metatype _inOptFrame, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outPrevFrames = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_metatype tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inOptFrame;
tmp4_4 = _inPrevFrames;
{
modelica_metatype _c = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _frame = NULL;
modelica_metatype _optFrame = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_3)) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 1));
_frame = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
_prevFrames = tmp4_4;
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
_env = omc_FGraph_pushScopeRef(threadData, _env, _frame);
tmpMeta[0+0] = omc_Lookup_lookupClass2(threadData, _cache, _env, _path, _prevFrames, _inState, _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
case 1: {
if (!optionNone(tmp4_3)) goto tmp3_end;
_cache = tmp4_1;
_env = tmp4_2;
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Lookup_lookupClassInEnv(threadData, _cache, _env, _id, tmpMeta[4], _inState, _inInfo ,&_c ,&_env ,&_prevFrames);
_optFrame = omc_Lookup_lookupPrevFrames(threadData, _id, _prevFrames ,&_prevFrames);
tmpMeta[0+0] = omc_Lookup_lookupClassQualified2(threadData, _cache, _env, _path, _c, _optFrame, _prevFrames, _inState, _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outClass = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_outPrevFrames = tmpMeta[0+3];
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outPrevFrames) { *out_outPrevFrames = _outPrevFrames; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClass2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outPrevFrames = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_metatype tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inPath;
tmp4_4 = _inPrevFrames;
{
modelica_metatype _r = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _prevFrames = NULL;
modelica_metatype _path = NULL;
modelica_string _id = NULL;
modelica_string _pack = NULL;
modelica_metatype _optFrame = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_3))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (!listEmpty(tmp4_4)) goto tmp3_end;
_path = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
tmpMeta[4] = listReverse(omc_FGraph_currentScope(threadData, _env));
if (listEmpty(tmpMeta[4])) goto goto_2;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
_r = tmpMeta[5];
_prevFrames = tmpMeta[6];
omc_Mutable_update(threadData, _inState, mmc_mk_boolean(1));
tmpMeta[4] = mmc_mk_cons(_r, MMC_REFSTRUCTLIT(mmc_nil));
_env = omc_FGraph_setScope(threadData, _env, tmpMeta[4]);
_inCache = _cache;
_inEnv = _env;
_inPath = _path;
_inPrevFrames = _prevFrames;
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,0,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
_pack = tmpMeta[4];
_path = tmpMeta[5];
_cache = tmp4_1;
_env = tmp4_2;
_prevFrames = tmp4_4;
_optFrame = omc_Lookup_lookupPrevFrames(threadData, _pack, _prevFrames ,&_prevFrames);
tmpMeta[0+0] = omc_Lookup_lookupClassQualified(threadData, _cache, _env, _pack, _path, _optFrame, _prevFrames, _inState, _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
_id = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
_prevFrames = tmp4_4;
tmpMeta[0+0] = omc_Lookup_lookupClassInEnv(threadData, _cache, _env, _id, _prevFrames, _inState, _inInfo, &tmpMeta[0+1], &tmpMeta[0+2], &tmpMeta[0+3]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outClass = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_outPrevFrames = tmpMeta[0+3];
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outPrevFrames) { *out_outPrevFrames = _outPrevFrames; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupClass1(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _inPrevFrames, modelica_metatype _inState, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv, modelica_metatype *out_outPrevFrames)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype _outPrevFrames = NULL;
modelica_integer _errors;
modelica_metatype _info = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_errors = omc_Error_getNumErrorMessages(threadData);
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_outCache = omc_Lookup_lookupClass2(threadData, _inCache, _inEnv, _inPath, _inPrevFrames, _inState, _inInfo ,&_outClass ,&_outEnv ,&_outPrevFrames);
goto tmp2_done;
}
case 1: {
if((isSome(_inInfo) && (_errors == omc_Error_getNumErrorMessages(threadData))))
{
tmpMeta[0] = mmc_mk_cons(omc_AbsynUtil_pathString(threadData, _inPath, _OMC_LIT36, 1, 0), mmc_mk_cons(omc_FGraph_printGraphPathStr(threadData, _inEnv), MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addSourceMessage(threadData, _OMC_LIT49, tmpMeta[0], omc_Util_getOption(threadData, _inInfo));
}
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
if (out_outPrevFrames) { *out_outPrevFrames = _outPrevFrames; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupClassIdent(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _ident, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outCache = omc_Lookup_lookupClassInEnv(threadData, _inCache, _inEnv, _ident, tmpMeta[0], omc_Mutable_create(threadData, mmc_mk_boolean(0)), _inInfo ,&_outClass ,&_outEnv, NULL);
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupClass(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _inInfo, modelica_metatype *out_outClass, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outClass = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_metatype _id = NULL;
modelica_string _name = NULL;
modelica_metatype _cenv = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_name = tmpMeta[3];
_id = tmpMeta[4];
omc_ErrorExt_setCheckpoint(threadData, _OMC_LIT139);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_outCache = omc_Lookup_lookupVarIdent(threadData, _inCache, _inEnv, _name, tmpMeta[3] ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,&_cenv ,NULL);
_outCache = omc_Lookup_lookupClass(threadData, _outCache, _cenv, _id, mmc_mk_none() ,&_outClass ,&_outEnv);
omc_ErrorExt_rollBack(threadData, _OMC_LIT139);
tmpMeta[0+0] = _outCache;
tmpMeta[0+1] = _outClass;
tmpMeta[0+2] = _outEnv;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
omc_ErrorExt_rollBack(threadData, _OMC_LIT139);
goto goto_2;
goto tmp3_done;
}
case 2: {
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_outCache = omc_Lookup_lookupClass1(threadData, _inCache, _inEnv, _inPath, tmpMeta[3], omc_Mutable_create(threadData, mmc_mk_boolean(0)), _inInfo ,&_outClass ,&_outEnv ,NULL);
tmpMeta[0+0] = _outCache;
tmpMeta[0+1] = _outClass;
tmpMeta[0+2] = _outEnv;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outClass = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outClass) { *out_outClass = _outClass; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupMetarecordsRecursive3(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _path, modelica_string _str, modelica_metatype _inHt, modelica_metatype _inAcc, modelica_metatype *out_outHt, modelica_metatype *out_outMetarecordTypes)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outHt = NULL;
modelica_metatype _outMetarecordTypes = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_metatype tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inHt;
tmp4_4 = _inAcc;
{
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _uniontypePaths = NULL;
modelica_metatype _uniontypeTypes = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _acc = NULL;
modelica_metatype _ht = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_cache = tmp4_1;
_ht = tmp4_3;
_acc = tmp4_4;
if (!omc_BaseHashTable_hasKey(threadData, _str, _ht)) goto tmp3_end;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _ht;
tmpMeta[0+2] = _acc;
goto tmp3_done;
}
case 1: {
_cache = tmp4_1;
_env = tmp4_2;
_ht = tmp4_3;
_acc = tmp4_4;
tmpMeta[3] = mmc_mk_box2(0, _str, _path);
_ht = omc_BaseHashTable_add(threadData, tmpMeta[3], _ht);
_cache = omc_Lookup_lookupType(threadData, _cache, _env, _path, _OMC_LIT142 ,&_ty ,NULL);
tmpMeta[3] = mmc_mk_cons(_ty, _acc);
_acc = tmpMeta[3];
_uniontypeTypes = omc_Types_getAllInnerTypesOfType(threadData, _ty, boxvar_Types_uniontypeFilter);
_uniontypePaths = omc_List_flatten(threadData, omc_List_map(threadData, _uniontypeTypes, boxvar_Types_getUniontypePaths));
tmpMeta[0+0] = omc_Lookup_lookupMetarecordsRecursive2(threadData, _cache, _env, _uniontypePaths, _ht, _acc, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outHt = tmpMeta[0+1];
_outMetarecordTypes = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outHt) { *out_outHt = _outHt; }
if (out_outMetarecordTypes) { *out_outMetarecordTypes = _outMetarecordTypes; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupMetarecordsRecursive2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inUniontypePaths, modelica_metatype _inHt, modelica_metatype _inAcc, modelica_metatype *out_outHt, modelica_metatype *out_outMetarecordTypes)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outHt = NULL;
modelica_metatype _outMetarecordTypes = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_metatype tmp4_4;modelica_metatype tmp4_5;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inUniontypePaths;
tmp4_4 = _inHt;
tmp4_5 = _inAcc;
{
modelica_metatype _cache = NULL;
modelica_metatype _env = NULL;
modelica_metatype _first = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _ht = NULL;
modelica_metatype _acc = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_3)) goto tmp3_end;
_cache = tmp4_1;
_ht = tmp4_4;
_acc = tmp4_5;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _ht;
tmpMeta[0+2] = _acc;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_3)) goto tmp3_end;
tmpMeta[3] = MMC_CAR(tmp4_3);
tmpMeta[4] = MMC_CDR(tmp4_3);
_first = tmpMeta[3];
_rest = tmpMeta[4];
_cache = tmp4_1;
_env = tmp4_2;
_ht = tmp4_4;
_acc = tmp4_5;
_cache = omc_Lookup_lookupMetarecordsRecursive3(threadData, _cache, _env, _first, omc_AbsynUtil_pathString(threadData, _first, _OMC_LIT36, 1, 0), _ht, _acc ,&_ht ,&_acc);
_inCache = _cache;
_inEnv = _env;
_inUniontypePaths = _rest;
_inHt = _ht;
_inAcc = _acc;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCache = tmpMeta[0+0];
_outHt = tmpMeta[0+1];
_outMetarecordTypes = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outHt) { *out_outHt = _outHt; }
if (out_outMetarecordTypes) { *out_outMetarecordTypes = _outMetarecordTypes; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupMetarecordsRecursive(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inUniontypePaths, modelica_metatype *out_outMetarecordTypes)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outMetarecordTypes = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outCache = omc_Lookup_lookupMetarecordsRecursive2(threadData, _inCache, _inEnv, _inUniontypePaths, omc_HashTableStringToPath_emptyHashTable(threadData), tmpMeta[0] ,NULL ,&_outMetarecordTypes);
_return: OMC_LABEL_UNUSED
if (out_outMetarecordTypes) { *out_outMetarecordTypes = _outMetarecordTypes; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupType2(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inClass, modelica_metatype *out_outType, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inClass;
{
modelica_metatype _t = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env_2 = NULL;
modelica_metatype _env_3 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _c = NULL;
modelica_string _id = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _r = NULL;
modelica_metatype _types = NULL;
modelica_metatype _names = NULL;
modelica_metatype _ci_state = NULL;
modelica_metatype _encflag = NULL;
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 9; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto tmp3_end;
_c = tmp4_3;
_cache = tmp4_1;
_env_1 = tmp4_2;
tmp4 += 6;
_cache = omc_Lookup_buildRecordType(threadData, _cache, _env_1, _c ,&_env_1 ,&_t);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env_1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],10,0) == 0) goto tmp3_end;
_c = tmp4_3;
_id = tmpMeta[3];
_encflag = tmpMeta[4];
_r = tmpMeta[5];
_cache = tmp4_1;
_env_1 = tmp4_2;
tmp4 += 5;
_env_2 = omc_FGraph_openScope(threadData, _env_1, _encflag, _id, _OMC_LIT3);
_ci_state = omc_ClassInf_start(threadData, _r, omc_FGraph_getGraphName(threadData, _env_2));
_mod = omc_Mod_getClassModifier(threadData, _env_1, _id);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_instClassIn(threadData, _cache, _env_2, tmpMeta[3], _OMC_LIT4, _mod, _OMC_LIT6, _ci_state, _c, _OMC_LIT51, tmpMeta[4], 0, _OMC_LIT10, _OMC_LIT11, _OMC_LIT14, mmc_mk_none() ,&_env_3 ,NULL ,NULL ,NULL ,NULL ,NULL ,&_types ,NULL ,NULL ,NULL ,NULL);
omc_SCodeUtil_getClassComponents(threadData, _c ,&_names);
omc_Types_checkEnumDuplicateLiterals(threadData, _names, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c), 9))));
_path = omc_FGraph_getGraphName(threadData, _env_3);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box6(8, &DAE_Type_T__ENUMERATION__desc, mmc_mk_none(), _path, _names, _types, tmpMeta[3]);
_t = tmpMeta[4];
_env_3 = omc_FGraph_mkTypeNode(threadData, _env_3, _id, _t);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env_3;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,0) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,2) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,1) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (4 != MMC_STRLEN(tmpMeta[7]) || strcmp(MMC_STRINGDATA(_OMC_LIT145), MMC_STRINGDATA(tmpMeta[7])) != 0) goto tmp3_end;
_cache = tmp4_1;
_env_1 = tmp4_2;
tmp4 += 4;
_t = _OMC_LIT143;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env_1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,0) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,2) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,1) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (7 != MMC_STRLEN(tmpMeta[7]) || strcmp(MMC_STRINGDATA(_OMC_LIT146), MMC_STRINGDATA(tmpMeta[7])) != 0) goto tmp3_end;
_cache = tmp4_1;
_env_1 = tmp4_2;
tmp4 += 3;
_t = _OMC_LIT15;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env_1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,0) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,2) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,1) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (7 != MMC_STRLEN(tmpMeta[7]) || strcmp(MMC_STRINGDATA(_OMC_LIT147), MMC_STRINGDATA(tmpMeta[7])) != 0) goto tmp3_end;
_cache = tmp4_1;
_env_1 = tmp4_2;
tmp4 += 2;
_t = _OMC_LIT25;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env_1;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],7,0) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],0,2) == 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],1,1) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (6 != MMC_STRLEN(tmpMeta[7]) || strcmp(MMC_STRINGDATA(_OMC_LIT148), MMC_STRINGDATA(tmpMeta[7])) != 0) goto tmp3_end;
_cache = tmp4_1;
_env_1 = tmp4_2;
tmp4 += 1;
_t = _OMC_LIT144;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env_1;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],17,5) == 0) goto tmp3_end;
_c = tmp4_3;
_cache = tmp4_1;
_env_1 = tmp4_2;
_cache = omc_Lookup_buildMetaRecordType(threadData, _cache, _env_1, _c ,&_env_2 ,&_t);
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env_2;
goto tmp3_done;
}
case 7: {
modelica_boolean tmp6;
_cache = tmp4_1;
_env_1 = tmp4_2;
_c = tmp4_3;
tmp6 = omc_SCodeUtil_classIsExternalObject(threadData, _c);
if (1 != tmp6) goto goto_2;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_Inst_instClass(threadData, _cache, _env_1, tmpMeta[3], _OMC_LIT4, _OMC_LIT5, _OMC_LIT6, _c, tmpMeta[4], 0, _OMC_LIT81, _OMC_LIT11, _OMC_LIT14 ,&_env_1 ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL);
tmpMeta[3] = _c;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,8) == 0) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_id = tmpMeta[4];
_env_1 = omc_FGraph_stripLastScopeRef(threadData, _env_1, NULL);
tmpMeta[0+0] = omc_Lookup_lookupTypeInEnv(threadData, _cache, _env_1, _id, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,2,8) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],9,1) == 0) goto tmp3_end;
_c = tmp4_3;
_id = tmpMeta[3];
_cache = tmp4_1;
_env_1 = tmp4_2;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_cache = omc_InstFunction_implicitFunctionTypeInstantiation(threadData, _cache, _env_1, tmpMeta[3], _c ,&_env_2 ,NULL);
tmpMeta[0+0] = omc_Lookup_lookupTypeInEnv(threadData, _cache, _env_2, _id, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 9) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outType = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outType) { *out_outType = _outType; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupTypeIdent(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_string _ident, modelica_metatype _msg, modelica_metatype *out_outType, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_string tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _ident;
tmp4_4 = _msg;
{
modelica_metatype _t = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _c = NULL;
modelica_string _classname = NULL;
modelica_string _scope = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (6 != MMC_STRLEN(tmp4_3) || strcmp(MMC_STRINGDATA(_OMC_LIT152), MMC_STRINGDATA(tmp4_3)) != 0) goto tmp3_end;
_cache = tmp4_1;
_env = tmp4_2;
_t = _OMC_LIT154;
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env;
goto tmp3_done;
}
case 1: {
_cache = tmp4_1;
_env = tmp4_2;
tmpMeta[0+0] = omc_Lookup_lookupTypeInEnv(threadData, _cache, _env, _ident, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
case 2: {
_cache = tmp4_1;
_env = tmp4_2;
_cache = omc_Lookup_lookupClassIdent(threadData, _cache, _env, _ident, mmc_mk_none() ,&_c ,&_env_1);
tmpMeta[0+0] = omc_Lookup_lookupType2(threadData, _cache, _env_1, _c, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
case 3: {
if (optionNone(tmp4_4)) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_4), 1));
_info = tmpMeta[3];
_env = tmp4_2;
tmpMeta[3] = stringAppend(_ident,_OMC_LIT155);
_classname = tmpMeta[3];
_scope = omc_FGraph_printGraphPathStr(threadData, _env);
tmpMeta[3] = mmc_mk_cons(_classname, mmc_mk_cons(_scope, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addSourceMessage(threadData, _OMC_LIT49, tmpMeta[3], _info);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outType = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outType) { *out_outType = _outType; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_Lookup_lookupTypeQual(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _msg, modelica_metatype *out_outType, modelica_metatype *out_outEnv)
{
modelica_metatype _outCache = NULL;
modelica_metatype _outType = NULL;
modelica_metatype _outEnv = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;
tmp4_1 = _inCache;
tmp4_2 = _inEnv;
tmp4_3 = _inPath;
tmp4_4 = _msg;
{
modelica_metatype _t = NULL;
modelica_metatype _env_1 = NULL;
modelica_metatype _env = NULL;
modelica_metatype _path = NULL;
modelica_metatype _c = NULL;
modelica_string _classname = NULL;
modelica_string _scope = NULL;
modelica_metatype _cache = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,0,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (11 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT169), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (6 != MMC_STRLEN(tmpMeta[5]) || strcmp(MMC_STRINGDATA(_OMC_LIT170), MMC_STRINGDATA(tmpMeta[5])) != 0) goto tmp3_end;
_cache = tmp4_1;
_env = tmp4_2;
tmp4 += 1;
tmpMeta[3] = mmc_mk_box5(14, &DAE_Type_T__FUNCTION__desc, _OMC_LIT151, _OMC_LIT25, _OMC_LIT95, _inPath);
_t = tmpMeta[3];
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_3,0,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 2));
if (11 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT169), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_3), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (17 != MMC_STRLEN(tmpMeta[5]) || strcmp(MMC_STRINGDATA(_OMC_LIT171), MMC_STRINGDATA(tmpMeta[5])) != 0) goto tmp3_end;
_cache = tmp4_1;
_env = tmp4_2;
tmpMeta[3] = mmc_mk_box5(14, &DAE_Type_T__FUNCTION__desc, _OMC_LIT167, _OMC_LIT168, _OMC_LIT95, _inPath);
_t = tmpMeta[3];
tmpMeta[0+0] = _cache;
tmpMeta[0+1] = _t;
tmpMeta[0+2] = _env;
goto tmp3_done;
}
case 2: {
_cache = tmp4_1;
_env = tmp4_2;
_path = tmp4_3;
_cache = omc_Lookup_lookupClass(threadData, _cache, _env, _path, mmc_mk_none() ,&_c ,&_env_1);
tmpMeta[0+0] = omc_Lookup_lookupType2(threadData, _cache, _env_1, _c, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
case 3: {
if (optionNone(tmp4_4)) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_4), 1));
_info = tmpMeta[3];
_env = tmp4_2;
_path = tmp4_3;
_classname = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT36, 1, 0);
tmpMeta[3] = stringAppend(_classname,_OMC_LIT155);
_classname = tmpMeta[3];
_scope = omc_FGraph_printGraphPathStr(threadData, _env);
tmpMeta[3] = mmc_mk_cons(_classname, mmc_mk_cons(_scope, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addSourceMessage(threadData, _OMC_LIT49, tmpMeta[3], _info);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outCache = tmpMeta[0+0];
_outType = tmpMeta[0+1];
_outEnv = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_outType) { *out_outType = _outType; }
if (out_outEnv) { *out_outEnv = _outEnv; }
return _outCache;
}
DLLExport
modelica_metatype omc_Lookup_lookupType(threadData_t *threadData, modelica_metatype _inCache, modelica_metatype _inEnv, modelica_metatype _inPath, modelica_metatype _msg, modelica_metatype *out_t, modelica_metatype *out_env)
{
modelica_metatype _cache = NULL;
modelica_metatype _t = NULL;
modelica_metatype _env = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0+0] = omc_Lookup_lookupTypeIdent(threadData, _inCache, _inEnv, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inPath), 2))), _msg, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = omc_Lookup_lookupTypeQual(threadData, _inCache, _inEnv, _inPath, _msg, &tmpMeta[0+1], &tmpMeta[0+2]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_cache = tmpMeta[0+0];
_t = tmpMeta[0+1];
_env = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_t) { *out_t = _t; }
if (out_env) { *out_env = _env; }
return _cache;
}
