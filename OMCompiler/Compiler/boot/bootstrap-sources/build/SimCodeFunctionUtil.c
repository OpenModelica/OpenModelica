#ifdef OMC_BASE_FILE
#define OMC_FILE OMC_BASE_FILE
#else
#define OMC_FILE "/home/mahge/dev/OpenModelica/OMCompiler/Compiler/boot/build/tmp/SimCodeFunctionUtil.c"
#endif
#include "omc_simulation_settings.h"
#include "SimCodeFunctionUtil.h"
#define _OMC_LIT0_data "Tried to append cref prefix from a non FUNCTION_CONTEXT() context. cref_pref is only avaiable in FUNCTION_CONTEXT."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT0,114,_OMC_LIT0_data);
#define _OMC_LIT0 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT0)
#define _OMC_LIT1_data "/home/mahge/dev/OpenModelica/OMCompiler/Compiler/SimCode/SimCodeFunctionUtil.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT1,79,_OMC_LIT1_data);
#define _OMC_LIT1 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT1)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT2_6,1605721860.0);
#define _OMC_LIT2_6 MMC_REFREALLIT(_OMC_LIT_STRUCT2_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT2,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT1,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2774)),MMC_IMMEDIATE(MMC_TAGFIXNUM(20)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2774)),MMC_IMMEDIATE(MMC_TAGFIXNUM(174)),_OMC_LIT2_6}};
#define _OMC_LIT2 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT2)
#define _OMC_LIT3_data "Tried to get cref prefix from a non FUNCTION_CONTEXT() context. cref_pref is only avaiable in FUNCTION_CONTEXT."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT3,111,_OMC_LIT3_data);
#define _OMC_LIT3 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT3)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT4_6,1605721860.0);
#define _OMC_LIT4_6 MMC_REFREALLIT(_OMC_LIT_STRUCT4_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT4,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT1,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2760)),MMC_IMMEDIATE(MMC_TAGFIXNUM(20)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2760)),MMC_IMMEDIATE(MMC_TAGFIXNUM(171)),_OMC_LIT4_6}};
#define _OMC_LIT4 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT4)
#define _OMC_LIT5_data "i_"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT5,2,_OMC_LIT5_data);
#define _OMC_LIT5 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT5)
#define _OMC_LIT6_data ","
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT6,1,_OMC_LIT6_data);
#define _OMC_LIT6 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT6)
#define _OMC_LIT7_data "0"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT7,1,_OMC_LIT7_data);
#define _OMC_LIT7 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data "JavaScript"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,10,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "emcc"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,4,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
#define _OMC_LIT10_data "hpcom"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT10,5,_OMC_LIT10_data);
#define _OMC_LIT10 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT10)
#define _OMC_LIT11_data "Enables parallel calculation based on task-graphs."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT11,50,_OMC_LIT11_data);
#define _OMC_LIT11 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT11)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT12,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT11}};
#define _OMC_LIT12 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT12)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT13,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(87)),_OMC_LIT10,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT12}};
#define _OMC_LIT13 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT13)
#define _OMC_LIT14_data ".js"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT14,3,_OMC_LIT14_data);
#define _OMC_LIT14 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT14)
#define _OMC_LIT15_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT15,0,_OMC_LIT15_data);
#define _OMC_LIT15 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT15)
#define _OMC_LIT16_data "\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT16,1,_OMC_LIT16_data);
#define _OMC_LIT16 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT16)
#define _OMC_LIT17_data " "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT17,1,_OMC_LIT17_data);
#define _OMC_LIT17 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT17)
#define _OMC_LIT18_data "-fopenmp"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT18,8,_OMC_LIT18_data);
#define _OMC_LIT18 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT18)
#define _OMC_LIT19_data "-Os -Wno-warn-absolute-paths"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT19,28,_OMC_LIT19_data);
#define _OMC_LIT19 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT19)
#define _OMC_LIT20_data "-lParModelicaAuto -ltbb_static -lboost_system"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT20,45,_OMC_LIT20_data);
#define _OMC_LIT20 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT20)
#define _OMC_LIT21_data "parmodauto"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT21,10,_OMC_LIT21_data);
#define _OMC_LIT21 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT21)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT22,1,4) {&Flags_FlagVisibility_EXTERNAL__desc,}};
#define _OMC_LIT22 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT22)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT23,2,4) {&Flags_FlagData_BOOL__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(0))}};
#define _OMC_LIT23 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT23)
#define _OMC_LIT24_data "Experimental: Enable parallelization of independent systems of equations in the translated model."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT24,97,_OMC_LIT24_data);
#define _OMC_LIT24 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT24)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT25,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT24}};
#define _OMC_LIT25 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT25)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT26,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(146)),_OMC_LIT21,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT22,_OMC_LIT23,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT25}};
#define _OMC_LIT26 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT26)
#define _OMC_LIT27_data "/"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT27,1,_OMC_LIT27_data);
#define _OMC_LIT27 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT27)
#define _OMC_LIT28_data "modelica_fnptr "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT28,15,_OMC_LIT28_data);
#define _OMC_LIT28 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT28)
#define _OMC_LIT29_data "_"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT29,1,_OMC_LIT29_data);
#define _OMC_LIT29 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT29)
#define _OMC_LIT30_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT30,1,_OMC_LIT30_data);
#define _OMC_LIT30 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT30)
#define _OMC_LIT31_data "list"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT31,4,_OMC_LIT31_data);
#define _OMC_LIT31 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT31)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT32,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT31}};
#define _OMC_LIT32 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT32)
#define _OMC_LIT33_data "listReverse"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT33,11,_OMC_LIT33_data);
#define _OMC_LIT33 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT33)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT34,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT33}};
#define _OMC_LIT34 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT34)
#define _OMC_LIT35_data "array"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT35,5,_OMC_LIT35_data);
#define _OMC_LIT35 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT35)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT36,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT35}};
#define _OMC_LIT36 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT36)
#define _OMC_LIT37_data "min"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT37,3,_OMC_LIT37_data);
#define _OMC_LIT37 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT37)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT38,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT37}};
#define _OMC_LIT38 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT38)
#define _OMC_LIT39_data "max"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT39,3,_OMC_LIT39_data);
#define _OMC_LIT39 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT39)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT40,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT39}};
#define _OMC_LIT40 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT40)
#define _OMC_LIT41_data "sum"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT41,3,_OMC_LIT41_data);
#define _OMC_LIT41 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT41)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT42,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT41}};
#define _OMC_LIT42 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT42)
#define _OMC_LIT43_data "product"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT43,7,_OMC_LIT43_data);
#define _OMC_LIT43 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT43)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT44,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT43}};
#define _OMC_LIT44 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT44)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT45,2,1) {_OMC_LIT44,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT45 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT45)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT46,2,1) {_OMC_LIT42,_OMC_LIT45}};
#define _OMC_LIT46 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT46)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT47,2,1) {_OMC_LIT40,_OMC_LIT46}};
#define _OMC_LIT47 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT47)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT48,2,1) {_OMC_LIT38,_OMC_LIT47}};
#define _OMC_LIT48 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT48)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT49,2,1) {_OMC_LIT36,_OMC_LIT48}};
#define _OMC_LIT49 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT49)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT50,2,1) {_OMC_LIT34,_OMC_LIT49}};
#define _OMC_LIT50 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT50)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT51,2,1) {_OMC_LIT32,_OMC_LIT50}};
#define _OMC_LIT51 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data "destructor"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,10,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT53,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT52}};
#define _OMC_LIT53 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT53)
#define _OMC_LIT54_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT54,1,_OMC_LIT54_data);
#define _OMC_LIT54 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT54)
#define _OMC_LIT55_data "function getCalledFunctionsInFunction2: Class "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT55,46,_OMC_LIT55_data);
#define _OMC_LIT55 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT55)
#define _OMC_LIT56_data " not found in global scope."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT56,27,_OMC_LIT56_data);
#define _OMC_LIT56 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT56)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT57_6,1605721860.0);
#define _OMC_LIT57_6 MMC_REFREALLIT(_OMC_LIT_STRUCT57_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT57,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT1,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2499)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2499)),MMC_IMMEDIATE(MMC_TAGFIXNUM(50)),_OMC_LIT57_6}};
#define _OMC_LIT57 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT57)
#define _OMC_LIT58_data "DynamicLoad"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT58,11,_OMC_LIT58_data);
#define _OMC_LIT58 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT58)
#define _OMC_LIT59_data "Include"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT59,7,_OMC_LIT59_data);
#define _OMC_LIT59 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT59)
#define _OMC_LIT60_data "#line "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT60,6,_OMC_LIT60_data);
#define _OMC_LIT60 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT60)
#define _OMC_LIT61_data " \""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT61,2,_OMC_LIT61_data);
#define _OMC_LIT61 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT61)
#define _OMC_LIT62_data "gendebugsymbols"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT62,15,_OMC_LIT62_data);
#define _OMC_LIT62 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data "Generate code with debugging symbols."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,37,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT64,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT63}};
#define _OMC_LIT64 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT64)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT65,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(70)),_OMC_LIT62,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT64}};
#define _OMC_LIT65 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT65)
#define _OMC_LIT66_data "Library"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT66,7,_OMC_LIT66_data);
#define _OMC_LIT66 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT66)
#define _OMC_LIT67_data "msvc"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT67,4,_OMC_LIT67_data);
#define _OMC_LIT67 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT67)
#define _OMC_LIT68_data "pthreads library is already available. It is not linked from the external library resource directory.\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT68,102,_OMC_LIT68_data);
#define _OMC_LIT68 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT68)
#define _OMC_LIT69_data "rt library is not needed under Windows. It is not linked from the external library resource directory.\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT69,103,_OMC_LIT69_data);
#define _OMC_LIT69 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT69)
#define _OMC_LIT70_data "Ws2_32 library is not needed under Windows. It is not linked from the external library resource directory.\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT70,107,_OMC_LIT70_data);
#define _OMC_LIT70 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT70)
#define _OMC_LIT71_data "User32 library is already available. It is not linked from the external library resource directory.\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT71,100,_OMC_LIT71_data);
#define _OMC_LIT71 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT71)
#define _OMC_LIT72_data "-l"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT72,2,_OMC_LIT72_data);
#define _OMC_LIT72 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT72)
#define _OMC_LIT73_data "Winmm library is a windows system library. It is not linked from the external library resource directory.\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT73,106,_OMC_LIT73_data);
#define _OMC_LIT73 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT73)
#define _OMC_LIT74_data "X11 library is not needed under Windows. It is not linked from the external library resource directory.\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT74,104,_OMC_LIT74_data);
#define _OMC_LIT74 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT74)
#define _OMC_LIT75_data "-lfmilib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT75,8,_OMC_LIT75_data);
#define _OMC_LIT75 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT75)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT76,2,1) {_OMC_LIT75,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT76 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT76)
#define _OMC_LIT77_data "ModelicaIO"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT77,10,_OMC_LIT77_data);
#define _OMC_LIT77 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT77)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT78,2,6) {&Absyn_Exp_STRING__desc,_OMC_LIT77}};
#define _OMC_LIT78 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT78)
#define _OMC_LIT79_data "ModelicaMatIO"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT79,13,_OMC_LIT79_data);
#define _OMC_LIT79 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT79)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT80,2,6) {&Absyn_Exp_STRING__desc,_OMC_LIT79}};
#define _OMC_LIT80 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT80)
#define _OMC_LIT81_data "zlib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT81,4,_OMC_LIT81_data);
#define _OMC_LIT81 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT81)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT82,2,6) {&Absyn_Exp_STRING__desc,_OMC_LIT81}};
#define _OMC_LIT82 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT82)
#define _OMC_LIT83_data "ModelicaStandardTables"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT83,22,_OMC_LIT83_data);
#define _OMC_LIT83 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT83)
#define _OMC_LIT84_data "-"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT84,1,_OMC_LIT84_data);
#define _OMC_LIT84 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT84)
#define _OMC_LIT85_data "Failed to process Library annotation for external function"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT85,58,_OMC_LIT85_data);
#define _OMC_LIT85 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT85)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT86_6,1605721860.0);
#define _OMC_LIT86_6 MMC_REFREALLIT(_OMC_LIT_STRUCT86_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT86,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT1,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2314)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2314)),MMC_IMMEDIATE(MMC_TAGFIXNUM(107)),_OMC_LIT86_6}};
#define _OMC_LIT86 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT86)
#define _OMC_LIT87_data "lapack"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT87,6,_OMC_LIT87_data);
#define _OMC_LIT87 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT87)
#define _OMC_LIT88_data "Lapack"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT88,6,_OMC_LIT88_data);
#define _OMC_LIT88 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT88)
#define _OMC_LIT89_data "pthread"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT89,7,_OMC_LIT89_data);
#define _OMC_LIT89 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT89)
#define _OMC_LIT90_data "rt"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT90,2,_OMC_LIT90_data);
#define _OMC_LIT90 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT90)
#define _OMC_LIT91_data "Ws2_32"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT91,6,_OMC_LIT91_data);
#define _OMC_LIT91 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT91)
#define _OMC_LIT92_data "User32"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT92,6,_OMC_LIT92_data);
#define _OMC_LIT92 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT92)
#define _OMC_LIT93_data "Winmm"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT93,5,_OMC_LIT93_data);
#define _OMC_LIT93 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT93)
#define _OMC_LIT94_data "X11"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT94,3,_OMC_LIT94_data);
#define _OMC_LIT94 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT94)
#define _OMC_LIT95_data "omcruntime"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT95,10,_OMC_LIT95_data);
#define _OMC_LIT95 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT95)
#define _OMC_LIT96_data "OpenModelicaCorba"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT96,17,_OMC_LIT96_data);
#define _OMC_LIT96 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT96)
#define _OMC_LIT97_data "fmilib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT97,6,_OMC_LIT97_data);
#define _OMC_LIT97 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT97)
#define _OMC_LIT98_data "lapack_win32_MT.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT98,19,_OMC_LIT98_data);
#define _OMC_LIT98 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT98)
#define _OMC_LIT99_data "f2c.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT99,7,_OMC_LIT99_data);
#define _OMC_LIT99 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT99)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT100,2,1) {_OMC_LIT99,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT100 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT100)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT101,2,1) {_OMC_LIT98,_OMC_LIT100}};
#define _OMC_LIT101 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT101)
#define _OMC_LIT102_data "initialization.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT102,18,_OMC_LIT102_data);
#define _OMC_LIT102 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT102)
#define _OMC_LIT103_data "libexpat.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT103,12,_OMC_LIT103_data);
#define _OMC_LIT103 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT103)
#define _OMC_LIT104_data "math-support.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT104,16,_OMC_LIT104_data);
#define _OMC_LIT104 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT104)
#define _OMC_LIT105_data "meta.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT105,8,_OMC_LIT105_data);
#define _OMC_LIT105 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT105)
#define _OMC_LIT106_data "ModelicaExternalC.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT106,21,_OMC_LIT106_data);
#define _OMC_LIT106 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT106)
#define _OMC_LIT107_data "results.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT107,11,_OMC_LIT107_data);
#define _OMC_LIT107 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT107)
#define _OMC_LIT108_data "simulation.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT108,14,_OMC_LIT108_data);
#define _OMC_LIT108 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT108)
#define _OMC_LIT109_data "solver.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT109,10,_OMC_LIT109_data);
#define _OMC_LIT109 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT109)
#define _OMC_LIT110_data "sundials_kinsol.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT110,19,_OMC_LIT110_data);
#define _OMC_LIT110 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT110)
#define _OMC_LIT111_data "sundials_nvecserial.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT111,23,_OMC_LIT111_data);
#define _OMC_LIT111 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT111)
#define _OMC_LIT112_data "sundials_sunlinsolklu"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT112,21,_OMC_LIT112_data);
#define _OMC_LIT112 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT112)
#define _OMC_LIT113_data "util.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT113,8,_OMC_LIT113_data);
#define _OMC_LIT113 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT113)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT114,2,1) {_OMC_LIT98,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT114 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT114)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT115,2,1) {_OMC_LIT113,_OMC_LIT114}};
#define _OMC_LIT115 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT115)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT116,2,1) {_OMC_LIT112,_OMC_LIT115}};
#define _OMC_LIT116 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT116)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT117,2,1) {_OMC_LIT111,_OMC_LIT116}};
#define _OMC_LIT117 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT117)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT118,2,1) {_OMC_LIT110,_OMC_LIT117}};
#define _OMC_LIT118 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT118)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT119,2,1) {_OMC_LIT109,_OMC_LIT118}};
#define _OMC_LIT119 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT119)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT120,2,1) {_OMC_LIT108,_OMC_LIT119}};
#define _OMC_LIT120 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT120)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT121,2,1) {_OMC_LIT107,_OMC_LIT120}};
#define _OMC_LIT121 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT121)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT122,2,1) {_OMC_LIT106,_OMC_LIT121}};
#define _OMC_LIT122 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT122)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT123,2,1) {_OMC_LIT105,_OMC_LIT122}};
#define _OMC_LIT123 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT123)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT124,2,1) {_OMC_LIT104,_OMC_LIT123}};
#define _OMC_LIT124 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT124)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT125,2,1) {_OMC_LIT103,_OMC_LIT124}};
#define _OMC_LIT125 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT125)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT126,2,1) {_OMC_LIT102,_OMC_LIT125}};
#define _OMC_LIT126 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT126)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT127,2,1) {_OMC_LIT99,_OMC_LIT126}};
#define _OMC_LIT127 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT127)
#define _OMC_LIT128_data "fmilib.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT128,10,_OMC_LIT128_data);
#define _OMC_LIT128 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT128)
#define _OMC_LIT129_data "shlwapi.lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT129,11,_OMC_LIT129_data);
#define _OMC_LIT129 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT129)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT130,2,1) {_OMC_LIT129,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT130 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT130)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT131,2,1) {_OMC_LIT128,_OMC_LIT130}};
#define _OMC_LIT131 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT131)
#define _OMC_LIT132_data ".lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT132,4,_OMC_LIT132_data);
#define _OMC_LIT132 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT132)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT133_6,1605721860.0);
#define _OMC_LIT133_6 MMC_REFREALLIT(_OMC_LIT_STRUCT133_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT133,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT1,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2207)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2207)),MMC_IMMEDIATE(MMC_TAGFIXNUM(107)),_OMC_LIT133_6}};
#define _OMC_LIT133 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT133)
#define _OMC_LIT134_data "LibraryDirectory"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT134,16,_OMC_LIT134_data);
#define _OMC_LIT134 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT134)
#define _OMC_LIT135_data "modelica://"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT135,11,_OMC_LIT135_data);
#define _OMC_LIT135 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT135)
#define _OMC_LIT136_data "/Resources/Library"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT136,18,_OMC_LIT136_data);
#define _OMC_LIT136 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT136)
#define _OMC_LIT137_data "/.openmodelica/binaries/"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT137,24,_OMC_LIT137_data);
#define _OMC_LIT137 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT137)
#define _OMC_LIT138_data "-Wl,-rpath=\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT138,12,_OMC_LIT138_data);
#define _OMC_LIT138 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT138)
#define _OMC_LIT139_data "/LIBPATH:\""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT139,10,_OMC_LIT139_data);
#define _OMC_LIT139 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT139)
#define _OMC_LIT140_data "\"-L"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT140,3,_OMC_LIT140_data);
#define _OMC_LIT140 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT140)
#define _OMC_LIT141_data "/Resources"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT141,10,_OMC_LIT141_data);
#define _OMC_LIT141 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT141)
#define _OMC_LIT142_data "target"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT142,6,_OMC_LIT142_data);
#define _OMC_LIT142 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT142)
#define _OMC_LIT143_data "gcc"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT143,3,_OMC_LIT143_data);
#define _OMC_LIT143 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT143)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT144,2,8) {&Flags_FlagData_STRING__FLAG__desc,_OMC_LIT143}};
#define _OMC_LIT144 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT144)
#define _OMC_LIT145_data "msvc10"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT145,6,_OMC_LIT145_data);
#define _OMC_LIT145 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT145)
#define _OMC_LIT146_data "msvc12"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT146,6,_OMC_LIT146_data);
#define _OMC_LIT146 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT146)
#define _OMC_LIT147_data "msvc13"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT147,6,_OMC_LIT147_data);
#define _OMC_LIT147 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT147)
#define _OMC_LIT148_data "msvc15"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT148,6,_OMC_LIT148_data);
#define _OMC_LIT148 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT148)
#define _OMC_LIT149_data "msvc19"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT149,6,_OMC_LIT149_data);
#define _OMC_LIT149 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT149)
#define _OMC_LIT150_data "vxworks69"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT150,9,_OMC_LIT150_data);
#define _OMC_LIT150 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT150)
#define _OMC_LIT151_data "debugrt"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT151,7,_OMC_LIT151_data);
#define _OMC_LIT151 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT151)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT152,2,1) {_OMC_LIT151,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT152 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT152)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT153,2,1) {_OMC_LIT150,_OMC_LIT152}};
#define _OMC_LIT153 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT153)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT154,2,1) {_OMC_LIT149,_OMC_LIT153}};
#define _OMC_LIT154 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT154)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT155,2,1) {_OMC_LIT148,_OMC_LIT154}};
#define _OMC_LIT155 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT155)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT156,2,1) {_OMC_LIT147,_OMC_LIT155}};
#define _OMC_LIT156 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT156)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT157,2,1) {_OMC_LIT146,_OMC_LIT156}};
#define _OMC_LIT157 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT157)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT158,2,1) {_OMC_LIT145,_OMC_LIT157}};
#define _OMC_LIT158 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT158)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT159,2,1) {_OMC_LIT67,_OMC_LIT158}};
#define _OMC_LIT159 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT159)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT160,2,1) {_OMC_LIT143,_OMC_LIT159}};
#define _OMC_LIT160 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT160)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT161,2,3) {&Flags_ValidOptions_STRING__OPTION__desc,_OMC_LIT160}};
#define _OMC_LIT161 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT161)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT162,1,1) {_OMC_LIT161}};
#define _OMC_LIT162 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT162)
#define _OMC_LIT163_data "Sets the target compiler to use."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT163,32,_OMC_LIT163_data);
#define _OMC_LIT163 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT163)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT164,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT163}};
#define _OMC_LIT164 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT164)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT165,8,3) {&Flags_ConfigFlag_CONFIG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(5)),_OMC_LIT142,MMC_REFSTRUCTLIT(mmc_none),_OMC_LIT22,_OMC_LIT144,_OMC_LIT162,_OMC_LIT164}};
#define _OMC_LIT165 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT165)
#define _OMC_LIT166_data "/lib/"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT166,5,_OMC_LIT166_data);
#define _OMC_LIT166 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT166)
#define _OMC_LIT167_data "/omc"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT167,4,_OMC_LIT167_data);
#define _OMC_LIT167 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT167)
#define _OMC_LIT168_data "-lWinmm"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT168,7,_OMC_LIT168_data);
#define _OMC_LIT168 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT168)
#define _OMC_LIT169_data "IncludeDirectory"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT169,16,_OMC_LIT169_data);
#define _OMC_LIT169 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT169)
#define _OMC_LIT170_data "\"-I"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT170,3,_OMC_LIT170_data);
#define _OMC_LIT170 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT170)
#define _OMC_LIT171_data "/Resources/Include"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT171,18,_OMC_LIT171_data);
#define _OMC_LIT171 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT171)
#define _OMC_LIT172_data "/usr/lib/"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT172,9,_OMC_LIT172_data);
#define _OMC_LIT172 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT172)
#define _OMC_LIT173_data "/omc_compile_"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT173,13,_OMC_LIT173_data);
#define _OMC_LIT173 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT173)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT174,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT174 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT174)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT175,1,6) {&ErrorTypes_Severity_NOTIFICATION__desc,}};
#define _OMC_LIT175 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT175)
#define _OMC_LIT176_data "%s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT176,2,_OMC_LIT176_data);
#define _OMC_LIT176 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT176)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT177,2,4) {&Gettext_TranslatableContent_notrans__desc,_OMC_LIT176}};
#define _OMC_LIT177 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT177)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT178,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(6001)),_OMC_LIT174,_OMC_LIT175,_OMC_LIT177}};
#define _OMC_LIT178 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT178)
#define _OMC_LIT179_data "Created directory "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT179,18,_OMC_LIT179_data);
#define _OMC_LIT179 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT179)
#define _OMC_LIT180_data "cp -a \""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT180,7,_OMC_LIT180_data);
#define _OMC_LIT180 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT180)
#define _OMC_LIT181_data "\"/* \""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT181,5,_OMC_LIT181_data);
#define _OMC_LIT181 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT181)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT182,1,5) {&ErrorTypes_Severity_WARNING__desc,}};
#define _OMC_LIT182 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT182)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT183,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(6000)),_OMC_LIT174,_OMC_LIT182,_OMC_LIT177}};
#define _OMC_LIT183 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT183)
#define _OMC_LIT184_data "Failed to change directory to "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT184,30,_OMC_LIT184_data);
#define _OMC_LIT184 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT184)
#define _OMC_LIT185_data "/BuildProjects/"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT185,15,_OMC_LIT185_data);
#define _OMC_LIT185 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT185)
#define _OMC_LIT186_data "Changed directory to "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT186,21,_OMC_LIT186_data);
#define _OMC_LIT186 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT186)
#define _OMC_LIT187_data "sh ./autogen.sh && ./configure --libdir='"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT187,41,_OMC_LIT187_data);
#define _OMC_LIT187 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT187)
#define _OMC_LIT188_data "' && make && make install"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT188,25,_OMC_LIT188_data);
#define _OMC_LIT188 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT188)
#define _OMC_LIT189_data "log"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT189,3,_OMC_LIT189_data);
#define _OMC_LIT189 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT189)
#define _OMC_LIT190_data "Succeeded with compilation and installation of the library using:\ncommand: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT190,75,_OMC_LIT190_data);
#define _OMC_LIT190 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT190)
#define _OMC_LIT191_data "Could not find library %s despite compilation command %s in directory %s returning success."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT191,91,_OMC_LIT191_data);
#define _OMC_LIT191 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT191)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT192,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT191}};
#define _OMC_LIT192 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT192)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT193,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(283)),_OMC_LIT174,_OMC_LIT182,_OMC_LIT192}};
#define _OMC_LIT193 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT193)
#define _OMC_LIT194_data "Compiled "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT194,9,_OMC_LIT194_data);
#define _OMC_LIT194 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT194)
#define _OMC_LIT195_data " by running build project "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT195,26,_OMC_LIT195_data);
#define _OMC_LIT195 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT195)
#define _OMC_LIT196_data "Failed to run "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT196,14,_OMC_LIT196_data);
#define _OMC_LIT196 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT196)
#define _OMC_LIT197_data ": "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT197,2,_OMC_LIT197_data);
#define _OMC_LIT197 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT197)
#define _OMC_LIT198_data "Removed directory "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT198,18,_OMC_LIT198_data);
#define _OMC_LIT198 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT198)
#define _OMC_LIT199_data "/BuildProjects"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT199,14,_OMC_LIT199_data);
#define _OMC_LIT199 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT199)
#define _OMC_LIT200_data "/autogen.sh"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT200,11,_OMC_LIT200_data);
#define _OMC_LIT200 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT200)
#define _OMC_LIT201_data "Could not find library %s in either of:%s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT201,41,_OMC_LIT201_data);
#define _OMC_LIT201 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT201)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT202,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT201}};
#define _OMC_LIT202 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT202)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT203,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(282)),_OMC_LIT174,_OMC_LIT182,_OMC_LIT202}};
#define _OMC_LIT203 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT203)
#define _OMC_LIT204_data "\n  "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT204,3,_OMC_LIT204_data);
#define _OMC_LIT204 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT204)
#define _OMC_LIT205_data "lib"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT205,3,_OMC_LIT205_data);
#define _OMC_LIT205 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT205)
#define _OMC_LIT206_data ".a"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT206,2,_OMC_LIT206_data);
#define _OMC_LIT206 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT206)
#define _OMC_LIT207_data "buildExternalLibs"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT207,17,_OMC_LIT207_data);
#define _OMC_LIT207 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT207)
#define _OMC_LIT208_data "Use the autotools project in the Resources folder of the library to build missing external libraries."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT208,101,_OMC_LIT208_data);
#define _OMC_LIT208 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT208)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT209,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT208}};
#define _OMC_LIT209 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT209)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT210,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(133)),_OMC_LIT207,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT209}};
#define _OMC_LIT210 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT210)
#define _OMC_LIT211_data "NULL"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT211,4,_OMC_LIT211_data);
#define _OMC_LIT211 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT211)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT212,1,3) {&DAE_VarParallelism_PARGLOBAL__desc,}};
#define _OMC_LIT212 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT212)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT213,1,4) {&DAE_VarParallelism_PARLOCAL__desc,}};
#define _OMC_LIT213 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT213)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT214,1,5) {&DAE_VarParallelism_NON__PARALLEL__desc,}};
#define _OMC_LIT214 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT214)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT215,1,3) {&DAE_VarKind_VARIABLE__desc,}};
#define _OMC_LIT215 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT215)
#define _OMC_LIT216_data "SourceInfo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT216,10,_OMC_LIT216_data);
#define _OMC_LIT216 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT216)
#define _OMC_LIT217_data "function getCrefFromExp failed: input was not of type DAE.CREF"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT217,62,_OMC_LIT217_data);
#define _OMC_LIT217 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT217)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT218_6,1605721860.0);
#define _OMC_LIT218_6 MMC_REFREALLIT(_OMC_LIT_STRUCT218_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT218,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT1,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1592)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1592)),MMC_IMMEDIATE(MMC_TAGFIXNUM(111)),_OMC_LIT218_6}};
#define _OMC_LIT218 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT218)
#define _OMC_LIT219_data "events"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT219,6,_OMC_LIT219_data);
#define _OMC_LIT219 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT219)
#define _OMC_LIT220_data "Turns on/off events handling."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT220,29,_OMC_LIT220_data);
#define _OMC_LIT220 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT220)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT221,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT220}};
#define _OMC_LIT221 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT221)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT222,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(5)),_OMC_LIT219,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT221}};
#define _OMC_LIT222 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT222)
#define _OMC_LIT223_data "listArrayLiteral"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT223,16,_OMC_LIT223_data);
#define _OMC_LIT223 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT223)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT224,2,31) {&DAE_Exp_LIST__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT224 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT224)
#define _OMC_LIT225_data "function replaceLiteralExp failed. Falling back to not replacing "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT225,65,_OMC_LIT225_data);
#define _OMC_LIT225 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT225)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT226_6,1605721860.0);
#define _OMC_LIT226_6 MMC_REFREALLIT(_OMC_LIT_STRUCT226_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT226,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT1,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1258)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(1258)),MMC_IMMEDIATE(MMC_TAGFIXNUM(50)),_OMC_LIT226_6}};
#define _OMC_LIT226 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT226)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT227,1,6) {&ErrorTypes_MessageType_SYMBOLIC__desc,}};
#define _OMC_LIT227 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT227)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT228,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT228 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT228)
#define _OMC_LIT229_data "%s has a function pointer as input. OpenModelica does not support this feature in the interactive environment. Suggested workaround: Call this function with the arguments you want from another function (that does not have function pointer input). Then call that function from the interactive environment instead."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT229,312,_OMC_LIT229_data);
#define _OMC_LIT229 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT229)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT230,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT229}};
#define _OMC_LIT230 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT230)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT231,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(142)),_OMC_LIT227,_OMC_LIT228,_OMC_LIT230}};
#define _OMC_LIT231 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT231)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT232,1,6) {&SimCodeFunction_SimExtArg_SIMNOEXTARG__desc,}};
#define _OMC_LIT232 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT232)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT233,1,5) {&DAE_Const_C__VAR__desc,}};
#define _OMC_LIT233 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT233)
#define _OMC_LIT234_data "function daeInOutSimVar failed\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT234,31,_OMC_LIT234_data);
#define _OMC_LIT234 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT234)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT235_6,1605721860.0);
#define _OMC_LIT235_6 MMC_REFREALLIT(_OMC_LIT_STRUCT235_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT235,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT1,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(896)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(896)),MMC_IMMEDIATE(MMC_TAGFIXNUM(81)),_OMC_LIT235_6}};
#define _OMC_LIT235 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT235)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT236,1,3) {&SCode_Visibility_PUBLIC__desc,}};
#define _OMC_LIT236 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT236)
#define _OMC_LIT237_data "function elaborateFunction failed for function: \n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT237,49,_OMC_LIT237_data);
#define _OMC_LIT237 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT237)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT238_6,1605721860.0);
#define _OMC_LIT238_6 MMC_REFREALLIT(_OMC_LIT_STRUCT238_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT238,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT1,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(807)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(807)),MMC_IMMEDIATE(MMC_TAGFIXNUM(129)),_OMC_LIT238_6}};
#define _OMC_LIT238 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT238)
#define _OMC_LIT239_data "sin"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT239,3,_OMC_LIT239_data);
#define _OMC_LIT239 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT239)
#define _OMC_LIT240_data "cos"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT240,3,_OMC_LIT240_data);
#define _OMC_LIT240 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT240)
#define _OMC_LIT241_data "tan"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT241,3,_OMC_LIT241_data);
#define _OMC_LIT241 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT241)
#define _OMC_LIT242_data "asin"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT242,4,_OMC_LIT242_data);
#define _OMC_LIT242 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT242)
#define _OMC_LIT243_data "acos"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT243,4,_OMC_LIT243_data);
#define _OMC_LIT243 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT243)
#define _OMC_LIT244_data "atan"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT244,4,_OMC_LIT244_data);
#define _OMC_LIT244 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT244)
#define _OMC_LIT245_data "atan2"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT245,5,_OMC_LIT245_data);
#define _OMC_LIT245 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT245)
#define _OMC_LIT246_data "sinh"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT246,4,_OMC_LIT246_data);
#define _OMC_LIT246 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT246)
#define _OMC_LIT247_data "cosh"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT247,4,_OMC_LIT247_data);
#define _OMC_LIT247 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT247)
#define _OMC_LIT248_data "tanh"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT248,4,_OMC_LIT248_data);
#define _OMC_LIT248 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT248)
#define _OMC_LIT249_data "exp"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT249,3,_OMC_LIT249_data);
#define _OMC_LIT249 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT249)
#define _OMC_LIT250_data "log10"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT250,5,_OMC_LIT250_data);
#define _OMC_LIT250 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT250)
#define _OMC_LIT251_data "sqrt"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT251,4,_OMC_LIT251_data);
#define _OMC_LIT251 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT251)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT252,2,1) {_OMC_LIT251,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT252 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT252)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT253,2,1) {_OMC_LIT250,_OMC_LIT252}};
#define _OMC_LIT253 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT253)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT254,2,1) {_OMC_LIT189,_OMC_LIT253}};
#define _OMC_LIT254 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT254)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT255,2,1) {_OMC_LIT249,_OMC_LIT254}};
#define _OMC_LIT255 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT255)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT256,2,1) {_OMC_LIT248,_OMC_LIT255}};
#define _OMC_LIT256 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT256)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT257,2,1) {_OMC_LIT247,_OMC_LIT256}};
#define _OMC_LIT257 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT257)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT258,2,1) {_OMC_LIT246,_OMC_LIT257}};
#define _OMC_LIT258 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT258)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT259,2,1) {_OMC_LIT245,_OMC_LIT258}};
#define _OMC_LIT259 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT259)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT260,2,1) {_OMC_LIT244,_OMC_LIT259}};
#define _OMC_LIT260 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT260)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT261,2,1) {_OMC_LIT243,_OMC_LIT260}};
#define _OMC_LIT261 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT261)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT262,2,1) {_OMC_LIT242,_OMC_LIT261}};
#define _OMC_LIT262 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT262)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT263,2,1) {_OMC_LIT241,_OMC_LIT262}};
#define _OMC_LIT263 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT263)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT264,2,1) {_OMC_LIT240,_OMC_LIT263}};
#define _OMC_LIT264 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT264)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT265,2,1) {_OMC_LIT239,_OMC_LIT264}};
#define _OMC_LIT265 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT265)
#define _OMC_LIT266_data "builtin"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT266,7,_OMC_LIT266_data);
#define _OMC_LIT266 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT266)
#define _OMC_LIT267_data "C"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT267,1,_OMC_LIT267_data);
#define _OMC_LIT267 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT267)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT268,2,19) {&DAE_Type_T__ANYTYPE__desc,MMC_REFSTRUCTLIT(mmc_none)}};
#define _OMC_LIT268 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT268)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT269,2,4) {&DAE_Type_T__REAL__desc,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT269 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT269)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT270,2,31) {&DAE_Operator_GREATEREQ__desc,_OMC_LIT269}};
#define _OMC_LIT270 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT270)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT271,0.0);
#define _OMC_LIT271 MMC_REFREALLIT(_OMC_LIT_STRUCT271)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT272,2,4) {&DAE_Exp_RCONST__desc,_OMC_LIT271}};
#define _OMC_LIT272 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT272)
#define _OMC_LIT273_data "NO_LIB"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT273,6,_OMC_LIT273_data);
#define _OMC_LIT273 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT273)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT274,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT15,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),_OMC_LIT271}};
#define _OMC_LIT274 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT274)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT275,1,4) {&DAE_ComponentPrefix_NOCOMPPRE__desc,}};
#define _OMC_LIT275 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT275)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT276,8,3) {&DAE_ElementSource_SOURCE__desc,_OMC_LIT274,MMC_REFSTRUCTLIT(mmc_nil),_OMC_LIT275,MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT276 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT276)
#define _OMC_LIT277_data "nfScalarize"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT277,11,_OMC_LIT277_data);
#define _OMC_LIT277 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT277)
#define _OMC_LIT278_data "Run scalarization in NF, default true."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT278,38,_OMC_LIT278_data);
#define _OMC_LIT278 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT278)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT279,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT278}};
#define _OMC_LIT279 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT279)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT280,5,3) {&Flags_DebugFlag_DEBUG__FLAG__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(178)),_OMC_LIT277,MMC_IMMEDIATE(MMC_TAGFIXNUM(1)),_OMC_LIT279}};
#define _OMC_LIT280 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT280)
#include "util/modelica.h"
#include "SimCodeFunctionUtil_includes.h"
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_variableString(threadData_t *threadData, modelica_metatype _var);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_variableString,2,0) {(void*) boxptr_SimCodeFunctionUtil_variableString,0}};
#define boxvar_SimCodeFunctionUtil_variableString MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_variableString)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_aliasRecordDeclarations2(threadData_t *threadData, modelica_string _str, modelica_metatype _path, modelica_metatype _inHt, modelica_metatype *out_ht);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_aliasRecordDeclarations2,2,0) {(void*) boxptr_SimCodeFunctionUtil_aliasRecordDeclarations2,0}};
#define boxvar_SimCodeFunctionUtil_aliasRecordDeclarations2 MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_aliasRecordDeclarations2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_aliasRecordDeclarations(threadData_t *threadData, modelica_metatype _inDecl, modelica_metatype _inHt, modelica_metatype *out_ht);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_aliasRecordDeclarations,2,0) {(void*) boxptr_SimCodeFunctionUtil_aliasRecordDeclarations,0}};
#define boxvar_SimCodeFunctionUtil_aliasRecordDeclarations MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_aliasRecordDeclarations)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_matchNonBuiltinCallsAndFnRefPaths(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _itpl, modelica_metatype *out_otpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_matchNonBuiltinCallsAndFnRefPaths,2,0) {(void*) boxptr_SimCodeFunctionUtil_matchNonBuiltinCallsAndFnRefPaths,0}};
#define boxvar_SimCodeFunctionUtil_matchNonBuiltinCallsAndFnRefPaths MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_matchNonBuiltinCallsAndFnRefPaths)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_addDestructor2(threadData_t *threadData, modelica_metatype _path, modelica_string _pathstr, modelica_metatype _inHt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_addDestructor2,2,0) {(void*) boxptr_SimCodeFunctionUtil_addDestructor2,0}};
#define boxvar_SimCodeFunctionUtil_addDestructor2 MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_addDestructor2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_addDestructor(threadData_t *threadData, modelica_metatype _func, modelica_metatype _inHt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_addDestructor,2,0) {(void*) boxptr_SimCodeFunctionUtil_addDestructor,0}};
#define boxvar_SimCodeFunctionUtil_addDestructor MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_addDestructor)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getCalledFunctionsInFunctions(threadData_t *threadData, modelica_metatype _paths, modelica_metatype _inHt, modelica_metatype _funcs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getCalledFunctionsInFunctions,2,0) {(void*) boxptr_SimCodeFunctionUtil_getCalledFunctionsInFunctions,0}};
#define boxvar_SimCodeFunctionUtil_getCalledFunctionsInFunctions MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getCalledFunctionsInFunctions)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_generateExtFunctionDynamicLoad(threadData_t *threadData, modelica_metatype _inMod);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_generateExtFunctionDynamicLoad(threadData_t *threadData, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionDynamicLoad,2,0) {(void*) boxptr_SimCodeFunctionUtil_generateExtFunctionDynamicLoad,0}};
#define boxvar_SimCodeFunctionUtil_generateExtFunctionDynamicLoad MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionDynamicLoad)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionIncludesIncludestr(threadData_t *threadData, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionIncludesIncludestr,2,0) {(void*) boxptr_SimCodeFunctionUtil_generateExtFunctionIncludesIncludestr,0}};
#define boxvar_SimCodeFunctionUtil_generateExtFunctionIncludesIncludestr MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionIncludesIncludestr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionIncludesLibstr(threadData_t *threadData, modelica_string _target, modelica_metatype _inMod, modelica_metatype *out_names);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionIncludesLibstr,2,0) {(void*) boxptr_SimCodeFunctionUtil_generateExtFunctionIncludesLibstr,0}};
#define boxvar_SimCodeFunctionUtil_generateExtFunctionIncludesLibstr MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionIncludesLibstr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getLibraryStringInGccFormat(threadData_t *threadData, modelica_metatype _exp, modelica_metatype *out_names);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getLibraryStringInGccFormat,2,0) {(void*) boxptr_SimCodeFunctionUtil_getLibraryStringInGccFormat,0}};
#define boxvar_SimCodeFunctionUtil_getLibraryStringInGccFormat MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getLibraryStringInGccFormat)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getLibraryStringInMSVCFormat(threadData_t *threadData, modelica_metatype _exp, modelica_metatype *out_names);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getLibraryStringInMSVCFormat,2,0) {(void*) boxptr_SimCodeFunctionUtil_getLibraryStringInMSVCFormat,0}};
#define boxvar_SimCodeFunctionUtil_getLibraryStringInMSVCFormat MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getLibraryStringInMSVCFormat)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData_t *threadData, modelica_boolean _add, modelica_string _dir, modelica_boolean _isLinux, modelica_metatype _inLibs);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData_t *threadData, modelica_metatype _add, modelica_metatype _dir, modelica_metatype _isLinux, modelica_metatype _inLibs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2,2,0) {(void*) boxptr_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2,0}};
#define boxvar_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2 MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths(threadData_t *threadData, modelica_metatype _program, modelica_metatype _path, modelica_metatype _inMod);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths,2,0) {(void*) boxptr_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths,0}};
#define boxvar_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths)
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_userCompiledBinariesDirectory(threadData_t *threadData, modelica_metatype _path);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_userCompiledBinariesDirectory,2,0) {(void*) boxptr_SimCodeFunctionUtil_userCompiledBinariesDirectory,0}};
#define boxvar_SimCodeFunctionUtil_userCompiledBinariesDirectory MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_userCompiledBinariesDirectory)
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_getGerneralTarget(threadData_t *threadData, modelica_string _target);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getGerneralTarget,2,0) {(void*) boxptr_SimCodeFunctionUtil_getGerneralTarget,0}};
#define boxvar_SimCodeFunctionUtil_getGerneralTarget MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getGerneralTarget)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags2(threadData_t *threadData, modelica_string _dir, modelica_boolean _isLinux, modelica_string _target, modelica_metatype _inLibs);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags2(threadData_t *threadData, modelica_metatype _dir, modelica_metatype _isLinux, modelica_metatype _target, modelica_metatype _inLibs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags2,2,0) {(void*) boxptr_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags2,0}};
#define boxvar_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags2 MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags(threadData_t *threadData, modelica_metatype _program, modelica_metatype _path, modelica_metatype _inMod, modelica_metatype _inLibs, modelica_metatype *out_installDirs, modelica_metatype *out_resources);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags,2,0) {(void*) boxptr_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags,0}};
#define boxvar_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getLinkerLibraryPaths(threadData_t *threadData, modelica_string _uri, modelica_metatype _path, modelica_metatype _inLibs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getLinkerLibraryPaths,2,0) {(void*) boxptr_SimCodeFunctionUtil_getLinkerLibraryPaths,0}};
#define boxvar_SimCodeFunctionUtil_getLinkerLibraryPaths MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getLinkerLibraryPaths)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionIncludeDirectoryFlags(threadData_t *threadData, modelica_metatype _program, modelica_metatype _path, modelica_metatype _inMod, modelica_metatype _includes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionIncludeDirectoryFlags,2,0) {(void*) boxptr_SimCodeFunctionUtil_generateExtFunctionIncludeDirectoryFlags,0}};
#define boxvar_SimCodeFunctionUtil_generateExtFunctionIncludeDirectoryFlags MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionIncludeDirectoryFlags)
PROTECTED_FUNCTION_STATIC void omc_SimCodeFunctionUtil_lookForExtFunctionLibrary(threadData_t *threadData, modelica_metatype _names, modelica_metatype _dirs, modelica_string _name, modelica_metatype _resources, modelica_metatype _path, modelica_metatype _info);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_lookForExtFunctionLibrary,2,0) {(void*) boxptr_SimCodeFunctionUtil_lookForExtFunctionLibrary,0}};
#define boxvar_SimCodeFunctionUtil_lookForExtFunctionLibrary MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_lookForExtFunctionLibrary)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionIncludes(threadData_t *threadData, modelica_metatype _program, modelica_metatype _path, modelica_metatype _inAbsynAnnotationOption, modelica_metatype _info, modelica_metatype *out_includeDirs, modelica_metatype *out_libs, modelica_metatype *out_paths, modelica_boolean *out_dynamcLoad);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_generateExtFunctionIncludes(threadData_t *threadData, modelica_metatype _program, modelica_metatype _path, modelica_metatype _inAbsynAnnotationOption, modelica_metatype _info, modelica_metatype *out_includeDirs, modelica_metatype *out_libs, modelica_metatype *out_paths, modelica_metatype *out_dynamcLoad);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionIncludes,2,0) {(void*) boxptr_SimCodeFunctionUtil_generateExtFunctionIncludes,0}};
#define boxvar_SimCodeFunctionUtil_generateExtFunctionIncludes MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateExtFunctionIncludes)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForMetarecords(threadData_t *threadData, modelica_metatype _inExpl, modelica_metatype _inAccRecordDecls, modelica_metatype _inReturnTypes, modelica_metatype *out_outReturnTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateRecordDeclarationsForMetarecords,2,0) {(void*) boxptr_SimCodeFunctionUtil_elaborateRecordDeclarationsForMetarecords,0}};
#define boxvar_SimCodeFunctionUtil_elaborateRecordDeclarationsForMetarecords MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateRecordDeclarationsForMetarecords)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateNestedRecordDeclarations(threadData_t *threadData, modelica_metatype _inRecordTypes, modelica_metatype _inAccRecordDecls, modelica_metatype _inReturnTypes, modelica_metatype *out_outReturnTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateNestedRecordDeclarations,2,0) {(void*) boxptr_SimCodeFunctionUtil_elaborateNestedRecordDeclarations,0}};
#define boxvar_SimCodeFunctionUtil_elaborateNestedRecordDeclarations MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateNestedRecordDeclarations)
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_generateVarName(threadData_t *threadData, modelica_metatype _inVar);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateVarName,2,0) {(void*) boxptr_SimCodeFunctionUtil_generateVarName,0}};
#define boxvar_SimCodeFunctionUtil_generateVarName MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_generateVarName)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_compareVariable(threadData_t *threadData, modelica_metatype _v1, modelica_metatype _v2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_compareVariable(threadData_t *threadData, modelica_metatype _v1, modelica_metatype _v2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_compareVariable,2,0) {(void*) boxptr_SimCodeFunctionUtil_compareVariable,0}};
#define boxvar_SimCodeFunctionUtil_compareVariable MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_compareVariable)
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_variableName(threadData_t *threadData, modelica_metatype _v);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_variableName,2,0) {(void*) boxptr_SimCodeFunctionUtil_variableName,0}};
#define boxvar_SimCodeFunctionUtil_variableName MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_variableName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_scodeParallelismToDAEParallelism(threadData_t *threadData, modelica_metatype _inParallelism);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_scodeParallelismToDAEParallelism,2,0) {(void*) boxptr_SimCodeFunctionUtil_scodeParallelismToDAEParallelism,0}};
#define boxvar_SimCodeFunctionUtil_scodeParallelismToDAEParallelism MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_scodeParallelismToDAEParallelism)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_checkSourceAndGetBindingExp(threadData_t *threadData, modelica_metatype _inBinding);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_checkSourceAndGetBindingExp,2,0) {(void*) boxptr_SimCodeFunctionUtil_checkSourceAndGetBindingExp,0}};
#define boxvar_SimCodeFunctionUtil_checkSourceAndGetBindingExp MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_checkSourceAndGetBindingExp)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isBindingFromDerivedRecordDeclaration(threadData_t *threadData, modelica_metatype _bind);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isBindingFromDerivedRecordDeclaration(threadData_t *threadData, modelica_metatype _bind);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isBindingFromDerivedRecordDeclaration,2,0) {(void*) boxptr_SimCodeFunctionUtil_isBindingFromDerivedRecordDeclaration,0}};
#define boxvar_SimCodeFunctionUtil_isBindingFromDerivedRecordDeclaration MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isBindingFromDerivedRecordDeclaration)
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_checkBindingsandGetConstructorName(threadData_t *threadData, modelica_string _rec_name, modelica_metatype _vars, modelica_boolean *out_is_default);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_checkBindingsandGetConstructorName(threadData_t *threadData, modelica_metatype _rec_name, modelica_metatype _vars, modelica_metatype *out_is_default);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_checkBindingsandGetConstructorName,2,0) {(void*) boxptr_SimCodeFunctionUtil_checkBindingsandGetConstructorName,0}};
#define boxvar_SimCodeFunctionUtil_checkBindingsandGetConstructorName MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_checkBindingsandGetConstructorName)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_typesVar(threadData_t *threadData, modelica_metatype _inTypesVar);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_typesVar,2,0) {(void*) boxptr_SimCodeFunctionUtil_typesVar,0}};
#define boxvar_SimCodeFunctionUtil_typesVar MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_typesVar)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_typesVarNoBinding(threadData_t *threadData, modelica_metatype _inTypesVar);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_typesVarNoBinding,2,0) {(void*) boxptr_SimCodeFunctionUtil_typesVarNoBinding,0}};
#define boxvar_SimCodeFunctionUtil_typesVarNoBinding MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_typesVarNoBinding)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForRecord(threadData_t *threadData, modelica_metatype _inRecordType, modelica_metatype _inAccRecordDecls, modelica_metatype _inReturnTypes, modelica_metatype *out_outReturnTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateRecordDeclarationsForRecord,2,0) {(void*) boxptr_SimCodeFunctionUtil_elaborateRecordDeclarationsForRecord,0}};
#define boxvar_SimCodeFunctionUtil_elaborateRecordDeclarationsForRecord MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateRecordDeclarationsForRecord)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getCrefFromExp(threadData_t *threadData, modelica_metatype _e);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getCrefFromExp,2,0) {(void*) boxptr_SimCodeFunctionUtil_getCrefFromExp,0}};
#define boxvar_SimCodeFunctionUtil_getCrefFromExp MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getCrefFromExp)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_useZerocrossing(threadData_t *threadData);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_useZerocrossing(threadData_t *threadData);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_useZerocrossing,2,0) {(void*) boxptr_SimCodeFunctionUtil_useZerocrossing,0}};
#define boxvar_SimCodeFunctionUtil_useZerocrossing MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_useZerocrossing)
PROTECTED_FUNCTION_STATIC modelica_integer omc_SimCodeFunctionUtil_filterNg(threadData_t *threadData, modelica_integer _ng);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_filterNg(threadData_t *threadData, modelica_metatype _ng);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_filterNg,2,0) {(void*) boxptr_SimCodeFunctionUtil_filterNg,0}};
#define boxvar_SimCodeFunctionUtil_filterNg MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_filterNg)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isDirectionNotInputNotOutput(threadData_t *threadData, modelica_metatype _inVarDirection);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isDirectionNotInputNotOutput(threadData_t *threadData, modelica_metatype _inVarDirection);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isDirectionNotInputNotOutput,2,0) {(void*) boxptr_SimCodeFunctionUtil_isDirectionNotInputNotOutput,0}};
#define boxvar_SimCodeFunctionUtil_isDirectionNotInputNotOutput MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isDirectionNotInputNotOutput)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isDirectionNotInput(threadData_t *threadData, modelica_metatype _inVarDirection);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isDirectionNotInput(threadData_t *threadData, modelica_metatype _inVarDirection);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isDirectionNotInput,2,0) {(void*) boxptr_SimCodeFunctionUtil_isDirectionNotInput,0}};
#define boxvar_SimCodeFunctionUtil_isDirectionNotInput MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isDirectionNotInput)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isVarKindVarOrParameter(threadData_t *threadData, modelica_metatype _inVarKind);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isVarKindVarOrParameter(threadData_t *threadData, modelica_metatype _inVarKind);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isVarKindVarOrParameter,2,0) {(void*) boxptr_SimCodeFunctionUtil_isVarKindVarOrParameter,0}};
#define boxvar_SimCodeFunctionUtil_isVarKindVarOrParameter MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isVarKindVarOrParameter)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isVarNotInputNotOutput(threadData_t *threadData, modelica_metatype _inElement);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isVarNotInputNotOutput(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isVarNotInputNotOutput,2,0) {(void*) boxptr_SimCodeFunctionUtil_isVarNotInputNotOutput,0}};
#define boxvar_SimCodeFunctionUtil_isVarNotInputNotOutput MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isVarNotInputNotOutput)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isVarQ(threadData_t *threadData, modelica_metatype _inElement);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isVarQ(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isVarQ,2,0) {(void*) boxptr_SimCodeFunctionUtil_isVarQ,0}};
#define boxvar_SimCodeFunctionUtil_isVarQ MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isVarQ)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_matchMetarecordCalls(threadData_t *threadData, modelica_metatype _e, modelica_metatype _acc, modelica_metatype *out_outExps);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_matchMetarecordCalls,2,0) {(void*) boxptr_SimCodeFunctionUtil_matchMetarecordCalls,0}};
#define boxvar_SimCodeFunctionUtil_matchMetarecordCalls MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_matchMetarecordCalls)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateRecordDeclarations(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _inAccRecordDecls, modelica_metatype _inReturnTypes, modelica_metatype *out_outReturnTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateRecordDeclarations,2,0) {(void*) boxptr_SimCodeFunctionUtil_elaborateRecordDeclarations,0}};
#define boxvar_SimCodeFunctionUtil_elaborateRecordDeclarations MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateRecordDeclarations)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateRecordDeclarationsFromTypes(threadData_t *threadData, modelica_metatype _inTypes, modelica_metatype _inAccRecordDecls, modelica_metatype _inReturnTypes, modelica_metatype *out_outReturnTypes);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateRecordDeclarationsFromTypes,2,0) {(void*) boxptr_SimCodeFunctionUtil_elaborateRecordDeclarationsFromTypes,0}};
#define boxvar_SimCodeFunctionUtil_elaborateRecordDeclarationsFromTypes MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateRecordDeclarationsFromTypes)
PROTECTED_FUNCTION_STATIC void omc_SimCodeFunctionUtil_isLiteralExp(threadData_t *threadData, modelica_metatype _iexp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isLiteralExp,2,0) {(void*) boxptr_SimCodeFunctionUtil_isLiteralExp,0}};
#define boxvar_SimCodeFunctionUtil_isLiteralExp MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isLiteralExp)
PROTECTED_FUNCTION_STATIC void omc_SimCodeFunctionUtil_isLiteralArrayExp(threadData_t *threadData, modelica_metatype _iexp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isLiteralArrayExp,2,0) {(void*) boxptr_SimCodeFunctionUtil_isLiteralArrayExp,0}};
#define boxvar_SimCodeFunctionUtil_isLiteralArrayExp MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isLiteralArrayExp)
PROTECTED_FUNCTION_STATIC void omc_SimCodeFunctionUtil_isTrivialLiteralExp(threadData_t *threadData, modelica_metatype _exp);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isTrivialLiteralExp,2,0) {(void*) boxptr_SimCodeFunctionUtil_isTrivialLiteralExp,0}};
#define boxvar_SimCodeFunctionUtil_isTrivialLiteralExp MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isTrivialLiteralExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_listToCons2(threadData_t *threadData, modelica_metatype _ies);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_listToCons2,2,0) {(void*) boxptr_SimCodeFunctionUtil_listToCons2,0}};
#define boxvar_SimCodeFunctionUtil_listToCons2 MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_listToCons2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_listToCons(threadData_t *threadData, modelica_metatype _e);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_listToCons,2,0) {(void*) boxptr_SimCodeFunctionUtil_listToCons,0}};
#define boxvar_SimCodeFunctionUtil_listToCons MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_listToCons)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_replaceLiteralExp2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_replaceLiteralExp2,2,0) {(void*) boxptr_SimCodeFunctionUtil_replaceLiteralExp2,0}};
#define boxvar_SimCodeFunctionUtil_replaceLiteralExp2 MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_replaceLiteralExp2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_replaceLiteralExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_replaceLiteralExp,2,0) {(void*) boxptr_SimCodeFunctionUtil_replaceLiteralExp,0}};
#define boxvar_SimCodeFunctionUtil_replaceLiteralExp MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_replaceLiteralExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_replaceLiteralArrayExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_replaceLiteralArrayExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_replaceLiteralArrayExp,2,0) {(void*) boxptr_SimCodeFunctionUtil_replaceLiteralArrayExp,0}};
#define boxvar_SimCodeFunctionUtil_replaceLiteralArrayExp MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_replaceLiteralArrayExp)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isParallelArrayVar(threadData_t *threadData, modelica_metatype _var);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isParallelArrayVar(threadData_t *threadData, modelica_metatype _var);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isParallelArrayVar,2,0) {(void*) boxptr_SimCodeFunctionUtil_isParallelArrayVar,0}};
#define boxvar_SimCodeFunctionUtil_isParallelArrayVar MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isParallelArrayVar)
PROTECTED_FUNCTION_STATIC void omc_SimCodeFunctionUtil_isBoxedArg(threadData_t *threadData, modelica_metatype _var);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isBoxedArg,2,0) {(void*) boxptr_SimCodeFunctionUtil_isBoxedArg,0}};
#define boxvar_SimCodeFunctionUtil_isBoxedArg MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isBoxedArg)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isFunctionPtr(threadData_t *threadData, modelica_metatype _var);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isFunctionPtr(threadData_t *threadData, modelica_metatype _var);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isFunctionPtr,2,0) {(void*) boxptr_SimCodeFunctionUtil_isFunctionPtr,0}};
#define boxvar_SimCodeFunctionUtil_isFunctionPtr MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isFunctionPtr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateStatement(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateStatement,2,0) {(void*) boxptr_SimCodeFunctionUtil_elaborateStatement,0}};
#define boxvar_SimCodeFunctionUtil_elaborateStatement MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateStatement)
PROTECTED_FUNCTION_STATIC modelica_integer omc_SimCodeFunctionUtil_findIndexInList(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _outVars, modelica_integer _inCurrentIndex, modelica_boolean *out_hasBinding);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_findIndexInList(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _outVars, modelica_metatype _inCurrentIndex, modelica_metatype *out_hasBinding);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_findIndexInList,2,0) {(void*) boxptr_SimCodeFunctionUtil_findIndexInList,0}};
#define boxvar_SimCodeFunctionUtil_findIndexInList MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_findIndexInList)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_assignOutputIndex(threadData_t *threadData, modelica_metatype _simExtArgIn, modelica_metatype _outVars);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_assignOutputIndex,2,0) {(void*) boxptr_SimCodeFunctionUtil_assignOutputIndex,0}};
#define boxvar_SimCodeFunctionUtil_assignOutputIndex MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_assignOutputIndex)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_fixOutputIndex(threadData_t *threadData, modelica_metatype _outVars, modelica_metatype _simExtArgsIn, modelica_metatype _extReturnIn, modelica_metatype *out_extReturnOut);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_fixOutputIndex,2,0) {(void*) boxptr_SimCodeFunctionUtil_fixOutputIndex,0}};
#define boxvar_SimCodeFunctionUtil_fixOutputIndex MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_fixOutputIndex)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_extArgsToSimExtArgs(threadData_t *threadData, modelica_metatype _extArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_extArgsToSimExtArgs,2,0) {(void*) boxptr_SimCodeFunctionUtil_extArgsToSimExtArgs,0}};
#define boxvar_SimCodeFunctionUtil_extArgsToSimExtArgs MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_extArgsToSimExtArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_daeInOutSimVar(threadData_t *threadData, modelica_metatype _inElement);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_daeInOutSimVar,2,0) {(void*) boxptr_SimCodeFunctionUtil_daeInOutSimVar,0}};
#define boxvar_SimCodeFunctionUtil_daeInOutSimVar MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_daeInOutSimVar)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_typesSimFunctionArg(threadData_t *threadData, modelica_metatype _inFuncArg, modelica_metatype _binding);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_typesSimFunctionArg,2,0) {(void*) boxptr_SimCodeFunctionUtil_typesSimFunctionArg,0}};
#define boxvar_SimCodeFunctionUtil_typesSimFunctionArg MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_typesSimFunctionArg)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateFunction(threadData_t *threadData, modelica_metatype _program, modelica_metatype _inElement, modelica_metatype _inRecordTypes, modelica_metatype _inRecordDecls, modelica_metatype _inIncludes, modelica_metatype _inIncludeDirs, modelica_metatype _inLibs, modelica_metatype _inLibPaths, modelica_metatype *out_outRecordTypes, modelica_metatype *out_outRecordDecls, modelica_metatype *out_outIncludes, modelica_metatype *out_outIncludeDirs, modelica_metatype *out_outLibs, modelica_metatype *out_outLibPaths);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateFunction,2,0) {(void*) boxptr_SimCodeFunctionUtil_elaborateFunction,0}};
#define boxvar_SimCodeFunctionUtil_elaborateFunction MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateFunction)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateFunctions2(threadData_t *threadData, modelica_metatype _program, modelica_metatype _daeElements, modelica_metatype _inFunctions, modelica_metatype _inRecordTypes, modelica_metatype _inDecls, modelica_metatype _inIncludes, modelica_metatype _inIncludeDirs, modelica_metatype _inLibs, modelica_metatype _inPaths, modelica_metatype *out_outRecordTypes, modelica_metatype *out_outDecls, modelica_metatype *out_outIncludes, modelica_metatype *out_outIncludeDirs, modelica_metatype *out_outLibs, modelica_metatype *out_outLibsPaths);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateFunctions2,2,0) {(void*) boxptr_SimCodeFunctionUtil_elaborateFunctions2,0}};
#define boxvar_SimCodeFunctionUtil_elaborateFunctions2 MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_elaborateFunctions2)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isRecordDeclEqual(threadData_t *threadData, modelica_metatype _decl1, modelica_metatype _decl2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isRecordDeclEqual(threadData_t *threadData, modelica_metatype _decl1, modelica_metatype _decl2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isRecordDeclEqual,2,0) {(void*) boxptr_SimCodeFunctionUtil_isRecordDeclEqual,0}};
#define boxvar_SimCodeFunctionUtil_isRecordDeclEqual MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isRecordDeclEqual)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isRecordDecl(threadData_t *threadData, modelica_metatype _decl, modelica_string _name);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isRecordDecl(threadData_t *threadData, modelica_metatype _decl, modelica_metatype _name);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isRecordDecl,2,0) {(void*) boxptr_SimCodeFunctionUtil_isRecordDecl,0}};
#define boxvar_SimCodeFunctionUtil_isRecordDecl MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isRecordDecl)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getRecordDependenciesFromType(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _allDecls);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getRecordDependenciesFromType,2,0) {(void*) boxptr_SimCodeFunctionUtil_getRecordDependenciesFromType,0}};
#define boxvar_SimCodeFunctionUtil_getRecordDependenciesFromType MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getRecordDependenciesFromType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getVarType(threadData_t *threadData, modelica_metatype _var);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getVarType,2,0) {(void*) boxptr_SimCodeFunctionUtil_getVarType,0}};
#define boxvar_SimCodeFunctionUtil_getVarType MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getVarType)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getRecordDependencies(threadData_t *threadData, modelica_metatype _decl, modelica_metatype _allDecls);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getRecordDependencies,2,0) {(void*) boxptr_SimCodeFunctionUtil_getRecordDependencies,0}};
#define boxvar_SimCodeFunctionUtil_getRecordDependencies MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_getRecordDependencies)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_orderRecordDecls(threadData_t *threadData, modelica_metatype _decl1, modelica_metatype _decl2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_orderRecordDecls(threadData_t *threadData, modelica_metatype _decl1, modelica_metatype _decl2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_orderRecordDecls,2,0) {(void*) boxptr_SimCodeFunctionUtil_orderRecordDecls,0}};
#define boxvar_SimCodeFunctionUtil_orderRecordDecls MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_orderRecordDecls)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isMatrixExpansion(threadData_t *threadData, modelica_metatype _rows, modelica_metatype _inCref, modelica_integer _rowIndex, modelica_integer _colIndex);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isMatrixExpansion(threadData_t *threadData, modelica_metatype _rows, modelica_metatype _inCref, modelica_metatype _rowIndex, modelica_metatype _colIndex);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isMatrixExpansion,2,0) {(void*) boxptr_SimCodeFunctionUtil_isMatrixExpansion,0}};
#define boxvar_SimCodeFunctionUtil_isMatrixExpansion MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isMatrixExpansion)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isArrayExpansion(threadData_t *threadData, modelica_metatype _inArrayElems, modelica_metatype _inCref, modelica_integer _index);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isArrayExpansion(threadData_t *threadData, modelica_metatype _inArrayElems, modelica_metatype _inCref, modelica_metatype _index);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isArrayExpansion,2,0) {(void*) boxptr_SimCodeFunctionUtil_isArrayExpansion,0}};
#define boxvar_SimCodeFunctionUtil_isArrayExpansion MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isArrayExpansion)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isNotProtected(threadData_t *threadData, modelica_metatype _simVar);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isNotProtected(threadData_t *threadData, modelica_metatype _simVar);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isNotProtected,2,0) {(void*) boxptr_SimCodeFunctionUtil_isNotProtected,0}};
#define boxvar_SimCodeFunctionUtil_isNotProtected MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_isNotProtected)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_subsToScalar(threadData_t *threadData, modelica_metatype _inExpSubscriptLst);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_subsToScalar(threadData_t *threadData, modelica_metatype _inExpSubscriptLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_subsToScalar,2,0) {(void*) boxptr_SimCodeFunctionUtil_subsToScalar,0}};
#define boxvar_SimCodeFunctionUtil_subsToScalar MMC_REFSTRUCTLIT(boxvar_lit_SimCodeFunctionUtil_subsToScalar)
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_appendCurrentCrefPrefix(threadData_t *threadData, modelica_metatype _context, modelica_string _in_cref_pref)
{
modelica_metatype _out_context = NULL;
modelica_string _cref_pref = NULL;
modelica_boolean _prl;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _context;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
_cref_pref = tmpMeta[1];
_prl = tmp5;
tmpMeta[1] = stringAppend(_cref_pref,_in_cref_pref);
tmpMeta[2] = mmc_mk_box3(4, &SimCodeFunction_Context_FUNCTION__CONTEXT__desc, tmpMeta[1], mmc_mk_boolean(_prl));
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
omc_Error_addInternalError(threadData, _OMC_LIT0, _OMC_LIT2);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_out_context = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _out_context;
}
DLLExport
modelica_string omc_SimCodeFunctionUtil_getCurrentCrefPrefix(threadData_t *threadData, modelica_metatype _context)
{
modelica_string _cref_pref = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _context;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cref_pref = tmpMeta[0];
tmp1 = _cref_pref;
goto tmp3_done;
}
case 1: {
omc_Error_addInternalError(threadData, _OMC_LIT3, _OMC_LIT4);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_cref_pref = tmp1;
_return: OMC_LABEL_UNUSED
return _cref_pref;
}
DLLExport
modelica_string omc_SimCodeFunctionUtil_generateSubPalceholders(threadData_t *threadData, modelica_metatype _cr)
{
modelica_string _outdef = NULL;
modelica_metatype _dims = NULL;
modelica_integer _nrdims;
modelica_metatype _idxstrlst = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_dims = omc_ComponentReference_crefDims(threadData, _cr);
_nrdims = listLength(_dims);
_idxstrlst = omc_List_map(threadData, omc_List_intRange(threadData, _nrdims), boxvar_intString);
_outdef = stringDelimitList(omc_List_threadMap(threadData, omc_List_fill(threadData, _OMC_LIT5, _nrdims), _idxstrlst, boxvar_stringAppend), _OMC_LIT6);
_return: OMC_LABEL_UNUSED
return _outdef;
}
DLLExport
modelica_string omc_SimCodeFunctionUtil_twodigit(threadData_t *threadData, modelica_integer _i)
{
modelica_string _outS = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _s = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if((!(_i < ((modelica_integer) 10))))
{
goto goto_2;
}
_s = intString(_i);
tmpMeta[0] = stringAppend(_OMC_LIT7,_s);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
case 1: {
tmp1 = intString(_i);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outS = tmp1;
_return: OMC_LABEL_UNUSED
return _outS;
}
modelica_metatype boxptr_SimCodeFunctionUtil_twodigit(threadData_t *threadData, modelica_metatype _i)
{
modelica_integer tmp1;
modelica_string _outS = NULL;
tmp1 = mmc_unbox_integer(_i);
_outS = omc_SimCodeFunctionUtil_twodigit(threadData, tmp1);
return _outS;
}
DLLExport
modelica_boolean omc_SimCodeFunctionUtil_isParallelFunctionContext(threadData_t *threadData, modelica_metatype _context)
{
modelica_boolean _outBool;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _context;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
tmp1 = mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_context), 3))));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBool = tmp1;
_return: OMC_LABEL_UNUSED
return _outBool;
}
modelica_metatype boxptr_SimCodeFunctionUtil_isParallelFunctionContext(threadData_t *threadData, modelica_metatype _context)
{
modelica_boolean _outBool;
modelica_metatype out_outBool;
_outBool = omc_SimCodeFunctionUtil_isParallelFunctionContext(threadData, _context);
out_outBool = mmc_mk_icon(_outBool);
return out_outBool;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_varName(threadData_t *threadData, modelica_metatype _var)
{
modelica_metatype _name = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _var;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _name;
}
DLLExport
modelica_integer omc_SimCodeFunctionUtil_varIndex(threadData_t *threadData, modelica_metatype _var)
{
modelica_integer _index;
modelica_integer tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _var;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_index = tmp1;
_return: OMC_LABEL_UNUSED
return _index;
}
modelica_metatype boxptr_SimCodeFunctionUtil_varIndex(threadData_t *threadData, modelica_metatype _var)
{
modelica_integer _index;
modelica_metatype out_index;
_index = omc_SimCodeFunctionUtil_varIndex(threadData, _var);
out_index = mmc_mk_icon(_index);
return out_index;
}
DLLExport
modelica_integer omc_SimCodeFunctionUtil_codegenPeekTryThrowIndex(threadData_t *threadData)
{
modelica_integer _i;
modelica_metatype _lst = NULL;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_lst = getGlobalRoot(((modelica_integer) 1));
{
modelica_metatype tmp4_1;
tmp4_1 = _lst;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_i = tmp6;
tmp1 = _i;
goto tmp3_done;
}
case 1: {
tmp1 = ((modelica_integer) -1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_i = tmp1;
_return: OMC_LABEL_UNUSED
return _i;
}
modelica_metatype boxptr_SimCodeFunctionUtil_codegenPeekTryThrowIndex(threadData_t *threadData)
{
modelica_integer _i;
modelica_metatype out_i;
_i = omc_SimCodeFunctionUtil_codegenPeekTryThrowIndex(threadData);
out_i = mmc_mk_icon(_i);
return out_i;
}
DLLExport
void omc_SimCodeFunctionUtil_codegenPopTryThrowIndex(threadData_t *threadData)
{
modelica_metatype _lst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_lst = getGlobalRoot(((modelica_integer) 1));
tmpMeta[0] = _lst;
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_lst = tmpMeta[2];
setGlobalRoot(((modelica_integer) 1), _lst);
_return: OMC_LABEL_UNUSED
return;
}
DLLExport
void omc_SimCodeFunctionUtil_codegenPushTryThrowIndex(threadData_t *threadData, modelica_integer _i)
{
modelica_metatype _lst = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_lst = getGlobalRoot(((modelica_integer) 1));
tmpMeta[0] = mmc_mk_cons(mmc_mk_integer(_i), _lst);
setGlobalRoot(((modelica_integer) 1), tmpMeta[0]);
_return: OMC_LABEL_UNUSED
return;
}
void boxptr_SimCodeFunctionUtil_codegenPushTryThrowIndex(threadData_t *threadData, modelica_metatype _i)
{
modelica_integer tmp1;
tmp1 = mmc_unbox_integer(_i);
omc_SimCodeFunctionUtil_codegenPushTryThrowIndex(threadData, tmp1);
return;
}
DLLExport
void omc_SimCodeFunctionUtil_codegenResetTryThrowIndex(threadData_t *threadData)
{
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
setGlobalRoot(((modelica_integer) 1), tmpMeta[0]);
_return: OMC_LABEL_UNUSED
return;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_createMakefileParams(threadData_t *threadData, modelica_metatype _includes, modelica_metatype _libs, modelica_metatype _libPaths, modelica_boolean _isFunction, modelica_boolean _isFMU)
{
modelica_metatype _makefileParams = NULL;
modelica_string _omhome = NULL;
modelica_string _ccompiler = NULL;
modelica_string _cxxcompiler = NULL;
modelica_string _linker = NULL;
modelica_string _exeext = NULL;
modelica_string _dllext = NULL;
modelica_string _cflags = NULL;
modelica_string _ldflags = NULL;
modelica_string _rtlibs = NULL;
modelica_string _platform = NULL;
modelica_string _fopenmp = NULL;
modelica_string _compileDir = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ccompiler = ((stringEqual(omc_Config_simCodeTarget(threadData), _OMC_LIT8))?_OMC_LIT9:(omc_Flags_isSet(threadData, _OMC_LIT13)?omc_System_getOMPCCompiler(threadData):omc_System_getCCompiler(threadData)));
_cxxcompiler = ((stringEqual(omc_Config_simCodeTarget(threadData), _OMC_LIT8))?_OMC_LIT9:omc_System_getCXXCompiler(threadData));
_linker = ((stringEqual(omc_Config_simCodeTarget(threadData), _OMC_LIT8))?_OMC_LIT9:omc_System_getLinker(threadData));
_exeext = ((stringEqual(omc_Config_simCodeTarget(threadData), _OMC_LIT8))?_OMC_LIT14:_OMC_LIT15);
_dllext = _OMC_LIT15;
_omhome = omc_Settings_getInstallationDirectoryPath(threadData);
_omhome = omc_System_trim(threadData, _omhome, _OMC_LIT16);
tmpMeta[0] = stringAppend(omc_System_getCFlags(threadData),_OMC_LIT17);
tmpMeta[1] = stringAppend(tmpMeta[0],(omc_Flags_isSet(threadData, _OMC_LIT13)?_OMC_LIT18:_OMC_LIT15));
_cflags = tmpMeta[1];
_cflags = ((stringEqual(omc_Config_simCodeTarget(threadData), _OMC_LIT8))?_OMC_LIT19:_cflags);
_ldflags = omc_System_getLDFlags(threadData);
if(omc_Flags_getConfigBool(threadData, _OMC_LIT26))
{
tmpMeta[0] = stringAppend(_OMC_LIT20,_ldflags);
_ldflags = tmpMeta[0];
}
_rtlibs = _OMC_LIT15;
_platform = omc_System_modelicaPlatform(threadData);
tmpMeta[0] = stringAppend(omc_System_pwd(threadData),_OMC_LIT27);
_compileDir = tmpMeta[0];
tmpMeta[0] = mmc_mk_box15(3, &SimCodeFunction_MakefileParams_MAKEFILE__PARAMS__desc, _ccompiler, _cxxcompiler, _linker, _exeext, _dllext, _omhome, _cflags, _ldflags, _rtlibs, _includes, _libs, _libPaths, _platform, _compileDir);
_makefileParams = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _makefileParams;
}
modelica_metatype boxptr_SimCodeFunctionUtil_createMakefileParams(threadData_t *threadData, modelica_metatype _includes, modelica_metatype _libs, modelica_metatype _libPaths, modelica_metatype _isFunction, modelica_metatype _isFMU)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _makefileParams = NULL;
tmp1 = mmc_unbox_integer(_isFunction);
tmp2 = mmc_unbox_integer(_isFMU);
_makefileParams = omc_SimCodeFunctionUtil_createMakefileParams(threadData, _includes, _libs, _libPaths, tmp1, tmp2);
return _makefileParams;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_variableString(threadData_t *threadData, modelica_metatype _var)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _var;
{
modelica_metatype _name = NULL;
modelica_metatype _ty = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,7) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_name = tmpMeta[0];
_ty = tmpMeta[1];
tmpMeta[0] = stringAppend(omc_Types_unparseType(threadData, _ty),_OMC_LIT17);
tmpMeta[1] = stringAppend(tmpMeta[0],omc_ComponentReference_printComponentRefStr(threadData, _name));
tmp1 = tmpMeta[1];
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_str = tmpMeta[0];
tmpMeta[0] = stringAppend(_OMC_LIT28,_str);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_aliasRecordDeclarations2(threadData_t *threadData, modelica_string _str, modelica_metatype _path, modelica_metatype _inHt, modelica_metatype *out_ht)
{
modelica_metatype _alias = NULL;
modelica_metatype _ht = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _aliasStr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_aliasStr = omc_AbsynUtil_pathStringUnquoteReplaceDot(threadData, omc_BaseHashTable_get(threadData, _str, _inHt), _OMC_LIT29);
tmpMeta[0+0] = mmc_mk_some(_aliasStr);
tmpMeta[0+1] = _inHt;
goto tmp3_done;
}
case 1: {
tmpMeta[2] = mmc_mk_box2(0, _str, _path);
_ht = omc_BaseHashTable_add(threadData, tmpMeta[2], _inHt);
tmpMeta[0+0] = mmc_mk_none();
tmpMeta[0+1] = _ht;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_alias = tmpMeta[0+0];
_ht = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_ht) { *out_ht = _ht; }
return _alias;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_aliasRecordDeclarations(threadData_t *threadData, modelica_metatype _inDecl, modelica_metatype _inHt, modelica_metatype *out_ht)
{
modelica_metatype _decl = NULL;
modelica_metatype _ht = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inDecl;
{
modelica_metatype _vars = NULL;
modelica_metatype _name = NULL;
modelica_string _str = NULL;
modelica_string _sname = NULL;
modelica_metatype _alias = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_sname = tmpMeta[2];
_name = tmpMeta[3];
_vars = tmpMeta[4];
_str = stringDelimitList(omc_List_map(threadData, _vars, boxvar_SimCodeFunctionUtil_variableString), _OMC_LIT30);
_alias = omc_SimCodeFunctionUtil_aliasRecordDeclarations2(threadData, _str, _name, _inHt ,&_ht);
tmpMeta[2] = mmc_mk_box5(3, &SimCodeFunction_RecordDeclaration_RECORD__DECL__FULL__desc, _sname, _alias, _name, _vars);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _ht;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inDecl;
tmpMeta[0+1] = _inHt;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_decl = tmpMeta[0+0];
_ht = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_ht) { *out_ht = _ht; }
return _decl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_matchNonBuiltinCallsAndFnRefPaths(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _itpl, modelica_metatype *out_otpl)
{
modelica_metatype _outExp = NULL;
modelica_metatype _otpl = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _itpl;
{
modelica_metatype _path = NULL;
modelica_metatype _acc = NULL;
modelica_metatype _filter = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (0 != tmp6) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_path = tmpMeta[2];
_acc = tmpMeta[5];
_filter = tmpMeta[6];
tmp4 += 3;
_path = omc_AbsynUtil_makeNotFullyQualified(threadData, _path);
tmp7 = omc_List_isMemberOnTrue(threadData, _path, _filter, boxvar_AbsynUtil_pathEqual);
if (0 != tmp7) goto goto_2;
tmpMeta[2] = mmc_mk_cons(_path, _acc);
tmpMeta[3] = mmc_mk_box2(0, tmpMeta[2], _filter);
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 1: {
modelica_boolean tmp8;
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,27,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_path = tmpMeta[3];
_acc = tmpMeta[4];
_filter = tmpMeta[5];
tmp4 += 2;
tmp8 = omc_List_isMemberOnTrue(threadData, _path, _OMC_LIT51, boxvar_AbsynUtil_pathEqual);
if (0 != tmp8) goto goto_2;
tmp9 = omc_List_isMemberOnTrue(threadData, _path, _filter, boxvar_AbsynUtil_pathEqual);
if (0 != tmp9) goto goto_2;
tmpMeta[2] = mmc_mk_cons(_path, _acc);
tmpMeta[3] = mmc_mk_box2(0, tmpMeta[2], _filter);
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 2: {
modelica_boolean tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_path = tmpMeta[2];
_acc = tmpMeta[3];
_filter = tmpMeta[4];
tmp4 += 1;
_path = omc_AbsynUtil_makeNotFullyQualified(threadData, _path);
tmp10 = omc_List_isMemberOnTrue(threadData, _path, _filter, boxvar_AbsynUtil_pathEqual);
if (0 != tmp10) goto goto_2;
tmpMeta[2] = mmc_mk_cons(_path, _acc);
tmpMeta[3] = mmc_mk_box2(0, tmpMeta[2], _filter);
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 3: {
modelica_integer tmp11;
modelica_boolean tmp12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],13,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp11 = mmc_unbox_integer(tmpMeta[3]);
if (0 != tmp11) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_acc = tmpMeta[4];
_filter = tmpMeta[5];
_path = omc_AbsynUtil_crefToPath(threadData, omc_SimCodeFunctionUtil_getCrefFromExp(threadData, _inExp));
tmp12 = omc_List_isMemberOnTrue(threadData, _path, _filter, boxvar_AbsynUtil_pathEqual);
if (0 != tmp12) goto goto_2;
tmpMeta[2] = mmc_mk_cons(_path, _acc);
tmpMeta[3] = mmc_mk_box2(0, tmpMeta[2], _filter);
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 4: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _itpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_otpl = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_otpl) { *out_otpl = _otpl; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_addDestructor2(threadData_t *threadData, modelica_metatype _path, modelica_string _pathstr, modelica_metatype _inHt)
{
modelica_metatype _ht = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ht = _inHt;
if((!omc_BaseHashTable_hasKey(threadData, _pathstr, _ht)))
{
tmpMeta[0] = mmc_mk_box2(0, _pathstr, _path);
omc_BaseHashTable_add(threadData, tmpMeta[0], _ht);
}
_return: OMC_LABEL_UNUSED
return _ht;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_addDestructor(threadData_t *threadData, modelica_metatype _func, modelica_metatype _inHt)
{
modelica_metatype _outHt = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _func;
{
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,10) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],11,4) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],9,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],17,1) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_path = tmpMeta[4];
_path = omc_AbsynUtil_joinPaths(threadData, _path, _OMC_LIT53);
tmpMeta[0] = omc_SimCodeFunctionUtil_addDestructor2(threadData, _path, omc_AbsynUtil_pathStringNoQual(threadData, _path, _OMC_LIT54, 0, 0), _inHt);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inHt;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outHt = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outHt;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_getCalledFunctionsInFunction2(threadData_t *threadData, modelica_metatype _inPath, modelica_string _pathstr, modelica_metatype _inHt, modelica_metatype _funcs)
{
modelica_metatype _outHt = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inPath;
tmp3_2 = _inHt;
{
modelica_string _str = NULL;
modelica_metatype _path = NULL;
modelica_metatype _funcelem = NULL;
modelica_metatype _calledfuncs = NULL;
modelica_metatype _varfuncs = NULL;
modelica_metatype _els = NULL;
modelica_metatype _ht = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_ht = tmp3_2;
if (!omc_BaseHashTable_hasKey(threadData, _pathstr, _ht)) goto tmp2_end;
tmpMeta[0] = _ht;
goto tmp2_done;
}
case 1: {
_path = tmp3_1;
_ht = tmp3_2;
_funcelem = omc_DAEUtil_getNamedFunction(threadData, _path, _funcs);
_els = omc_DAEUtil_getFunctionElements(threadData, _funcelem);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_varfuncs = omc_List_fold(threadData, _els, boxvar_DAEUtil_collectFunctionRefVarPaths, tmpMeta[1]);
tmpMeta[3] = mmc_mk_box2(0, boxvar_DAEUtil_collectValueblockFunctionRefVars, _varfuncs);
omc_DAEUtil_traverseDAEElementList(threadData, _els, boxvar_Expression_traverseSubexpressionsHelper, tmpMeta[3], &tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_varfuncs = tmpMeta[2];
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = mmc_mk_box2(0, tmpMeta[4], _varfuncs);
tmpMeta[6] = mmc_mk_box2(0, boxvar_SimCodeFunctionUtil_matchNonBuiltinCallsAndFnRefPaths, tmpMeta[5]);
omc_DAEUtil_traverseDAEElementList(threadData, _els, boxvar_Expression_traverseSubexpressionsHelper, tmpMeta[6], &tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
_calledfuncs = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _pathstr, _path);
_ht = omc_BaseHashTable_add(threadData, tmpMeta[1], _ht);
_ht = omc_SimCodeFunctionUtil_addDestructor(threadData, _funcelem, _ht);
tmpMeta[0] = omc_SimCodeFunctionUtil_getCalledFunctionsInFunctions(threadData, _calledfuncs, _ht, _funcs);
goto tmp2_done;
}
case 2: {
modelica_boolean tmp5;
_path = tmp3_1;
tmp5 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_DAEUtil_getNamedFunction(threadData, _path, _funcs);
tmp5 = 1;
goto goto_6;
goto_6:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp5) {goto goto_1;}
tmpMeta[1] = stringAppend(_OMC_LIT55,_pathstr);
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT56);
_str = tmpMeta[2];
omc_Error_addInternalError(threadData, _str, _OMC_LIT57);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outHt = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outHt;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getCalledFunctionsInFunctions(threadData_t *threadData, modelica_metatype _paths, modelica_metatype _inHt, modelica_metatype _funcs)
{
modelica_metatype _outHt = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _paths;
tmp3_2 = _inHt;
{
modelica_metatype _rest = NULL;
modelica_metatype _path = NULL;
modelica_metatype _ht = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_ht = tmp3_2;
tmpMeta[0] = _ht;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_path = tmpMeta[1];
_rest = tmpMeta[2];
_ht = tmp3_2;
_ht = omc_SimCodeFunctionUtil_getCalledFunctionsInFunction2(threadData, _path, omc_AbsynUtil_pathStringNoQual(threadData, _path, _OMC_LIT54, 0, 0), _ht, _funcs);
_paths = _rest;
_inHt = _ht;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outHt = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outHt;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_getImplicitRecordConstructors(threadData_t *threadData, modelica_metatype _inExpLst)
{
modelica_metatype _outExpLst = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExpLst;
{
modelica_metatype _cref = NULL;
modelica_metatype _record_path = NULL;
modelica_metatype _rest_expr = NULL;
modelica_metatype _record_cref = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],6,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],9,3) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_cref = tmpMeta[3];
_record_path = tmpMeta[6];
_rest_expr = tmpMeta[2];
tmpMeta[1] = omc_ComponentReference_crefLastSubs(threadData, _cref);
if (!listEmpty(tmpMeta[1])) goto goto_1;
_cref = omc_ComponentReference_pathToCref(threadData, _record_path);
_record_cref = omc_Expression_crefExp(threadData, _cref);
_rest_expr = omc_SimCodeFunctionUtil_getImplicitRecordConstructors(threadData, _rest_expr);
tmpMeta[1] = mmc_mk_cons(_record_cref, _rest_expr);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest_expr = tmpMeta[2];
tmpMeta[0] = omc_SimCodeFunctionUtil_getImplicitRecordConstructors(threadData, _rest_expr);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExpLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExpLst;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_generateExtFunctionDynamicLoad(threadData_t *threadData, modelica_metatype _inMod)
{
modelica_boolean _outDynamicLoad;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
tmpMeta[0] = omc_Mod_getUnelabedSubMod(threadData, _inMod, _OMC_LIT58);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,5) == 0) goto goto_2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (optionNone(tmpMeta[1])) goto goto_2;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],4,1) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
_b = tmp6;
tmp1 = _b;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outDynamicLoad = tmp1;
_return: OMC_LABEL_UNUSED
return _outDynamicLoad;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_generateExtFunctionDynamicLoad(threadData_t *threadData, modelica_metatype _inMod)
{
modelica_boolean _outDynamicLoad;
modelica_metatype out_outDynamicLoad;
_outDynamicLoad = omc_SimCodeFunctionUtil_generateExtFunctionDynamicLoad(threadData, _inMod);
out_outDynamicLoad = mmc_mk_icon(_outDynamicLoad);
return out_outDynamicLoad;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionIncludesIncludestr(threadData_t *threadData, modelica_metatype _inMod)
{
modelica_metatype _includes = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _inc = NULL;
modelica_string _inc_1 = NULL;
modelica_integer _lineNumberStart;
modelica_string _str = NULL;
modelica_string _fileName = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_boolean tmp6;
tmpMeta[1] = omc_Mod_getUnelabedSubMod(threadData, _inMod, _OMC_LIT59);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[2])) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto goto_1;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 4));
tmp5 = mmc_unbox_integer(tmpMeta[7]);
_inc = tmpMeta[4];
_fileName = tmpMeta[6];
_lineNumberStart = tmp5;
tmpMeta[1] = stringAppend(_OMC_LIT60,intString(_lineNumberStart));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT61);
tmpMeta[3] = stringAppend(tmpMeta[2],_fileName);
tmpMeta[4] = stringAppend(tmpMeta[3],_OMC_LIT16);
_str = tmpMeta[4];
_inc_1 = omc_System_unescapedString(threadData, _inc);
tmp6 = (modelica_boolean)(omc_Config_acceptMetaModelicaGrammar(threadData) || omc_Flags_isSet(threadData, _OMC_LIT65));
if(tmp6)
{
tmpMeta[1] = mmc_mk_cons(_str, mmc_mk_cons(_inc_1, MMC_REFSTRUCTLIT(mmc_nil)));
tmpMeta[3] = tmpMeta[1];
}
else
{
tmpMeta[2] = mmc_mk_cons(_inc_1, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_includes = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _includes;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionIncludesLibstr(threadData_t *threadData, modelica_string _target, modelica_metatype _inMod, modelica_metatype *out_names)
{
modelica_metatype _outStringLst = NULL;
modelica_metatype _names = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_string tmp4_1;
tmp4_1 = omc_SimCodeFunctionUtil_getGerneralTarget(threadData, _target);
{
modelica_metatype _arr = NULL;
modelica_metatype _libsList = NULL;
modelica_metatype _namesList = NULL;
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT67), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta[2] = omc_Mod_getUnelabedSubMod(threadData, _inMod, _OMC_LIT66);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,5) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (optionNone(tmpMeta[3])) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],13,1) == 0) goto goto_2;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_arr = tmpMeta[5];
_libsList = omc_List_map__2(threadData, _arr, boxvar_SimCodeFunctionUtil_getLibraryStringInMSVCFormat ,&_namesList);
tmpMeta[0+0] = omc_List_flatten(threadData, _libsList);
tmpMeta[0+1] = omc_List_flatten(threadData, _namesList);
goto tmp3_done;
}
case 1: {
if (4 != MMC_STRLEN(tmp4_1) || strcmp(MMC_STRINGDATA(_OMC_LIT67), MMC_STRINGDATA(tmp4_1)) != 0) goto tmp3_end;
tmpMeta[2] = omc_Mod_getUnelabedSubMod(threadData, _inMod, _OMC_LIT66);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,5) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (optionNone(tmpMeta[3])) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
_exp = tmpMeta[4];
tmpMeta[0+0] = omc_SimCodeFunctionUtil_getLibraryStringInMSVCFormat(threadData, _exp, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
tmpMeta[2] = omc_Mod_getUnelabedSubMod(threadData, _inMod, _OMC_LIT66);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,5) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (optionNone(tmpMeta[3])) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],13,1) == 0) goto goto_2;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_arr = tmpMeta[5];
_libsList = omc_List_map__2(threadData, _arr, boxvar_SimCodeFunctionUtil_getLibraryStringInGccFormat ,&_namesList);
tmpMeta[0+0] = omc_List_flatten(threadData, _libsList);
tmpMeta[0+1] = omc_List_flatten(threadData, _namesList);
goto tmp3_done;
}
case 3: {
tmpMeta[2] = omc_Mod_getUnelabedSubMod(threadData, _inMod, _OMC_LIT66);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,5) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (optionNone(tmpMeta[3])) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
_exp = tmpMeta[4];
tmpMeta[0+0] = omc_SimCodeFunctionUtil_getLibraryStringInGccFormat(threadData, _exp, &tmpMeta[0+1]);
goto tmp3_done;
}
case 4: {
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outStringLst = tmpMeta[0+0];
_names = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_names) { *out_names = _names; }
return _outStringLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getLibraryStringInGccFormat(threadData_t *threadData, modelica_metatype _exp, modelica_metatype *out_names)
{
modelica_metatype _strs = NULL;
modelica_metatype _names = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
modelica_string _str = NULL;
modelica_metatype _strs1 = NULL;
modelica_metatype _strs2 = NULL;
modelica_metatype _strs3 = NULL;
modelica_metatype _names1 = NULL;
modelica_metatype _names2 = NULL;
modelica_metatype _names3 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 13; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT87), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 10;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT88), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 9;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (7 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT89), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 8;
if (!0) goto tmp3_end;
omc_Error_addCompilerNotification(threadData, _OMC_LIT68);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (2 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT90), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 7;
if (!0) goto tmp3_end;
omc_Error_addCompilerNotification(threadData, _OMC_LIT69);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT91), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 6;
if (!0) goto tmp3_end;
omc_Error_addCompilerNotification(threadData, _OMC_LIT70);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT92), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 5;
if (!0) goto tmp3_end;
omc_Error_addCompilerNotification(threadData, _OMC_LIT71);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (5 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT93), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
_str = tmpMeta[2];
tmp4 += 4;
if (!0) goto tmp3_end;
tmpMeta[2] = stringAppend(_OMC_LIT72,_str);
_str = tmpMeta[2];
omc_Error_addCompilerNotification(threadData, _OMC_LIT73);
tmpMeta[2] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (3 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT94), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 3;
if (!0) goto tmp3_end;
omc_Error_addCompilerNotification(threadData, _OMC_LIT74);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (10 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT95), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 2;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_strs = tmpMeta[2];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _strs;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (17 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT96), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 1;
_str = _OMC_LIT15;
tmpMeta[2] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT97), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _OMC_LIT76;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_str = tmpMeta[2];
if((stringEqual(_str, _OMC_LIT83)))
{
_strs1 = omc_SimCodeFunctionUtil_getLibraryStringInGccFormat(threadData, _OMC_LIT78 ,&_names1);
_strs2 = omc_SimCodeFunctionUtil_getLibraryStringInGccFormat(threadData, _OMC_LIT80 ,&_names2);
_strs3 = omc_SimCodeFunctionUtil_getLibraryStringInGccFormat(threadData, _OMC_LIT82 ,&_names3);
_strs = listAppend(_strs1, listAppend(_strs2, _strs3));
_names = listAppend(_names1, listAppend(_names2, _names3));
}
else
{
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_strs = tmpMeta[2];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
_names = tmpMeta[2];
}
if((omc_System_regularFileExists(threadData, _str) || (stringEqual(_OMC_LIT84, stringGetStringChar(_str, ((modelica_integer) 1))))))
{
tmpMeta[2] = mmc_mk_cons(_str, _strs);
_strs = tmpMeta[2];
}
else
{
tmpMeta[3] = stringAppend(_OMC_LIT72,_str);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _strs);
_strs = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_str, _names);
_names = tmpMeta[2];
}
tmpMeta[0+0] = _strs;
tmpMeta[0+1] = _names;
goto tmp3_done;
}
case 12: {
omc_Error_addInternalError(threadData, _OMC_LIT85, _OMC_LIT86);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 13) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_strs = tmpMeta[0+0];
_names = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_names) { *out_names = _names; }
return _strs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getLibraryStringInMSVCFormat(threadData_t *threadData, modelica_metatype _exp, modelica_metatype *out_names)
{
modelica_metatype _strs = NULL;
modelica_metatype _names = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
modelica_string _str = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_str = tmpMeta[2];
if (!((stringEqual(_str, _OMC_LIT88)) || (stringEqual(_str, _OMC_LIT87)))) goto tmp3_end;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _OMC_LIT101;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (10 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT95), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 2;
tmp6 = 0;
if (1 != tmp6) goto goto_2;
_strs = _OMC_LIT127;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _strs;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (17 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT96), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp4 += 1;
_str = _OMC_LIT15;
tmpMeta[2] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (6 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT97), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _OMC_LIT131;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 4: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_str = tmpMeta[2];
tmp7 = (stringEqual(_OMC_LIT84, stringGetStringChar(_str, ((modelica_integer) 1))));
if (1 != tmp7) goto goto_2;
tmpMeta[2] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_str = tmpMeta[2];
tmpMeta[2] = stringAppend(_str,_OMC_LIT132);
_str = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_str, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 6: {
omc_Error_addInternalError(threadData, _OMC_LIT85, _OMC_LIT133);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 7) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_strs = tmpMeta[0+0];
_names = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_names) { *out_names = _names; }
return _strs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData_t *threadData, modelica_boolean _add, modelica_string _dir, modelica_boolean _isLinux, modelica_metatype _inLibs)
{
modelica_metatype _libs = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_boolean tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _add;
tmp3_2 = _inLibs;
{
modelica_boolean _b;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (1 != tmp3_1) goto tmp2_end;
_libs = tmp3_2;
_b = omc_System_directoryExists(threadData, _dir);
tmpMeta[0] = omc_List_consOnTrue(threadData, _b, _dir, _libs);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inLibs;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_libs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _libs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData_t *threadData, modelica_metatype _add, modelica_metatype _dir, modelica_metatype _isLinux, modelica_metatype _inLibs)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _libs = NULL;
tmp1 = mmc_unbox_integer(_add);
tmp2 = mmc_unbox_integer(_isLinux);
_libs = omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData, tmp1, _dir, tmp2, _inLibs);
return _libs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths(threadData_t *threadData, modelica_metatype _program, modelica_metatype _path, modelica_metatype _inMod)
{
modelica_metatype _outLibs = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _str = NULL;
modelica_string _platform1 = NULL;
modelica_string _platform2 = NULL;
modelica_metatype _libs = NULL;
modelica_boolean _isLinux;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = omc_Mod_getUnelabedSubMod(threadData, _inMod, _OMC_LIT134);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[2])) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto goto_1;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_str = tmpMeta[4];
_str = omc_CevalScript_getFullPathFromUri(threadData, _program, _str, 0);
_platform1 = omc_System_openModelicaPlatform(threadData);
_platform2 = omc_System_modelicaPlatform(threadData);
_isLinux = 0;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_libs = omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData, 1, _str, _isLinux, tmpMeta[1]);
tmpMeta[1] = stringAppend(_str,_OMC_LIT27);
tmpMeta[2] = stringAppend(tmpMeta[1],_platform2);
_libs = omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData, (!(stringEqual(_platform2, _OMC_LIT15))), tmpMeta[2], _isLinux, _libs);
tmpMeta[1] = stringAppend(_str,_OMC_LIT27);
tmpMeta[2] = stringAppend(tmpMeta[1],_platform1);
tmpMeta[0] = omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData, (!(stringEqual(_platform1, _OMC_LIT15))), tmpMeta[2], _isLinux, _libs);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = stringAppend(_OMC_LIT135,omc_AbsynUtil_pathFirstIdent(threadData, _path));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT136);
_str = tmpMeta[2];
_str = omc_CevalScript_getFullPathFromUri(threadData, _program, _str, 0);
_platform1 = omc_System_openModelicaPlatform(threadData);
_platform2 = omc_System_modelicaPlatform(threadData);
_isLinux = 0;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_libs = omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData, 1, _str, _isLinux, tmpMeta[1]);
tmpMeta[1] = stringAppend(_str,_OMC_LIT27);
tmpMeta[2] = stringAppend(tmpMeta[1],_platform2);
_libs = omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData, (!(stringEqual(_platform2, _OMC_LIT15))), tmpMeta[2], _isLinux, _libs);
tmpMeta[1] = stringAppend(_str,_OMC_LIT27);
tmpMeta[2] = stringAppend(tmpMeta[1],_platform1);
tmpMeta[0] = omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths2(threadData, (!(stringEqual(_platform1, _OMC_LIT15))), tmpMeta[2], _isLinux, _libs);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outLibs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outLibs;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_userCompiledBinariesDirectory(threadData_t *threadData, modelica_metatype _path)
{
modelica_string _str = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = stringAppend(omc_Settings_getHomeDir(threadData, 0),_OMC_LIT137);
tmpMeta[1] = stringAppend(tmpMeta[0],omc_AbsynUtil_pathFirstIdent(threadData, _path));
_str = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _str;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_getGerneralTarget(threadData_t *threadData, modelica_string _target)
{
modelica_string _generalTarget = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_generalTarget = ((omc_System_stringFind(threadData, _target, _OMC_LIT67) == ((modelica_integer) 0))?_OMC_LIT67:_target);
_return: OMC_LABEL_UNUSED
return _generalTarget;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags2(threadData_t *threadData, modelica_string _dir, modelica_boolean _isLinux, modelica_string _target, modelica_metatype _inLibs)
{
modelica_metatype _libs = NULL;
modelica_boolean tmp1;
modelica_boolean tmp2;
modelica_string tmp3;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmp1 = (modelica_boolean)_isLinux;
if(tmp1)
{
tmpMeta[1] = stringAppend(_OMC_LIT138,_dir);
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT16);
tmpMeta[0] = mmc_mk_cons(tmpMeta[2], _inLibs);
tmpMeta[3] = tmpMeta[0];
}
else
{
tmpMeta[3] = _inLibs;
}
_libs = tmpMeta[3];
tmp2 = (modelica_boolean)(stringEqual(omc_SimCodeFunctionUtil_getGerneralTarget(threadData, _target), _OMC_LIT67));
if(tmp2)
{
tmpMeta[1] = stringAppend(_OMC_LIT139,_dir);
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT16);
tmp3 = tmpMeta[2];
}
else
{
tmpMeta[3] = stringAppend(_OMC_LIT140,_dir);
tmpMeta[4] = stringAppend(tmpMeta[3],_OMC_LIT16);
tmp3 = tmpMeta[4];
}
tmpMeta[0] = mmc_mk_cons(tmp3, _libs);
_libs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _libs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags2(threadData_t *threadData, modelica_metatype _dir, modelica_metatype _isLinux, modelica_metatype _target, modelica_metatype _inLibs)
{
modelica_integer tmp1;
modelica_metatype _libs = NULL;
tmp1 = mmc_unbox_integer(_isLinux);
_libs = omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags2(threadData, _dir, tmp1, _target, _inLibs);
return _libs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags(threadData_t *threadData, modelica_metatype _program, modelica_metatype _path, modelica_metatype _inMod, modelica_metatype _inLibs, modelica_metatype *out_installDirs, modelica_metatype *out_resources)
{
modelica_metatype _outLibs = NULL;
modelica_metatype _installDirs = NULL;
modelica_metatype _resources = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inLibs;
{
modelica_string _str = NULL;
modelica_string _target = NULL;
modelica_string _resourcesStr = NULL;
modelica_metatype _libs = NULL;
modelica_metatype _libs2 = NULL;
modelica_boolean _isLinux;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = tmpMeta[4];
tmpMeta[0+2] = mmc_mk_none();
goto tmp3_done;
}
case 1: {
modelica_string tmp6 = 0;
_libs = tmp4_1;
{
{
volatile mmc_switch_type tmp9;
int tmp10;
tmp9 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp8_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp9 < 2; tmp9++) {
switch (MMC_SWITCH_CAST(tmp9)) {
case 0: {
tmpMeta[3] = omc_Mod_getUnelabedSubMod(threadData, _inMod, _OMC_LIT134);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,5) == 0) goto goto_7;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (optionNone(tmpMeta[4])) goto goto_7;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto goto_7;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_str = tmpMeta[6];
tmp6 = _str;
goto tmp8_done;
}
case 1: {
tmpMeta[3] = stringAppend(_OMC_LIT135,omc_AbsynUtil_pathFirstIdent(threadData, _path));
tmpMeta[4] = stringAppend(tmpMeta[3],_OMC_LIT136);
tmp6 = tmpMeta[4];
goto tmp8_done;
}
}
goto tmp8_end;
tmp8_end: ;
}
goto goto_7;
tmp8_done:
(void)tmp9;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp8_done2;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp9 < 2) {
goto tmp8_top;
}
goto goto_2;
tmp8_done2:;
}
}
_str = tmp6;
_str = omc_CevalScript_getFullPathFromUri(threadData, _program, _str, 0);
tmpMeta[3] = stringAppend(_OMC_LIT135,omc_AbsynUtil_pathFirstIdent(threadData, _path));
tmpMeta[4] = stringAppend(tmpMeta[3],_OMC_LIT141);
_resourcesStr = omc_CevalScript_getFullPathFromUri(threadData, _program, tmpMeta[4], 0);
_isLinux = 0;
_target = omc_Flags_getConfigString(threadData, _OMC_LIT165);
_libs2 = omc_SimCodeFunctionUtil_getLinkerLibraryPaths(threadData, _str, _path, _inLibs);
_libs = omc_List_fold2(threadData, _libs2, boxvar_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags2, mmc_mk_boolean(_isLinux), _target, _libs);
tmpMeta[0+0] = _libs;
tmpMeta[0+1] = listReverse(_libs2);
tmpMeta[0+2] = mmc_mk_some(_resourcesStr);
goto tmp3_done;
}
case 2: {
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = _inLibs;
tmpMeta[0+1] = tmpMeta[3];
tmpMeta[0+2] = mmc_mk_none();
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outLibs = tmpMeta[0+0];
_installDirs = tmpMeta[0+1];
_resources = tmpMeta[0+2];
_return: OMC_LABEL_UNUSED
if (out_installDirs) { *out_installDirs = _installDirs; }
if (out_resources) { *out_resources = _resources; }
return _outLibs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getLinkerLibraryPaths(threadData_t *threadData, modelica_string _uri, modelica_metatype _path, modelica_metatype _inLibs)
{
modelica_metatype _libPaths = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inLibs;
{
modelica_string _platform1 = NULL;
modelica_string _platform2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (7 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT168), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp2_end;
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
if (!0) goto tmp2_end;
tmpMeta[2] = stringAppend(omc_Settings_getInstallationDirectoryPath(threadData),_OMC_LIT166);
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT15);
tmpMeta[4] = stringAppend(tmpMeta[3],_OMC_LIT167);
tmpMeta[1] = mmc_mk_cons(tmpMeta[4], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = stringAppend(_uri,_OMC_LIT27);
tmpMeta[2] = stringAppend(tmpMeta[1],omc_System_openModelicaPlatform(threadData));
_platform1 = tmpMeta[2];
tmpMeta[1] = stringAppend(_uri,_OMC_LIT27);
tmpMeta[2] = stringAppend(tmpMeta[1],omc_System_modelicaPlatform(threadData));
_platform2 = tmpMeta[2];
tmpMeta[2] = stringAppend(omc_Settings_getHomeDir(threadData, 0),_OMC_LIT137);
tmpMeta[3] = stringAppend(tmpMeta[2],omc_AbsynUtil_pathFirstIdent(threadData, _path));
tmpMeta[4] = stringAppend(omc_Settings_getInstallationDirectoryPath(threadData),_OMC_LIT166);
tmpMeta[5] = stringAppend(omc_Settings_getInstallationDirectoryPath(threadData),_OMC_LIT166);
tmpMeta[6] = stringAppend(tmpMeta[5],_OMC_LIT15);
tmpMeta[7] = stringAppend(tmpMeta[6],_OMC_LIT167);
tmpMeta[1] = mmc_mk_cons(_uri, mmc_mk_cons(_platform2, mmc_mk_cons(_platform1, mmc_mk_cons(tmpMeta[3], mmc_mk_cons(tmpMeta[4], mmc_mk_cons(tmpMeta[7], MMC_REFSTRUCTLIT(mmc_nil)))))));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_libPaths = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _libPaths;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionIncludeDirectoryFlags(threadData_t *threadData, modelica_metatype _program, modelica_metatype _path, modelica_metatype _inMod, modelica_metatype _includes)
{
modelica_metatype _outDirs = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _includes;
{
modelica_string _str = NULL;
modelica_string _istr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
tmpMeta[1] = omc_Mod_getUnelabedSubMod(threadData, _inMod, _OMC_LIT169);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[2])) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],3,1) == 0) goto goto_1;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_str = tmpMeta[4];
_str = omc_CevalScript_getFullPathFromUri(threadData, _program, _str, 0);
tmpMeta[1] = stringAppend(_OMC_LIT170,_str);
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT16);
_istr = tmpMeta[2];
tmp5 = (modelica_boolean)omc_System_directoryExists(threadData, _str);
if(tmp5)
{
tmpMeta[1] = mmc_mk_cons(_istr, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = tmpMeta[1];
}
else
{
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 2: {
modelica_boolean tmp6;
tmpMeta[1] = stringAppend(_OMC_LIT135,omc_AbsynUtil_pathFirstIdent(threadData, _path));
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT171);
_str = tmpMeta[2];
_str = omc_CevalScript_getFullPathFromUri(threadData, _program, _str, 0);
tmpMeta[1] = stringAppend(_OMC_LIT170,_str);
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT16);
_istr = tmpMeta[2];
tmp6 = (modelica_boolean)omc_System_directoryExists(threadData, _str);
if(tmp6)
{
tmpMeta[1] = mmc_mk_cons(_istr, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[3] = tmpMeta[1];
}
else
{
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outDirs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outDirs;
}
PROTECTED_FUNCTION_STATIC void omc_SimCodeFunctionUtil_lookForExtFunctionLibrary(threadData_t *threadData, modelica_metatype _names, modelica_metatype _dirs, modelica_string _name, modelica_metatype _resources, modelica_metatype _path, modelica_metatype _info)
{
modelica_metatype _dirs2 = NULL;
modelica_boolean tmp1;
modelica_boolean tmp17;
modelica_string tmp21;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[1] = stringAppend(omc_Settings_getInstallationDirectoryPath(threadData),_OMC_LIT166);
tmpMeta[2] = stringAppend(tmpMeta[1],_OMC_LIT15);
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT167);
tmpMeta[7] = mmc_mk_cons(_OMC_LIT166, _dirs);
tmpMeta[6] = mmc_mk_cons(_OMC_LIT172, tmpMeta[7]);
tmpMeta[5] = mmc_mk_cons(_OMC_LIT166, tmpMeta[6]);
tmpMeta[4] = mmc_mk_cons(_OMC_LIT172, tmpMeta[5]);
tmpMeta[0] = mmc_mk_cons(tmpMeta[3], tmpMeta[4]);
_dirs2 = tmpMeta[0];
{
modelica_boolean __omcQ_24tmpVar1;
modelica_boolean tmp2;
modelica_boolean __omcQ_24tmpVar0;
int tmp4;
modelica_metatype _d_loopVar = 0;
modelica_metatype _d;
_d_loopVar = _dirs2;
__omcQ_24tmpVar1 = 0;
while(1) {
tmp4 = 1;
if (!listEmpty(_d_loopVar)) {
_d = MMC_CAR(_d_loopVar);
_d_loopVar = MMC_CDR(_d_loopVar);
tmp4--;
}
if (tmp4 == 0) {
{
modelica_boolean __omcQ_24tmpVar3;
modelica_boolean __omcQ_24tmpVar2;
int tmp3;
modelica_metatype _n_loopVar = 0;
modelica_metatype _n;
_n_loopVar = _names;
__omcQ_24tmpVar3 = 0;
while(1) {
tmp3 = 1;
if (!listEmpty(_n_loopVar)) {
_n = MMC_CAR(_n_loopVar);
_n_loopVar = MMC_CDR(_n_loopVar);
tmp3--;
}
if (tmp3 == 0) {
tmpMeta[0] = stringAppend(_d,_OMC_LIT27);
tmpMeta[1] = stringAppend(tmpMeta[0],_n);
__omcQ_24tmpVar2 = omc_System_regularFileExists(threadData, tmpMeta[1]);
__omcQ_24tmpVar3 = (__omcQ_24tmpVar2 || __omcQ_24tmpVar3);
} else if (tmp3 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
tmp2 = __omcQ_24tmpVar3;
}
__omcQ_24tmpVar0 = tmp2;
__omcQ_24tmpVar1 = (__omcQ_24tmpVar0 || __omcQ_24tmpVar1);
} else if (tmp4 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
tmp1 = __omcQ_24tmpVar1;
}
if((!tmp1))
{
{
modelica_metatype tmp7_1;
tmp7_1 = _resources;
{
modelica_string _resourcesStr = NULL;
modelica_string _tmpdir = NULL;
modelica_string _cmd = NULL;
modelica_string _pwd = NULL;
modelica_string _contents = NULL;
modelica_string _found = NULL;
modelica_integer _status;
modelica_boolean _didFind;
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (optionNone(tmp7_1)) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 1));
_resourcesStr = tmpMeta[2];
if(omc_System_directoryExists(threadData, _resourcesStr))
{
_didFind = 0;
{
modelica_metatype __omcQ_24tmpVar5;
modelica_metatype* tmp15;
modelica_string __omcQ_24tmpVar4;
int tmp16;
modelica_metatype _dir_loopVar = 0;
modelica_metatype _dir;
tmpMeta[6] = stringAppend(_resourcesStr,_OMC_LIT199);
_dir_loopVar = omc_System_subDirectories(threadData, tmpMeta[6]);
tmpMeta[5] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar5 = tmpMeta[5];
tmp15 = &__omcQ_24tmpVar5;
while(1) {
tmp16 = 1;
while (!listEmpty(_dir_loopVar)) {
_dir = MMC_CAR(_dir_loopVar);
_dir_loopVar = MMC_CDR(_dir_loopVar);
tmpMeta[7] = stringAppend(_resourcesStr,_OMC_LIT185);
tmpMeta[8] = stringAppend(tmpMeta[7],_dir);
tmpMeta[9] = stringAppend(tmpMeta[8],_OMC_LIT200);
if (omc_System_regularFileExists(threadData, tmpMeta[9])) {
tmp16--;
break;
}
}
if (tmp16 == 0) {
__omcQ_24tmpVar4 = _dir;
*tmp15 = mmc_mk_cons(__omcQ_24tmpVar4,0);
tmp15 = &MMC_CDR(*tmp15);
} else if (tmp16 == 1) {
break;
} else {
goto goto_5;
}
}
*tmp15 = mmc_mk_nil();
tmpMeta[4] = __omcQ_24tmpVar5;
}
{
modelica_metatype _dir;
for (tmpMeta[2] = tmpMeta[4]; !listEmpty(tmpMeta[2]); tmpMeta[2]=MMC_CDR(tmpMeta[2]))
{
_dir = MMC_CAR(tmpMeta[2]);
tmpMeta[3] = stringAppend(omc_Settings_getTempDirectoryPath(threadData),_OMC_LIT173);
tmpMeta[4] = stringAppend(tmpMeta[3],_name);
tmpMeta[5] = stringAppend(tmpMeta[4],_OMC_LIT29);
_tmpdir = omc_System_createTemporaryDirectory(threadData, tmpMeta[5]);
tmpMeta[4] = stringAppend(_OMC_LIT179,_tmpdir);
tmpMeta[3] = mmc_mk_cons(tmpMeta[4], MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT178, tmpMeta[3], _info);
tmpMeta[3] = stringAppend(_OMC_LIT180,_resourcesStr);
tmpMeta[4] = stringAppend(tmpMeta[3],_OMC_LIT181);
tmpMeta[5] = stringAppend(tmpMeta[4],_tmpdir);
tmpMeta[6] = stringAppend(tmpMeta[5],_OMC_LIT16);
_cmd = tmpMeta[6];
tmpMeta[3] = mmc_mk_cons(_cmd, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT178, tmpMeta[3], _info);
omc_System_systemCall(threadData, _cmd, _OMC_LIT15);
_pwd = omc_System_pwd(threadData);
tmpMeta[3] = stringAppend(_tmpdir,_OMC_LIT185);
tmpMeta[4] = stringAppend(tmpMeta[3],_dir);
if((((modelica_integer) 0) == omc_System_cd(threadData, tmpMeta[4])))
{
tmpMeta[6] = stringAppend(_OMC_LIT186,omc_System_pwd(threadData));
tmpMeta[5] = mmc_mk_cons(tmpMeta[6], MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT178, tmpMeta[5], _info);
tmpMeta[5] = stringAppend(_OMC_LIT187,omc_SimCodeFunctionUtil_userCompiledBinariesDirectory(threadData, _path));
tmpMeta[6] = stringAppend(tmpMeta[5],_OMC_LIT188);
_cmd = tmpMeta[6];
_status = omc_System_systemCall(threadData, _cmd, _OMC_LIT189);
_contents = omc_System_readFile(threadData, _OMC_LIT189);
if((_status != ((modelica_integer) 0)))
{
tmpMeta[6] = stringAppend(_OMC_LIT196,_cmd);
tmpMeta[7] = stringAppend(tmpMeta[6],_OMC_LIT197);
tmpMeta[8] = stringAppend(tmpMeta[7],_contents);
tmpMeta[5] = mmc_mk_cons(tmpMeta[8], MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT183, tmpMeta[5], _info);
}
else
{
tmpMeta[6] = stringAppend(_OMC_LIT190,_cmd);
tmpMeta[7] = stringAppend(tmpMeta[6],_OMC_LIT30);
tmpMeta[8] = stringAppend(tmpMeta[7],_contents);
tmpMeta[5] = mmc_mk_cons(tmpMeta[8], MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT178, tmpMeta[5], _info);
_didFind = 1;
{
modelica_metatype _d;
for (tmpMeta[5] = _dirs2; !listEmpty(tmpMeta[5]); tmpMeta[5]=MMC_CDR(tmpMeta[5]))
{
_d = MMC_CAR(tmpMeta[5]);
{
modelica_metatype _n;
for (tmpMeta[6] = _names; !listEmpty(tmpMeta[6]); tmpMeta[6]=MMC_CDR(tmpMeta[6]))
{
_n = MMC_CAR(tmpMeta[6]);
tmpMeta[7] = stringAppend(_d,_OMC_LIT27);
tmpMeta[8] = stringAppend(tmpMeta[7],_n);
if((!omc_System_regularFileExists(threadData, tmpMeta[8])))
{
tmpMeta[9] = mmc_mk_cons(_n, mmc_mk_cons(_cmd, mmc_mk_cons(omc_System_pwd(threadData), MMC_REFSTRUCTLIT(mmc_nil))));
omc_Error_addSourceMessage(threadData, _OMC_LIT193, tmpMeta[9], _info);
_didFind = 0;
}
}
}
}
}
if(_didFind)
{
{
modelica_metatype __omcQ_24tmpVar11;
modelica_metatype* tmp9;
modelica_string __omcQ_24tmpVar10;
int tmp10;
modelica_metatype _x_loopVar = 0;
modelica_metatype _x;
{
modelica_metatype __omcQ_24tmpVar7;
modelica_metatype* tmp11;
modelica_metatype __omcQ_24tmpVar6;
int tmp14;
modelica_metatype _d_loopVar = 0;
modelica_metatype _d;
_d_loopVar = _dirs2;
tmpMeta[8] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar7 = tmpMeta[8];
tmp11 = &__omcQ_24tmpVar7;
while(1) {
tmp14 = 1;
if (!listEmpty(_d_loopVar)) {
_d = MMC_CAR(_d_loopVar);
_d_loopVar = MMC_CDR(_d_loopVar);
tmp14--;
}
if (tmp14 == 0) {
{
modelica_metatype __omcQ_24tmpVar9;
modelica_metatype* tmp12;
modelica_string __omcQ_24tmpVar8;
int tmp13;
modelica_metatype _n_loopVar = 0;
modelica_metatype _n;
_n_loopVar = _names;
tmpMeta[10] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar9 = tmpMeta[10];
tmp12 = &__omcQ_24tmpVar9;
while(1) {
tmp13 = 1;
if (!listEmpty(_n_loopVar)) {
_n = MMC_CAR(_n_loopVar);
_n_loopVar = MMC_CDR(_n_loopVar);
tmp13--;
}
if (tmp13 == 0) {
tmpMeta[11] = stringAppend(_d,_OMC_LIT27);
tmpMeta[12] = stringAppend(tmpMeta[11],_n);
__omcQ_24tmpVar8 = tmpMeta[12];
*tmp12 = mmc_mk_cons(__omcQ_24tmpVar8,0);
tmp12 = &MMC_CDR(*tmp12);
} else if (tmp13 == 1) {
break;
} else {
goto goto_5;
}
}
*tmp12 = mmc_mk_nil();
tmpMeta[9] = __omcQ_24tmpVar9;
}
__omcQ_24tmpVar6 = tmpMeta[9];
*tmp11 = mmc_mk_cons(__omcQ_24tmpVar6,0);
tmp11 = &MMC_CDR(*tmp11);
} else if (tmp14 == 1) {
break;
} else {
goto goto_5;
}
}
*tmp11 = mmc_mk_nil();
tmpMeta[7] = __omcQ_24tmpVar7;
}
_x_loopVar = omc_List_flatten(threadData, tmpMeta[7]);
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar11 = tmpMeta[6];
tmp9 = &__omcQ_24tmpVar11;
while(1) {
tmp10 = 1;
while (!listEmpty(_x_loopVar)) {
_x = MMC_CAR(_x_loopVar);
_x_loopVar = MMC_CDR(_x_loopVar);
if (omc_System_regularFileExists(threadData, _x)) {
tmp10--;
break;
}
}
if (tmp10 == 0) {
__omcQ_24tmpVar10 = _x;
*tmp9 = mmc_mk_cons(__omcQ_24tmpVar10,0);
tmp9 = &MMC_CDR(*tmp9);
} else if (tmp10 == 1) {
break;
} else {
goto goto_5;
}
}
*tmp9 = mmc_mk_nil();
tmpMeta[5] = __omcQ_24tmpVar11;
}
_found = listHead(tmpMeta[5]);
tmpMeta[6] = stringAppend(_OMC_LIT194,_found);
tmpMeta[7] = stringAppend(tmpMeta[6],_OMC_LIT195);
tmpMeta[8] = stringAppend(tmpMeta[7],_resourcesStr);
tmpMeta[9] = stringAppend(tmpMeta[8],_OMC_LIT185);
tmpMeta[10] = stringAppend(tmpMeta[9],_dir);
tmpMeta[5] = mmc_mk_cons(tmpMeta[10], MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT178, tmpMeta[5], _info);
}
}
}
else
{
tmpMeta[6] = stringAppend(_OMC_LIT184,_tmpdir);
tmpMeta[7] = stringAppend(tmpMeta[6],_OMC_LIT185);
tmpMeta[8] = stringAppend(tmpMeta[7],_dir);
tmpMeta[5] = mmc_mk_cons(tmpMeta[8], MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT183, tmpMeta[5], _info);
}
omc_System_cd(threadData, _pwd);
omc_System_removeDirectory(threadData, _tmpdir);
tmpMeta[4] = stringAppend(_OMC_LIT198,_tmpdir);
tmpMeta[3] = mmc_mk_cons(tmpMeta[4], MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addSourceMessage(threadData, _OMC_LIT178, tmpMeta[3], _info);
if(_didFind)
{
break;
}
}
}
}
goto tmp6_done;
}
case 1: {
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
MMC_THROW_INTERNAL();
goto tmp6_done;
tmp6_done:;
}
}
;
{
modelica_boolean __omcQ_24tmpVar13;
modelica_boolean tmp18;
modelica_boolean __omcQ_24tmpVar12;
int tmp20;
modelica_metatype _d_loopVar = 0;
modelica_metatype _d;
_d_loopVar = _dirs2;
__omcQ_24tmpVar13 = 0;
while(1) {
tmp20 = 1;
if (!listEmpty(_d_loopVar)) {
_d = MMC_CAR(_d_loopVar);
_d_loopVar = MMC_CDR(_d_loopVar);
tmp20--;
}
if (tmp20 == 0) {
{
modelica_boolean __omcQ_24tmpVar15;
modelica_boolean __omcQ_24tmpVar14;
int tmp19;
modelica_metatype _n_loopVar = 0;
modelica_metatype _n;
_n_loopVar = _names;
__omcQ_24tmpVar15 = 0;
while(1) {
tmp19 = 1;
if (!listEmpty(_n_loopVar)) {
_n = MMC_CAR(_n_loopVar);
_n_loopVar = MMC_CDR(_n_loopVar);
tmp19--;
}
if (tmp19 == 0) {
tmpMeta[2] = stringAppend(_d,_OMC_LIT27);
tmpMeta[3] = stringAppend(tmpMeta[2],_n);
__omcQ_24tmpVar14 = omc_System_regularFileExists(threadData, tmpMeta[3]);
__omcQ_24tmpVar15 = (__omcQ_24tmpVar14 || __omcQ_24tmpVar15);
} else if (tmp19 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
tmp18 = __omcQ_24tmpVar15;
}
__omcQ_24tmpVar12 = tmp18;
__omcQ_24tmpVar13 = (__omcQ_24tmpVar12 || __omcQ_24tmpVar13);
} else if (tmp20 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
tmp17 = __omcQ_24tmpVar13;
}
if((!tmp17))
{
if((!omc_Testsuite_isRunning(threadData)))
{
{
modelica_string __omcQ_24tmpVar19;
modelica_string tmp22;
modelica_string __omcQ_24tmpVar18;
int tmp24;
modelica_metatype _d_loopVar = 0;
modelica_metatype _d;
_d_loopVar = _dirs2;
__omcQ_24tmpVar19 = (modelica_string) mmc_emptystring;
while(1) {
tmp24 = 1;
if (!listEmpty(_d_loopVar)) {
_d = MMC_CAR(_d_loopVar);
_d_loopVar = MMC_CDR(_d_loopVar);
tmp24--;
}
if (tmp24 == 0) {
{
modelica_string __omcQ_24tmpVar21;
modelica_string __omcQ_24tmpVar20;
int tmp23;
modelica_metatype _n_loopVar = 0;
modelica_metatype _n;
_n_loopVar = _names;
__omcQ_24tmpVar21 = (modelica_string) mmc_emptystring;
while(1) {
tmp23 = 1;
if (!listEmpty(_n_loopVar)) {
_n = MMC_CAR(_n_loopVar);
_n_loopVar = MMC_CDR(_n_loopVar);
tmp23--;
}
if (tmp23 == 0) {
tmpMeta[5] = stringAppend(_OMC_LIT204,_d);
tmpMeta[6] = stringAppend(tmpMeta[5],_OMC_LIT27);
tmpMeta[7] = stringAppend(tmpMeta[6],_n);
__omcQ_24tmpVar20 = tmpMeta[7];
tmpMeta[8] = stringAppend(__omcQ_24tmpVar21,__omcQ_24tmpVar20);
__omcQ_24tmpVar21 = tmpMeta[8];
} else if (tmp23 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
tmp22 = __omcQ_24tmpVar21;
}
__omcQ_24tmpVar18 = tmp22;
tmpMeta[9] = stringAppend(__omcQ_24tmpVar19,__omcQ_24tmpVar18);
__omcQ_24tmpVar19 = tmpMeta[9];
} else if (tmp24 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
tmp21 = __omcQ_24tmpVar19;
}
tmpMeta[4] = mmc_mk_cons(_name, mmc_mk_cons(tmp21, MMC_REFSTRUCTLIT(mmc_nil)));
omc_Error_addSourceMessage(threadData, _OMC_LIT203, tmpMeta[4], _info);
}
}
}
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_generateExtFunctionIncludes(threadData_t *threadData, modelica_metatype _program, modelica_metatype _path, modelica_metatype _inAbsynAnnotationOption, modelica_metatype _info, modelica_metatype *out_includeDirs, modelica_metatype *out_libs, modelica_metatype *out_paths, modelica_boolean *out_dynamcLoad)
{
modelica_metatype _includes = NULL;
modelica_metatype _includeDirs = NULL;
modelica_metatype _libs = NULL;
modelica_metatype _paths = NULL;
modelica_boolean _dynamcLoad;
modelica_boolean tmp1_c4 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAbsynAnnotationOption;
{
modelica_metatype _mod = NULL;
modelica_boolean _b;
modelica_string _target = NULL;
modelica_metatype _resources = NULL;
modelica_metatype _libNames = NULL;
modelica_metatype _fullLibNames = NULL;
modelica_metatype _dirs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_mod = tmpMeta[6];
_b = omc_SimCodeFunctionUtil_generateExtFunctionDynamicLoad(threadData, _mod);
_target = omc_Flags_getConfigString(threadData, _OMC_LIT165);
_libs = omc_SimCodeFunctionUtil_generateExtFunctionIncludesLibstr(threadData, _target, _mod ,&_libNames);
_includes = omc_SimCodeFunctionUtil_generateExtFunctionIncludesIncludestr(threadData, _mod);
_libs = omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryFlags(threadData, _program, _path, _mod, _libs ,&_dirs ,&_resources);
tmp6 = (modelica_boolean)omc_Flags_isSet(threadData, _OMC_LIT210);
if(tmp6)
{
tmpMeta[8] = _libNames;
}
else
{
tmpMeta[7] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[8] = tmpMeta[7];
}
{
modelica_metatype _name;
for (tmpMeta[5] = tmpMeta[8]; !listEmpty(tmpMeta[5]); tmpMeta[5]=MMC_CDR(tmpMeta[5]))
{
_name = MMC_CAR(tmpMeta[5]);
if((stringEqual(omc_SimCodeFunctionUtil_getGerneralTarget(threadData, _target), _OMC_LIT67)))
{
tmpMeta[7] = stringAppend(_name,_OMC_LIT15);
tmpMeta[8] = stringAppend(_OMC_LIT205,_name);
tmpMeta[9] = stringAppend(tmpMeta[8],_OMC_LIT206);
tmpMeta[10] = stringAppend(_OMC_LIT205,_name);
tmpMeta[11] = stringAppend(tmpMeta[10],_OMC_LIT132);
tmpMeta[6] = mmc_mk_cons(tmpMeta[7], mmc_mk_cons(tmpMeta[9], mmc_mk_cons(tmpMeta[11], MMC_REFSTRUCTLIT(mmc_nil))));
_fullLibNames = tmpMeta[6];
}
else
{
tmpMeta[7] = stringAppend(_OMC_LIT205,_name);
tmpMeta[8] = stringAppend(tmpMeta[7],_OMC_LIT206);
tmpMeta[9] = stringAppend(_OMC_LIT205,_name);
tmpMeta[10] = stringAppend(tmpMeta[9],_OMC_LIT15);
tmpMeta[6] = mmc_mk_cons(tmpMeta[8], mmc_mk_cons(tmpMeta[10], MMC_REFSTRUCTLIT(mmc_nil)));
_fullLibNames = tmpMeta[6];
}
omc_SimCodeFunctionUtil_lookForExtFunctionLibrary(threadData, _fullLibNames, _dirs, _name, _resources, _path, _info);
}
}
_paths = omc_SimCodeFunctionUtil_generateExtFunctionLibraryDirectoryPaths(threadData, _program, _path, _mod);
_includeDirs = omc_SimCodeFunctionUtil_generateExtFunctionIncludeDirectoryFlags(threadData, _program, _path, _mod, _includes);
tmpMeta[0+0] = _includes;
tmpMeta[0+1] = _includeDirs;
tmpMeta[0+2] = _libs;
tmpMeta[0+3] = _paths;
tmp1_c4 = _b;
goto tmp3_done;
}
case 1: {
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[5] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[6] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[7] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[8] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[5];
tmpMeta[0+1] = tmpMeta[6];
tmpMeta[0+2] = tmpMeta[7];
tmpMeta[0+3] = tmpMeta[8];
tmp1_c4 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_includes = tmpMeta[0+0];
_includeDirs = tmpMeta[0+1];
_libs = tmpMeta[0+2];
_paths = tmpMeta[0+3];
_dynamcLoad = tmp1_c4;
_return: OMC_LABEL_UNUSED
if (out_includeDirs) { *out_includeDirs = _includeDirs; }
if (out_libs) { *out_libs = _libs; }
if (out_paths) { *out_paths = _paths; }
if (out_dynamcLoad) { *out_dynamcLoad = _dynamcLoad; }
return _includes;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_generateExtFunctionIncludes(threadData_t *threadData, modelica_metatype _program, modelica_metatype _path, modelica_metatype _inAbsynAnnotationOption, modelica_metatype _info, modelica_metatype *out_includeDirs, modelica_metatype *out_libs, modelica_metatype *out_paths, modelica_metatype *out_dynamcLoad)
{
modelica_boolean _dynamcLoad;
modelica_metatype _includes = NULL;
_includes = omc_SimCodeFunctionUtil_generateExtFunctionIncludes(threadData, _program, _path, _inAbsynAnnotationOption, _info, out_includeDirs, out_libs, out_paths, &_dynamcLoad);
if (out_dynamcLoad) { *out_dynamcLoad = mmc_mk_icon(_dynamcLoad); }
return _includes;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForMetarecords(threadData_t *threadData, modelica_metatype _inExpl, modelica_metatype _inAccRecordDecls, modelica_metatype _inReturnTypes, modelica_metatype *out_outReturnTypes)
{
modelica_metatype _outRecordDecls = NULL;
modelica_metatype _outReturnTypes = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inExpl;
tmp4_2 = _inAccRecordDecls;
tmp4_3 = _inReturnTypes;
{
modelica_metatype _rt = NULL;
modelica_metatype _rt_1 = NULL;
modelica_metatype _fieldNames = NULL;
modelica_metatype _rest = NULL;
modelica_string _name = NULL;
modelica_metatype _path = NULL;
modelica_metatype _accRecDecls = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
_accRecDecls = tmp4_2;
_rt = tmp4_3;
tmpMeta[0+0] = _accRecDecls;
tmpMeta[0+1] = _rt;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],32,5) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_path = tmpMeta[4];
_fieldNames = tmpMeta[5];
_rest = tmpMeta[3];
_accRecDecls = tmp4_2;
_rt = tmp4_3;
_name = omc_AbsynUtil_pathStringUnquoteReplaceDot(threadData, _path, _OMC_LIT29);
_b = listMember(_name, _rt);
tmpMeta[2] = mmc_mk_box3(5, &SimCodeFunction_RecordDeclaration_RECORD__DECL__DEF__desc, _path, _fieldNames);
_accRecDecls = omc_List_consOnTrue(threadData, (!_b), tmpMeta[2], _accRecDecls);
_rt_1 = omc_List_consOnTrue(threadData, (!_b), _name, _rt);
_inExpl = _rest;
_inAccRecordDecls = _accRecDecls;
_inReturnTypes = _rt_1;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_rest = tmpMeta[3];
_accRecDecls = tmp4_2;
_rt = tmp4_3;
_inExpl = _rest;
_inAccRecordDecls = _accRecDecls;
_inReturnTypes = _rt;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outRecordDecls = tmpMeta[0+0];
_outReturnTypes = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outReturnTypes) { *out_outReturnTypes = _outReturnTypes; }
return _outRecordDecls;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateNestedRecordDeclarations(threadData_t *threadData, modelica_metatype _inRecordTypes, modelica_metatype _inAccRecordDecls, modelica_metatype _inReturnTypes, modelica_metatype *out_outReturnTypes)
{
modelica_metatype _outRecordDecls = NULL;
modelica_metatype _outReturnTypes = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inRecordTypes;
tmp4_2 = _inAccRecordDecls;
tmp4_3 = _inReturnTypes;
{
modelica_metatype _ty = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _rt = NULL;
modelica_metatype _rt_1 = NULL;
modelica_metatype _accRecDecls = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
_accRecDecls = tmp4_2;
_rt = tmp4_3;
tmp4 += 2;
tmpMeta[0+0] = _accRecDecls;
tmpMeta[0+1] = _rt;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],9,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],3,1) == 0) goto tmp3_end;
_ty = tmpMeta[4];
_rest = tmpMeta[3];
_accRecDecls = tmp4_2;
_rt = tmp4_3;
_accRecDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForRecord(threadData, _ty, _accRecDecls, _rt ,&_rt_1);
tmpMeta[0+0] = omc_SimCodeFunctionUtil_elaborateNestedRecordDeclarations(threadData, _rest, _accRecDecls, _rt_1, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_rest = tmpMeta[3];
_accRecDecls = tmp4_2;
_rt = tmp4_3;
tmpMeta[0+0] = omc_SimCodeFunctionUtil_elaborateNestedRecordDeclarations(threadData, _rest, _accRecDecls, _rt, &tmpMeta[0+1]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outRecordDecls = tmpMeta[0+0];
_outReturnTypes = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outReturnTypes) { *out_outReturnTypes = _outReturnTypes; }
return _outRecordDecls;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_generateVarName(threadData_t *threadData, modelica_metatype _inVar)
{
modelica_string _outName = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inVar;
{
modelica_string _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta[0];
tmp1 = _name;
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT211;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outName = tmp1;
_return: OMC_LABEL_UNUSED
return _outName;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_compareVariable(threadData_t *threadData, modelica_metatype _v1, modelica_metatype _v2)
{
modelica_boolean _b;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = (stringCompare(omc_SimCodeFunctionUtil_variableName(threadData, _v1), omc_SimCodeFunctionUtil_variableName(threadData, _v2)) > ((modelica_integer) 0));
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_compareVariable(threadData_t *threadData, modelica_metatype _v1, modelica_metatype _v2)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_SimCodeFunctionUtil_compareVariable(threadData, _v1, _v2);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_variableName(threadData_t *threadData, modelica_metatype _v)
{
modelica_string _s = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _v;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,7) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,3) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_s = tmpMeta[1];
tmp1 = _s;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_s = tmpMeta[0];
tmp1 = _s;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_s = tmp1;
_return: OMC_LABEL_UNUSED
return _s;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_scodeParallelismToDAEParallelism(threadData_t *threadData, modelica_metatype _inParallelism)
{
modelica_metatype _outParallelism = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inParallelism;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
tmpMeta[0] = _OMC_LIT212;
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _OMC_LIT213;
goto tmp2_done;
}
case 5: {
tmpMeta[0] = _OMC_LIT214;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outParallelism = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outParallelism;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_checkSourceAndGetBindingExp(threadData_t *threadData, modelica_metatype _inBinding)
{
modelica_metatype _bindExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inBinding;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,0) == 0) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmpMeta[0] = mmc_mk_some((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inBinding), 2))));
goto tmp2_done;
}
case 2: {
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_bindExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _bindExp;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isBindingFromDerivedRecordDeclaration(threadData_t *threadData, modelica_metatype _bind)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _bind;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isBindingFromDerivedRecordDeclaration(threadData_t *threadData, modelica_metatype _bind)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_SimCodeFunctionUtil_isBindingFromDerivedRecordDeclaration(threadData, _bind);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_SimCodeFunctionUtil_checkBindingsandGetConstructorName(threadData_t *threadData, modelica_string _rec_name, modelica_metatype _vars, modelica_boolean *out_is_default)
{
modelica_string _ctor_name = NULL;
modelica_boolean _is_default;
modelica_integer _varnum;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_is_default = 1;
_ctor_name = _rec_name;
_varnum = ((modelica_integer) 1);
{
modelica_metatype _var;
for (tmpMeta[0] = _vars; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_var = MMC_CAR(tmpMeta[0]);
if((mmc_unbox_boolean((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_var), 6)))) && (!omc_SimCodeFunctionUtil_isBindingFromDerivedRecordDeclaration(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_var), 5)))))))
{
_is_default = 0;
tmpMeta[1] = stringAppend(_ctor_name,_OMC_LIT29);
tmpMeta[2] = stringAppend(tmpMeta[1],intString(_varnum));
_ctor_name = tmpMeta[2];
}
_varnum = ((modelica_integer) 1) + _varnum;
}
}
_return: OMC_LABEL_UNUSED
if (out_is_default) { *out_is_default = _is_default; }
return _ctor_name;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_checkBindingsandGetConstructorName(threadData_t *threadData, modelica_metatype _rec_name, modelica_metatype _vars, modelica_metatype *out_is_default)
{
modelica_boolean _is_default;
modelica_string _ctor_name = NULL;
_ctor_name = omc_SimCodeFunctionUtil_checkBindingsandGetConstructorName(threadData, _rec_name, _vars, &_is_default);
if (out_is_default) { *out_is_default = mmc_mk_icon(_is_default); }
return _ctor_name;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_typesVar(threadData_t *threadData, modelica_metatype _inTypesVar)
{
modelica_metatype _outVar = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inTypesVar;
{
modelica_string _name = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _cref_ = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _scPrl = NULL;
modelica_metatype _prl = NULL;
modelica_metatype _bindExp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_name = tmpMeta[1];
_attr = tmpMeta[2];
_ty = tmpMeta[3];
_ty = omc_Types_simplifyType(threadData, _ty);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_cref_ = omc_ComponentReference_makeCrefIdent(threadData, _name, _ty, tmpMeta[1]);
tmpMeta[1] = _attr;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_scPrl = tmpMeta[2];
_prl = omc_SimCodeFunctionUtil_scodeParallelismToDAEParallelism(threadData, _scPrl);
_bindExp = omc_SimCodeFunctionUtil_checkSourceAndGetBindingExp(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTypesVar), 5))));
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box8(3, &SimCodeFunction_Variable_VARIABLE__desc, _cref_, _ty, _bindExp, tmpMeta[1], _prl, _OMC_LIT215, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inTypesVar), 6))));
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outVar = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outVar;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_typesVarNoBinding(threadData_t *threadData, modelica_metatype _inTypesVar)
{
modelica_metatype _outVar = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inTypesVar;
{
modelica_string _name = NULL;
modelica_metatype _ty = NULL;
modelica_metatype _cref_ = NULL;
modelica_metatype _attr = NULL;
modelica_metatype _scPrl = NULL;
modelica_metatype _prl = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_name = tmpMeta[1];
_attr = tmpMeta[2];
_ty = tmpMeta[3];
_ty = omc_Types_simplifyType(threadData, _ty);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_cref_ = omc_ComponentReference_makeCrefIdent(threadData, _name, _ty, tmpMeta[1]);
tmpMeta[1] = _attr;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_scPrl = tmpMeta[2];
_prl = omc_SimCodeFunctionUtil_scodeParallelismToDAEParallelism(threadData, _scPrl);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box8(3, &SimCodeFunction_Variable_VARIABLE__desc, _cref_, _ty, mmc_mk_none(), tmpMeta[1], _prl, _OMC_LIT215, mmc_mk_boolean(0));
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outVar = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outVar;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForRecord(threadData_t *threadData, modelica_metatype _inRecordType, modelica_metatype _inAccRecordDecls, modelica_metatype _inReturnTypes, modelica_metatype *out_outReturnTypes)
{
modelica_metatype _outRecordDecls = NULL;
modelica_metatype _outReturnTypes = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;
tmp4_1 = _inRecordType;
tmp4_2 = _inAccRecordDecls;
tmp4_3 = _inReturnTypes;
{
modelica_metatype _path = NULL;
modelica_metatype _varlst = NULL;
modelica_string _name = NULL;
modelica_string _sname = NULL;
modelica_metatype _rt = NULL;
modelica_metatype _rt_1 = NULL;
modelica_metatype _fieldNames = NULL;
modelica_metatype _accRecDecls = NULL;
modelica_metatype _vars = NULL;
modelica_metatype _recDecl = NULL;
modelica_boolean _is_default;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_path = tmpMeta[3];
_varlst = tmpMeta[4];
_accRecDecls = tmp4_2;
_rt = tmp4_3;
_name = omc_AbsynUtil_pathStringUnquoteReplaceDot(threadData, _path, _OMC_LIT29);
_rt_1 = _rt;
_sname = omc_SimCodeFunctionUtil_checkBindingsandGetConstructorName(threadData, _name, _varlst ,&_is_default);
if((!listMember(_sname, _rt_1)))
{
tmpMeta[2] = mmc_mk_cons(_sname, _rt_1);
_rt_1 = tmpMeta[2];
if(_is_default)
{
_accRecDecls = omc_SimCodeFunctionUtil_elaborateNestedRecordDeclarations(threadData, _varlst, _accRecDecls, _rt_1 ,&_rt_1);
_vars = omc_List_map(threadData, _varlst, boxvar_SimCodeFunctionUtil_typesVar);
tmpMeta[2] = mmc_mk_box5(3, &SimCodeFunction_RecordDeclaration_RECORD__DECL__FULL__desc, _sname, mmc_mk_none(), _path, _vars);
_recDecl = tmpMeta[2];
}
else
{
_vars = omc_List_map(threadData, _varlst, boxvar_SimCodeFunctionUtil_typesVar);
tmpMeta[2] = mmc_mk_box4(4, &SimCodeFunction_RecordDeclaration_RECORD__DECL__ADD__CONSTRCTOR__desc, _sname, _name, _vars);
_recDecl = tmpMeta[2];
}
_accRecDecls = omc_List_appendElt(threadData, _recDecl, _accRecDecls);
}
tmpMeta[0+0] = _accRecDecls;
tmpMeta[0+1] = _rt_1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],3,1) == 0) goto tmp3_end;
_accRecDecls = tmp4_2;
_rt = tmp4_3;
tmpMeta[0+0] = _accRecDecls;
tmpMeta[0+1] = _rt;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (10 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT216), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
_accRecDecls = tmp4_2;
_rt = tmp4_3;
tmpMeta[0+0] = _accRecDecls;
tmpMeta[0+1] = _rt;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_path = tmpMeta[2];
_varlst = tmpMeta[3];
_accRecDecls = tmp4_2;
_rt = tmp4_3;
_sname = omc_AbsynUtil_pathStringUnquoteReplaceDot(threadData, _path, _OMC_LIT29);
if((!listMember(_sname, _rt)))
{
_fieldNames = omc_List_map(threadData, _varlst, boxvar_SimCodeFunctionUtil_generateVarName);
tmpMeta[3] = mmc_mk_box3(5, &SimCodeFunction_RecordDeclaration_RECORD__DECL__DEF__desc, _path, _fieldNames);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _accRecDecls);
_accRecDecls = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_sname, _rt);
_rt_1 = tmpMeta[2];
_accRecDecls = omc_SimCodeFunctionUtil_elaborateNestedRecordDeclarations(threadData, _varlst, _accRecDecls, _rt_1 ,&_rt_1);
}
else
{
_rt_1 = _rt;
}
tmpMeta[0+0] = _accRecDecls;
tmpMeta[0+1] = _rt_1;
goto tmp3_done;
}
case 4: {
_accRecDecls = tmp4_2;
_rt = tmp4_3;
tmpMeta[0+0] = _accRecDecls;
tmpMeta[0+1] = _rt;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outRecordDecls = tmpMeta[0+0];
_outReturnTypes = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outReturnTypes) { *out_outReturnTypes = _outReturnTypes; }
return _outRecordDecls;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getCrefFromExp(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _c = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _e;
{
modelica_metatype _crefe = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_crefe = tmpMeta[1];
tmpMeta[0] = omc_ComponentReference_unelabCref(threadData, _crefe);
goto tmp2_done;
}
case 1: {
omc_Error_addInternalError(threadData, _OMC_LIT217, _OMC_LIT218);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_c = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _c;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_useZerocrossing(threadData_t *threadData)
{
modelica_boolean _res;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = omc_Flags_isSet(threadData, _OMC_LIT222);
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_useZerocrossing(threadData_t *threadData)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_SimCodeFunctionUtil_useZerocrossing(threadData);
out_res = mmc_mk_icon(_res);
return out_res;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_SimCodeFunctionUtil_filterNg(threadData_t *threadData, modelica_integer _ng)
{
modelica_integer _outInteger;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outInteger = (omc_SimCodeFunctionUtil_useZerocrossing(threadData)?_ng:((modelica_integer) 0));
_return: OMC_LABEL_UNUSED
return _outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_filterNg(threadData_t *threadData, modelica_metatype _ng)
{
modelica_integer tmp1;
modelica_integer _outInteger;
modelica_metatype out_outInteger;
tmp1 = mmc_unbox_integer(_ng);
_outInteger = omc_SimCodeFunctionUtil_filterNg(threadData, tmp1);
out_outInteger = mmc_mk_icon(_outInteger);
return out_outInteger;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isDirectionNotInputNotOutput(threadData_t *threadData, modelica_metatype _inVarDirection)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inVarDirection;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isDirectionNotInputNotOutput(threadData_t *threadData, modelica_metatype _inVarDirection)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_SimCodeFunctionUtil_isDirectionNotInputNotOutput(threadData, _inVarDirection);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isDirectionNotInput(threadData_t *threadData, modelica_metatype _inVarDirection)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inVarDirection;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isDirectionNotInput(threadData_t *threadData, modelica_metatype _inVarDirection)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_SimCodeFunctionUtil_isDirectionNotInput(threadData, _inVarDirection);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isVarKindVarOrParameter(threadData_t *threadData, modelica_metatype _inVarKind)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inVarKind;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isVarKindVarOrParameter(threadData_t *threadData, modelica_metatype _inVarKind)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_SimCodeFunctionUtil_isVarKindVarOrParameter(threadData, _inVarKind);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isVarNotInputNotOutput(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _vk = NULL;
modelica_metatype _vd = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,13) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_vk = tmpMeta[0];
_vd = tmpMeta[1];
if (!(omc_SimCodeFunctionUtil_isVarKindVarOrParameter(threadData, _vk) && omc_SimCodeFunctionUtil_isDirectionNotInputNotOutput(threadData, _vd))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isVarNotInputNotOutput(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_SimCodeFunctionUtil_isVarNotInputNotOutput(threadData, _inElement);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isVarQ(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_metatype _vk = NULL;
modelica_metatype _vd = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,13) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_vk = tmpMeta[0];
_vd = tmpMeta[1];
if (!(omc_SimCodeFunctionUtil_isVarKindVarOrParameter(threadData, _vk) && omc_SimCodeFunctionUtil_isDirectionNotInput(threadData, _vd))) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isVarQ(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_SimCodeFunctionUtil_isVarQ(threadData, _inElement);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_matchMetarecordCalls(threadData_t *threadData, modelica_metatype _e, modelica_metatype _acc, modelica_metatype *out_outExps)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outExps = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _e;
{
modelica_integer _index;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,32,5) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmp6 = mmc_unbox_integer(tmpMeta[2]);
_index = tmp6;
_outExps = omc_List_consOnTrue(threadData, (((modelica_integer) -1) != _index), _e, _acc);
tmpMeta[0+0] = _e;
tmpMeta[0+1] = _outExps;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _e;
tmpMeta[0+1] = _acc;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_outExps = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outExps) { *out_outExps = _outExps; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateRecordDeclarations(threadData_t *threadData, modelica_metatype _inVars, modelica_metatype _inAccRecordDecls, modelica_metatype _inReturnTypes, modelica_metatype *out_outReturnTypes)
{
modelica_metatype _outRecordDecls = NULL;
modelica_metatype _outReturnTypes = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;
tmp4_1 = _inVars;
tmp4_2 = _inAccRecordDecls;
tmp4_3 = _inReturnTypes;
{
modelica_metatype _rest = NULL;
modelica_metatype _ft = NULL;
modelica_metatype _rt = NULL;
modelica_metatype _rt_1 = NULL;
modelica_metatype _rt_2 = NULL;
modelica_metatype _accRecDecls = NULL;
modelica_metatype _algorithm_ = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _binding = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
_accRecDecls = tmp4_2;
_rt = tmp4_3;
tmp4 += 3;
tmpMeta[0+0] = _accRecDecls;
tmpMeta[0+1] = _rt;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,13) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 7));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 8));
_ft = tmpMeta[4];
_binding = tmpMeta[5];
_rest = tmpMeta[3];
_accRecDecls = tmp4_2;
_rt = tmp4_3;
tmp4 += 1;
_accRecDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForRecord(threadData, _ft, _accRecDecls, _rt ,&_rt_1);
if((isSome(_binding) && omc_Config_acceptMetaModelicaGrammar(threadData)))
{
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
omc_Expression_traverseExpBottomUp(threadData, omc_Util_getOption(threadData, _binding), boxvar_SimCodeFunctionUtil_matchMetarecordCalls, tmpMeta[2] ,&_expl);
_accRecDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForMetarecords(threadData, _expl, _accRecDecls, _rt_1 ,&_rt_1);
}
tmpMeta[0+0] = omc_SimCodeFunctionUtil_elaborateRecordDeclarations(threadData, _rest, _accRecDecls, _rt_1, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
modelica_boolean tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],15,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_algorithm_ = tmpMeta[4];
_rest = tmpMeta[3];
_accRecDecls = tmp4_2;
_rt = tmp4_3;
tmp6 = omc_Config_acceptMetaModelicaGrammar(threadData);
if (1 != tmp6) goto goto_2;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box2(0, boxvar_SimCodeFunctionUtil_matchMetarecordCalls, tmpMeta[2]);
tmpMeta[4] = omc_DAEUtil_traverseAlgorithmExps(threadData, _algorithm_, boxvar_Expression_traverseSubexpressionsHelper, tmpMeta[3]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_expl = tmpMeta[5];
_accRecDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForMetarecords(threadData, _expl, _accRecDecls, _rt ,&_rt_2);
tmpMeta[0+0] = omc_SimCodeFunctionUtil_elaborateRecordDeclarations(threadData, _rest, _accRecDecls, _rt_2, &tmpMeta[0+1]);
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_rest = tmpMeta[3];
_accRecDecls = tmp4_2;
_rt = tmp4_3;
tmpMeta[0+0] = omc_SimCodeFunctionUtil_elaborateRecordDeclarations(threadData, _rest, _accRecDecls, _rt, &tmpMeta[0+1]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outRecordDecls = tmpMeta[0+0];
_outReturnTypes = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outReturnTypes) { *out_outReturnTypes = _outReturnTypes; }
return _outRecordDecls;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateRecordDeclarationsFromTypes(threadData_t *threadData, modelica_metatype _inTypes, modelica_metatype _inAccRecordDecls, modelica_metatype _inReturnTypes, modelica_metatype *out_outReturnTypes)
{
modelica_metatype _outRecordDecls = NULL;
modelica_metatype _outReturnTypes = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inTypes;
tmp4_2 = _inAccRecordDecls;
{
modelica_metatype _accRecDecls = NULL;
modelica_metatype _firstType = NULL;
modelica_metatype _restTypes = NULL;
modelica_metatype _returnTypes = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
_accRecDecls = tmp4_2;
tmpMeta[0+0] = _accRecDecls;
tmpMeta[0+1] = _inReturnTypes;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_firstType = tmpMeta[2];
_restTypes = tmpMeta[3];
_accRecDecls = tmp4_2;
_accRecDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForRecord(threadData, _firstType, _accRecDecls, _inReturnTypes ,&_returnTypes);
_inTypes = _restTypes;
_inAccRecordDecls = _accRecDecls;
_inReturnTypes = _returnTypes;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outRecordDecls = tmpMeta[0+0];
_outReturnTypes = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outReturnTypes) { *out_outReturnTypes = _outReturnTypes; }
return _outRecordDecls;
}
PROTECTED_FUNCTION_STATIC void omc_SimCodeFunctionUtil_isLiteralExp(threadData_t *threadData, modelica_metatype _iexp)
{
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _iexp;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _expl = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 14; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,2) == 0) goto tmp2_end;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,31,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!optionNone(tmpMeta[0])) goto tmp2_end;
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,31,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (optionNone(tmpMeta[0])) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_exp = tmpMeta[1];
_iexp = _exp;
goto _tailrecursive;
;
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,34,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exp = tmpMeta[0];
_iexp = _exp;
goto _tailrecursive;
;
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,29,2) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
omc_SimCodeFunctionUtil_isLiteralExp(threadData, _e1);
_iexp = _e2;
goto _tailrecursive;
;
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,28,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_expl = tmpMeta[0];
omc_List_map__0(threadData, _expl, boxvar_SimCodeFunctionUtil_isLiteralExp);
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,30,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_expl = tmpMeta[0];
omc_List_map__0(threadData, _expl, boxvar_SimCodeFunctionUtil_isLiteralExp);
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,32,5) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_expl = tmpMeta[0];
omc_List_map__0(threadData, _expl, boxvar_SimCodeFunctionUtil_isLiteralExp);
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,36,2) == 0) goto tmp2_end;
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,3) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (16 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT223), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_expl = tmpMeta[2];
omc_List_map__0(threadData, _expl, boxvar_SimCodeFunctionUtil_isLiteralExp);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC void omc_SimCodeFunctionUtil_isLiteralArrayExp(threadData_t *threadData, modelica_metatype _iexp)
{
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _iexp;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _expll = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 15; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expl = tmpMeta[0];
omc_List_map__0(threadData, _expl, boxvar_SimCodeFunctionUtil_isLiteralArrayExp);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_expll = tmpMeta[0];
omc_List_map__0(threadData, omc_List_flatten(threadData, _expll), boxvar_SimCodeFunctionUtil_isLiteralArrayExp);
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,2) == 0) goto tmp2_end;
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,31,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!optionNone(tmpMeta[0])) goto tmp2_end;
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,31,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (optionNone(tmpMeta[0])) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_exp = tmpMeta[1];
_iexp = _exp;
goto _tailrecursive;
;
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,34,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_exp = tmpMeta[0];
_iexp = _exp;
goto _tailrecursive;
;
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,29,2) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
omc_SimCodeFunctionUtil_isLiteralArrayExp(threadData, _e1);
_iexp = _e2;
goto _tailrecursive;
;
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,28,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_expl = tmpMeta[0];
omc_List_map__0(threadData, _expl, boxvar_SimCodeFunctionUtil_isLiteralArrayExp);
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,30,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_expl = tmpMeta[0];
omc_List_map__0(threadData, _expl, boxvar_SimCodeFunctionUtil_isLiteralArrayExp);
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,32,5) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_expl = tmpMeta[0];
omc_List_map__0(threadData, _expl, boxvar_SimCodeFunctionUtil_isLiteralArrayExp);
goto tmp2_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,36,2) == 0) goto tmp2_end;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC void omc_SimCodeFunctionUtil_isTrivialLiteralExp(threadData_t *threadData, modelica_metatype _exp)
{
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _exp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 10; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,34,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto tmp2_end;
goto goto_1;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,34,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp2_end;
goto goto_1;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,34,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,2) == 0) goto tmp2_end;
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,28,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp2_end;
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,31,1) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!optionNone(tmpMeta[0])) goto tmp2_end;
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,36,2) == 0) goto tmp2_end;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_listToCons2(threadData_t *threadData, modelica_metatype _ies)
{
modelica_metatype _o = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _ies;
{
modelica_metatype _car = NULL;
modelica_metatype _cdr = NULL;
modelica_metatype _es = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _OMC_LIT224;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_car = tmpMeta[1];
_es = tmpMeta[2];
_cdr = omc_SimCodeFunctionUtil_listToCons2(threadData, _es);
tmpMeta[1] = mmc_mk_box3(32, &DAE_Exp_CONS__desc, _car, _cdr);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_o = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _o;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_listToCons(threadData_t *threadData, modelica_metatype _e)
{
modelica_metatype _o = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _e;
{
modelica_metatype _es = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,28,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_es = tmpMeta[1];
tmpMeta[0] = omc_SimCodeFunctionUtil_listToCons2(threadData, _es);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_o = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _o;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_replaceLiteralExp2(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_metatype _exp = NULL;
modelica_metatype _nexp = NULL;
modelica_integer _i;
modelica_integer _ix;
modelica_metatype _l = NULL;
modelica_metatype _ht = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_exp = tmp4_1;
_ht = tmpMeta[2];
_ix = mmc_unbox_integer(omc_BaseHashTable_get(threadData, _exp, _ht));
tmpMeta[2] = mmc_mk_box3(39, &DAE_Exp_SHARED__LITERAL__desc, mmc_mk_integer(_ix), _exp);
_nexp = tmpMeta[2];
tmpMeta[0+0] = _nexp;
tmpMeta[0+1] = _inTpl;
goto tmp3_done;
}
case 1: {
modelica_integer tmp6;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
tmp6 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_exp = tmp4_1;
_i = tmp6;
_ht = tmpMeta[3];
_l = tmpMeta[4];
tmpMeta[2] = mmc_mk_box2(0, _exp, mmc_mk_integer(_i));
_ht = omc_BaseHashTable_add(threadData, tmpMeta[2], _ht);
tmpMeta[2] = mmc_mk_box3(39, &DAE_Exp_SHARED__LITERAL__desc, mmc_mk_integer(_i), _exp);
_nexp = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_exp, _l);
tmpMeta[3] = mmc_mk_box3(0, mmc_mk_integer(((modelica_integer) 1) + _i), _ht, tmpMeta[2]);
tmpMeta[0+0] = _nexp;
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_outTpl = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_replaceLiteralExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_metatype _exp = NULL;
modelica_string _msg = NULL;
modelica_metatype _t = NULL;
modelica_metatype _es = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
_exp = tmp4_1;
_t = tmp4_2;
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_SimCodeFunctionUtil_isLiteralExp(threadData, _exp);
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_2;}
tmpMeta[0+0] = _exp;
tmpMeta[0+1] = _t;
goto tmp3_done;
}
case 1: {
_exp = tmp4_1;
_t = tmp4_2;
omc_SimCodeFunctionUtil_isTrivialLiteralExp(threadData, _exp);
tmpMeta[0+0] = _exp;
tmpMeta[0+1] = _t;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,28,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_es = tmpMeta[2];
_t = tmp4_2;
tmp8 = (listLength(_es) > ((modelica_integer) 25));
if (1 != tmp8) goto goto_2;
tmpMeta[0+0] = omc_SimCodeFunctionUtil_replaceLiteralExp2(threadData, _inExp, _t, &tmpMeta[0+1]);
goto tmp3_done;
}
case 3: {
_exp = tmp4_1;
_t = tmp4_2;
_exp = omc_SimCodeFunctionUtil_listToCons(threadData, _exp);
tmpMeta[0+0] = omc_Expression_traverseExpBottomUp(threadData, _exp, boxvar_SimCodeFunctionUtil_replaceLiteralExp, _t, &tmpMeta[0+1]);
goto tmp3_done;
}
case 4: {
modelica_boolean tmp9;
_exp = tmp4_1;
tmp9 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_SimCodeFunctionUtil_listToCons(threadData, _exp);
tmp9 = 1;
goto goto_10;
goto_10:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp9) {goto goto_2;}
tmpMeta[0+0] = omc_SimCodeFunctionUtil_replaceLiteralExp2(threadData, _exp, _inTpl, &tmpMeta[0+1]);
goto tmp3_done;
}
case 5: {
_exp = tmp4_1;
tmpMeta[2] = stringAppend(_OMC_LIT225,omc_ExpressionDump_printExpStr(threadData, _exp));
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT54);
_msg = tmpMeta[3];
omc_Error_addInternalError(threadData, _msg, _OMC_LIT226);
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_outTpl = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_replaceLiteralArrayExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_boolean *out_cont, modelica_metatype *out_outTpl)
{
modelica_metatype _outExp = NULL;
modelica_boolean _cont;
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_cont = 1;
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inTpl;
{
modelica_metatype _exp2 = NULL;
modelica_metatype _tpl = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,3) == 0) goto tmp3_end;
_tpl = tmp4_2;
{
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp6_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp7 < 2; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
omc_SimCodeFunctionUtil_isLiteralArrayExp(threadData, _inExp);
_exp2 = omc_SimCodeFunctionUtil_replaceLiteralExp2(threadData, _inExp, _tpl ,&_tpl);
_cont = 0;
goto tmp6_done;
}
case 1: {
_exp2 = _inExp;
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
tmp6_done:
(void)tmp7;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp6_done2;
goto_5:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp7 < 2) {
goto tmp6_top;
}
goto goto_2;
tmp6_done2:;
}
}
;
tmpMeta[0+0] = _exp2;
tmpMeta[0+1] = _tpl;
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,3) == 0) goto tmp3_end;
_tpl = tmp4_2;
{
{
volatile mmc_switch_type tmp11;
int tmp12;
tmp11 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp10_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp11 < 2; tmp11++) {
switch (MMC_SWITCH_CAST(tmp11)) {
case 0: {
omc_SimCodeFunctionUtil_isLiteralArrayExp(threadData, _inExp);
_exp2 = omc_SimCodeFunctionUtil_replaceLiteralExp2(threadData, _inExp, _tpl ,&_tpl);
_cont = 0;
goto tmp10_done;
}
case 1: {
_exp2 = _inExp;
goto tmp10_done;
}
}
goto tmp10_end;
tmp10_end: ;
}
goto goto_9;
tmp10_done:
(void)tmp11;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp10_done2;
goto_9:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp11 < 2) {
goto tmp10_top;
}
goto goto_2;
tmp10_done2:;
}
}
;
tmpMeta[0+0] = _exp2;
tmpMeta[0+1] = _tpl;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inTpl;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outTpl = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_cont) { *out_cont = _cont; }
if (out_outTpl) { *out_outTpl = _outTpl; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_replaceLiteralArrayExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_cont, modelica_metatype *out_outTpl)
{
modelica_boolean _cont;
modelica_metatype _outExp = NULL;
_outExp = omc_SimCodeFunctionUtil_replaceLiteralArrayExp(threadData, _inExp, _inTpl, &_cont, out_outTpl);
if (out_cont) { *out_cont = mmc_mk_icon(_cont); }
return _outExp;
}
static modelica_metatype closure0_Patternm_traverseConstantPatternsHelper(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inT, modelica_metatype tmp1)
{
modelica_fnptr func = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_Patternm_traverseConstantPatternsHelper(thData, inExp, inT, func, tmp1);
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_findLiteralsHelper(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inTpl, modelica_metatype *out_tpl)
{
modelica_metatype _exp = NULL;
modelica_metatype _tpl = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_exp = _inExp;
_tpl = _inTpl;
tmpMeta[0] = mmc_mk_box1(0, boxvar_SimCodeFunctionUtil_replaceLiteralExp);
_exp = omc_Expression_traverseExpBottomUp(threadData, _exp, (modelica_fnptr) mmc_mk_box2(0,closure0_Patternm_traverseConstantPatternsHelper,tmpMeta[0]), _tpl ,&_tpl);
_exp = omc_Expression_traverseExpTopDown(threadData, _exp, boxvar_SimCodeFunctionUtil_replaceLiteralArrayExp, _tpl ,&_tpl);
_return: OMC_LABEL_UNUSED
if (out_tpl) { *out_tpl = _tpl; }
return _exp;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_findLiterals(threadData_t *threadData, modelica_metatype _fns, modelica_metatype *out_literals)
{
modelica_metatype _ofns = NULL;
modelica_metatype _literals = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = mmc_mk_box3(0, mmc_mk_integer(((modelica_integer) 0)), omc_HashTableExpToIndex_emptyHashTableSized(threadData, ((modelica_integer) 4013)), tmpMeta[2]);
tmpMeta[4] = omc_DAEUtil_traverseDAEFunctions(threadData, _fns, boxvar_SimCodeFunctionUtil_findLiteralsHelper, tmpMeta[3], &tmpMeta[0]);
_ofns = tmpMeta[4];
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_literals = tmpMeta[1];
_literals = listReverse(_literals);
_return: OMC_LABEL_UNUSED
if (out_literals) { *out_literals = _literals; }
return _ofns;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isParallelArrayVar(threadData_t *threadData, modelica_metatype _var)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _var;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,7) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,7) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isParallelArrayVar(threadData_t *threadData, modelica_metatype _var)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_SimCodeFunctionUtil_isParallelArrayVar(threadData, _var);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_SimCodeFunctionUtil_funcHasParallelInOutArrays(threadData_t *threadData, modelica_metatype _fn)
{
modelica_boolean _b;
modelica_metatype _inVars = NULL;
modelica_metatype _outVars = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _fn;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,7) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_outVars = tmpMeta[1];
_inVars = tmpMeta[2];
{
modelica_metatype _e;
for (tmpMeta[0] = _inVars; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_e = MMC_CAR(tmpMeta[0]);
if(omc_SimCodeFunctionUtil_isParallelArrayVar(threadData, _e))
{
_b = 1;
goto _return;
}
}
}
{
modelica_metatype _e;
for (tmpMeta[0] = _outVars; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_e = MMC_CAR(tmpMeta[0]);
if(omc_SimCodeFunctionUtil_isParallelArrayVar(threadData, _e))
{
_b = 1;
goto _return;
}
}
}
_b = 0;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_SimCodeFunctionUtil_funcHasParallelInOutArrays(threadData_t *threadData, modelica_metatype _fn)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_SimCodeFunctionUtil_funcHasParallelInOutArrays(threadData, _fn);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC void omc_SimCodeFunctionUtil_isBoxedArg(threadData_t *threadData, modelica_metatype _var)
{
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _var;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,7) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],23,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,7) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],25,1) == 0) goto tmp2_end;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,7) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto tmp2_end;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isFunctionPtr(threadData_t *threadData, modelica_metatype _var)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _var;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isFunctionPtr(threadData_t *threadData, modelica_metatype _var)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_SimCodeFunctionUtil_isFunctionPtr(threadData, _var);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_SimCodeFunctionUtil_isBoxedFunction(threadData_t *threadData, modelica_metatype _fn)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _fn;
{
modelica_metatype _inVars = NULL;
modelica_metatype _outVars = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,7) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_outVars = tmpMeta[0];
_inVars = tmpMeta[1];
tmp4 += 1;
omc_List_map__0(threadData, _inVars, boxvar_SimCodeFunctionUtil_isBoxedArg);
omc_List_map__0(threadData, _outVars, boxvar_SimCodeFunctionUtil_isBoxedArg);
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,14) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
_inVars = tmpMeta[0];
_outVars = tmpMeta[1];
omc_List_map__0(threadData, _inVars, boxvar_SimCodeFunctionUtil_isBoxedArg);
omc_List_map__0(threadData, _outVars, boxvar_SimCodeFunctionUtil_isBoxedArg);
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_SimCodeFunctionUtil_isBoxedFunction(threadData_t *threadData, modelica_metatype _fn)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_SimCodeFunctionUtil_isBoxedFunction(threadData, _fn);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
void omc_SimCodeFunctionUtil_checkValidMainFunction(threadData_t *threadData, modelica_string _name, modelica_metatype _fn)
{
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _fn;
{
modelica_metatype _inVars = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,7) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_inVars = tmpMeta[0];
tmp3 += 1;
tmp5 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_List_find(threadData, _inVars, boxvar_SimCodeFunctionUtil_isFunctionPtr);
tmp5 = 1;
goto goto_6;
goto_6:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp5) {goto goto_1;}
goto tmp2_done;
}
case 1: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,14) == 0) goto tmp2_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_inVars = tmpMeta[0];
tmp7 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
omc_List_find(threadData, _inVars, boxvar_SimCodeFunctionUtil_isFunctionPtr);
tmp7 = 1;
goto goto_8;
goto_8:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp7) {goto goto_1;}
goto tmp2_done;
}
case 2: {
tmpMeta[0] = mmc_mk_cons(_name, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addMessage(threadData, _OMC_LIT231, tmpMeta[0]);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
_return: OMC_LABEL_UNUSED
return;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateStatement(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_metatype _stmts = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inElement;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],15,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_stmts = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _stmts;
}
PROTECTED_FUNCTION_STATIC modelica_integer omc_SimCodeFunctionUtil_findIndexInList(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _outVars, modelica_integer _inCurrentIndex, modelica_boolean *out_hasBinding)
{
modelica_integer _crefIndexInOutVars;
modelica_boolean _hasBinding;
modelica_integer tmp1_c0 __attribute__((unused)) = 0;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_integer tmp4_2;
tmp4_1 = _outVars;
tmp4_2 = _inCurrentIndex;
{
modelica_metatype _name = NULL;
modelica_metatype _restOutVars = NULL;
modelica_metatype _v = NULL;
modelica_integer _currentIndex;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1_c0 = ((modelica_integer) -1);
tmp1_c1 = 0;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,7) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_name = tmpMeta[4];
_v = tmpMeta[5];
_currentIndex = tmp4_2;
tmp6 = omc_ComponentReference_crefEqualNoStringCompare(threadData, _cref, _name);
if (1 != tmp6) goto goto_2;
tmp1_c0 = _currentIndex;
tmp1_c1 = isSome(_v);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
_restOutVars = tmpMeta[3];
_currentIndex = tmp4_2;
_currentIndex = ((modelica_integer) 1) + _currentIndex;
tmp1_c0 = omc_SimCodeFunctionUtil_findIndexInList(threadData, _cref, _restOutVars, _currentIndex, &tmp1_c1);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_crefIndexInOutVars = tmp1_c0;
_hasBinding = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_hasBinding) { *out_hasBinding = _hasBinding; }
return _crefIndexInOutVars;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_findIndexInList(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _outVars, modelica_metatype _inCurrentIndex, modelica_metatype *out_hasBinding)
{
modelica_integer tmp1;
modelica_boolean _hasBinding;
modelica_integer _crefIndexInOutVars;
modelica_metatype out_crefIndexInOutVars;
tmp1 = mmc_unbox_integer(_inCurrentIndex);
_crefIndexInOutVars = omc_SimCodeFunctionUtil_findIndexInList(threadData, _cref, _outVars, tmp1, &_hasBinding);
out_crefIndexInOutVars = mmc_mk_icon(_crefIndexInOutVars);
if (out_hasBinding) { *out_hasBinding = mmc_mk_icon(_hasBinding); }
return out_crefIndexInOutVars;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_assignOutputIndex(threadData_t *threadData, modelica_metatype _simExtArgIn, modelica_metatype _outVars)
{
modelica_metatype _simExtArgOut = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _simExtArgIn;
{
modelica_metatype _cref = NULL;
modelica_metatype _fcref = NULL;
modelica_boolean _isInput;
modelica_integer _outputIndex;
modelica_boolean _isArray;
modelica_boolean _hasBinding;
modelica_metatype _type_ = NULL;
modelica_metatype _exp = NULL;
modelica_integer _newOutputIndex;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
_cref = tmpMeta[1];
_isInput = tmp5;
_outputIndex = tmp6;
_isArray = tmp7;
_type_ = tmpMeta[5];
tmp3 += 1;
tmp8 = (_outputIndex == ((modelica_integer) -1));
if (1 != tmp8) goto goto_1;
_fcref = omc_ComponentReference_crefFirstCref(threadData, _cref);
_newOutputIndex = omc_SimCodeFunctionUtil_findIndexInList(threadData, _fcref, _outVars, ((modelica_integer) 1) ,&_hasBinding);
tmpMeta[1] = mmc_mk_box7(3, &SimCodeFunction_SimExtArg_SIMEXTARG__desc, _cref, mmc_mk_boolean(_isInput), mmc_mk_integer(_newOutputIndex), mmc_mk_boolean(_isArray), mmc_mk_boolean(_hasBinding), _type_);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_integer tmp9;
modelica_integer tmp10;
modelica_boolean tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp9 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp10 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_cref = tmpMeta[1];
_isInput = tmp9;
_outputIndex = tmp10;
_type_ = tmpMeta[4];
_exp = tmpMeta[5];
tmp11 = (_outputIndex == ((modelica_integer) -1));
if (1 != tmp11) goto goto_1;
_newOutputIndex = omc_SimCodeFunctionUtil_findIndexInList(threadData, _cref, _outVars, ((modelica_integer) 1), NULL);
tmpMeta[1] = mmc_mk_box6(5, &SimCodeFunction_SimExtArg_SIMEXTARGSIZE__desc, _cref, mmc_mk_boolean(_isInput), mmc_mk_integer(_newOutputIndex), _type_, _exp);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
tmpMeta[0] = _simExtArgIn;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_simExtArgOut = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _simExtArgOut;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_fixOutputIndex(threadData_t *threadData, modelica_metatype _outVars, modelica_metatype _simExtArgsIn, modelica_metatype _extReturnIn, modelica_metatype *out_extReturnOut)
{
modelica_metatype _simExtArgsOut = NULL;
modelica_metatype _extReturnOut = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_simExtArgsOut = omc_List_map1(threadData, _simExtArgsIn, boxvar_SimCodeFunctionUtil_assignOutputIndex, _outVars);
_extReturnOut = omc_SimCodeFunctionUtil_assignOutputIndex(threadData, _extReturnIn, _outVars);
tmpMeta[0+0] = _simExtArgsOut;
tmpMeta[0+1] = _extReturnOut;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_simExtArgsOut = tmpMeta[0+0];
_extReturnOut = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_extReturnOut) { *out_extReturnOut = _extReturnOut; }
return _simExtArgsOut;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_extArgsToSimExtArgs(threadData_t *threadData, modelica_metatype _extArg)
{
modelica_metatype _simExtArg = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _extArg;
{
modelica_metatype _componentRef = NULL;
modelica_metatype _dir = NULL;
modelica_metatype _type_ = NULL;
modelica_boolean _isInput;
modelica_boolean _isOutput;
modelica_boolean _isArray;
modelica_metatype _exp_ = NULL;
modelica_integer _outputIndex;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_componentRef = tmpMeta[1];
_dir = tmpMeta[2];
_type_ = tmpMeta[3];
_isInput = omc_AbsynUtil_isInput(threadData, _dir);
_isOutput = omc_AbsynUtil_isOutput(threadData, _dir);
_outputIndex = (_isOutput?((modelica_integer) -1):((modelica_integer) 0));
_isArray = omc_Types_isArray(threadData, _type_);
_type_ = omc_Types_simplifyType(threadData, _type_);
tmpMeta[1] = mmc_mk_box7(3, &SimCodeFunction_SimExtArg_SIMEXTARG__desc, _componentRef, mmc_mk_boolean(_isInput), mmc_mk_integer(_outputIndex), mmc_mk_boolean(_isArray), mmc_mk_boolean(0), _type_);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exp_ = tmpMeta[1];
_type_ = tmpMeta[2];
_type_ = omc_Types_simplifyType(threadData, _type_);
tmpMeta[1] = mmc_mk_box3(4, &SimCodeFunction_SimExtArg_SIMEXTARGEXP__desc, _exp_, _type_);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_componentRef = tmpMeta[1];
_type_ = tmpMeta[2];
_exp_ = tmpMeta[3];
_type_ = omc_Types_simplifyType(threadData, _type_);
tmpMeta[1] = mmc_mk_box6(5, &SimCodeFunction_SimExtArg_SIMEXTARGSIZE__desc, _componentRef, mmc_mk_boolean(1), mmc_mk_integer(((modelica_integer) 0)), _type_, _exp_);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
tmpMeta[0] = _OMC_LIT232;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_simExtArg = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _simExtArg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_daeInOutSimVar(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_metatype _outVar = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inElement;
{
modelica_string _name = NULL;
modelica_metatype _daeType = NULL;
modelica_metatype _id = NULL;
modelica_metatype _kind = NULL;
modelica_metatype _prl = NULL;
modelica_metatype _inst_dims = NULL;
modelica_metatype _binding = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,13) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],11,4) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[2];
_prl = tmpMeta[3];
_daeType = tmpMeta[4];
_binding = tmpMeta[5];
tmpMeta[1] = mmc_mk_box6(3, &DAE_FuncArg_FUNCARG__desc, _name, _daeType, _OMC_LIT233, _prl, mmc_mk_none());
tmpMeta[0] = omc_SimCodeFunctionUtil_typesSimFunctionArg(threadData, tmpMeta[1], _binding);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,13) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 9));
_id = tmpMeta[1];
_kind = tmpMeta[2];
_prl = tmpMeta[3];
_daeType = tmpMeta[4];
_binding = tmpMeta[5];
_inst_dims = tmpMeta[6];
_daeType = omc_Types_simplifyType(threadData, _daeType);
tmpMeta[1] = mmc_mk_box8(3, &SimCodeFunction_Variable_VARIABLE__desc, _id, _daeType, _binding, _inst_dims, _prl, _kind, mmc_mk_boolean(0));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
omc_Error_addInternalError(threadData, _OMC_LIT234, _OMC_LIT235);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outVar = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outVar;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_typesSimFunctionArg(threadData_t *threadData, modelica_metatype _inFuncArg, modelica_metatype _binding)
{
modelica_metatype _outVar = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inFuncArg;
{
modelica_metatype _tty = NULL;
modelica_string _name = NULL;
modelica_metatype _cref_ = NULL;
modelica_metatype _const = NULL;
modelica_metatype _args = NULL;
modelica_metatype _res_ty = NULL;
modelica_metatype _var_args = NULL;
modelica_metatype _tys = NULL;
modelica_metatype _kind = NULL;
modelica_metatype _prl = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],11,4) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],14,2) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_name = tmpMeta[1];
_args = tmpMeta[3];
_tys = tmpMeta[5];
tmp3 += 1;
_var_args = omc_List_map1(threadData, _args, boxvar_SimCodeFunctionUtil_typesSimFunctionArg, mmc_mk_none());
_tys = omc_List_map(threadData, _tys, boxvar_Types_simplifyType);
tmpMeta[1] = mmc_mk_box5(4, &SimCodeFunction_Variable_FUNCTION__PTR__desc, _name, _tys, _var_args, _binding);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],11,4) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],7,0) == 0) goto tmp2_end;
_name = tmpMeta[1];
_args = tmpMeta[3];
_var_args = omc_List_map1(threadData, _args, boxvar_SimCodeFunctionUtil_typesSimFunctionArg, mmc_mk_none());
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box5(4, &SimCodeFunction_Variable_FUNCTION__PTR__desc, _name, tmpMeta[1], _var_args, _binding);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],11,4) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
_name = tmpMeta[1];
_args = tmpMeta[3];
_res_ty = tmpMeta[4];
_res_ty = omc_Types_simplifyType(threadData, _res_ty);
_var_args = omc_List_map1(threadData, _args, boxvar_SimCodeFunctionUtil_typesSimFunctionArg, mmc_mk_none());
tmpMeta[1] = mmc_mk_cons(_res_ty, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[2] = mmc_mk_box5(4, &SimCodeFunction_Variable_FUNCTION__PTR__desc, _name, tmpMeta[1], _var_args, _binding);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_name = tmpMeta[1];
_tty = tmpMeta[2];
_const = tmpMeta[3];
_prl = tmpMeta[4];
_tty = omc_Types_simplifyType(threadData, _tty);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_cref_ = omc_ComponentReference_makeCrefIdent(threadData, _name, _tty, tmpMeta[1]);
_kind = omc_DAEUtil_const2VarKind(threadData, _const);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box8(3, &SimCodeFunction_Variable_VARIABLE__desc, _cref_, _tty, _binding, tmpMeta[1], _prl, _kind, mmc_mk_boolean(0));
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outVar = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outVar;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateFunction(threadData_t *threadData, modelica_metatype _program, modelica_metatype _inElement, modelica_metatype _inRecordTypes, modelica_metatype _inRecordDecls, modelica_metatype _inIncludes, modelica_metatype _inIncludeDirs, modelica_metatype _inLibs, modelica_metatype _inLibPaths, modelica_metatype *out_outRecordTypes, modelica_metatype *out_outRecordDecls, modelica_metatype *out_outIncludes, modelica_metatype *out_outIncludeDirs, modelica_metatype *out_outLibs, modelica_metatype *out_outLibPaths)
{
modelica_metatype _outFunction = NULL;
modelica_metatype _outRecordTypes = NULL;
modelica_metatype _outRecordDecls = NULL;
modelica_metatype _outIncludes = NULL;
modelica_metatype _outIncludeDirs = NULL;
modelica_metatype _outLibs = NULL;
modelica_metatype _outLibPaths = NULL;
modelica_metatype tmpMeta[18] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;volatile modelica_metatype tmp4_3;volatile modelica_metatype tmp4_4;volatile modelica_metatype tmp4_5;volatile modelica_metatype tmp4_6;volatile modelica_metatype tmp4_7;
tmp4_1 = _inElement;
tmp4_2 = _inRecordTypes;
tmp4_3 = _inRecordDecls;
tmp4_4 = _inIncludes;
tmp4_5 = _inIncludeDirs;
tmp4_6 = _inLibs;
tmp4_7 = _inLibPaths;
{
modelica_metatype _fn = NULL;
modelica_string _extfnname = NULL;
modelica_string _lang = NULL;
modelica_metatype _vars = NULL;
modelica_metatype _includes = NULL;
modelica_metatype _libs = NULL;
modelica_metatype _libPaths = NULL;
modelica_metatype _fn_libs = NULL;
modelica_metatype _fn_paths = NULL;
modelica_metatype _fn_includes = NULL;
modelica_metatype _fn_includeDirs = NULL;
modelica_metatype _rt = NULL;
modelica_metatype _rt_1 = NULL;
modelica_metatype _fpath = NULL;
modelica_metatype _args = NULL;
modelica_metatype _restype = NULL;
modelica_metatype _extargs = NULL;
modelica_metatype _simextargs = NULL;
modelica_metatype _extReturn = NULL;
modelica_metatype _extretarg = NULL;
modelica_metatype _ann = NULL;
modelica_metatype _extdecl = NULL;
modelica_metatype _outVars = NULL;
modelica_metatype _inVars = NULL;
modelica_metatype _biVars = NULL;
modelica_metatype _funArgs = NULL;
modelica_metatype _varDecls = NULL;
modelica_metatype _recordDecls = NULL;
modelica_metatype _bodyStmts = NULL;
modelica_metatype _daeElts = NULL;
modelica_metatype _name = NULL;
modelica_metatype _source = NULL;
modelica_metatype _info = NULL;
modelica_boolean _dynamicLoad;
modelica_metatype _includeDirs = NULL;
modelica_metatype _funAttrs = NULL;
modelica_metatype _varlst = NULL;
modelica_metatype _visibility = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,10) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[8])) goto tmp3_end;
tmpMeta[9] = MMC_CAR(tmpMeta[8]);
tmpMeta[10] = MMC_CDR(tmpMeta[8]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],0,1) == 0) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[12],11,4) == 0) goto tmp3_end;
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 4));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmp6 = mmc_unbox_integer(tmpMeta[16]);
if (0 != tmp6) goto tmp3_end;
tmpMeta[17] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 10));
_fpath = tmpMeta[7];
_daeElts = tmpMeta[11];
_args = tmpMeta[13];
_funAttrs = tmpMeta[14];
_visibility = tmpMeta[15];
_source = tmpMeta[17];
_rt = tmp4_2;
_recordDecls = tmp4_3;
_includes = tmp4_4;
_includeDirs = tmp4_5;
_libs = tmp4_6;
_libPaths = tmp4_7;
tmpMeta[7] = _funAttrs;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],0,0) == 0) goto goto_2;
_outVars = omc_List_map(threadData, omc_DAEUtil_getOutputVars(threadData, _daeElts), boxvar_SimCodeFunctionUtil_daeInOutSimVar);
_funArgs = omc_List_map1(threadData, _args, boxvar_SimCodeFunctionUtil_typesSimFunctionArg, mmc_mk_none());
_recordDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarations(threadData, _daeElts, _recordDecls, _rt ,&_rt_1);
_vars = omc_List_filterOnTrue(threadData, _daeElts, boxvar_SimCodeFunctionUtil_isVarQ);
_varDecls = omc_List_map(threadData, _vars, boxvar_SimCodeFunctionUtil_daeInOutSimVar);
{
modelica_metatype __omcQ_24tmpVar23;
modelica_metatype __omcQ_24tmpVar22;
int tmp7;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _daeElts;
tmpMeta[8] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar23 = tmpMeta[8];
while(1) {
tmp7 = 1;
while (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
if (omc_DAEUtil_isAlgorithm(threadData, _e)) {
tmp7--;
break;
}
}
if (tmp7 == 0) {
__omcQ_24tmpVar22 = omc_SimCodeFunctionUtil_elaborateStatement(threadData, _e);
__omcQ_24tmpVar23 = listAppend(__omcQ_24tmpVar22, __omcQ_24tmpVar23);
} else if (tmp7 == 1) {
break;
} else {
goto goto_2;
}
}
tmpMeta[7] = __omcQ_24tmpVar23;
}
_bodyStmts = tmpMeta[7];
_info = omc_ElementSource_getElementSourceFileInfo(threadData, _source);
tmpMeta[7] = mmc_mk_box8(3, &SimCodeFunction_Function_FUNCTION__desc, _fpath, _outVars, _funArgs, _varDecls, _bodyStmts, _visibility, _info);
tmpMeta[0+0] = tmpMeta[7];
tmpMeta[0+1] = _rt_1;
tmpMeta[0+2] = _recordDecls;
tmpMeta[0+3] = _includes;
tmpMeta[0+4] = _includeDirs;
tmpMeta[0+5] = _libs;
tmpMeta[0+6] = _libPaths;
goto tmp3_done;
}
case 1: {
modelica_integer tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,10) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[8])) goto tmp3_end;
tmpMeta[9] = MMC_CAR(tmpMeta[8]);
tmpMeta[10] = MMC_CDR(tmpMeta[8]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],0,1) == 0) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[12],11,4) == 0) goto tmp3_end;
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 4));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmp8 = mmc_unbox_integer(tmpMeta[15]);
if (0 != tmp8) goto tmp3_end;
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 10));
_fpath = tmpMeta[7];
_daeElts = tmpMeta[11];
_args = tmpMeta[13];
_funAttrs = tmpMeta[14];
_source = tmpMeta[16];
_rt = tmp4_2;
_recordDecls = tmp4_3;
_includes = tmp4_4;
_includeDirs = tmp4_5;
_libs = tmp4_6;
_libPaths = tmp4_7;
tmpMeta[7] = _funAttrs;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],2,0) == 0) goto goto_2;
_outVars = omc_List_map(threadData, omc_DAEUtil_getOutputVars(threadData, _daeElts), boxvar_SimCodeFunctionUtil_daeInOutSimVar);
_funArgs = omc_List_map1(threadData, _args, boxvar_SimCodeFunctionUtil_typesSimFunctionArg, mmc_mk_none());
_recordDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarations(threadData, _daeElts, _recordDecls, _rt ,&_rt_1);
_vars = omc_List_filterOnTrue(threadData, _daeElts, boxvar_SimCodeFunctionUtil_isVarNotInputNotOutput);
_varDecls = omc_List_map(threadData, _vars, boxvar_SimCodeFunctionUtil_daeInOutSimVar);
{
modelica_metatype __omcQ_24tmpVar25;
modelica_metatype __omcQ_24tmpVar24;
int tmp9;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _daeElts;
tmpMeta[8] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar25 = tmpMeta[8];
while(1) {
tmp9 = 1;
while (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
if (omc_DAEUtil_isAlgorithm(threadData, _e)) {
tmp9--;
break;
}
}
if (tmp9 == 0) {
__omcQ_24tmpVar24 = omc_SimCodeFunctionUtil_elaborateStatement(threadData, _e);
__omcQ_24tmpVar25 = listAppend(__omcQ_24tmpVar24, __omcQ_24tmpVar25);
} else if (tmp9 == 1) {
break;
} else {
goto goto_2;
}
}
tmpMeta[7] = __omcQ_24tmpVar25;
}
_bodyStmts = tmpMeta[7];
_info = omc_ElementSource_getElementSourceFileInfo(threadData, _source);
tmpMeta[7] = mmc_mk_box7(5, &SimCodeFunction_Function_KERNEL__FUNCTION__desc, _fpath, _outVars, _funArgs, _varDecls, _bodyStmts, _info);
tmpMeta[0+0] = tmpMeta[7];
tmpMeta[0+1] = _rt_1;
tmpMeta[0+2] = _recordDecls;
tmpMeta[0+3] = _includes;
tmpMeta[0+4] = _includeDirs;
tmpMeta[0+5] = _libs;
tmpMeta[0+6] = _libPaths;
goto tmp3_done;
}
case 2: {
modelica_integer tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,10) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[8])) goto tmp3_end;
tmpMeta[9] = MMC_CAR(tmpMeta[8]);
tmpMeta[10] = MMC_CDR(tmpMeta[8]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],0,1) == 0) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[12],11,4) == 0) goto tmp3_end;
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 2));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[12]), 4));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmp10 = mmc_unbox_integer(tmpMeta[15]);
if (0 != tmp10) goto tmp3_end;
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 10));
_fpath = tmpMeta[7];
_daeElts = tmpMeta[11];
_args = tmpMeta[13];
_funAttrs = tmpMeta[14];
_source = tmpMeta[16];
_rt = tmp4_2;
_recordDecls = tmp4_3;
_includes = tmp4_4;
_includeDirs = tmp4_5;
_libs = tmp4_6;
_libPaths = tmp4_7;
tmp4 += 2;
tmpMeta[7] = _funAttrs;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],1,0) == 0) goto goto_2;
_outVars = omc_List_map(threadData, omc_DAEUtil_getOutputVars(threadData, _daeElts), boxvar_SimCodeFunctionUtil_daeInOutSimVar);
_funArgs = omc_List_map1(threadData, _args, boxvar_SimCodeFunctionUtil_typesSimFunctionArg, mmc_mk_none());
_recordDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarations(threadData, _daeElts, _recordDecls, _rt ,&_rt_1);
_vars = omc_List_filterOnTrue(threadData, _daeElts, boxvar_SimCodeFunctionUtil_isVarQ);
_varDecls = omc_List_map(threadData, _vars, boxvar_SimCodeFunctionUtil_daeInOutSimVar);
{
modelica_metatype __omcQ_24tmpVar27;
modelica_metatype __omcQ_24tmpVar26;
int tmp11;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _daeElts;
tmpMeta[8] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar27 = tmpMeta[8];
while(1) {
tmp11 = 1;
while (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
if (omc_DAEUtil_isAlgorithm(threadData, _e)) {
tmp11--;
break;
}
}
if (tmp11 == 0) {
__omcQ_24tmpVar26 = omc_SimCodeFunctionUtil_elaborateStatement(threadData, _e);
__omcQ_24tmpVar27 = listAppend(__omcQ_24tmpVar26, __omcQ_24tmpVar27);
} else if (tmp11 == 1) {
break;
} else {
goto goto_2;
}
}
tmpMeta[7] = __omcQ_24tmpVar27;
}
_bodyStmts = tmpMeta[7];
_info = omc_ElementSource_getElementSourceFileInfo(threadData, _source);
tmpMeta[7] = mmc_mk_box7(4, &SimCodeFunction_Function_PARALLEL__FUNCTION__desc, _fpath, _outVars, _funArgs, _varDecls, _bodyStmts, _info);
tmpMeta[0+0] = tmpMeta[7];
tmpMeta[0+1] = _rt_1;
tmpMeta[0+2] = _recordDecls;
tmpMeta[0+3] = _includes;
tmpMeta[0+4] = _includeDirs;
tmpMeta[0+5] = _libs;
tmpMeta[0+6] = _libPaths;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,10) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (listEmpty(tmpMeta[8])) goto tmp3_end;
tmpMeta[9] = MMC_CAR(tmpMeta[8]);
tmpMeta[10] = MMC_CDR(tmpMeta[8]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],1,2) == 0) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 3));
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[13],11,4) == 0) goto tmp3_end;
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[13]), 2));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta[16] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 10));
_fpath = tmpMeta[7];
_daeElts = tmpMeta[11];
_extdecl = tmpMeta[12];
_args = tmpMeta[14];
_visibility = tmpMeta[15];
_source = tmpMeta[16];
_rt = tmp4_2;
_recordDecls = tmp4_3;
_includes = tmp4_4;
_includeDirs = tmp4_5;
_libs = tmp4_6;
_libPaths = tmp4_7;
tmp4 += 1;
tmpMeta[7] = _extdecl;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 5));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
_extfnname = tmpMeta[8];
_extargs = tmpMeta[9];
_extretarg = tmpMeta[10];
_lang = tmpMeta[11];
_ann = tmpMeta[12];
_funArgs = omc_List_map1(threadData, _args, boxvar_SimCodeFunctionUtil_typesSimFunctionArg, mmc_mk_none());
_outVars = omc_List_map(threadData, omc_DAEUtil_getOutputVars(threadData, _daeElts), boxvar_SimCodeFunctionUtil_daeInOutSimVar);
_inVars = omc_List_map(threadData, omc_DAEUtil_getInputVars(threadData, _daeElts), boxvar_SimCodeFunctionUtil_daeInOutSimVar);
_biVars = omc_List_map(threadData, omc_DAEUtil_getBidirVars(threadData, _daeElts), boxvar_SimCodeFunctionUtil_daeInOutSimVar);
_recordDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarations(threadData, _daeElts, _recordDecls, _rt ,&_rt_1);
_info = omc_ElementSource_getElementSourceFileInfo(threadData, _source);
_fn_includes = omc_SimCodeFunctionUtil_generateExtFunctionIncludes(threadData, _program, _fpath, _ann, _info ,&_fn_includeDirs ,&_fn_libs ,&_fn_paths ,&_dynamicLoad);
_includes = omc_List_union(threadData, _fn_includes, _includes);
_includeDirs = omc_List_union(threadData, _fn_includeDirs, _includeDirs);
_libs = omc_List_union(threadData, _fn_libs, _libs);
_libPaths = omc_List_union(threadData, _fn_paths, _libPaths);
_simextargs = omc_List_map(threadData, _extargs, boxvar_SimCodeFunctionUtil_extArgsToSimExtArgs);
_extReturn = omc_SimCodeFunctionUtil_extArgsToSimExtArgs(threadData, _extretarg);
_simextargs = omc_SimCodeFunctionUtil_fixOutputIndex(threadData, _outVars, _simextargs, _extReturn ,&_extReturn);
_lang = omc_System_toupper(threadData, _lang);
tmpMeta[7] = mmc_mk_box15(6, &SimCodeFunction_Function_EXTERNAL__FUNCTION__desc, _fpath, _extfnname, _funArgs, _simextargs, _extReturn, _inVars, _outVars, _biVars, _fn_includes, _fn_libs, _lang, _visibility, _info, mmc_mk_boolean(_dynamicLoad));
tmpMeta[0+0] = tmpMeta[7];
tmpMeta[0+1] = _rt_1;
tmpMeta[0+2] = _recordDecls;
tmpMeta[0+3] = _includes;
tmpMeta[0+4] = _includeDirs;
tmpMeta[0+5] = _libs;
tmpMeta[0+6] = _libPaths;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],11,4) == 0) goto tmp3_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],9,3) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[10],3,1) == 0) goto tmp3_end;
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 2));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_args = tmpMeta[8];
_restype = tmpMeta[9];
_name = tmpMeta[11];
_source = tmpMeta[12];
_rt = tmp4_2;
_recordDecls = tmp4_3;
_includes = tmp4_4;
_includeDirs = tmp4_5;
_libs = tmp4_6;
_libPaths = tmp4_7;
_funArgs = omc_List_map1(threadData, _args, boxvar_SimCodeFunctionUtil_typesSimFunctionArg, mmc_mk_none());
_recordDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForRecord(threadData, _restype, _recordDecls, _rt ,&_rt_1);
tmpMeta[7] = _restype;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],9,3) == 0) goto goto_2;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
_varlst = tmpMeta[8];
_varlst = omc_List_filterOnFalse(threadData, _varlst, boxvar_Types_isModifiableTypesVar);
_varDecls = omc_List_map(threadData, _varlst, boxvar_SimCodeFunctionUtil_typesVar);
_info = omc_ElementSource_getElementSourceFileInfo(threadData, _source);
tmpMeta[7] = mmc_mk_box6(7, &SimCodeFunction_Function_RECORD__CONSTRUCTOR__desc, _name, _funArgs, _varDecls, _OMC_LIT236, _info);
tmpMeta[0+0] = tmpMeta[7];
tmpMeta[0+1] = _rt_1;
tmpMeta[0+2] = _recordDecls;
tmpMeta[0+3] = _includes;
tmpMeta[0+4] = _includeDirs;
tmpMeta[0+5] = _libs;
tmpMeta[0+6] = _libPaths;
goto tmp3_done;
}
case 5: {
_fn = tmp4_1;
tmpMeta[7] = stringAppend(_OMC_LIT237,omc_DAEDump_dumpFunctionStr(threadData, _fn));
omc_Error_addInternalError(threadData, tmpMeta[7], _OMC_LIT238);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outFunction = tmpMeta[0+0];
_outRecordTypes = tmpMeta[0+1];
_outRecordDecls = tmpMeta[0+2];
_outIncludes = tmpMeta[0+3];
_outIncludeDirs = tmpMeta[0+4];
_outLibs = tmpMeta[0+5];
_outLibPaths = tmpMeta[0+6];
_return: OMC_LABEL_UNUSED
if (out_outRecordTypes) { *out_outRecordTypes = _outRecordTypes; }
if (out_outRecordDecls) { *out_outRecordDecls = _outRecordDecls; }
if (out_outIncludes) { *out_outIncludes = _outIncludes; }
if (out_outIncludeDirs) { *out_outIncludeDirs = _outIncludeDirs; }
if (out_outLibs) { *out_outLibs = _outLibs; }
if (out_outLibPaths) { *out_outLibPaths = _outLibPaths; }
return _outFunction;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_elaborateFunctions2(threadData_t *threadData, modelica_metatype _program, modelica_metatype _daeElements, modelica_metatype _inFunctions, modelica_metatype _inRecordTypes, modelica_metatype _inDecls, modelica_metatype _inIncludes, modelica_metatype _inIncludeDirs, modelica_metatype _inLibs, modelica_metatype _inPaths, modelica_metatype *out_outRecordTypes, modelica_metatype *out_outDecls, modelica_metatype *out_outIncludes, modelica_metatype *out_outIncludeDirs, modelica_metatype *out_outLibs, modelica_metatype *out_outLibsPaths)
{
modelica_metatype _outFunctions = NULL;
modelica_metatype _outRecordTypes = NULL;
modelica_metatype _outDecls = NULL;
modelica_metatype _outIncludes = NULL;
modelica_metatype _outIncludeDirs = NULL;
modelica_metatype _outLibs = NULL;
modelica_metatype _outLibsPaths = NULL;
modelica_metatype tmpMeta[16] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;modelica_metatype tmp4_3;modelica_metatype tmp4_4;modelica_metatype tmp4_5;modelica_metatype tmp4_6;modelica_metatype tmp4_7;modelica_metatype tmp4_8;
tmp4_1 = _daeElements;
tmp4_2 = _inFunctions;
tmp4_3 = _inRecordTypes;
tmp4_4 = _inDecls;
tmp4_5 = _inIncludes;
tmp4_6 = _inIncludeDirs;
tmp4_7 = _inLibs;
tmp4_8 = _inPaths;
{
modelica_boolean _b;
modelica_metatype _accfns = NULL;
modelica_metatype _fn = NULL;
modelica_metatype _rt = NULL;
modelica_metatype _rt_1 = NULL;
modelica_metatype _includes = NULL;
modelica_metatype _libs = NULL;
modelica_metatype _libPaths = NULL;
modelica_metatype _fel = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _decls = NULL;
modelica_string _name = NULL;
modelica_string _fname = NULL;
modelica_metatype _includeDirs = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
_accfns = tmp4_2;
_rt = tmp4_3;
_decls = tmp4_4;
_includes = tmp4_5;
_includeDirs = tmp4_6;
_libs = tmp4_7;
_libPaths = tmp4_8;
tmpMeta[0+0] = listReverse(_accfns);
tmpMeta[0+1] = _rt;
tmpMeta[0+2] = _decls;
tmpMeta[0+3] = _includes;
tmpMeta[0+4] = _includeDirs;
tmpMeta[0+5] = _libs;
tmpMeta[0+6] = _libPaths;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmp4_1);
tmpMeta[8] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,10) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[9],11,4) == 0) goto tmp3_end;
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[9]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[10]), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[11],2,0) == 0) goto tmp3_end;
_rest = tmpMeta[8];
_accfns = tmp4_2;
_rt = tmp4_3;
_decls = tmp4_4;
_includes = tmp4_5;
_includeDirs = tmp4_6;
_libs = tmp4_7;
_libPaths = tmp4_8;
_daeElements = _rest;
_inFunctions = _accfns;
_inRecordTypes = _rt;
_inDecls = _decls;
_inIncludes = _includes;
_inIncludeDirs = _includeDirs;
_inLibs = _libs;
_inPaths = _libPaths;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
modelica_integer tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmp4_1);
tmpMeta[8] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,10) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 6));
tmp6 = mmc_unbox_integer(tmpMeta[9]);
if (1 != tmp6) goto tmp3_end;
_rest = tmpMeta[8];
_accfns = tmp4_2;
_rt = tmp4_3;
_decls = tmp4_4;
_includes = tmp4_5;
_includeDirs = tmp4_6;
_libs = tmp4_7;
_libPaths = tmp4_8;
_daeElements = _rest;
_inFunctions = _accfns;
_inRecordTypes = _rt;
_inDecls = _decls;
_inIncludes = _includes;
_inIncludeDirs = _includeDirs;
_inLibs = _libs;
_inPaths = _libPaths;
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmp4_1);
tmpMeta[8] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,10) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
if (listEmpty(tmpMeta[10])) goto tmp3_end;
tmpMeta[11] = MMC_CAR(tmpMeta[10]);
tmpMeta[12] = MMC_CDR(tmpMeta[10]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[11],1,2) == 0) goto tmp3_end;
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 3));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[13]), 2));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[13]), 5));
if (7 != MMC_STRLEN(tmpMeta[15]) || strcmp(MMC_STRINGDATA(_OMC_LIT266), MMC_STRINGDATA(tmpMeta[15])) != 0) goto tmp3_end;
_fel = tmpMeta[7];
_path = tmpMeta[9];
_name = tmpMeta[14];
_rest = tmpMeta[8];
_accfns = tmp4_2;
_rt = tmp4_3;
_decls = tmp4_4;
_includes = tmp4_5;
_includeDirs = tmp4_6;
_libs = tmp4_7;
_libPaths = tmp4_8;
_fname = omc_AbsynUtil_pathString(threadData, omc_AbsynUtil_makeNotFullyQualified(threadData, _path), _OMC_LIT54, 1, 0);
_b = (stringEqual(_fname, _name));
if((!_b))
{
_fn = omc_SimCodeFunctionUtil_elaborateFunction(threadData, _program, _fel, _rt, _decls, _includes, _includeDirs, _libs, _libPaths ,NULL ,&_decls ,&_includes ,&_includeDirs ,&_libs ,&_libPaths);
}
_daeElements = _rest;
_inFunctions = omc_List_consOnTrue(threadData, (!_b), _fn, _accfns);
_inRecordTypes = _rt;
_inDecls = _decls;
_inIncludes = _includes;
_inIncludeDirs = _includeDirs;
_inLibs = _libs;
_inPaths = _libPaths;
goto _tailrecursive;
goto tmp3_done;
}
case 4: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmp4_1);
tmpMeta[8] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,10) == 0) goto tmp3_end;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
if (listEmpty(tmpMeta[10])) goto tmp3_end;
tmpMeta[11] = MMC_CAR(tmpMeta[10]);
tmpMeta[12] = MMC_CDR(tmpMeta[10]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[11],1,2) == 0) goto tmp3_end;
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[11]), 3));
tmpMeta[14] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[13]), 2));
tmpMeta[15] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[13]), 5));
if (1 != MMC_STRLEN(tmpMeta[15]) || strcmp(MMC_STRINGDATA(_OMC_LIT267), MMC_STRINGDATA(tmpMeta[15])) != 0) goto tmp3_end;
_fel = tmpMeta[7];
_path = tmpMeta[9];
_name = tmpMeta[14];
_rest = tmpMeta[8];
_accfns = tmp4_2;
_rt = tmp4_3;
_decls = tmp4_4;
_includes = tmp4_5;
_includeDirs = tmp4_6;
_libs = tmp4_7;
_libPaths = tmp4_8;
_fname = omc_AbsynUtil_pathString(threadData, omc_AbsynUtil_makeNotFullyQualified(threadData, _path), _OMC_LIT54, 1, 0);
_b = (listMember(_name, _OMC_LIT265) && (stringEqual(_fname, _name)));
if((!_b))
{
_fn = omc_SimCodeFunctionUtil_elaborateFunction(threadData, _program, _fel, _rt, _decls, _includes, _includeDirs, _libs, _libPaths ,NULL ,&_decls ,&_includes ,&_includeDirs ,&_libs ,&_libPaths);
}
_daeElements = _rest;
_inFunctions = omc_List_consOnTrue(threadData, (!_b), _fn, _accfns);
_inRecordTypes = _rt;
_inDecls = _decls;
_inIncludes = _includes;
_inIncludeDirs = _includeDirs;
_inLibs = _libs;
_inPaths = _libPaths;
goto _tailrecursive;
goto tmp3_done;
}
case 5: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[7] = MMC_CAR(tmp4_1);
tmpMeta[8] = MMC_CDR(tmp4_1);
_fel = tmpMeta[7];
_rest = tmpMeta[8];
_accfns = tmp4_2;
_rt = tmp4_3;
_decls = tmp4_4;
_includes = tmp4_5;
_includeDirs = tmp4_6;
_libs = tmp4_7;
_libPaths = tmp4_8;
_fn = omc_SimCodeFunctionUtil_elaborateFunction(threadData, _program, _fel, _rt, _decls, _includes, _includeDirs, _libs, _libPaths ,&_rt_1 ,&_decls ,&_includes ,&_includeDirs ,&_libs ,&_libPaths);
tmpMeta[7] = mmc_mk_cons(_fn, _accfns);
_daeElements = _rest;
_inFunctions = tmpMeta[7];
_inRecordTypes = _rt_1;
_inDecls = _decls;
_inIncludes = _includes;
_inIncludeDirs = _includeDirs;
_inLibs = _libs;
_inPaths = _libPaths;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outFunctions = tmpMeta[0+0];
_outRecordTypes = tmpMeta[0+1];
_outDecls = tmpMeta[0+2];
_outIncludes = tmpMeta[0+3];
_outIncludeDirs = tmpMeta[0+4];
_outLibs = tmpMeta[0+5];
_outLibsPaths = tmpMeta[0+6];
_return: OMC_LABEL_UNUSED
if (out_outRecordTypes) { *out_outRecordTypes = _outRecordTypes; }
if (out_outDecls) { *out_outDecls = _outDecls; }
if (out_outIncludes) { *out_outIncludes = _outIncludes; }
if (out_outIncludeDirs) { *out_outIncludeDirs = _outIncludeDirs; }
if (out_outLibs) { *out_outLibs = _outLibs; }
if (out_outLibsPaths) { *out_outLibsPaths = _outLibsPaths; }
return _outFunctions;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isRecordDeclEqual(threadData_t *threadData, modelica_metatype _decl1, modelica_metatype _decl2)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _decl1;
tmp4_2 = _decl2;
{
modelica_string _name1 = NULL;
modelica_string _name2 = NULL;
modelica_metatype _path1 = NULL;
modelica_metatype _path2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,4) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_name1 = tmpMeta[0];
_name2 = tmpMeta[1];
tmp1 = (stringEqual(_name1, _name2));
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_path1 = tmpMeta[0];
_path2 = tmpMeta[1];
tmp1 = omc_AbsynUtil_pathEqual(threadData, _path1, _path2);
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isRecordDeclEqual(threadData_t *threadData, modelica_metatype _decl1, modelica_metatype _decl2)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_SimCodeFunctionUtil_isRecordDeclEqual(threadData, _decl1, _decl2);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isRecordDecl(threadData_t *threadData, modelica_metatype _decl, modelica_string _name)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _decl;
{
modelica_string _name1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name1 = tmpMeta[0];
tmp1 = (stringEqual(_name, _name1));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isRecordDecl(threadData_t *threadData, modelica_metatype _decl, modelica_metatype _name)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_SimCodeFunctionUtil_isRecordDecl(threadData, _decl, _name);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getRecordDependenciesFromType(threadData_t *threadData, modelica_metatype _ty, modelica_metatype _allDecls)
{
modelica_metatype _decl = NULL;
modelica_metatype _path = NULL;
modelica_string _name = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _ty;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],9,3) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,1) == 0) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_path = tmpMeta[2];
_name = omc_AbsynUtil_pathStringUnquoteReplaceDot(threadData, _path, _OMC_LIT29);
_decl = omc_List_find1(threadData, _allDecls, boxvar_SimCodeFunctionUtil_isRecordDecl, _name);
_return: OMC_LABEL_UNUSED
return _decl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getVarType(threadData_t *threadData, modelica_metatype _var)
{
modelica_metatype _ty = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _var;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,7) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_ty = tmpMeta[1];
tmpMeta[0] = _ty;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _OMC_LIT268;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_ty = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _ty;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_SimCodeFunctionUtil_getRecordDependencies(threadData_t *threadData, modelica_metatype _decl, modelica_metatype _allDecls)
{
modelica_metatype _dependencies = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _decl;
{
modelica_string _name = NULL;
modelica_metatype _vars = NULL;
modelica_metatype _tys = NULL;
modelica_metatype _tyss = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_name = tmpMeta[2];
tmpMeta[0] = omc_List_select1(threadData, _allDecls, boxvar_SimCodeFunctionUtil_isRecordDecl, _name);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_name = tmpMeta[1];
tmpMeta[0] = omc_List_select1(threadData, _allDecls, boxvar_SimCodeFunctionUtil_isRecordDecl, _name);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_vars = tmpMeta[1];
{
modelica_metatype __omcQ_24tmpVar29;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar28;
int tmp6;
modelica_metatype _v_loopVar = 0;
modelica_metatype _v;
_v_loopVar = _vars;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar29 = tmpMeta[2];
tmp5 = &__omcQ_24tmpVar29;
while(1) {
tmp6 = 1;
if (!listEmpty(_v_loopVar)) {
_v = MMC_CAR(_v_loopVar);
_v_loopVar = MMC_CDR(_v_loopVar);
tmp6--;
}
if (tmp6 == 0) {
__omcQ_24tmpVar28 = omc_SimCodeFunctionUtil_getVarType(threadData, _v);
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar28,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar29;
}
_tys = tmpMeta[1];
_tyss = omc_List_map1(threadData, _tys, boxvar_Types_getAllInnerTypesOfType, boxvar_Util_anyReturnTrue);
_tys = omc_List_flatten(threadData, _tyss);
_dependencies = omc_List_filterMap1(threadData, _tys, boxvar_SimCodeFunctionUtil_getRecordDependenciesFromType, _allDecls);
tmpMeta[0] = omc_List_unique(threadData, _dependencies);
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_dependencies = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _dependencies;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_elaborateFunctions(threadData_t *threadData, modelica_metatype _program, modelica_metatype _daeElements, modelica_metatype _metarecordTypes, modelica_metatype _literals, modelica_metatype _includes, modelica_metatype *out_extraRecordDecls, modelica_metatype *out_outIncludes, modelica_metatype *out_includeDirs, modelica_metatype *out_libs, modelica_metatype *out_libpaths)
{
modelica_metatype _functions = NULL;
modelica_metatype _extraRecordDecls = NULL;
modelica_metatype _outIncludes = NULL;
modelica_metatype _includeDirs = NULL;
modelica_metatype _libs = NULL;
modelica_metatype _libpaths = NULL;
modelica_metatype _fns = NULL;
modelica_metatype _outRecordTypes = NULL;
modelica_metatype _ht = NULL;
modelica_metatype _g = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_extraRecordDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarationsForMetarecords(threadData, _literals, tmpMeta[0], tmpMeta[1] ,&_outRecordTypes);
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
_functions = omc_SimCodeFunctionUtil_elaborateFunctions2(threadData, _program, _daeElements, tmpMeta[0], _outRecordTypes, _extraRecordDecls, _includes, tmpMeta[1], tmpMeta[2], tmpMeta[3] ,&_outRecordTypes ,&_extraRecordDecls ,&_outIncludes ,&_includeDirs ,&_libs ,&_libpaths);
_extraRecordDecls = omc_List_unique(threadData, _extraRecordDecls);
_extraRecordDecls = omc_SimCodeFunctionUtil_elaborateRecordDeclarationsFromTypes(threadData, _metarecordTypes, _extraRecordDecls, _outRecordTypes, NULL);
_extraRecordDecls = omc_List_sort(threadData, _extraRecordDecls, boxvar_SimCodeFunctionUtil_orderRecordDecls);
_ht = omc_HashTableStringToPath_emptyHashTableSized(threadData, ((modelica_integer) 257));
_extraRecordDecls = omc_List_mapFold(threadData, _extraRecordDecls, boxvar_SimCodeFunctionUtil_aliasRecordDeclarations, _ht, NULL);
_g = omc_Graph_buildGraph(threadData, _extraRecordDecls, boxvar_SimCodeFunctionUtil_getRecordDependencies, _extraRecordDecls);
tmpMeta[1] = omc_Graph_topologicalSort(threadData, _g, boxvar_SimCodeFunctionUtil_isRecordDeclEqual, &tmpMeta[0]);
_extraRecordDecls = tmpMeta[1];
if (!listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
if (out_extraRecordDecls) { *out_extraRecordDecls = _extraRecordDecls; }
if (out_outIncludes) { *out_outIncludes = _outIncludes; }
if (out_includeDirs) { *out_includeDirs = _includeDirs; }
if (out_libs) { *out_libs = _libs; }
if (out_libpaths) { *out_libpaths = _libpaths; }
return _functions;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_orderRecordDecls(threadData_t *threadData, modelica_metatype _decl1, modelica_metatype _decl2)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _decl1;
tmp4_2 = _decl2;
{
modelica_metatype _path1 = NULL;
modelica_metatype _path2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_path1 = tmpMeta[0];
_path2 = tmpMeta[1];
tmp1 = omc_AbsynUtil_pathGe(threadData, _path1, _path2);
goto tmp3_done;
}
case 1: {
tmp1 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_orderRecordDecls(threadData_t *threadData, modelica_metatype _decl1, modelica_metatype _decl2)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_SimCodeFunctionUtil_orderRecordDecls(threadData, _decl1, _decl2);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_createDAEString(threadData_t *threadData, modelica_string _inString)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(5, &DAE_Exp_SCONST__desc, _inString);
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_createAssertforSqrt(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box6(14, &DAE_Exp_RELATION__desc, _inExp, _OMC_LIT270, _OMC_LIT272, mmc_mk_integer(((modelica_integer) -1)), mmc_mk_none());
_outExp = omc_ExpressionSimplify_simplify(threadData, tmpMeta[0], NULL);
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_string omc_SimCodeFunctionUtil_hackGetFirstExternalFunctionLib(threadData_t *threadData, modelica_metatype _libs)
{
modelica_string _outFirstLib = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _lib = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_lib = omc_List_last(threadData, _libs);
tmp1 = omc_System_stringReplace(threadData, _lib, _OMC_LIT72, _OMC_LIT15);
goto tmp3_done;
}
case 1: {
tmp1 = _OMC_LIT273;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outFirstLib = tmp1;
_return: OMC_LABEL_UNUSED
return _outFirstLib;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isMatrixExpansion(threadData_t *threadData, modelica_metatype _rows, modelica_metatype _inCref, modelica_integer _rowIndex, modelica_integer _colIndex)
{
modelica_boolean _isExpanded;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _rows;
{
modelica_metatype _restRows = NULL;
modelica_metatype _restElems = NULL;
modelica_integer _r;
modelica_integer _c;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
_restRows = tmpMeta[1];
tmp4 += 1;
tmp1 = omc_SimCodeFunctionUtil_isMatrixExpansion(threadData, _restRows, _inCref, ((modelica_integer) 1) + _rowIndex, ((modelica_integer) 1));
goto tmp3_done;
}
case 2: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_boolean tmp8;
modelica_boolean tmp9;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (listEmpty(tmpMeta[0])) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmpMeta[0]);
tmpMeta[3] = MMC_CDR(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],6,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_cr = tmpMeta[4];
_restElems = tmpMeta[3];
_restRows = tmpMeta[1];
tmpMeta[0] = omc_ComponentReference_crefLastSubs(threadData, _cr);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (listEmpty(tmpMeta[2])) goto goto_2;
tmpMeta[5] = MMC_CAR(tmpMeta[2]);
tmpMeta[6] = MMC_CDR(tmpMeta[2]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],2,1) == 0) goto goto_2;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,1) == 0) goto goto_2;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmp7 = mmc_unbox_integer(tmpMeta[8]);
if (!listEmpty(tmpMeta[6])) goto goto_2;
_r = tmp6;
_c = tmp7;
tmp8 = ((_r == _rowIndex) && (_c == _colIndex));
if (1 != tmp8) goto goto_2;
_cr = omc_ComponentReference_crefStripLastSubs(threadData, _cr);
tmp9 = omc_ComponentReference_crefEqualNoStringCompare(threadData, _inCref, _cr);
if (1 != tmp9) goto goto_2;
tmpMeta[0] = mmc_mk_cons(_restElems, _restRows);
tmp1 = omc_SimCodeFunctionUtil_isMatrixExpansion(threadData, tmpMeta[0], _inCref, _rowIndex, ((modelica_integer) 1) + _colIndex);
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_isExpanded = tmp1;
_return: OMC_LABEL_UNUSED
return _isExpanded;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isMatrixExpansion(threadData_t *threadData, modelica_metatype _rows, modelica_metatype _inCref, modelica_metatype _rowIndex, modelica_metatype _colIndex)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_boolean _isExpanded;
modelica_metatype out_isExpanded;
tmp1 = mmc_unbox_integer(_rowIndex);
tmp2 = mmc_unbox_integer(_colIndex);
_isExpanded = omc_SimCodeFunctionUtil_isMatrixExpansion(threadData, _rows, _inCref, tmp1, tmp2);
out_isExpanded = mmc_mk_icon(_isExpanded);
return out_isExpanded;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_hackMatrixReverseToCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _context)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cr = NULL;
modelica_metatype _aty = NULL;
modelica_metatype _rows = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
modelica_integer tmp7;
modelica_integer tmp8;
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
if (listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmpMeta[3]);
tmpMeta[6] = MMC_CDR(tmpMeta[3]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],6,2) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_aty = tmpMeta[1];
_rows = tmpMeta[2];
_cr = tmpMeta[7];
tmp5 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmpMeta[1] = _context;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto goto_6;
tmp5 = 1;
goto goto_6;
goto_6:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp5) {goto goto_1;}
tmpMeta[1] = omc_ComponentReference_crefLastSubs(threadData, _cr);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto goto_1;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,1) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp7 = mmc_unbox_integer(tmpMeta[5]);
if (1 != tmp7) goto goto_1;
if (listEmpty(tmpMeta[3])) goto goto_1;
tmpMeta[6] = MMC_CAR(tmpMeta[3]);
tmpMeta[7] = MMC_CDR(tmpMeta[3]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],2,1) == 0) goto goto_1;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[8],0,1) == 0) goto goto_1;
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
tmp8 = mmc_unbox_integer(tmpMeta[9]);
if (1 != tmp8) goto goto_1;
if (!listEmpty(tmpMeta[7])) goto goto_1;
_cr = omc_ComponentReference_crefStripLastSubs(threadData, _cr);
tmp9 = omc_SimCodeFunctionUtil_isMatrixExpansion(threadData, _rows, _cr, ((modelica_integer) 1), ((modelica_integer) 1));
if (1 != tmp9) goto goto_1;
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _cr, _aty);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inExp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isArrayExpansion(threadData_t *threadData, modelica_metatype _inArrayElems, modelica_metatype _inCref, modelica_integer _index)
{
modelica_boolean _isExpanded;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inArrayElems;
{
modelica_metatype _aRest = NULL;
modelica_integer _i;
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 1;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_integer tmp6;
modelica_boolean tmp7;
modelica_boolean tmp8;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_cr = tmpMeta[2];
_aRest = tmpMeta[1];
tmpMeta[0] = omc_ComponentReference_crefLastSubs(threadData, _cr);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,1) == 0) goto goto_2;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,1) == 0) goto goto_2;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
if (!listEmpty(tmpMeta[2])) goto goto_2;
_i = tmp6;
tmp7 = (_i == _index);
if (1 != tmp7) goto goto_2;
_cr = omc_ComponentReference_crefStripLastSubs(threadData, _cr);
tmp8 = omc_ComponentReference_crefEqualNoStringCompare(threadData, _inCref, _cr);
if (1 != tmp8) goto goto_2;
tmp1 = omc_SimCodeFunctionUtil_isArrayExpansion(threadData, _aRest, _inCref, ((modelica_integer) 1) + _index);
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_isExpanded = tmp1;
_return: OMC_LABEL_UNUSED
return _isExpanded;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isArrayExpansion(threadData_t *threadData, modelica_metatype _inArrayElems, modelica_metatype _inCref, modelica_metatype _index)
{
modelica_integer tmp1;
modelica_boolean _isExpanded;
modelica_metatype out_isExpanded;
tmp1 = mmc_unbox_integer(_index);
_isExpanded = omc_SimCodeFunctionUtil_isArrayExpansion(threadData, _inArrayElems, _inCref, tmp1);
out_isExpanded = mmc_mk_icon(_isExpanded);
return out_isExpanded;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_hackArrayReverseToCref(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _context)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _aRest = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _aty = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_boolean tmp6;
modelica_integer tmp8;
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
if (1 != tmp5) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (listEmpty(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_CAR(tmpMeta[3]);
tmpMeta[5] = MMC_CDR(tmpMeta[3]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],6,2) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_aty = tmpMeta[1];
_cr = tmpMeta[6];
_aRest = tmpMeta[5];
tmp6 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmpMeta[1] = _context;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto goto_7;
tmp6 = 1;
goto goto_7;
goto_7:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp6) {goto goto_1;}
tmpMeta[1] = omc_ComponentReference_crefLastSubs(threadData, _cr);
if (listEmpty(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto goto_1;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,1) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmp8 = mmc_unbox_integer(tmpMeta[5]);
if (1 != tmp8) goto goto_1;
if (!listEmpty(tmpMeta[3])) goto goto_1;
_cr = omc_ComponentReference_crefStripLastSubs(threadData, _cr);
tmp9 = omc_SimCodeFunctionUtil_isArrayExpansion(threadData, _aRest, _cr, ((modelica_integer) 2));
if (1 != tmp9) goto goto_1;
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _cr, _aty);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inExp;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_derComponentRef(threadData_t *threadData, modelica_metatype _inCref)
{
modelica_metatype _derCref = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_derCref = omc_ComponentReference_crefPrefixDer(threadData, _inCref);
_return: OMC_LABEL_UNUSED
return _derCref;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_splitRecordAssignmentToMemberAssignments(threadData_t *threadData, modelica_metatype _lhs_cref, modelica_metatype _lhs_type, modelica_string _rhs_cref_str)
{
modelica_metatype _outAssigns = NULL;
modelica_metatype _rhs_cref = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outAssigns = tmpMeta[0];
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[1] = mmc_mk_box4(4, &DAE_ComponentRef_CREF__IDENT__desc, _rhs_cref_str, _lhs_type, tmpMeta[0]);
_rhs_cref = tmpMeta[1];
{
modelica_metatype tmp3_1;
tmp3_1 = _lhs_type;
{
modelica_metatype _l_v_exp = NULL;
modelica_metatype _r_v_exp = NULL;
modelica_metatype _stmt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
{
modelica_metatype _v;
for (tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_lhs_type), 3))); !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_v = MMC_CAR(tmpMeta[0]);
_l_v_exp = omc_SimCodeFunctionUtil_makeCrefRecordExp(threadData, _lhs_cref, _v);
_r_v_exp = omc_SimCodeFunctionUtil_makeCrefRecordExp(threadData, _rhs_cref, _v);
if(omc_Types_isArray(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_v), 4)))))
{
tmpMeta[1] = mmc_mk_box5(5, &DAE_Statement_STMT__ASSIGN__ARR__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_v), 4))), _l_v_exp, _r_v_exp, _OMC_LIT276);
_stmt = tmpMeta[1];
}
else
{
tmpMeta[1] = mmc_mk_box5(3, &DAE_Statement_STMT__ASSIGN__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_v), 4))), _l_v_exp, _r_v_exp, _OMC_LIT276);
_stmt = tmpMeta[1];
}
tmpMeta[1] = mmc_mk_cons(_stmt, _outAssigns);
_outAssigns = tmpMeta[1];
}
}
_outAssigns = listReverse(_outAssigns);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outAssigns;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_makeCrefRecordExp(threadData_t *threadData, modelica_metatype _inCRefRecord, modelica_metatype _inVar)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inCRefRecord;
tmp3_2 = _inVar;
{
modelica_metatype _cr = NULL;
modelica_metatype _cr1 = NULL;
modelica_string _name = NULL;
modelica_metatype _tp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_cr = tmp3_1;
_name = tmpMeta[1];
_tp = tmpMeta[2];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_cr1 = omc_ComponentReference_crefPrependIdent(threadData, _cr, _name, tmpMeta[1], _tp);
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _cr1, _tp);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_isNotProtected(threadData_t *threadData, modelica_metatype _simVar)
{
modelica_boolean _isProtected;
modelica_integer tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _simVar;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 23));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_isProtected = tmp1;
_isProtected = (!_isProtected);
_return: OMC_LABEL_UNUSED
return _isProtected;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_isNotProtected(threadData_t *threadData, modelica_metatype _simVar)
{
modelica_boolean _isProtected;
modelica_metatype out_isProtected;
_isProtected = omc_SimCodeFunctionUtil_isNotProtected(threadData, _simVar);
out_isProtected = mmc_mk_icon(_isProtected);
return out_isProtected;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_protectedVars(threadData_t *threadData, modelica_metatype _InSimVars)
{
modelica_metatype _OutSimVars = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_OutSimVars = omc_List_filterOnTrue(threadData, _InSimVars, boxvar_SimCodeFunctionUtil_isNotProtected);
_return: OMC_LABEL_UNUSED
return _OutSimVars;
}
DLLExport
modelica_integer omc_SimCodeFunctionUtil_decrementInt(threadData_t *threadData, modelica_integer _inInt, modelica_integer _decrement)
{
modelica_integer _outInt;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outInt = _inInt - _decrement;
_return: OMC_LABEL_UNUSED
return _outInt;
}
modelica_metatype boxptr_SimCodeFunctionUtil_decrementInt(threadData_t *threadData, modelica_metatype _inInt, modelica_metatype _decrement)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer _outInt;
modelica_metatype out_outInt;
tmp1 = mmc_unbox_integer(_inInt);
tmp2 = mmc_unbox_integer(_decrement);
_outInt = omc_SimCodeFunctionUtil_decrementInt(threadData, tmp1, tmp2);
out_outInt = mmc_mk_icon(_outInt);
return out_outInt;
}
DLLExport
modelica_integer omc_SimCodeFunctionUtil_incrementInt(threadData_t *threadData, modelica_integer _inInt, modelica_integer _increment)
{
modelica_integer _outInt;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outInt = _inInt + _increment;
_return: OMC_LABEL_UNUSED
return _outInt;
}
modelica_metatype boxptr_SimCodeFunctionUtil_incrementInt(threadData_t *threadData, modelica_metatype _inInt, modelica_metatype _increment)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer _outInt;
modelica_metatype out_outInt;
tmp1 = mmc_unbox_integer(_inInt);
tmp2 = mmc_unbox_integer(_increment);
_outInt = omc_SimCodeFunctionUtil_incrementInt(threadData, tmp1, tmp2);
out_outInt = mmc_mk_icon(_outInt);
return out_outInt;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_buildCrefExpFromAsub(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _subs)
{
modelica_metatype _cRefOut = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _cref;
tmp3_2 = _subs;
{
modelica_metatype _ty = NULL;
modelica_metatype _crNew = NULL;
modelica_metatype _indexes = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[0] = _cref;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_crNew = tmpMeta[1];
_ty = tmpMeta[2];
_indexes = omc_List_map(threadData, _subs, boxvar_Expression_makeIndexSubscript);
_crNew = omc_ComponentReference_subscriptCref(threadData, _crNew, _indexes);
tmpMeta[0] = omc_Expression_makeCrefExp(threadData, _crNew, _ty);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_cRefOut = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _cRefOut;
}
DLLExport
modelica_boolean omc_SimCodeFunctionUtil_crefIsScalar(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _context)
{
modelica_boolean _isScalar;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
if(omc_SimCodeFunctionUtil_inFunctionContext(threadData, _context))
{
_isScalar = listEmpty(omc_ComponentReference_crefLastSubs(threadData, _cref));
}
else
{
if(omc_Flags_isSet(threadData, _OMC_LIT280))
{
_isScalar = omc_ComponentReference_crefHasScalarSubscripts(threadData, _cref);
}
else
{
_isScalar = (!omc_ComponentReference_crefHaveSubs(threadData, _cref));
}
}
_return: OMC_LABEL_UNUSED
return _isScalar;
}
modelica_metatype boxptr_SimCodeFunctionUtil_crefIsScalar(threadData_t *threadData, modelica_metatype _cref, modelica_metatype _context)
{
modelica_boolean _isScalar;
modelica_metatype out_isScalar;
_isScalar = omc_SimCodeFunctionUtil_crefIsScalar(threadData, _cref, _context);
out_isScalar = mmc_mk_icon(_isScalar);
return out_isScalar;
}
DLLExport
modelica_boolean omc_SimCodeFunctionUtil_inFunctionContext(threadData_t *threadData, modelica_metatype _inContext)
{
modelica_boolean _outInFunction;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inContext;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outInFunction = tmp1;
_return: OMC_LABEL_UNUSED
return _outInFunction;
}
modelica_metatype boxptr_SimCodeFunctionUtil_inFunctionContext(threadData_t *threadData, modelica_metatype _inContext)
{
modelica_boolean _outInFunction;
modelica_metatype out_outInFunction;
_outInFunction = omc_SimCodeFunctionUtil_inFunctionContext(threadData, _inContext);
out_outInFunction = mmc_mk_icon(_outInFunction);
return out_outInFunction;
}
DLLExport
modelica_boolean omc_SimCodeFunctionUtil_crefNoSub(threadData_t *threadData, modelica_metatype _cref)
{
modelica_boolean _noSub;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_noSub = (!omc_ComponentReference_crefHaveSubs(threadData, _cref));
_return: OMC_LABEL_UNUSED
return _noSub;
}
modelica_metatype boxptr_SimCodeFunctionUtil_crefNoSub(threadData_t *threadData, modelica_metatype _cref)
{
modelica_boolean _noSub;
modelica_metatype out_noSub;
_noSub = omc_SimCodeFunctionUtil_crefNoSub(threadData, _cref);
out_noSub = mmc_mk_icon(_noSub);
return out_noSub;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_SimCodeFunctionUtil_subsToScalar(threadData_t *threadData, modelica_metatype _inExpSubscriptLst)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExpSubscriptLst;
{
modelica_metatype _r = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,0) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) goto tmp3_end;
_r = tmpMeta[1];
_inExpSubscriptLst = _r;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_SimCodeFunctionUtil_subsToScalar(threadData_t *threadData, modelica_metatype _inExpSubscriptLst)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_SimCodeFunctionUtil_subsToScalar(threadData, _inExpSubscriptLst);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_SimCodeFunctionUtil_crefSubIsScalar(threadData_t *threadData, modelica_metatype _cref)
{
modelica_boolean _isScalar;
modelica_metatype _subs = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_subs = omc_ComponentReference_crefSubs(threadData, _cref);
_isScalar = omc_SimCodeFunctionUtil_subsToScalar(threadData, _subs);
_return: OMC_LABEL_UNUSED
return _isScalar;
}
modelica_metatype boxptr_SimCodeFunctionUtil_crefSubIsScalar(threadData_t *threadData, modelica_metatype _cref)
{
modelica_boolean _isScalar;
modelica_metatype out_isScalar;
_isScalar = omc_SimCodeFunctionUtil_crefSubIsScalar(threadData, _cref);
out_isScalar = mmc_mk_icon(_isScalar);
return out_isScalar;
}
DLLExport
modelica_metatype omc_SimCodeFunctionUtil_elementVars(threadData_t *threadData, modelica_metatype _ild)
{
modelica_metatype _vars = NULL;
modelica_metatype _ld = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ld = omc_List_filterOnTrue(threadData, _ild, boxvar_SimCodeFunctionUtil_isVarQ);
_vars = omc_List_map(threadData, _ld, boxvar_SimCodeFunctionUtil_daeInOutSimVar);
_return: OMC_LABEL_UNUSED
return _vars;
}
