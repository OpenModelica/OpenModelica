#ifdef OMC_BASE_FILE
#define OMC_FILE OMC_BASE_FILE
#else
#define OMC_FILE "/home/mahge/dev/OpenModelica/OMCompiler/Compiler/boot/build/tmp/AbsynUtil.c"
#endif
#include "omc_simulation_settings.h"
#include "AbsynUtil.h"
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT0,1,5) {&Absyn_Direction_BIDIR__desc,}};
#define _OMC_LIT0 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT0)
#define _OMC_LIT1_data "-traverse_classes2 failed on class:"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT1,35,_OMC_LIT1_data);
#define _OMC_LIT1 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT1)
#define _OMC_LIT2_data "."
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT2,1,_OMC_LIT2_data);
#define _OMC_LIT2 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT2)
#define _OMC_LIT3_data "\n"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT3,1,_OMC_LIT3_data);
#define _OMC_LIT3 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT3)
#define _OMC_LIT4_data "interaction"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT4,11,_OMC_LIT4_data);
#define _OMC_LIT4 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT4)
#define _OMC_LIT5_data "graphics"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT5,8,_OMC_LIT5_data);
#define _OMC_LIT5 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT5)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT6,1,4) {&Absyn_Msg_NO__MSG__desc,}};
#define _OMC_LIT6 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT6)
#define _OMC_LIT7_data ""
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT7,0,_OMC_LIT7_data);
#define _OMC_LIT7 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT7)
#define _OMC_LIT8_data ", "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT8,2,_OMC_LIT8_data);
#define _OMC_LIT8 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT8)
#define _OMC_LIT9_data "<"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT9,1,_OMC_LIT9_data);
#define _OMC_LIT9 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT9)
#define _OMC_LIT10_data ">"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT10,1,_OMC_LIT10_data);
#define _OMC_LIT10 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT10)
#define _OMC_LIT11_data "initial"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT11,7,_OMC_LIT11_data);
#define _OMC_LIT11 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT11)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT12,1,6) {&Absyn_InnerOuter_NOT__INNER__OUTER__desc,}};
#define _OMC_LIT12 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT12)
#define _OMC_LIT13_data "der"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT13,3,_OMC_LIT13_data);
#define _OMC_LIT13 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT13)
#define _OMC_LIT14_data "inner outer "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT14,12,_OMC_LIT14_data);
#define _OMC_LIT14 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT14)
#define _OMC_LIT15_data "inner "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT15,6,_OMC_LIT15_data);
#define _OMC_LIT15 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT15)
#define _OMC_LIT16_data "outer "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT16,6,_OMC_LIT16_data);
#define _OMC_LIT16 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT16)
#define _OMC_LIT17_data "within ;"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT17,8,_OMC_LIT17_data);
#define _OMC_LIT17 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT17)
#define _OMC_LIT18_data "within "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT18,7,_OMC_LIT18_data);
#define _OMC_LIT18 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT18)
#define _OMC_LIT19_data ";"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT19,1,_OMC_LIT19_data);
#define _OMC_LIT19 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT19)
#define _OMC_LIT20_data "DynamicSelect"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT20,13,_OMC_LIT20_data);
#define _OMC_LIT20 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT20)
#define _OMC_LIT21_data "LinePattern"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT21,11,_OMC_LIT21_data);
#define _OMC_LIT21 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT21)
#define _OMC_LIT22_data "Arrow"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT22,5,_OMC_LIT22_data);
#define _OMC_LIT22 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT22)
#define _OMC_LIT23_data "FillPattern"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT23,11,_OMC_LIT23_data);
#define _OMC_LIT23 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT23)
#define _OMC_LIT24_data "BorderPattern"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT24,13,_OMC_LIT24_data);
#define _OMC_LIT24 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT24)
#define _OMC_LIT25_data "TextStyle"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT25,9,_OMC_LIT25_data);
#define _OMC_LIT25 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT25)
#define _OMC_LIT26_data "Smooth"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT26,6,_OMC_LIT26_data);
#define _OMC_LIT26 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT26)
#define _OMC_LIT27_data "TextAlignment"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT27,13,_OMC_LIT27_data);
#define _OMC_LIT27 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT27)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT28,2,1) {_OMC_LIT27,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT28 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT28)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT29,2,1) {_OMC_LIT26,_OMC_LIT28}};
#define _OMC_LIT29 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT29)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT30,2,1) {_OMC_LIT25,_OMC_LIT29}};
#define _OMC_LIT30 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT30)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT31,2,1) {_OMC_LIT24,_OMC_LIT30}};
#define _OMC_LIT31 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT31)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT32,2,1) {_OMC_LIT23,_OMC_LIT31}};
#define _OMC_LIT32 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT32)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT33,2,1) {_OMC_LIT22,_OMC_LIT32}};
#define _OMC_LIT33 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT33)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT34,2,1) {_OMC_LIT21,_OMC_LIT33}};
#define _OMC_LIT34 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT34)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT35,2,1) {MMC_REFSTRUCTLIT(mmc_nil),MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT35 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT35)
#define _OMC_LIT36_data "CLASS"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT36,5,_OMC_LIT36_data);
#define _OMC_LIT36 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT36)
#define _OMC_LIT37_data "OPTIMIZATION"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT37,12,_OMC_LIT37_data);
#define _OMC_LIT37 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT37)
#define _OMC_LIT38_data "MODEL"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT38,5,_OMC_LIT38_data);
#define _OMC_LIT38 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT38)
#define _OMC_LIT39_data "RECORD"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT39,6,_OMC_LIT39_data);
#define _OMC_LIT39 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT39)
#define _OMC_LIT40_data "BLOCK"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT40,5,_OMC_LIT40_data);
#define _OMC_LIT40 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT40)
#define _OMC_LIT41_data "CONNECTOR"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT41,9,_OMC_LIT41_data);
#define _OMC_LIT41 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT41)
#define _OMC_LIT42_data "EXPANDABLE CONNECTOR"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT42,20,_OMC_LIT42_data);
#define _OMC_LIT42 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT42)
#define _OMC_LIT43_data "TYPE"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT43,4,_OMC_LIT43_data);
#define _OMC_LIT43 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT43)
#define _OMC_LIT44_data "PACKAGE"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT44,7,_OMC_LIT44_data);
#define _OMC_LIT44 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT44)
#define _OMC_LIT45_data "PURE FUNCTION"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT45,13,_OMC_LIT45_data);
#define _OMC_LIT45 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT45)
#define _OMC_LIT46_data "IMPURE FUNCTION"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT46,15,_OMC_LIT46_data);
#define _OMC_LIT46 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT46)
#define _OMC_LIT47_data "FUNCTION"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT47,8,_OMC_LIT47_data);
#define _OMC_LIT47 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT47)
#define _OMC_LIT48_data "OPERATOR FUNCTION"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT48,17,_OMC_LIT48_data);
#define _OMC_LIT48 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT48)
#define _OMC_LIT49_data "PREDEFINED_INT"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT49,14,_OMC_LIT49_data);
#define _OMC_LIT49 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT49)
#define _OMC_LIT50_data "PREDEFINED_REAL"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT50,15,_OMC_LIT50_data);
#define _OMC_LIT50 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT50)
#define _OMC_LIT51_data "PREDEFINED_STRING"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT51,17,_OMC_LIT51_data);
#define _OMC_LIT51 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT51)
#define _OMC_LIT52_data "PREDEFINED_BOOL"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT52,15,_OMC_LIT52_data);
#define _OMC_LIT52 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT52)
#define _OMC_LIT53_data "PREDEFINED_CLOCK"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT53,16,_OMC_LIT53_data);
#define _OMC_LIT53 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT53)
#define _OMC_LIT54_data "UNIONTYPE"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT54,9,_OMC_LIT54_data);
#define _OMC_LIT54 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT54)
#define _OMC_LIT55_data "* Unknown restriction *"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT55,23,_OMC_LIT55_data);
#define _OMC_LIT55 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT55)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT56,2,4) {&Absyn_Path_IDENT__desc,_OMC_LIT7}};
#define _OMC_LIT56 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT56)
#define _OMC_LIT57_data "AbsynUtil.getCrefFromExp failed "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT57,32,_OMC_LIT57_data);
#define _OMC_LIT57 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT57)
#define _OMC_LIT58_data "/home/mahge/dev/OpenModelica/OMCompiler/Compiler/FrontEnd/AbsynUtil.mo"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT58,70,_OMC_LIT58_data);
#define _OMC_LIT58 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT58)
static const MMC_DEFREALLIT(_OMC_LIT_STRUCT59_6,1605721860.0);
#define _OMC_LIT59_6 MMC_REFREALLIT(_OMC_LIT_STRUCT59_6)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT59,8,3) {&SourceInfo_SOURCEINFO__desc,_OMC_LIT58,MMC_IMMEDIATE(MMC_TAGFIXNUM(0)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2582)),MMC_IMMEDIATE(MMC_TAGFIXNUM(9)),MMC_IMMEDIATE(MMC_TAGFIXNUM(2582)),MMC_IMMEDIATE(MMC_TAGFIXNUM(103)),_OMC_LIT59_6}};
#define _OMC_LIT59 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT59)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT60,3,5) {&Absyn_ComponentRef_CREF__IDENT__desc,_OMC_LIT7,MMC_REFSTRUCTLIT(mmc_nil)}};
#define _OMC_LIT60 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT60)
#define _OMC_LIT61_data "__"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT61,2,_OMC_LIT61_data);
#define _OMC_LIT61 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT61)
#define _OMC_LIT62_data "_"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT62,1,_OMC_LIT62_data);
#define _OMC_LIT62 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT62)
#define _OMC_LIT63_data "in traverseExpBidirSubExps("
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT63,27,_OMC_LIT63_data);
#define _OMC_LIT63 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT63)
#define _OMC_LIT64_data ") - Unknown expression: "
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT64,24,_OMC_LIT64_data);
#define _OMC_LIT64 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT64)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT65,1,5) {&ErrorTypes_MessageType_TRANSLATION__desc,}};
#define _OMC_LIT65 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT65)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT66,1,4) {&ErrorTypes_Severity_ERROR__desc,}};
#define _OMC_LIT66 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT66)
#define _OMC_LIT67_data "Internal error %s"
static const MMC_DEFSTRINGLIT(_OMC_LIT_STRUCT67,17,_OMC_LIT67_data);
#define _OMC_LIT67 MMC_REFSTRINGLIT(_OMC_LIT_STRUCT67)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT68,2,3) {&Gettext_TranslatableContent_gettext__desc,_OMC_LIT67}};
#define _OMC_LIT68 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT68)
static const MMC_DEFSTRUCTLIT(_OMC_LIT_STRUCT69,5,3) {&ErrorTypes_Message_MESSAGE__desc,MMC_IMMEDIATE(MMC_TAGFIXNUM(63)),_OMC_LIT65,_OMC_LIT66,_OMC_LIT68}};
#define _OMC_LIT69 MMC_REFSTRUCTLIT(_OMC_LIT_STRUCT69)
#include "util/modelica.h"
#include "AbsynUtil_includes.h"
#if !defined(PROTECTED_FUNCTION_STATIC)
#define PROTECTED_FUNCTION_STATIC
#endif
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseElementItem(threadData_t *threadData, modelica_metatype _inItem, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseElementItem(threadData_t *threadData, modelica_metatype _inItem, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseElementItem,2,0) {(void*) boxptr_AbsynUtil_traverseElementItem,0}};
#define boxvar_AbsynUtil_traverseElementItem MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseElementItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseClassPartElements(threadData_t *threadData, modelica_metatype _inClassPart, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseClassPartElements(threadData_t *threadData, modelica_metatype _inClassPart, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseClassPartElements,2,0) {(void*) boxptr_AbsynUtil_traverseClassPartElements,0}};
#define boxvar_AbsynUtil_traverseClassPartElements MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseClassPartElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseInnerClassElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath, modelica_fnptr _inFuncType, modelica_metatype _inArg, modelica_boolean _inVisitProtected);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseInnerClassElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath, modelica_fnptr _inFuncType, modelica_metatype _inArg, modelica_metatype _inVisitProtected);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseInnerClassElementspec,2,0) {(void*) boxptr_AbsynUtil_traverseInnerClassElementspec,0}};
#define boxvar_AbsynUtil_traverseInnerClassElementspec MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseInnerClassElementspec)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseInnerClassElements(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inPath, modelica_fnptr _inFuncType, modelica_metatype _inArg, modelica_boolean _inVisitProtected);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseInnerClassElements(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inPath, modelica_fnptr _inFuncType, modelica_metatype _inArg, modelica_metatype _inVisitProtected);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseInnerClassElements,2,0) {(void*) boxptr_AbsynUtil_traverseInnerClassElements,0}};
#define boxvar_AbsynUtil_traverseInnerClassElements MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseInnerClassElements)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseInnerClassParts(threadData_t *threadData, modelica_metatype _inClassParts, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_boolean _inVisitProtected);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseInnerClassParts(threadData_t *threadData, modelica_metatype _inClassParts, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype _inVisitProtected);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseInnerClassParts,2,0) {(void*) boxptr_AbsynUtil_traverseInnerClassParts,0}};
#define boxvar_AbsynUtil_traverseInnerClassParts MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseInnerClassParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseInnerClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_boolean _inVisitProtected);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseInnerClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype _inVisitProtected);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseInnerClass,2,0) {(void*) boxptr_AbsynUtil_traverseInnerClass,0}};
#define boxvar_AbsynUtil_traverseInnerClass MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseInnerClass)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_eltsHasLocalClass(threadData_t *threadData, modelica_metatype _inElts);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_eltsHasLocalClass(threadData_t *threadData, modelica_metatype _inElts);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_eltsHasLocalClass,2,0) {(void*) boxptr_AbsynUtil_eltsHasLocalClass,0}};
#define boxvar_AbsynUtil_eltsHasLocalClass MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_eltsHasLocalClass)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_partsHasLocalClass(threadData_t *threadData, modelica_metatype _inParts);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_partsHasLocalClass(threadData_t *threadData, modelica_metatype _inParts);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_partsHasLocalClass,2,0) {(void*) boxptr_AbsynUtil_partsHasLocalClass,0}};
#define boxvar_AbsynUtil_partsHasLocalClass MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_partsHasLocalClass)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_classHasLocalClasses(threadData_t *threadData, modelica_metatype _cl);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_classHasLocalClasses(threadData_t *threadData, modelica_metatype _cl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_classHasLocalClasses,2,0) {(void*) boxptr_AbsynUtil_classHasLocalClasses,0}};
#define boxvar_AbsynUtil_classHasLocalClasses MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_classHasLocalClasses)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseClasses2(threadData_t *threadData, modelica_metatype _inClasses, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_boolean _inVisitProtected);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseClasses2(threadData_t *threadData, modelica_metatype _inClasses, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype _inVisitProtected);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseClasses2,2,0) {(void*) boxptr_AbsynUtil_traverseClasses2,0}};
#define boxvar_AbsynUtil_traverseClasses2 MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseClasses2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseExpShallowIterator(threadData_t *threadData, modelica_metatype _inIterator, modelica_metatype _inArg, modelica_fnptr _inFunc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseExpShallowIterator,2,0) {(void*) boxptr_AbsynUtil_traverseExpShallowIterator,0}};
#define boxvar_AbsynUtil_traverseExpShallowIterator MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseExpShallowIterator)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseExpShallowFuncArgs(threadData_t *threadData, modelica_metatype _inArgs, modelica_metatype _inArg, modelica_fnptr _inFunc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseExpShallowFuncArgs,2,0) {(void*) boxptr_AbsynUtil_traverseExpShallowFuncArgs,0}};
#define boxvar_AbsynUtil_traverseExpShallowFuncArgs MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseExpShallowFuncArgs)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseClassDef(threadData_t *threadData, modelica_metatype _inClassDef, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseClassDef(threadData_t *threadData, modelica_metatype _inClassDef, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseClassDef,2,0) {(void*) boxptr_AbsynUtil_traverseClassDef,0}};
#define boxvar_AbsynUtil_traverseClassDef MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseClassDef)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseElementSpecComponents(threadData_t *threadData, modelica_metatype _inSpec, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseElementSpecComponents(threadData_t *threadData, modelica_metatype _inSpec, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseElementSpecComponents,2,0) {(void*) boxptr_AbsynUtil_traverseElementSpecComponents,0}};
#define boxvar_AbsynUtil_traverseElementSpecComponents MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseElementSpecComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseElementComponents(threadData_t *threadData, modelica_metatype _inElement, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseElementComponents(threadData_t *threadData, modelica_metatype _inElement, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseElementComponents,2,0) {(void*) boxptr_AbsynUtil_traverseElementComponents,0}};
#define boxvar_AbsynUtil_traverseElementComponents MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseElementComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseElementItemComponents(threadData_t *threadData, modelica_metatype _inItem, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseElementItemComponents(threadData_t *threadData, modelica_metatype _inItem, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseElementItemComponents,2,0) {(void*) boxptr_AbsynUtil_traverseElementItemComponents,0}};
#define boxvar_AbsynUtil_traverseElementItemComponents MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseElementItemComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseClassPartComponents(threadData_t *threadData, modelica_metatype _inClassPart, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseClassPartComponents(threadData_t *threadData, modelica_metatype _inClassPart, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseClassPartComponents,2,0) {(void*) boxptr_AbsynUtil_traverseClassPartComponents,0}};
#define boxvar_AbsynUtil_traverseClassPartComponents MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseClassPartComponents)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseListGeneric(threadData_t *threadData, modelica_metatype _inList, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseListGeneric(threadData_t *threadData, modelica_metatype _inList, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseListGeneric,2,0) {(void*) boxptr_AbsynUtil_traverseListGeneric,0}};
#define boxvar_AbsynUtil_traverseListGeneric MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseListGeneric)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_dummyTraverseExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_dummyTraverseExp,2,0) {(void*) boxptr_AbsynUtil_dummyTraverseExp,0}};
#define boxvar_AbsynUtil_dummyTraverseExp MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_dummyTraverseExp)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_getNamedAnnotationStr(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _id, modelica_fnptr _f);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_getNamedAnnotationStr,2,0) {(void*) boxptr_AbsynUtil_getNamedAnnotationStr,0}};
#define boxvar_AbsynUtil_getNamedAnnotationStr MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_getNamedAnnotationStr)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_mergeAnnotations2(threadData_t *threadData, modelica_metatype _oldmods, modelica_metatype _newmods);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_mergeAnnotations2,2,0) {(void*) boxptr_AbsynUtil_mergeAnnotations2,0}};
#define boxvar_AbsynUtil_mergeAnnotations2 MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_mergeAnnotations2)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_isInitialTraverseHelper(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inBool, modelica_boolean *out_outBool);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_isInitialTraverseHelper(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inBool, modelica_metatype *out_outBool);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_isInitialTraverseHelper,2,0) {(void*) boxptr_AbsynUtil_isInitialTraverseHelper,0}};
#define boxvar_AbsynUtil_isInitialTraverseHelper MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_isInitialTraverseHelper)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_isExternalPart(threadData_t *threadData, modelica_metatype _inClassPart);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_isExternalPart(threadData_t *threadData, modelica_metatype _inClassPart);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_isExternalPart,2,0) {(void*) boxptr_AbsynUtil_isExternalPart,0}};
#define boxvar_AbsynUtil_isExternalPart MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_isExternalPart)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_filterNestedClassesParts(threadData_t *threadData, modelica_metatype _classPart, modelica_metatype _inClassParts);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_filterNestedClassesParts,2,0) {(void*) boxptr_AbsynUtil_filterNestedClassesParts,0}};
#define boxvar_AbsynUtil_filterNestedClassesParts MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_filterNestedClassesParts)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_filterAnnotationItem(threadData_t *threadData, modelica_metatype _elt);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_filterAnnotationItem(threadData_t *threadData, modelica_metatype _elt);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_filterAnnotationItem,2,0) {(void*) boxptr_AbsynUtil_filterAnnotationItem,0}};
#define boxvar_AbsynUtil_filterAnnotationItem MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_filterAnnotationItem)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_getFunctionInterfaceParts(threadData_t *threadData, modelica_metatype _part, modelica_metatype _elts);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_getFunctionInterfaceParts,2,0) {(void*) boxptr_AbsynUtil_getFunctionInterfaceParts,0}};
#define boxvar_AbsynUtil_getFunctionInterfaceParts MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_getFunctionInterfaceParts)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_stripClassDefComment(threadData_t *threadData, modelica_metatype _cl);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_stripClassDefComment,2,0) {(void*) boxptr_AbsynUtil_stripClassDefComment,0}};
#define boxvar_AbsynUtil_stripClassDefComment MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_stripClassDefComment)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_onlyLiteralsInExpExit(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inLst, modelica_metatype *out_outLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_onlyLiteralsInExpExit,2,0) {(void*) boxptr_AbsynUtil_onlyLiteralsInExpExit,0}};
#define boxvar_AbsynUtil_onlyLiteralsInExpExit MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_onlyLiteralsInExpExit)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_onlyLiteralsInExpEnter(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inLst, modelica_metatype *out_outLst);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_onlyLiteralsInExpEnter,2,0) {(void*) boxptr_AbsynUtil_onlyLiteralsInExpEnter,0}};
#define boxvar_AbsynUtil_onlyLiteralsInExpEnter MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_onlyLiteralsInExpEnter)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_getIteratorIndexedCrefs(threadData_t *threadData, modelica_metatype _inCref, modelica_string _inIterator, modelica_metatype _inCrefs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_getIteratorIndexedCrefs,2,0) {(void*) boxptr_AbsynUtil_getIteratorIndexedCrefs,0}};
#define boxvar_AbsynUtil_getIteratorIndexedCrefs MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_getIteratorIndexedCrefs)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_iteratorIndexedCrefsEqual(threadData_t *threadData, modelica_metatype _inCref1, modelica_metatype _inCref2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_iteratorIndexedCrefsEqual(threadData_t *threadData, modelica_metatype _inCref1, modelica_metatype _inCref2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_iteratorIndexedCrefsEqual,2,0) {(void*) boxptr_AbsynUtil_iteratorIndexedCrefsEqual,0}};
#define boxvar_AbsynUtil_iteratorIndexedCrefsEqual MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_iteratorIndexedCrefsEqual)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_findIteratorIndexedCrefs__traverser(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefs, modelica_string _inIterator, modelica_metatype *out_outCrefs);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_findIteratorIndexedCrefs__traverser,2,0) {(void*) boxptr_AbsynUtil_findIteratorIndexedCrefs__traverser,0}};
#define boxvar_AbsynUtil_findIteratorIndexedCrefs__traverser MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_findIteratorIndexedCrefs__traverser)
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_functionArgsEqual(threadData_t *threadData, modelica_metatype _args1, modelica_metatype _args2);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_functionArgsEqual(threadData_t *threadData, modelica_metatype _args1, modelica_metatype _args2);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_functionArgsEqual,2,0) {(void*) boxptr_AbsynUtil_functionArgsEqual,0}};
#define boxvar_AbsynUtil_functionArgsEqual MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_functionArgsEqual)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_getCrefFromNarg(threadData_t *threadData, modelica_metatype _inNamedArg, modelica_boolean _includeSubs, modelica_boolean _includeFunctions);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_getCrefFromNarg(threadData_t *threadData, modelica_metatype _inNamedArg, modelica_metatype _includeSubs, modelica_metatype _includeFunctions);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_getCrefFromNarg,2,0) {(void*) boxptr_AbsynUtil_getCrefFromNarg,0}};
#define boxvar_AbsynUtil_getCrefFromNarg MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_getCrefFromNarg)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_pathToStringListWork(threadData_t *threadData, modelica_metatype _path, modelica_metatype _acc);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_pathToStringListWork,2,0) {(void*) boxptr_AbsynUtil_pathToStringListWork,0}};
#define boxvar_AbsynUtil_pathToStringListWork MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_pathToStringListWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_stringListPathReversed2(threadData_t *threadData, modelica_metatype _inStrings, modelica_metatype _inAccumPath);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_stringListPathReversed2,2,0) {(void*) boxptr_AbsynUtil_stringListPathReversed2,0}};
#define boxvar_AbsynUtil_stringListPathReversed2 MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_stringListPathReversed2)
PROTECTED_FUNCTION_STATIC modelica_string omc_AbsynUtil_pathStringWork(threadData_t *threadData, modelica_metatype _inPath, modelica_integer _len, modelica_string _delimiter, modelica_integer _dlen, modelica_boolean _reverse);
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_pathStringWork(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _len, modelica_metatype _delimiter, modelica_metatype _dlen, modelica_metatype _reverse);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_pathStringWork,2,0) {(void*) boxptr_AbsynUtil_pathStringWork,0}};
#define boxvar_AbsynUtil_pathStringWork MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_pathStringWork)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseAlgorithmBidir(threadData_t *threadData, modelica_metatype _inAlg, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseAlgorithmBidir,2,0) {(void*) boxptr_AbsynUtil_traverseAlgorithmBidir,0}};
#define boxvar_AbsynUtil_traverseAlgorithmBidir MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseAlgorithmBidir)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseAlgorithmBidirElse(threadData_t *threadData, modelica_metatype _inElse, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseAlgorithmBidirElse,2,0) {(void*) boxptr_AbsynUtil_traverseAlgorithmBidirElse,0}};
#define boxvar_AbsynUtil_traverseAlgorithmBidirElse MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseAlgorithmBidirElse)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseEquationBidirElse(threadData_t *threadData, modelica_metatype _inElse, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseEquationBidirElse,2,0) {(void*) boxptr_AbsynUtil_traverseEquationBidirElse,0}};
#define boxvar_AbsynUtil_traverseEquationBidirElse MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseEquationBidirElse)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseEquationItemBidir(threadData_t *threadData, modelica_metatype _inEquationItem, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseEquationItemBidir,2,0) {(void*) boxptr_AbsynUtil_traverseEquationItemBidir,0}};
#define boxvar_AbsynUtil_traverseEquationItemBidir MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseEquationItemBidir)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseAlgorithmItemBidir(threadData_t *threadData, modelica_metatype _inAlgorithmItem, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseAlgorithmItemBidir,2,0) {(void*) boxptr_AbsynUtil_traverseAlgorithmItemBidir,0}};
#define boxvar_AbsynUtil_traverseAlgorithmItemBidir MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseAlgorithmItemBidir)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData_t *threadData, modelica_metatype _inAlgs, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseAlgorithmItemListBidir,2,0) {(void*) boxptr_AbsynUtil_traverseAlgorithmItemListBidir,0}};
#define boxvar_AbsynUtil_traverseAlgorithmItemListBidir MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseAlgorithmItemListBidir)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseEquationItemListBidir(threadData_t *threadData, modelica_metatype _inEquationItems, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseEquationItemListBidir,2,0) {(void*) boxptr_AbsynUtil_traverseEquationItemListBidir,0}};
#define boxvar_AbsynUtil_traverseEquationItemListBidir MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseEquationItemListBidir)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseClassPartBidir(threadData_t *threadData, modelica_metatype _cp, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseClassPartBidir,2,0) {(void*) boxptr_AbsynUtil_traverseClassPartBidir,0}};
#define boxvar_AbsynUtil_traverseClassPartBidir MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseClassPartBidir)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseExpBidirSubExps(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseExpBidirSubExps,2,0) {(void*) boxptr_AbsynUtil_traverseExpBidirSubExps,0}};
#define boxvar_AbsynUtil_traverseExpBidirSubExps MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseExpBidirSubExps)
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseEquationItem(threadData_t *threadData, modelica_metatype _inEquationItem, modelica_fnptr _inFunc, modelica_metatype _inTypeA);
static const MMC_DEFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseEquationItem,2,0) {(void*) boxptr_AbsynUtil_traverseEquationItem,0}};
#define boxvar_AbsynUtil_traverseEquationItem MMC_REFSTRUCTLIT(boxvar_lit_AbsynUtil_traverseEquationItem)
DLLExport
modelica_boolean omc_AbsynUtil_isNotPartial(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_boolean _outBoolean;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outBoolean = (!omc_AbsynUtil_isPartial(threadData, _inClass));
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_AbsynUtil_isNotPartial(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_AbsynUtil_isNotPartial(threadData, _inClass);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_AbsynUtil_isPartial(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_boolean _outBoolean;
modelica_integer tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inClass;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_AbsynUtil_isPartial(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_AbsynUtil_isPartial(threadData, _inClass);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_AbsynUtil_isClassOrComponentElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_boolean _yes;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_yes = 0;
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementSpec;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (listEmpty(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (!listEmpty(tmpMeta[2])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_yes = tmp1;
_return: OMC_LABEL_UNUSED
return _yes;
}
modelica_metatype boxptr_AbsynUtil_isClassOrComponentElementSpec(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_boolean _yes;
modelica_metatype out_yes;
_yes = omc_AbsynUtil_isClassOrComponentElementSpec(threadData, _inElementSpec);
out_yes = mmc_mk_icon(_yes);
return out_yes;
}
DLLExport
modelica_metatype omc_AbsynUtil_elementSpec(threadData_t *threadData, modelica_metatype _el)
{
modelica_metatype _elSpec = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _el;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_elSpec = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _elSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseElementItem(threadData_t *threadData, modelica_metatype _inItem, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue)
{
modelica_metatype _outItem = NULL;
modelica_metatype _outArg = NULL;
modelica_boolean _outContinue;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inItem;
{
modelica_metatype _elem = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[5] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inItem), 2))), _inArg, &tmpMeta[3], &tmpMeta[4]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inItem), 2))), _inArg, &tmpMeta[3], &tmpMeta[4]);
_elem = tmpMeta[5];
tmp6 = mmc_unbox_integer(tmpMeta[4]);
_outArg = tmpMeta[3];
_outContinue = tmp6;
tmp7 = (modelica_boolean)referenceEq(_elem, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inItem), 2))));
if(tmp7)
{
tmpMeta[4] = _inItem;
}
else
{
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elem);
tmpMeta[4] = tmpMeta[3];
}
_outItem = tmpMeta[4];
tmpMeta[0+0] = _outItem;
tmpMeta[0+1] = _outArg;
tmp1_c2 = _outContinue;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inItem;
tmpMeta[0+1] = _inArg;
tmp1_c2 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outItem = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_outContinue = tmp1_c2;
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outItem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseElementItem(threadData_t *threadData, modelica_metatype _inItem, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue)
{
modelica_boolean _outContinue;
modelica_metatype _outItem = NULL;
_outItem = omc_AbsynUtil_traverseElementItem(threadData, _inItem, _inFunc, _inArg, out_outArg, &_outContinue);
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outItem;
}
static modelica_metatype closure0_AbsynUtil_traverseElementItem(threadData_t *thData, modelica_metatype closure, modelica_metatype inItem, modelica_metatype inArg, modelica_metatype tmp4, modelica_metatype tmp5)
{
modelica_fnptr inFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_traverseElementItem(thData, inItem, inFunc, inArg, tmp4, tmp5);
}static modelica_metatype closure1_AbsynUtil_traverseElementItem(threadData_t *thData, modelica_metatype closure, modelica_metatype inItem, modelica_metatype inArg, modelica_metatype tmp6, modelica_metatype tmp7)
{
modelica_fnptr inFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_traverseElementItem(thData, inItem, inFunc, inArg, tmp6, tmp7);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseClassPartElements(threadData_t *threadData, modelica_metatype _inClassPart, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue)
{
modelica_metatype _outClassPart = NULL;
modelica_metatype _outArg = NULL;
modelica_boolean _outContinue;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClassPart = _inClassPart;
_outArg = _inArg;
_outContinue = 1;
{
modelica_metatype tmp3_1;
tmp3_1 = _outClassPart;
{
modelica_metatype _items = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
tmpMeta[0] = mmc_mk_box1(0, ((modelica_fnptr) _inFunc));
_items = omc_AbsynUtil_traverseListGeneric(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outClassPart), 2))), (modelica_fnptr) mmc_mk_box2(0,closure0_AbsynUtil_traverseElementItem,tmpMeta[0]), _inArg ,&_outArg ,&_outContinue);
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outClassPart), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = _items;
_outClassPart = tmpMeta[0];
goto tmp2_done;
}
case 4: {
tmpMeta[0] = mmc_mk_box1(0, ((modelica_fnptr) _inFunc));
_items = omc_AbsynUtil_traverseListGeneric(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outClassPart), 2))), (modelica_fnptr) mmc_mk_box2(0,closure1_AbsynUtil_traverseElementItem,tmpMeta[0]), _inArg ,&_outArg ,&_outContinue);
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outClassPart), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = _items;
_outClassPart = tmpMeta[0];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outClassPart;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseClassPartElements(threadData_t *threadData, modelica_metatype _inClassPart, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue)
{
modelica_boolean _outContinue;
modelica_metatype _outClassPart = NULL;
_outClassPart = omc_AbsynUtil_traverseClassPartElements(threadData, _inClassPart, _inFunc, _inArg, out_outArg, &_outContinue);
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outClassPart;
}
static modelica_metatype closure2_AbsynUtil_traverseClassPartElements(threadData_t *thData, modelica_metatype closure, modelica_metatype inClassPart, modelica_metatype inArg, modelica_metatype tmp5, modelica_metatype tmp6)
{
modelica_fnptr inFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_traverseClassPartElements(thData, inClassPart, inFunc, inArg, tmp5, tmp6);
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseClassElements(threadData_t *threadData, modelica_metatype _inClass, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outClass = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
{
modelica_metatype tmp3_1;
tmp3_1 = _outClass;
{
modelica_metatype _body = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = mmc_mk_box1(0, ((modelica_fnptr) _inFunc));
_body = omc_AbsynUtil_traverseClassDef(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outClass), 7))), (modelica_fnptr) mmc_mk_box2(0,closure2_AbsynUtil_traverseClassPartElements,tmpMeta[1]), _inArg ,&_outArg, NULL);
if((!referenceEq(_body, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outClass), 7))))))
{
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(9));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outClass), 9*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[7] = _body;
_outClass = tmpMeta[1];
}
tmpMeta[0] = _outClass;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outClass;
}
DLLExport
modelica_boolean omc_AbsynUtil_isUniontype(threadData_t *threadData, modelica_metatype _cls)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cls), 6)));
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_isUniontype(threadData_t *threadData, modelica_metatype _cls)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_isUniontype(threadData, _cls);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_AbsynUtil_isNamedPathIdent(threadData_t *threadData, modelica_metatype _path, modelica_string _name)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _path;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp1 = (stringEqual((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_path), 2))), _name));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_AbsynUtil_isNamedPathIdent(threadData_t *threadData, modelica_metatype _path, modelica_metatype _name)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_AbsynUtil_isNamedPathIdent(threadData, _path, _name);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_metatype omc_AbsynUtil_getDirection(threadData_t *threadData, modelica_metatype _elementItem)
{
modelica_metatype _oDirection = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _elementItem;
{
modelica_metatype _element = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_element = tmpMeta[1];
{
modelica_metatype tmp7_1;
tmp7_1 = _element;
{
modelica_metatype _specification = NULL;
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 1; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,6) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
_specification = tmpMeta[2];
{
modelica_metatype tmp11_1;
tmp11_1 = _specification;
{
modelica_metatype _attributes = NULL;
volatile mmc_switch_type tmp11;
int tmp12;
tmp11 = 0;
for (; tmp11 < 1; tmp11++) {
switch (MMC_SWITCH_CAST(tmp11)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp11_1,3,3) == 0) goto tmp10_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp11_1), 2));
_attributes = tmpMeta[3];
{
modelica_metatype tmp15_1;
tmp15_1 = _attributes;
{
modelica_metatype _direction = NULL;
volatile mmc_switch_type tmp15;
int tmp16;
tmp15 = 0;
for (; tmp15 < 1; tmp15++) {
switch (MMC_SWITCH_CAST(tmp15)) {
case 0: {
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp15_1), 6));
_direction = tmpMeta[4];
tmpMeta[3] = _direction;
goto tmp14_done;
}
}
goto tmp14_end;
tmp14_end: ;
}
goto goto_13;
goto_13:;
goto goto_9;
goto tmp14_done;
tmp14_done:;
}
}tmpMeta[2] = tmpMeta[3];
goto tmp10_done;
}
}
goto tmp10_end;
tmp10_end: ;
}
goto goto_9;
goto_9:;
goto goto_5;
goto tmp10_done;
tmp10_done:;
}
}tmpMeta[1] = tmpMeta[2];
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _OMC_LIT0;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_oDirection = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _oDirection;
}
DLLExport
modelica_metatype omc_AbsynUtil_getComponentItemsFromElementItem(threadData_t *threadData, modelica_metatype _inElementItem)
{
modelica_metatype _componentItems = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = omc_AbsynUtil_getElementSpecificationFromElementItemOpt(threadData, _inElementItem);
{
modelica_metatype _elementSpec = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
_elementSpec = tmpMeta[1];
tmpMeta[0] = omc_AbsynUtil_getComponentItemsFromElementSpec(threadData, _elementSpec);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_componentItems = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _componentItems;
}
DLLExport
modelica_metatype omc_AbsynUtil_getComponentItemsFromElementSpec(threadData_t *threadData, modelica_metatype _elemSpec)
{
modelica_metatype _componentItems = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _elemSpec;
{
modelica_metatype _components = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_components = tmpMeta[1];
tmpMeta[0] = _components;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_componentItems = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _componentItems;
}
DLLExport
modelica_metatype omc_AbsynUtil_getElementSpecificationFromElementItemOpt(threadData_t *threadData, modelica_metatype _inElementItem)
{
modelica_metatype _outSpec = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inElementItem;
{
modelica_metatype _specification = NULL;
modelica_metatype _element = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_element = tmpMeta[1];
{
modelica_metatype tmp7_1;
tmp7_1 = _element;
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 1; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,6) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
_specification = tmpMeta[2];
tmpMeta[1] = mmc_mk_some(_specification);
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSpec;
}
DLLExport
modelica_metatype omc_AbsynUtil_getTypeSpecFromElementItemOpt(threadData_t *threadData, modelica_metatype _inElementItem)
{
modelica_metatype _outTypeSpec = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inElementItem;
{
modelica_metatype _typeSpec = NULL;
modelica_metatype _specification = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
{
modelica_metatype tmp7_1;
tmp7_1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inElementItem), 2)));
{
volatile mmc_switch_type tmp7;
int tmp8;
tmp7 = 0;
for (; tmp7 < 1; tmp7++) {
switch (MMC_SWITCH_CAST(tmp7)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp7_1,0,6) == 0) goto tmp6_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp7_1), 5));
_specification = tmpMeta[2];
{
modelica_metatype tmp11_1;
tmp11_1 = _specification;
{
volatile mmc_switch_type tmp11;
int tmp12;
tmp11 = 0;
for (; tmp11 < 1; tmp11++) {
switch (MMC_SWITCH_CAST(tmp11)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp11_1,3,3) == 0) goto tmp10_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp11_1), 3));
_typeSpec = tmpMeta[3];
tmpMeta[2] = mmc_mk_some(_typeSpec);
goto tmp10_done;
}
}
goto tmp10_end;
tmp10_end: ;
}
goto goto_9;
goto_9:;
goto goto_5;
goto tmp10_done;
tmp10_done:;
}
}tmpMeta[1] = tmpMeta[2];
goto tmp6_done;
}
}
goto tmp6_end;
tmp6_end: ;
}
goto goto_5;
goto_5:;
goto goto_1;
goto tmp6_done;
tmp6_done:;
}
}tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTypeSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTypeSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseInnerClassElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath, modelica_fnptr _inFuncType, modelica_metatype _inArg, modelica_boolean _inVisitProtected)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_fnptr tmp3_3;modelica_metatype tmp3_4;modelica_boolean tmp3_5;
tmp3_1 = _inElementSpec;
tmp3_2 = _inPath;
tmp3_3 = ((modelica_fnptr) _inFuncType);
tmp3_4 = _inArg;
tmp3_5 = _inVisitProtected;
{
modelica_metatype _class_1 = NULL;
modelica_metatype _class_2 = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _pa_2 = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _args_1 = NULL;
modelica_metatype _args_2 = NULL;
modelica_metatype _args = NULL;
modelica_boolean _repl;
modelica_boolean _visit_prot;
modelica_fnptr _visitor;
modelica_metatype _elt_spec = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmp5 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_repl = tmp5;
_class_ = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmpMeta[1] = mmc_mk_box3(0, _class_, _pa, _args);
tmpMeta[2] = mmc_mk_box3(0, _class_, _pa, _args);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_visitor), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_visitor), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_visitor), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_visitor), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_class_1 = tmpMeta[4];
_args_1 = tmpMeta[5];
tmpMeta[1] = omc_AbsynUtil_traverseInnerClass(threadData, _class_1, _pa, ((modelica_fnptr) _visitor), _args_1, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_class_2 = tmpMeta[2];
_pa_2 = tmpMeta[3];
_args_2 = tmpMeta[4];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(_repl), _class_2);
tmpMeta[2] = mmc_mk_box3(0, tmpMeta[1], _pa_2, _args_2);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
_elt_spec = tmp3_1;
_pa = tmp3_2;
_args = tmp3_4;
tmpMeta[1] = mmc_mk_box3(0, _elt_spec, _pa, _args);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,3) == 0) goto tmp2_end;
_elt_spec = tmp3_1;
_pa = tmp3_2;
_args = tmp3_4;
tmpMeta[1] = mmc_mk_box3(0, _elt_spec, _pa, _args);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,3) == 0) goto tmp2_end;
_elt_spec = tmp3_1;
_pa = tmp3_2;
_args = tmp3_4;
tmpMeta[1] = mmc_mk_box3(0, _elt_spec, _pa, _args);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseInnerClassElementspec(threadData_t *threadData, modelica_metatype _inElementSpec, modelica_metatype _inPath, modelica_fnptr _inFuncType, modelica_metatype _inArg, modelica_metatype _inVisitProtected)
{
modelica_integer tmp1;
modelica_metatype _outTpl = NULL;
tmp1 = mmc_unbox_integer(_inVisitProtected);
_outTpl = omc_AbsynUtil_traverseInnerClassElementspec(threadData, _inElementSpec, _inPath, _inFuncType, _inArg, tmp1);
return _outTpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseInnerClassElements(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inPath, modelica_fnptr _inFuncType, modelica_metatype _inArg, modelica_boolean _inVisitProtected)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_fnptr tmp3_3;volatile modelica_metatype tmp3_4;volatile modelica_boolean tmp3_5;
tmp3_1 = _inElements;
tmp3_2 = _inPath;
tmp3_3 = ((modelica_fnptr) _inFuncType);
tmp3_4 = _inArg;
tmp3_5 = _inVisitProtected;
{
modelica_metatype _pa = NULL;
modelica_metatype _pa_1 = NULL;
modelica_metatype _pa_2 = NULL;
modelica_metatype _args = NULL;
modelica_metatype _args_1 = NULL;
modelica_metatype _args_2 = NULL;
modelica_metatype _elt_spec_1 = NULL;
modelica_metatype _elt_spec = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_boolean _f;
modelica_boolean _visit_prot;
modelica_metatype _r = NULL;
modelica_metatype _io = NULL;
modelica_metatype _info = NULL;
modelica_metatype _constr = NULL;
modelica_fnptr _visitor;
modelica_metatype _elt = NULL;
modelica_boolean _repl;
modelica_metatype _cl = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_pa = tmp3_2;
_args = tmp3_4;
tmp3 += 4;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(0, tmpMeta[1], _pa, _args);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
modelica_integer tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp5 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 6));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 7));
_f = tmp5;
_r = tmpMeta[5];
_io = tmpMeta[6];
_elt_spec = tmpMeta[7];
_info = tmpMeta[8];
_constr = tmpMeta[9];
_elts = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassElementspec(threadData, _elt_spec, _pa, ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_elt_spec_1 = tmpMeta[2];
_args_1 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassElements(threadData, _elts, _pa, ((modelica_fnptr) _visitor), _args_1, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_elts_1 = tmpMeta[2];
_pa_2 = tmpMeta[3];
_args_2 = tmpMeta[4];
tmpMeta[2] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _io, _elt_spec_1, _info, _constr);
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta[2]);
tmpMeta[1] = mmc_mk_cons(tmpMeta[3], _elts_1);
tmpMeta[4] = mmc_mk_box3(0, tmpMeta[1], _pa_2, _args_2);
tmpMeta[0] = tmpMeta[4];
goto tmp2_done;
}
case 2: {
modelica_integer tmp6;
modelica_integer tmp7;
modelica_boolean tmp8;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmp6 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,2) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmp7 = mmc_unbox_integer(tmpMeta[8]);
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 6));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 7));
_f = tmp6;
_r = tmpMeta[5];
_io = tmpMeta[6];
_repl = tmp7;
_cl = tmpMeta[9];
_info = tmpMeta[10];
_constr = tmpMeta[11];
_elts = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClass(threadData, _cl, _pa, ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_cl = tmpMeta[2];
_args_1 = tmpMeta[3];
tmp8 = omc_AbsynUtil_classHasLocalClasses(threadData, _cl);
if (1 != tmp8) goto goto_1;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassElements(threadData, _elts, _pa, ((modelica_fnptr) _visitor), _args_1, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_elts_1 = tmpMeta[2];
_pa_2 = tmpMeta[3];
_args_2 = tmpMeta[4];
tmpMeta[2] = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(_repl), _cl);
tmpMeta[3] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_f), _r, _io, tmpMeta[2], _info, _constr);
tmpMeta[4] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta[3]);
tmpMeta[1] = mmc_mk_cons(tmpMeta[4], _elts_1);
tmpMeta[5] = mmc_mk_box3(0, tmpMeta[1], _pa_2, _args_2);
tmpMeta[0] = tmpMeta[5];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
_elts = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassElements(threadData, _elts, _pa, ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_elts_1 = tmpMeta[2];
_pa_2 = tmpMeta[3];
_args_2 = tmpMeta[4];
tmpMeta[1] = mmc_mk_box3(0, _elts_1, _pa_2, _args_2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_elt = tmpMeta[1];
_elts = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassElements(threadData, _elts, _pa, ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_elts_1 = tmpMeta[2];
_pa_1 = tmpMeta[3];
_args_1 = tmpMeta[4];
tmpMeta[1] = mmc_mk_cons(_elt, _elts_1);
tmpMeta[2] = mmc_mk_box3(0, tmpMeta[1], _pa_1, _args_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseInnerClassElements(threadData_t *threadData, modelica_metatype _inElements, modelica_metatype _inPath, modelica_fnptr _inFuncType, modelica_metatype _inArg, modelica_metatype _inVisitProtected)
{
modelica_integer tmp1;
modelica_metatype _outTpl = NULL;
tmp1 = mmc_unbox_integer(_inVisitProtected);
_outTpl = omc_AbsynUtil_traverseInnerClassElements(threadData, _inElements, _inPath, _inFuncType, _inArg, tmp1);
return _outTpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseInnerClassParts(threadData_t *threadData, modelica_metatype _inClassParts, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_boolean _inVisitProtected)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_fnptr tmp3_3;volatile modelica_metatype tmp3_4;volatile modelica_boolean tmp3_5;
tmp3_1 = _inClassParts;
tmp3_2 = _inPath;
tmp3_3 = ((modelica_fnptr) _inFunc);
tmp3_4 = _inArg;
tmp3_5 = _inVisitProtected;
{
modelica_metatype _pa = NULL;
modelica_metatype _pa_1 = NULL;
modelica_metatype _pa_2 = NULL;
modelica_metatype _args = NULL;
modelica_metatype _args_1 = NULL;
modelica_metatype _args_2 = NULL;
modelica_metatype _elts_1 = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_fnptr _visitor;
modelica_boolean _visit_prot;
modelica_metatype _part = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_pa = tmp3_2;
_args = tmp3_4;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(0, tmpMeta[1], _pa, _args);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_parts = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmp3 += 1;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassElements(threadData, _elts, _pa, ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_elts_1 = tmpMeta[2];
_args_1 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassParts(threadData, _parts, _pa, ((modelica_fnptr) _visitor), _args_1, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_parts_1 = tmpMeta[2];
_pa_2 = tmpMeta[3];
_args_2 = tmpMeta[4];
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _parts_1);
tmpMeta[3] = mmc_mk_box3(0, tmpMeta[1], _pa_2, _args_2);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 2: {
if (1 != tmp3_5) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_elts = tmpMeta[3];
_parts = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassElements(threadData, _elts, _pa, ((modelica_fnptr) _visitor), _args, 1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_elts_1 = tmpMeta[2];
_args_1 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassParts(threadData, _parts, _pa, ((modelica_fnptr) _visitor), _args_1, 1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_parts_1 = tmpMeta[2];
_pa_2 = tmpMeta[3];
_args_2 = tmpMeta[4];
tmpMeta[2] = mmc_mk_box2(4, &Absyn_ClassPart_PROTECTED__desc, _elts_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _parts_1);
tmpMeta[3] = mmc_mk_box3(0, tmpMeta[1], _pa_2, _args_2);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 3: {
if (1 != tmp3_5) goto tmp2_end;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_part = tmpMeta[1];
_parts = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassParts(threadData, _parts, _pa, ((modelica_fnptr) _visitor), _args, 1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_parts_1 = tmpMeta[2];
_pa_1 = tmpMeta[3];
_args_1 = tmpMeta[4];
tmpMeta[1] = mmc_mk_cons(_part, _parts_1);
tmpMeta[2] = mmc_mk_box3(0, tmpMeta[1], _pa_1, _args_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseInnerClassParts(threadData_t *threadData, modelica_metatype _inClassParts, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype _inVisitProtected)
{
modelica_integer tmp1;
modelica_metatype _outTpl = NULL;
tmp1 = mmc_unbox_integer(_inVisitProtected);
_outTpl = omc_AbsynUtil_traverseInnerClassParts(threadData, _inClassParts, _inPath, _inFunc, _inArg, tmp1);
return _outTpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseInnerClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_boolean _inVisitProtected)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[14] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_fnptr tmp3_3;volatile modelica_metatype tmp3_4;volatile modelica_boolean tmp3_5;
tmp3_1 = _inClass;
tmp3_2 = _inPath;
tmp3_3 = ((modelica_fnptr) _inFunc);
tmp3_4 = _inArg;
tmp3_5 = _inVisitProtected;
{
modelica_metatype _tmp_pa = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _parts_1 = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _pa_1 = NULL;
modelica_metatype _args_1 = NULL;
modelica_metatype _args = NULL;
modelica_string _name = NULL;
modelica_string _bcname = NULL;
modelica_boolean _p;
modelica_boolean _f;
modelica_boolean _e;
modelica_boolean _visit_prot;
modelica_metatype _r = NULL;
modelica_metatype _str_opt = NULL;
modelica_metatype _file_info = NULL;
modelica_fnptr _visitor;
modelica_metatype _cl = NULL;
modelica_metatype _modif = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 7; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
if (optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
_name = tmpMeta[1];
_p = tmp5;
_f = tmp6;
_e = tmp7;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_str_opt = tmpMeta[11];
_file_info = tmpMeta[12];
_pa = tmpMeta[13];
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmp3 += 1;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
_tmp_pa = omc_AbsynUtil_joinPaths(threadData, _pa, tmpMeta[1]);
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassParts(threadData, _parts, mmc_mk_some(_tmp_pa), ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_parts_1 = tmpMeta[2];
_pa_1 = tmpMeta[3];
_args_1 = tmpMeta[4];
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _str_opt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[3] = mmc_mk_box3(0, tmpMeta[2], _pa_1, _args_1);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 1: {
modelica_integer tmp8;
modelica_integer tmp9;
modelica_integer tmp10;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp8 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp9 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp10 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
if (!optionNone(tmp3_2)) goto tmp2_end;
_name = tmpMeta[1];
_p = tmp8;
_f = tmp9;
_e = tmp10;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_str_opt = tmpMeta[11];
_file_info = tmpMeta[12];
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta[2] = omc_AbsynUtil_traverseInnerClassParts(threadData, _parts, mmc_mk_some(tmpMeta[1]), ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
_parts_1 = tmpMeta[3];
_pa_1 = tmpMeta[4];
_args_1 = tmpMeta[5];
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _str_opt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[3] = mmc_mk_box3(0, tmpMeta[2], _pa_1, _args_1);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 2: {
modelica_integer tmp11;
modelica_integer tmp12;
modelica_integer tmp13;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp11 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp12 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp13 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_p = tmp11;
_f = tmp12;
_e = tmp13;
_r = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_parts = tmpMeta[9];
_ann = tmpMeta[10];
_str_opt = tmpMeta[11];
_file_info = tmpMeta[12];
_pa_1 = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmp3 += 3;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassParts(threadData, _parts, _pa_1, ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_parts_1 = tmpMeta[2];
_pa_1 = tmpMeta[3];
_args_1 = tmpMeta[4];
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts_1, _ann, _str_opt);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[3] = mmc_mk_box3(0, tmpMeta[2], _pa_1, _args_1);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 3: {
modelica_integer tmp14;
modelica_integer tmp15;
modelica_integer tmp16;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp14 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp15 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp16 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
if (optionNone(tmp3_2)) goto tmp2_end;
tmpMeta[13] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 1));
_name = tmpMeta[1];
_p = tmp14;
_f = tmp15;
_e = tmp16;
_r = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_str_opt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_pa = tmpMeta[13];
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmp3 += 1;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
_tmp_pa = omc_AbsynUtil_joinPaths(threadData, _pa, tmpMeta[1]);
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassParts(threadData, _parts, mmc_mk_some(_tmp_pa), ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_parts_1 = tmpMeta[2];
_pa_1 = tmpMeta[3];
_args_1 = tmpMeta[4];
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _str_opt, _parts_1, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[3] = mmc_mk_box3(0, tmpMeta[2], _pa_1, _args_1);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 4: {
modelica_integer tmp17;
modelica_integer tmp18;
modelica_integer tmp19;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp17 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp18 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp19 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
if (!optionNone(tmp3_2)) goto tmp2_end;
_name = tmpMeta[1];
_p = tmp17;
_f = tmp18;
_e = tmp19;
_r = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_str_opt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _name);
tmpMeta[2] = omc_AbsynUtil_traverseInnerClassParts(threadData, _parts, mmc_mk_some(tmpMeta[1]), ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
_parts_1 = tmpMeta[3];
_pa_1 = tmpMeta[4];
_args_1 = tmpMeta[5];
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _str_opt, _parts_1, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[3] = mmc_mk_box3(0, tmpMeta[2], _pa_1, _args_1);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 5: {
modelica_integer tmp20;
modelica_integer tmp21;
modelica_integer tmp22;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp20 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp21 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp22 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],4,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_p = tmp20;
_f = tmp21;
_e = tmp22;
_r = tmpMeta[5];
_bcname = tmpMeta[7];
_modif = tmpMeta[8];
_str_opt = tmpMeta[9];
_parts = tmpMeta[10];
_ann = tmpMeta[11];
_file_info = tmpMeta[12];
_pa_1 = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_visit_prot = tmp3_5;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClassParts(threadData, _parts, _pa_1, ((modelica_fnptr) _visitor), _args, _visit_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_parts_1 = tmpMeta[2];
_pa_1 = tmpMeta[3];
_args_1 = tmpMeta[4];
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _bcname, _modif, _str_opt, _parts_1, _ann);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_p), mmc_mk_boolean(_f), mmc_mk_boolean(_e), _r, tmpMeta[1], _file_info);
tmpMeta[3] = mmc_mk_box3(0, tmpMeta[2], _pa_1, _args_1);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
case 6: {
_cl = tmp3_1;
_pa_1 = tmp3_2;
_args = tmp3_4;
tmpMeta[1] = mmc_mk_box3(0, _cl, _pa_1, _args);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 7) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseInnerClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype _inVisitProtected)
{
modelica_integer tmp1;
modelica_metatype _outTpl = NULL;
tmp1 = mmc_unbox_integer(_inVisitProtected);
_outTpl = omc_AbsynUtil_traverseInnerClass(threadData, _inClass, _inPath, _inFunc, _inArg, tmp1);
return _outTpl;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_eltsHasLocalClass(threadData_t *threadData, modelica_metatype _inElts)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inElts;
{
modelica_metatype _elts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_elts = tmpMeta[1];
tmp1 = omc_AbsynUtil_eltsHasLocalClass(threadData, _elts);
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_eltsHasLocalClass(threadData_t *threadData, modelica_metatype _inElts)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_AbsynUtil_eltsHasLocalClass(threadData, _inElts);
out_res = mmc_mk_icon(_res);
return out_res;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_partsHasLocalClass(threadData_t *threadData, modelica_metatype _inParts)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inParts;
{
modelica_metatype _elts = NULL;
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_elts = tmpMeta[2];
tmp4 += 1;
tmp6 = omc_AbsynUtil_eltsHasLocalClass(threadData, _elts);
if (1 != tmp6) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp7;
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_elts = tmpMeta[2];
tmp7 = omc_AbsynUtil_eltsHasLocalClass(threadData, _elts);
if (1 != tmp7) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_parts = tmpMeta[1];
tmp1 = omc_AbsynUtil_partsHasLocalClass(threadData, _parts);
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_partsHasLocalClass(threadData_t *threadData, modelica_metatype _inParts)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_AbsynUtil_partsHasLocalClass(threadData, _inParts);
out_res = mmc_mk_icon(_res);
return out_res;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_classHasLocalClasses(threadData_t *threadData, modelica_metatype _cl)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _cl;
{
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_parts = tmpMeta[1];
tmp1 = omc_AbsynUtil_partsHasLocalClass(threadData, _parts);
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],4,5) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
_parts = tmpMeta[1];
tmp1 = omc_AbsynUtil_partsHasLocalClass(threadData, _parts);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_classHasLocalClasses(threadData_t *threadData, modelica_metatype _cl)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_AbsynUtil_classHasLocalClasses(threadData, _cl);
out_res = mmc_mk_icon(_res);
return out_res;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseClasses2(threadData_t *threadData, modelica_metatype _inClasses, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_boolean _inVisitProtected)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;volatile modelica_fnptr tmp3_3;volatile modelica_metatype tmp3_4;volatile modelica_boolean tmp3_5;
tmp3_1 = _inClasses;
tmp3_2 = _inPath;
tmp3_3 = ((modelica_fnptr) _inFunc);
tmp3_4 = _inArg;
tmp3_5 = _inVisitProtected;
{
modelica_metatype _pa = NULL;
modelica_metatype _pa_3 = NULL;
modelica_fnptr _visitor;
modelica_metatype _args = NULL;
modelica_metatype _args_1 = NULL;
modelica_metatype _args_2 = NULL;
modelica_metatype _args_3 = NULL;
modelica_metatype _class_1 = NULL;
modelica_metatype _class_2 = NULL;
modelica_metatype _class_ = NULL;
modelica_metatype _classes_1 = NULL;
modelica_metatype _classes = NULL;
modelica_boolean _traverse_prot;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_pa = tmp3_2;
_args = tmp3_4;
tmp3 += 4;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(0, tmpMeta[1], _pa, _args);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_class_ = tmpMeta[1];
_classes = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_traverse_prot = tmp3_5;
tmpMeta[1] = mmc_mk_box3(0, _class_, _pa, _args);
tmpMeta[2] = mmc_mk_box3(0, _class_, _pa, _args);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_visitor), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_visitor), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_visitor), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_visitor), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_class_1 = tmpMeta[4];
_args_1 = tmpMeta[5];
tmpMeta[1] = omc_AbsynUtil_traverseInnerClass(threadData, _class_1, _pa, ((modelica_fnptr) _visitor), _args_1, _traverse_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_class_2 = tmpMeta[2];
_args_2 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseClasses2(threadData, _classes, _pa, ((modelica_fnptr) _visitor), _args_2, _traverse_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_classes_1 = tmpMeta[2];
_pa_3 = tmpMeta[3];
_args_3 = tmpMeta[4];
tmpMeta[1] = mmc_mk_cons(_class_2, _classes_1);
tmpMeta[2] = mmc_mk_box3(0, tmpMeta[1], _pa_3, _args_3);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
modelica_boolean tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_class_ = tmpMeta[1];
_classes = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_traverse_prot = tmp3_5;
tmpMeta[1] = omc_AbsynUtil_traverseInnerClass(threadData, _class_, _pa, ((modelica_fnptr) _visitor), _args, _traverse_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_class_2 = tmpMeta[2];
_args_2 = tmpMeta[3];
tmp5 = omc_AbsynUtil_classHasLocalClasses(threadData, _class_2);
if (1 != tmp5) goto goto_1;
tmpMeta[1] = omc_AbsynUtil_traverseClasses2(threadData, _classes, _pa, ((modelica_fnptr) _visitor), _args_2, _traverse_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_classes_1 = tmpMeta[2];
_pa_3 = tmpMeta[3];
_args_3 = tmpMeta[4];
tmpMeta[1] = mmc_mk_cons(_class_2, _classes_1);
tmpMeta[2] = mmc_mk_box3(0, tmpMeta[1], _pa_3, _args_3);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_classes = tmpMeta[2];
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_traverse_prot = tmp3_5;
tmpMeta[1] = omc_AbsynUtil_traverseClasses2(threadData, _classes, _pa, ((modelica_fnptr) _visitor), _args, _traverse_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_classes_1 = tmpMeta[2];
_pa_3 = tmpMeta[3];
_args_3 = tmpMeta[4];
tmpMeta[1] = mmc_mk_box3(0, _classes_1, _pa_3, _args_3);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_class_ = tmpMeta[1];
fputs(MMC_STRINGDATA(_OMC_LIT1),stdout);
fputs(MMC_STRINGDATA(omc_AbsynUtil_pathString(threadData, omc_AbsynUtil_className(threadData, _class_), _OMC_LIT2, 1, 0)),stdout);
fputs(MMC_STRINGDATA(_OMC_LIT3),stdout);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseClasses2(threadData_t *threadData, modelica_metatype _inClasses, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype _inVisitProtected)
{
modelica_integer tmp1;
modelica_metatype _outTpl = NULL;
tmp1 = mmc_unbox_integer(_inVisitProtected);
_outTpl = omc_AbsynUtil_traverseClasses2(threadData, _inClasses, _inPath, _inFunc, _inArg, tmp1);
return _outTpl;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseClasses(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_boolean _inVisitProtected)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;modelica_fnptr tmp3_3;modelica_metatype tmp3_4;modelica_boolean tmp3_5;
tmp3_1 = _inProgram;
tmp3_2 = _inPath;
tmp3_3 = ((modelica_fnptr) _inFunc);
tmp3_4 = _inArg;
tmp3_5 = _inVisitProtected;
{
modelica_metatype _classes = NULL;
modelica_metatype _pa_1 = NULL;
modelica_metatype _pa = NULL;
modelica_metatype _args_1 = NULL;
modelica_metatype _args = NULL;
modelica_fnptr _visitor;
modelica_boolean _traverse_prot;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
_p = tmp3_1;
_pa = tmp3_2;
_visitor = tmp3_3;
_args = tmp3_4;
_traverse_prot = tmp3_5;
tmpMeta[1] = omc_AbsynUtil_traverseClasses2(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))), _pa, ((modelica_fnptr) _visitor), _args, _traverse_prot);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_classes = tmpMeta[2];
_pa_1 = tmpMeta[3];
_args_1 = tmpMeta[4];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_p), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = _classes;
_p = tmpMeta[1];
tmpMeta[1] = mmc_mk_box3(0, _p, _pa_1, _args_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
modelica_metatype boxptr_AbsynUtil_traverseClasses(threadData_t *threadData, modelica_metatype _inProgram, modelica_metatype _inPath, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype _inVisitProtected)
{
modelica_integer tmp1;
modelica_metatype _outTpl = NULL;
tmp1 = mmc_unbox_integer(_inVisitProtected);
_outTpl = omc_AbsynUtil_traverseClasses(threadData, _inProgram, _inPath, _inFunc, _inArg, tmp1);
return _outTpl;
}
DLLExport
modelica_metatype omc_AbsynUtil_stripGraphicsAndInteractionModification(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype *out_outAbsynElementArgLst2)
{
modelica_metatype _outAbsynElementArgLst1 = NULL;
modelica_metatype _outAbsynElementArgLst2 = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inAbsynElementArgLst;
{
modelica_metatype _mod = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 4;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (11 != MMC_STRLEN(tmpMeta[5]) || strcmp(MMC_STRINGDATA(_OMC_LIT4), MMC_STRINGDATA(tmpMeta[5])) != 0) goto tmp3_end;
_rest = tmpMeta[3];
tmp4 += 2;
tmpMeta[0+0] = omc_AbsynUtil_stripGraphicsAndInteractionModification(threadData, _rest, &tmpMeta[0+1]);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (8 != MMC_STRLEN(tmpMeta[5]) || strcmp(MMC_STRINGDATA(_OMC_LIT5), MMC_STRINGDATA(tmpMeta[5])) != 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (!optionNone(tmpMeta[6])) goto tmp3_end;
_rest = tmpMeta[3];
tmp4 += 1;
tmpMeta[0+0] = omc_AbsynUtil_stripGraphicsAndInteractionModification(threadData, _rest, &tmpMeta[0+1]);
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (8 != MMC_STRLEN(tmpMeta[5]) || strcmp(MMC_STRINGDATA(_OMC_LIT5), MMC_STRINGDATA(tmpMeta[5])) != 0) goto tmp3_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
if (optionNone(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 1));
_mod = tmpMeta[2];
_rest = tmpMeta[3];
_l1 = omc_AbsynUtil_stripGraphicsAndInteractionModification(threadData, _rest ,&_l2);
tmpMeta[2] = mmc_mk_cons(_mod, _l2);
tmpMeta[0+0] = _l1;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 4: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp3_end;
_mod = tmpMeta[2];
_rest = tmpMeta[3];
_l1 = omc_AbsynUtil_stripGraphicsAndInteractionModification(threadData, _rest ,&_l2);
tmpMeta[2] = mmc_mk_cons(_mod, _l1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _l2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outAbsynElementArgLst1 = tmpMeta[0+0];
_outAbsynElementArgLst2 = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outAbsynElementArgLst2) { *out_outAbsynElementArgLst2 = _outAbsynElementArgLst2; }
return _outAbsynElementArgLst1;
}
DLLExport
modelica_metatype omc_AbsynUtil_getAnnotationsFromItems(threadData_t *threadData, modelica_metatype _inComponentItems, modelica_metatype _ccAnnotations)
{
modelica_metatype _outLst = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _res = NULL;
modelica_string _str = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outLst = tmpMeta[0];
{
modelica_metatype _comp;
for (tmpMeta[1] = listReverse(_inComponentItems); !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_comp = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp3_1;
tmp3_1 = _comp;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (optionNone(tmpMeta[3])) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (optionNone(tmpMeta[5])) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
_annotations = tmpMeta[7];
tmpMeta[2] = listAppend(_annotations, _ccAnnotations);
goto tmp2_done;
}
case 1: {
tmpMeta[2] = _ccAnnotations;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_annotations = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_annotations, _outLst);
_outLst = tmpMeta[2];
}
}
_return: OMC_LABEL_UNUSED
return _outLst;
}
DLLExport
modelica_metatype omc_AbsynUtil_getAnnotationsFromConstraintClass(threadData_t *threadData, modelica_metatype _inCC)
{
modelica_metatype _outElArgLst = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inCC;
{
modelica_metatype _elementArgs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_elementArgs = tmpMeta[6];
tmpMeta[0] = _elementArgs;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElArgLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElArgLst;
}
DLLExport
modelica_integer omc_AbsynUtil_pathPartCount(threadData_t *threadData, modelica_metatype _path, modelica_integer _partsAccum)
{
modelica_integer _parts;
modelica_integer tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _path;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
tmp1 = ((modelica_integer) 1) + _partsAccum;
goto tmp3_done;
}
case 3: {
_path = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_path), 3)));
_partsAccum = ((modelica_integer) 1) + _partsAccum;
goto _tailrecursive;
goto tmp3_done;
}
case 5: {
_path = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_path), 2)));
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_parts = tmp1;
_return: OMC_LABEL_UNUSED
return _parts;
}
modelica_metatype boxptr_AbsynUtil_pathPartCount(threadData_t *threadData, modelica_metatype _path, modelica_metatype _partsAccum)
{
modelica_integer tmp1;
modelica_integer _parts;
modelica_metatype out_parts;
tmp1 = mmc_unbox_integer(_partsAccum);
_parts = omc_AbsynUtil_pathPartCount(threadData, _path, tmp1);
out_parts = mmc_mk_icon(_parts);
return out_parts;
}
DLLExport
modelica_metatype omc_AbsynUtil_isInvariantExpNoTraverse(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_boolean __omcQ_24in_5Fb, modelica_boolean *out_b)
{
modelica_metatype _e = NULL;
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_e = __omcQ_24in_5Fe;
_b = __omcQ_24in_5Fb;
if((!_b))
{
goto _return;
}
{
modelica_metatype tmp4_1;
tmp4_1 = _e;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 18; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 17: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
if (out_b) { *out_b = _b; }
return _e;
}
modelica_metatype boxptr_AbsynUtil_isInvariantExpNoTraverse(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fe, modelica_metatype __omcQ_24in_5Fb, modelica_metatype *out_b)
{
modelica_integer tmp1;
modelica_boolean _b;
modelica_metatype _e = NULL;
tmp1 = mmc_unbox_integer(__omcQ_24in_5Fb);
_e = omc_AbsynUtil_isInvariantExpNoTraverse(threadData, __omcQ_24in_5Fe, tmp1, &_b);
if (out_b) { *out_b = mmc_mk_icon(_b); }
return _e;
}
DLLExport
modelica_boolean omc_AbsynUtil_isEmptyClassPart(threadData_t *threadData, modelica_metatype _inClassPart)
{
modelica_boolean _outIsEmpty;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClassPart;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 8; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 7: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsEmpty = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsEmpty;
}
modelica_metatype boxptr_AbsynUtil_isEmptyClassPart(threadData_t *threadData, modelica_metatype _inClassPart)
{
modelica_boolean _outIsEmpty;
modelica_metatype out_outIsEmpty;
_outIsEmpty = omc_AbsynUtil_isEmptyClassPart(threadData, _inClassPart);
out_outIsEmpty = mmc_mk_icon(_outIsEmpty);
return out_outIsEmpty;
}
DLLExport
modelica_boolean omc_AbsynUtil_isElementItemClassNamed(threadData_t *threadData, modelica_string _inName, modelica_metatype _inElement)
{
modelica_boolean _outIsNamed;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
modelica_string _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_name = tmpMeta[3];
tmp1 = (stringEqual(_name, _inName));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsNamed = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsNamed;
}
modelica_metatype boxptr_AbsynUtil_isElementItemClassNamed(threadData_t *threadData, modelica_metatype _inName, modelica_metatype _inElement)
{
modelica_boolean _outIsNamed;
modelica_metatype out_outIsNamed;
_outIsNamed = omc_AbsynUtil_isElementItemClassNamed(threadData, _inName, _inElement);
out_outIsNamed = mmc_mk_icon(_outIsNamed);
return out_outIsNamed;
}
DLLExport
modelica_boolean omc_AbsynUtil_isAlgorithmItem(threadData_t *threadData, modelica_metatype _inAlg)
{
modelica_boolean _outIsClass;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAlg;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,3) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsClass = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsClass;
}
modelica_metatype boxptr_AbsynUtil_isAlgorithmItem(threadData_t *threadData, modelica_metatype _inAlg)
{
modelica_boolean _outIsClass;
modelica_metatype out_outIsClass;
_outIsClass = omc_AbsynUtil_isAlgorithmItem(threadData, _inAlg);
out_outIsClass = mmc_mk_icon(_outIsClass);
return out_outIsClass;
}
DLLExport
modelica_boolean omc_AbsynUtil_isElementItem(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outIsClass;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsClass = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsClass;
}
modelica_metatype boxptr_AbsynUtil_isElementItem(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outIsClass;
modelica_metatype out_outIsClass;
_outIsClass = omc_AbsynUtil_isElementItem(threadData, _inElement);
out_outIsClass = mmc_mk_icon(_outIsClass);
return out_outIsClass;
}
DLLExport
modelica_boolean omc_AbsynUtil_isElementItemClass(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outIsClass;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsClass = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsClass;
}
modelica_metatype boxptr_AbsynUtil_isElementItemClass(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _outIsClass;
modelica_metatype out_outIsClass;
_outIsClass = omc_AbsynUtil_isElementItemClass(threadData, _inElement);
out_outIsClass = mmc_mk_icon(_outIsClass);
return out_outIsClass;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseExpShallowIterator(threadData_t *threadData, modelica_metatype _inIterator, modelica_metatype _inArg, modelica_fnptr _inFunc)
{
modelica_metatype _outIterator = NULL;
modelica_string _name = NULL;
modelica_metatype _guard_exp = NULL;
modelica_metatype _range_exp = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inIterator;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_name = tmpMeta[1];
_guard_exp = tmpMeta[2];
_range_exp = tmpMeta[3];
_guard_exp = omc_Util_applyOption1(threadData, _guard_exp, ((modelica_fnptr) _inFunc), _inArg);
_range_exp = omc_Util_applyOption1(threadData, _range_exp, ((modelica_fnptr) _inFunc), _inArg);
tmpMeta[0] = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _name, _guard_exp, _range_exp);
_outIterator = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outIterator;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseExpShallowFuncArgs(threadData_t *threadData, modelica_metatype _inArgs, modelica_metatype _inArg, modelica_fnptr _inFunc)
{
modelica_metatype _outArgs = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outArgs = _inArgs;
{
modelica_metatype tmp3_1;
tmp3_1 = _outArgs;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
{
modelica_metatype __omcQ_24tmpVar1;
modelica_metatype* tmp5;
modelica_metatype __omcQ_24tmpVar0;
int tmp6;
modelica_metatype _arg_loopVar = 0;
modelica_metatype _arg;
_arg_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outArgs), 2)));
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar1 = tmpMeta[3];
tmp5 = &__omcQ_24tmpVar1;
while(1) {
tmp6 = 1;
if (!listEmpty(_arg_loopVar)) {
_arg = MMC_CAR(_arg_loopVar);
_arg_loopVar = MMC_CDR(_arg_loopVar);
tmp6--;
}
if (tmp6 == 0) {
__omcQ_24tmpVar0 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _arg, _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _arg, _inArg);
*tmp5 = mmc_mk_cons(__omcQ_24tmpVar0,0);
tmp5 = &MMC_CDR(*tmp5);
} else if (tmp6 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp5 = mmc_mk_nil();
tmpMeta[2] = __omcQ_24tmpVar1;
}
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outArgs), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = tmpMeta[2];
_outArgs = tmpMeta[1];
tmpMeta[0] = _outArgs;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outArgs), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outArgs), 2))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outArgs), 2))), _inArg);
_outArgs = tmpMeta[1];
{
modelica_metatype __omcQ_24tmpVar3;
modelica_metatype* tmp7;
modelica_metatype __omcQ_24tmpVar2;
int tmp8;
modelica_metatype _it_loopVar = 0;
modelica_metatype _it;
_it_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outArgs), 4)));
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar3 = tmpMeta[3];
tmp7 = &__omcQ_24tmpVar3;
while(1) {
tmp8 = 1;
if (!listEmpty(_it_loopVar)) {
_it = MMC_CAR(_it_loopVar);
_it_loopVar = MMC_CDR(_it_loopVar);
tmp8--;
}
if (tmp8 == 0) {
__omcQ_24tmpVar2 = omc_AbsynUtil_traverseExpShallowIterator(threadData, _it, _inArg, ((modelica_fnptr) _inFunc));
*tmp7 = mmc_mk_cons(__omcQ_24tmpVar2,0);
tmp7 = &MMC_CDR(*tmp7);
} else if (tmp8 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp7 = mmc_mk_nil();
tmpMeta[2] = __omcQ_24tmpVar3;
}
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outArgs), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[4] = tmpMeta[2];
_outArgs = tmpMeta[1];
tmpMeta[0] = _outArgs;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outArgs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outArgs;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpShallow(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inArg, modelica_fnptr _inFunc)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _inExp;
{
modelica_metatype tmp3_1;
tmp3_1 = _outExp;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 8: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg);
_outExp = tmpMeta[0];
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[4] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 4))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 4))), _inArg);
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 9: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg);
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 10: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg);
_outExp = tmpMeta[0];
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[4] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 4))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 4))), _inArg);
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 11: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg);
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 12: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg);
_outExp = tmpMeta[0];
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[4] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 4))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 4))), _inArg);
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 13: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg);
_outExp = tmpMeta[0];
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg);
_outExp = tmpMeta[0];
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[4] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 4))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 4))), _inArg);
_outExp = tmpMeta[0];
{
modelica_metatype __omcQ_24tmpVar5;
modelica_metatype* tmp4;
modelica_metatype __omcQ_24tmpVar4;
int tmp5;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 5)));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar5 = tmpMeta[2];
tmp4 = &__omcQ_24tmpVar5;
while(1) {
tmp5 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp5--;
}
if (tmp5 == 0) {
tmpMeta[3] = mmc_mk_box2(0, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), omc_Util_tuple21(threadData, _e), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, omc_Util_tuple21(threadData, _e), _inArg), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), omc_Util_tuple22(threadData, _e), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, omc_Util_tuple22(threadData, _e), _inArg));
__omcQ_24tmpVar4 = tmpMeta[3];
*tmp4 = mmc_mk_cons(__omcQ_24tmpVar4,0);
tmp4 = &MMC_CDR(*tmp4);
} else if (tmp5 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp4 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar5;
}
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(6));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 6*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[5] = tmpMeta[1];
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 14: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[3] = omc_AbsynUtil_traverseExpShallowFuncArgs(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg, ((modelica_fnptr) _inFunc));
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 15: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[3] = omc_AbsynUtil_traverseExpShallowFuncArgs(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg, ((modelica_fnptr) _inFunc));
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 16: {
{
modelica_metatype __omcQ_24tmpVar7;
modelica_metatype* tmp6;
modelica_metatype __omcQ_24tmpVar6;
int tmp7;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2)));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar7 = tmpMeta[2];
tmp6 = &__omcQ_24tmpVar7;
while(1) {
tmp7 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp7--;
}
if (tmp7 == 0) {
__omcQ_24tmpVar6 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _inArg);
*tmp6 = mmc_mk_cons(__omcQ_24tmpVar6,0);
tmp6 = &MMC_CDR(*tmp6);
} else if (tmp7 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp6 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar7;
}
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = tmpMeta[1];
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 17: {
{
modelica_metatype __omcQ_24tmpVar11;
modelica_metatype* tmp8;
modelica_metatype __omcQ_24tmpVar10;
int tmp11;
modelica_metatype _lst_loopVar = 0;
modelica_metatype _lst;
_lst_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2)));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar11 = tmpMeta[2];
tmp8 = &__omcQ_24tmpVar11;
while(1) {
tmp11 = 1;
if (!listEmpty(_lst_loopVar)) {
_lst = MMC_CAR(_lst_loopVar);
_lst_loopVar = MMC_CDR(_lst_loopVar);
tmp11--;
}
if (tmp11 == 0) {
{
modelica_metatype __omcQ_24tmpVar9;
modelica_metatype* tmp9;
modelica_metatype __omcQ_24tmpVar8;
int tmp10;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = _lst;
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar9 = tmpMeta[4];
tmp9 = &__omcQ_24tmpVar9;
while(1) {
tmp10 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp10--;
}
if (tmp10 == 0) {
__omcQ_24tmpVar8 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _inArg);
*tmp9 = mmc_mk_cons(__omcQ_24tmpVar8,0);
tmp9 = &MMC_CDR(*tmp9);
} else if (tmp10 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp9 = mmc_mk_nil();
tmpMeta[3] = __omcQ_24tmpVar9;
}
__omcQ_24tmpVar10 = tmpMeta[3];
*tmp8 = mmc_mk_cons(__omcQ_24tmpVar10,0);
tmp8 = &MMC_CDR(*tmp8);
} else if (tmp11 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp8 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar11;
}
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = tmpMeta[1];
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 18: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg);
_outExp = tmpMeta[0];
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[3] = omc_Util_applyOption1(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), ((modelica_fnptr) _inFunc), _inArg);
_outExp = tmpMeta[0];
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[4] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 4))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 4))), _inArg);
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 19: {
{
modelica_metatype __omcQ_24tmpVar13;
modelica_metatype* tmp12;
modelica_metatype __omcQ_24tmpVar12;
int tmp13;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2)));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar13 = tmpMeta[2];
tmp12 = &__omcQ_24tmpVar13;
while(1) {
tmp13 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp13--;
}
if (tmp13 == 0) {
__omcQ_24tmpVar12 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _inArg);
*tmp12 = mmc_mk_cons(__omcQ_24tmpVar12,0);
tmp12 = &MMC_CDR(*tmp12);
} else if (tmp13 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp12 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar13;
}
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = tmpMeta[1];
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 22: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg);
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 23: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg);
_outExp = tmpMeta[0];
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg);
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 25: {
{
modelica_metatype __omcQ_24tmpVar15;
modelica_metatype* tmp14;
modelica_metatype __omcQ_24tmpVar14;
int tmp15;
modelica_metatype _e_loopVar = 0;
modelica_metatype _e;
_e_loopVar = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2)));
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar15 = tmpMeta[2];
tmp14 = &__omcQ_24tmpVar15;
while(1) {
tmp15 = 1;
if (!listEmpty(_e_loopVar)) {
_e = MMC_CAR(_e_loopVar);
_e_loopVar = MMC_CDR(_e_loopVar);
tmp15--;
}
if (tmp15 == 0) {
__omcQ_24tmpVar14 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _inArg);
*tmp14 = mmc_mk_cons(__omcQ_24tmpVar14,0);
tmp14 = &MMC_CDR(*tmp14);
} else if (tmp15 == 1) {
break;
} else {
goto goto_1;
}
}
*tmp14 = mmc_mk_nil();
tmpMeta[1] = __omcQ_24tmpVar15;
}
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = tmpMeta[1];
_outExp = tmpMeta[0];
goto tmp2_done;
}
case 26: {
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 2))), _inArg);
_outExp = tmpMeta[0];
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outExp), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outExp), 3))), _inArg);
_outExp = tmpMeta[0];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefExplode(threadData_t *threadData, modelica_metatype _inCref, modelica_metatype _inAccum)
{
modelica_metatype _outCrefParts = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inCref;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
tmpMeta[2] = mmc_mk_cons(omc_AbsynUtil_crefFirstCref(threadData, _inCref), _inAccum);
tmpMeta[1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCref), 4)));
_inAccum = tmpMeta[2];
_inCref = tmpMeta[1];
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
_inCref = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCref), 2)));
goto _tailrecursive;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[1] = mmc_mk_cons(_inCref, _inAccum);
tmpMeta[0] = listReverse(tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCrefParts = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCrefParts;
}
DLLExport
modelica_metatype omc_AbsynUtil_makeSubscript(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outSubscript = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(4, &Absyn_Subscript_SUBSCRIPT__desc, _inExp);
_outSubscript = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubscript;
}
DLLExport
modelica_metatype omc_AbsynUtil_optMsg(threadData_t *threadData, modelica_boolean _inShowMessage, modelica_metatype _inInfo)
{
modelica_metatype _outMsg = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmp1 = (modelica_boolean)_inShowMessage;
if(tmp1)
{
tmpMeta[0] = mmc_mk_box2(3, &Absyn_Msg_MSG__desc, _inInfo);
tmpMeta[1] = tmpMeta[0];
}
else
{
tmpMeta[1] = _OMC_LIT6;
}
_outMsg = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _outMsg;
}
modelica_metatype boxptr_AbsynUtil_optMsg(threadData_t *threadData, modelica_metatype _inShowMessage, modelica_metatype _inInfo)
{
modelica_integer tmp1;
modelica_metatype _outMsg = NULL;
tmp1 = mmc_unbox_integer(_inShowMessage);
_outMsg = omc_AbsynUtil_optMsg(threadData, tmp1, _inInfo);
return _outMsg;
}
DLLExport
modelica_boolean omc_AbsynUtil_elementArgEqualName(threadData_t *threadData, modelica_metatype _inArg1, modelica_metatype _inArg2)
{
modelica_boolean _outEqual;
modelica_metatype _name1 = NULL;
modelica_metatype _name2 = NULL;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inArg1;
tmp4_2 = _inArg2;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,6) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_name1 = tmpMeta[0];
_name2 = tmpMeta[1];
tmp1 = omc_AbsynUtil_pathEqual(threadData, _name1, _name2);
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outEqual = tmp1;
_return: OMC_LABEL_UNUSED
return _outEqual;
}
modelica_metatype boxptr_AbsynUtil_elementArgEqualName(threadData_t *threadData, modelica_metatype _inArg1, modelica_metatype _inArg2)
{
modelica_boolean _outEqual;
modelica_metatype out_outEqual;
_outEqual = omc_AbsynUtil_elementArgEqualName(threadData, _inArg1, _inArg2);
out_outEqual = mmc_mk_icon(_outEqual);
return out_outEqual;
}
DLLExport
modelica_metatype omc_AbsynUtil_elementArgName(threadData_t *threadData, modelica_metatype _inArg)
{
modelica_metatype _outName = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inArg;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_outName = tmpMeta[1];
tmpMeta[0] = _outName;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_e = tmpMeta[1];
tmpMeta[0] = omc_AbsynUtil_makeIdentPathFromString(threadData, omc_AbsynUtil_elementSpecName(threadData, _e));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outName = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outName;
}
DLLExport
modelica_boolean omc_AbsynUtil_isEmptySubMod(threadData_t *threadData, modelica_metatype _inSubMod)
{
modelica_boolean _outIsEmpty;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inSubMod;
{
modelica_metatype _mod = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (!optionNone(tmpMeta[0])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (optionNone(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
_mod = tmpMeta[1];
tmp1 = omc_AbsynUtil_isEmptyMod(threadData, _mod);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsEmpty = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsEmpty;
}
modelica_metatype boxptr_AbsynUtil_isEmptySubMod(threadData_t *threadData, modelica_metatype _inSubMod)
{
modelica_boolean _outIsEmpty;
modelica_metatype out_outIsEmpty;
_outIsEmpty = omc_AbsynUtil_isEmptySubMod(threadData, _inSubMod);
out_outIsEmpty = mmc_mk_icon(_outIsEmpty);
return out_outIsEmpty;
}
DLLExport
modelica_boolean omc_AbsynUtil_isEmptyMod(threadData_t *threadData, modelica_metatype _inMod)
{
modelica_boolean _outIsEmpty;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inMod;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],16,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (!listEmpty(tmpMeta[3])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsEmpty = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsEmpty;
}
modelica_metatype boxptr_AbsynUtil_isEmptyMod(threadData_t *threadData, modelica_metatype _inMod)
{
modelica_boolean _outIsEmpty;
modelica_metatype out_outIsEmpty;
_outIsEmpty = omc_AbsynUtil_isEmptyMod(threadData, _inMod);
out_outIsEmpty = mmc_mk_icon(_outIsEmpty);
return out_outIsEmpty;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseClassDef(threadData_t *threadData, modelica_metatype _inClassDef, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue)
{
modelica_metatype _outClassDef = NULL;
modelica_metatype _outArg = NULL;
modelica_boolean _outContinue;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClassDef = _inClassDef;
_outArg = _inArg;
_outContinue = 1;
{
modelica_metatype tmp3_1;
tmp3_1 = _outClassDef;
{
modelica_metatype _parts = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
_parts = omc_AbsynUtil_traverseListGeneric(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outClassDef), 4))), ((modelica_fnptr) _inFunc), _inArg ,&_outArg ,&_outContinue);
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(7));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outClassDef), 7*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[4] = _parts;
_outClassDef = tmpMeta[0];
goto tmp2_done;
}
case 7: {
_parts = omc_AbsynUtil_traverseListGeneric(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outClassDef), 5))), ((modelica_fnptr) _inFunc), _inArg ,&_outArg ,&_outContinue);
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(7));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outClassDef), 7*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[5] = _parts;
_outClassDef = tmpMeta[0];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outClassDef;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseClassDef(threadData_t *threadData, modelica_metatype _inClassDef, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue)
{
modelica_boolean _outContinue;
modelica_metatype _outClassDef = NULL;
_outClassDef = omc_AbsynUtil_traverseClassDef(threadData, _inClassDef, _inFunc, _inArg, out_outArg, &_outContinue);
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outClassDef;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseElementSpecComponents(threadData_t *threadData, modelica_metatype _inSpec, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue)
{
modelica_metatype _outSpec = NULL;
modelica_metatype _outArg = NULL;
modelica_boolean _outContinue;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outSpec = _inSpec;
{
modelica_metatype tmp4_1;
tmp4_1 = _outSpec;
{
modelica_metatype _comps = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta[5] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outSpec), 4))), _inArg, &tmpMeta[3], &tmpMeta[4]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outSpec), 4))), _inArg, &tmpMeta[3], &tmpMeta[4]);
_comps = tmpMeta[5];
tmp6 = mmc_unbox_integer(tmpMeta[4]);
_outArg = tmpMeta[3];
_outContinue = tmp6;
if((!referenceEq(_comps, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outSpec), 4))))))
{
tmpMeta[3] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[3]), MMC_UNTAGPTR(_outSpec), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[3]))[4] = _comps;
_outSpec = tmpMeta[3];
}
tmpMeta[0+0] = _outSpec;
tmpMeta[0+1] = _outArg;
tmp1_c2 = _outContinue;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inSpec;
tmpMeta[0+1] = _inArg;
tmp1_c2 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outSpec = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_outContinue = tmp1_c2;
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseElementSpecComponents(threadData_t *threadData, modelica_metatype _inSpec, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue)
{
modelica_boolean _outContinue;
modelica_metatype _outSpec = NULL;
_outSpec = omc_AbsynUtil_traverseElementSpecComponents(threadData, _inSpec, _inFunc, _inArg, out_outArg, &_outContinue);
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outSpec;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseElementComponents(threadData_t *threadData, modelica_metatype _inElement, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue)
{
modelica_metatype _outElement = NULL;
modelica_metatype _outArg = NULL;
modelica_boolean _outContinue;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outElement = _inElement;
{
modelica_metatype tmp4_1;
tmp4_1 = _outElement;
{
modelica_metatype _spec = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
_spec = omc_AbsynUtil_traverseElementSpecComponents(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outElement), 5))), ((modelica_fnptr) _inFunc), _inArg ,&_outArg ,&_outContinue);
if((!referenceEq(_spec, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outElement), 5))))))
{
tmpMeta[3] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[3]), MMC_UNTAGPTR(_outElement), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[3]))[5] = _spec;
_outElement = tmpMeta[3];
}
tmpMeta[0+0] = _outElement;
tmpMeta[0+1] = _outArg;
tmp1_c2 = _outContinue;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inElement;
tmpMeta[0+1] = _inArg;
tmp1_c2 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outElement = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_outContinue = tmp1_c2;
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseElementComponents(threadData_t *threadData, modelica_metatype _inElement, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue)
{
modelica_boolean _outContinue;
modelica_metatype _outElement = NULL;
_outElement = omc_AbsynUtil_traverseElementComponents(threadData, _inElement, _inFunc, _inArg, out_outArg, &_outContinue);
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outElement;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseElementItemComponents(threadData_t *threadData, modelica_metatype _inItem, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue)
{
modelica_metatype _outItem = NULL;
modelica_metatype _outArg = NULL;
modelica_boolean _outContinue;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inItem;
{
modelica_metatype _elem = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
_elem = omc_AbsynUtil_traverseElementComponents(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inItem), 2))), ((modelica_fnptr) _inFunc), _inArg ,&_outArg ,&_outContinue);
tmp6 = (modelica_boolean)referenceEq(_elem, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inItem), 2))));
if(tmp6)
{
tmpMeta[4] = _inItem;
}
else
{
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, _elem);
tmpMeta[4] = tmpMeta[3];
}
_outItem = tmpMeta[4];
tmpMeta[0+0] = _outItem;
tmpMeta[0+1] = _outArg;
tmp1_c2 = _outContinue;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inItem;
tmpMeta[0+1] = _inArg;
tmp1_c2 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outItem = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_outContinue = tmp1_c2;
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outItem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseElementItemComponents(threadData_t *threadData, modelica_metatype _inItem, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue)
{
modelica_boolean _outContinue;
modelica_metatype _outItem = NULL;
_outItem = omc_AbsynUtil_traverseElementItemComponents(threadData, _inItem, _inFunc, _inArg, out_outArg, &_outContinue);
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outItem;
}
static modelica_metatype closure3_AbsynUtil_traverseElementItemComponents(threadData_t *thData, modelica_metatype closure, modelica_metatype inItem, modelica_metatype inArg, modelica_metatype tmp4, modelica_metatype tmp5)
{
modelica_fnptr inFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_traverseElementItemComponents(thData, inItem, inFunc, inArg, tmp4, tmp5);
}static modelica_metatype closure4_AbsynUtil_traverseElementItemComponents(threadData_t *thData, modelica_metatype closure, modelica_metatype inItem, modelica_metatype inArg, modelica_metatype tmp6, modelica_metatype tmp7)
{
modelica_fnptr inFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_traverseElementItemComponents(thData, inItem, inFunc, inArg, tmp6, tmp7);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseClassPartComponents(threadData_t *threadData, modelica_metatype _inClassPart, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue)
{
modelica_metatype _outClassPart = NULL;
modelica_metatype _outArg = NULL;
modelica_boolean _outContinue;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClassPart = _inClassPart;
_outArg = _inArg;
_outContinue = 1;
{
modelica_metatype tmp3_1;
tmp3_1 = _outClassPart;
{
modelica_metatype _items = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
tmpMeta[0] = mmc_mk_box1(0, ((modelica_fnptr) _inFunc));
_items = omc_AbsynUtil_traverseListGeneric(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outClassPart), 2))), (modelica_fnptr) mmc_mk_box2(0,closure3_AbsynUtil_traverseElementItemComponents,tmpMeta[0]), _inArg ,&_outArg ,&_outContinue);
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outClassPart), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = _items;
_outClassPart = tmpMeta[0];
goto tmp2_done;
}
case 4: {
tmpMeta[0] = mmc_mk_box1(0, ((modelica_fnptr) _inFunc));
_items = omc_AbsynUtil_traverseListGeneric(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outClassPart), 2))), (modelica_fnptr) mmc_mk_box2(0,closure4_AbsynUtil_traverseElementItemComponents,tmpMeta[0]), _inArg ,&_outArg ,&_outContinue);
tmpMeta[0] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[0]), MMC_UNTAGPTR(_outClassPart), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[0]))[2] = _items;
_outClassPart = tmpMeta[0];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outClassPart;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseClassPartComponents(threadData_t *threadData, modelica_metatype _inClassPart, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue)
{
modelica_boolean _outContinue;
modelica_metatype _outClassPart = NULL;
_outClassPart = omc_AbsynUtil_traverseClassPartComponents(threadData, _inClassPart, _inFunc, _inArg, out_outArg, &_outContinue);
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outClassPart;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseListGeneric(threadData_t *threadData, modelica_metatype _inList, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_boolean *out_outContinue)
{
modelica_metatype _outList = NULL;
modelica_metatype _outArg = NULL;
modelica_boolean _outContinue;
modelica_boolean _eq;
modelica_boolean _changed;
modelica_metatype _e = NULL;
modelica_metatype _new_e = NULL;
modelica_metatype _rest_e = NULL;
modelica_integer tmp1;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outList = tmpMeta[0];
_outArg = _inArg;
_outContinue = 1;
_changed = 0;
_rest_e = _inList;
while(1)
{
if(!(!listEmpty(_rest_e))) break;
tmpMeta[1] = _rest_e;
if (listEmpty(tmpMeta[1])) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_CAR(tmpMeta[1]);
tmpMeta[3] = MMC_CDR(tmpMeta[1]);
_e = tmpMeta[2];
_rest_e = tmpMeta[3];
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 2))), _e, _outArg, &tmpMeta[1], &tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inFunc), 1)))) (threadData, _e, _outArg, &tmpMeta[1], &tmpMeta[2]);
_new_e = tmpMeta[3];
tmp1 = mmc_unbox_integer(tmpMeta[2]);
_outArg = tmpMeta[1];
_outContinue = tmp1;
_eq = referenceEq(_new_e, _e);
tmpMeta[1] = mmc_mk_cons((_eq?_e:_new_e), _outList);
_outList = tmpMeta[1];
_changed = (_changed || (!_eq));
if((!_outContinue))
{
break;
}
}
if(_changed)
{
_outList = omc_List_append__reverse(threadData, _outList, _rest_e);
}
else
{
_outList = _inList;
}
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
if (out_outContinue) { *out_outContinue = _outContinue; }
return _outList;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_traverseListGeneric(threadData_t *threadData, modelica_metatype _inList, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg, modelica_metatype *out_outContinue)
{
modelica_boolean _outContinue;
modelica_metatype _outList = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
_outList = omc_AbsynUtil_traverseListGeneric(threadData, _inList, _inFunc, _inArg, out_outArg, &_outContinue);
if (out_outContinue) { *out_outContinue = mmc_mk_icon(_outContinue); }
return _outList;
}
static modelica_metatype closure5_AbsynUtil_traverseClassPartComponents(threadData_t *thData, modelica_metatype closure, modelica_metatype inClassPart, modelica_metatype inArg, modelica_metatype tmp5, modelica_metatype tmp6)
{
modelica_fnptr inFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_traverseClassPartComponents(thData, inClassPart, inFunc, inArg, tmp5, tmp6);
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseClassComponents(threadData_t *threadData, modelica_metatype _inClass, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outClass = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
{
modelica_metatype tmp3_1;
tmp3_1 = _outClass;
{
modelica_metatype _body = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = mmc_mk_box1(0, ((modelica_fnptr) _inFunc));
_body = omc_AbsynUtil_traverseClassDef(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outClass), 7))), (modelica_fnptr) mmc_mk_box2(0,closure5_AbsynUtil_traverseClassPartComponents,tmpMeta[1]), _inArg ,&_outArg, NULL);
if((!referenceEq(_body, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outClass), 7))))))
{
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(9));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outClass), 9*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[7] = _body;
_outClass = tmpMeta[1];
}
tmpMeta[0] = _outClass;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outClass;
}
DLLExport
modelica_metatype omc_AbsynUtil_getElementItemsInClassPart(threadData_t *threadData, modelica_metatype _inClassPart)
{
modelica_metatype _outElements = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClassPart;
{
modelica_metatype _elts = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_elts = tmpMeta[1];
tmpMeta[0] = _elts;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_elts = tmpMeta[1];
tmpMeta[0] = _elts;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElements = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElements;
}
DLLExport
modelica_metatype omc_AbsynUtil_getElementItemsInClass(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_metatype _outElements = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _parts = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_parts = tmpMeta[2];
tmpMeta[0] = omc_List_mapFlat(threadData, _parts, boxvar_AbsynUtil_getElementItemsInClassPart);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_parts = tmpMeta[2];
tmpMeta[0] = omc_List_mapFlat(threadData, _parts, boxvar_AbsynUtil_getElementItemsInClassPart);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outElements = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElements;
}
DLLExport
modelica_metatype omc_AbsynUtil_getDefineUnitsInElements(threadData_t *threadData, modelica_metatype _elts)
{
modelica_metatype _outElts = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _elts;
{
modelica_metatype _e = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 2;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,3) == 0) goto tmp2_end;
_e = tmpMeta[3];
_rest = tmpMeta[2];
_outElts = omc_AbsynUtil_getDefineUnitsInElements(threadData, _rest);
tmpMeta[1] = mmc_mk_cons(_e, _outElts);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_rest = tmpMeta[2];
tmpMeta[0] = omc_AbsynUtil_getDefineUnitsInElements(threadData, _rest);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outElts = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outElts;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_dummyTraverseExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outArg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _inExp;
_outArg = _inArg;
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExp;
}
DLLExport
modelica_boolean omc_AbsynUtil_opIsElementWise(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _isElementWise;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _op;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 10: {
tmp1 = 1;
goto tmp3_done;
}
case 11: {
tmp1 = 1;
goto tmp3_done;
}
case 12: {
tmp1 = 1;
goto tmp3_done;
}
case 13: {
tmp1 = 1;
goto tmp3_done;
}
case 14: {
tmp1 = 1;
goto tmp3_done;
}
case 15: {
tmp1 = 1;
goto tmp3_done;
}
case 16: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isElementWise = tmp1;
_return: OMC_LABEL_UNUSED
return _isElementWise;
}
modelica_metatype boxptr_AbsynUtil_opIsElementWise(threadData_t *threadData, modelica_metatype _op)
{
modelica_boolean _isElementWise;
modelica_metatype out_isElementWise;
_isElementWise = omc_AbsynUtil_opIsElementWise(threadData, _op);
out_isElementWise = mmc_mk_icon(_isElementWise);
return out_isElementWise;
}
DLLExport
modelica_boolean omc_AbsynUtil_opEqual(threadData_t *threadData, modelica_metatype _op1, modelica_metatype _op2)
{
modelica_boolean _isEqual;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_isEqual = valueEq(_op1, _op2);
_return: OMC_LABEL_UNUSED
return _isEqual;
}
modelica_metatype boxptr_AbsynUtil_opEqual(threadData_t *threadData, modelica_metatype _op1, modelica_metatype _op2)
{
modelica_boolean _isEqual;
modelica_metatype out_isEqual;
_isEqual = omc_AbsynUtil_opEqual(threadData, _op1, _op2);
out_isEqual = mmc_mk_icon(_isEqual);
return out_isEqual;
}
DLLExport
modelica_metatype omc_AbsynUtil_mapCrefParts(threadData_t *threadData, modelica_metatype _inCref, modelica_fnptr _inMapFunc)
{
modelica_metatype _outCref = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inCref;
{
modelica_string _name = NULL;
modelica_metatype _subs = NULL;
modelica_metatype _rest_cref = NULL;
modelica_metatype _cref = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_name = tmpMeta[1];
_subs = tmpMeta[2];
_rest_cref = tmpMeta[3];
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _name, _subs);
_cref = tmpMeta[1];
tmpMeta[1] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inMapFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inMapFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inMapFunc), 2))), _cref) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inMapFunc), 1)))) (threadData, _cref);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_name = tmpMeta[2];
_subs = tmpMeta[3];
_rest_cref = omc_AbsynUtil_mapCrefParts(threadData, _rest_cref, ((modelica_fnptr) _inMapFunc));
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _name, _subs, _rest_cref);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cref = tmpMeta[1];
_cref = omc_AbsynUtil_mapCrefParts(threadData, _cref, ((modelica_fnptr) _inMapFunc));
tmpMeta[1] = mmc_mk_box2(3, &Absyn_ComponentRef_CREF__FULLYQUALIFIED__desc, _cref);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inMapFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inMapFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inMapFunc), 2))), _inCref) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inMapFunc), 1)))) (threadData, _inCref);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCref;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_getNamedAnnotationStr(threadData_t *threadData, modelica_metatype _inAbsynElementArgLst, modelica_metatype _id, modelica_fnptr _f)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta[10] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inAbsynElementArgLst;
tmp3_2 = _id;
{
modelica_metatype _str = NULL;
modelica_metatype _mod = NULL;
modelica_metatype _xs = NULL;
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmp3_1);
tmpMeta[3] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,1) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 5));
_id2 = tmpMeta[1];
_id1 = tmpMeta[5];
_mod = tmpMeta[6];
tmp3 += 1;
tmp5 = (stringEqual(_id1, _id2));
if (1 != tmp5) goto goto_1;
_str = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_f), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_f), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_f), 2))), _mod) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_f), 1)))) (threadData, _mod);
tmpMeta[0] = mmc_mk_some(_str);
goto tmp2_done;
}
case 1: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_1);
tmpMeta[4] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,6) == 0) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],1,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 5));
if (optionNone(tmpMeta[7])) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 1));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[8]), 2));
_id2 = tmpMeta[1];
_rest = tmpMeta[2];
_id1 = tmpMeta[6];
_xs = tmpMeta[9];
tmp6 = (stringEqual(_id1, _id2));
if (1 != tmp6) goto goto_1;
tmpMeta[0] = omc_AbsynUtil_getNamedAnnotationStr(threadData, _xs, _rest, ((modelica_fnptr) _f));
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_xs = tmpMeta[2];
tmpMeta[0] = omc_AbsynUtil_getNamedAnnotationStr(threadData, _xs, _id, ((modelica_fnptr) _f));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outString = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_AbsynUtil_getNamedAnnotationInClass(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _id, modelica_fnptr _f)
{
modelica_metatype _outString = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _str = NULL;
modelica_metatype _res = NULL;
modelica_metatype _annlst = NULL;
modelica_metatype _ann = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
_ann = tmpMeta[2];
tmp3 += 4;
_annlst = omc_List_flatten(threadData, omc_List_map(threadData, _ann, boxvar_AbsynUtil_annotationToElementArgs));
tmpMeta[1] = omc_AbsynUtil_getNamedAnnotationStr(threadData, _annlst, _id, ((modelica_fnptr) _f));
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_str = tmpMeta[2];
tmpMeta[0] = mmc_mk_some(_str);
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 6));
_ann = tmpMeta[2];
tmp3 += 3;
_annlst = omc_List_flatten(threadData, omc_List_map(threadData, _ann, boxvar_AbsynUtil_annotationToElementArgs));
tmpMeta[1] = omc_AbsynUtil_getNamedAnnotationStr(threadData, _annlst, _id, ((modelica_fnptr) _f));
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_str = tmpMeta[2];
tmpMeta[0] = mmc_mk_some(_str);
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,4) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 5));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_annlst = tmpMeta[6];
tmp3 += 2;
tmpMeta[1] = omc_AbsynUtil_getNamedAnnotationStr(threadData, _annlst, _id, ((modelica_fnptr) _f));
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_res = tmpMeta[2];
tmpMeta[0] = mmc_mk_some(_res);
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_annlst = tmpMeta[6];
tmp3 += 1;
tmpMeta[1] = omc_AbsynUtil_getNamedAnnotationStr(threadData, _annlst, _id, ((modelica_fnptr) _f));
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_res = tmpMeta[2];
tmpMeta[0] = mmc_mk_some(_res);
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_annlst = tmpMeta[6];
tmpMeta[1] = omc_AbsynUtil_getNamedAnnotationStr(threadData, _annlst, _id, ((modelica_fnptr) _f));
if (optionNone(tmpMeta[1])) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_res = tmpMeta[2];
tmpMeta[0] = mmc_mk_some(_res);
goto tmp2_done;
}
case 5: {
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 6) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outString = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_AbsynUtil_removeCrefFromCrefs(threadData_t *threadData, modelica_metatype _inAbsynComponentRefLst, modelica_metatype _inComponentRef)
{
modelica_metatype _outAbsynComponentRefLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inAbsynComponentRefLst;
tmp3_2 = _inComponentRef;
{
modelica_string _n1 = NULL;
modelica_string _n2 = NULL;
modelica_metatype _rest_1 = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmp3 += 3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_cr1 = tmpMeta[1];
_rest = tmpMeta[2];
_cr2 = tmp3_2;
tmpMeta[1] = _cr1;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (!listEmpty(tmpMeta[3])) goto goto_1;
_n1 = tmpMeta[2];
tmpMeta[1] = _cr2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (!listEmpty(tmpMeta[3])) goto goto_1;
_n2 = tmpMeta[2];
tmp5 = (stringEqual(_n1, _n2));
if (1 != tmp5) goto goto_1;
tmpMeta[0] = omc_AbsynUtil_removeCrefFromCrefs(threadData, _rest, _cr2);
goto tmp2_done;
}
case 2: {
modelica_boolean tmp6;
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_cr1 = tmpMeta[1];
_rest = tmpMeta[2];
_cr2 = tmp3_2;
tmpMeta[1] = _cr1;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,3) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_n1 = tmpMeta[2];
tmpMeta[1] = _cr2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,2) == 0) goto goto_1;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_n2 = tmpMeta[2];
tmp6 = (stringEqual(_n1, _n2));
if (1 != tmp6) goto goto_1;
tmpMeta[0] = omc_AbsynUtil_removeCrefFromCrefs(threadData, _rest, _cr2);
goto tmp2_done;
}
case 3: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_cr1 = tmpMeta[1];
_rest = tmpMeta[2];
_cr2 = tmp3_2;
_rest_1 = omc_AbsynUtil_removeCrefFromCrefs(threadData, _rest, _cr2);
tmpMeta[1] = mmc_mk_cons(_cr1, _rest_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outAbsynComponentRefLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAbsynComponentRefLst;
}
DLLExport
modelica_metatype omc_AbsynUtil_getArrayDimOptAsList(threadData_t *threadData, modelica_metatype _inArrayDim)
{
modelica_metatype _outArrayDim = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inArrayDim;
{
modelica_metatype _ad = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
_ad = tmpMeta[1];
tmpMeta[0] = _ad;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outArrayDim = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outArrayDim;
}
DLLExport
modelica_string omc_AbsynUtil_refStringBrief(threadData_t *threadData, modelica_metatype _inRef)
{
modelica_string _outStr = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inRef;
{
modelica_metatype _cr = NULL;
modelica_metatype _ts = NULL;
modelica_metatype _im = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[0];
tmp1 = omc_AbsynUtil_crefStringIgnoreSubs(threadData, _cr);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_ts = tmpMeta[0];
tmp1 = omc_AbsynUtil_typeSpecStringNoQualNoDims(threadData, _ts);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_im = tmpMeta[0];
tmp1 = omc_AbsynUtil_importString(threadData, _im);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outStr = tmp1;
_return: OMC_LABEL_UNUSED
return _outStr;
}
DLLExport
modelica_string omc_AbsynUtil_refString(threadData_t *threadData, modelica_metatype _inRef)
{
modelica_string _outStr = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inRef;
{
modelica_metatype _cr = NULL;
modelica_metatype _ts = NULL;
modelica_metatype _im = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[0];
tmp1 = omc_AbsynUtil_crefString(threadData, _cr);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_ts = tmpMeta[0];
tmp1 = omc_AbsynUtil_typeSpecString(threadData, _ts);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_im = tmpMeta[0];
tmp1 = omc_AbsynUtil_importString(threadData, _im);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outStr = tmp1;
_return: OMC_LABEL_UNUSED
return _outStr;
}
DLLExport
modelica_string omc_AbsynUtil_importString(threadData_t *threadData, modelica_metatype _inImp)
{
modelica_string _outStr = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outStr = omc_Dump_unparseImportStr(threadData, _inImp);
_return: OMC_LABEL_UNUSED
return _outStr;
}
DLLExport
modelica_string omc_AbsynUtil_crefStringIgnoreSubs(threadData_t *threadData, modelica_metatype _inCr)
{
modelica_string _outStr = NULL;
modelica_metatype _p = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_p = omc_AbsynUtil_crefToPathIgnoreSubs(threadData, _inCr);
_outStr = omc_AbsynUtil_pathString(threadData, omc_AbsynUtil_makeNotFullyQualified(threadData, _p), _OMC_LIT2, 1, 0);
_return: OMC_LABEL_UNUSED
return _outStr;
}
DLLExport
modelica_string omc_AbsynUtil_typeSpecStringNoQualNoDimsLst(threadData_t *threadData, modelica_metatype _inTypeSpecLst)
{
modelica_string _outString = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outString = omc_List_toString(threadData, _inTypeSpecLst, boxvar_AbsynUtil_typeSpecStringNoQualNoDims, _OMC_LIT7, _OMC_LIT7, _OMC_LIT8, _OMC_LIT7, 0);
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_AbsynUtil_typeSpecStringNoQualNoDims(threadData_t *threadData, modelica_metatype _inTs)
{
modelica_string _outStr = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inTs;
{
modelica_string _str1 = NULL;
modelica_string _str2 = NULL;
modelica_metatype _path = NULL;
modelica_metatype _typeSpecLst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
tmp1 = omc_AbsynUtil_pathString(threadData, omc_AbsynUtil_makeNotFullyQualified(threadData, _path), _OMC_LIT2, 1, 0);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_path = tmpMeta[0];
_typeSpecLst = tmpMeta[1];
_str1 = omc_AbsynUtil_pathString(threadData, omc_AbsynUtil_makeNotFullyQualified(threadData, _path), _OMC_LIT2, 1, 0);
_str2 = omc_AbsynUtil_typeSpecStringNoQualNoDimsLst(threadData, _typeSpecLst);
tmpMeta[0] = mmc_mk_cons(_str1, mmc_mk_cons(_OMC_LIT9, mmc_mk_cons(_str2, mmc_mk_cons(_OMC_LIT10, MMC_REFSTRUCTLIT(mmc_nil)))));
tmp1 = stringAppendList(tmpMeta[0]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outStr = tmp1;
_return: OMC_LABEL_UNUSED
return _outStr;
}
DLLExport
modelica_string omc_AbsynUtil_crefString(threadData_t *threadData, modelica_metatype _inCr)
{
modelica_string _outStr = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outStr = omc_Dump_printComponentRefStr(threadData, _inCr);
_return: OMC_LABEL_UNUSED
return _outStr;
}
DLLExport
modelica_string omc_AbsynUtil_typeSpecString(threadData_t *threadData, modelica_metatype _inTs)
{
modelica_string _outStr = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outStr = omc_Dump_unparseTypeSpec(threadData, _inTs);
_return: OMC_LABEL_UNUSED
return _outStr;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathToTypeSpec(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outTypeSpec = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box3(3, &Absyn_TypeSpec_TPATH__desc, _inPath, mmc_mk_none());
_outTypeSpec = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTypeSpec;
}
DLLExport
modelica_metatype omc_AbsynUtil_annotationToElementArgs(threadData_t *threadData, modelica_metatype _ann)
{
modelica_metatype _args = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _ann;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_args = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _args;
}
static modelica_metatype closure6_AbsynUtil_isModificationOfPath(threadData_t *thData, modelica_metatype closure, modelica_metatype mod)
{
modelica_metatype path = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_isModificationOfPath(thData, mod, path);
}
DLLExport
modelica_metatype omc_AbsynUtil_subModsInSameOrder(threadData_t *threadData, modelica_metatype _oldmod, modelica_metatype _newmod)
{
modelica_metatype _mod = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _oldmod;
tmp3_2 = _newmod;
{
modelica_metatype _args1 = NULL;
modelica_metatype _args2 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _arg2 = NULL;
modelica_metatype _eq2 = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
if (!optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[0] = _newmod;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (!optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[0] = _newmod;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,6) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,6) == 0) goto tmp2_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 5));
if (optionNone(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 1));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 3));
_args1 = tmpMeta[3];
_arg2 = tmp3_2;
_args2 = tmpMeta[6];
_eq2 = tmpMeta[7];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_res = tmpMeta[1];
{
modelica_metatype _arg1;
for (tmpMeta[1] = _args1; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_arg1 = MMC_CAR(tmpMeta[1]);
tmpMeta[2] = _arg1;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,6) == 0) goto goto_1;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 4));
_p = tmpMeta[3];
tmpMeta[2] = mmc_mk_box1(0, _p);
if(omc_List_exist(threadData, _args2, (modelica_fnptr) mmc_mk_box2(0,closure6_AbsynUtil_isModificationOfPath,tmpMeta[2])))
{
tmpMeta[3] = mmc_mk_cons(_arg1, _res);
_res = tmpMeta[3];
}
}
}
_res = listReverse(_res);
_res = omc_AbsynUtil_mergeAnnotations2(threadData, _res, _args2);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Modification_CLASSMOD__desc, _res, _eq2);
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(8));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_arg2), 8*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[5] = mmc_mk_some(tmpMeta[2]);
_arg2 = tmpMeta[1];
tmpMeta[0] = _arg2;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_mod = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _mod;
}
DLLExport
modelica_boolean omc_AbsynUtil_isModificationOfPath(threadData_t *threadData, modelica_metatype _mod, modelica_metatype _path)
{
modelica_boolean _yes;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _mod;
tmp4_2 = _path;
{
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_id2 = tmpMeta[0];
_id1 = tmpMeta[2];
tmp1 = (stringEqual(_id1, _id2));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_yes = tmp1;
_return: OMC_LABEL_UNUSED
return _yes;
}
modelica_metatype boxptr_AbsynUtil_isModificationOfPath(threadData_t *threadData, modelica_metatype _mod, modelica_metatype _path)
{
modelica_boolean _yes;
modelica_metatype out_yes;
_yes = omc_AbsynUtil_isModificationOfPath(threadData, _mod, _path);
out_yes = mmc_mk_icon(_yes);
return out_yes;
}
DLLExport
modelica_metatype omc_AbsynUtil_mergeCommentAnnotation(threadData_t *threadData, modelica_metatype _inAnnotation, modelica_metatype _inComment)
{
modelica_metatype _outComment = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComment;
{
modelica_metatype _ann = NULL;
modelica_metatype _cmt = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(_inAnnotation), mmc_mk_none());
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (!optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_cmt = tmpMeta[3];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(_inAnnotation), _cmt);
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
case 2: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
_ann = tmpMeta[3];
_cmt = tmpMeta[4];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Comment_COMMENT__desc, mmc_mk_some(omc_AbsynUtil_mergeAnnotations(threadData, _ann, _inAnnotation)), _cmt);
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComment = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComment;
}
static modelica_metatype closure7_AbsynUtil_isModificationOfPath(threadData_t *thData, modelica_metatype closure, modelica_metatype mod)
{
modelica_metatype path = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_isModificationOfPath(thData, mod, path);
}static modelica_metatype closure8_AbsynUtil_isModificationOfPath(threadData_t *thData, modelica_metatype closure, modelica_metatype mod)
{
modelica_metatype path = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_isModificationOfPath(thData, mod, path);
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_mergeAnnotations2(threadData_t *threadData, modelica_metatype _oldmods, modelica_metatype _newmods)
{
modelica_metatype _res = NULL;
modelica_metatype _mods = NULL;
modelica_boolean _b;
modelica_metatype _p = NULL;
modelica_metatype _mod1 = NULL;
modelica_metatype _mod2 = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = listReverse(_oldmods);
{
modelica_metatype _mod;
for (tmpMeta[0] = _newmods; !listEmpty(tmpMeta[0]); tmpMeta[0]=MMC_CDR(tmpMeta[0]))
{
_mod = MMC_CAR(tmpMeta[0]);
tmpMeta[1] = _mod;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,6) == 0) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_p = tmpMeta[2];
{
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmpMeta[1] = mmc_mk_box1(0, _p);
_mod2 = omc_List_find(threadData, _res, (modelica_fnptr) mmc_mk_box2(0,closure7_AbsynUtil_isModificationOfPath,tmpMeta[1]));
_mod1 = omc_AbsynUtil_subModsInSameOrder(threadData, _mod2, _mod);
tmpMeta[1] = mmc_mk_box1(0, _p);
tmpMeta[2] = omc_List_replaceOnTrue(threadData, _mod1, _res, (modelica_fnptr) mmc_mk_box2(0,closure8_AbsynUtil_isModificationOfPath,tmpMeta[1]), &tmp5);
_res = tmpMeta[2];
if (1 != tmp5) goto goto_1;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = mmc_mk_cons(_mod, _res);
_res = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
;
}
}
_res = listReverse(_res);
_return: OMC_LABEL_UNUSED
return _res;
}
DLLExport
modelica_metatype omc_AbsynUtil_mergeAnnotations(threadData_t *threadData, modelica_metatype _inAnnotation1, modelica_metatype _inAnnotation2)
{
modelica_metatype _outAnnotation = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inAnnotation1;
tmp3_2 = _inAnnotation2;
{
modelica_metatype _oldmods = NULL;
modelica_metatype _newmods = NULL;
modelica_metatype _a = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
_a = tmp3_2;
tmpMeta[0] = _a;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
_oldmods = tmpMeta[1];
_newmods = tmpMeta[2];
tmpMeta[1] = mmc_mk_box2(3, &Absyn_Annotation_ANNOTATION__desc, omc_AbsynUtil_mergeAnnotations2(threadData, _oldmods, _newmods));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outAnnotation = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outAnnotation;
}
DLLExport
modelica_string omc_AbsynUtil_importName(threadData_t *threadData, modelica_metatype _inImport)
{
modelica_string _outName = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inImport;
{
modelica_string _name = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta[0];
tmp1 = _name;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
tmp1 = omc_AbsynUtil_pathLastIdent(threadData, _path);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outName = tmp1;
_return: OMC_LABEL_UNUSED
return _outName;
}
DLLExport
modelica_metatype omc_AbsynUtil_importPath(threadData_t *threadData, modelica_metatype _inImport)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inImport;
{
modelica_metatype _path = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_path = tmpMeta[1];
tmpMeta[0] = _path;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
tmpMeta[0] = _path;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
tmpMeta[0] = _path;
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
tmpMeta[0] = _path;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_boolean omc_AbsynUtil_isInitial(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasReinit;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (7 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT11), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (7 != MMC_STRLEN(tmpMeta[2]) || strcmp(MMC_STRINGDATA(_OMC_LIT11), MMC_STRINGDATA(tmpMeta[2])) != 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_hasReinit = tmp1;
_return: OMC_LABEL_UNUSED
return _hasReinit;
}
modelica_metatype boxptr_AbsynUtil_isInitial(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasReinit;
modelica_metatype out_hasReinit;
_hasReinit = omc_AbsynUtil_isInitial(threadData, _inExp);
out_hasReinit = mmc_mk_icon(_hasReinit);
return out_hasReinit;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_isInitialTraverseHelper(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _inBool, modelica_boolean *out_outBool)
{
modelica_metatype _outExp = NULL;
modelica_boolean _outBool;
modelica_boolean tmp1_c1 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _e = NULL;
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],16,0) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmp1_c1 = _inBool;
goto tmp3_done;
}
case 1: {
_e = tmp4_1;
_b = omc_AbsynUtil_isInitial(threadData, _e);
tmpMeta[0+0] = _e;
tmp1_c1 = _b;
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _inExp;
tmp1_c1 = _inBool;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outBool = tmp1_c1;
_return: OMC_LABEL_UNUSED
if (out_outBool) { *out_outBool = _outBool; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_isInitialTraverseHelper(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inBool, modelica_metatype *out_outBool)
{
modelica_integer tmp1;
modelica_boolean _outBool;
modelica_metatype _outExp = NULL;
tmp1 = mmc_unbox_integer(_inBool);
_outExp = omc_AbsynUtil_isInitialTraverseHelper(threadData, _inExp, tmp1, &_outBool);
if (out_outBool) { *out_outBool = mmc_mk_icon(_outBool); }
return _outExp;
}
DLLExport
modelica_boolean omc_AbsynUtil_expContainsInitial(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasInitial;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_boolean _b;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
omc_AbsynUtil_traverseExp(threadData, _inExp, boxvar_AbsynUtil_isInitialTraverseHelper, mmc_mk_boolean(0), &tmpMeta[0]);
tmp6 = mmc_unbox_integer(tmpMeta[0]);
_b = tmp6;
tmp1 = _b;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_hasInitial = tmp1;
_return: OMC_LABEL_UNUSED
return _hasInitial;
}
modelica_metatype boxptr_AbsynUtil_expContainsInitial(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _hasInitial;
modelica_metatype out_hasInitial;
_hasInitial = omc_AbsynUtil_expContainsInitial(threadData, _inExp);
out_hasInitial = mmc_mk_icon(_hasInitial);
return out_hasInitial;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathSetLastIdent(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inLastIdent)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_metatype _p = NULL;
modelica_string _n = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
tmpMeta[0] = _inLastIdent;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_n = tmpMeta[1];
_p = tmpMeta[2];
_p = omc_AbsynUtil_pathSetLastIdent(threadData, _p, _inLastIdent);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _n, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_p = omc_AbsynUtil_pathSetLastIdent(threadData, _p, _inLastIdent);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Path_FULLYQUALIFIED__desc, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_string omc_AbsynUtil_componentName(threadData_t *threadData, modelica_metatype _c)
{
modelica_string _name = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _c;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_name = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _name;
}
DLLExport
modelica_metatype omc_AbsynUtil_makeClassElement(threadData_t *threadData, modelica_metatype _cl)
{
modelica_metatype _el = NULL;
modelica_metatype _info = NULL;
modelica_boolean _fp;
modelica_integer tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _cl;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
tmp1 = mmc_unbox_integer(tmpMeta[1]);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 8));
_fp = tmp1;
_info = tmpMeta[2];
tmpMeta[0] = mmc_mk_box3(3, &Absyn_ElementSpec_CLASSDEF__desc, mmc_mk_boolean(0), _cl);
tmpMeta[1] = mmc_mk_box7(3, &Absyn_Element_ELEMENT__desc, mmc_mk_boolean(_fp), mmc_mk_none(), _OMC_LIT12, tmpMeta[0], _info, mmc_mk_none());
tmpMeta[2] = mmc_mk_box2(3, &Absyn_ElementItem_ELEMENTITEM__desc, tmpMeta[1]);
_el = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _el;
}
DLLExport
modelica_boolean omc_AbsynUtil_isParts(threadData_t *threadData, modelica_metatype _cl)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _cl;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,5) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_isParts(threadData_t *threadData, modelica_metatype _cl)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_isParts(threadData, _cl);
out_b = mmc_mk_icon(_b);
return out_b;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_isExternalPart(threadData_t *threadData, modelica_metatype _inClassPart)
{
modelica_boolean _outFound;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClassPart;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outFound = tmp1;
_return: OMC_LABEL_UNUSED
return _outFound;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_isExternalPart(threadData_t *threadData, modelica_metatype _inClassPart)
{
modelica_boolean _outFound;
modelica_metatype out_outFound;
_outFound = omc_AbsynUtil_isExternalPart(threadData, _inClassPart);
out_outFound = mmc_mk_icon(_outFound);
return out_outFound;
}
DLLExport
modelica_metatype omc_AbsynUtil_getExternalDecl(threadData_t *threadData, modelica_metatype _inCls)
{
modelica_metatype _outExternal = NULL;
modelica_metatype _cp = NULL;
modelica_metatype _class_parts = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inCls;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 4));
_class_parts = tmpMeta[2];
_outExternal = omc_List_find(threadData, _class_parts, boxvar_AbsynUtil_isExternalPart);
_return: OMC_LABEL_UNUSED
return _outExternal;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_filterNestedClassesParts(threadData_t *threadData, modelica_metatype _classPart, modelica_metatype _inClassParts)
{
modelica_metatype _outClassPart = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _classPart;
tmp3_2 = _inClassParts;
{
modelica_metatype _classParts = NULL;
modelica_metatype _elts = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_elts = tmpMeta[1];
_classParts = tmp3_2;
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_classPart), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = omc_List_filterOnFalse(threadData, _elts, boxvar_AbsynUtil_isElementItemClass);
_classPart = tmpMeta[1];
tmpMeta[1] = mmc_mk_cons(_classPart, _classParts);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_elts = tmpMeta[1];
_classParts = tmp3_2;
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_classPart), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = omc_List_filterOnFalse(threadData, _elts, boxvar_AbsynUtil_isElementItemClass);
_classPart = tmpMeta[1];
tmpMeta[1] = mmc_mk_cons(_classPart, _classParts);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[1] = mmc_mk_cons(_classPart, _inClassParts);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClassPart = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClassPart;
}
DLLExport
modelica_metatype omc_AbsynUtil_filterNestedClasses(threadData_t *threadData, modelica_metatype _cl)
{
modelica_metatype _o = NULL;
modelica_metatype tmpMeta[13] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _cl;
{
modelica_string _name = NULL;
modelica_boolean _partialPrefix;
modelica_boolean _finalPrefix;
modelica_boolean _encapsulatedPrefix;
modelica_metatype _restriction = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _classParts = NULL;
modelica_metatype _annotations = NULL;
modelica_metatype _comment = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],0,5) == 0) goto tmp2_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 2));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 3));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 4));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 5));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[6]), 6));
tmpMeta[12] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_partialPrefix = tmp5;
_finalPrefix = tmp6;
_encapsulatedPrefix = tmp7;
_restriction = tmpMeta[5];
_typeVars = tmpMeta[7];
_classAttrs = tmpMeta[8];
_classParts = tmpMeta[9];
_annotations = tmpMeta[10];
_comment = tmpMeta[11];
_info = tmpMeta[12];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = omc_List_fold(threadData, listReverse(_classParts), boxvar_AbsynUtil_filterNestedClassesParts, tmpMeta[1]);
if (listEmpty(tmpMeta[2])) goto goto_1;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_classParts = tmpMeta[2];
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _classParts, _annotations, _comment);
tmpMeta[2] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), _restriction, tmpMeta[1], _info);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _cl;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_o = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _o;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_filterAnnotationItem(threadData_t *threadData, modelica_metatype _elt)
{
modelica_boolean _outB;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _elt;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outB = tmp1;
_return: OMC_LABEL_UNUSED
return _outB;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_filterAnnotationItem(threadData_t *threadData, modelica_metatype _elt)
{
modelica_boolean _outB;
modelica_metatype out_outB;
_outB = omc_AbsynUtil_filterAnnotationItem(threadData, _elt);
out_outB = mmc_mk_icon(_outB);
return out_outB;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_getFunctionInterfaceParts(threadData_t *threadData, modelica_metatype _part, modelica_metatype _elts)
{
modelica_metatype _oelts = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _part;
tmp3_2 = _elts;
{
modelica_metatype _elts1 = NULL;
modelica_metatype _elts2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_elts1 = tmpMeta[1];
_elts2 = tmp3_2;
_elts1 = omc_List_filterOnTrue(threadData, _elts1, boxvar_AbsynUtil_filterAnnotationItem);
tmpMeta[0] = listAppend(_elts1, _elts2);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _elts;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_oelts = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _oelts;
}
DLLExport
modelica_metatype omc_AbsynUtil_getFunctionInterface(threadData_t *threadData, modelica_metatype _cl)
{
modelica_metatype _o = NULL;
modelica_metatype tmpMeta[12] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _cl;
{
modelica_string _name = NULL;
modelica_boolean _partialPrefix;
modelica_boolean _finalPrefix;
modelica_boolean _encapsulatedPrefix;
modelica_metatype _info = NULL;
modelica_metatype _typeVars = NULL;
modelica_metatype _classParts = NULL;
modelica_metatype _elts = NULL;
modelica_metatype _funcRest = NULL;
modelica_metatype _classAttr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],9,1) == 0) goto tmp2_end;
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[7],0,5) == 0) goto tmp2_end;
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 2));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 3));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[7]), 4));
tmpMeta[11] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_partialPrefix = tmp5;
_finalPrefix = tmp6;
_encapsulatedPrefix = tmp7;
_funcRest = tmpMeta[6];
_typeVars = tmpMeta[8];
_classAttr = tmpMeta[9];
_classParts = tmpMeta[10];
_info = tmpMeta[11];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = omc_List_fold(threadData, listReverse(_classParts), boxvar_AbsynUtil_getFunctionInterfaceParts, tmpMeta[1]);
if (listEmpty(tmpMeta[2])) goto goto_1;
tmpMeta[3] = MMC_CAR(tmpMeta[2]);
tmpMeta[4] = MMC_CDR(tmpMeta[2]);
_elts = tmpMeta[2];
tmpMeta[1] = mmc_mk_box2(12, &Absyn_Restriction_R__FUNCTION__desc, _funcRest);
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ClassPart_PUBLIC__desc, _elts);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[4] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[5] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttr, tmpMeta[2], tmpMeta[4], mmc_mk_none());
tmpMeta[6] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_partialPrefix), mmc_mk_boolean(_finalPrefix), mmc_mk_boolean(_encapsulatedPrefix), tmpMeta[1], tmpMeta[5], _info);
tmpMeta[0] = tmpMeta[6];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_o = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _o;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_stripClassDefComment(threadData_t *threadData, modelica_metatype _cl)
{
modelica_metatype _o = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _cl;
{
modelica_metatype _enumLiterals = NULL;
modelica_metatype _typeSpec = NULL;
modelica_metatype _attributes = NULL;
modelica_metatype _arguments = NULL;
modelica_metatype _functionNames = NULL;
modelica_metatype _functionName = NULL;
modelica_metatype _vars = NULL;
modelica_metatype _typeVars = NULL;
modelica_string _baseClassName = NULL;
modelica_metatype _modifications = NULL;
modelica_metatype _parts = NULL;
modelica_metatype _classAttrs = NULL;
modelica_metatype _ann = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_typeVars = tmpMeta[1];
_classAttrs = tmpMeta[2];
_parts = tmpMeta[3];
_ann = tmpMeta[4];
tmpMeta[1] = mmc_mk_box6(3, &Absyn_ClassDef_PARTS__desc, _typeVars, _classAttrs, _parts, _ann, mmc_mk_none());
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,5) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
_baseClassName = tmpMeta[1];
_modifications = tmpMeta[2];
_parts = tmpMeta[3];
_ann = tmpMeta[4];
tmpMeta[1] = mmc_mk_box6(7, &Absyn_ClassDef_CLASS__EXTENDS__desc, _baseClassName, _modifications, mmc_mk_none(), _parts, _ann);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_typeSpec = tmpMeta[1];
_attributes = tmpMeta[2];
_arguments = tmpMeta[3];
tmpMeta[1] = mmc_mk_box5(4, &Absyn_ClassDef_DERIVED__desc, _typeSpec, _attributes, _arguments, mmc_mk_none());
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_enumLiterals = tmpMeta[1];
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ClassDef_ENUMERATION__desc, _enumLiterals, mmc_mk_none());
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_functionNames = tmpMeta[1];
tmpMeta[1] = mmc_mk_box3(6, &Absyn_ClassDef_OVERLOAD__desc, _functionNames, mmc_mk_none());
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_functionName = tmpMeta[1];
_vars = tmpMeta[2];
tmpMeta[1] = mmc_mk_box4(8, &Absyn_ClassDef_PDER__desc, _functionName, _vars, mmc_mk_none());
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _cl;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_o = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _o;
}
DLLExport
modelica_metatype omc_AbsynUtil_getShortClass(threadData_t *threadData, modelica_metatype _cl)
{
modelica_metatype _o = NULL;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _cl;
{
modelica_string _name = NULL;
modelica_boolean _pa;
modelica_boolean _fi;
modelica_boolean _en;
modelica_metatype _re = NULL;
modelica_metatype _body = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,5) == 0) goto tmp2_end;
goto goto_1;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,5) == 0) goto tmp2_end;
goto goto_1;
goto tmp2_done;
}
case 2: {
modelica_integer tmp5;
modelica_integer tmp6;
modelica_integer tmp7;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmp5 = mmc_unbox_integer(tmpMeta[2]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmp6 = mmc_unbox_integer(tmpMeta[3]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
tmp7 = mmc_unbox_integer(tmpMeta[4]);
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 6));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 7));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_name = tmpMeta[1];
_pa = tmp5;
_fi = tmp6;
_en = tmp7;
_re = tmpMeta[5];
_body = tmpMeta[6];
_info = tmpMeta[7];
_body = omc_AbsynUtil_stripClassDefComment(threadData, _body);
tmpMeta[1] = mmc_mk_box8(3, &Absyn_Class_CLASS__desc, _name, mmc_mk_boolean(_pa), mmc_mk_boolean(_fi), mmc_mk_boolean(_en), _re, _body, _info);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_o = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _o;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathGe(threadData_t *threadData, modelica_metatype _path1, modelica_metatype _path2)
{
modelica_boolean _ge;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_ge = (!omc_AbsynUtil_pathLt(threadData, _path1, _path2));
_return: OMC_LABEL_UNUSED
return _ge;
}
modelica_metatype boxptr_AbsynUtil_pathGe(threadData_t *threadData, modelica_metatype _path1, modelica_metatype _path2)
{
modelica_boolean _ge;
modelica_metatype out_ge;
_ge = omc_AbsynUtil_pathGe(threadData, _path1, _path2);
out_ge = mmc_mk_icon(_ge);
return out_ge;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathLt(threadData_t *threadData, modelica_metatype _path1, modelica_metatype _path2)
{
modelica_boolean _lt;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_lt = (stringCompare(omc_AbsynUtil_pathString(threadData, _path1, _OMC_LIT2, 1, 0), omc_AbsynUtil_pathString(threadData, _path2, _OMC_LIT2, 1, 0)) < ((modelica_integer) 0));
_return: OMC_LABEL_UNUSED
return _lt;
}
modelica_metatype boxptr_AbsynUtil_pathLt(threadData_t *threadData, modelica_metatype _path1, modelica_metatype _path2)
{
modelica_boolean _lt;
modelica_metatype out_lt;
_lt = omc_AbsynUtil_pathLt(threadData, _path1, _path2);
out_lt = mmc_mk_icon(_lt);
return out_lt;
}
DLLExport
modelica_boolean omc_AbsynUtil_isFieldEqual(threadData_t *threadData, modelica_metatype _isField1, modelica_metatype _isField2)
{
modelica_boolean _outEqual;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _isField1;
tmp4_2 = _isField2;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outEqual = tmp1;
_return: OMC_LABEL_UNUSED
return _outEqual;
}
modelica_metatype boxptr_AbsynUtil_isFieldEqual(threadData_t *threadData, modelica_metatype _isField1, modelica_metatype _isField2)
{
modelica_boolean _outEqual;
modelica_metatype out_outEqual;
_outEqual = omc_AbsynUtil_isFieldEqual(threadData, _isField1, _isField2);
out_outEqual = mmc_mk_icon(_outEqual);
return out_outEqual;
}
DLLExport
modelica_boolean omc_AbsynUtil_directionEqual(threadData_t *threadData, modelica_metatype _inDirection1, modelica_metatype _inDirection2)
{
modelica_boolean _outEqual;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inDirection1;
tmp4_2 = _inDirection2;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outEqual = tmp1;
_return: OMC_LABEL_UNUSED
return _outEqual;
}
modelica_metatype boxptr_AbsynUtil_directionEqual(threadData_t *threadData, modelica_metatype _inDirection1, modelica_metatype _inDirection2)
{
modelica_boolean _outEqual;
modelica_metatype out_outEqual;
_outEqual = omc_AbsynUtil_directionEqual(threadData, _inDirection1, _inDirection2);
out_outEqual = mmc_mk_icon(_outEqual);
return out_outEqual;
}
DLLExport
modelica_boolean omc_AbsynUtil_isOutput(threadData_t *threadData, modelica_metatype _inDirection)
{
modelica_boolean _outIsOutput;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inDirection;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsOutput = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsOutput;
}
modelica_metatype boxptr_AbsynUtil_isOutput(threadData_t *threadData, modelica_metatype _inDirection)
{
modelica_boolean _outIsOutput;
modelica_metatype out_outIsOutput;
_outIsOutput = omc_AbsynUtil_isOutput(threadData, _inDirection);
out_outIsOutput = mmc_mk_icon(_outIsOutput);
return out_outIsOutput;
}
DLLExport
modelica_boolean omc_AbsynUtil_isInput(threadData_t *threadData, modelica_metatype _inDirection)
{
modelica_boolean _outIsInput;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inDirection;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsInput = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsInput;
}
modelica_metatype boxptr_AbsynUtil_isInput(threadData_t *threadData, modelica_metatype _inDirection)
{
modelica_boolean _outIsInput;
modelica_metatype out_outIsInput;
_outIsInput = omc_AbsynUtil_isInput(threadData, _inDirection);
out_outIsInput = mmc_mk_icon(_outIsInput);
return out_outIsInput;
}
DLLExport
modelica_boolean omc_AbsynUtil_isInputOrOutput(threadData_t *threadData, modelica_metatype _direction)
{
modelica_boolean _isIorO;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _direction;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 6: {
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isIorO = tmp1;
_return: OMC_LABEL_UNUSED
return _isIorO;
}
modelica_metatype boxptr_AbsynUtil_isInputOrOutput(threadData_t *threadData, modelica_metatype _direction)
{
modelica_boolean _isIorO;
modelica_metatype out_isIorO;
_isIorO = omc_AbsynUtil_isInputOrOutput(threadData, _direction);
out_isIorO = mmc_mk_icon(_isIorO);
return out_isIorO;
}
DLLExport
modelica_boolean omc_AbsynUtil_getExpsFromArrayDim__tail(threadData_t *threadData, modelica_metatype _inAd, modelica_metatype _inAccumulator, modelica_metatype *out_outExps)
{
modelica_boolean _hasUnknownDimensions;
modelica_metatype _outExps = NULL;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAd;
tmp4_2 = _inAccumulator;
{
modelica_metatype _rest = NULL;
modelica_metatype _e = NULL;
modelica_metatype _exps = NULL;
modelica_metatype _acc = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
_acc = tmp4_2;
tmp1_c0 = 0;
tmpMeta[0+1] = listReverse(_acc);
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
_e = tmpMeta[4];
_rest = tmpMeta[3];
_acc = tmp4_2;
tmpMeta[2] = mmc_mk_cons(_e, _acc);
_inAd = _rest;
_inAccumulator = tmpMeta[2];
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],0,0) == 0) goto tmp3_end;
_rest = tmpMeta[3];
_acc = tmp4_2;
omc_AbsynUtil_getExpsFromArrayDim__tail(threadData, _rest, _acc ,&_exps);
tmp1_c0 = 1;
tmpMeta[0+1] = _exps;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_hasUnknownDimensions = tmp1_c0;
_outExps = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outExps) { *out_outExps = _outExps; }
return _hasUnknownDimensions;
}
modelica_metatype boxptr_AbsynUtil_getExpsFromArrayDim__tail(threadData_t *threadData, modelica_metatype _inAd, modelica_metatype _inAccumulator, modelica_metatype *out_outExps)
{
modelica_boolean _hasUnknownDimensions;
modelica_metatype out_hasUnknownDimensions;
_hasUnknownDimensions = omc_AbsynUtil_getExpsFromArrayDim__tail(threadData, _inAd, _inAccumulator, out_outExps);
out_hasUnknownDimensions = mmc_mk_icon(_hasUnknownDimensions);
return out_hasUnknownDimensions;
}
DLLExport
modelica_boolean omc_AbsynUtil_getExpsFromArrayDimOpt(threadData_t *threadData, modelica_metatype _inAdO, modelica_metatype *out_outExps)
{
modelica_boolean _hasUnknownDimensions;
modelica_metatype _outExps = NULL;
modelica_boolean tmp1_c0 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inAdO;
{
modelica_metatype _ad = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmp1_c0 = 0;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 1: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_ad = tmpMeta[2];
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmp1_c0 = omc_AbsynUtil_getExpsFromArrayDim__tail(threadData, _ad, tmpMeta[2], &tmpMeta[0+1]);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_hasUnknownDimensions = tmp1_c0;
_outExps = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outExps) { *out_outExps = _outExps; }
return _hasUnknownDimensions;
}
modelica_metatype boxptr_AbsynUtil_getExpsFromArrayDimOpt(threadData_t *threadData, modelica_metatype _inAdO, modelica_metatype *out_outExps)
{
modelica_boolean _hasUnknownDimensions;
modelica_metatype out_hasUnknownDimensions;
_hasUnknownDimensions = omc_AbsynUtil_getExpsFromArrayDimOpt(threadData, _inAdO, out_outExps);
out_hasUnknownDimensions = mmc_mk_icon(_hasUnknownDimensions);
return out_hasUnknownDimensions;
}
DLLExport
modelica_boolean omc_AbsynUtil_getExpsFromArrayDim(threadData_t *threadData, modelica_metatype _inAd, modelica_metatype *out_outExps)
{
modelica_boolean _hasUnknownDimensions;
modelica_metatype _outExps = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_hasUnknownDimensions = omc_AbsynUtil_getExpsFromArrayDim__tail(threadData, _inAd, tmpMeta[0] ,&_outExps);
_return: OMC_LABEL_UNUSED
if (out_outExps) { *out_outExps = _outExps; }
return _hasUnknownDimensions;
}
modelica_metatype boxptr_AbsynUtil_getExpsFromArrayDim(threadData_t *threadData, modelica_metatype _inAd, modelica_metatype *out_outExps)
{
modelica_boolean _hasUnknownDimensions;
modelica_metatype out_hasUnknownDimensions;
_hasUnknownDimensions = omc_AbsynUtil_getExpsFromArrayDim(threadData, _inAd, out_outExps);
out_hasUnknownDimensions = mmc_mk_icon(_hasUnknownDimensions);
return out_hasUnknownDimensions;
}
DLLExport
void omc_AbsynUtil_isDerCrefFail(threadData_t *threadData, modelica_metatype _exp)
{
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _exp;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],11,3) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
if (3 != MMC_STRLEN(tmpMeta[2]) || strcmp("der", MMC_STRINGDATA(tmpMeta[2])) != 0) MMC_THROW_INTERNAL();
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 3));
if (!listEmpty(tmpMeta[3])) MMC_THROW_INTERNAL();
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
if (listEmpty(tmpMeta[5])) MMC_THROW_INTERNAL();
tmpMeta[6] = MMC_CAR(tmpMeta[5]);
tmpMeta[7] = MMC_CDR(tmpMeta[5]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[6],2,1) == 0) MMC_THROW_INTERNAL();
if (!listEmpty(tmpMeta[7])) MMC_THROW_INTERNAL();
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 3));
if (!listEmpty(tmpMeta[8])) MMC_THROW_INTERNAL();
_return: OMC_LABEL_UNUSED
return;
}
DLLExport
modelica_boolean omc_AbsynUtil_isDerCref(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[8] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (3 != MMC_STRLEN(tmpMeta[1]) || strcmp(MMC_STRINGDATA(_OMC_LIT13), MMC_STRINGDATA(tmpMeta[1])) != 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (!listEmpty(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],0,2) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (listEmpty(tmpMeta[4])) goto tmp3_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[5],2,1) == 0) goto tmp3_end;
if (!listEmpty(tmpMeta[6])) goto tmp3_end;
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (!listEmpty(tmpMeta[7])) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_isDerCref(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_isDerCref(threadData, _exp);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_AbsynUtil_complexIsCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 19: {
tmp1 = omc_AbsynUtil_allFieldsAreCrefs(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))));
goto tmp3_done;
}
case 23: {
tmp1 = (omc_AbsynUtil_complexIsCref(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2)))) && omc_AbsynUtil_complexIsCref(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3)))));
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = omc_AbsynUtil_isCref(threadData, _inExp);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_complexIsCref(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_complexIsCref(threadData, _inExp);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_AbsynUtil_allFieldsAreCrefs(threadData_t *threadData, modelica_metatype _expLst)
{
modelica_boolean _b;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = omc_List_mapAllValueBool(threadData, _expLst, boxvar_AbsynUtil_complexIsCref, mmc_mk_boolean(1));
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_allFieldsAreCrefs(threadData_t *threadData, modelica_metatype _expLst)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_allFieldsAreCrefs(threadData, _expLst);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_AbsynUtil_isTuple(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_isTuple(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_isTuple(threadData, _exp);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_AbsynUtil_isCref(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _exp;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_isCref(threadData_t *threadData, modelica_metatype _exp)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_isCref(threadData, _exp);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefInsertSubscriptLstLst2(threadData_t *threadData, modelica_metatype _inCref, modelica_metatype _inSubs)
{
modelica_metatype _outCref = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_metatype tmp3_2;
tmp3_1 = _inCref;
tmp3_2 = _inSubs;
{
modelica_metatype _cref = NULL;
modelica_metatype _cref2 = NULL;
modelica_string _n = NULL;
modelica_metatype _subs = NULL;
modelica_metatype _s = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_2)) goto tmp2_end;
_cref = tmp3_1;
tmp3 += 2;
tmpMeta[0] = _cref;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[2] = MMC_CAR(tmp3_2);
tmpMeta[3] = MMC_CDR(tmp3_2);
if (!listEmpty(tmpMeta[3])) goto tmp2_end;
_n = tmpMeta[1];
_s = tmpMeta[2];
tmp3 += 2;
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _n, _s);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (listEmpty(tmp3_2)) goto tmp2_end;
tmpMeta[3] = MMC_CAR(tmp3_2);
tmpMeta[4] = MMC_CDR(tmp3_2);
_n = tmpMeta[1];
_cref = tmpMeta[2];
_s = tmpMeta[3];
_subs = tmpMeta[4];
tmp3 += 1;
_cref2 = omc_AbsynUtil_crefInsertSubscriptLstLst2(threadData, _cref, _subs);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _n, _s, _cref2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cref = tmpMeta[1];
_subs = tmp3_2;
_cref2 = omc_AbsynUtil_crefInsertSubscriptLstLst2(threadData, _cref, _subs);
tmpMeta[0] = omc_AbsynUtil_crefMakeFullyQualified(threadData, _cref2);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outCref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCref;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefInsertSubscriptLstLst(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inLst, modelica_metatype *out_outLst)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inLst;
{
modelica_metatype _cref = NULL;
modelica_metatype _cref2 = NULL;
modelica_metatype _subs = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cref = tmpMeta[2];
_subs = tmp4_2;
_cref2 = omc_AbsynUtil_crefInsertSubscriptLstLst2(threadData, _cref, _subs);
tmpMeta[2] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cref2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _subs;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inLst;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 2) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outExp = tmpMeta[0+0];
_outLst = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outLst) { *out_outLst = _outLst; }
return _outExp;
}
DLLExport
modelica_metatype omc_AbsynUtil_subscriptExpOpt(threadData_t *threadData, modelica_metatype _inSub)
{
modelica_metatype _outExpOpt = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inSub;
{
modelica_metatype _e = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_e = tmpMeta[1];
tmpMeta[0] = mmc_mk_some(_e);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,0) == 0) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExpOpt = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExpOpt;
}
DLLExport
modelica_string omc_AbsynUtil_innerOuterStr(threadData_t *threadData, modelica_metatype _io)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _io;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
tmp1 = _OMC_LIT14;
goto tmp3_done;
}
case 3: {
tmp1 = _OMC_LIT15;
goto tmp3_done;
}
case 4: {
tmp1 = _OMC_LIT16;
goto tmp3_done;
}
case 6: {
tmp1 = _OMC_LIT7;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_metatype omc_AbsynUtil_joinWithinPath(threadData_t *threadData, modelica_metatype _within_, modelica_metatype _path)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _within_;
{
modelica_metatype _path1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,0) == 0) goto tmp2_end;
tmpMeta[0] = _path;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path1 = tmpMeta[1];
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _path1, _path);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_string omc_AbsynUtil_withinString(threadData_t *threadData, modelica_metatype _w1)
{
modelica_string _str = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _w1;
{
modelica_metatype _p1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT17;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p1 = tmpMeta[0];
tmpMeta[0] = stringAppend(_OMC_LIT18,omc_AbsynUtil_pathString(threadData, _p1, _OMC_LIT2, 1, 0));
tmpMeta[1] = stringAppend(tmpMeta[0],_OMC_LIT19);
tmp1 = tmpMeta[1];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_str = tmp1;
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_boolean omc_AbsynUtil_withinEqualCaseInsensitive(threadData_t *threadData, modelica_metatype _within1, modelica_metatype _within2)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _within1;
tmp4_2 = _within2;
{
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p1 = tmpMeta[0];
_p2 = tmpMeta[1];
tmp1 = omc_AbsynUtil_pathEqualCaseInsensitive(threadData, _p1, _p2);
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_withinEqualCaseInsensitive(threadData_t *threadData, modelica_metatype _within1, modelica_metatype _within2)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_withinEqualCaseInsensitive(threadData, _within1, _within2);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_AbsynUtil_withinEqual(threadData_t *threadData, modelica_metatype _within1, modelica_metatype _within2)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _within1;
tmp4_2 = _within2;
{
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p1 = tmpMeta[0];
_p2 = tmpMeta[1];
tmp1 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_withinEqual(threadData_t *threadData, modelica_metatype _within1, modelica_metatype _within2)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_withinEqual(threadData, _within1, _within2);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathIsQual(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_boolean _outIsQual;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsQual = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsQual;
}
modelica_metatype boxptr_AbsynUtil_pathIsQual(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_boolean _outIsQual;
modelica_metatype out_outIsQual;
_outIsQual = omc_AbsynUtil_pathIsQual(threadData, _inPath);
out_outIsQual = mmc_mk_icon(_outIsQual);
return out_outIsQual;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathIsIdent(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_boolean _outIsIdent;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsIdent;
}
modelica_metatype boxptr_AbsynUtil_pathIsIdent(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_boolean _outIsIdent;
modelica_metatype out_outIsIdent;
_outIsIdent = omc_AbsynUtil_pathIsIdent(threadData, _inPath);
out_outIsIdent = mmc_mk_icon(_outIsIdent);
return out_outIsIdent;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathIsFullyQualified(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_boolean _outIsQualified;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsQualified = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsQualified;
}
modelica_metatype boxptr_AbsynUtil_pathIsFullyQualified(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_boolean _outIsQualified;
modelica_metatype out_outIsQualified;
_outIsQualified = omc_AbsynUtil_pathIsFullyQualified(threadData, _inPath);
out_outIsQualified = mmc_mk_icon(_outIsQualified);
return out_outIsQualified;
}
DLLExport
modelica_metatype omc_AbsynUtil_unqualifyCref(threadData_t *threadData, modelica_metatype _inCref)
{
modelica_metatype _outCref = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inCref;
{
modelica_metatype _cref = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cref = tmpMeta[1];
tmpMeta[0] = _cref;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inCref;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCref;
}
DLLExport
modelica_metatype omc_AbsynUtil_unqotePathIdents(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _path = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_path = omc_AbsynUtil_stringListPath(threadData, omc_List_map(threadData, omc_AbsynUtil_pathToStringList(threadData, _inPath), boxvar_System_unquoteIdentifier));
_return: OMC_LABEL_UNUSED
return _path;
}
DLLExport
modelica_string omc_AbsynUtil_crefIdent(threadData_t *threadData, modelica_metatype _cr)
{
modelica_string _str = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _cr;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,2) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
if (!listEmpty(tmpMeta[2])) MMC_THROW_INTERNAL();
_str = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_metatype omc_AbsynUtil_makeCons(threadData_t *threadData, modelica_metatype _e1, modelica_metatype _e2)
{
modelica_metatype _e = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box3(23, &Absyn_Exp_CONS__desc, _e1, _e2);
_e = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _e;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_onlyLiteralsInExpExit(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inLst, modelica_metatype *out_outLst)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outLst = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inLst;
{
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,2) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (13 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT20), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
_lst = tmp4_2;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _lst;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inLst;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outLst = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outLst) { *out_outLst = _outLst; }
return _outExp;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_onlyLiteralsInExpEnter(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inLst, modelica_metatype *out_outLst)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outLst = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inLst;
{
modelica_boolean _b;
modelica_metatype _e = NULL;
modelica_metatype _lst = NULL;
modelica_metatype _rest = NULL;
modelica_string _name = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,3) == 0) goto tmp3_end;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
_lst = tmpMeta[2];
_rest = tmpMeta[3];
_e = tmp4_1;
_name = tmpMeta[5];
_b = listMember(_name, _OMC_LIT34);
_lst = omc_List_consOnTrue(threadData, (!_b), _e, _lst);
tmpMeta[2] = mmc_mk_cons(_lst, _rest);
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
if (listEmpty(tmp4_2)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_2);
tmpMeta[3] = MMC_CDR(tmp4_2);
_lst = tmpMeta[2];
_rest = tmpMeta[3];
tmpMeta[3] = mmc_mk_cons(_inExp, _lst);
tmpMeta[2] = mmc_mk_cons(tmpMeta[3], _rest);
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = tmpMeta[2];
goto tmp3_done;
}
case 2: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inLst;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_outLst = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outLst) { *out_outLst = _outLst; }
return _outExp;
}
DLLExport
modelica_boolean omc_AbsynUtil_onlyLiteralsInEqMod(threadData_t *threadData, modelica_metatype _eqMod)
{
modelica_boolean _onlyLiterals;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _eqMod;
{
modelica_metatype _exp = NULL;
modelica_metatype _lst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_exp = tmpMeta[0];
omc_AbsynUtil_traverseExpBidir(threadData, _exp, boxvar_AbsynUtil_onlyLiteralsInExpEnter, boxvar_AbsynUtil_onlyLiteralsInExpExit, _OMC_LIT35, &tmpMeta[0]);
if (listEmpty(tmpMeta[0])) goto goto_2;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
if (!listEmpty(tmpMeta[2])) goto goto_2;
_lst = tmpMeta[1];
tmp1 = listEmpty(_lst);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_onlyLiterals = tmp1;
_return: OMC_LABEL_UNUSED
return _onlyLiterals;
}
modelica_metatype boxptr_AbsynUtil_onlyLiteralsInEqMod(threadData_t *threadData, modelica_metatype _eqMod)
{
modelica_boolean _onlyLiterals;
modelica_metatype out_onlyLiterals;
_onlyLiterals = omc_AbsynUtil_onlyLiteralsInEqMod(threadData, _eqMod);
out_onlyLiterals = mmc_mk_icon(_onlyLiterals);
return out_onlyLiterals;
}
DLLExport
modelica_boolean omc_AbsynUtil_onlyLiteralsInAnnotationMod(threadData_t *threadData, modelica_metatype _inMod)
{
modelica_boolean _onlyLiterals;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _inMod;
{
modelica_metatype _dive = NULL;
modelica_metatype _rest = NULL;
modelica_metatype _eqMod = NULL;
modelica_boolean _b1;
modelica_boolean _b2;
modelica_boolean _b3;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmp4 += 3;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (11 != MMC_STRLEN(tmpMeta[3]) || strcmp(MMC_STRINGDATA(_OMC_LIT4), MMC_STRINGDATA(tmpMeta[3])) != 0) goto tmp3_end;
_rest = tmpMeta[1];
tmp1 = omc_AbsynUtil_onlyLiteralsInAnnotationMod(threadData, _rest);
goto tmp3_done;
}
case 2: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 5));
if (optionNone(tmpMeta[2])) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
_dive = tmpMeta[4];
_eqMod = tmpMeta[5];
_rest = tmpMeta[1];
_b1 = omc_AbsynUtil_onlyLiteralsInEqMod(threadData, _eqMod);
_b2 = omc_AbsynUtil_onlyLiteralsInAnnotationMod(threadData, _dive);
_b3 = omc_AbsynUtil_onlyLiteralsInAnnotationMod(threadData, _rest);
tmp1 = (_b1 && (_b2 && _b3));
goto tmp3_done;
}
case 3: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_CAR(tmp4_1);
tmpMeta[1] = MMC_CDR(tmp4_1);
_rest = tmpMeta[1];
tmp1 = omc_AbsynUtil_onlyLiteralsInAnnotationMod(threadData, _rest);
goto tmp3_done;
}
case 4: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 5) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_onlyLiterals = tmp1;
_return: OMC_LABEL_UNUSED
return _onlyLiterals;
}
modelica_metatype boxptr_AbsynUtil_onlyLiteralsInAnnotationMod(threadData_t *threadData, modelica_metatype _inMod)
{
modelica_boolean _onlyLiterals;
modelica_metatype out_onlyLiterals;
_onlyLiterals = omc_AbsynUtil_onlyLiteralsInAnnotationMod(threadData, _inMod);
out_onlyLiterals = mmc_mk_icon(_onlyLiterals);
return out_onlyLiterals;
}
DLLExport
modelica_metatype omc_AbsynUtil_canonIfExp(threadData_t *threadData, modelica_metatype _inExp)
{
modelica_metatype _outExp = NULL;
modelica_metatype tmpMeta[9] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cond = NULL;
modelica_metatype _tb = NULL;
modelica_metatype _eb = NULL;
modelica_metatype _ei_cond = NULL;
modelica_metatype _ei_tb = NULL;
modelica_metatype _e = NULL;
modelica_metatype _eib = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (!listEmpty(tmpMeta[1])) goto tmp2_end;
tmpMeta[0] = _inExp;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
if (listEmpty(tmpMeta[4])) goto tmp2_end;
tmpMeta[5] = MMC_CAR(tmpMeta[4]);
tmpMeta[6] = MMC_CDR(tmpMeta[4]);
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 1));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[5]), 2));
_cond = tmpMeta[1];
_tb = tmpMeta[2];
_eb = tmpMeta[3];
_ei_cond = tmpMeta[7];
_ei_tb = tmpMeta[8];
_eib = tmpMeta[6];
tmpMeta[1] = mmc_mk_box5(13, &Absyn_Exp_IFEXP__desc, _ei_cond, _ei_tb, _eb, _eib);
_e = omc_AbsynUtil_canonIfExp(threadData, tmpMeta[1]);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box5(13, &Absyn_Exp_IFEXP__desc, _cond, _tb, _e, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outExp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outExp;
}
DLLExport
modelica_boolean omc_AbsynUtil_importEqual(threadData_t *threadData, modelica_metatype _im1, modelica_metatype _im2)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _im1;
tmp4_2 = _im2;
{
modelica_string _id = NULL;
modelica_string _id2 = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_id = tmpMeta[0];
_p1 = tmpMeta[1];
_id2 = tmpMeta[2];
_p2 = tmpMeta[3];
tmp4 += 2;
tmp6 = (stringEqual(_id, _id2));
if (1 != tmp6) goto goto_2;
tmp7 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp7) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p1 = tmpMeta[0];
_p2 = tmpMeta[1];
tmp4 += 1;
tmp8 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp8) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p1 = tmpMeta[0];
_p2 = tmpMeta[1];
tmp9 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp9) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_AbsynUtil_importEqual(threadData_t *threadData, modelica_metatype _im1, modelica_metatype _im2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_AbsynUtil_importEqual(threadData, _im1, _im2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_metatype omc_AbsynUtil_makeNotFullyQualified(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
tmpMeta[0] = _path;
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inPath;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_makeFullyQualified(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[0] = _inPath;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Path_FULLYQUALIFIED__desc, _inPath);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_boolean omc_AbsynUtil_innerOuterEqual(threadData_t *threadData, modelica_metatype _io1, modelica_metatype _io2)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _io1;
tmp4_2 = _io2;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,3,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_AbsynUtil_innerOuterEqual(threadData_t *threadData, modelica_metatype _io1, modelica_metatype _io2)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_AbsynUtil_innerOuterEqual(threadData, _io1, _io2);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_AbsynUtil_isNotInnerOuter(threadData_t *threadData, modelica_metatype _inIO)
{
modelica_boolean _outIsNotInnerOuter;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inIO;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsNotInnerOuter = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsNotInnerOuter;
}
modelica_metatype boxptr_AbsynUtil_isNotInnerOuter(threadData_t *threadData, modelica_metatype _inIO)
{
modelica_boolean _outIsNotInnerOuter;
modelica_metatype out_outIsNotInnerOuter;
_outIsNotInnerOuter = omc_AbsynUtil_isNotInnerOuter(threadData, _inIO);
out_outIsNotInnerOuter = mmc_mk_icon(_outIsNotInnerOuter);
return out_outIsNotInnerOuter;
}
DLLExport
modelica_boolean omc_AbsynUtil_isInnerOuter(threadData_t *threadData, modelica_metatype _inIO)
{
modelica_boolean _outIsInnerOuter;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inIO;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsInnerOuter = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsInnerOuter;
}
modelica_metatype boxptr_AbsynUtil_isInnerOuter(threadData_t *threadData, modelica_metatype _inIO)
{
modelica_boolean _outIsInnerOuter;
modelica_metatype out_outIsInnerOuter;
_outIsInnerOuter = omc_AbsynUtil_isInnerOuter(threadData, _inIO);
out_outIsInnerOuter = mmc_mk_icon(_outIsInnerOuter);
return out_outIsInnerOuter;
}
DLLExport
modelica_boolean omc_AbsynUtil_isOnlyOuter(threadData_t *threadData, modelica_metatype _inIO)
{
modelica_boolean _outOnlyOuter;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inIO;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outOnlyOuter = tmp1;
_return: OMC_LABEL_UNUSED
return _outOnlyOuter;
}
modelica_metatype boxptr_AbsynUtil_isOnlyOuter(threadData_t *threadData, modelica_metatype _inIO)
{
modelica_boolean _outOnlyOuter;
modelica_metatype out_outOnlyOuter;
_outOnlyOuter = omc_AbsynUtil_isOnlyOuter(threadData, _inIO);
out_outOnlyOuter = mmc_mk_icon(_outOnlyOuter);
return out_outOnlyOuter;
}
DLLExport
modelica_boolean omc_AbsynUtil_isOnlyInner(threadData_t *threadData, modelica_metatype _inIO)
{
modelica_boolean _outOnlyInner;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inIO;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outOnlyInner = tmp1;
_return: OMC_LABEL_UNUSED
return _outOnlyInner;
}
modelica_metatype boxptr_AbsynUtil_isOnlyInner(threadData_t *threadData, modelica_metatype _inIO)
{
modelica_boolean _outOnlyInner;
modelica_metatype out_outOnlyInner;
_outOnlyInner = omc_AbsynUtil_isOnlyInner(threadData, _inIO);
out_outOnlyInner = mmc_mk_icon(_outOnlyInner);
return out_outOnlyInner;
}
DLLExport
modelica_boolean omc_AbsynUtil_isInner(threadData_t *threadData, modelica_metatype _io)
{
modelica_boolean _isItAnInner;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _io;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 3: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isItAnInner = tmp1;
_return: OMC_LABEL_UNUSED
return _isItAnInner;
}
modelica_metatype boxptr_AbsynUtil_isInner(threadData_t *threadData, modelica_metatype _io)
{
modelica_boolean _isItAnInner;
modelica_metatype out_isItAnInner;
_isItAnInner = omc_AbsynUtil_isInner(threadData, _io);
out_isItAnInner = mmc_mk_icon(_isItAnInner);
return out_isItAnInner;
}
DLLExport
modelica_boolean omc_AbsynUtil_isOuter(threadData_t *threadData, modelica_metatype _io)
{
modelica_boolean _isItAnOuter;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _io;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
tmp1 = 1;
goto tmp3_done;
}
case 4: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_isItAnOuter = tmp1;
_return: OMC_LABEL_UNUSED
return _isItAnOuter;
}
modelica_metatype boxptr_AbsynUtil_isOuter(threadData_t *threadData, modelica_metatype _io)
{
modelica_boolean _isItAnOuter;
modelica_metatype out_isItAnOuter;
_isItAnOuter = omc_AbsynUtil_isOuter(threadData, _io);
out_isItAnOuter = mmc_mk_icon(_isItAnOuter);
return out_isItAnOuter;
}
DLLExport
modelica_string omc_AbsynUtil_getFileNameFromInfo(threadData_t *threadData, modelica_metatype _inInfo)
{
modelica_string _inFileName = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inInfo;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_inFileName = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _inFileName;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathReplaceIdent(threadData_t *threadData, modelica_metatype _path, modelica_string _last)
{
modelica_metatype _out = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_string tmp3_2;
tmp3_1 = _path;
tmp3_2 = _last;
{
modelica_metatype _p = NULL;
modelica_string _n = NULL;
modelica_string _s = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_s = tmp3_2;
_p = omc_AbsynUtil_pathReplaceIdent(threadData, _p, _s);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Path_FULLYQUALIFIED__desc, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_n = tmpMeta[1];
_p = tmpMeta[2];
_s = tmp3_2;
_p = omc_AbsynUtil_pathReplaceIdent(threadData, _p, _s);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _n, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
_s = tmp3_2;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _s);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_out = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _out;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_getIteratorIndexedCrefs(threadData_t *threadData, modelica_metatype _inCref, modelica_string _inIterator, modelica_metatype _inCrefs)
{
modelica_metatype _outCrefs = NULL;
modelica_metatype _crefs = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outCrefs = _inCrefs;
{
modelica_metatype tmp3_1;
tmp3_1 = _inCref;
{
modelica_metatype _subs = NULL;
modelica_integer _idx;
modelica_string _name = NULL;
modelica_string _id = NULL;
modelica_metatype _cref = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[1];
_subs = tmpMeta[2];
_idx = ((modelica_integer) 1);
{
modelica_metatype _sub;
for (tmpMeta[1] = _subs; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_sub = MMC_CAR(tmpMeta[1]);
{
modelica_metatype tmp6_1;
tmp6_1 = _sub;
{
volatile mmc_switch_type tmp6;
int tmp7;
tmp6 = 0;
for (; tmp6 < 2; tmp6++) {
switch (MMC_SWITCH_CAST(tmp6)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp6_1,1,1) == 0) goto tmp5_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp6_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],2,1) == 0) goto tmp5_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,2) == 0) goto tmp5_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 3));
if (!listEmpty(tmpMeta[5])) goto tmp5_end;
_name = tmpMeta[4];
if((stringEqual(_name, _inIterator)))
{
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[4] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, tmpMeta[3]);
tmpMeta[5] = mmc_mk_box2(0, tmpMeta[4], mmc_mk_integer(_idx));
tmpMeta[2] = mmc_mk_cons(tmpMeta[5], _outCrefs);
_outCrefs = tmpMeta[2];
}
goto tmp5_done;
}
case 1: {
goto tmp5_done;
}
}
goto tmp5_end;
tmp5_end: ;
}
goto goto_4;
goto_4:;
goto goto_1;
goto tmp5_done;
tmp5_done:;
}
}
;
_idx = ((modelica_integer) 1) + _idx;
}
}
tmpMeta[0] = _outCrefs;
goto tmp2_done;
}
case 4: {
modelica_integer tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_id = tmpMeta[1];
_subs = tmpMeta[2];
_cref = tmpMeta[3];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_crefs = omc_AbsynUtil_getIteratorIndexedCrefs(threadData, _cref, _inIterator, tmpMeta[1]);
{
modelica_metatype _cr;
for (tmpMeta[1] = _crefs; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_cr = MMC_CAR(tmpMeta[1]);
tmpMeta[2] = _cr;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp8 = mmc_unbox_integer(tmpMeta[4]);
_cref = tmpMeta[3];
_idx = tmp8;
tmpMeta[3] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _id, _subs, _cref);
tmpMeta[4] = mmc_mk_box2(0, tmpMeta[3], mmc_mk_integer(_idx));
tmpMeta[2] = mmc_mk_cons(tmpMeta[4], _outCrefs);
_outCrefs = tmpMeta[2];
}
}
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, _subs);
_inCref = tmpMeta[1];
_inCrefs = _outCrefs;
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
modelica_integer tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cref = tmpMeta[1];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
_crefs = omc_AbsynUtil_getIteratorIndexedCrefs(threadData, _cref, _inIterator, tmpMeta[1]);
{
modelica_metatype _cr;
for (tmpMeta[1] = _crefs; !listEmpty(tmpMeta[1]); tmpMeta[1]=MMC_CDR(tmpMeta[1]))
{
_cr = MMC_CAR(tmpMeta[1]);
tmpMeta[2] = _cr;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmp9 = mmc_unbox_integer(tmpMeta[4]);
_cref = tmpMeta[3];
_idx = tmp9;
tmpMeta[3] = mmc_mk_box2(3, &Absyn_ComponentRef_CREF__FULLYQUALIFIED__desc, _cref);
tmpMeta[4] = mmc_mk_box2(0, tmpMeta[3], mmc_mk_integer(_idx));
tmpMeta[2] = mmc_mk_cons(tmpMeta[4], _outCrefs);
_outCrefs = tmpMeta[2];
}
}
tmpMeta[0] = _outCrefs;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _inCrefs;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCrefs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCrefs;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_iteratorIndexedCrefsEqual(threadData_t *threadData, modelica_metatype _inCref1, modelica_metatype _inCref2)
{
modelica_boolean _outEqual;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_integer _idx1;
modelica_integer _idx2;
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inCref1;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp1 = mmc_unbox_integer(tmpMeta[2]);
_cr1 = tmpMeta[1];
_idx1 = tmp1;
tmpMeta[0] = _inCref2;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmp2 = mmc_unbox_integer(tmpMeta[2]);
_cr2 = tmpMeta[1];
_idx2 = tmp2;
_outEqual = ((_idx1 == _idx2) && omc_AbsynUtil_crefEqual(threadData, _cr1, _cr2));
_return: OMC_LABEL_UNUSED
return _outEqual;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_iteratorIndexedCrefsEqual(threadData_t *threadData, modelica_metatype _inCref1, modelica_metatype _inCref2)
{
modelica_boolean _outEqual;
modelica_metatype out_outEqual;
_outEqual = omc_AbsynUtil_iteratorIndexedCrefsEqual(threadData, _inCref1, _inCref2);
out_outEqual = mmc_mk_icon(_outEqual);
return out_outEqual;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_findIteratorIndexedCrefs__traverser(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _inCrefs, modelica_string _inIterator, modelica_metatype *out_outCrefs)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outCrefs = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = _inExp;
{
modelica_metatype tmp3_1;
tmp3_1 = _inExp;
{
modelica_metatype _cref = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cref = tmpMeta[1];
tmpMeta[0] = omc_AbsynUtil_getIteratorIndexedCrefs(threadData, _cref, _inIterator, _inCrefs);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inCrefs;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCrefs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_outCrefs) { *out_outCrefs = _outCrefs; }
return _outExp;
}
static modelica_metatype closure9_AbsynUtil_findIteratorIndexedCrefs__traverser(threadData_t *thData, modelica_metatype closure, modelica_metatype inExp, modelica_metatype inCrefs, modelica_metatype tmp1)
{
modelica_string inIterator = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_AbsynUtil_findIteratorIndexedCrefs__traverser(thData, inExp, inCrefs, inIterator, tmp1);
}static modelica_metatype closure10_List_unionEltOnTrue(threadData_t *thData, modelica_metatype closure, modelica_metatype inElement, modelica_metatype inList)
{
modelica_fnptr inCompFunc = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(closure),1));
return boxptr_List_unionEltOnTrue(thData, inElement, inList, inCompFunc);
}
DLLExport
modelica_metatype omc_AbsynUtil_findIteratorIndexedCrefs(threadData_t *threadData, modelica_metatype _inExp, modelica_string _inIterator, modelica_metatype _inCrefs)
{
modelica_metatype _outCrefs = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box1(0, _inIterator);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
omc_AbsynUtil_traverseExp(threadData, _inExp, (modelica_fnptr) mmc_mk_box2(0,closure9_AbsynUtil_findIteratorIndexedCrefs__traverser,tmpMeta[0]), tmpMeta[1] ,&_outCrefs);
tmpMeta[0] = mmc_mk_box1(0, boxvar_AbsynUtil_iteratorIndexedCrefsEqual);
_outCrefs = omc_List_fold(threadData, _outCrefs, (modelica_fnptr) mmc_mk_box2(0,closure10_List_unionEltOnTrue,tmpMeta[0]), _inCrefs);
_return: OMC_LABEL_UNUSED
return _outCrefs;
}
DLLExport
modelica_string omc_AbsynUtil_getClassName(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_string _outName = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inClass;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_outName = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _outName;
}
PROTECTED_FUNCTION_STATIC modelica_boolean omc_AbsynUtil_functionArgsEqual(threadData_t *threadData, modelica_metatype _args1, modelica_metatype _args2)
{
modelica_boolean _equal;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _args1;
tmp4_2 = _args2;
{
modelica_metatype _expl1 = NULL;
modelica_metatype _expl2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_expl1 = tmpMeta[0];
_expl2 = tmpMeta[1];
tmp1 = omc_List_isEqualOnTrue(threadData, _expl1, _expl2, boxvar_AbsynUtil_expEqual);
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_equal = tmp1;
_return: OMC_LABEL_UNUSED
return _equal;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_functionArgsEqual(threadData_t *threadData, modelica_metatype _args1, modelica_metatype _args2)
{
modelica_boolean _equal;
modelica_metatype out_equal;
_equal = omc_AbsynUtil_functionArgsEqual(threadData, _args1, _args2);
out_equal = mmc_mk_icon(_equal);
return out_equal;
}
DLLExport
modelica_boolean omc_AbsynUtil_eachEqual(threadData_t *threadData, modelica_metatype _each1, modelica_metatype _each2)
{
modelica_boolean _equal;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _each1;
tmp4_2 = _each2;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_equal = tmp1;
_return: OMC_LABEL_UNUSED
return _equal;
}
modelica_metatype boxptr_AbsynUtil_eachEqual(threadData_t *threadData, modelica_metatype _each1, modelica_metatype _each2)
{
modelica_boolean _equal;
modelica_metatype out_equal;
_equal = omc_AbsynUtil_eachEqual(threadData, _each1, _each2);
out_equal = mmc_mk_icon(_equal);
return out_equal;
}
DLLExport
modelica_boolean omc_AbsynUtil_expEqual(threadData_t *threadData, modelica_metatype _exp1, modelica_metatype _exp2)
{
modelica_boolean _equal;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _exp1;
tmp4_2 = _exp2;
{
modelica_metatype _x = NULL;
modelica_metatype _y = NULL;
modelica_integer _i;
modelica_string _r = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_integer tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmp6 = mmc_unbox_integer(tmpMeta[0]);
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_i = tmp6;
_r = tmpMeta[1];
tmp4 += 1;
tmp1 = (((modelica_real)_i) == stringReal(_r));
goto tmp3_done;
}
case 1: {
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmp7 = mmc_unbox_integer(tmpMeta[1]);
_r = tmpMeta[0];
_i = tmp7;
tmp1 = (((modelica_real)_i) == stringReal(_r));
goto tmp3_done;
}
case 2: {
_x = tmp4_1;
_y = tmp4_2;
tmp1 = valueEq(_x, _y);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_equal = tmp1;
_return: OMC_LABEL_UNUSED
return _equal;
}
modelica_metatype boxptr_AbsynUtil_expEqual(threadData_t *threadData, modelica_metatype _exp1, modelica_metatype _exp2)
{
modelica_boolean _equal;
modelica_metatype out_equal;
_equal = omc_AbsynUtil_expEqual(threadData, _exp1, _exp2);
out_equal = mmc_mk_icon(_equal);
return out_equal;
}
DLLExport
modelica_boolean omc_AbsynUtil_isFunctionRestriction(threadData_t *threadData, modelica_metatype _inRestriction)
{
modelica_boolean _outIsFunction;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inRestriction;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsFunction = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsFunction;
}
modelica_metatype boxptr_AbsynUtil_isFunctionRestriction(threadData_t *threadData, modelica_metatype _inRestriction)
{
modelica_boolean _outIsFunction;
modelica_metatype out_outIsFunction;
_outIsFunction = omc_AbsynUtil_isFunctionRestriction(threadData, _inRestriction);
out_outIsFunction = mmc_mk_icon(_outIsFunction);
return out_outIsFunction;
}
DLLExport
modelica_boolean omc_AbsynUtil_isPackageRestriction(threadData_t *threadData, modelica_metatype _inRestriction)
{
modelica_boolean _outIsPackage;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inRestriction;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsPackage = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsPackage;
}
modelica_metatype boxptr_AbsynUtil_isPackageRestriction(threadData_t *threadData, modelica_metatype _inRestriction)
{
modelica_boolean _outIsPackage;
modelica_metatype out_outIsPackage;
_outIsPackage = omc_AbsynUtil_isPackageRestriction(threadData, _inRestriction);
out_outIsPackage = mmc_mk_icon(_outIsPackage);
return out_outIsPackage;
}
DLLExport
modelica_boolean omc_AbsynUtil_crefEqualNoSubs(threadData_t *threadData, modelica_metatype _cr1, modelica_metatype _cr2)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _cr1;
tmp4_2 = _cr2;
{
modelica_metatype _rest1 = NULL;
modelica_metatype _rest2 = NULL;
modelica_string _id = NULL;
modelica_string _id2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_id = tmpMeta[0];
_id2 = tmpMeta[1];
tmp4 += 2;
tmp6 = (stringEqual(_id, _id2));
if (1 != tmp6) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp7;
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_id = tmpMeta[0];
_rest1 = tmpMeta[1];
_id2 = tmpMeta[2];
_rest2 = tmpMeta[3];
tmp4 += 1;
tmp7 = (stringEqual(_id, _id2));
if (1 != tmp7) goto goto_2;
tmp8 = omc_AbsynUtil_crefEqualNoSubs(threadData, _rest1, _rest2);
if (1 != tmp8) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_rest1 = tmpMeta[0];
_rest2 = tmpMeta[1];
tmp1 = omc_AbsynUtil_crefEqualNoSubs(threadData, _rest1, _rest2);
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_AbsynUtil_crefEqualNoSubs(threadData_t *threadData, modelica_metatype _cr1, modelica_metatype _cr2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_AbsynUtil_crefEqualNoSubs(threadData, _cr1, _cr2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_AbsynUtil_subscriptsEqual(threadData_t *threadData, modelica_metatype _inSubList1, modelica_metatype _inSubList2)
{
modelica_boolean _outIsEqual;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outIsEqual = omc_List_isEqualOnTrue(threadData, _inSubList1, _inSubList2, boxvar_AbsynUtil_subscriptEqual);
_return: OMC_LABEL_UNUSED
return _outIsEqual;
}
modelica_metatype boxptr_AbsynUtil_subscriptsEqual(threadData_t *threadData, modelica_metatype _inSubList1, modelica_metatype _inSubList2)
{
modelica_boolean _outIsEqual;
modelica_metatype out_outIsEqual;
_outIsEqual = omc_AbsynUtil_subscriptsEqual(threadData, _inSubList1, _inSubList2);
out_outIsEqual = mmc_mk_icon(_outIsEqual);
return out_outIsEqual;
}
DLLExport
modelica_boolean omc_AbsynUtil_subscriptEqual(threadData_t *threadData, modelica_metatype _inSubscript1, modelica_metatype _inSubscript2)
{
modelica_boolean _outIsEqual;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inSubscript1;
tmp4_2 = _inSubscript2;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,0) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_e1 = tmpMeta[0];
_e2 = tmpMeta[1];
tmp1 = omc_AbsynUtil_expEqual(threadData, _e1, _e2);
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsEqual = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsEqual;
}
modelica_metatype boxptr_AbsynUtil_subscriptEqual(threadData_t *threadData, modelica_metatype _inSubscript1, modelica_metatype _inSubscript2)
{
modelica_boolean _outIsEqual;
modelica_metatype out_outIsEqual;
_outIsEqual = omc_AbsynUtil_subscriptEqual(threadData, _inSubscript1, _inSubscript2);
out_outIsEqual = mmc_mk_icon(_outIsEqual);
return out_outIsEqual;
}
DLLExport
modelica_boolean omc_AbsynUtil_crefFirstEqual(threadData_t *threadData, modelica_metatype _iCr1, modelica_metatype _iCr2)
{
modelica_boolean _outBoolean;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outBoolean = (stringEqual(omc_AbsynUtil_crefFirstIdent(threadData, _iCr1), omc_AbsynUtil_crefFirstIdent(threadData, _iCr2)));
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_AbsynUtil_crefFirstEqual(threadData_t *threadData, modelica_metatype _iCr1, modelica_metatype _iCr2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_AbsynUtil_crefFirstEqual(threadData, _iCr1, _iCr2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_AbsynUtil_crefEqual(threadData_t *threadData, modelica_metatype _iCr1, modelica_metatype _iCr2)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _iCr1;
tmp4_2 = _iCr2;
{
modelica_string _id = NULL;
modelica_string _id2 = NULL;
modelica_metatype _ss1 = NULL;
modelica_metatype _ss2 = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_id = tmpMeta[0];
_ss1 = tmpMeta[1];
_id2 = tmpMeta[2];
_ss2 = tmpMeta[3];
tmp4 += 2;
tmp6 = (stringEqual(_id, _id2));
if (1 != tmp6) goto goto_2;
tmp7 = omc_AbsynUtil_subscriptsEqual(threadData, _ss1, _ss2);
if (1 != tmp7) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp8;
modelica_boolean tmp9;
modelica_boolean tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_id = tmpMeta[0];
_ss1 = tmpMeta[1];
_cr1 = tmpMeta[2];
_id2 = tmpMeta[3];
_ss2 = tmpMeta[4];
_cr2 = tmpMeta[5];
tmp4 += 1;
tmp8 = (stringEqual(_id, _id2));
if (1 != tmp8) goto goto_2;
tmp9 = omc_AbsynUtil_subscriptsEqual(threadData, _ss1, _ss2);
if (1 != tmp9) goto goto_2;
tmp10 = omc_AbsynUtil_crefEqual(threadData, _cr1, _cr2);
if (1 != tmp10) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_cr1 = tmpMeta[0];
_cr2 = tmpMeta[1];
tmp1 = omc_AbsynUtil_crefEqual(threadData, _cr1, _cr2);
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_AbsynUtil_crefEqual(threadData_t *threadData, modelica_metatype _iCr1, modelica_metatype _iCr2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_AbsynUtil_crefEqual(threadData, _iCr1, _iCr2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_metatype omc_AbsynUtil_setClassBody(threadData_t *threadData, modelica_metatype _inClass, modelica_metatype _inBody)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
{
modelica_metatype tmp3_1;
tmp3_1 = _outClass;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(9));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outClass), 9*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[7] = _inBody;
_outClass = tmpMeta[1];
tmpMeta[0] = _outClass;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_AbsynUtil_setClassName(threadData_t *threadData, modelica_metatype _inClass, modelica_string _newName)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outClass = _inClass;
{
modelica_metatype tmp3_1;
tmp3_1 = _outClass;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(9));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outClass), 9*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = _newName;
_outClass = tmpMeta[1];
tmpMeta[0] = _outClass;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_metatype omc_AbsynUtil_setClassFilename(threadData_t *threadData, modelica_metatype _inClass, modelica_string _fileName)
{
modelica_metatype _outClass = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inClass;
{
modelica_metatype _info = NULL;
modelica_metatype _cl = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 8));
_cl = tmp3_1;
_info = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(9));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_info), 9*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = _fileName;
_info = tmpMeta[1];
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(9));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_cl), 9*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[8] = _info;
_cl = tmpMeta[1];
tmpMeta[0] = _cl;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outClass = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outClass;
}
DLLExport
modelica_string omc_AbsynUtil_classFilename(threadData_t *threadData, modelica_metatype _inClass)
{
modelica_string _outFilename = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inClass;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 8));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_outFilename = tmpMeta[2];
_return: OMC_LABEL_UNUSED
return _outFilename;
}
DLLExport
modelica_metatype omc_AbsynUtil_lastClassname(threadData_t *threadData, modelica_metatype _inProgram)
{
modelica_metatype _outPath = NULL;
modelica_metatype _lst = NULL;
modelica_string _id = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inProgram;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_lst = tmpMeta[1];
tmpMeta[0] = omc_List_last(threadData, _lst);
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_id = tmpMeta[1];
tmpMeta[0] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_string omc_AbsynUtil_restrString(threadData_t *threadData, modelica_metatype _inRestriction)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inRestriction;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 20; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT36;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT37;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT38;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT39;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT40;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT41;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT42;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT43;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT44;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT45;
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT46;
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],2,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT47;
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT48;
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT49;
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT50;
goto tmp3_done;
}
case 15: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT51;
goto tmp3_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT52;
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT53;
goto tmp3_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,0) == 0) goto tmp3_end;
tmp1 = _OMC_LIT54;
goto tmp3_done;
}
case 19: {
tmp1 = _OMC_LIT55;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefMakeFullyQualified(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponentRef;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[0] = _inComponentRef;
goto tmp2_done;
}
case 1: {
tmpMeta[1] = mmc_mk_box2(3, &Absyn_ComponentRef_CREF__FULLYQUALIFIED__desc, _inComponentRef);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
DLLExport
modelica_boolean omc_AbsynUtil_crefIsFullyQualified(threadData_t *threadData, modelica_metatype _inCref)
{
modelica_boolean _outIsFullyQualified;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inCref;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsFullyQualified = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsFullyQualified;
}
modelica_metatype boxptr_AbsynUtil_crefIsFullyQualified(threadData_t *threadData, modelica_metatype _inCref)
{
modelica_boolean _outIsFullyQualified;
modelica_metatype out_outIsFullyQualified;
_outIsFullyQualified = omc_AbsynUtil_crefIsFullyQualified(threadData, _inCref);
out_outIsFullyQualified = mmc_mk_icon(_outIsFullyQualified);
return out_outIsFullyQualified;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefStripFirst(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponentRef;
{
modelica_metatype _cr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_cr = tmpMeta[1];
tmpMeta[0] = _cr;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_inComponentRef = _cr;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefFirstCref(threadData_t *threadData, modelica_metatype _inCref)
{
modelica_metatype _outCref = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inCref;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCref), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCref), 3))));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
_inCref = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCref), 2)));
goto _tailrecursive;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
tmpMeta[0] = _inCref;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCref;
}
DLLExport
modelica_string omc_AbsynUtil_crefSecondIdent(threadData_t *threadData, modelica_metatype _cref)
{
modelica_string _ident = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _cref;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmp1 = omc_AbsynUtil_crefFirstIdent(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 4))));
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
_cref = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2)));
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_ident = tmp1;
_return: OMC_LABEL_UNUSED
return _ident;
}
DLLExport
modelica_string omc_AbsynUtil_crefFirstIdent(threadData_t *threadData, modelica_metatype _inCref)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inCref;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCref), 2)));
goto tmp3_done;
}
case 4: {
tmp1 = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCref), 2)));
goto tmp3_done;
}
case 3: {
_inCref = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inCref), 2)));
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
DLLExport
modelica_metatype omc_AbsynUtil_joinCrefs(threadData_t *threadData, modelica_metatype _inComponentRef1, modelica_metatype _inComponentRef2)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inComponentRef1;
tmp3_2 = _inComponentRef2;
{
modelica_string _id = NULL;
modelica_metatype _sub = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _cr = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
modelica_boolean tmp4;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[1];
_sub = tmpMeta[2];
_cr2 = tmp3_2;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmpMeta[1] = _cr2;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,1) == 0) goto goto_5;
tmp4 = 1;
goto goto_5;
goto_5:;
MMC_CATCH_INTERNAL(mmc_jumper)
if (tmp4) {goto goto_1;}
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _id, _sub, _cr2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_id = tmpMeta[1];
_sub = tmpMeta[2];
_cr = tmpMeta[3];
_cr2 = tmp3_2;
_cr_1 = omc_AbsynUtil_joinCrefs(threadData, _cr, _cr2);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _id, _sub, _cr_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_cr2 = tmp3_2;
_cr_1 = omc_AbsynUtil_joinCrefs(threadData, _cr, _cr2);
tmpMeta[0] = omc_AbsynUtil_crefMakeFullyQualified(threadData, _cr_1);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefStripLastSubs(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponentRef;
{
modelica_string _id = NULL;
modelica_metatype _s = NULL;
modelica_metatype _cr_1 = NULL;
modelica_metatype _cr = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_id = tmpMeta[1];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_id = tmpMeta[1];
_s = tmpMeta[2];
_cr = tmpMeta[3];
_cr_1 = omc_AbsynUtil_crefStripLastSubs(threadData, _cr);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _id, _s, _cr_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_cr_1 = omc_AbsynUtil_crefStripLastSubs(threadData, _cr);
tmpMeta[0] = omc_AbsynUtil_crefMakeFullyQualified(threadData, _cr_1);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefGetLastSubs(threadData_t *threadData, modelica_metatype _cref)
{
modelica_metatype _subscripts = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _cref;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
tmpMeta[0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 3)));
goto tmp2_done;
}
case 4: {
_cref = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 4)));
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
_cref = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2)));
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_subscripts = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _subscripts;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefGetLastIdent(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponentRef;
{
modelica_metatype _cref = NULL;
modelica_string _id = NULL;
modelica_metatype _subs = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[1];
_subs = tmpMeta[2];
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, _subs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_cref = tmpMeta[1];
_inComponentRef = _cref;
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cref = tmpMeta[1];
_inComponentRef = _cref;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
DLLExport
modelica_metatype omc_AbsynUtil_getSubsFromCref(threadData_t *threadData, modelica_metatype _cr, modelica_boolean _includeSubs, modelica_boolean _includeFunctions)
{
modelica_metatype _subscripts = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _cr;
{
modelica_metatype _subs2 = NULL;
modelica_metatype _child = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_subs2 = tmpMeta[1];
tmpMeta[0] = _subs2;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_subs2 = tmpMeta[1];
_child = tmpMeta[2];
_subscripts = omc_AbsynUtil_getSubsFromCref(threadData, _child, _includeSubs, _includeFunctions);
tmpMeta[0] = omc_List_unionOnTrue(threadData, _subscripts, _subs2, boxvar_AbsynUtil_subscriptEqual);
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_child = tmpMeta[1];
_cr = _child;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_subscripts = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _subscripts;
}
modelica_metatype boxptr_AbsynUtil_getSubsFromCref(threadData_t *threadData, modelica_metatype _cr, modelica_metatype _includeSubs, modelica_metatype _includeFunctions)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _subscripts = NULL;
tmp1 = mmc_unbox_integer(_includeSubs);
tmp2 = mmc_unbox_integer(_includeFunctions);
_subscripts = omc_AbsynUtil_getSubsFromCref(threadData, _cr, tmp1, tmp2);
return _subscripts;
}
DLLExport
modelica_boolean omc_AbsynUtil_crefHasSubscripts(threadData_t *threadData, modelica_metatype _cref)
{
modelica_boolean _hasSubscripts;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _cref;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmp1 = (!listEmpty((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 3)))));
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!listEmpty(tmpMeta[0])) goto tmp3_end;
_cref = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 4)));
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
_cref = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_cref), 2)));
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,0) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
tmp1 = 0;
goto tmp3_done;
}
case 5: {
tmp1 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_hasSubscripts = tmp1;
_return: OMC_LABEL_UNUSED
return _hasSubscripts;
}
modelica_metatype boxptr_AbsynUtil_crefHasSubscripts(threadData_t *threadData, modelica_metatype _cref)
{
modelica_boolean _hasSubscripts;
modelica_metatype out_hasSubscripts;
_hasSubscripts = omc_AbsynUtil_crefHasSubscripts(threadData, _cref);
out_hasSubscripts = mmc_mk_icon(_hasSubscripts);
return out_hasSubscripts;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefSetLastSubs(threadData_t *threadData, modelica_metatype _inCref, modelica_metatype _inSubscripts)
{
modelica_metatype _outCref = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outCref = _inCref;
{
modelica_metatype tmp3_1;
tmp3_1 = _outCref;
{
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(4));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outCref), 4*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[3] = _inSubscripts;
_outCref = tmpMeta[1];
tmpMeta[0] = _outCref;
goto tmp2_done;
}
case 4: {
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(5));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outCref), 5*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[4] = omc_AbsynUtil_crefSetLastSubs(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outCref), 4))), _inSubscripts);
_outCref = tmpMeta[1];
tmpMeta[0] = _outCref;
goto tmp2_done;
}
case 3: {
tmpMeta[1] = MMC_TAGPTR(mmc_alloc_words(3));
memcpy(MMC_UNTAGPTR(tmpMeta[1]), MMC_UNTAGPTR(_outCref), 3*sizeof(modelica_metatype));
((modelica_metatype*)MMC_UNTAGPTR(tmpMeta[1]))[2] = omc_AbsynUtil_crefSetLastSubs(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_outCref), 2))), _inSubscripts);
_outCref = tmpMeta[1];
tmpMeta[0] = _outCref;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCref;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefLastSubs(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_metatype _outSubscriptLst = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponentRef;
{
modelica_metatype _subs = NULL;
modelica_metatype _cr = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_subs = tmpMeta[1];
tmpMeta[0] = _subs;
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_cr = tmpMeta[1];
_inComponentRef = _cr;
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_inComponentRef = _cr;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outSubscriptLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outSubscriptLst;
}
DLLExport
modelica_boolean omc_AbsynUtil_crefIsQual(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_boolean _outIsQual;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentRef;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
tmp1 = 1;
goto tmp3_done;
}
case 3: {
tmp1 = 1;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsQual = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsQual;
}
modelica_metatype boxptr_AbsynUtil_crefIsQual(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_boolean _outIsQual;
modelica_metatype out_outIsQual;
_outIsQual = omc_AbsynUtil_crefIsQual(threadData, _inComponentRef);
out_outIsQual = mmc_mk_icon(_outIsQual);
return out_outIsQual;
}
DLLExport
modelica_boolean omc_AbsynUtil_crefIsIdent(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_boolean _outIsIdent;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentRef;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsIdent;
}
modelica_metatype boxptr_AbsynUtil_crefIsIdent(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_boolean _outIsIdent;
modelica_metatype out_outIsIdent;
_outIsIdent = omc_AbsynUtil_crefIsIdent(threadData, _inComponentRef);
out_outIsIdent = mmc_mk_icon(_outIsIdent);
return out_outIsIdent;
}
DLLExport
modelica_string omc_AbsynUtil_crefFirstIdentNoSubs(threadData_t *threadData, modelica_metatype _inCref)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inCref;
{
modelica_string _id = NULL;
modelica_metatype _cr = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
_id = tmpMeta[0];
tmp1 = _id;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (!listEmpty(tmpMeta[1])) goto tmp3_end;
_id = tmpMeta[0];
tmp1 = _id;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr = tmpMeta[0];
_inCref = _cr;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
DLLExport
modelica_string omc_AbsynUtil_crefLastIdent(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inComponentRef;
{
modelica_metatype _cref = NULL;
modelica_string _id = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_id = tmpMeta[0];
tmp1 = _id;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_cref = tmpMeta[0];
_inComponentRef = _cref;
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cref = tmpMeta[0];
_inComponentRef = _cref;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathToCrefWithSubs(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _inSubs)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_string _i = NULL;
modelica_metatype _c = NULL;
modelica_metatype _p = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_i = tmpMeta[1];
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _i, _inSubs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_i = tmpMeta[1];
_p = tmpMeta[2];
_c = omc_AbsynUtil_pathToCrefWithSubs(threadData, _p, _inSubs);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _i, tmpMeta[1], _c);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_c = omc_AbsynUtil_pathToCrefWithSubs(threadData, _p, _inSubs);
tmpMeta[0] = omc_AbsynUtil_crefMakeFullyQualified(threadData, _c);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathToCref(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outComponentRef = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_string _i = NULL;
modelica_metatype _c = NULL;
modelica_metatype _p = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_i = tmpMeta[1];
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _i, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_i = tmpMeta[1];
_p = tmpMeta[2];
_c = omc_AbsynUtil_pathToCref(threadData, _p);
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _i, tmpMeta[1], _c);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_c = omc_AbsynUtil_pathToCref(threadData, _p);
tmpMeta[0] = omc_AbsynUtil_crefMakeFullyQualified(threadData, _c);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRef = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRef;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefToPathIgnoreSubs(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponentRef;
{
modelica_string _i = NULL;
modelica_metatype _p = NULL;
modelica_metatype _c = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_i = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _i);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_i = tmpMeta[1];
_c = tmpMeta[2];
_p = omc_AbsynUtil_crefToPathIgnoreSubs(threadData, _c);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _i, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_c = tmpMeta[1];
_p = omc_AbsynUtil_crefToPathIgnoreSubs(threadData, _c);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Path_FULLYQUALIFIED__desc, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_elementSpecToPath(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inElementSpec;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
tmpMeta[0] = _p;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefToPath(threadData_t *threadData, modelica_metatype _inComponentRef)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inComponentRef;
{
modelica_string _i = NULL;
modelica_metatype _p = NULL;
modelica_metatype _c = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_i = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _i);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_i = tmpMeta[1];
_c = tmpMeta[3];
_p = omc_AbsynUtil_crefToPath(threadData, _c);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _i, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_c = tmpMeta[1];
_p = omc_AbsynUtil_crefToPath(threadData, _c);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Path_FULLYQUALIFIED__desc, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_stripFirst(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_p = tmpMeta[1];
tmpMeta[0] = _p;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_inPath = _p;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_splitQualAndIdentPath(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype *out_outPath2)
{
modelica_metatype _outPath1 = NULL;
modelica_metatype _outPath2 = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_metatype _qPath = NULL;
modelica_metatype _curPath = NULL;
modelica_metatype _identPath = NULL;
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],1,1) == 0) goto tmp3_end;
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_s1 = tmpMeta[2];
_s2 = tmpMeta[4];
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _s1);
tmpMeta[3] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _s2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_s1 = tmpMeta[2];
_qPath = tmpMeta[3];
_curPath = omc_AbsynUtil_splitQualAndIdentPath(threadData, _qPath ,&_identPath);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _s1, _curPath);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _identPath;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_qPath = tmpMeta[2];
_inPath = _qPath;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outPath1 = tmpMeta[0+0];
_outPath2 = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outPath2) { *out_outPath2 = _outPath2; }
return _outPath1;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefStripLast(threadData_t *threadData, modelica_metatype _inCref)
{
modelica_metatype _outCref = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inCref;
{
modelica_string _str = NULL;
modelica_metatype _c_1 = NULL;
modelica_metatype _c = NULL;
modelica_metatype _subs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
goto goto_1;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[3],2,2) == 0) goto tmp2_end;
_str = tmpMeta[1];
_subs = tmpMeta[2];
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _str, _subs);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_str = tmpMeta[1];
_subs = tmpMeta[2];
_c = tmpMeta[3];
_c_1 = omc_AbsynUtil_crefStripLast(threadData, _c);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _str, _subs, _c_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_c = tmpMeta[1];
_c_1 = omc_AbsynUtil_crefStripLast(threadData, _c);
tmpMeta[0] = omc_AbsynUtil_crefMakeFullyQualified(threadData, _c_1);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCref;
}
DLLExport
modelica_metatype omc_AbsynUtil_stripLastOpt(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[0] = mmc_mk_none();
goto tmp2_done;
}
case 1: {
_p = omc_AbsynUtil_stripLast(threadData, _inPath);
tmpMeta[0] = mmc_mk_some(_p);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_stripLast(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_string _str = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp2_end;
_str = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _str);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_str = tmpMeta[1];
_p = tmpMeta[2];
_p = omc_AbsynUtil_stripLast(threadData, _p);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _str, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_p = omc_AbsynUtil_stripLast(threadData, _p);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Path_FULLYQUALIFIED__desc, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathAppendList(threadData_t *threadData, modelica_metatype _inPathLst)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPathLst;
{
modelica_metatype _path = NULL;
modelica_metatype _first = NULL;
modelica_metatype _rest = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _OMC_LIT56;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_path = tmpMeta[1];
tmpMeta[0] = _path;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_first = tmpMeta[1];
_rest = tmpMeta[2];
_path = omc_AbsynUtil_pathAppendList(threadData, _rest);
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _first, _path);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_selectPathsOpt(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inPath1;
tmp3_2 = _inPath2;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_1)) goto tmp2_end;
_p = tmp3_2;
tmpMeta[0] = _p;
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
_p = tmpMeta[1];
tmpMeta[0] = _p;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_joinPathsOptSuffix(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath2;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
_p = tmpMeta[1];
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _inPath1, _p);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inPath1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_joinPathsOpt(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath1;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _inPath2;
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
_p = tmpMeta[1];
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _p, _inPath2);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_joinPaths(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _inPath1;
tmp3_2 = _inPath2;
{
modelica_string _str = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _p_1 = NULL;
modelica_metatype _p = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_str = tmpMeta[1];
_p2 = tmp3_2;
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _str, _p2);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_str = tmpMeta[1];
_p = tmpMeta[2];
_p2 = tmp3_2;
_p_1 = omc_AbsynUtil_joinPaths(threadData, _p, _p2);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _str, _p_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_p2 = tmp3_2;
_inPath1 = _p;
_inPath2 = _p2;
goto _tailrecursive;
goto tmp2_done;
}
default:
tmp2_default: OMC_LABEL_UNUSED; {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
_p2 = tmpMeta[1];
_p = tmp3_1;
_inPath1 = _p;
_inPath2 = _p2;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_getCrefFromNarg(threadData_t *threadData, modelica_metatype _inNamedArg, modelica_boolean _includeSubs, modelica_boolean _includeFunctions)
{
modelica_metatype _outComponentRefLst = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inNamedArg;
{
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 1; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_exp = tmpMeta[1];
tmpMeta[0] = omc_AbsynUtil_getCrefFromExp(threadData, _exp, _includeSubs, _includeFunctions);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRefLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRefLst;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_getCrefFromNarg(threadData_t *threadData, modelica_metatype _inNamedArg, modelica_metatype _includeSubs, modelica_metatype _includeFunctions)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outComponentRefLst = NULL;
tmp1 = mmc_unbox_integer(_includeSubs);
tmp2 = mmc_unbox_integer(_includeFunctions);
_outComponentRefLst = omc_AbsynUtil_getCrefFromNarg(threadData, _inNamedArg, tmp1, tmp2);
return _outComponentRefLst;
}
DLLExport
modelica_metatype omc_AbsynUtil_getNamedFuncArgNamesAndValues(threadData_t *threadData, modelica_metatype _inNamedArgList, modelica_metatype *out_outExpList)
{
modelica_metatype _outStringList = NULL;
modelica_metatype _outExpList = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inNamedArgList;
{
modelica_metatype _cdr = NULL;
modelica_string _s = NULL;
modelica_metatype _e = NULL;
modelica_metatype _slst = NULL;
modelica_metatype _elst = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[3] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
case 1: {
if (listEmpty(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_CAR(tmp4_1);
tmpMeta[3] = MMC_CDR(tmp4_1);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 2));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 3));
_s = tmpMeta[4];
_e = tmpMeta[5];
_cdr = tmpMeta[3];
_slst = omc_AbsynUtil_getNamedFuncArgNamesAndValues(threadData, _cdr ,&_elst);
tmpMeta[2] = mmc_mk_cons(_s, _slst);
tmpMeta[3] = mmc_mk_cons(_e, _elst);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = tmpMeta[3];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outStringList = tmpMeta[0+0];
_outExpList = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outExpList) { *out_outExpList = _outExpList; }
return _outStringList;
}
DLLExport
modelica_metatype omc_AbsynUtil_iteratorGuard(threadData_t *threadData, modelica_metatype _iterator)
{
modelica_metatype _guardExp = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _iterator;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_guardExp = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _guardExp;
}
DLLExport
modelica_metatype omc_AbsynUtil_iteratorRange(threadData_t *threadData, modelica_metatype _iterator)
{
modelica_metatype _range = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _iterator;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_range = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _range;
}
DLLExport
modelica_string omc_AbsynUtil_iteratorName(threadData_t *threadData, modelica_metatype _iterator)
{
modelica_string _name = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _iterator;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_name = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _name;
}
DLLExport
modelica_metatype omc_AbsynUtil_getCrefFromFarg(threadData_t *threadData, modelica_metatype _inFunctionArgs, modelica_boolean _includeSubs, modelica_boolean _includeFunctions)
{
modelica_metatype _outComponentRefLst = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inFunctionArgs;
{
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _fl1 = NULL;
modelica_metatype _fl2 = NULL;
modelica_metatype _fl3 = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _nargl = NULL;
modelica_metatype _iterators = NULL;
modelica_metatype _exp = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_expl = tmpMeta[1];
_nargl = tmpMeta[2];
_l1 = omc_List_map2(threadData, _expl, boxvar_AbsynUtil_getCrefFromExp, mmc_mk_boolean(_includeSubs), mmc_mk_boolean(_includeFunctions));
_fl1 = omc_List_flatten(threadData, _l1);
_l2 = omc_List_map2(threadData, _nargl, boxvar_AbsynUtil_getCrefFromNarg, mmc_mk_boolean(_includeSubs), mmc_mk_boolean(_includeFunctions));
_fl2 = omc_List_flatten(threadData, _l2);
tmpMeta[0] = listAppend(_fl1, _fl2);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_exp = tmpMeta[1];
_iterators = tmpMeta[2];
_l1 = omc_List_map2Option(threadData, omc_List_map(threadData, _iterators, boxvar_AbsynUtil_iteratorRange), boxvar_AbsynUtil_getCrefFromExp, mmc_mk_boolean(_includeSubs), mmc_mk_boolean(_includeFunctions));
_l2 = omc_List_map2Option(threadData, omc_List_map(threadData, _iterators, boxvar_AbsynUtil_iteratorGuard), boxvar_AbsynUtil_getCrefFromExp, mmc_mk_boolean(_includeSubs), mmc_mk_boolean(_includeFunctions));
_fl1 = omc_List_flatten(threadData, _l1);
_fl2 = omc_List_flatten(threadData, _l2);
_fl3 = omc_AbsynUtil_getCrefFromExp(threadData, _exp, _includeSubs, _includeFunctions);
tmpMeta[0] = listAppend(_fl1, listAppend(_fl2, _fl3));
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRefLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRefLst;
}
modelica_metatype boxptr_AbsynUtil_getCrefFromFarg(threadData_t *threadData, modelica_metatype _inFunctionArgs, modelica_metatype _includeSubs, modelica_metatype _includeFunctions)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outComponentRefLst = NULL;
tmp1 = mmc_unbox_integer(_includeSubs);
tmp2 = mmc_unbox_integer(_includeFunctions);
_outComponentRefLst = omc_AbsynUtil_getCrefFromFarg(threadData, _inFunctionArgs, tmp1, tmp2);
return _outComponentRefLst;
}
DLLExport
modelica_metatype omc_AbsynUtil_getCrefFromExp(threadData_t *threadData, modelica_metatype _inExp, modelica_boolean _includeSubs, modelica_boolean _includeFunctions)
{
modelica_metatype _outComponentRefLst = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_boolean tmp3_2;
tmp3_1 = _inExp;
tmp3_2 = _includeSubs;
{
modelica_metatype _cr = NULL;
modelica_metatype _l1 = NULL;
modelica_metatype _l2 = NULL;
modelica_metatype _res = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _farg = NULL;
modelica_metatype _expl = NULL;
modelica_metatype _expll = NULL;
modelica_metatype _subs = NULL;
modelica_metatype _lstres1 = NULL;
modelica_metatype _crefll = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 29; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],4,0) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],3,0) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 6: {
if (0 != tmp3_2) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
tmpMeta[1] = mmc_mk_cons(_cr, MMC_REFSTRUCTLIT(mmc_nil));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 7: {
if (1 != tmp3_2) goto tmp2_end;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_subs = omc_AbsynUtil_getSubsFromCref(threadData, _cr, _includeSubs, _includeFunctions);
_l1 = omc_AbsynUtil_getCrefsFromSubs(threadData, _subs, _includeSubs, _includeFunctions);
tmpMeta[1] = mmc_mk_cons(_cr, _l1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_l1 = omc_AbsynUtil_getCrefFromExp(threadData, _e1, _includeSubs, _includeFunctions);
_l2 = omc_AbsynUtil_getCrefFromExp(threadData, _e2, _includeSubs, _includeFunctions);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,6,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[1];
_inExp = _e1;
goto _tailrecursive;
goto tmp2_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_l1 = omc_AbsynUtil_getCrefFromExp(threadData, _e1, _includeSubs, _includeFunctions);
_l2 = omc_AbsynUtil_getCrefFromExp(threadData, _e2, _includeSubs, _includeFunctions);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,8,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[1];
_inExp = _e1;
goto _tailrecursive;
goto tmp2_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,9,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_l1 = omc_AbsynUtil_getCrefFromExp(threadData, _e1, _includeSubs, _includeFunctions);
_l2 = omc_AbsynUtil_getCrefFromExp(threadData, _e2, _includeSubs, _includeFunctions);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,10,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_e3 = tmpMeta[3];
tmpMeta[1] = mmc_mk_cons(omc_AbsynUtil_getCrefFromExp(threadData, _e1, _includeSubs, _includeFunctions), mmc_mk_cons(omc_AbsynUtil_getCrefFromExp(threadData, _e2, _includeSubs, _includeFunctions), mmc_mk_cons(omc_AbsynUtil_getCrefFromExp(threadData, _e3, _includeSubs, _includeFunctions), MMC_REFSTRUCTLIT(mmc_nil))));
tmpMeta[0] = omc_List_flatten(threadData, tmpMeta[1]);
goto tmp2_done;
}
case 14: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,11,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr = tmpMeta[1];
_farg = tmpMeta[2];
_res = omc_AbsynUtil_getCrefFromFarg(threadData, _farg, _includeSubs, _includeFunctions);
tmp5 = (modelica_boolean)_includeFunctions;
if(tmp5)
{
tmpMeta[1] = mmc_mk_cons(_cr, _res);
tmpMeta[2] = tmpMeta[1];
}
else
{
tmpMeta[2] = _res;
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 15: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,12,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_cr = tmpMeta[1];
_farg = tmpMeta[2];
_res = omc_AbsynUtil_getCrefFromFarg(threadData, _farg, _includeSubs, _includeFunctions);
tmp6 = (modelica_boolean)_includeFunctions;
if(tmp6)
{
tmpMeta[1] = mmc_mk_cons(_cr, _res);
tmpMeta[2] = tmpMeta[1];
}
else
{
tmpMeta[2] = _res;
}
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 16: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,13,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_expl = tmpMeta[1];
_lstres1 = omc_List_map2(threadData, _expl, boxvar_AbsynUtil_getCrefFromExp, mmc_mk_boolean(_includeSubs), mmc_mk_boolean(_includeFunctions));
tmpMeta[0] = omc_List_flatten(threadData, _lstres1);
goto tmp2_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,14,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_expll = tmpMeta[1];
tmpMeta[0] = omc_List_flatten(threadData, omc_List_flatten(threadData, omc_List_map2List(threadData, _expll, boxvar_AbsynUtil_getCrefFromExp, mmc_mk_boolean(_includeSubs), mmc_mk_boolean(_includeFunctions))));
goto tmp2_done;
}
case 18: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,15,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[2]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e3 = tmpMeta[3];
_e2 = tmpMeta[4];
_l1 = omc_AbsynUtil_getCrefFromExp(threadData, _e1, _includeSubs, _includeFunctions);
_l2 = omc_AbsynUtil_getCrefFromExp(threadData, _e2, _includeSubs, _includeFunctions);
_l2 = listAppend(_l1, _l2);
_l1 = omc_AbsynUtil_getCrefFromExp(threadData, _e3, _includeSubs, _includeFunctions);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 19: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,15,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (!optionNone(tmpMeta[2])) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_e1 = tmpMeta[1];
_e2 = tmpMeta[3];
_l1 = omc_AbsynUtil_getCrefFromExp(threadData, _e1, _includeSubs, _includeFunctions);
_l2 = omc_AbsynUtil_getCrefFromExp(threadData, _e2, _includeSubs, _includeFunctions);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,17,0) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,16,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_expl = tmpMeta[1];
_crefll = omc_List_map2(threadData, _expl, boxvar_AbsynUtil_getCrefFromExp, mmc_mk_boolean(_includeSubs), mmc_mk_boolean(_includeFunctions));
tmpMeta[0] = omc_List_flatten(threadData, _crefll);
goto tmp2_done;
}
case 22: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,18,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 23: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,19,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[1];
_inExp = _e1;
goto _tailrecursive;
goto tmp2_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,20,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_l1 = omc_AbsynUtil_getCrefFromExp(threadData, _e1, _includeSubs, _includeFunctions);
_l2 = omc_AbsynUtil_getCrefFromExp(threadData, _e2, _includeSubs, _includeFunctions);
tmpMeta[0] = listAppend(_l1, _l2);
goto tmp2_done;
}
case 25: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,22,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_expl = tmpMeta[1];
_crefll = omc_List_map2(threadData, _expl, boxvar_AbsynUtil_getCrefFromExp, mmc_mk_boolean(_includeSubs), mmc_mk_boolean(_includeFunctions));
tmpMeta[0] = omc_List_flatten(threadData, _crefll);
goto tmp2_done;
}
case 26: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,21,5) == 0) goto tmp2_end;
goto goto_1;
goto tmp2_done;
}
case 27: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,23,2) == 0) goto tmp2_end;
_inExp = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2)));
goto _tailrecursive;
goto tmp2_done;
}
case 28: {
tmpMeta[1] = stringAppend(_OMC_LIT57,omc_Dump_printExpStr(threadData, _inExp));
omc_Error_addInternalError(threadData, tmpMeta[1], _OMC_LIT59);
goto goto_1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outComponentRefLst = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outComponentRefLst;
}
modelica_metatype boxptr_AbsynUtil_getCrefFromExp(threadData_t *threadData, modelica_metatype _inExp, modelica_metatype _includeSubs, modelica_metatype _includeFunctions)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _outComponentRefLst = NULL;
tmp1 = mmc_unbox_integer(_includeSubs);
tmp2 = mmc_unbox_integer(_includeFunctions);
_outComponentRefLst = omc_AbsynUtil_getCrefFromExp(threadData, _inExp, tmp1, tmp2);
return _outComponentRefLst;
}
DLLExport
modelica_metatype omc_AbsynUtil_getCrefsFromSubs(threadData_t *threadData, modelica_metatype _isubs, modelica_boolean _includeSubs, modelica_boolean _includeFunctions)
{
modelica_metatype _crefs = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _isubs;
{
modelica_metatype _crefs1 = NULL;
modelica_metatype _exp = NULL;
modelica_metatype _subs = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],0,0) == 0) goto tmp2_end;
_subs = tmpMeta[2];
_isubs = _subs;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_exp = tmpMeta[3];
_subs = tmpMeta[2];
_crefs1 = omc_AbsynUtil_getCrefsFromSubs(threadData, _subs, _includeSubs, _includeFunctions);
_crefs = omc_AbsynUtil_getCrefFromExp(threadData, _exp, _includeSubs, _includeFunctions);
tmpMeta[0] = listAppend(_crefs, _crefs1);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_crefs = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _crefs;
}
modelica_metatype boxptr_AbsynUtil_getCrefsFromSubs(threadData_t *threadData, modelica_metatype _isubs, modelica_metatype _includeSubs, modelica_metatype _includeFunctions)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_metatype _crefs = NULL;
tmp1 = mmc_unbox_integer(_includeSubs);
tmp2 = mmc_unbox_integer(_includeFunctions);
_crefs = omc_AbsynUtil_getCrefsFromSubs(threadData, _isubs, tmp1, tmp2);
return _crefs;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathContainedIn(threadData_t *threadData, modelica_metatype _subPath, modelica_metatype _path)
{
modelica_metatype _completePath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _ident = NULL;
modelica_metatype _newPath = NULL;
modelica_metatype _newSubPath = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
tmp5 = omc_AbsynUtil_pathSuffixOf(threadData, _subPath, _path);
if (1 != tmp5) goto goto_1;
tmpMeta[0] = _path;
goto tmp2_done;
}
case 1: {
_ident = omc_AbsynUtil_pathLastIdent(threadData, _path);
_newPath = omc_AbsynUtil_stripLast(threadData, _path);
_newPath = omc_AbsynUtil_pathContainedIn(threadData, _subPath, _newPath);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _ident);
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _newPath, tmpMeta[1]);
goto tmp2_done;
}
case 2: {
_ident = omc_AbsynUtil_pathLastIdent(threadData, _subPath);
_newSubPath = omc_AbsynUtil_stripLast(threadData, _subPath);
_newSubPath = omc_AbsynUtil_pathContainedIn(threadData, _newSubPath, _path);
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _ident);
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _newSubPath, tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_completePath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _completePath;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathContainsString(threadData_t *threadData, modelica_metatype _p1, modelica_string _str)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_string tmp4_2;
tmp4_1 = _p1;
tmp4_2 = _str;
{
modelica_string _str1 = NULL;
modelica_string _searchStr = NULL;
modelica_metatype _qp = NULL;
modelica_boolean _b1;
modelica_boolean _b2;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_str1 = tmpMeta[0];
_searchStr = tmp4_2;
tmp1 = (omc_System_stringFind(threadData, _str1, _searchStr) != ((modelica_integer) -1));
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_str1 = tmpMeta[0];
_qp = tmpMeta[1];
_searchStr = tmp4_2;
_b1 = (omc_System_stringFind(threadData, _str1, _searchStr) != ((modelica_integer) -1));
_b2 = omc_AbsynUtil_pathContainsString(threadData, _qp, _searchStr);
tmp1 = (_b1 || _b2);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_qp = tmpMeta[0];
_searchStr = tmp4_2;
_p1 = _qp;
_str = _searchStr;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_pathContainsString(threadData_t *threadData, modelica_metatype _p1, modelica_metatype _str)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_pathContainsString(threadData, _p1, _str);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathContains(threadData_t *threadData, modelica_metatype _fullPath, modelica_metatype _pathId)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _fullPath;
tmp4_2 = _pathId;
{
modelica_string _str1 = NULL;
modelica_string _str2 = NULL;
modelica_metatype _qp = NULL;
modelica_boolean _b1;
modelica_boolean _b2;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_str1 = tmpMeta[0];
_str2 = tmpMeta[1];
tmp1 = (stringEqual(_str1, _str2));
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_str1 = tmpMeta[0];
_qp = tmpMeta[1];
_str2 = tmpMeta[2];
_b1 = (stringEqual(_str1, _str2));
_b2 = omc_AbsynUtil_pathContains(threadData, _qp, _pathId);
tmp1 = (_b1 || _b2);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_qp = tmpMeta[0];
_fullPath = _qp;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_pathContains(threadData_t *threadData, modelica_metatype _fullPath, modelica_metatype _pathId)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_pathContains(threadData, _fullPath, _pathId);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefRemovePrefix(threadData_t *threadData, modelica_metatype _prefixCr, modelica_metatype _cr)
{
modelica_metatype _out = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _prefixCr;
tmp3_2 = _cr;
{
modelica_string _prefixIdent = NULL;
modelica_string _ident = NULL;
modelica_metatype _prefixRestCr = NULL;
modelica_metatype _restCr = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,1) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
_prefixRestCr = tmpMeta[1];
_restCr = tmpMeta[2];
_prefixCr = _prefixRestCr;
_cr = _restCr;
goto _tailrecursive;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,3) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_prefixIdent = tmpMeta[1];
_prefixRestCr = tmpMeta[2];
_ident = tmpMeta[3];
_restCr = tmpMeta[4];
tmp5 = (stringEqual(_prefixIdent, _ident));
if (1 != tmp5) goto goto_1;
_prefixCr = _prefixRestCr;
_cr = _restCr;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,1,3) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 4));
_prefixIdent = tmpMeta[1];
_ident = tmpMeta[2];
_restCr = tmpMeta[3];
tmp6 = (stringEqual(_prefixIdent, _ident));
if (1 != tmp6) goto goto_1;
tmpMeta[0] = _restCr;
goto tmp2_done;
}
case 3: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
_prefixIdent = tmpMeta[1];
_ident = tmpMeta[2];
tmp7 = (stringEqual(_prefixIdent, _ident));
if (1 != tmp7) goto goto_1;
tmpMeta[0] = _OMC_LIT60;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_out = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _out;
}
DLLExport
modelica_metatype omc_AbsynUtil_removePartialPrefix(threadData_t *threadData, modelica_metatype _inPrefix, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _inPrefix;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 4; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
tmpMeta[0] = omc_AbsynUtil_removePrefix(threadData, _inPrefix, _inPath);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_p = tmpMeta[1];
tmp3 += 1;
tmpMeta[0] = omc_AbsynUtil_removePrefix(threadData, _p, _inPath);
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
tmpMeta[0] = omc_AbsynUtil_removePartialPrefix(threadData, _p, _inPath);
goto tmp2_done;
}
case 3: {
tmpMeta[0] = _inPath;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 4) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_removePrefix(threadData_t *threadData, modelica_metatype _prefix_path, modelica_metatype _path)
{
modelica_metatype _newPath = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_metatype tmp3_2;
tmp3_1 = _prefix_path;
tmp3_2 = _path;
{
modelica_metatype _p = NULL;
modelica_metatype _p2 = NULL;
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
_p2 = tmpMeta[1];
_p = tmp3_1;
_prefix_path = _p;
_path = _p2;
goto _tailrecursive;
goto tmp2_done;
}
case 1: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,2) == 0) goto tmp2_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_id1 = tmpMeta[1];
_p = tmpMeta[2];
_id2 = tmpMeta[3];
_p2 = tmpMeta[4];
tmp5 = (stringEqual(_id1, _id2));
if (1 != tmp5) goto goto_1;
_prefix_path = _p;
_path = _p2;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp3_2,0,2) == 0) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_2), 3));
_id1 = tmpMeta[1];
_id2 = tmpMeta[2];
_p2 = tmpMeta[3];
tmp6 = (stringEqual(_id1, _id2));
if (1 != tmp6) goto goto_1;
tmpMeta[0] = _p2;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_newPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _newPath;
}
DLLExport
modelica_boolean omc_AbsynUtil_crefPrefixOf(threadData_t *threadData, modelica_metatype _prefixCr, modelica_metatype _cr)
{
modelica_boolean _out;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
tmp6 = omc_AbsynUtil_crefEqualNoSubs(threadData, _prefixCr, _cr);
if (1 != tmp6) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = omc_AbsynUtil_crefPrefixOf(threadData, _prefixCr, omc_AbsynUtil_crefStripLast(threadData, _cr));
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_out = tmp1;
_return: OMC_LABEL_UNUSED
return _out;
}
modelica_metatype boxptr_AbsynUtil_crefPrefixOf(threadData_t *threadData, modelica_metatype _prefixCr, modelica_metatype _cr)
{
modelica_boolean _out;
modelica_metatype out_out;
_out = omc_AbsynUtil_crefPrefixOf(threadData, _prefixCr, _cr);
out_out = mmc_mk_icon(_out);
return out_out;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathPrefixOf(threadData_t *threadData, modelica_metatype _prefixPath, modelica_metatype _path)
{
modelica_boolean _isPrefix;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _prefixPath;
tmp4_2 = _path;
{
modelica_metatype _p = NULL;
modelica_metatype _p2 = NULL;
modelica_string _id = NULL;
modelica_string _id2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta[0];
_p2 = tmp4_2;
tmp1 = omc_AbsynUtil_pathPrefixOf(threadData, _p, _p2);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p2 = tmpMeta[0];
_p = tmp4_1;
tmp4 += 3;
tmp1 = omc_AbsynUtil_pathPrefixOf(threadData, _p, _p2);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_id = tmpMeta[0];
_id2 = tmpMeta[1];
tmp4 += 2;
tmp1 = (stringEqual(_id, _id2));
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_id = tmpMeta[0];
_id2 = tmpMeta[1];
tmp4 += 1;
tmp1 = (stringEqual(_id, _id2));
goto tmp3_done;
}
case 4: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_id = tmpMeta[0];
_p = tmpMeta[1];
_id2 = tmpMeta[2];
_p2 = tmpMeta[3];
tmp6 = (stringEqual(_id, _id2));
if (1 != tmp6) goto goto_2;
tmp7 = omc_AbsynUtil_pathPrefixOf(threadData, _p, _p2);
if (1 != tmp7) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 5: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 6) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_isPrefix = tmp1;
_return: OMC_LABEL_UNUSED
return _isPrefix;
}
modelica_metatype boxptr_AbsynUtil_pathPrefixOf(threadData_t *threadData, modelica_metatype _prefixPath, modelica_metatype _path)
{
modelica_boolean _isPrefix;
modelica_metatype out_isPrefix;
_isPrefix = omc_AbsynUtil_pathPrefixOf(threadData, _prefixPath, _path);
out_isPrefix = mmc_mk_icon(_isPrefix);
return out_isPrefix;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefReplaceFirstIdent(threadData_t *threadData, modelica_metatype _icref, modelica_metatype _replPath)
{
modelica_metatype _outCref = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _icref;
{
modelica_metatype _subs = NULL;
modelica_metatype _cr = NULL;
modelica_metatype _cref = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_cr = omc_AbsynUtil_crefReplaceFirstIdent(threadData, _cr, _replPath);
tmpMeta[0] = omc_AbsynUtil_crefMakeFullyQualified(threadData, _cr);
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_subs = tmpMeta[1];
_cr = tmpMeta[2];
_cref = omc_AbsynUtil_pathToCref(threadData, _replPath);
_cref = omc_AbsynUtil_addSubscriptsLast(threadData, _cref, _subs);
tmpMeta[0] = omc_AbsynUtil_joinCrefs(threadData, _cref, _cr);
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_subs = tmpMeta[1];
_cref = omc_AbsynUtil_pathToCref(threadData, _replPath);
tmpMeta[0] = omc_AbsynUtil_addSubscriptsLast(threadData, _cref, _subs);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outCref = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outCref;
}
DLLExport
modelica_metatype omc_AbsynUtil_addSubscriptsLast(threadData_t *threadData, modelica_metatype _icr, modelica_metatype _i)
{
modelica_metatype _ocr = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _icr;
{
modelica_metatype _subs = NULL;
modelica_string _id = NULL;
modelica_metatype _cr = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_id = tmpMeta[1];
_subs = tmpMeta[2];
tmpMeta[1] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _id, listAppend(_subs, _i));
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_id = tmpMeta[1];
_subs = tmpMeta[2];
_cr = tmpMeta[3];
_cr = omc_AbsynUtil_addSubscriptsLast(threadData, _cr, _i);
tmpMeta[1] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _id, _subs, _cr);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_cr = tmpMeta[1];
_cr = omc_AbsynUtil_addSubscriptsLast(threadData, _cr, _i);
tmpMeta[0] = omc_AbsynUtil_crefMakeFullyQualified(threadData, _cr);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_ocr = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _ocr;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathReplaceFirstIdent(threadData_t *threadData, modelica_metatype _path, modelica_metatype _replPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _path;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_p = tmpMeta[1];
tmpMeta[0] = omc_AbsynUtil_joinPaths(threadData, _replPath, _p);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[0] = _replPath;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_pathToStringListWork(threadData_t *threadData, modelica_metatype _path, modelica_metatype _acc)
{
modelica_metatype _outPaths = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _path;
{
modelica_string _n = NULL;
modelica_metatype _p = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_n = tmpMeta[1];
tmpMeta[1] = mmc_mk_cons(_n, _acc);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_path = _p;
goto _tailrecursive;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_n = tmpMeta[1];
_p = tmpMeta[2];
tmpMeta[1] = mmc_mk_cons(_n, _acc);
_path = _p;
_acc = tmpMeta[1];
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPaths = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPaths;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathToStringList(threadData_t *threadData, modelica_metatype _path)
{
modelica_metatype _outPaths = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = MMC_REFSTRUCTLIT(mmc_nil);
_outPaths = listReverse(omc_AbsynUtil_pathToStringListWork(threadData, _path, tmpMeta[0]));
_return: OMC_LABEL_UNUSED
return _outPaths;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathSuffixOfr(threadData_t *threadData, modelica_metatype _path, modelica_metatype _suffix_path)
{
modelica_boolean _res;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_res = omc_AbsynUtil_pathSuffixOf(threadData, _suffix_path, _path);
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_AbsynUtil_pathSuffixOfr(threadData_t *threadData, modelica_metatype _path, modelica_metatype _suffix_path)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_AbsynUtil_pathSuffixOfr(threadData, _path, _suffix_path);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathSuffixOf(threadData_t *threadData, modelica_metatype _suffix_path, modelica_metatype _path)
{
modelica_boolean _res;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;
tmp4_1 = _path;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 4; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
tmp6 = omc_AbsynUtil_pathEqual(threadData, _suffix_path, _path);
if (1 != tmp6) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta[0];
tmp4 += 1;
tmp1 = omc_AbsynUtil_pathSuffixOf(threadData, _suffix_path, _p);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_p = tmpMeta[0];
tmp1 = omc_AbsynUtil_pathSuffixOf(threadData, _suffix_path, _p);
goto tmp3_done;
}
case 3: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 4) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_res = tmp1;
_return: OMC_LABEL_UNUSED
return _res;
}
modelica_metatype boxptr_AbsynUtil_pathSuffixOf(threadData_t *threadData, modelica_metatype _suffix_path, modelica_metatype _path)
{
modelica_boolean _res;
modelica_metatype out_res;
_res = omc_AbsynUtil_pathSuffixOf(threadData, _suffix_path, _path);
out_res = mmc_mk_icon(_res);
return out_res;
}
DLLExport
modelica_metatype omc_AbsynUtil_suffixPath(threadData_t *threadData, modelica_metatype _inPath, modelica_string _inSuffix)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_string _name = NULL;
modelica_metatype _path = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_name = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _inSuffix);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _name, tmpMeta[1]);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_name = tmpMeta[1];
_path = tmpMeta[2];
_path = omc_AbsynUtil_suffixPath(threadData, _path, _inSuffix);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _name, _path);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_path = tmpMeta[1];
_path = omc_AbsynUtil_suffixPath(threadData, _path, _inSuffix);
tmpMeta[1] = mmc_mk_box2(5, &Absyn_Path_FULLYQUALIFIED__desc, _path);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_prefixOptPath(threadData_t *threadData, modelica_string _prefix, modelica_metatype _optPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _optPath;
{
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _prefix);
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
case 1: {
if (optionNone(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 1));
_path = tmpMeta[1];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _prefix, _path);
tmpMeta[0] = mmc_mk_some(tmpMeta[1]);
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_prefixPath(threadData_t *threadData, modelica_string _prefix, modelica_metatype _path)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _prefix, _path);
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathPrefix(threadData_t *threadData, modelica_metatype _path)
{
modelica_metatype _prefix = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _path;
{
modelica_metatype _p = NULL;
modelica_string _n = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
tmp3 += 2;
tmpMeta[0] = omc_AbsynUtil_pathPrefix(threadData, _p);
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[2],1,1) == 0) goto tmp2_end;
_n = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _n);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_n = tmpMeta[1];
_p = tmpMeta[2];
_p = omc_AbsynUtil_pathPrefix(threadData, _p);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _n, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 3) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_prefix = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _prefix;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathStripSamePrefix(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
{
modelica_string _ident1 = NULL;
modelica_string _ident2 = NULL;
modelica_metatype _path1 = NULL;
modelica_metatype _path2 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
modelica_boolean tmp5;
_ident1 = omc_AbsynUtil_pathFirstIdent(threadData, _inPath1);
_ident2 = omc_AbsynUtil_pathFirstIdent(threadData, _inPath2);
tmp5 = (stringEqual(_ident1, _ident2));
if (1 != tmp5) goto goto_1;
_path1 = omc_AbsynUtil_stripFirst(threadData, _inPath1);
_path2 = omc_AbsynUtil_stripFirst(threadData, _inPath2);
tmpMeta[0] = omc_AbsynUtil_pathStripSamePrefix(threadData, _path1, _path2);
goto tmp2_done;
}
case 1: {
tmpMeta[0] = _inPath1;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathRest(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_outPath = tmpMeta[1];
tmpMeta[0] = _outPath;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_outPath = tmpMeta[1];
_inPath = _outPath;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_string omc_AbsynUtil_pathSecondIdent(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_string _n = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,2) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_n = tmpMeta[1];
tmp1 = _n;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_n = tmpMeta[1];
tmp1 = _n;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta[0];
_inPath = _p;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathFirstPath(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_string _n = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 4: {
tmpMeta[0] = _inPath;
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_n = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _n);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_outPath = tmpMeta[1];
_inPath = _outPath;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_string omc_AbsynUtil_pathFirstIdent(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_string _n = NULL;
modelica_metatype _p = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta[0];
_inPath = _p;
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_n = tmpMeta[0];
tmp1 = _n;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_n = tmpMeta[0];
tmp1 = _n;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathLast(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fpath)
{
modelica_metatype _path = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_path = __omcQ_24in_5Fpath;
{
modelica_metatype tmp3_1;
tmp3_1 = _path;
{
modelica_metatype _p = NULL;
int tmp3;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp3_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_p = tmpMeta[1];
__omcQ_24in_5Fpath = _p;
goto _tailrecursive;
goto tmp2_done;
}
case 4: {
tmpMeta[0] = _path;
goto tmp2_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
__omcQ_24in_5Fpath = _p;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_path = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _path;
}
DLLExport
modelica_string omc_AbsynUtil_pathLastIdent(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPath;
{
modelica_string _id = NULL;
modelica_metatype _p = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_p = tmpMeta[0];
_inPath = _p;
goto _tailrecursive;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_id = tmpMeta[0];
tmp1 = _id;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta[0];
_inPath = _p;
goto _tailrecursive;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
DLLExport
modelica_metatype omc_AbsynUtil_pathTwoLastIdents(threadData_t *threadData, modelica_metatype _inPath)
{
modelica_metatype _outTwoLast = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inPath;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[1],1,1) == 0) goto tmp2_end;
tmpMeta[0] = _inPath;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_p = tmpMeta[1];
_inPath = _p;
goto _tailrecursive;
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
_inPath = _p;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outTwoLast = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTwoLast;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_stringListPathReversed2(threadData_t *threadData, modelica_metatype _inStrings, modelica_metatype _inAccumPath)
{
modelica_metatype _outPath = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inStrings;
{
modelica_string _id = NULL;
modelica_metatype _rest_str = NULL;
modelica_metatype _path = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[0] = _inAccumPath;
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_id = tmpMeta[1];
_rest_str = tmpMeta[2];
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _id, _inAccumPath);
_path = tmpMeta[1];
_inStrings = _rest_str;
_inAccumPath = _path;
goto _tailrecursive;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_stringListPathReversed(threadData_t *threadData, modelica_metatype _inStrings)
{
modelica_metatype _outPath = NULL;
modelica_string _id = NULL;
modelica_metatype _rest_str = NULL;
modelica_metatype _path = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inStrings;
if (listEmpty(tmpMeta[0])) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
_id = tmpMeta[1];
_rest_str = tmpMeta[2];
tmpMeta[0] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_path = tmpMeta[0];
_outPath = omc_AbsynUtil_stringListPathReversed2(threadData, _rest_str, _path);
_return: OMC_LABEL_UNUSED
return _outPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_stringListPath(threadData_t *threadData, modelica_metatype _paths)
{
modelica_metatype _qualifiedPath = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;
tmp3_1 = _paths;
{
modelica_string _str = NULL;
modelica_metatype _rest_str = NULL;
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
if (!listEmpty(tmpMeta[2])) goto tmp2_end;
_str = tmpMeta[1];
tmpMeta[1] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _str);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_str = tmpMeta[1];
_rest_str = tmpMeta[2];
_p = omc_AbsynUtil_stringListPath(threadData, _rest_str);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _str, _p);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_qualifiedPath = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _qualifiedPath;
}
DLLExport
modelica_metatype omc_AbsynUtil_stringPath(threadData_t *threadData, modelica_string _str)
{
modelica_metatype _qualifiedPath = NULL;
modelica_metatype _paths = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_paths = omc_Util_stringSplitAtChar(threadData, _str, _OMC_LIT2);
_qualifiedPath = omc_AbsynUtil_stringListPath(threadData, _paths);
_return: OMC_LABEL_UNUSED
return _qualifiedPath;
}
DLLExport
modelica_string omc_AbsynUtil_pathStringUnquoteReplaceDot(threadData_t *threadData, modelica_metatype _inPath, modelica_string _repStr)
{
modelica_string _outString = NULL;
modelica_metatype _strlst = NULL;
modelica_string _rep_rep = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = stringAppend(_repStr,_repStr);
_rep_rep = tmpMeta[0];
_strlst = omc_AbsynUtil_pathToStringList(threadData, _inPath);
_strlst = omc_List_map2(threadData, _strlst, boxvar_System_stringReplace, _repStr, _rep_rep);
_strlst = omc_List_map(threadData, _strlst, boxvar_System_unquoteIdentifier);
_outString = stringDelimitList(_strlst, _repStr);
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_string omc_AbsynUtil_optPathString(threadData_t *threadData, modelica_metatype _inPathOption)
{
modelica_string _outString = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inPathOption;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (!optionNone(tmp4_1)) goto tmp3_end;
tmp1 = _OMC_LIT7;
goto tmp3_done;
}
case 1: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_p = tmpMeta[0];
tmp1 = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT2, 1, 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outString = tmp1;
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_integer omc_AbsynUtil_pathHashModWork(threadData_t *threadData, modelica_metatype _path, modelica_integer _acc)
{
modelica_integer _hash;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _path;
{
modelica_metatype _p = NULL;
modelica_string _s = NULL;
modelica_integer _i;
modelica_integer _i2;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta[0];
_path = _p;
_acc = ((modelica_integer) 46) + (((modelica_integer) 31)) * (_acc);
goto _tailrecursive;
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_s = tmpMeta[0];
_p = tmpMeta[1];
_i = stringHashDjb2(_s);
_i2 = ((modelica_integer) 46) + (((modelica_integer) 31)) * (_acc);
_path = _p;
_acc = (((modelica_integer) 31)) * (_i2) + _i;
goto _tailrecursive;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_s = tmpMeta[0];
_i = stringHashDjb2(_s);
_i2 = ((modelica_integer) 46) + (((modelica_integer) 31)) * (_acc);
tmp1 = (((modelica_integer) 31)) * (_i2) + _i;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_hash = tmp1;
_return: OMC_LABEL_UNUSED
return _hash;
}
modelica_metatype boxptr_AbsynUtil_pathHashModWork(threadData_t *threadData, modelica_metatype _path, modelica_metatype _acc)
{
modelica_integer tmp1;
modelica_integer _hash;
modelica_metatype out_hash;
tmp1 = mmc_unbox_integer(_acc);
_hash = omc_AbsynUtil_pathHashModWork(threadData, _path, tmp1);
out_hash = mmc_mk_icon(_hash);
return out_hash;
}
DLLExport
modelica_integer omc_AbsynUtil_pathHashMod(threadData_t *threadData, modelica_metatype _path, modelica_integer _mod)
{
modelica_integer _hash;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_hash = labs(modelica_integer_mod(omc_AbsynUtil_pathHashModWork(threadData, _path, ((modelica_integer) 5381)), _mod));
_return: OMC_LABEL_UNUSED
return _hash;
}
modelica_metatype boxptr_AbsynUtil_pathHashMod(threadData_t *threadData, modelica_metatype _path, modelica_metatype _mod)
{
modelica_integer tmp1;
modelica_integer _hash;
modelica_metatype out_hash;
tmp1 = mmc_unbox_integer(_mod);
_hash = omc_AbsynUtil_pathHashMod(threadData, _path, tmp1);
out_hash = mmc_mk_icon(_hash);
return out_hash;
}
DLLExport
modelica_integer omc_AbsynUtil_pathCompareNoQual(threadData_t *threadData, modelica_metatype _ip1, modelica_metatype _ip2)
{
modelica_integer _o;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _ip1;
tmp4_2 = _ip2;
{
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_string _i1 = NULL;
modelica_string _i2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 6; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p1 = tmpMeta[0];
_p2 = tmp4_2;
_ip1 = _p1;
_ip2 = _p2;
goto _tailrecursive;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p2 = tmpMeta[0];
_p1 = tmp4_1;
_ip1 = _p1;
_ip2 = _p2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_i1 = tmpMeta[0];
_p1 = tmpMeta[1];
_i2 = tmpMeta[2];
_p2 = tmpMeta[3];
_o = stringCompare(_i1, _i2);
tmp1 = ((_o == ((modelica_integer) 0))?omc_AbsynUtil_pathCompare(threadData, _p1, _p2):_o);
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) -1);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_i1 = tmpMeta[0];
_i2 = tmpMeta[1];
tmp1 = stringCompare(_i1, _i2);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_o = tmp1;
_return: OMC_LABEL_UNUSED
return _o;
}
modelica_metatype boxptr_AbsynUtil_pathCompareNoQual(threadData_t *threadData, modelica_metatype _ip1, modelica_metatype _ip2)
{
modelica_integer _o;
modelica_metatype out_o;
_o = omc_AbsynUtil_pathCompareNoQual(threadData, _ip1, _ip2);
out_o = mmc_mk_icon(_o);
return out_o;
}
DLLExport
modelica_integer omc_AbsynUtil_pathCompare(threadData_t *threadData, modelica_metatype _ip1, modelica_metatype _ip2)
{
modelica_integer _o;
modelica_integer tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _ip1;
tmp4_2 = _ip2;
{
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_string _i1 = NULL;
modelica_string _i2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 7; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_p1 = tmpMeta[0];
_p2 = tmpMeta[1];
_ip1 = _p1;
_ip2 = _p2;
goto _tailrecursive;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) -1);
goto tmp3_done;
}
case 3: {
modelica_boolean tmp6;
modelica_integer tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_i1 = tmpMeta[0];
_p1 = tmpMeta[1];
_i2 = tmpMeta[2];
_p2 = tmpMeta[3];
_o = stringCompare(_i1, _i2);
tmp6 = (modelica_boolean)(_o == ((modelica_integer) 0));
if(tmp6)
{
_ip1 = _p1;
_ip2 = _p2;
goto _tailrecursive;
}
else
{
tmp7 = _o;
}
tmp1 = tmp7;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) 1);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmp1 = ((modelica_integer) -1);
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_i1 = tmpMeta[0];
_i2 = tmpMeta[1];
tmp1 = stringCompare(_i1, _i2);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_o = tmp1;
_return: OMC_LABEL_UNUSED
return _o;
}
modelica_metatype boxptr_AbsynUtil_pathCompare(threadData_t *threadData, modelica_metatype _ip1, modelica_metatype _ip2)
{
modelica_integer _o;
modelica_metatype out_o;
_o = omc_AbsynUtil_pathCompare(threadData, _ip1, _ip2);
out_o = mmc_mk_icon(_o);
return out_o;
}
DLLExport
modelica_boolean omc_AbsynUtil_classNameGreater(threadData_t *threadData, modelica_metatype _c1, modelica_metatype _c2)
{
modelica_boolean _b;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_b = (stringCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c1), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c2), 2)))) > ((modelica_integer) 0));
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_classNameGreater(threadData_t *threadData, modelica_metatype _c1, modelica_metatype _c2)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_classNameGreater(threadData, _c1, _c2);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_integer omc_AbsynUtil_classNameCompare(threadData_t *threadData, modelica_metatype _c1, modelica_metatype _c2)
{
modelica_integer _o;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_o = stringCompare((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c1), 2))), (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_c2), 2))));
_return: OMC_LABEL_UNUSED
return _o;
}
modelica_metatype boxptr_AbsynUtil_classNameCompare(threadData_t *threadData, modelica_metatype _c1, modelica_metatype _c2)
{
modelica_integer _o;
modelica_metatype out_o;
_o = omc_AbsynUtil_classNameCompare(threadData, _c1, _c2);
out_o = mmc_mk_icon(_o);
return out_o;
}
DLLExport
modelica_string omc_AbsynUtil_pathStringDefault(threadData_t *threadData, modelica_metatype _path)
{
modelica_string _s = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_s = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT2, 1, 0);
_return: OMC_LABEL_UNUSED
return _s;
}
DLLExport
modelica_string omc_AbsynUtil_pathStringNoQual(threadData_t *threadData, modelica_metatype _path, modelica_string _delimiter, modelica_boolean _usefq, modelica_boolean _reverse)
{
modelica_string _s = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_integer _count;
modelica_integer _len;
modelica_integer _dlen;
modelica_boolean _b;
modelica_integer tmp5_c1 __attribute__((unused)) = 0;
modelica_integer tmp5_c2 __attribute__((unused)) = 0;
modelica_boolean tmp5_c3 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_count = ((modelica_integer) 0);
_len = ((modelica_integer) 0);
_dlen = stringLength(_delimiter);
_p1 = (_usefq?_path:omc_AbsynUtil_makeNotFullyQualified(threadData, _path));
{
modelica_metatype tmp3_1;
tmp3_1 = _p1;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
_s = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p1), 2)));
goto _return;
goto tmp2_done;
}
case 1: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_p2 = _p1;
_b = 1;
while(1)
{
if(!_b) break;
{
modelica_metatype tmp8_1;
tmp8_1 = _p2;
{
int tmp8;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp8_1))) {
case 4: {
tmpMeta[0+0] = _p2;
tmp5_c1 = ((modelica_integer) 1) + _len;
tmp5_c2 = _count + stringLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p2), 2))));
tmp5_c3 = 0;
goto tmp7_done;
}
case 3: {
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p2), 3)));
tmp5_c1 = ((modelica_integer) 1) + _len;
tmp5_c2 = _count + stringLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p2), 2))));
tmp5_c3 = 1;
goto tmp7_done;
}
case 5: {
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p2), 2)));
tmp5_c1 = ((modelica_integer) 1) + _len;
tmp5_c2 = _count;
tmp5_c3 = 1;
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
goto_6:;
MMC_THROW_INTERNAL();
goto tmp7_done;
tmp7_done:;
}
}
_p2 = tmpMeta[0+0];
_len = tmp5_c1;
_count = tmp5_c2;
_b = tmp5_c3;
}
_s = omc_AbsynUtil_pathStringWork(threadData, _p1, (((modelica_integer) -1) + _len) * (_dlen) + _count, _delimiter, _dlen, _reverse);
_return: OMC_LABEL_UNUSED
return _s;
}
modelica_metatype boxptr_AbsynUtil_pathStringNoQual(threadData_t *threadData, modelica_metatype _path, modelica_metatype _delimiter, modelica_metatype _usefq, modelica_metatype _reverse)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_string _s = NULL;
tmp1 = mmc_unbox_integer(_usefq);
tmp2 = mmc_unbox_integer(_reverse);
_s = omc_AbsynUtil_pathStringNoQual(threadData, _path, _delimiter, tmp1, tmp2);
return _s;
}
PROTECTED_FUNCTION_STATIC modelica_string omc_AbsynUtil_pathStringWork(threadData_t *threadData, modelica_metatype _inPath, modelica_integer _len, modelica_string _delimiter, modelica_integer _dlen, modelica_boolean _reverse)
{
modelica_string _s = NULL;
modelica_metatype _p = NULL;
modelica_boolean _b;
modelica_integer _count;
modelica_complex _sb;
modelica_integer tmp1_c1 __attribute__((unused)) = 0;
modelica_boolean tmp1_c2 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_s = _OMC_LIT7;
_p = _inPath;
_b = 1;
_count = ((modelica_integer) 0);
_sb = omc_System_StringAllocator_constructor(threadData, _len);
while(1)
{
if(!_b) break;
{
modelica_metatype tmp4_1;
tmp4_1 = _p;
{
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 4: {
omc_System_stringAllocatorStringCopy(threadData, _sb, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))), (_reverse?_len + (-_count) - stringLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2)))):_count));
tmpMeta[0+0] = _p;
tmp1_c1 = _count + stringLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))));
tmp1_c2 = 0;
goto tmp3_done;
}
case 3: {
omc_System_stringAllocatorStringCopy(threadData, _sb, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))), (_reverse?_len + (-_dlen) - stringLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2)))) - _count:_count));
omc_System_stringAllocatorStringCopy(threadData, _sb, _delimiter, (_reverse?_len + (-_count) - _dlen:_count + stringLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2))))));
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 3)));
tmp1_c1 = _count + stringLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2)))) + _dlen;
tmp1_c2 = 1;
goto tmp3_done;
}
case 5: {
omc_System_stringAllocatorStringCopy(threadData, _sb, _delimiter, (_reverse?_len + (-_count) - _dlen:_count));
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p), 2)));
tmp1_c1 = _count + _dlen;
tmp1_c2 = 1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_p = tmpMeta[0+0];
_count = tmp1_c1;
_b = tmp1_c2;
}
_s = omc_System_stringAllocatorResult(threadData, _sb, _s);
_return: OMC_LABEL_UNUSED
omc_System_StringAllocator_destructor(threadData,_sb);
return _s;
}
PROTECTED_FUNCTION_STATIC modelica_metatype boxptr_AbsynUtil_pathStringWork(threadData_t *threadData, modelica_metatype _inPath, modelica_metatype _len, modelica_metatype _delimiter, modelica_metatype _dlen, modelica_metatype _reverse)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_integer tmp3;
modelica_string _s = NULL;
tmp1 = mmc_unbox_integer(_len);
tmp2 = mmc_unbox_integer(_dlen);
tmp3 = mmc_unbox_integer(_reverse);
_s = omc_AbsynUtil_pathStringWork(threadData, _inPath, tmp1, _delimiter, tmp2, tmp3);
return _s;
}
DLLExport
modelica_string omc_AbsynUtil_pathString(threadData_t *threadData, modelica_metatype _path, modelica_string _delimiter, modelica_boolean _usefq, modelica_boolean _reverse)
{
modelica_string _s = NULL;
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_integer _count;
modelica_integer _len;
modelica_integer _dlen;
modelica_boolean _b;
modelica_integer tmp5_c1 __attribute__((unused)) = 0;
modelica_integer tmp5_c2 __attribute__((unused)) = 0;
modelica_boolean tmp5_c3 __attribute__((unused)) = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_count = ((modelica_integer) 0);
_len = ((modelica_integer) 0);
_dlen = stringLength(_delimiter);
_p1 = (_usefq?_path:omc_AbsynUtil_makeNotFullyQualified(threadData, _path));
{
modelica_metatype tmp3_1;
tmp3_1 = _p1;
{
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,1) == 0) goto tmp2_end;
_s = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p1), 2)));
goto _return;
goto tmp2_done;
}
case 1: {
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
;
_p2 = _p1;
_b = 1;
while(1)
{
if(!_b) break;
{
modelica_metatype tmp8_1;
tmp8_1 = _p2;
{
int tmp8;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp8_1))) {
case 4: {
tmpMeta[0+0] = _p2;
tmp5_c1 = ((modelica_integer) 1) + _len;
tmp5_c2 = _count + stringLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p2), 2))));
tmp5_c3 = 0;
goto tmp7_done;
}
case 3: {
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p2), 3)));
tmp5_c1 = ((modelica_integer) 1) + _len;
tmp5_c2 = _count + stringLength((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p2), 2))));
tmp5_c3 = 1;
goto tmp7_done;
}
case 5: {
tmpMeta[0+0] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_p2), 2)));
tmp5_c1 = ((modelica_integer) 1) + _len;
tmp5_c2 = _count;
tmp5_c3 = 1;
goto tmp7_done;
}
}
goto tmp7_end;
tmp7_end: ;
}
goto goto_6;
goto_6:;
MMC_THROW_INTERNAL();
goto tmp7_done;
tmp7_done:;
}
}
_p2 = tmpMeta[0+0];
_len = tmp5_c1;
_count = tmp5_c2;
_b = tmp5_c3;
}
_s = omc_AbsynUtil_pathStringWork(threadData, _p1, (((modelica_integer) -1) + _len) * (_dlen) + _count, _delimiter, _dlen, _reverse);
_return: OMC_LABEL_UNUSED
return _s;
}
modelica_metatype boxptr_AbsynUtil_pathString(threadData_t *threadData, modelica_metatype _path, modelica_metatype _delimiter, modelica_metatype _usefq, modelica_metatype _reverse)
{
modelica_integer tmp1;
modelica_integer tmp2;
modelica_string _s = NULL;
tmp1 = mmc_unbox_integer(_usefq);
tmp2 = mmc_unbox_integer(_reverse);
_s = omc_AbsynUtil_pathString(threadData, _path, _delimiter, tmp1, tmp2);
return _s;
}
DLLExport
modelica_metatype omc_AbsynUtil_typeSpecDimensions(threadData_t *threadData, modelica_metatype _inTypeSpec)
{
modelica_metatype _outDimensions = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _inTypeSpec;
{
modelica_metatype _dim = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 3; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
if (optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_dim = tmpMeta[2];
tmpMeta[0] = _dim;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
if (optionNone(tmpMeta[1])) goto tmp2_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
_dim = tmpMeta[2];
tmpMeta[0] = _dim;
goto tmp2_done;
}
case 2: {
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outDimensions = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outDimensions;
}
DLLExport
modelica_metatype omc_AbsynUtil_typeSpecPath(threadData_t *threadData, modelica_metatype _tp)
{
modelica_metatype _op = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;
tmp3_1 = _tp;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
tmpMeta[0] = _p;
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_p = tmpMeta[1];
tmpMeta[0] = _p;
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_op = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _op;
}
DLLExport
modelica_string omc_AbsynUtil_typeSpecPathString(threadData_t *threadData, modelica_metatype _tp)
{
modelica_string _s = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _tp;
{
modelica_metatype _p = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta[0];
tmp1 = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT2, 1, 0);
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_p = tmpMeta[0];
tmp1 = omc_AbsynUtil_pathString(threadData, _p, _OMC_LIT2, 1, 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_s = tmp1;
_return: OMC_LABEL_UNUSED
return _s;
}
DLLExport
modelica_boolean omc_AbsynUtil_optArrayDimEqual(threadData_t *threadData, modelica_metatype _oad1, modelica_metatype _oad2)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _oad1;
tmp4_2 = _oad2;
{
modelica_metatype _ad1 = NULL;
modelica_metatype _ad2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
if (optionNone(tmp4_2)) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 1));
_ad1 = tmpMeta[0];
_ad2 = tmpMeta[1];
tmp4 += 1;
tmp6 = omc_List_isEqualOnTrue(threadData, _ad1, _ad2, boxvar_AbsynUtil_subscriptEqual);
if (1 != tmp6) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
if (!optionNone(tmp4_1)) goto tmp3_end;
if (!optionNone(tmp4_2)) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_optArrayDimEqual(threadData_t *threadData, modelica_metatype _oad1, modelica_metatype _oad2)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_optArrayDimEqual(threadData, _oad1, _oad2);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_boolean omc_AbsynUtil_typeSpecEqual(threadData_t *threadData, modelica_metatype _a, modelica_metatype _b)
{
modelica_boolean _ob;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp4_1;volatile modelica_metatype tmp4_2;
tmp4_1 = _a;
tmp4_2 = _b;
{
modelica_metatype _p1 = NULL;
modelica_metatype _p2 = NULL;
modelica_metatype _oad1 = NULL;
modelica_metatype _oad2 = NULL;
modelica_metatype _lst1 = NULL;
modelica_metatype _lst2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp3_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp4 < 3; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_p1 = tmpMeta[0];
_oad1 = tmpMeta[1];
_p2 = tmpMeta[2];
_oad2 = tmpMeta[3];
tmp4 += 1;
tmp6 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp6) goto goto_2;
tmp7 = omc_AbsynUtil_optArrayDimEqual(threadData, _oad1, _oad2);
if (1 != tmp7) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp8;
modelica_boolean tmp9;
modelica_boolean tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,3) == 0) goto tmp3_end;
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 4));
_p1 = tmpMeta[0];
_lst1 = tmpMeta[1];
_oad1 = tmpMeta[2];
_p2 = tmpMeta[3];
_lst2 = tmpMeta[4];
_oad2 = tmpMeta[5];
tmp8 = omc_AbsynUtil_pathEqual(threadData, _p1, _p2);
if (1 != tmp8) goto goto_2;
tmp9 = omc_List_isEqualOnTrue(threadData, _lst1, _lst2, boxvar_AbsynUtil_typeSpecEqual);
if (1 != tmp9) goto goto_2;
tmp10 = omc_AbsynUtil_optArrayDimEqual(threadData, _oad1, _oad2);
if (1 != tmp10) goto goto_2;
tmp1 = 1;
goto tmp3_done;
}
case 2: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
tmp3_done:
(void)tmp4;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp3_done2;
goto_2:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp4 < 3) {
goto tmp3_top;
}
MMC_THROW_INTERNAL();
tmp3_done2:;
}
}
_ob = tmp1;
_return: OMC_LABEL_UNUSED
return _ob;
}
modelica_metatype boxptr_AbsynUtil_typeSpecEqual(threadData_t *threadData, modelica_metatype _a, modelica_metatype _b)
{
modelica_boolean _ob;
modelica_metatype out_ob;
_ob = omc_AbsynUtil_typeSpecEqual(threadData, _a, _b);
out_ob = mmc_mk_icon(_ob);
return out_ob;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathEqualCaseInsensitive(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inPath1;
tmp4_2 = _inPath2;
{
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
modelica_metatype _path1 = NULL;
modelica_metatype _path2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path1 = tmpMeta[0];
_path2 = tmp4_2;
_inPath1 = _path1;
_inPath2 = _path2;
goto _tailrecursive;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_path2 = tmpMeta[0];
_path1 = tmp4_1;
_inPath1 = _path1;
_inPath2 = _path2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_id1 = tmpMeta[0];
_id2 = tmpMeta[1];
tmp1 = (stringEqual(omc_System_tolower(threadData, _id1), omc_System_tolower(threadData, _id2)));
goto tmp3_done;
}
case 3: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_id1 = tmpMeta[0];
_path1 = tmpMeta[1];
_id2 = tmpMeta[2];
_path2 = tmpMeta[3];
tmp6 = (modelica_boolean)(stringEqual(omc_System_tolower(threadData, _id1), omc_System_tolower(threadData, _id2)));
if(tmp6)
{
_inPath1 = _path1;
_inPath2 = _path2;
goto _tailrecursive;
}
else
{
tmp7 = 0;
}
tmp1 = tmp7;
goto tmp3_done;
}
case 4: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_AbsynUtil_pathEqualCaseInsensitive(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_AbsynUtil_pathEqualCaseInsensitive(threadData, _inPath1, _inPath2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_boolean omc_AbsynUtil_pathEqual(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_boolean _outBoolean;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inPath1;
tmp4_2 = _inPath2;
{
modelica_string _id1 = NULL;
modelica_string _id2 = NULL;
modelica_metatype _path1 = NULL;
modelica_metatype _path2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 5; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path1 = tmpMeta[0];
_path2 = tmp4_2;
_inPath1 = _path1;
_inPath2 = _path2;
goto _tailrecursive;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_path2 = tmpMeta[0];
_path1 = tmp4_1;
_inPath1 = _path1;
_inPath2 = _path2;
goto _tailrecursive;
goto tmp3_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,1,1) == 0) goto tmp3_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
_id1 = tmpMeta[0];
_id2 = tmpMeta[1];
tmp1 = (stringEqual(_id1, _id2));
goto tmp3_done;
}
case 3: {
modelica_boolean tmp6;
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
if (mmc__uniontype__metarecord__typedef__equal(tmp4_2,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_2), 3));
_id1 = tmpMeta[0];
_path1 = tmpMeta[1];
_id2 = tmpMeta[2];
_path2 = tmpMeta[3];
tmp6 = (modelica_boolean)(stringEqual(_id1, _id2));
if(tmp6)
{
_inPath1 = _path1;
_inPath2 = _path2;
goto _tailrecursive;
}
else
{
tmp7 = 0;
}
tmp1 = tmp7;
goto tmp3_done;
}
case 4: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outBoolean = tmp1;
_return: OMC_LABEL_UNUSED
return _outBoolean;
}
modelica_metatype boxptr_AbsynUtil_pathEqual(threadData_t *threadData, modelica_metatype _inPath1, modelica_metatype _inPath2)
{
modelica_boolean _outBoolean;
modelica_metatype out_outBoolean;
_outBoolean = omc_AbsynUtil_pathEqual(threadData, _inPath1, _inPath2);
out_outBoolean = mmc_mk_icon(_outBoolean);
return out_outBoolean;
}
DLLExport
modelica_string omc_AbsynUtil_printComponentRefStr(threadData_t *threadData, modelica_metatype _cr)
{
modelica_string _ostring = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _cr;
{
modelica_string _s1 = NULL;
modelica_string _s2 = NULL;
modelica_metatype _child = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_s1 = tmpMeta[0];
tmp1 = _s1;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_s1 = tmpMeta[0];
_child = tmpMeta[1];
_s2 = omc_AbsynUtil_printComponentRefStr(threadData, _child);
tmpMeta[0] = stringAppend(_s1,_OMC_LIT2);
tmpMeta[1] = stringAppend(tmpMeta[0],_s2);
tmp1 = tmpMeta[1];
goto tmp3_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_child = tmpMeta[0];
_s2 = omc_AbsynUtil_printComponentRefStr(threadData, _child);
tmpMeta[0] = stringAppend(_OMC_LIT2,_s2);
tmp1 = tmpMeta[0];
goto tmp3_done;
}
case 7: {
tmp1 = _OMC_LIT61;
goto tmp3_done;
}
case 6: {
tmp1 = _OMC_LIT62;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_ostring = tmp1;
_return: OMC_LABEL_UNUSED
return _ostring;
}
DLLExport
modelica_string omc_AbsynUtil_expComponentRefStr(threadData_t *threadData, modelica_metatype _aexp)
{
modelica_string _outString = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outString = omc_AbsynUtil_printComponentRefStr(threadData, omc_AbsynUtil_expCref(threadData, _aexp));
_return: OMC_LABEL_UNUSED
return _outString;
}
DLLExport
modelica_metatype omc_AbsynUtil_crefExp(threadData_t *threadData, modelica_metatype _cr)
{
modelica_metatype _exp = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _cr);
_exp = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _exp;
}
DLLExport
modelica_metatype omc_AbsynUtil_expCref(threadData_t *threadData, modelica_metatype _exp)
{
modelica_metatype _cr = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _exp;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],2,1) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_cr = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _cr;
}
DLLExport
modelica_string omc_AbsynUtil_expString(threadData_t *threadData, modelica_metatype _exp)
{
modelica_string _str = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _exp;
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],3,1) == 0) MMC_THROW_INTERNAL();
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_str = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _str;
}
DLLExport
modelica_string omc_AbsynUtil_printImportString(threadData_t *threadData, modelica_metatype _imp)
{
modelica_string _ostring = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _imp;
{
modelica_metatype _path = NULL;
modelica_string _name = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_name = tmpMeta[0];
tmp1 = _name;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
tmp1 = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT2, 1, 0);
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_path = tmpMeta[0];
tmp1 = omc_AbsynUtil_pathString(threadData, _path, _OMC_LIT2, 1, 0);
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_ostring = tmp1;
_return: OMC_LABEL_UNUSED
return _ostring;
}
DLLExport
modelica_boolean omc_AbsynUtil_isClassdef(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _b;
modelica_boolean tmp1 = 0;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElement;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,6) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[0],0,2) == 0) goto tmp3_end;
tmp1 = 1;
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_b = tmp1;
_return: OMC_LABEL_UNUSED
return _b;
}
modelica_metatype boxptr_AbsynUtil_isClassdef(threadData_t *threadData, modelica_metatype _inElement)
{
modelica_boolean _b;
modelica_metatype out_b;
_b = omc_AbsynUtil_isClassdef(threadData, _inElement);
out_b = mmc_mk_icon(_b);
return out_b;
}
DLLExport
modelica_string omc_AbsynUtil_elementSpecName(threadData_t *threadData, modelica_metatype _inElementSpec)
{
modelica_string _outIdent = NULL;
modelica_string tmp1 = 0;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inElementSpec;
{
modelica_string _n = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_n = tmpMeta[1];
tmp1 = _n;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,3) == 0) goto tmp3_end;
tmpMeta[0] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
if (listEmpty(tmpMeta[0])) goto tmp3_end;
tmpMeta[1] = MMC_CAR(tmpMeta[0]);
tmpMeta[2] = MMC_CDR(tmpMeta[0]);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
if (!listEmpty(tmpMeta[2])) goto tmp3_end;
_n = tmpMeta[4];
tmp1 = _n;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIdent = tmp1;
_return: OMC_LABEL_UNUSED
return _outIdent;
}
DLLExport
modelica_boolean omc_AbsynUtil_isClassNamed(threadData_t *threadData, modelica_string _inName, modelica_metatype _inClass)
{
modelica_boolean _outIsNamed;
modelica_boolean tmp1 = 0;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inClass;
{
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmp1 = (stringEqual(_inName, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inClass), 2)))));
goto tmp3_done;
}
case 1: {
tmp1 = 0;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outIsNamed = tmp1;
_return: OMC_LABEL_UNUSED
return _outIsNamed;
}
modelica_metatype boxptr_AbsynUtil_isClassNamed(threadData_t *threadData, modelica_metatype _inName, modelica_metatype _inClass)
{
modelica_boolean _outIsNamed;
modelica_metatype out_outIsNamed;
_outIsNamed = omc_AbsynUtil_isClassNamed(threadData, _inName, _inClass);
out_outIsNamed = mmc_mk_icon(_outIsNamed);
return out_outIsNamed;
}
DLLExport
modelica_metatype omc_AbsynUtil_className(threadData_t *threadData, modelica_metatype _cl)
{
modelica_metatype _name = NULL;
modelica_string _id = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _cl;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_id = tmpMeta[1];
tmpMeta[0] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _id);
_name = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _name;
}
DLLExport
modelica_metatype omc_AbsynUtil_makeQualifiedPathFromStrings(threadData_t *threadData, modelica_string _s1, modelica_string _s2)
{
modelica_metatype _p = NULL;
modelica_metatype tmpMeta[2] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _s2);
tmpMeta[1] = mmc_mk_box3(3, &Absyn_Path_QUALIFIED__desc, _s1, tmpMeta[0]);
_p = tmpMeta[1];
_return: OMC_LABEL_UNUSED
return _p;
}
DLLExport
modelica_metatype omc_AbsynUtil_makeIdentPathFromString(threadData_t *threadData, modelica_string _s)
{
modelica_metatype _p = NULL;
modelica_metatype tmpMeta[1] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = mmc_mk_box2(4, &Absyn_Path_IDENT__desc, _s);
_p = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _p;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseAlgorithmBidir(threadData_t *threadData, modelica_metatype _inAlg, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outAlg = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAlg;
tmp4_2 = _inArg;
{
modelica_metatype _arg = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _algs1 = NULL;
modelica_metatype _algs2 = NULL;
modelica_metatype _else_branch = NULL;
modelica_metatype _cref1 = NULL;
modelica_metatype _iters = NULL;
modelica_metatype _func_args = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_arg = tmp4_2;
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e2 = omc_AbsynUtil_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(3, &Absyn_Algorithm_ALG__ASSIGN__desc, _e1, _e2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e1 = tmpMeta[2];
_algs1 = tmpMeta[3];
_else_branch = tmpMeta[4];
_algs2 = tmpMeta[5];
_arg = tmp4_2;
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_algs1 = omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData, _algs1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_else_branch = omc_List_map2FoldCheckReferenceEq(threadData, _else_branch, boxvar_AbsynUtil_traverseAlgorithmBidirElse, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_algs2 = omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData, _algs2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box5(4, &Absyn_Algorithm_ALG__IF__desc, _e1, _algs1, _else_branch, _algs2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_iters = tmpMeta[2];
_algs1 = tmpMeta[3];
_arg = tmp4_2;
_iters = omc_List_map2FoldCheckReferenceEq(threadData, _iters, boxvar_AbsynUtil_traverseExpBidirIterator, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_algs1 = omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData, _algs1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(5, &Absyn_Algorithm_ALG__FOR__desc, _iters, _algs1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_iters = tmpMeta[2];
_algs1 = tmpMeta[3];
_arg = tmp4_2;
_iters = omc_List_map2FoldCheckReferenceEq(threadData, _iters, boxvar_AbsynUtil_traverseExpBidirIterator, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_algs1 = omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData, _algs1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(6, &Absyn_Algorithm_ALG__PARFOR__desc, _iters, _algs1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_algs1 = tmpMeta[3];
_arg = tmp4_2;
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_algs1 = omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData, _algs1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(7, &Absyn_Algorithm_ALG__WHILE__desc, _e1, _algs1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_algs1 = tmpMeta[3];
_else_branch = tmpMeta[4];
_arg = tmp4_2;
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_algs1 = omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData, _algs1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_else_branch = omc_List_map2FoldCheckReferenceEq(threadData, _else_branch, boxvar_AbsynUtil_traverseAlgorithmBidirElse, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box4(8, &Absyn_Algorithm_ALG__WHEN__A__desc, _e1, _algs1, _else_branch);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cref1 = tmpMeta[2];
_func_args = tmpMeta[3];
_arg = tmp4_2;
_cref1 = omc_AbsynUtil_traverseExpBidirCref(threadData, _cref1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_func_args = omc_AbsynUtil_traverseExpBidirFunctionArgs(threadData, _func_args, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(9, &Absyn_Algorithm_ALG__NORETCALL__desc, _cref1, _func_args);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,0) == 0) goto tmp3_end;
_arg = tmp4_2;
tmpMeta[0+0] = _inAlg;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 11: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,0) == 0) goto tmp3_end;
_arg = tmp4_2;
tmpMeta[0+0] = _inAlg;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 14: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,0) == 0) goto tmp3_end;
_arg = tmp4_2;
tmpMeta[0+0] = _inAlg;
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 12: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_algs1 = tmpMeta[2];
_arg = tmp4_2;
_algs1 = omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData, _algs1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box2(12, &Absyn_Algorithm_ALG__FAILURE__desc, _algs1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 13: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_algs1 = tmpMeta[2];
_algs2 = tmpMeta[3];
_arg = tmp4_2;
_algs1 = omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData, _algs1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_algs2 = omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData, _algs2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(13, &Absyn_Algorithm_ALG__TRY__desc, _algs1, _algs2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAlg = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outAlg;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseAlgorithmBidirElse(threadData_t *threadData, modelica_metatype _inElse, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg)
{
modelica_metatype _outElse = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _e = NULL;
modelica_metatype _algs = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inElse;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_e = tmpMeta[1];
_algs = tmpMeta[2];
_e = omc_AbsynUtil_traverseExpBidir(threadData, _e, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _inArg ,&_arg);
_algs = omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData, _algs, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[0] = mmc_mk_box2(0, _e, _algs);
_outElse = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _outElse;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseEquationBidirElse(threadData_t *threadData, modelica_metatype _inElse, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg)
{
modelica_metatype _outElse = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _e = NULL;
modelica_metatype _eqil = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inElse;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_e = tmpMeta[1];
_eqil = tmpMeta[2];
_e = omc_AbsynUtil_traverseExpBidir(threadData, _e, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _inArg ,&_arg);
_eqil = omc_AbsynUtil_traverseEquationItemListBidir(threadData, _eqil, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[0] = mmc_mk_box2(0, _e, _eqil);
_outElse = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _outElse;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseEquationBidir(threadData_t *threadData, modelica_metatype _inEquation, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outEquation = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inEquation;
tmp4_2 = _inArg;
{
modelica_metatype _arg = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _eqil1 = NULL;
modelica_metatype _eqil2 = NULL;
modelica_metatype _else_branch = NULL;
modelica_metatype _cref1 = NULL;
modelica_metatype _cref2 = NULL;
modelica_metatype _iters = NULL;
modelica_metatype _func_args = NULL;
modelica_metatype _eq = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e1 = tmpMeta[2];
_eqil1 = tmpMeta[3];
_else_branch = tmpMeta[4];
_eqil2 = tmpMeta[5];
_arg = tmp4_2;
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_eqil1 = omc_AbsynUtil_traverseEquationItemListBidir(threadData, _eqil1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_else_branch = omc_List_map2FoldCheckReferenceEq(threadData, _else_branch, boxvar_AbsynUtil_traverseEquationBidirElse, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_eqil2 = omc_AbsynUtil_traverseEquationItemListBidir(threadData, _eqil2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box5(3, &Absyn_Equation_EQ__IF__desc, _e1, _eqil1, _else_branch, _eqil2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_arg = tmp4_2;
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e2 = omc_AbsynUtil_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(4, &Absyn_Equation_EQ__EQUALS__desc, _e1, _e2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 5: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_cref1 = tmpMeta[4];
_arg = tmp4_2;
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e2 = omc_AbsynUtil_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_cref1 = omc_AbsynUtil_traverseExpBidirCref(threadData, _cref1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg, NULL);
tmpMeta[2] = mmc_mk_box4(5, &Absyn_Equation_EQ__PDE__desc, _e1, _e2, _cref1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cref1 = tmpMeta[2];
_cref2 = tmpMeta[3];
_arg = tmp4_2;
_cref1 = omc_AbsynUtil_traverseExpBidirCref(threadData, _cref1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_cref2 = omc_AbsynUtil_traverseExpBidirCref(threadData, _cref2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(6, &Absyn_Equation_EQ__CONNECT__desc, _cref1, _cref2);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_iters = tmpMeta[2];
_eqil1 = tmpMeta[3];
_arg = tmp4_2;
_iters = omc_List_map2FoldCheckReferenceEq(threadData, _iters, boxvar_AbsynUtil_traverseExpBidirIterator, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_eqil1 = omc_AbsynUtil_traverseEquationItemListBidir(threadData, _eqil1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(7, &Absyn_Equation_EQ__FOR__desc, _iters, _eqil1);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 8: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_eqil1 = tmpMeta[3];
_else_branch = tmpMeta[4];
_arg = tmp4_2;
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_eqil1 = omc_AbsynUtil_traverseEquationItemListBidir(threadData, _eqil1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_else_branch = omc_List_map2FoldCheckReferenceEq(threadData, _else_branch, boxvar_AbsynUtil_traverseEquationBidirElse, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box4(8, &Absyn_Equation_EQ__WHEN__E__desc, _e1, _eqil1, _else_branch);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 9: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cref1 = tmpMeta[2];
_func_args = tmpMeta[3];
_arg = tmp4_2;
_cref1 = omc_AbsynUtil_traverseExpBidirCref(threadData, _cref1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_func_args = omc_AbsynUtil_traverseExpBidirFunctionArgs(threadData, _func_args, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box3(9, &Absyn_Equation_EQ__NORETCALL__desc, _cref1, _func_args);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 10: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_eq = tmpMeta[2];
_arg = tmp4_2;
_eq = omc_AbsynUtil_traverseEquationItemBidir(threadData, _eq, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box2(10, &Absyn_Equation_EQ__FAILURE__desc, _eq);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outEquation = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outEquation;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseEquationItemBidir(threadData_t *threadData, modelica_metatype _inEquationItem, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outEquationItem = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inEquationItem;
tmp4_2 = _inArg;
{
modelica_metatype _arg = NULL;
modelica_metatype _eq = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_eq = tmpMeta[2];
_cmt = tmpMeta[3];
_info = tmpMeta[4];
_arg = tmp4_2;
_eq = omc_AbsynUtil_traverseEquationBidir(threadData, _eq, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, _eq, _cmt, _info);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outEquationItem = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outEquationItem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseAlgorithmItemBidir(threadData_t *threadData, modelica_metatype _inAlgorithmItem, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outAlgorithmItem = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inAlgorithmItem;
tmp4_2 = _inArg;
{
modelica_metatype _arg = NULL;
modelica_metatype _alg = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_alg = tmpMeta[2];
_cmt = tmpMeta[3];
_info = tmpMeta[4];
_arg = tmp4_2;
_alg = omc_AbsynUtil_traverseAlgorithmBidir(threadData, _alg, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box4(3, &Absyn_AlgorithmItem_ALGORITHMITEM__desc, _alg, _cmt, _info);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inAlgorithmItem;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outAlgorithmItem = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outAlgorithmItem;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseAlgorithmItemListBidir(threadData_t *threadData, modelica_metatype _inAlgs, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outAlgs = NULL;
modelica_metatype _outArg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outAlgs = omc_List_map2FoldCheckReferenceEq(threadData, _inAlgs, boxvar_AbsynUtil_traverseAlgorithmItemBidir, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _inArg ,&_outArg);
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outAlgs;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseEquationItemListBidir(threadData_t *threadData, modelica_metatype _inEquationItems, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outEquationItems = NULL;
modelica_metatype _outArg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outEquationItems = omc_List_map2FoldCheckReferenceEq(threadData, _inEquationItems, boxvar_AbsynUtil_traverseEquationItemBidir, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _inArg ,&_outArg);
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outEquationItems;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseClassPartBidir(threadData_t *threadData, modelica_metatype _cp, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outCp = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _cp;
tmp4_2 = _inArg;
{
modelica_metatype _algs = NULL;
modelica_metatype _eqs = NULL;
modelica_metatype _arg = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_algs = tmpMeta[2];
_arg = tmp4_2;
_algs = omc_List_map2FoldCheckReferenceEq(threadData, _algs, boxvar_AbsynUtil_traverseAlgorithmItemBidir, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box2(8, &Absyn_ClassPart_ALGORITHMS__desc, _algs);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_eqs = tmpMeta[2];
_arg = tmp4_2;
_eqs = omc_List_map2FoldCheckReferenceEq(threadData, _eqs, boxvar_AbsynUtil_traverseEquationItemBidir, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box2(6, &Absyn_ClassPart_EQUATIONS__desc, _eqs);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCp = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outCp;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseMatchCase(threadData_t *threadData, modelica_metatype _inMatchCase, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outMatchCase = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[11] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inMatchCase;
tmp4_2 = _inArg;
{
modelica_metatype _arg = NULL;
modelica_metatype _pattern = NULL;
modelica_metatype _result = NULL;
modelica_metatype _info = NULL;
modelica_metatype _resultInfo = NULL;
modelica_metatype _pinfo = NULL;
modelica_metatype _ldecls = NULL;
modelica_metatype _cp = NULL;
modelica_metatype _cmt = NULL;
modelica_metatype _patternGuard = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,9) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
tmpMeta[8] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 8));
tmpMeta[9] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 9));
tmpMeta[10] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 10));
_pattern = tmpMeta[2];
_patternGuard = tmpMeta[3];
_pinfo = tmpMeta[4];
_ldecls = tmpMeta[5];
_cp = tmpMeta[6];
_result = tmpMeta[7];
_resultInfo = tmpMeta[8];
_cmt = tmpMeta[9];
_info = tmpMeta[10];
_arg = tmp4_2;
_pattern = omc_AbsynUtil_traverseExpBidir(threadData, _pattern, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_patternGuard = omc_AbsynUtil_traverseExpOptBidir(threadData, _patternGuard, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_cp = omc_AbsynUtil_traverseClassPartBidir(threadData, _cp, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_result = omc_AbsynUtil_traverseExpBidir(threadData, _result, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box10(3, &Absyn_Case_CASE__desc, _pattern, _patternGuard, _pinfo, _ldecls, _cp, _result, _resultInfo, _cmt, _info);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,6) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
tmpMeta[7] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 7));
_ldecls = tmpMeta[2];
_cp = tmpMeta[3];
_result = tmpMeta[4];
_resultInfo = tmpMeta[5];
_cmt = tmpMeta[6];
_info = tmpMeta[7];
_arg = tmp4_2;
_cp = omc_AbsynUtil_traverseClassPartBidir(threadData, _cp, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_result = omc_AbsynUtil_traverseExpBidir(threadData, _result, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box7(4, &Absyn_Case_ELSE__desc, _ldecls, _cp, _result, _resultInfo, _cmt, _info);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outMatchCase = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outMatchCase;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpBidirIterator(threadData_t *threadData, modelica_metatype _inIterator, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outIterator = NULL;
modelica_metatype _outArg = NULL;
modelica_string _name = NULL;
modelica_metatype _guardExp1 = NULL;
modelica_metatype _guardExp2 = NULL;
modelica_metatype _range1 = NULL;
modelica_metatype _range2 = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inIterator;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 4));
_name = tmpMeta[1];
_guardExp1 = tmpMeta[2];
_range1 = tmpMeta[3];
_guardExp2 = omc_AbsynUtil_traverseExpOptBidir(threadData, _guardExp1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _inArg ,&_outArg);
_range2 = omc_AbsynUtil_traverseExpOptBidir(threadData, _range1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _outArg ,&_outArg);
tmp1 = (modelica_boolean)(referenceEq(_guardExp1, _guardExp2) && referenceEq(_range1, _range2));
if(tmp1)
{
tmpMeta[1] = _inIterator;
}
else
{
tmpMeta[0] = mmc_mk_box4(3, &Absyn_ForIterator_ITERATOR__desc, _name, _guardExp2, _range2);
tmpMeta[1] = tmpMeta[0];
}
_outIterator = tmpMeta[1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outIterator;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpBidirNamedArg(threadData_t *threadData, modelica_metatype _inArg, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inExtra, modelica_metatype *out_outExtra)
{
modelica_metatype _outArg = NULL;
modelica_metatype _outExtra = NULL;
modelica_string _name = NULL;
modelica_metatype _value1 = NULL;
modelica_metatype _value2 = NULL;
modelica_boolean tmp1;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inArg;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 3));
_name = tmpMeta[1];
_value1 = tmpMeta[2];
_value2 = omc_AbsynUtil_traverseExpBidir(threadData, _value1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _inExtra ,&_outExtra);
tmp1 = (modelica_boolean)referenceEq(_value1, _value2);
if(tmp1)
{
tmpMeta[1] = _inArg;
}
else
{
tmpMeta[0] = mmc_mk_box3(3, &Absyn_NamedArg_NAMEDARG__desc, _name, _value2);
tmpMeta[1] = tmpMeta[0];
}
_outArg = tmpMeta[1];
_return: OMC_LABEL_UNUSED
if (out_outExtra) { *out_outExtra = _outExtra; }
return _outArg;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpBidirFunctionArgs(threadData_t *threadData, modelica_metatype _inArgs, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outArgs = NULL;
modelica_metatype _outArg = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inArgs;
tmp4_2 = _inArg;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _expl1 = NULL;
modelica_metatype _expl2 = NULL;
modelica_metatype _named_args1 = NULL;
modelica_metatype _named_args2 = NULL;
modelica_metatype _iters1 = NULL;
modelica_metatype _iters2 = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _iterType = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_expl1 = tmpMeta[2];
_named_args1 = tmpMeta[3];
_arg = tmp4_2;
_expl2 = omc_AbsynUtil_traverseExpListBidir(threadData, _expl1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_named_args2 = omc_List_map2FoldCheckReferenceEq(threadData, _named_args1, boxvar_AbsynUtil_traverseExpBidirNamedArg, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp6 = (modelica_boolean)(referenceEq(_expl1, _expl2) && referenceEq(_named_args1, _named_args2));
if(tmp6)
{
tmpMeta[3] = _inArgs;
}
else
{
tmpMeta[2] = mmc_mk_box3(3, &Absyn_FunctionArgs_FUNCTIONARGS__desc, _expl2, _named_args2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 1: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_iterType = tmpMeta[3];
_iters1 = tmpMeta[4];
_arg = tmp4_2;
_e2 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_iters2 = omc_List_map2FoldCheckReferenceEq(threadData, _iters1, boxvar_AbsynUtil_traverseExpBidirIterator, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp7 = (modelica_boolean)(referenceEq(_e1, _e2) && referenceEq(_iters1, _iters2));
if(tmp7)
{
tmpMeta[3] = _inArgs;
}
else
{
tmpMeta[2] = mmc_mk_box4(4, &Absyn_FunctionArgs_FOR__ITER__FARG__desc, _e2, _iterType, _iters2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outArgs = tmpMeta[0+0];
_outArg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outArgs;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpBidirElseIf(threadData_t *threadData, modelica_metatype _inElseIf, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg)
{
modelica_metatype _outElseIf = NULL;
modelica_metatype _arg = NULL;
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _tup = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
tmpMeta[0] = _inElseIf;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 1));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[0]), 2));
_e1 = tmpMeta[1];
_e2 = tmpMeta[2];
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _inArg ,&_arg);
_e2 = omc_AbsynUtil_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[0] = mmc_mk_box2(0, _e1, _e2);
_outElseIf = tmpMeta[0];
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _outElseIf;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpBidirSubs(threadData_t *threadData, modelica_metatype _inSubscript, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg)
{
modelica_metatype _outSubscript = NULL;
modelica_metatype _arg = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inSubscript;
tmp4_2 = _inArg;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e1 = tmpMeta[2];
_arg = tmp4_2;
_e2 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _inArg ,&_arg);
tmp6 = (modelica_boolean)referenceEq(_e1, _e2);
if(tmp6)
{
tmpMeta[3] = _inSubscript;
}
else
{
tmpMeta[2] = mmc_mk_box2(4, &Absyn_Subscript_SUBSCRIPT__desc, _e2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,0) == 0) goto tmp3_end;
tmpMeta[0+0] = _inSubscript;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outSubscript = tmpMeta[0+0];
_arg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _outSubscript;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpBidirCref(threadData_t *threadData, modelica_metatype _inCref, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg)
{
modelica_metatype _outCref = NULL;
modelica_metatype _arg = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inCref;
tmp4_2 = _inArg;
{
modelica_string _name = NULL;
modelica_metatype _cr1 = NULL;
modelica_metatype _cr2 = NULL;
modelica_metatype _subs1 = NULL;
modelica_metatype _subs2 = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cr1 = tmpMeta[2];
_arg = tmp4_2;
_cr2 = omc_AbsynUtil_traverseExpBidirCref(threadData, _cr1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[0+0] = (referenceEq(_cr1, _cr2)?_inCref:omc_AbsynUtil_crefMakeFullyQualified(threadData, _cr2));
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 4: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_name = tmpMeta[2];
_subs1 = tmpMeta[3];
_cr1 = tmpMeta[4];
_arg = tmp4_2;
_subs2 = omc_List_map2FoldCheckReferenceEq(threadData, _subs1, boxvar_AbsynUtil_traverseExpBidirSubs, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_cr2 = omc_AbsynUtil_traverseExpBidirCref(threadData, _cr1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp5 = (modelica_boolean)(referenceEq(_cr1, _cr2) && referenceEq(_subs1, _subs2));
if(tmp5)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box4(4, &Absyn_ComponentRef_CREF__QUAL__desc, _name, _subs2, _cr2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 5: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_name = tmpMeta[2];
_subs1 = tmpMeta[3];
_arg = tmp4_2;
_subs2 = omc_List_map2FoldCheckReferenceEq(threadData, _subs1, boxvar_AbsynUtil_traverseExpBidirSubs, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp6 = (modelica_boolean)referenceEq(_subs1, _subs2);
if(tmp6)
{
tmpMeta[3] = _inCref;
}
else
{
tmpMeta[2] = mmc_mk_box3(5, &Absyn_ComponentRef_CREF__IDENT__desc, _name, _subs2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,0) == 0) goto tmp3_end;
tmpMeta[0+0] = _inCref;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,0) == 0) goto tmp3_end;
tmpMeta[0+0] = _inCref;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outCref = tmpMeta[0+0];
_arg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _outCref;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseExpBidirSubExps(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg)
{
modelica_metatype _e = NULL;
modelica_metatype _arg = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;modelica_metatype tmp4_2;
tmp4_1 = _inExp;
tmp4_2 = _inArg;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e1m = NULL;
modelica_metatype _e2 = NULL;
modelica_metatype _e2m = NULL;
modelica_metatype _e3 = NULL;
modelica_metatype _e3m = NULL;
modelica_metatype _oe1 = NULL;
modelica_metatype _oe1m = NULL;
modelica_metatype _op = NULL;
modelica_metatype _cref = NULL;
modelica_metatype _crefm = NULL;
modelica_metatype _else_ifs1 = NULL;
modelica_metatype _else_ifs2 = NULL;
modelica_metatype _expl1 = NULL;
modelica_metatype _expl2 = NULL;
modelica_metatype _mat_expl = NULL;
modelica_metatype _fargs1 = NULL;
modelica_metatype _fargs2 = NULL;
modelica_string _error_msg = NULL;
modelica_string _id = NULL;
modelica_string _enterName = NULL;
modelica_string _exitName = NULL;
modelica_metatype _match_ty = NULL;
modelica_metatype _match_decls = NULL;
modelica_metatype _match_cases = NULL;
modelica_metatype _cmt = NULL;
int tmp4;
{
switch (MMC_SWITCH_CAST(valueConstructor(tmp4_1))) {
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,0,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,1,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 6: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,3,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 7: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,4,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 5: {
modelica_boolean tmp5;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,2,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_cref = tmpMeta[2];
_arg = tmp4_2;
_crefm = omc_AbsynUtil_traverseExpBidirCref(threadData, _cref, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp5 = (modelica_boolean)referenceEq(_cref, _crefm);
if(tmp5)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(5, &Absyn_Exp_CREF__desc, _crefm);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 8: {
modelica_boolean tmp6;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,5,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_arg = tmp4_2;
_e1m = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e2m = omc_AbsynUtil_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp6 = (modelica_boolean)(referenceEq(_e1, _e1m) && referenceEq(_e2, _e2m));
if(tmp6)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(8, &Absyn_Exp_BINARY__desc, _e1m, _op, _e2m);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 9: {
modelica_boolean tmp7;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,6,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[2];
_e1 = tmpMeta[3];
_arg = tmp4_2;
_e1m = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp7 = (modelica_boolean)referenceEq(_e1, _e1m);
if(tmp7)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(9, &Absyn_Exp_UNARY__desc, _op, _e1m);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 10: {
modelica_boolean tmp8;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,7,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_arg = tmp4_2;
_e1m = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e2m = omc_AbsynUtil_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp8 = (modelica_boolean)(referenceEq(_e1, _e1m) && referenceEq(_e2, _e2m));
if(tmp8)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(10, &Absyn_Exp_LBINARY__desc, _e1m, _op, _e2m);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 11: {
modelica_boolean tmp9;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,8,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_op = tmpMeta[2];
_e1 = tmpMeta[3];
_arg = tmp4_2;
_e1m = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp9 = (modelica_boolean)referenceEq(_e1, _e1m);
if(tmp9)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(11, &Absyn_Exp_LUNARY__desc, _op, _e1m);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 12: {
modelica_boolean tmp10;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,9,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_op = tmpMeta[3];
_e2 = tmpMeta[4];
_arg = tmp4_2;
_e1m = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e2m = omc_AbsynUtil_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp10 = (modelica_boolean)(referenceEq(_e1, _e1m) && referenceEq(_e2, _e2m));
if(tmp10)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(12, &Absyn_Exp_RELATION__desc, _e1m, _op, _e2m);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 13: {
modelica_boolean tmp11;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,10,4) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_e3 = tmpMeta[4];
_else_ifs1 = tmpMeta[5];
_arg = tmp4_2;
_e1m = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e2m = omc_AbsynUtil_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e3m = omc_AbsynUtil_traverseExpBidir(threadData, _e3, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_else_ifs2 = omc_List_map2FoldCheckReferenceEq(threadData, _else_ifs1, boxvar_AbsynUtil_traverseExpBidirElseIf, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp11 = (modelica_boolean)(((referenceEq(_e1, _e1m) && referenceEq(_e2, _e2m)) && referenceEq(_e3, _e3m)) && referenceEq(_else_ifs1, _else_ifs2));
if(tmp11)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box5(13, &Absyn_Exp_IFEXP__desc, _e1m, _e2m, _e3m, _else_ifs2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 14: {
modelica_boolean tmp12;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,11,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cref = tmpMeta[2];
_fargs1 = tmpMeta[3];
_arg = tmp4_2;
_fargs2 = omc_AbsynUtil_traverseExpBidirFunctionArgs(threadData, _fargs1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp12 = (modelica_boolean)referenceEq(_fargs1, _fargs2);
if(tmp12)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(14, &Absyn_Exp_CALL__desc, _cref, _fargs2, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 4))));
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 15: {
modelica_boolean tmp13;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,12,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_cref = tmpMeta[2];
_fargs1 = tmpMeta[3];
_arg = tmp4_2;
_fargs2 = omc_AbsynUtil_traverseExpBidirFunctionArgs(threadData, _fargs1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp13 = (modelica_boolean)referenceEq(_fargs1, _fargs2);
if(tmp13)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(15, &Absyn_Exp_PARTEVALFUNCTION__desc, _cref, _fargs2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 16: {
modelica_boolean tmp14;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,13,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_expl1 = tmpMeta[2];
_arg = tmp4_2;
_expl2 = omc_AbsynUtil_traverseExpListBidir(threadData, _expl1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp14 = (modelica_boolean)referenceEq(_expl1, _expl2);
if(tmp14)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(16, &Absyn_Exp_ARRAY__desc, _expl2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 17: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,14,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_mat_expl = tmpMeta[2];
_arg = tmp4_2;
_mat_expl = omc_List_map2FoldCheckReferenceEq(threadData, _mat_expl, boxvar_AbsynUtil_traverseExpListBidir, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box2(17, &Absyn_Exp_MATRIX__desc, _mat_expl);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 18: {
modelica_boolean tmp15;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,15,3) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
_e1 = tmpMeta[2];
_oe1 = tmpMeta[3];
_e2 = tmpMeta[4];
_arg = tmp4_2;
_e1m = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_oe1m = omc_AbsynUtil_traverseExpOptBidir(threadData, _oe1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e2m = omc_AbsynUtil_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp15 = (modelica_boolean)((referenceEq(_e1, _e1m) && referenceEq(_e2, _e2m)) && referenceEq(_oe1, _oe1m));
if(tmp15)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box4(18, &Absyn_Exp_RANGE__desc, _e1m, _oe1m, _e2m);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 20: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,17,0) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 19: {
modelica_boolean tmp16;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,16,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_expl1 = tmpMeta[2];
_arg = tmp4_2;
_expl2 = omc_AbsynUtil_traverseExpListBidir(threadData, _expl1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp16 = (modelica_boolean)referenceEq(_expl1, _expl2);
if(tmp16)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(19, &Absyn_Exp_TUPLE__desc, _expl2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 22: {
modelica_boolean tmp17;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,19,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_id = tmpMeta[2];
_e1 = tmpMeta[3];
_arg = tmp4_2;
_e1m = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp17 = (modelica_boolean)referenceEq(_e1, _e1m);
if(tmp17)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(22, &Absyn_Exp_AS__desc, _id, _e1m);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 23: {
modelica_boolean tmp18;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,20,2) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
_e1 = tmpMeta[2];
_e2 = tmpMeta[3];
_arg = tmp4_2;
_e1m = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e2m = omc_AbsynUtil_traverseExpBidir(threadData, _e2, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp18 = (modelica_boolean)(referenceEq(_e1, _e1m) && referenceEq(_e2, _e2m));
if(tmp18)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(23, &Absyn_Exp_CONS__desc, _e1m, _e2m);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 24: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,21,5) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 3));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 4));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 5));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 6));
_match_ty = tmpMeta[2];
_e1 = tmpMeta[3];
_match_decls = tmpMeta[4];
_match_cases = tmpMeta[5];
_cmt = tmpMeta[6];
_arg = tmp4_2;
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_match_cases = omc_List_map2FoldCheckReferenceEq(threadData, _match_cases, boxvar_AbsynUtil_traverseMatchCase, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmpMeta[2] = mmc_mk_box6(24, &Absyn_Exp_MATCHEXP__desc, _match_ty, _e1, _match_decls, _match_cases, _cmt);
tmpMeta[0+0] = tmpMeta[2];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 25: {
modelica_boolean tmp19;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,22,1) == 0) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_expl1 = tmpMeta[2];
_arg = tmp4_2;
_expl2 = omc_AbsynUtil_traverseExpListBidir(threadData, _expl1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp19 = (modelica_boolean)referenceEq(_expl1, _expl2);
if(tmp19)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box2(25, &Absyn_Exp_LIST__desc, _expl2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 21: {
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,18,1) == 0) goto tmp3_end;
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
case 26: {
modelica_boolean tmp20;
if (mmc__uniontype__metarecord__typedef__equal(tmp4_1,23,2) == 0) goto tmp3_end;
_arg = tmp4_2;
_e1 = omc_AbsynUtil_traverseExpBidir(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))), ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e2 = omc_AbsynUtil_traverseExpBidir(threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3))), ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
tmp20 = (modelica_boolean)(referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 2))), _e1) && referenceEq((MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_inExp), 3))), _e2));
if(tmp20)
{
tmpMeta[3] = _inExp;
}
else
{
tmpMeta[2] = mmc_mk_box3(26, &Absyn_Exp_DOT__desc, _e1, _e2);
tmpMeta[3] = tmpMeta[2];
}
tmpMeta[0+0] = tmpMeta[3];
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
default:
tmp3_default: OMC_LABEL_UNUSED; {
omc_System_dladdr(threadData, ((modelica_fnptr) _enterFunc) ,NULL ,&_enterName);
omc_System_dladdr(threadData, ((modelica_fnptr) _exitFunc) ,NULL ,&_exitName);
tmpMeta[2] = stringAppend(_OMC_LIT63,_enterName);
tmpMeta[3] = stringAppend(tmpMeta[2],_OMC_LIT8);
tmpMeta[4] = stringAppend(tmpMeta[3],_exitName);
tmpMeta[5] = stringAppend(tmpMeta[4],_OMC_LIT64);
_error_msg = tmpMeta[5];
tmpMeta[2] = stringAppend(_error_msg,omc_Dump_printExpStr(threadData, _inExp));
_error_msg = tmpMeta[2];
tmpMeta[2] = mmc_mk_cons(_error_msg, MMC_REFSTRUCTLIT(mmc_nil));
omc_Error_addMessage(threadData, _OMC_LIT69, tmpMeta[2]);
goto goto_2;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_e = tmpMeta[0+0];
_arg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _e;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpOptBidir(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg)
{
modelica_metatype _outExp = NULL;
modelica_metatype _arg = NULL;
modelica_metatype tmpMeta[3] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp4_1;
tmp4_1 = _inExp;
{
modelica_metatype _e1 = NULL;
modelica_metatype _e2 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 2; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
if (optionNone(tmp4_1)) goto tmp3_end;
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
_e1 = tmpMeta[2];
_e2 = omc_AbsynUtil_traverseExpBidir(threadData, _e1, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _inArg ,&_arg);
tmpMeta[0+0] = (referenceEq(_e1, _e2)?_inExp:mmc_mk_some(_e2));
tmpMeta[0+1] = _arg;
goto tmp3_done;
}
case 1: {
tmpMeta[0+0] = _inExp;
tmpMeta[0+1] = _inArg;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}
_outExp = tmpMeta[0+0];
_arg = tmpMeta[0+1];
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _outExp;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpBidir(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_arg)
{
modelica_metatype _e = NULL;
modelica_metatype _arg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_e = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_enterFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_enterFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_enterFunc), 2))), _inExp, _inArg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_enterFunc), 1)))) (threadData, _inExp, _inArg ,&_arg);
_e = omc_AbsynUtil_traverseExpBidirSubExps(threadData, _e, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _arg ,&_arg);
_e = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exitFunc), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exitFunc), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exitFunc), 2))), _e, _arg ,&_arg) : ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_exitFunc), 1)))) (threadData, _e, _arg ,&_arg);
_return: OMC_LABEL_UNUSED
if (out_arg) { *out_arg = _arg; }
return _e;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpListBidir(threadData_t *threadData, modelica_metatype _inExpl, modelica_fnptr _enterFunc, modelica_fnptr _exitFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outExpl = NULL;
modelica_metatype _outArg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExpl = omc_List_map2FoldCheckReferenceEq(threadData, _inExpl, boxvar_AbsynUtil_traverseExpBidir, ((modelica_fnptr) _enterFunc), ((modelica_fnptr) _exitFunc), _inArg ,&_outArg);
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExpl;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpList(threadData_t *threadData, modelica_metatype _inExpList, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outExpList = NULL;
modelica_metatype _outArg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExpList = omc_AbsynUtil_traverseExpListBidir(threadData, _inExpList, boxvar_AbsynUtil_dummyTraverseExp, ((modelica_fnptr) _inFunc), _inArg ,&_outArg);
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExpList;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpTopDown(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outArg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = omc_AbsynUtil_traverseExpBidir(threadData, _inExp, ((modelica_fnptr) _inFunc), boxvar_AbsynUtil_dummyTraverseExp, _inArg ,&_outArg);
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExp;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExp(threadData_t *threadData, modelica_metatype _inExp, modelica_fnptr _inFunc, modelica_metatype _inArg, modelica_metatype *out_outArg)
{
modelica_metatype _outExp = NULL;
modelica_metatype _outArg = NULL;
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_outExp = omc_AbsynUtil_traverseExpBidir(threadData, _inExp, boxvar_AbsynUtil_dummyTraverseExp, ((modelica_fnptr) _inFunc), _inArg ,&_outArg);
_return: OMC_LABEL_UNUSED
if (out_outArg) { *out_outArg = _outArg; }
return _outExp;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpAlgItemTupleList(threadData_t *threadData, modelica_metatype _inList, modelica_fnptr _inFunc, modelica_metatype _inTypeA)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[5] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_fnptr tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inList;
tmp3_2 = ((modelica_fnptr) _inFunc);
tmp3_3 = _inTypeA;
{
modelica_fnptr _rel;
modelica_metatype _arg = NULL;
modelica_metatype _arg_1 = NULL;
modelica_metatype _arg_2 = NULL;
modelica_metatype _cdr = NULL;
modelica_metatype _cdr_1 = NULL;
modelica_metatype _e = NULL;
modelica_metatype _ailst = NULL;
modelica_metatype _ailst_1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_arg = tmp3_3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_e = tmpMeta[3];
_ailst = tmpMeta[4];
_cdr = tmpMeta[2];
_rel = tmp3_2;
_arg = tmp3_3;
tmpMeta[1] = omc_AbsynUtil_traverseAlgorithmItemList(threadData, _ailst, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ailst_1 = tmpMeta[2];
_arg_1 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseExpAlgItemTupleList(threadData, _cdr, ((modelica_fnptr) _rel), _arg_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_cdr_1 = tmpMeta[2];
_arg_2 = tmpMeta[3];
tmpMeta[2] = mmc_mk_box2(0, _e, _ailst_1);
tmpMeta[1] = mmc_mk_cons(tmpMeta[2], _cdr_1);
tmpMeta[3] = mmc_mk_box2(0, tmpMeta[1], _arg_2);
tmpMeta[0] = tmpMeta[3];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseAlgorithmItemList(threadData_t *threadData, modelica_metatype _inAlgorithmItemList, modelica_fnptr _inFunc, modelica_metatype _inTypeA)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
modelica_metatype tmp3_1;modelica_fnptr tmp3_2;modelica_metatype tmp3_3;
tmp3_1 = _inAlgorithmItemList;
tmp3_2 = ((modelica_fnptr) _inFunc);
tmp3_3 = _inTypeA;
{
modelica_fnptr _rel;
modelica_metatype _arg = NULL;
modelica_metatype _arg_1 = NULL;
modelica_metatype _arg_2 = NULL;
modelica_metatype _ai = NULL;
modelica_metatype _ai_1 = NULL;
modelica_metatype _cdr = NULL;
modelica_metatype _cdr_1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (!listEmpty(tmp3_1)) goto tmp2_end;
_arg = tmp3_3;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
if (listEmpty(tmp3_1)) goto tmp2_end;
tmpMeta[1] = MMC_CAR(tmp3_1);
tmpMeta[2] = MMC_CDR(tmp3_1);
_ai = tmpMeta[1];
_cdr = tmpMeta[2];
_rel = tmp3_2;
_arg = tmp3_3;
tmpMeta[1] = omc_AbsynUtil_traverseAlgorithmItem(threadData, _ai, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ai_1 = tmpMeta[2];
_arg_1 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseAlgorithmItemList(threadData, _cdr, ((modelica_fnptr) _rel), _arg_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_cdr_1 = tmpMeta[2];
_arg_2 = tmpMeta[3];
tmpMeta[1] = mmc_mk_cons(_ai_1, _cdr_1);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_2);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
goto_1:;
MMC_THROW_INTERNAL();
goto tmp2_done;
tmp2_done:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseAlgorithmItem(threadData_t *threadData, modelica_metatype _inAlgorithmItem, modelica_fnptr _inFunc, modelica_metatype _inTypeA)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_fnptr tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAlgorithmItem;
tmp3_2 = ((modelica_fnptr) _inFunc);
tmp3_3 = _inTypeA;
{
modelica_fnptr _rel;
modelica_metatype _arg = NULL;
modelica_metatype _arg_1 = NULL;
modelica_metatype _alg = NULL;
modelica_metatype _alg_1 = NULL;
modelica_metatype _oc = NULL;
modelica_metatype _ai = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_alg = tmpMeta[1];
_oc = tmpMeta[2];
_info = tmpMeta[3];
_rel = tmp3_2;
_arg = tmp3_3;
tmpMeta[1] = omc_AbsynUtil_traverseAlgorithm(threadData, _alg, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_alg_1 = tmpMeta[2];
_arg_1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box4(3, &Absyn_AlgorithmItem_ALGORITHMITEM__desc, _alg_1, _oc, _info);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
_ai = tmp3_1;
_arg = tmp3_3;
tmpMeta[1] = mmc_mk_box2(0, _ai, _arg);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseAlgorithm(threadData_t *threadData, modelica_metatype _inAlgorithm, modelica_fnptr _inFunc, modelica_metatype _inTypeA)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_fnptr tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inAlgorithm;
tmp3_2 = ((modelica_fnptr) _inFunc);
tmp3_3 = _inTypeA;
{
modelica_metatype _arg = NULL;
modelica_metatype _arg_1 = NULL;
modelica_metatype _arg1_1 = NULL;
modelica_metatype _arg2_1 = NULL;
modelica_metatype _arg3_1 = NULL;
modelica_metatype _alg = NULL;
modelica_metatype _alg_1 = NULL;
modelica_metatype _ailst = NULL;
modelica_metatype _ailst1 = NULL;
modelica_metatype _ailst2 = NULL;
modelica_metatype _ailst_1 = NULL;
modelica_metatype _ailst1_1 = NULL;
modelica_metatype _ailst2_1 = NULL;
modelica_metatype _eaitlst = NULL;
modelica_metatype _eaitlst_1 = NULL;
modelica_fnptr _rel;
modelica_metatype _e_1 = NULL;
modelica_metatype _fis_1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 6; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,1,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_alg = tmp3_1;
_ailst1 = tmpMeta[1];
_eaitlst = tmpMeta[2];
_ailst2 = tmpMeta[3];
_rel = tmp3_2;
_arg = tmp3_3;
tmp3 += 4;
tmpMeta[1] = omc_AbsynUtil_traverseAlgorithmItemList(threadData, _ailst1, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ailst1_1 = tmpMeta[2];
_arg1_1 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseExpAlgItemTupleList(threadData, _eaitlst, ((modelica_fnptr) _rel), _arg1_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_eaitlst_1 = tmpMeta[2];
_arg2_1 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseAlgorithmItemList(threadData, _ailst2, ((modelica_fnptr) _rel), _arg2_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ailst2_1 = tmpMeta[2];
_arg3_1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _alg, _arg3_1);
tmpMeta[2] = mmc_mk_box2(0, _alg, _arg3_1);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],1,4) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_e_1 = tmpMeta[5];
_arg_1 = tmpMeta[6];
tmpMeta[1] = mmc_mk_box5(4, &Absyn_Algorithm_ALG__IF__desc, _e_1, _ailst1_1, _eaitlst_1, _ailst2_1);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,2,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_alg = tmp3_1;
_ailst = tmpMeta[1];
_rel = tmp3_2;
_arg = tmp3_3;
tmp3 += 3;
tmpMeta[1] = omc_AbsynUtil_traverseAlgorithmItemList(threadData, _ailst, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ailst_1 = tmpMeta[2];
_arg1_1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _alg, _arg1_1);
tmpMeta[2] = mmc_mk_box2(0, _alg, _arg1_1);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],2,2) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_fis_1 = tmpMeta[5];
_arg_1 = tmpMeta[6];
tmpMeta[1] = mmc_mk_box3(5, &Absyn_Algorithm_ALG__FOR__desc, _fis_1, _ailst_1);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,3,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_alg = tmp3_1;
_ailst = tmpMeta[1];
_rel = tmp3_2;
_arg = tmp3_3;
tmp3 += 2;
tmpMeta[1] = omc_AbsynUtil_traverseAlgorithmItemList(threadData, _ailst, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ailst_1 = tmpMeta[2];
_arg1_1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _alg, _arg1_1);
tmpMeta[2] = mmc_mk_box2(0, _alg, _arg1_1);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],3,2) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_fis_1 = tmpMeta[5];
_arg_1 = tmpMeta[6];
tmpMeta[1] = mmc_mk_box3(6, &Absyn_Algorithm_ALG__PARFOR__desc, _fis_1, _ailst_1);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_alg = tmp3_1;
_ailst = tmpMeta[1];
_rel = tmp3_2;
_arg = tmp3_3;
tmp3 += 1;
tmpMeta[1] = omc_AbsynUtil_traverseAlgorithmItemList(threadData, _ailst, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ailst_1 = tmpMeta[2];
_arg1_1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _alg, _arg1_1);
tmpMeta[2] = mmc_mk_box2(0, _alg, _arg1_1);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],4,2) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_e_1 = tmpMeta[5];
_arg_1 = tmpMeta[6];
tmpMeta[1] = mmc_mk_box3(7, &Absyn_Algorithm_ALG__WHILE__desc, _e_1, _ailst_1);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 4: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_alg = tmp3_1;
_ailst = tmpMeta[1];
_eaitlst = tmpMeta[2];
_rel = tmp3_2;
_arg = tmp3_3;
tmpMeta[1] = omc_AbsynUtil_traverseAlgorithmItemList(threadData, _ailst, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ailst_1 = tmpMeta[2];
_arg1_1 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseExpAlgItemTupleList(threadData, _eaitlst, ((modelica_fnptr) _rel), _arg1_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_eaitlst_1 = tmpMeta[2];
_arg2_1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _alg, _arg2_1);
tmpMeta[2] = mmc_mk_box2(0, _alg, _arg2_1);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],5,3) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_e_1 = tmpMeta[5];
_arg_1 = tmpMeta[6];
tmpMeta[1] = mmc_mk_box4(8, &Absyn_Algorithm_ALG__WHEN__A__desc, _e_1, _ailst_1, _eaitlst_1);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 5: {
_alg = tmp3_1;
_rel = tmp3_2;
_arg = tmp3_3;
tmpMeta[1] = mmc_mk_box2(0, _alg, _arg);
tmpMeta[2] = mmc_mk_box2(0, _alg, _arg);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_alg_1 = tmpMeta[4];
_arg_1 = tmpMeta[5];
tmpMeta[1] = mmc_mk_box2(0, _alg_1, _arg_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 6) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseExpEqItemTupleList(threadData_t *threadData, modelica_metatype _inList, modelica_fnptr _inFunc, modelica_metatype _inTypeA)
{
modelica_metatype _outTpl = NULL;
modelica_metatype _arg2 = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_arg2 = _inTypeA;
{
modelica_metatype __omcQ_24tmpVar17;
modelica_metatype* tmp1;
modelica_metatype __omcQ_24tmpVar16;
int tmp6;
modelica_metatype _el_loopVar = 0;
modelica_metatype _el;
_el_loopVar = _inList;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar17 = tmpMeta[1];
tmp1 = &__omcQ_24tmpVar17;
while(1) {
tmp6 = 1;
if (!listEmpty(_el_loopVar)) {
_el = MMC_CAR(_el_loopVar);
_el_loopVar = MMC_CDR(_el_loopVar);
tmp6--;
}
if (tmp6 == 0) {
{
modelica_metatype tmp4_1;
tmp4_1 = _el;
{
modelica_metatype _e = NULL;
modelica_metatype _eilst = NULL;
modelica_metatype _eilst_1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 1));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp4_1), 2));
_e = tmpMeta[3];
_eilst = tmpMeta[4];
tmpMeta[3] = omc_AbsynUtil_traverseEquationItemList(threadData, _eilst, ((modelica_fnptr) _inFunc), _arg2);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_eilst_1 = tmpMeta[4];
_arg2 = tmpMeta[5];
tmpMeta[3] = mmc_mk_box2(0, _e, _eilst_1);
tmpMeta[2] = tmpMeta[3];
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}__omcQ_24tmpVar16 = tmpMeta[2];
*tmp1 = mmc_mk_cons(__omcQ_24tmpVar16,0);
tmp1 = &MMC_CDR(*tmp1);
} else if (tmp6 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp1 = mmc_mk_nil();
tmpMeta[0] = __omcQ_24tmpVar17;
}
tmpMeta[4] = mmc_mk_box2(0, tmpMeta[0], _arg2);
_outTpl = tmpMeta[4];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseEquationItemList(threadData_t *threadData, modelica_metatype _inEquationItemList, modelica_fnptr _inFunc, modelica_metatype _inTypeA)
{
modelica_metatype _outTpl = NULL;
modelica_metatype _arg2 = NULL;
modelica_metatype tmpMeta[6] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
_arg2 = _inTypeA;
{
modelica_metatype __omcQ_24tmpVar19;
modelica_metatype* tmp1;
modelica_metatype __omcQ_24tmpVar18;
int tmp6;
modelica_metatype _el_loopVar = 0;
modelica_metatype _el;
_el_loopVar = _inEquationItemList;
tmpMeta[1] = MMC_REFSTRUCTLIT(mmc_nil);
__omcQ_24tmpVar19 = tmpMeta[1];
tmp1 = &__omcQ_24tmpVar19;
while(1) {
tmp6 = 1;
if (!listEmpty(_el_loopVar)) {
_el = MMC_CAR(_el_loopVar);
_el_loopVar = MMC_CDR(_el_loopVar);
tmp6--;
}
if (tmp6 == 0) {
{
modelica_metatype tmp4_1;
tmp4_1 = _el;
{
modelica_metatype _ei = NULL;
modelica_metatype _ei_1 = NULL;
volatile mmc_switch_type tmp4;
int tmp5;
tmp4 = 0;
for (; tmp4 < 1; tmp4++) {
switch (MMC_SWITCH_CAST(tmp4)) {
case 0: {
_ei = tmp4_1;
tmpMeta[3] = omc_AbsynUtil_traverseEquationItem(threadData, _ei, ((modelica_fnptr) _inFunc), _arg2);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_ei_1 = tmpMeta[4];
_arg2 = tmpMeta[5];
tmpMeta[2] = _ei_1;
goto tmp3_done;
}
}
goto tmp3_end;
tmp3_end: ;
}
goto goto_2;
goto_2:;
MMC_THROW_INTERNAL();
goto tmp3_done;
tmp3_done:;
}
}__omcQ_24tmpVar18 = tmpMeta[2];
*tmp1 = mmc_mk_cons(__omcQ_24tmpVar18,0);
tmp1 = &MMC_CDR(*tmp1);
} else if (tmp6 == 1) {
break;
} else {
MMC_THROW_INTERNAL();
}
}
*tmp1 = mmc_mk_nil();
tmpMeta[0] = __omcQ_24tmpVar19;
}
tmpMeta[3] = mmc_mk_box2(0, tmpMeta[0], _arg2);
_outTpl = tmpMeta[3];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
PROTECTED_FUNCTION_STATIC modelica_metatype omc_AbsynUtil_traverseEquationItem(threadData_t *threadData, modelica_metatype _inEquationItem, modelica_fnptr _inFunc, modelica_metatype _inTypeA)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[4] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_fnptr tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inEquationItem;
tmp3_2 = ((modelica_fnptr) _inFunc);
tmp3_3 = _inTypeA;
{
modelica_metatype _ei = NULL;
modelica_fnptr _rel;
modelica_metatype _arg = NULL;
modelica_metatype _arg_1 = NULL;
modelica_metatype _eq = NULL;
modelica_metatype _eq_1 = NULL;
modelica_metatype _oc = NULL;
modelica_metatype _info = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 2; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_eq = tmpMeta[1];
_oc = tmpMeta[2];
_info = tmpMeta[3];
_rel = tmp3_2;
_arg = tmp3_3;
tmpMeta[1] = omc_AbsynUtil_traverseEquation(threadData, _eq, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_eq_1 = tmpMeta[2];
_arg_1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box4(3, &Absyn_EquationItem_EQUATIONITEM__desc, _eq_1, _oc, _info);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_1);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
_ei = tmp3_1;
_arg = tmp3_3;
tmpMeta[1] = mmc_mk_box2(0, _ei, _arg);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 2) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}
DLLExport
modelica_metatype omc_AbsynUtil_traverseEquation(threadData_t *threadData, modelica_metatype _inEquation, modelica_fnptr _inFunc, modelica_metatype _inTypeA)
{
modelica_metatype _outTpl = NULL;
modelica_metatype tmpMeta[7] __attribute__((unused)) = {0};
MMC_SO();
_tailrecursive: OMC_LABEL_UNUSED
{
volatile modelica_metatype tmp3_1;volatile modelica_fnptr tmp3_2;volatile modelica_metatype tmp3_3;
tmp3_1 = _inEquation;
tmp3_2 = ((modelica_fnptr) _inFunc);
tmp3_3 = _inTypeA;
{
modelica_metatype _arg = NULL;
modelica_metatype _arg_1 = NULL;
modelica_metatype _arg_2 = NULL;
modelica_metatype _arg_3 = NULL;
modelica_metatype _arg_4 = NULL;
modelica_metatype _eq = NULL;
modelica_metatype _eq_1 = NULL;
modelica_fnptr _rel;
modelica_metatype _e = NULL;
modelica_metatype _e_1 = NULL;
modelica_metatype _eqilst = NULL;
modelica_metatype _eqilst1 = NULL;
modelica_metatype _eqilst2 = NULL;
modelica_metatype _eqilst_1 = NULL;
modelica_metatype _eqilst1_1 = NULL;
modelica_metatype _eqilst2_1 = NULL;
modelica_metatype _eeqitlst = NULL;
modelica_metatype _eeqitlst_1 = NULL;
modelica_metatype _fis_1 = NULL;
modelica_metatype _ei = NULL;
modelica_metatype _ei_1 = NULL;
volatile mmc_switch_type tmp3;
int tmp4;
tmp3 = 0;
MMC_TRY_INTERNAL(mmc_jumper)
tmp2_top:
threadData->mmc_jumper = &new_mmc_jumper;
for (; tmp3 < 5; tmp3++) {
switch (MMC_SWITCH_CAST(tmp3)) {
case 0: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,0,4) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 5));
_eq = tmp3_1;
_e = tmpMeta[1];
_eqilst1 = tmpMeta[2];
_eeqitlst = tmpMeta[3];
_eqilst2 = tmpMeta[4];
_rel = tmp3_2;
_arg = tmp3_3;
tmp3 += 3;
tmpMeta[1] = omc_AbsynUtil_traverseEquationItemList(threadData, _eqilst1, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_eqilst1_1 = tmpMeta[2];
_arg_1 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseExpEqItemTupleList(threadData, _eeqitlst, ((modelica_fnptr) _rel), _arg_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_eeqitlst_1 = tmpMeta[2];
_arg_2 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseEquationItemList(threadData, _eqilst2, ((modelica_fnptr) _rel), _arg_2);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_eqilst2_1 = tmpMeta[2];
_arg_3 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _eq, _arg_3);
tmpMeta[2] = mmc_mk_box2(0, _eq, _arg_3);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],0,4) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_arg_4 = tmpMeta[5];
tmpMeta[1] = mmc_mk_box5(3, &Absyn_Equation_EQ__IF__desc, _e, _eqilst1_1, _eeqitlst_1, _eqilst2_1);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_4);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 1: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,4,2) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
_eq = tmp3_1;
_eqilst = tmpMeta[1];
_rel = tmp3_2;
_arg = tmp3_3;
tmp3 += 2;
tmpMeta[1] = omc_AbsynUtil_traverseEquationItemList(threadData, _eqilst, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_eqilst_1 = tmpMeta[2];
_arg_1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _eq, _arg_1);
tmpMeta[2] = mmc_mk_box2(0, _eq, _arg_1);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],4,2) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_fis_1 = tmpMeta[5];
_arg_2 = tmpMeta[6];
tmpMeta[1] = mmc_mk_box3(7, &Absyn_Equation_EQ__FOR__desc, _fis_1, _eqilst_1);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_2);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 2: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,5,3) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 3));
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 4));
_eq = tmp3_1;
_eqilst = tmpMeta[1];
_eeqitlst = tmpMeta[2];
_rel = tmp3_2;
_arg = tmp3_3;
tmp3 += 1;
tmpMeta[1] = omc_AbsynUtil_traverseEquationItemList(threadData, _eqilst, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_eqilst_1 = tmpMeta[2];
_arg_1 = tmpMeta[3];
tmpMeta[1] = omc_AbsynUtil_traverseExpEqItemTupleList(threadData, _eeqitlst, ((modelica_fnptr) _rel), _arg_1);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_eeqitlst_1 = tmpMeta[2];
_arg_2 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _eq, _arg_2);
tmpMeta[2] = mmc_mk_box2(0, _eq, _arg_2);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],5,3) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[4]), 2));
tmpMeta[6] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_e_1 = tmpMeta[5];
_arg_3 = tmpMeta[6];
tmpMeta[1] = mmc_mk_box4(8, &Absyn_Equation_EQ__WHEN__E__desc, _e_1, _eqilst_1, _eeqitlst_1);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_3);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 3: {
if (mmc__uniontype__metarecord__typedef__equal(tmp3_1,7,1) == 0) goto tmp2_end;
tmpMeta[1] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmp3_1), 2));
_eq = tmp3_1;
_ei = tmpMeta[1];
_rel = tmp3_2;
_arg = tmp3_3;
tmpMeta[1] = omc_AbsynUtil_traverseEquationItem(threadData, _ei, ((modelica_fnptr) _rel), _arg);
tmpMeta[2] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 1));
tmpMeta[3] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[1]), 2));
_ei_1 = tmpMeta[2];
_arg_1 = tmpMeta[3];
tmpMeta[1] = mmc_mk_box2(0, _eq, _arg_1);
tmpMeta[2] = mmc_mk_box2(0, _eq, _arg_1);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
if (mmc__uniontype__metarecord__typedef__equal(tmpMeta[4],7,1) == 0) goto goto_1;
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_arg_2 = tmpMeta[5];
tmpMeta[1] = mmc_mk_box2(10, &Absyn_Equation_EQ__FAILURE__desc, _ei_1);
tmpMeta[2] = mmc_mk_box2(0, tmpMeta[1], _arg_2);
tmpMeta[0] = tmpMeta[2];
goto tmp2_done;
}
case 4: {
_eq = tmp3_1;
_rel = tmp3_2;
_arg = tmp3_3;
tmpMeta[1] = mmc_mk_box2(0, _eq, _arg);
tmpMeta[2] = mmc_mk_box2(0, _eq, _arg);
tmpMeta[3] = (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))) ? ((modelica_metatype(*)(threadData_t*, modelica_metatype, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 2))), tmpMeta[2]) : ((modelica_metatype(*)(threadData_t*, modelica_metatype)) (MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(_rel), 1)))) (threadData, tmpMeta[1]);
tmpMeta[4] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 1));
tmpMeta[5] = MMC_FETCH(MMC_OFFSET(MMC_UNTAGPTR(tmpMeta[3]), 2));
_eq_1 = tmpMeta[4];
_arg_1 = tmpMeta[5];
tmpMeta[1] = mmc_mk_box2(0, _eq_1, _arg_1);
tmpMeta[0] = tmpMeta[1];
goto tmp2_done;
}
}
goto tmp2_end;
tmp2_end: ;
}
goto goto_1;
tmp2_done:
(void)tmp3;
MMC_RESTORE_INTERNAL(mmc_jumper);
goto tmp2_done2;
goto_1:;
MMC_CATCH_INTERNAL(mmc_jumper);
if (++tmp3 < 5) {
goto tmp2_top;
}
MMC_THROW_INTERNAL();
tmp2_done2:;
}
}
_outTpl = tmpMeta[0];
_return: OMC_LABEL_UNUSED
return _outTpl;
}

DLLDirection
modelica_metatype omc_AbsynUtil_setClassCommentsAfterEnd(threadData_t *threadData, modelica_metatype __omcQ_24in_5Fcl, modelica_metatype _comments)
{
  modelica_metatype _cl = NULL;
  modelica_metatype tmpMeta1;
  MMC_SO();
  _tailrecursive: OMC_LABEL_UNUSED
  _cl = __omcQ_24in_5Fcl;
  tmpMeta1 = MMC_TAGPTR(mmc_alloc_words(11));
  memcpy(MMC_UNTAGPTR(tmpMeta1), MMC_UNTAGPTR(_cl), 11*sizeof(modelica_metatype));
  ((modelica_metatype*)MMC_UNTAGPTR(tmpMeta1))[9] = _comments;
  _cl = tmpMeta1;
  _return: OMC_LABEL_UNUSED
  return _cl;
}
